(self.webpackChunkuwazi=self.webpackChunkuwazi||[]).push([[852],{16384:(e,t,n)=>{"use strict";n.d(t,{Nd:()=>s.EventBus,ZP:()=>h,qU:()=>l});var i=n(36651),s=n(97963);function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let d={},p={},l={};i.C5&&(n(11400),d=n(97963),p=n({NODE_ENV:"production"}.HOT?99299:32372),p.GlobalWorkerOptions.workerSrc=n(79016),l=new d.DefaultTextLayerFactory);const h=a(a({},d),p)},48242:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var i,s=n(67294),o=n(80391),a=n(45398),r=n(55532),d=n(36651),p=n(16384);function l(e,t,n,s){i||(i="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,a=arguments.length-3;if(t||0===a||(t={children:void 0}),1===a)t.children=s;else if(a>1){for(var r=new Array(a),d=0;d<a;d++)r[d]=arguments[d+3];t.children=r}if(t&&o)for(var p in o)void 0===t[p]&&(t[p]=o[p]);else t||(t=o||{});return{$$typeof:i,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}class h extends s.Component{static getDerivedStateFromProps(e,t){return null!==t.filename&&t.filename!==e.filename?{pdf:{numPages:0},filename:e.filename}:null}constructor(e){super(e),this._isMounted=!1,this.state={pdf:{numPages:0},filename:e.filename},this.pagesLoaded={},this.loadDocument(e.file),this.currentPage="1",this.pages={},this.pdfReady=!1,this.pageUnloaded=this.pageUnloaded.bind(this),this.pageLoading=this.pageLoading.bind(this),this.onPageVisible=this.onPageVisible.bind(this),this.onPageHidden=this.onPageHidden.bind(this)}componentDidMount(){this._isMounted=!0,this.pdfContainer&&(document.addEventListener("textlayerrendered",(e=>{this.pageLoaded(e.detail.pageNumber)})),document.addEventListener("textlayerrendered",this.props.onPageLoaded,{once:!0}))}shouldComponentUpdate(e,t){return e.file!==this.props.file||e.filename!==this.props.filename||e.style!==this.props.style||t.pdf!==this.state.pdf}componentDidUpdate(e){null!==e.filename&&this.props.filename!==e.filename&&(this.pagesLoaded={},this.loadDocument(e.file)),this.state.pdf.numPages&&!this.pdfReady&&(this.pdfReady=!0,this.props.onPDFReady())}componentWillUnmount(){this._isMounted=!1}onPageVisible(e,t){this.pages[e]=t;const n=Object.keys(this.pages).reduce(((e,t)=>!this.pages[t-1]||this.pages[t]>this.pages[t-1]?t:e),1);this.currentPage!==n&&(this.currentPage=n,this.props.onPageChange(Number(n)))}onPageHidden(e){delete this.pages[e]}loadDocument(e){d.C5&&p.ZP.getDocument({url:e,cMapUrl:"/legacy_character_maps/",cMapPacked:true}).promise.then((e=>{this._isMounted&&this.setState({pdf:e})}))}pageUnloaded(e){delete this.pagesLoaded[e],this.loaded()}pageLoading(e){this.pagesLoaded[e]=!1}pageLoaded(e){this.pagesLoaded[e]=!0;0===Object.keys(this.pagesLoaded).map((e=>this.pagesLoaded[e])).filter((e=>!e)).length&&this.loaded()}loaded(){const e=Object.keys(this.pagesLoaded).map((e=>parseInt(e,10)));(0,a.Y)(e,{treatAs:"number"}).reduce(((e,t)=>!1===e?e:(null===e||!(t-e>1))&&t),null)&&this.props.onLoad({pages:e})}render(){return s.createElement("div",{ref:e=>{this.pdfContainer=e},style:this.props.style},l(o.O,{onSelect:this.props.onTextSelection,onDeselect:this.props.onTextDeselection},void 0,(()=>{const e=[];for(let t=1;t<=this.state.pdf.numPages;t+=1)e.push(l("div",{className:"page-wrapper"},t,l(o.gK,{regionId:t.toString()},void 0,l(r.S,{onUnload:this.pageUnloaded,onLoading:this.pageLoading,onVisible:this.onPageVisible,onHidden:this.onPageHidden,page:t,pdf:this.state.pdf,highlightReference:this.props.highlightReference}))));return e})()))}}h.defaultProps={onPageLoaded:()=>{},filename:null,onPageChange:()=>{},onPDFReady:()=>{},style:{},onTextSelection:()=>{},onTextDeselection:()=>{},highlightReference:()=>{}};const c=h},93414:()=>{},70172:()=>{},2001:()=>{},33779:()=>{},66558:()=>{},82258:()=>{}}]);
//# sourceMappingURL=LazyLoadPDF.8f8bcbea39be3aa6ba49.bundle.js.map