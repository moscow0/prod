{"version":3,"file":"LazyLoadBarChart.d2a45b677bd3b2f65601.bundle.js","mappings":"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","sources":["webpack://uwazi/./app/react/Markdown/components/BarChart.js"],"sourcesContent":["var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport Immutable from 'immutable';\n\nimport {\nResponsiveContainer,\nBarChart,\nXAxis,\nYAxis,\nCartesianGrid,\nBar,\nTooltip,\nCell } from\n'recharts';\n\nimport Loader from \"../../components/Elements/Loader\";\nimport { arrayUtils } from \"../../Charts\";\nimport markdownDatasets from \"../markdownDatasets\";\n\nconst objectFlip = (obj) => {\n  const flip = {};\n  Object.keys(obj).forEach((key) => {\n    flip[obj[key]] = key;\n  });\n  return flip;\n};\n\nclass BarChartComponent extends Component {\n  parseAttributes() {\n    const shortLabels = JSON.parse(this.props.shortLabels);\n    const sort = JSON.parse(this.props.sort);\n    const pluckCategories = JSON.parse(this.props.pluckCategories);\n    return { sort, shortLabels, pluckCategories };\n  }\n\n  X() {\n    if (this.props.layout === 'vertical') {\n      return /*#__PURE__*/_jsx(XAxis, { type: \"number\", dataKey: \"results\" });\n    }\n    return /*#__PURE__*/_jsx(XAxis, { dataKey: \"label\", label: \"\" });\n  }\n\n  Y() {\n    if (this.props.layout === 'vertical') {\n      return /*#__PURE__*/_jsx(YAxis, { width: 200, type: \"category\", dataKey: \"label\" });\n    }\n    return /*#__PURE__*/_jsx(YAxis, {});\n  }\n\n  render() {\n    const {\n      excludeZero,\n      maxCategories,\n      layout,\n      property,\n      data,\n      classname,\n      context,\n      scatter,\n      colors } =\n    this.props;\n    let output = /*#__PURE__*/_jsx(Loader, {});\n\n    if (data) {\n      const sliceColors = colors.split(',');\n      const aggregateOthers = this.props.aggregateOthers === 'true';\n      const { sort, shortLabels, pluckCategories } = this.parseAttributes();\n      const shortLabelsFlipped = objectFlip(shortLabels);\n\n      const formattedData = arrayUtils.formatDataForChart(data, property, {\n        excludeZero: Boolean(excludeZero),\n        context,\n        scatter: Boolean(scatter),\n        maxCategories,\n        aggregateOthers,\n        pluckCategories,\n        sort,\n        labelsMap: shortLabels });\n\n\n      output = /*#__PURE__*/\n      _jsx(ResponsiveContainer, { height: 320 }, void 0, /*#__PURE__*/\n      _jsx(BarChart, { height: 300, data: formattedData, layout: layout }, void 0,\n      this.X(),\n      this.Y(), /*#__PURE__*/\n\n      _jsx(CartesianGrid, { strokeDasharray: \"2 4\" }), /*#__PURE__*/\n      _jsx(Tooltip, {\n        formatter: (value, _name, props) => {\n          if (scatter) {\n            const { parent } = props.payload;\n            return shortLabelsFlipped[value] || [value, `\\r\\n${parent}`];\n          }\n          return shortLabelsFlipped[value] || value;\n        } }), /*#__PURE__*/\n\n      _jsx(Bar, { dataKey: \"results\", fill: \"rgb(30, 28, 138)\", stackId: \"unique\" }, void 0,\n      formattedData.map((_entry, index) => /*#__PURE__*/\n      _jsx(Cell\n      // eslint-disable-next-line react/no-array-index-key\n      , {\n        cursor: \"pointer\",\n        fill: sliceColors[index % sliceColors.length] }, `cell-${index}`)))));\n\n\n\n\n\n\n    }\n\n    return /*#__PURE__*/_jsx(\"div\", { className: `BarChart ${classname}` }, void 0, output);\n  }}\n\n\nBarChartComponent.defaultProps = {\n  context: 'System',\n  scatter: false,\n  excludeZero: false,\n  layout: 'horizontal',\n  maxCategories: '0',\n  aggregateOthers: 'false',\n  classname: '',\n  data: null,\n  colors: '#1e1c8a',\n  shortLabels: '{}',\n  sort: '{}',\n  pluckCategories: '[]' };\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nexport const mapStateToProps = (state, props) => ({\n  data: markdownDatasets.getAggregations(state, props),\n  thesauris: state.thesauris });\n\n\nexport default connect(mapStateToProps)(BarChartComponent);"],"names":["REACT_ELEMENT_TYPE","_jsx","type","props","key","children","Symbol","for","defaultProps","childrenLength","arguments","length","childArray","Array","i","propName","$$typeof","ref","_owner","BarChartComponent","Component","parseAttributes","shortLabels","JSON","parse","this","sort","pluckCategories","X","layout","dataKey","label","Y","width","render","excludeZero","maxCategories","property","data","classname","context","scatter","colors","output","sliceColors","split","aggregateOthers","shortLabelsFlipped","obj","flip","Object","keys","forEach","objectFlip","formattedData","Boolean","labelsMap","height","strokeDasharray","formatter","value","_name","parent","payload","fill","stackId","map","_entry","index","cursor","className","mapStateToProps","state","thesauris","connect"],"sourceRoot":""}