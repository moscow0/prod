{"version":3,"file":"main.bdcbf86873fcb7e85417.js","mappings":"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","sources":["webpack://uwazi/webpack/runtime/chunk loaded","webpack://uwazi/webpack/runtime/load script","webpack://uwazi/webpack/runtime/css loading","webpack://uwazi/./app/react/App/ErrorHandling/ErrorBoundary.tsx","webpack://uwazi/./app/react/App/ErrorHandling/ErrorFallback.tsx","webpack://uwazi/./app/react/App/Footer.js","webpack://uwazi/./app/react/App/ModalTips.js","webpack://uwazi/./app/react/App/SearchTipsContent.tsx","webpack://uwazi/./app/react/App/ShowIf.js","webpack://uwazi/./app/react/App/libraryViewInfo.ts","webpack://uwazi/./app/react/Attachments/actions/actionTypes.js","webpack://uwazi/./app/react/Attachments/actions/actions.js","webpack://uwazi/./app/react/Attachments/components/AttachmentsModal.tsx","webpack://uwazi/./app/react/Metadata/components/UploadButton.js","webpack://uwazi/./app/shared/languages.js","webpack://uwazi/./app/react/Attachments/components/ViewDocumentLink.tsx","webpack://uwazi/./app/react/Attachments/components/File.tsx","webpack://uwazi/./app/react/Attachments/components/FileList.tsx","webpack://uwazi/./app/react/Attachments/components/UploadSupportingFile.tsx","webpack://uwazi/./app/react/Attachments/components/WebMediaResourceForm.tsx","webpack://uwazi/./app/react/Attachments/components/UploadAttachment.js","webpack://uwazi/./app/react/Attachments/reducers/manageAttachmentsReducer.js","webpack://uwazi/./app/react/Attachments/reducers/progressReducer.js","webpack://uwazi/./app/react/Attachments/reducers/reducer.js","webpack://uwazi/./app/react/Attachments/components/RenderAttachment.tsx","webpack://uwazi/./app/react/Attachments/components/AttachmentForm.js","webpack://uwazi/./app/react/Attachments/components/Attachment.js","webpack://uwazi/./app/react/Attachments/components/AttachmentsList.js","webpack://uwazi/./app/react/Auth/actions.js","webpack://uwazi/./app/react/Auth/components/NeedAuthorization.tsx","webpack://uwazi/./app/react/Auth/index.js","webpack://uwazi/./app/react/BasicReducer/index.js","webpack://uwazi/./app/react/BasicReducer/reducer.js","webpack://uwazi/./app/react/Charts/components/ExtendedTooltip.js","webpack://uwazi/./app/react/Charts/components/LibraryCharts.js","webpack://uwazi/./app/react/Charts/components/LibraryChart.js","webpack://uwazi/./app/react/Charts/index.js","webpack://uwazi/./app/react/Charts/utils/arrayUtils.js","webpack://uwazi/./app/react/Charts/utils/colorScheme.js","webpack://uwazi/./app/react/Connections/actions/actionTypes.js","webpack://uwazi/./app/react/Connections/components/SearchResults.js","webpack://uwazi/./app/react/Connections/actions/uiActions.js","webpack://uwazi/./app/react/Connections/actions/actions.js","webpack://uwazi/./app/react/Connections/components/ActionButton.js","webpack://uwazi/./app/react/Connections/components/SearchForm.js","webpack://uwazi/./app/react/Connections/components/CreateConnectionPanel.js","webpack://uwazi/./app/react/ConnectionsList/actions/actions.js","webpack://uwazi/./app/react/ConnectionsList/components/ResetSearch.js","webpack://uwazi/./app/react/ConnectionsList/components/SearchBar.js","webpack://uwazi/./app/react/Relationships/components/HubRelationshipMetadata.js","webpack://uwazi/./app/react/Relationships/components/LeftRelationship.js","webpack://uwazi/./app/react/Relationships/components/RightRelationship.js","webpack://uwazi/./app/react/Relationships/components/RelationshipsGraphEdit.js","webpack://uwazi/./app/react/Relationships/components/LoadMoreRelationshipsButton.js","webpack://uwazi/./app/react/ConnectionsList/components/ConnectionsList.js","webpack://uwazi/./app/react/ConnectionsList/components/ConnectionsGroup.js","webpack://uwazi/./app/react/ConnectionsList/components/ConnectionsGroups.js","webpack://uwazi/./app/react/ConnectionsList/reducers/reducer.js","webpack://uwazi/./app/react/ContextMenu/actions/actionTypes.js","webpack://uwazi/./app/react/DocumentForm/components/FormGroup.js","webpack://uwazi/./app/react/Documents/DocumentsAPI.js","webpack://uwazi/./app/react/Documents/helpers.js","webpack://uwazi/./app/react/Documents/components/TocForm.js","webpack://uwazi/./app/react/Documents/components/ShowToc.js","webpack://uwazi/./app/react/Viewer/components/Connection.js","webpack://uwazi/./app/react/Viewer/components/ConnectionsList.js","webpack://uwazi/./app/react/Documents/components/SnippetList.js","webpack://uwazi/./app/react/SemanticSearch/components/DocumentResults.js","webpack://uwazi/./app/react/Documents/components/SearchText.js","webpack://uwazi/./app/react/Documents/components/SnippetsTab.js","webpack://uwazi/./app/react/Documents/components/DocumentSidePanel.js","webpack://uwazi/./app/react/Entities/EntitiesAPI.js","webpack://uwazi/./app/react/Entities/actions/actionTypes.js","webpack://uwazi/./app/react/Entities/actions/actions.js","webpack://uwazi/./app/react/Entities/actions/uiActions.js","webpack://uwazi/./app/react/Entities/utils/filterBaseProperties.js","webpack://uwazi/./app/react/Forms/components/DropdownList.js","webpack://uwazi/./app/shared/optionsUtils.js","webpack://uwazi/./app/react/Forms/components/MultiSelect.tsx","webpack://uwazi/./app/react/Forms/components/Select.js","webpack://uwazi/./app/react/Forms/components/DatePicker.js","webpack://uwazi/./app/react/Forms/components/Captcha.js","webpack://uwazi/./app/react/Forms/components/DateRange.js","webpack://uwazi/./app/react/Forms/components/FormGroup.js","webpack://uwazi/./app/react/Forms/components/LookupMultiSelect.tsx","webpack://uwazi/./app/react/Forms/components/MarkDown.tsx","webpack://uwazi/./app/react/Forms/components/Nested.js","webpack://uwazi/./app/react/Forms/components/NestedMultiselect.js","webpack://uwazi/./app/react/Forms/components/MultiDate.tsx","webpack://uwazi/./app/react/Forms/components/MultiDateRange.js","webpack://uwazi/./app/react/Forms/components/IconSelectorItem.js","webpack://uwazi/./app/react/Forms/components/IconSelector.js","webpack://uwazi/./app/react/Forms/components/Numeric.js","webpack://uwazi/./app/react/Forms/components/NumericRange.js","webpack://uwazi/./app/react/Forms/components/NumericRangeSlide.js","webpack://uwazi/./app/react/Forms/components/RadioButtons.js","webpack://uwazi/./app/react/Forms/components/Switcher.tsx","webpack://uwazi/./app/react/Forms/components/Geolocation.js","webpack://uwazi/./app/react/Forms/components/LinkField.js","webpack://uwazi/./app/react/Forms/components/FormValue.js","webpack://uwazi/./app/react/Forms/components/MediaField.tsx","webpack://uwazi/./app/react/Forms/components/MultiSuggest.tsx","webpack://uwazi/./app/react/utils/objectWithoutKeys.js","webpack://uwazi/./app/react/I18N/components/I18NLink.tsx","webpack://uwazi/./app/react/I18N/components/I18NMenu.js","webpack://uwazi/./app/react/I18N/components/I18N.js","webpack://uwazi/./app/react/I18N/components/Translate.js","webpack://uwazi/./app/react/I18N/components/TranslateForm.js","webpack://uwazi/./app/react/I18N/utils.js","webpack://uwazi/./app/react/I18N/I18NApi.js","webpack://uwazi/./app/react/I18N/actions/I18NActions.js","webpack://uwazi/./app/react/I18N/t.js","webpack://uwazi/./app/shared/translate.js","webpack://uwazi/./app/react/Library/components/SortButtons.js","webpack://uwazi/./app/react/Layout/DocumentCounter.tsx","webpack://uwazi/./app/react/Layout/components/Welcome.tsx","webpack://uwazi/./app/react/Layout/TilesViewer.tsx","webpack://uwazi/./app/react/Layout/DocumentsList.js","webpack://uwazi/./app/react/Layout/Icon.js","webpack://uwazi/./app/react/Layout/Lists.js","webpack://uwazi/./app/react/Layout/Modal.js","webpack://uwazi/./app/react/Layout/SearchInput.js","webpack://uwazi/./app/react/Layout/SidePanel.js","webpack://uwazi/./app/react/Layout/TemplateLabel.js","webpack://uwazi/./app/react/Layout/Tip.js","webpack://uwazi/./app/react/Layout/Warning.js","webpack://uwazi/./app/react/Favorites/components/FavoriteBanner.tsx","webpack://uwazi/./app/react/Layout/DocumentLanguage.js","webpack://uwazi/./app/react/Layout/ItemSnippet.js","webpack://uwazi/./app/react/Layout/Item.js","webpack://uwazi/./app/react/Layout/Thumbnail.js","webpack://uwazi/./app/react/Layout/ConfirmModal.js","webpack://uwazi/./app/react/Layout/ConfirmButton.js","webpack://uwazi/./app/react/Layout/CurrentLocationLink.js","webpack://uwazi/./app/react/Layout/BackButton.js","webpack://uwazi/./app/react/Library/actions/actionTypes.js","webpack://uwazi/./app/react/Library/actions/libraryActions.js","webpack://uwazi/./app/react/Library/actions/quickLabelActions.ts","webpack://uwazi/./app/react/Library/actions/saveEntityWithFiles.ts","webpack://uwazi/./app/react/Library/docState.js","webpack://uwazi/./app/react/Library/components/UploadEntityStatus.js","webpack://uwazi/./app/react/Library/components/ViewDocButton.js","webpack://uwazi/./app/react/Library/components/Doc.js","webpack://uwazi/./app/react/Library/components/SearchBar.js","webpack://uwazi/./app/react/Library/components/SelectFilter.js","webpack://uwazi/./app/react/Library/helpers/blankState.js","webpack://uwazi/./app/react/Library/helpers/libraryFilters.js","webpack://uwazi/./app/react/Library/helpers/publishedStatusFilter.ts","webpack://uwazi/./app/react/Map/MapContainer.tsx","webpack://uwazi/./app/react/Map/helper.js","webpack://uwazi/./app/react/Map/Markers.js","webpack://uwazi/./app/react/Map/index.js","webpack://uwazi/./app/react/Markdown/components/MarkdownLink.js","webpack://uwazi/./app/react/Markdown/components/MarkdownMedia.js","webpack://uwazi/./app/react/Markdown/components/Counter.js","webpack://uwazi/./app/react/Markdown/components/ContactForm.js","webpack://uwazi/./app/shared/propertyNames.ts","webpack://uwazi/./app/react/Markdown/utils.js","webpack://uwazi/./app/react/Markdown/components/EntityData.tsx","webpack://uwazi/./app/react/Markdown/components/Section.tsx","webpack://uwazi/./app/react/Markdown/components/EntitySection.tsx","webpack://uwazi/./app/react/Markdown/components/Context.js","webpack://uwazi/./app/react/Markdown/components/EntityLink.js","webpack://uwazi/./app/react/Markdown/components/slider.js","webpack://uwazi/./app/react/Markdown/components/ItemList.js","webpack://uwazi/./app/react/Markdown/components/Repeat.js","webpack://uwazi/./app/react/Markdown/components/Connect.js","webpack://uwazi/./app/react/Markdown/components/Map.js","webpack://uwazi/./app/react/Markdown/components/PayPalDonateLink.js","webpack://uwazi/./app/react/Markdown/components/PublicForm.js","webpack://uwazi/./app/react/Markdown/components/Value.js","webpack://uwazi/./app/react/Markdown/components/SearchBox.js","webpack://uwazi/./app/react/Markdown/components/EntityInfo.js","webpack://uwazi/./app/react/Markdown/components/index.js","webpack://uwazi/./app/react/Markdown/CustomHooks/components/CejilChart.js","webpack://uwazi/./app/react/Markdown/CustomHooks/utils/parsingUtils.js","webpack://uwazi/./app/react/Markdown/CustomHooks/components/cejilChart001.js","webpack://uwazi/./app/react/Markdown/CustomHooks/components/CejilChart002.js","webpack://uwazi/./app/react/Markdown/CustomHooks/components/cejilHero.js","webpack://uwazi/./app/react/Markdown/CustomHooks/index.js","webpack://uwazi/./app/react/Markdown/markdownToReact.js","webpack://uwazi/./app/react/Markdown/MarkdownViewer.js","webpack://uwazi/./app/react/Markdown/index.js","webpack://uwazi/./app/react/Markdown/markdownDatasets.js","webpack://uwazi/./app/react/Metadata/actions/actions.js","webpack://uwazi/./app/react/Metadata/actions/metadataExtractionActions.ts","webpack://uwazi/./app/react/Metadata/actions/supportingFilesActions.ts","webpack://uwazi/./app/react/Metadata/components/SearchEntities.tsx","webpack://uwazi/./app/react/Metadata/components/CopyFromEntity.tsx","webpack://uwazi/./app/react/Metadata/components/DeleteSelectionButton.tsx","webpack://uwazi/./app/react/Metadata/components/MediaModalFileList.tsx","webpack://uwazi/./app/react/Metadata/components/MediaModalUploadFileButton.tsx","webpack://uwazi/./app/react/Metadata/components/MediaModal.tsx","webpack://uwazi/./app/api/files/extensionHelper.ts","webpack://uwazi/./app/react/Metadata/components/GeolocationViewer.js","webpack://uwazi/./app/react/Metadata/components/GroupedGeolocationViewer.tsx","webpack://uwazi/./app/react/Metadata/components/RelationshipLink.tsx","webpack://uwazi/./app/react/Metadata/components/ValueList.js","webpack://uwazi/./app/react/Metadata/components/Metadata.js","webpack://uwazi/./app/react/Metadata/components/MetadataExtractor.tsx","webpack://uwazi/./app/react/Layout/ToggleDisplay.js","webpack://uwazi/./app/react/Metadata/components/IconField.js","webpack://uwazi/./app/react/Metadata/components/MetadataFormFiles.tsx","webpack://uwazi/./app/react/Metadata/components/SupportingFiles.tsx","webpack://uwazi/./app/react/Metadata/components/PDFUpload.tsx","webpack://uwazi/./app/react/Metadata/components/MetadataForm.js","webpack://uwazi/./app/react/Metadata/components/MultipleEditionFieldWarning.js","webpack://uwazi/./app/react/Metadata/components/MetadataFormFields.js","webpack://uwazi/./app/shared/config.ts","webpack://uwazi/./app/react/Metadata/components/Pill.tsx","webpack://uwazi/./app/react/Metadata/helpers/comonTemplate.js","webpack://uwazi/./app/react/Metadata/helpers/defaultTemplate.js","webpack://uwazi/./app/react/Metadata/helpers/formater.js","webpack://uwazi/./app/react/Metadata/helpers/validator.js","webpack://uwazi/./app/react/Metadata/selectors.js","webpack://uwazi/./app/react/Metadata/containers/FormatMetadata.js","webpack://uwazi/./app/react/Timeline/utils/timelineFixedData.js","webpack://uwazi/./app/react/Timeline/components/TimelineViewer.js","webpack://uwazi/./app/react/Metadata/components/ShowMetadata.js","webpack://uwazi/./app/api/utils/filters.js","webpack://uwazi/./app/shared/types/permissionSchema.ts","webpack://uwazi/./app/react/Permissions/components/MemberListItemInfo.tsx","webpack://uwazi/./app/react/Permissions/components/UserGroupsLookupField.tsx","webpack://uwazi/./app/react/Permissions/components/MemberListItemPermission.tsx","webpack://uwazi/./app/react/Permissions/components/MembersList.tsx","webpack://uwazi/./app/react/Permissions/components/ShareEntityModal.tsx","webpack://uwazi/./app/react/Permissions/actions/actions.ts","webpack://uwazi/./app/react/Permissions/PermissionsAPI.ts","webpack://uwazi/./app/react/Permissions/components/ShareButton.tsx","webpack://uwazi/./app/react/Metadata/components/MetadataFormButtons.js","webpack://uwazi/./app/react/Metadata/components/SelectMultiplePanel.js","webpack://uwazi/./app/react/Metadata/helpers/wrapper.js","webpack://uwazi/./app/react/Modals/actions/actionTypes.js","webpack://uwazi/./app/react/Multireducer/multireducer.js","webpack://uwazi/./app/react/Multireducer/wrapDispatch.js","webpack://uwazi/./app/react/Multireducer/index.js","webpack://uwazi/./app/react/Notifications/actions/actionTypes.js","webpack://uwazi/./app/react/Notifications/actions/notificationsActions.js","webpack://uwazi/./app/react/Notifications/components/Notification.js","webpack://uwazi/./app/react/Notifications/components/Notifications.js","webpack://uwazi/./app/react/Notifications/index.js","webpack://uwazi/./app/react/PDF/index.js","webpack://uwazi/./app/react/Pages/actions/actionTypes.js","webpack://uwazi/./app/react/ReactReduxForms/index.js","webpack://uwazi/./app/react/Relationships/actions/actionTypes.js","webpack://uwazi/./app/react/Relationships/actions/actions.js","webpack://uwazi/./app/react/Relationships/actions/uiActions.js","webpack://uwazi/./app/react/Relationships/components/RelationshipsFormButtons.js","webpack://uwazi/./app/react/Relationships/utils/routeUtils.js","webpack://uwazi/./app/react/Search/SearchAPI.js","webpack://uwazi/./app/react/SemanticSearch/SemanticSearchAPI.js","webpack://uwazi/./app/react/SemanticSearch/actions/actions.js","webpack://uwazi/./app/react/SemanticSearch/components/FeatureToggleSemanticSearch.tsx","webpack://uwazi/./app/react/Settings/actions/actionTypes.js","webpack://uwazi/./app/react/Templates/actions/actionTypes.js","webpack://uwazi/./app/react/Templates/components/ViolatedArticlesNestedProperties.js","webpack://uwazi/./app/react/Templates/utils/getFieldLabel.js","webpack://uwazi/./app/react/Templates/utils/templateCommonProperties.js","webpack://uwazi/./app/react/ToggledFeatures/tocGeneration/TocGeneratedLabel.tsx","webpack://uwazi/./app/react/ToggledFeatures/tocGeneration/actions.ts","webpack://uwazi/./app/react/ToggledFeatures/tocGeneration/ReviewTocButton.tsx","webpack://uwazi/./app/react/ToggledFeatures/tocGeneration/FilterTocGeneration.tsx","webpack://uwazi/./app/react/ToggledFeatures/tocGeneration/utils.ts","webpack://uwazi/./app/react/UI/Icon/two-factor-auth.ts","webpack://uwazi/./app/react/UI/Icon/info-circle-hollow.ts","webpack://uwazi/./app/react/UI/Icon/save-and-next.js","webpack://uwazi/./app/react/UI/Icon/export-csv.js","webpack://uwazi/./app/react/UI/Icon/import-csv.ts","webpack://uwazi/./app/react/UI/Icon/copy-from.ts","webpack://uwazi/./app/react/UI/Icon/funnel-filter.ts","webpack://uwazi/./app/react/UI/Icon/library.js","webpack://uwazi/./app/react/UI/Icon/Icon.js","webpack://uwazi/./app/react/UI/ProgressBar/ProgressBar.js","webpack://uwazi/./app/react/UI/CountryList/CountryList.js","webpack://uwazi/./app/react/UI/ToggleButton/ToggleButton.tsx","webpack://uwazi/./app/react/Uploads/actions/actionTypes.js","webpack://uwazi/./app/react/Uploads/actions/uploadsActions.js","webpack://uwazi/./app/react/Viewer/actions/actionTypes.js","webpack://uwazi/./app/react/Viewer/actions/referencesActions.js","webpack://uwazi/./app/react/Viewer/actions/selectionActions.js","webpack://uwazi/./app/react/Viewer/actions/uiActions.js","webpack://uwazi/./app/react/Viewer/referencesAPI.js","webpack://uwazi/./app/react/Viewer/selectors.js","webpack://uwazi/./app/react/Viewer/utils/Marker.js","webpack://uwazi/./app/react/Viewer/utils/Scroller.js","webpack://uwazi/./app/react/Viewer/utils/sortTextSelections.js","webpack://uwazi/./app/react/components/Elements/FeatureToggle.tsx","webpack://uwazi/./app/react/components/Elements/Loader.js","webpack://uwazi/./app/react/config.js","webpack://uwazi/./app/react/App/Provider.js","webpack://uwazi/./app/react/App/Cookiepopup.js","webpack://uwazi/./app/react/App/DropdownMenu.tsx","webpack://uwazi/./app/react/utils/useOnClickOutsideElementHook.ts","webpack://uwazi/./app/react/App/Menu.js","webpack://uwazi/./app/react/App/SiteName.js","webpack://uwazi/./app/react/App/Confirm.js","webpack://uwazi/./app/react/App/GoogleAnalytics.js","webpack://uwazi/./app/react/App/Matomo.js","webpack://uwazi/./app/react/App/App.js","webpack://uwazi/./app/shared/JSONUtils.js","webpack://uwazi/./app/react/App/RouteHandler.js","webpack://uwazi/./app/react/Activitylog/actions/activitylogActions.js","webpack://uwazi/./app/react/Activitylog/components/ActivitylogForm.js","webpack://uwazi/./app/react/Activitylog/components/DescriptionWrapper.js","webpack://uwazi/./app/react/Activitylog/components/ActivitylogRow.js","webpack://uwazi/./app/react/Activitylog/components/ActivitylogList.js","webpack://uwazi/./app/react/Activitylog/Activitylog.js","webpack://uwazi/./app/react/Auth2fa/Auth2faAPI.ts","webpack://uwazi/./app/react/Auth2fa/actions/actions.ts","webpack://uwazi/./app/react/Auth2fa/Configure2fa.tsx","webpack://uwazi/./app/react/App/SelectFileButton.tsx","webpack://uwazi/./app/react/I18N/components/EditTranslationForm.js","webpack://uwazi/./app/react/I18N/EditTranslations.js","webpack://uwazi/./app/react/Library/components/DocumentsList.js","webpack://uwazi/./app/react/Library/components/HiddenColumnsDropdownItem.tsx","webpack://uwazi/./app/react/Library/components/HiddenColumnsDropdown.tsx","webpack://uwazi/./app/react/Library/components/LibraryModeToggleButtons.js","webpack://uwazi/./app/shared/types/userSchema.ts","webpack://uwazi/./app/react/Library/helpers/tableColumns.ts","webpack://uwazi/./app/react/Library/helpers/setReduxState.js","webpack://uwazi/./app/react/Library/helpers/requestState.js","webpack://uwazi/./app/react/Library/actions/filterActions.js","webpack://uwazi/./app/react/Library/components/DocumentTypesList.js","webpack://uwazi/./app/react/Library/components/TemplatesFilter.tsx","webpack://uwazi/./app/react/Library/components/AssigneeFilter.tsx","webpack://uwazi/./app/react/Library/components/FiltrablePermissionsLevels.ts","webpack://uwazi/./app/react/Library/components/PermissionsFilter.tsx","webpack://uwazi/./app/react/Library/components/PublishedFilters.tsx","webpack://uwazi/./app/react/utils/coreSelectors.js","webpack://uwazi/./app/react/Library/components/DateFilter.js","webpack://uwazi/./app/react/Library/components/NestedFilter.js","webpack://uwazi/./app/react/Library/components/NumberRangeFilter.js","webpack://uwazi/./app/react/Library/components/TextFilter.js","webpack://uwazi/./app/react/Library/components/FiltersFromProperties.js","webpack://uwazi/./app/react/Library/components/FiltersForm.js","webpack://uwazi/./app/react/Library/components/LibraryFilters.js","webpack://uwazi/./app/react/Thesauri/Notice.tsx","webpack://uwazi/./app/react/Review/components/StateSelector.js","webpack://uwazi/./app/react/Library/components/QuickLabelPanel.tsx","webpack://uwazi/./app/react/Modals/actions/modalActions.js","webpack://uwazi/./app/react/Modals/index.js","webpack://uwazi/./app/react/Library/containers/EntityForm.js","webpack://uwazi/./app/react/Library/components/ViewMetadataPanel.js","webpack://uwazi/./app/react/Library/containers/SelectMultiplePanelContainer.js","webpack://uwazi/./app/react/Library/components/SearchDescription.js","webpack://uwazi/./app/react/SemanticSearch/components/SearchItem.js","webpack://uwazi/./app/react/SemanticSearch/components/SearchList.js","webpack://uwazi/./app/react/SemanticSearch/components/SemanticSearchPanel.js","webpack://uwazi/./app/react/components/Elements/StackTrace.js","webpack://uwazi/./app/react/Uploads/components/ImportProgress.js","webpack://uwazi/./app/react/Uploads/components/ImportPanel.js","webpack://uwazi/./app/react/Library/components/QuickLabelHeader.tsx","webpack://uwazi/./app/react/Library/actions/exportActions.ts","webpack://uwazi/./app/react/Library/components/ExportButton.tsx","webpack://uwazi/./app/react/Library/components/PDFUploadButton.tsx","webpack://uwazi/./app/react/Library/components/LibraryFooter.tsx","webpack://uwazi/./app/react/Library/LibraryLayout.js","webpack://uwazi/./app/react/Library/components/TableCell.tsx","webpack://uwazi/./app/react/Library/components/TableRow.tsx","webpack://uwazi/./app/react/Layout/TableRows.tsx","webpack://uwazi/./app/react/Layout/TableViewer.tsx","webpack://uwazi/./app/react/Library/Library.js","webpack://uwazi/./app/react/Library/components/MapView.js","webpack://uwazi/./app/react/Library/LibraryMap.js","webpack://uwazi/./app/react/Templates/components/Icons.js","webpack://uwazi/./app/react/MetadataExtraction/actions/actions.ts","webpack://uwazi/./app/react/MetadataExtraction/SuggestionsAPI.ts","webpack://uwazi/./app/react/MetadataExtraction/PropertyConfigurationModal.tsx","webpack://uwazi/./app/react/MetadataExtraction/MetadataExtractionDashboard.tsx","webpack://uwazi/./app/react/UI/BasicTable/Pagination.tsx","webpack://uwazi/./app/react/MetadataExtraction/SuggestionAcceptanceModal.tsx","webpack://uwazi/./app/shared/types/suggestionSchema.ts","webpack://uwazi/./app/react/MetadataExtraction/SuggestionsTable.tsx","webpack://uwazi/./app/shared/getIXSuggestionState.ts","webpack://uwazi/./app/shared/isSameDate.ts","webpack://uwazi/./app/react/Viewer/utils/determineDirection.js","webpack://uwazi/./app/react/Viewer/components/Document.js","webpack://uwazi/./app/react/Viewer/components/SourceDocument.js","webpack://uwazi/./app/react/Viewer/actions/documentActions.js","webpack://uwazi/./app/react/Viewer/containers/DocumentForm.js","webpack://uwazi/./app/react/MetadataExtraction/PDFSidePanel.tsx","webpack://uwazi/./app/react/MetadataExtraction/GridChart.tsx","webpack://uwazi/./app/react/MetadataExtraction/useContainerWidthHook.ts","webpack://uwazi/./app/react/MetadataExtraction/TrainingHealthLegend.tsx","webpack://uwazi/./app/react/MetadataExtraction/TrainingHealthDashboard.tsx","webpack://uwazi/./app/react/MetadataExtraction/CancelFindingSuggestionsModal.tsx","webpack://uwazi/./app/react/MetadataExtraction/EntitySuggestions.tsx","webpack://uwazi/./app/react/App/ErrorHandling/GeneralError.tsx","webpack://uwazi/./app/react/MetadataExtraction/SuggestionsContainer.tsx","webpack://uwazi/./app/react/Pages/PagesAPI.js","webpack://uwazi/./app/react/Pages/components/PageCreator.tsx","webpack://uwazi/./app/react/Pages/actions/pageActions.ts","webpack://uwazi/./app/react/Pages/components/ValidatePage.js","webpack://uwazi/./app/react/Pages/EditPage.js","webpack://uwazi/./app/react/Pages/NewPage.js","webpack://uwazi/./app/react/Pages/components/PagesList.js","webpack://uwazi/./app/react/Pages/Pages.js","webpack://uwazi/./app/react/Pages/components/Script.js","webpack://uwazi/./app/react/Pages/components/PageViewer.js","webpack://uwazi/./app/react/App/ErrorHandling/ErrorUtils.ts","webpack://uwazi/./app/react/utils/markdownEscapedValues.js","webpack://uwazi/./app/react/Pages/utils/pageItemLists.js","webpack://uwazi/./app/react/Pages/utils/getPageAssets.ts","webpack://uwazi/./app/react/Pages/PageView.js","webpack://uwazi/./app/react/RelationTypes/RelationTypesAPI.js","webpack://uwazi/./app/react/RelationTypes/actions/relationTypesActions.js","webpack://uwazi/./app/react/Templates/TemplatesAPI.js","webpack://uwazi/./app/react/Templates/actions/templateActions.js","webpack://uwazi/./app/react/RelationTypes/actions/relationTypeActions.js","webpack://uwazi/./app/react/RelationTypes/actions/actionTypes.js","webpack://uwazi/./app/react/Forms/components/ColorPicker.js","webpack://uwazi/./app/react/Templates/actions/uiActions.js","webpack://uwazi/./app/react/Templates/utils/checkErrorsOnLabel.js","webpack://uwazi/./app/react/Templates/components/SimilarProperty.tsx","webpack://uwazi/./app/react/Templates/components/FilterSuggestions.tsx","webpack://uwazi/./app/react/Templates/components/PropertyConfigOption.js","webpack://uwazi/./app/react/Templates/components/PropertyConfigOptions.js","webpack://uwazi/./app/react/Templates/components/FormConfigInput.js","webpack://uwazi/./app/react/Templates/components/FormConfigSelect.js","webpack://uwazi/./app/react/Templates/components/FormConfigRelationship.js","webpack://uwazi/./app/react/Templates/components/FormConfigNested.js","webpack://uwazi/./app/react/Templates/components/PrioritySortingLabel.js","webpack://uwazi/./app/react/Templates/components/FormConfigCommon.js","webpack://uwazi/./app/react/Templates/components/FormConfigMultimedia.js","webpack://uwazi/./app/react/Templates/components/MetadataProperty.js","webpack://uwazi/./app/react/Templates/components/RemovePropertyConfirm.js","webpack://uwazi/./app/react/Thesauri/actions/actionTypes.js","webpack://uwazi/./app/react/Thesauri/ThesauriAPI.js","webpack://uwazi/./app/react/Thesauri/components/AddThesaurusButton.tsx","webpack://uwazi/./app/react/Thesauri/actions/thesauriActions.js","webpack://uwazi/./app/react/RelationTypes/components/AddRelationshipTypeButton.tsx","webpack://uwazi/./app/react/Settings/components/ToggleChildren.tsx","webpack://uwazi/./app/react/Templates/components/TemplateAsPageControl.tsx","webpack://uwazi/./app/react/Templates/components/ValidateTemplate.js","webpack://uwazi/./app/react/Templates/components/MetadataTemplate.tsx","webpack://uwazi/./app/react/Templates/components/PropertyOption.js","webpack://uwazi/./app/react/Templates/components/TemplateCreator.js","webpack://uwazi/./app/react/RelationTypes/EditRelationType.js","webpack://uwazi/./app/react/RelationTypes/NewRelationType.js","webpack://uwazi/./app/react/Review/actions/actions.ts","webpack://uwazi/./app/react/ContextMenu/components/ContextMenu.js","webpack://uwazi/./app/react/ContextMenu/actions/contextMenuActions.js","webpack://uwazi/./app/react/ContextMenu/components/Buttons.js","webpack://uwazi/./app/react/ContextMenu/index.js","webpack://uwazi/./app/react/Entities/components/ShowSidepanelMenu.js","webpack://uwazi/./app/react/Relationships/components/SearchEntitiesForm.js","webpack://uwazi/./app/react/Relationships/components/AddEntities.js","webpack://uwazi/./app/react/Relationships/components/RelationshipMetadata.js","webpack://uwazi/./app/react/Review/common.ts","webpack://uwazi/./app/react/Review/components/OneUpEntityButtons.tsx","webpack://uwazi/./app/react/Review/components/OneUpSidePanel.tsx","webpack://uwazi/./app/react/Review/components/OneUpTitleBar.tsx","webpack://uwazi/./app/react/Review/components/OneUpEntityViewer.tsx","webpack://uwazi/./app/react/Review/OneUpReview.tsx","webpack://uwazi/./app/react/Library/components/SearchButton.js","webpack://uwazi/./app/react/SemanticSearch/components/ResultsFiltersPanel.js","webpack://uwazi/./app/react/SemanticSearch/actions/index.js","webpack://uwazi/./app/react/SemanticSearch/components/DocumentResultsPanel.js","webpack://uwazi/./app/react/SemanticSearch/components/ResultsSidePanel.js","webpack://uwazi/./app/react/SemanticSearch/components/SemanticSearchMultieditPanel.js","webpack://uwazi/./app/react/SemanticSearch/components/SemanticSearchResults.js","webpack://uwazi/./app/react/SemanticSearch/SemanticSearchResultsView.js","webpack://uwazi/./app/react/Users/UsersAPI.js","webpack://uwazi/./app/react/Users/components/usergroups/UserGroupList.tsx","webpack://uwazi/./app/react/Users/components/usergroups/actions/actions.ts","webpack://uwazi/./app/react/Users/components/usergroups/UserGroupsAPI.ts","webpack://uwazi/./app/react/Users/actions/actions.ts","webpack://uwazi/./app/react/Users/components/usergroups/UserGroupSidePanel.tsx","webpack://uwazi/./app/react/Users/components/usergroups/UserGroups.tsx","webpack://uwazi/./app/react/Users/components/UserList.tsx","webpack://uwazi/./app/react/Users/components/PermissionsList.tsx","webpack://uwazi/./app/react/Users/components/UserSidePanel.tsx","webpack://uwazi/./app/react/Users/components/Users.tsx","webpack://uwazi/./app/react/Users/UserManagement.tsx","webpack://uwazi/./app/react/Settings/components/AccountSettings.js","webpack://uwazi/./app/react/Settings/SettingsAPI.ts","webpack://uwazi/./app/react/Settings/components/collectionSettingsTips.tsx","webpack://uwazi/./app/react/utils/routeHelpers.ts","webpack://uwazi/./app/react/Settings/components/SettingsLabel.tsx","webpack://uwazi/./app/react/Settings/components/SettingsFormElement.tsx","webpack://uwazi/./app/react/Settings/components/CollectionSettings.tsx","webpack://uwazi/./app/react/Settings/actions/settingsActions.js","webpack://uwazi/./app/react/Settings/components/Customisation.js","webpack://uwazi/./app/react/Settings/components/EntityTypesList.js","webpack://uwazi/./app/react/Templates/actions/templatesActions.js","webpack://uwazi/./app/react/Layout/DragAndDrop/DragAndDropItem.js","webpack://uwazi/./app/react/Layout/DragAndDrop/DragAndDropContainer.js","webpack://uwazi/./app/react/Settings/components/FiltersForm.js","webpack://uwazi/./app/react/Settings/components/Languages.js","webpack://uwazi/./app/react/Settings/components/NavlinkForm.js","webpack://uwazi/./app/react/Settings/actions/uiActions.js","webpack://uwazi/./app/react/Settings/actions/navlinksActions.js","webpack://uwazi/./app/react/Settings/utils/ValidateNavlinks.js","webpack://uwazi/./app/react/Settings/components/NavlinksSettings.js","webpack://uwazi/./app/react/Settings/components/RelationTypesList.js","webpack://uwazi/./app/react/Thesauri/actions/thesaurisActions.js","webpack://uwazi/./app/react/Settings/components/ThesauriList.js","webpack://uwazi/./app/react/Settings/utils/sortThesauri.js","webpack://uwazi/./app/react/Settings/components/TranslationsList.js","webpack://uwazi/./app/react/Settings/utils/resolveProperty.ts","webpack://uwazi/./app/react/Settings/utils/suggestions.ts","webpack://uwazi/./app/react/Settings/components/SettingsNavigation.tsx","webpack://uwazi/./app/react/Settings/Settings.js","webpack://uwazi/./app/react/Settings/components/PreserveSettings.tsx","webpack://uwazi/./app/react/Settings/components/CustomUploads.js","webpack://uwazi/./app/react/Templates/components/OnTemplateLoaded.tsx","webpack://uwazi/./app/react/Templates/EditTemplate.js","webpack://uwazi/./app/react/Templates/NewTemplate.js","webpack://uwazi/./app/react/Thesauri/components/ThesauriFormField.js","webpack://uwazi/./app/react/Thesauri/components/ThesauriFormGroup.js","webpack://uwazi/./app/react/Thesauri/components/ThesauriFormItem.js","webpack://uwazi/./app/react/Thesauri/components/ThesauriForm.js","webpack://uwazi/./app/react/Thesauri/EditThesauri.js","webpack://uwazi/./app/react/Thesauri/NewThesauri.js","webpack://uwazi/./app/react/Thesauri/ThesaurusCockpit.tsx","webpack://uwazi/./app/react/Thesauri/actions/cockpitActions.ts","webpack://uwazi/./app/react/Thesauri/utils/suggestionQuery.ts","webpack://uwazi/./app/react/Thesauri/utils/valuesSort.ts","webpack://uwazi/./app/react/Uploads/components/UploadBox.js","webpack://uwazi/./app/react/Uploads/components/UploadsHeader.js","webpack://uwazi/./app/react/Uploads/UploadsRoute.js","webpack://uwazi/./app/react/Users/Login.js","webpack://uwazi/./app/react/Users/ResetPassword.js","webpack://uwazi/./app/react/Users/UnlockAccount.js","webpack://uwazi/./app/react/Viewer/components/Paginator.js","webpack://uwazi/./app/react/Viewer/components/ConfirmCloseForm.js","webpack://uwazi/./app/react/Viewer/components/ViewMetadataPanel.js","webpack://uwazi/./app/react/Viewer/components/ViewerDefaultMenu.js","webpack://uwazi/./app/react/Viewer/components/ViewerTextSelectedMenu.js","webpack://uwazi/./app/react/Viewer/components/TargetDocumentHeader.js","webpack://uwazi/./app/react/Viewer/components/TargetDocument.js","webpack://uwazi/./app/react/Viewer/utils/ocrStatusTips.ts","webpack://uwazi/./app/react/Viewer/components/OCRStatus.tsx","webpack://uwazi/./app/react/Viewer/actions/ocrActions.ts","webpack://uwazi/./app/react/Viewer/components/Viewer.js","webpack://uwazi/./app/react/Viewer/actions/routeActions.js","webpack://uwazi/./app/react/Viewer/PDFView.js","webpack://uwazi/./app/react/Entities/components/SearchButton.js","webpack://uwazi/./app/react/Entities/containers/EntityForm.js","webpack://uwazi/./app/react/Entities/components/EntityViewer.js","webpack://uwazi/./app/react/Viewer/pageAssets.ts","webpack://uwazi/./app/react/Viewer/EntityView.js","webpack://uwazi/./app/react/Viewer/components/ViewerComponent.js","webpack://uwazi/./app/react/Viewer/ViewerRoute.js","webpack://uwazi/./app/react/Library/LibraryTable.js","webpack://uwazi/./app/react/Routes.js","webpack://uwazi/./app/react/App.js","webpack://uwazi/./app/react/App/sockets.js","webpack://uwazi/./app/react/index.js","webpack://uwazi/./app/react/socket.js","webpack://uwazi/./app/react/Templates/reducers/uiReducer.js","webpack://uwazi/./app/react/Templates/reducers/reducer.js","webpack://uwazi/./app/react/Pages/reducers/reducer.js","webpack://uwazi/./app/react/Pages/reducers/uiReducer.js","webpack://uwazi/./app/react/Notifications/reducers/notificationsReducer.js","webpack://uwazi/./app/react/Thesauri/reducers/reducer.js","webpack://uwazi/./app/react/Activitylog/reducer.js","webpack://uwazi/./app/react/Viewer/reducers/referencesReducer.js","webpack://uwazi/./app/react/Viewer/reducers/uiReducer.js","webpack://uwazi/./app/react/Viewer/reducers/reducer.js","webpack://uwazi/./app/react/Entities/reducers/uiReducer.js","webpack://uwazi/./app/react/Entities/reducers/reducer.js","webpack://uwazi/./app/react/ContextMenu/reducers/contextMenuReducer.js","webpack://uwazi/./app/react/Connections/reducers/connectionReducer.js","webpack://uwazi/./app/react/Connections/reducers/uiReducer.js","webpack://uwazi/./app/react/Connections/reducers/reducer.js","webpack://uwazi/./app/react/Relationships/reducers/hubsReducer.js","webpack://uwazi/./app/react/Relationships/reducers/hubActionsReducer.js","webpack://uwazi/./app/react/Relationships/reducers/uiReducer.js","webpack://uwazi/./app/react/Relationships/reducers/reducer.js","webpack://uwazi/./app/react/SemanticSearch/reducers/reducer.js","webpack://uwazi/./app/react/Library/reducers/documentsReducer.js","webpack://uwazi/./app/react/Library/reducers/uiReducer.js","webpack://uwazi/./app/react/Library/reducers/filtersReducer.js","webpack://uwazi/./app/react/Library/reducers/aggregationsReducer.js","webpack://uwazi/./app/react/Library/reducers/reducer.js","webpack://uwazi/./app/react/Modals/reducers/modalsReducer.js","webpack://uwazi/./app/react/Uploads/reducers/progressReducer.js","webpack://uwazi/./app/react/Uploads/reducers/importReducer.js","webpack://uwazi/./app/react/Auth/reducer.js","webpack://uwazi/./app/react/Settings/reducers/reducer.js","webpack://uwazi/./app/react/Settings/reducers/uiReducer.js","webpack://uwazi/./app/react/Metadata/reducers/progressReducer.js","webpack://uwazi/./app/react/Metadata/reducer.js","webpack://uwazi/./app/react/Metadata/actions/actionTypes.js","webpack://uwazi/./app/react/I18N/reducer.js","webpack://uwazi/./app/react/I18N/inlineEditReducer.js","webpack://uwazi/./app/react/Review/reducers/reducer.js","webpack://uwazi/./app/react/Library/reducers/exportReducer.ts","webpack://uwazi/./app/react/reducer.js","webpack://uwazi/./app/react/store.ts","webpack://uwazi/./app/react/utils/RequestParams.ts","webpack://uwazi/./app/react/utils/SafeHTML.js","webpack://uwazi/./app/react/utils/advancedSort.js","webpack://uwazi/./app/react/App/LoadingProgressBar.js","webpack://uwazi/./app/react/utils/api.js","webpack://uwazi/./app/react/utils/colors.js","webpack://uwazi/./app/react/utils/debounce.js","webpack://uwazi/./app/react/utils/getFileExtension.ts","webpack://uwazi/./app/react/utils/index.js","webpack://uwazi/./app/react/utils/prioritySortingCriteria.js","webpack://uwazi/./app/shared/IDGenerator.ts","webpack://uwazi/./app/shared/JSONRequest.js","webpack://uwazi/./app/shared/commonTopicClassification.ts","webpack://uwazi/./app/shared/comonProperties.js","webpack://uwazi/./app/shared/entityDefaultDocument.ts","webpack://uwazi/./app/shared/fileUploadUtils.ts","webpack://uwazi/./app/shared/languagesList.ts","webpack://uwazi/./app/shared/propertyTypes.ts","webpack://uwazi/./app/shared/superagent.ts","webpack://uwazi/./app/shared/tsUtils.ts","webpack://uwazi/./app/shared/provenanceTypes.ts","webpack://uwazi/./app/shared/types/commonSchemas.ts","webpack://uwazi/./app/shared/uniqueID.js","webpack://uwazi/./node_modules/moment/locale/ sync ^\\.\\/.*$","webpack://uwazi/webpack/bootstrap","webpack://uwazi/webpack/runtime/amd options","webpack://uwazi/webpack/runtime/compat get default export","webpack://uwazi/webpack/runtime/define property getters","webpack://uwazi/webpack/runtime/ensure chunk","webpack://uwazi/webpack/runtime/get javascript chunk filename","webpack://uwazi/webpack/runtime/get mini-css chunk filename","webpack://uwazi/webpack/runtime/global","webpack://uwazi/webpack/runtime/harmony module decorator","webpack://uwazi/webpack/runtime/hasOwnProperty shorthand","webpack://uwazi/webpack/runtime/make namespace object","webpack://uwazi/webpack/runtime/node module decorator","webpack://uwazi/webpack/runtime/runtimeId","webpack://uwazi/webpack/runtime/publicPath","webpack://uwazi/webpack/runtime/jsonp chunk loading","webpack://uwazi/webpack/startup"],"sourcesContent":["var deferred = [];\n__webpack_require__.O = (result, chunkIds, fn, priority) => {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar [chunkIds, fn, priority] = deferred[i];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","var inProgress = {};\nvar dataWebpackPrefix = \"uwazi:\";\n// loadScript function to load a script via script tag\n__webpack_require__.l = (url, done, key, chunkId) => {\n\tif(inProgress[url]) { inProgress[url].push(done); return; }\n\tvar script, needAttach;\n\tif(key !== undefined) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tfor(var i = 0; i < scripts.length; i++) {\n\t\t\tvar s = scripts[i];\n\t\t\tif(s.getAttribute(\"src\") == url || s.getAttribute(\"data-webpack\") == dataWebpackPrefix + key) { script = s; break; }\n\t\t}\n\t}\n\tif(!script) {\n\t\tneedAttach = true;\n\t\tscript = document.createElement('script');\n\n\t\tscript.charset = 'utf-8';\n\t\tscript.timeout = 120;\n\t\tif (__webpack_require__.nc) {\n\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n\t\t}\n\t\tscript.setAttribute(\"data-webpack\", dataWebpackPrefix + key);\n\t\tscript.src = url;\n\t}\n\tinProgress[url] = [done];\n\tvar onScriptComplete = (prev, event) => {\n\t\t// avoid mem leaks in IE.\n\t\tscript.onerror = script.onload = null;\n\t\tclearTimeout(timeout);\n\t\tvar doneFns = inProgress[url];\n\t\tdelete inProgress[url];\n\t\tscript.parentNode && script.parentNode.removeChild(script);\n\t\tdoneFns && doneFns.forEach((fn) => (fn(event)));\n\t\tif(prev) return prev(event);\n\t}\n\t;\n\tvar timeout = setTimeout(onScriptComplete.bind(null, undefined, { type: 'timeout', target: script }), 120000);\n\tscript.onerror = onScriptComplete.bind(null, script.onerror);\n\tscript.onload = onScriptComplete.bind(null, script.onload);\n\tneedAttach && document.head.appendChild(script);\n};","var createStylesheet = (chunkId, fullhref, resolve, reject) => {\n\tvar linkTag = document.createElement(\"link\");\n\n\tlinkTag.rel = \"stylesheet\";\n\tlinkTag.type = \"text/css\";\n\tvar onLinkComplete = (event) => {\n\t\t// avoid mem leaks.\n\t\tlinkTag.onerror = linkTag.onload = null;\n\t\tif (event.type === 'load') {\n\t\t\tresolve();\n\t\t} else {\n\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n\t\t\tvar realHref = event && event.target && event.target.href || fullhref;\n\t\t\tvar err = new Error(\"Loading CSS chunk \" + chunkId + \" failed.\\n(\" + realHref + \")\");\n\t\t\terr.code = \"CSS_CHUNK_LOAD_FAILED\";\n\t\t\terr.type = errorType;\n\t\t\terr.request = realHref;\n\t\t\tlinkTag.parentNode.removeChild(linkTag)\n\t\t\treject(err);\n\t\t}\n\t}\n\tlinkTag.onerror = linkTag.onload = onLinkComplete;\n\tlinkTag.href = fullhref;\n\n\tdocument.head.appendChild(linkTag);\n\treturn linkTag;\n};\nvar findStylesheet = (href, fullhref) => {\n\tvar existingLinkTags = document.getElementsByTagName(\"link\");\n\tfor(var i = 0; i < existingLinkTags.length; i++) {\n\t\tvar tag = existingLinkTags[i];\n\t\tvar dataHref = tag.getAttribute(\"data-href\") || tag.getAttribute(\"href\");\n\t\tif(tag.rel === \"stylesheet\" && (dataHref === href || dataHref === fullhref)) return tag;\n\t}\n\tvar existingStyleTags = document.getElementsByTagName(\"style\");\n\tfor(var i = 0; i < existingStyleTags.length; i++) {\n\t\tvar tag = existingStyleTags[i];\n\t\tvar dataHref = tag.getAttribute(\"data-href\");\n\t\tif(dataHref === href || dataHref === fullhref) return tag;\n\t}\n};\nvar loadStylesheet = (chunkId) => {\n\treturn new Promise((resolve, reject) => {\n\t\tvar href = __webpack_require__.miniCssF(chunkId);\n\t\tvar fullhref = __webpack_require__.p + href;\n\t\tif(findStylesheet(href, fullhref)) return resolve();\n\t\tcreateStylesheet(chunkId, fullhref, resolve, reject);\n\t});\n}\n// object to store loaded CSS chunks\nvar installedCssChunks = {\n\t179: 0\n};\n\n__webpack_require__.f.miniCss = (chunkId, promises) => {\n\tvar cssChunks = {\"593\":1,\"741\":1,\"809\":1,\"852\":1};\n\tif(installedCssChunks[chunkId]) promises.push(installedCssChunks[chunkId]);\n\telse if(installedCssChunks[chunkId] !== 0 && cssChunks[chunkId]) {\n\t\tpromises.push(installedCssChunks[chunkId] = loadStylesheet(chunkId).then(() => {\n\t\t\tinstalledCssChunks[chunkId] = 0;\n\t\t}, (e) => {\n\t\t\tdelete installedCssChunks[chunkId];\n\t\t\tthrow e;\n\t\t}));\n\t}\n};\n\n// no hmr","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}function _defineProperty(obj, key, value) {if (key in obj) {Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });} else {obj[key] = value;}return obj;}import React from 'react';\nimport { ErrorFallback } from \"./ErrorFallback\";\n\n\n\n\n\n\n\nconst defaultProps = {\n  error: {},\n  errorInfo: '',\n  children: '' };\n\nclass ErrorBoundary extends React.Component {\n\n\n  constructor(props) {\n    super(props);\n    this.state = { error: props.error, errorInfo: props.errorInfo };\n  }\n\n  componentDidCatch(error, errorInfo) {\n    this.setState({\n      error,\n      errorInfo });\n\n  }\n\n  render() {var _this$state$error;\n    if ((_this$state$error = this.state.error) !== null && _this$state$error !== void 0 && _this$state$error.message) {\n      return /*#__PURE__*/_jsx(ErrorFallback, { error: this.state.error, errorInfo: this.state.errorInfo });\n    }\n    return this.props.children;\n  }}_defineProperty(ErrorBoundary, \"defaultProps\", defaultProps);\n\n\nexport { ErrorBoundary };","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import React from 'react';\n\nimport { Translate } from \"../../I18N\";\n\n\n\n\n\nexport const ErrorFallback = (props) => {var _props$error$code, _props$errorInfo;\n  const showRequestId = ((_props$error$code = props.error.code) === null || _props$error$code === void 0 ? void 0 : _props$error$code.toString()) === '500' && props.error.requestId;\n  const errorDetails = ((_props$errorInfo = props.errorInfo) === null || _props$errorInfo === void 0 ? void 0 : _props$errorInfo.componentStack) || props.error.message;\n  return /*#__PURE__*/(\n    _jsx(\"div\", { className: \"error-fallback-ui\" }, void 0, /*#__PURE__*/\n    _jsx(\"div\", { className: \"message\" }, void 0, /*#__PURE__*/\n    _jsx(\"p\", { className: \"error-message-xxl\" }, void 0,\n    props.error.summary || /*#__PURE__*/_jsx(Translate, {}, void 0, \"Well, this is awkward...\")), /*#__PURE__*/\n\n    _jsx(\"p\", { className: \"error-message-lg\" }, void 0,\n    props.error.name || /*#__PURE__*/_jsx(Translate, {}, void 0, \"Something went wrong\")), /*#__PURE__*/\n\n    _jsx(\"p\", {}, void 0, /*#__PURE__*/\n    _jsx(Translate, {}, void 0, \"Please contact an admin for details.\")),\n\n    showRequestId && /*#__PURE__*/\n    _jsx(\"p\", { className: \"error-message-sm\" }, void 0, /*#__PURE__*/\n    _jsx(Translate, {}, void 0, \"Request id #\"),\n    props.error.requestId),\n\n\n    errorDetails && /*#__PURE__*/_jsx(\"details\", { className: \"error-details\" }, void 0, errorDetails)),\n\n    props.error.code && /*#__PURE__*/_jsx(\"span\", { className: \"error-code\" }, void 0, props.error.code)));\n\n\n};","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { I18NLink, Translate } from \"../I18N\";\nimport { createSelector } from 'reselect';\nimport { libraryViewInfo } from \"./libraryViewInfo\";\n\nconst getLibraryURL = (libraryView) =>\nlibraryViewInfo[libraryView] ? `/${libraryViewInfo[libraryView].url}` : '/library';\n\nclass Footer extends Component {\n  render() {\n    return /*#__PURE__*/(\n      _jsx(\"footer\", {}, void 0, /*#__PURE__*/\n      _jsx(\"ul\", { className: \"footer-nav\" }, void 0, /*#__PURE__*/\n      _jsx(\"li\", { className: \"footer-nav_item\" }, void 0, /*#__PURE__*/\n      _jsx(\"div\", { className: \"footer-tooltip\" }, void 0, /*#__PURE__*/\n      _jsx(\"p\", {}, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Uwazi is developed by\"), ' ', /*#__PURE__*/\n      _jsx(\"a\", { href: \"https://huridocs.org/\", target: \"_blank\" }, void 0, /*#__PURE__*/\n      _jsx(\"img\", {\n        src: \"/public/huridocs-logo.svg\",\n        title: \"HURIDOCS\",\n        alt: \"Human Rights Information and Documentation Systems\" })))), /*#__PURE__*/\n\n\n\n\n      _jsx(\"a\", { href: \"https://www.uwazi.io/\", target: \"_blank\", className: \"footer-logo\" }, void 0, /*#__PURE__*/\n      _jsx(\"img\", { src: \"/public/logo.svg\", title: \"uwazi\", alt: \"uwazi\" }))), /*#__PURE__*/\n\n\n\n      _jsx(\"li\", { className: \"footer-nav_separator\" }, void 0, \"\\xA0\"), /*#__PURE__*/\n\n      _jsx(\"li\", { className: \"footer-nav_item footer-collection_name\" }, void 0, /*#__PURE__*/\n      _jsx(\"span\", {}, void 0, this.props.siteName)), /*#__PURE__*/\n\n\n      _jsx(\"li\", { className: \"footer-nav_separator\" }, void 0, \"\\xA0\"), /*#__PURE__*/\n\n      _jsx(\"li\", { className: \"footer-nav_item\" }, void 0, /*#__PURE__*/\n      _jsx(I18NLink, { to: getLibraryURL(this.props.defaultLibraryView) }, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Library\"))),\n\n\n      (() => {\n        if (!this.props.user._id) {\n          return /*#__PURE__*/(\n            _jsx(\"li\", { className: \"footer-nav_item\" }, void 0, /*#__PURE__*/\n            _jsx(I18NLink, { to: \"/login\" }, void 0, /*#__PURE__*/\n            _jsx(Translate, {}, void 0, \"Login\"))));\n\n\n\n        }\n\n        return /*#__PURE__*/(\n          _jsx(\"li\", { className: \"footer-nav_item\" }, void 0, /*#__PURE__*/\n          _jsx(I18NLink, { to: \"/settings/account\" }, void 0, /*#__PURE__*/\n          _jsx(Translate, {}, void 0, \"Settings\"))));\n\n\n\n      })())));\n\n\n\n  }}\n\n\n\n\n\n\n\n\nFooter.defaultProps = {\n  defaultLibraryView: 'cards' };\n\n\nconst selectUser = createSelector(\n(s) => s.user,\n(u) => u.toJS());\n\n\nexport function mapStateToProps(state) {\n  return {\n    user: selectUser(state),\n    siteName: state.settings.collection.get('site_name'),\n    defaultLibraryView: state.settings.collection.get('defaultLibraryView') };\n\n}\n\nexport default connect(mapStateToProps)(Footer);","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport { t } from \"../I18N\";\nimport Modal from \"../Layout/Modal\";\n// eslint-disable-next-line import/exports-last\nexport default class ModalTips extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpen: false };\n\n  }\n\n  render() {\n    return /*#__PURE__*/(\n      React.createElement(React.Fragment, null, /*#__PURE__*/\n      _jsx(\"div\", { className: \"modal-tip-label\", onClick: () => this.setState({ isOpen: true }) }, void 0,\n      this.props.label), /*#__PURE__*/\n\n      _jsx(Modal, { isOpen: this.state.isOpen, type: this.props.type, className: \"modal-tip-dim\" }, void 0, /*#__PURE__*/\n      _jsx(Modal.Body, {}, void 0, /*#__PURE__*/\n      _jsx(\"h4\", {}, void 0, this.props.title),\n      this.props.children), /*#__PURE__*/\n\n      _jsx(Modal.Footer, {}, void 0, /*#__PURE__*/\n      _jsx(\"button\", {\n        type: \"button\",\n        className: \"btn confirm-button btn-info\",\n        onClick: () => this.setState({ isOpen: false }) }, void 0,\n\n      t('System', 'Accept'))))));\n\n\n\n\n\n  }}\n\n\nModalTips.defaultProps = {\n  type: 'info' };","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import React from 'react';\nimport { t } from \"../I18N\";\n\nconst SearchTipsContent = () => {\n  return /*#__PURE__*/(\n    _jsx(\"ul\", {}, void 0, /*#__PURE__*/\n    _jsx(\"li\", {}, void 0,\n    t(\n    'System',\n    'Search Tips: wildcard',\n    'Use an * for wildcard search. Ie: \"juris*\" will match words  ' +\n    'such as jurisdiction, jurisdictional, jurists, jurisprudence, etc.',\n    false)), /*#__PURE__*/\n\n\n    _jsx(\"li\", {}, void 0,\n    t(\n    'System',\n    'Search Tips: one char wildcard',\n    '? for one character wildcard. Ie: \"198?\" will match 1980 to 1989 and also 198a, 198b, etc.',\n    false)), /*#__PURE__*/\n\n\n    _jsx(\"li\", {}, void 0,\n    t(\n    'System',\n    'Search Tips: exact term',\n    'Exact term match by enclosing your search string with quotes. Ie. \"Costa Rica\"' +\n    ' will toss different results compared to Costa Rica without quotes.',\n    false)), /*#__PURE__*/\n\n\n    _jsx(\"li\", {}, void 0,\n    t(\n    'System',\n    'Search Tips: proximity',\n    '~ for proximity searches. Ie: \"the status\"~5 will find anything having \"the\" and' +\n    '\"status\" within a distance of 5 words, such as \"the procedural status\", \"the specific legal status\".',\n    false)), /*#__PURE__*/\n\n\n    _jsx(\"li\", {}, void 0,\n    t(\n    'System',\n    'Search Tips: boolean',\n    'AND, OR and NOT for boolean searches. Ie. \"status AND women NOT Nicaragua\" will match anything ' +\n    'containing both the words status and women, and necessarily not containing the word Nicaragua.',\n    false))));\n\n\n\n\n};\n\nexport { SearchTipsContent };","import PropTypes from 'prop-types';\nimport { Component } from 'react';\n\nexport class ShowIf extends Component {\n  render() {\n    if (!this.props.if) {\n      return false;\n    }\n\n    return this.props.children;\n  }}\n\n\n\n\n\n\n\nexport default ShowIf;","export const libraryViewInfo = {\n  cards: {\n    url: 'library',\n    icon: 'th' },\n\n  table: {\n    url: 'library/table',\n    icon: 'align-justify' },\n\n  map: {\n    url: 'library/map',\n    icon: 'map-marker' } };","export const START_UPLOAD_ATTACHMENT = 'START_UPLOAD_ATTACHMENT';\nexport const ATTACHMENT_PROGRESS = 'ATTACHMENT_PROGRESS';\nexport const ATTACHMENT_COMPLETE = 'ATTACHMENT_COMPLETE';\nexport const ATTACHMENT_LOCAL_COMPLETE = 'ATTACHMENT_LOCAL_COMPLETE';\nexport const ATTACHMENT_DELETED = 'ATTACHMENT_DELETED';\nexport const ATTACHMENT_RENAMED = 'ATTACHMENT_RENAMED';","import { actions as formActions } from 'react-redux-form';\nimport superagent from 'superagent';\n\nimport { APIURL } from \"../../config.js\";\nimport { notify } from \"../../Notifications/actions/notificationsActions\";\nimport { updateEntity, selectSingleDocument } from \"../../Library/actions/libraryActions\";\nimport api from \"../../utils/api\";\nimport { RequestParams } from \"../../utils/RequestParams\";\nimport { actions as basicReducerActions } from \"../../BasicReducer\";\n\nimport * as types from \"./actionTypes\";\n\nexport function updateFile(file, entity) {\n  return async (dispatch) => {\n    await api.post('files', new RequestParams(file));\n    const documents = entity.documents.map((f) => {\n      if (f._id === file._id) {\n        return file;\n      }\n      return f;\n    });\n    const updatedEntity = Object.assign(entity, { documents });\n    dispatch(basicReducerActions.set('viewer/doc', updatedEntity));\n    dispatch(updateEntity(updatedEntity));\n    await dispatch(selectSingleDocument(updatedEntity));\n    dispatch(notify('File updated', 'success'));\n  };\n}\n\nexport function deleteFile(file, entity) {\n  return async (dispatch) => {\n    await api.delete('files', new RequestParams({ _id: file._id }));\n    const documents = entity.documents.filter((f) => f._id !== file._id);\n\n    const updatedEntity = Object.assign(entity, { documents });\n    dispatch(basicReducerActions.set('viewer/doc', updatedEntity));\n    dispatch(updateEntity(updatedEntity));\n    await dispatch(selectSingleDocument(updatedEntity));\n    dispatch(notify('File deleted', 'success'));\n  };\n}\n\nexport function uploadAttachment(entity, file, storeKeys) {\n  return async (dispatch) => {\n    dispatch({ type: types.START_UPLOAD_ATTACHMENT, entity });\n    superagent.\n    post(`${APIURL}files/upload/attachment`).\n    set('Accept', 'application/json').\n    set('X-Requested-With', 'XMLHttpRequest').\n    field('entity', entity).\n    field('originalname', file.name).\n    attach('file', file).\n    on('progress', (data) => {\n      dispatch({ type: types.ATTACHMENT_PROGRESS, entity, progress: Math.floor(data.percent) });\n    }).\n    on('response', (result) => {\n      dispatch({ type: types.ATTACHMENT_PROGRESS, entity, progress: 100 });\n      dispatch({\n        type: types.ATTACHMENT_COMPLETE,\n        entity,\n        file: JSON.parse(result.text),\n        __reducerKey: storeKeys.__reducerKey });\n\n      dispatch(notify('Attachment uploaded', 'success'));\n    }).\n    end();\n  };\n}\n\nexport function uploadAttachmentFromUrl(entity, formData, storeKeys) {\n  const { name, url } = formData;\n  return (dispatch) => {\n    dispatch({ type: types.START_UPLOAD_ATTACHMENT, entity });\n    api.\n    post('files', new RequestParams({ originalname: name, url, entity, type: 'attachment' })).\n    then((newFile) => {\n      dispatch({ type: types.ATTACHMENT_PROGRESS, entity, progress: 100 });\n      dispatch({\n        type: types.ATTACHMENT_COMPLETE,\n        entity,\n        file: newFile.json,\n        __reducerKey: storeKeys.__reducerKey });\n\n      dispatch(notify('Attachment uploaded', 'success'));\n    });\n  };\n}\n\nexport function renameAttachment(entityId, form, __reducerKey, file) {\n  return (dispatch) =>\n  api.\n  post(\n  'files',\n  new RequestParams({\n    _id: file._id,\n    originalname: file.originalname })).\n\n\n  then((renamedFile) => {\n    dispatch({\n      type: types.ATTACHMENT_RENAMED,\n      entity: entityId,\n      file: renamedFile.json,\n      __reducerKey });\n\n    dispatch(formActions.reset(form));\n    dispatch(notify('Attachment renamed', 'success'));\n  });\n}\n\nexport function deleteAttachment(entitySharedId, attachment, __reducerKey) {\n  return async (dispatch) => {\n    await api.delete(\n    'files',\n    new RequestParams({\n      _id: attachment._id }));\n\n\n    dispatch({\n      type: types.ATTACHMENT_DELETED,\n      entity: entitySharedId,\n      file: attachment,\n      __reducerKey });\n\n\n    dispatch(notify('Attachment deleted', 'success'));\n  };\n}\n\nexport function loadForm(form, attachment) {\n  return (dispatch) => {\n    dispatch(formActions.reset(form));\n    dispatch(formActions.load(form, attachment));\n  };\n}\n\nexport function submitForm(form) {\n  return (dispatch) => {\n    dispatch(formActions.submit(form));\n  };\n}\n\nexport function resetForm(form) {\n  return (dispatch) => {\n    dispatch(formActions.reset(form));\n  };\n}","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import React, { useRef } from 'react';\nimport { connect } from 'react-redux';\nimport ReactModal from 'react-modal';\nimport { Tabs, TabLink, TabContent } from 'react-tabs-redux';\nimport Dropzone from 'react-dropzone';\nimport { bindActionCreators } from 'redux';\nimport { actions as formActions } from 'react-redux-form';\nimport { Translate } from \"../../I18N\";\nimport { Icon } from \"../../UI\";\nimport { WebMediaResourceForm } from \"./WebMediaResourceForm\";\n\n\n\n\n\n\n\n\n\n\n\n\nconst AttachmentsModalCmp = ({\n  isOpen,\n  entitySharedId,\n  storeKey,\n  model,\n  onClose,\n  uploadAttachment: uploadAttachmentProp,\n  uploadAttachmentFromUrl: uploadAttachmentFromUrlProp,\n  getPercentage }) =>\n{\n  const inputFileRef = useRef(null);\n  let formDispatch = () => {};\n\n  const handleUploadButtonClicked = () => {\n    if (inputFileRef.current) {\n      inputFileRef.current.click();\n    }\n  };\n\n  const handleInputFileChange = async (event) => {\n    if (event.target.files) {\n      await Promise.all(\n      [...event.target.files].map((file) =>\n      uploadAttachmentProp(entitySharedId, file, { __reducerKey: storeKey, model })));\n\n\n    }\n  };\n\n  const handleDropFiles = async (accepted) => {\n    await Promise.all(\n    accepted.map((file) =>\n    uploadAttachmentProp(entitySharedId, file, { __reducerKey: storeKey, model })));\n\n\n  };\n\n  const handleSubmitUrlForm = (formModelData) => {\n    uploadAttachmentFromUrlProp(entitySharedId, formModelData, { __reducerKey: storeKey, model });\n    formDispatch(formActions.reset('urlForm'));\n  };\n\n  return /*#__PURE__*/(\n    _jsx(ReactModal, {\n      isOpen: isOpen,\n      className: \"attachments-modal\",\n      overlayClassName: \"attachments-modal__overlay\",\n      ariaHideApp: false }, void 0, /*#__PURE__*/\n\n    _jsx(\"div\", { className: \"attachments-modal__header\" }, void 0, /*#__PURE__*/\n    _jsx(\"h4\", {}, void 0, /*#__PURE__*/\n    _jsx(Translate, {}, void 0, \"Supporting files\")), /*#__PURE__*/\n\n\n    _jsx(\"button\", {\n      type: \"button\",\n      onClick: onClose,\n      className: \"attachments-modal__close\",\n      disabled: getPercentage !== undefined }, void 0, /*#__PURE__*/\n\n    _jsx(Icon, { icon: \"times\" }), /*#__PURE__*/\n    _jsx(\"span\", {}, void 0, /*#__PURE__*/\n    _jsx(Translate, {}, void 0, \"Cancel\")))), /*#__PURE__*/\n\n\n\n    _jsx(\"div\", { className: \"attachments-modal__content\" }, void 0, /*#__PURE__*/\n    _jsx(Tabs, { renderActiveTabContentOnly: true }, void 0, /*#__PURE__*/\n    _jsx(\"div\", { className: \"attachments-modal__tabs\" }, void 0, /*#__PURE__*/\n    _jsx(TabLink, { to: \"uploadComputer\", className: \"tab-link modal-tab-1\", component: \"div\" }, void 0, /*#__PURE__*/\n    _jsx(Translate, {}, void 0, \"Upload from computer\")), /*#__PURE__*/\n\n    _jsx(TabLink, { to: \"uploadWeb\", className: \"tab-link modal-tab-2\", component: \"div\" }, void 0, /*#__PURE__*/\n    _jsx(Translate, {}, void 0, \"Add from web\"))), /*#__PURE__*/\n\n\n\n    _jsx(\"div\", { className: \"attachments-modal__tabs-content\" }, void 0, /*#__PURE__*/\n    _jsx(TabContent, { for: \"uploadComputer\", className: \"tab-content centered\" }, void 0, /*#__PURE__*/\n    _jsx(Dropzone, {\n      disableClick: true,\n      onDrop: handleDropFiles,\n      className: \"attachments-modal__dropzone\",\n      multiple: false }, void 0,\n\n    getPercentage === undefined ? /*#__PURE__*/\n    React.createElement(React.Fragment, null, /*#__PURE__*/\n    _jsx(\"button\", { type: \"button\", onClick: handleUploadButtonClicked, className: \"btn\" }, void 0, /*#__PURE__*/\n    _jsx(Icon, { icon: \"link\" }), \"\\xA0 \", /*#__PURE__*/\n    _jsx(Translate, {}, void 0, \"Upload and select file\")), /*#__PURE__*/\n\n    React.createElement(\"input\", {\n      \"aria-label\": \"fileInput\",\n      type: \"file\",\n      onChange: handleInputFileChange,\n      style: { display: 'none' },\n      ref: inputFileRef }), /*#__PURE__*/\n\n    _jsx(\"h4\", { className: \"attachments-modal__dropzone-title\" }, void 0, /*#__PURE__*/\n    _jsx(Translate, {}, void 0, \"Drag and drop file in this window to upload \"))) : /*#__PURE__*/\n\n\n\n    _jsx(\"div\", { className: \"progress attachments-modal-progress\" }, void 0, /*#__PURE__*/\n    _jsx(\"div\", {\n      className: \"progress-bar progress-bar-success attachments-modal-progress-bar\",\n      role: \"progressbar\",\n      style: { width: `${getPercentage}%` } })))), /*#__PURE__*/\n\n\n\n\n\n    _jsx(TabContent, { for: \"uploadWeb\", className: \"tab-content centered\" }, void 0, /*#__PURE__*/\n    _jsx(\"div\", { className: \"wrapper-web\" }, void 0, /*#__PURE__*/\n    _jsx(WebMediaResourceForm, {\n      handleSubmit: handleSubmitUrlForm,\n      dispatch: (dispatch) => {\n        formDispatch = dispatch;\n      },\n      hasName: true }))))))));\n\n\n\n\n\n\n\n\n};\n\nconst mapDispatchToProps = (dispatch, ownProps) =>\nbindActionCreators(\n{\n  uploadAttachment: ownProps.uploadAttachment,\n  uploadAttachmentFromUrl: ownProps.uploadAttachmentFromUrl },\n\ndispatch);\n\n\nconst AttachmentsModal = connect(null, mapDispatchToProps)(AttachmentsModalCmp);\n\n\nexport { AttachmentsModalCmp, AttachmentsModal };","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport Immutable from 'immutable';\nimport { isEmpty } from 'lodash';\nimport { Icon } from \"../../UI\";\nimport { uploadDocument } from \"../../Uploads/actions/uploadsActions\";\nimport { wrapDispatch } from \"../../Multireducer\";\nimport { socket } from \"../../socket\";\nimport { Translate } from \"../../I18N\";\n\nconst renderProgress = (progress) => /*#__PURE__*/\n_jsx(\"div\", { className: \"upload-button btn btn-default btn-disabled\" }, void 0, /*#__PURE__*/\n_jsx(\"span\", {}, void 0, progress, \"%\"), \"\\xA0\", /*#__PURE__*/\n\n_jsx(Translate, {}, void 0, \"Uploading\"));\n\n\n\nconst renderProcessing = () => /*#__PURE__*/\n_jsx(\"div\", { className: \"upload-button btn btn-default\" }, void 0, /*#__PURE__*/\n_jsx(Icon, { icon: \"cog\", spin: true }), \"\\xA0\", /*#__PURE__*/\n\n_jsx(Translate, {}, void 0, \"Processing\"));\n\n\n\nclass UploadButton extends Component {\n  constructor(props, context) {\n    super(props, context);\n\n    this.state = { processing: false, failed: false, completed: false };\n    this.conversionStart = this.conversionStart.bind(this);\n    this.conversionFailed = this.conversionFailed.bind(this);\n    this.documentProcessed = this.documentProcessed.bind(this);\n\n    socket.on('conversionStart', this.conversionStart);\n    socket.on('conversionFailed', this.conversionFailed);\n    socket.on('documentProcessed', this.documentProcessed);\n\n    this.onChange = this.onChange.bind(this);\n  }\n\n  componentWillUnmount() {\n    socket.removeListener('conversionStart', this.conversionStart);\n    socket.removeListener('conversionFailed', this.conversionFailed);\n    socket.removeListener('documentProcessed', this.documentProcessed);\n    clearTimeout(this.timeout);\n  }\n\n  onChange(e) {\n    const file = e.target.files[0];\n    this.props.uploadDocument(this.props.entitySharedId, file);\n  }\n\n  documentProcessed(docId) {\n    if (docId === this.props.entitySharedId) {\n      this.setState({ processing: false, failed: false, completed: true }, () => {\n        this.timeout = setTimeout(() => {\n          this.setState({ processing: false, failed: false, completed: false });\n        }, 2000);\n      });\n    }\n  }\n\n  conversionStart(docId) {\n    if (docId === this.props.entitySharedId) {\n      this.setState({ processing: true, failed: false, completed: false });\n    }\n  }\n\n  conversionFailed(docId) {\n    if (docId === this.props.entitySharedId) {\n      this.setState({ processing: false, failed: true, completed: false });\n    }\n  }\n\n  renderButton(status = '', icon = 'plus', message = 'Add PDF') {\n    return /*#__PURE__*/(\n      _jsx(\"label\", { htmlFor: \"upload-button-input\", className: `upload-button btn upload-${status}` }, void 0, /*#__PURE__*/\n      _jsx(Icon, { icon: icon }), \"\\xA0\", /*#__PURE__*/\n\n      _jsx(\"input\", {\n        onChange: this.onChange,\n        type: \"file\",\n        accept: \"application/pdf\",\n        id: \"upload-button-input\" }), \"\\xA0\", /*#__PURE__*/\n\n\n      _jsx(Translate, {}, void 0, message)));\n\n\n  }\n\n  render() {\n    const progress = this.props.progress.get(this.props.entitySharedId);\n\n    switch (true) {\n      case this.state.failed:\n        return this.renderButton('failed', 'exclamation-triangle', 'An error occured');\n      case this.state.processing || progress === 0:\n        return renderProcessing();\n      case progress > 0 && progress < 100:\n        return renderProgress(progress);\n      case this.state.completed || progress === 100:\n        return this.renderButton('success', 'check', 'Success, Upload another?');\n\n      default:\n        return this.renderButton();}\n\n  }}\n\n\nUploadButton.defaultProps = {\n  progress: Immutable.fromJS({}),\n  storeKey: '',\n  entitySharedId: '',\n  uploadDocument: () => {} };\n\n\n\n\n\n\n\n\n\nUploadButton.contextTypes = {\n  confirm: PropTypes.func };\n\n\nconst mapStateToProps = ({ metadata, progress }) => ({\n  progress: isEmpty(progress) ? metadata.progress : progress });\n\n\nfunction mapDispatchToProps(dispatch, props) {\n  return bindActionCreators({ uploadDocument }, wrapDispatch(dispatch, props.storeKey));\n}\n\nexport { UploadButton };\nexport default connect(mapStateToProps, mapDispatchToProps)(UploadButton);","import { language, elasticLanguages } from \"./languagesList\";\n\nexport default {\n  get: language,\n  data: Object.keys(elasticLanguages).map((k) => elasticLanguages[k]),\n  getAll: (purpose = 'elastic') => {\n    const unique = (v, i, a) => a.indexOf(v) === i;\n    const notNull = (v) => Boolean(v);\n    return Object.keys(elasticLanguages).\n    map((k) => elasticLanguages[k][purpose]).\n    filter(unique).\n    filter(notNull);\n  } };","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import React, { Component } from 'react';\nimport { Link, withRouter } from 'react-router';\nimport { CurrentLocationLink } from \"../../Layout\";\n\n\n\n\n\n\n\n\n\nexport class ViewDocumentLinkBase extends Component {\n  render() {\n    const { filename, location, children, entity } = this.props;\n    const onViewer = location.pathname.match(/entity/);\n    return onViewer ? /*#__PURE__*/\n    _jsx(CurrentLocationLink, {\n      className: \"btn btn-default\",\n      location: location,\n      queryParams: { file: filename, page: 1 },\n      type: \"button\" }, void 0,\n\n    children) : /*#__PURE__*/\n\n\n    _jsx(Link, {\n      className: \"btn btn-default\",\n      to: `/entity/${entity.sharedId}?file=${filename}`,\n      type: \"button\" }, void 0,\n\n    children);\n\n\n  }}\n\n\nexport const ViewDocumentLink = withRouter(ViewDocumentLinkBase);","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}function _defineProperty(obj, key, value) {if (key in obj) {Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });} else {obj[key] = value;}return obj;}import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport { Translate, t } from \"../../I18N\";\nimport { language as transformLanguage, availableLanguages } from \"../../../shared/languagesList\";\nimport { isBlobFile } from \"../../../shared/tsUtils\";\nimport { Icon } from \"../../UI\";\n\nimport { APIURL } from \"../../config.js\";\nimport { LocalForm, Control } from 'react-redux-form';\n\nimport { updateFile, deleteFile } from \"../actions/actions\";\nimport { wrapDispatch } from \"../../Multireducer\";\nimport { TocGeneratedLabel } from \"../../ToggledFeatures/tocGeneration\";\nimport { NeedAuthorization } from \"../../Auth\";\n\nimport { ViewDocumentLink } from \"./ViewDocumentLink\";\n\n\n\n\n\n\n\n\n\n\n\n\nclass File extends Component {\n\n\n\n\n\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      editing: false };\n\n    this.edit = this.edit.bind(this);\n    this.cancel = this.cancel.bind(this);\n    this.delete = this.delete.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n\n  edit() {\n    this.setState({ editing: true });\n  }\n\n  cancel() {\n    this.setState({ editing: false });\n  }\n\n  delete() {\n    this.context.confirm({\n      accept: () => {\n        this.props.deleteFile(this.props.file, this.props.entity);\n        this.setState({ editing: false });\n      },\n      title: 'Confirm delete file',\n      message: 'Are you sure you want to delete this file?' });\n\n  }\n\n  handleSubmit(file) {\n    this.props.updateFile(file, this.props.entity);\n    this.setState({ editing: false });\n  }\n\n  renderDeleteButton() {\n    return /*#__PURE__*/(\n      _jsx(\"button\", { type: \"button\", className: \"btn btn-outline-danger\", value: \"Delete\", onClick: this.delete }, void 0, /*#__PURE__*/\n      _jsx(Icon, { icon: \"trash-alt\" }), \"\\xA0\", /*#__PURE__*/\n\n      _jsx(Translate, {}, void 0, \"Delete\")));\n\n\n  }\n\n  renderFailed() {\n    return /*#__PURE__*/(\n      _jsx(\"div\", { className: \"file-failed\" }, void 0, /*#__PURE__*/\n      _jsx(Icon, { icon: \"times\" }), \"\\xA0\", /*#__PURE__*/\n\n      _jsx(Translate, {}, void 0, \"Conversion failed\"), /*#__PURE__*/\n      _jsx(NeedAuthorization, { roles: ['admin', 'editor'], orWriteAccessTo: [this.props.entity] }, void 0,\n      this.renderDeleteButton())));\n\n\n\n  }\n\n  renderReady() {\n    const { language, filename = '' } = this.props.file;\n    return /*#__PURE__*/(\n      _jsx(\"div\", {}, void 0, /*#__PURE__*/\n      _jsx(\"div\", {}, void 0, /*#__PURE__*/\n      _jsx(\"span\", { className: \"badge\" }, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, language ? transformLanguage(language) || '' : '')), /*#__PURE__*/\n\n      _jsx(TocGeneratedLabel, { file: this.props.file }, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"ML TOC\"))), /*#__PURE__*/\n\n\n      _jsx(\"div\", {}, void 0, /*#__PURE__*/\n      _jsx(\"a\", {\n        href: `${APIURL}files/${filename}`,\n        target: \"_blank\",\n        rel: \"noopener noreferrer\",\n        className: \"file-download btn btn-outline-secondary\" }, void 0, /*#__PURE__*/\n\n      _jsx(Icon, { icon: \"cloud-download-alt\" }), \"\\xA0\", /*#__PURE__*/\n\n      _jsx(Translate, {}, void 0, \"Download\")), /*#__PURE__*/\n\n      _jsx(NeedAuthorization, { roles: ['admin', 'editor'], orWriteAccessTo: [this.props.entity] }, void 0, /*#__PURE__*/\n      _jsx(\"button\", { type: \"button\", className: \"file-edit btn btn-outline-success\", onClick: this.edit }, void 0, /*#__PURE__*/\n      _jsx(Icon, { icon: \"pencil-alt\" }), \"\\xA0\", /*#__PURE__*/\n\n      _jsx(Translate, {}, void 0, \"Edit\"))), /*#__PURE__*/\n\n\n      _jsx(ViewDocumentLink, { filename: filename, entity: this.props.entity }, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"View\")))));\n\n\n\n\n  }\n\n  renderView() {\n    const { originalname, status } = !isBlobFile(this.props.file) ?\n    this.props.file :\n    { originalname: this.props.file.originalFile.name, status: 'ready' };\n    return /*#__PURE__*/(\n      _jsx(\"div\", { className: \"file\" }, void 0, /*#__PURE__*/\n      _jsx(\"div\", { className: \"file-originalname\" }, void 0, originalname),\n      status === 'ready' && this.renderReady(),\n      status === 'failed' && this.renderFailed(),\n      status === 'processing' && /*#__PURE__*/\n      _jsx(\"div\", {}, void 0, /*#__PURE__*/\n      _jsx(Icon, { icon: \"clock\" }), \"\\xA0\", /*#__PURE__*/\n\n      _jsx(Translate, {}, void 0, \"Processing\"))));\n\n\n\n\n  }\n\n  renderEditing() {\n    const mapProps = {\n      className: ({ fieldValue }) =>\n      fieldValue.submitFailed && !fieldValue.valid ? 'form-control has-error' : 'form-control' };\n\n    return /*#__PURE__*/(\n      _jsx(LocalForm, { onSubmit: this.handleSubmit, initialState: this.props.file, className: \"file-form\" }, void 0, /*#__PURE__*/\n      _jsx(\"div\", { className: \"form-group row\" }, void 0, /*#__PURE__*/\n      _jsx(\"div\", { className: \"col-sm-12\" }, void 0, /*#__PURE__*/\n      _jsx(\"label\", { htmlFor: \"originalname\" }, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Document Title\"), \"\\xA0*\"), /*#__PURE__*/\n\n      _jsx(Control.text, {\n        validators: { required: (val) => Boolean(val && val.length) },\n        className: \"form-control\",\n        model: \".originalname\",\n        id: \"originalname\",\n        mapProps: mapProps })), /*#__PURE__*/\n\n\n      _jsx(\"div\", { className: \"col-sm-3\" }, void 0, /*#__PURE__*/\n      _jsx(\"label\", { htmlFor: \"language\" }, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Language\"))), /*#__PURE__*/\n\n\n      _jsx(\"div\", { className: \"col-sm-9\" }, void 0, /*#__PURE__*/\n      _jsx(Control.select, { className: \"form-control\", model: \".language\", id: \"language\" }, void 0,\n      availableLanguages.map((language) => /*#__PURE__*/\n      _jsx(\"option\", { value: language.ISO639_3 }, language.ISO639_3,\n      language.localized_label, \" (\", language.label, \")\")), /*#__PURE__*/\n\n\n      _jsx(\"option\", { value: \"other\" }, void 0, t('System', 'other', 'other', false)))), /*#__PURE__*/\n\n\n      _jsx(\"div\", { className: \"col-sm-4\" }, void 0, /*#__PURE__*/\n      _jsx(\"button\", { type: \"submit\", className: \"btn btn-outline-success\" }, void 0, /*#__PURE__*/\n      _jsx(Icon, { icon: \"save\" }), \"\\xA0\", /*#__PURE__*/\n\n      _jsx(Translate, {}, void 0, \"Save\"))), /*#__PURE__*/\n\n\n      _jsx(\"div\", { className: \"col-sm-4\" }, void 0, /*#__PURE__*/\n      _jsx(\"button\", {\n        type: \"button\",\n        className: \"btn btn-outline-secondary\",\n        value: \"Cancel\",\n        onClick: this.cancel }, void 0, /*#__PURE__*/\n\n      _jsx(Icon, { icon: \"times\" }), \"\\xA0\", /*#__PURE__*/\n\n      _jsx(Translate, {}, void 0, \"Cancel\"))), /*#__PURE__*/\n\n\n      _jsx(\"div\", { className: \"col-sm-4\" }, void 0, this.renderDeleteButton()))));\n\n\n\n  }\n\n  render() {\n    return this.state.editing ? this.renderEditing() : this.renderView();\n  }}_defineProperty(File, \"defaultProps\", { updateFile: () => {}, deleteFile: () => {} });_defineProperty(File, \"contextTypes\", { confirm: PropTypes.func });\n\n\nconst mapDispatchToProps = (dispatch, props) =>\nbindActionCreators({ updateFile, deleteFile }, wrapDispatch(dispatch, props.storeKey));\n\n\nexport { File };\nexport const ConnectedFile = connect(null, mapDispatchToProps)(File);","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}function _defineProperty(obj, key, value) {if (key in obj) {Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });} else {obj[key] = value;}return obj;} /* eslint-disable prefer-destructuring */\n/* eslint-disable class-methods-use-this */\n/* eslint-disable react/sort-comp */\nimport React, { Component } from 'react';\n\nimport { advancedSort } from \"../../utils/advancedSort\";\nimport { Translate } from \"../../I18N\";\n\n\nimport UploadButton from \"../../Metadata/components/UploadButton\";\nimport { NeedAuthorization } from \"../../Auth\";\nimport languageLib from \"../../../shared/languages\";\nimport { ConnectedFile as File } from \"./File\";\nimport \"./scss/filelist.scss\";\n\nconst defaultProps = {\n  files: [],\n  entity: null,\n  storeKey: '' };\n\n\n\n\n\n\n\n\nexport class FileList extends Component {\n  static arrangeFiles(files = []) {\n    return advancedSort(files, { property: 'originalname' });\n  }\n\n\n\n  renderFile(file, index) {\n    const { storeKey, entity } = this.props;\n    return /*#__PURE__*/(\n      _jsx(\"li\", {}, index, /*#__PURE__*/\n      _jsx(File, { file: file, storeKey: storeKey, entity: entity })));\n\n\n  }\n\n  orderFilesByLanguage(files, systemLanguage) {\n    const orderedFiles = [...files];\n    const fileIndex = orderedFiles.findIndex((file) => {\n      const language = languageLib.get(file.language, 'ISO639_1');\n      return language === systemLanguage;\n    });\n    if (fileIndex > -1) {\n      const temp = orderedFiles[fileIndex];\n      orderedFiles[fileIndex] = orderedFiles[0];\n      orderedFiles[0] = temp;\n    }\n    return orderedFiles;\n  }\n\n  render() {\n    const label = /*#__PURE__*/\n    _jsx(\"h2\", {}, void 0, /*#__PURE__*/\n    _jsx(Translate, {}, void 0, \"Primary Documents\"));\n\n\n\n    const { files, entity } = this.props;\n    const orderedFiles = this.orderFilesByLanguage(files, entity.language);\n    return /*#__PURE__*/(\n      _jsx(\"div\", { className: \"filelist\" }, void 0, /*#__PURE__*/\n      _jsx(\"div\", { className: \"filelist-header\" }, void 0,\n      orderedFiles.length === 0 ? /*#__PURE__*/\n      _jsx(NeedAuthorization, { roles: ['admin', 'editor'], orWriteAccessTo: [entity] }, void 0,\n      label) : /*#__PURE__*/\n\n\n      React.createElement(React.Fragment, null, label), /*#__PURE__*/\n\n      _jsx(\"div\", {}, void 0, /*#__PURE__*/\n      _jsx(NeedAuthorization, { roles: ['admin', 'editor'], orWriteAccessTo: [entity] }, void 0, /*#__PURE__*/\n      _jsx(UploadButton, {\n        entitySharedId: this.props.entity.sharedId,\n        storeKey: this.props.storeKey })))), /*#__PURE__*/\n\n\n\n\n      _jsx(\"ul\", {}, void 0, orderedFiles.map((file, index) => this.renderFile(file, index)))));\n\n\n  }}_defineProperty(FileList, \"defaultProps\", defaultProps);\n\n\nexport default FileList;","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import React, { useEffect, useState } from 'react';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport { Translate } from \"../../I18N\";\nimport { Icon } from \"../../UI\";\nimport { attachmentCompleted } from \"../../Metadata/actions/supportingFilesActions\";\nimport { uploadAttachment, uploadAttachmentFromUrl } from \"../actions/actions\";\nimport { AttachmentsModal } from \"./AttachmentsModal\";\n\n\n\n\n\n\n\n\n\n\n\nfunction mapStateToProps({ attachments }) {\n  return {\n    progress: attachments.progress };\n\n}\n\nconst mapDispatchToProps = (dispatch) =>\nbindActionCreators({ attachmentCompleted }, dispatch);\n\nconst connector = connect(mapStateToProps, mapDispatchToProps);\n\nconst UploadSupportingFile = (props) => {\n  const { entitySharedId, storeKey, progress, model = '' } = props;\n  const [modalOpen, setModalOpen] = useState(false);\n\n  const openModal = () => setModalOpen(true);\n  const closeModal = () => {\n    setModalOpen(false);\n    props.attachmentCompleted(entitySharedId);\n  };\n\n  const getPercentage = progress.get(entitySharedId);\n\n  useEffect(() => {\n    if (getPercentage === 100) {\n      closeModal();\n    }\n  }, [progress]);\n\n  return /*#__PURE__*/(\n    React.createElement(React.Fragment, null, /*#__PURE__*/\n    _jsx(\"button\", { type: \"button\", onClick: openModal, className: \"btn attachments-modal-trigger\" }, void 0, /*#__PURE__*/\n    _jsx(Icon, { icon: \"plus\" }), \"\\xA0\", /*#__PURE__*/\n\n    _jsx(Translate, {}, void 0, \"Add file\")), /*#__PURE__*/\n\n\n    _jsx(AttachmentsModal, {\n      isOpen: modalOpen,\n      onClose: closeModal,\n      entitySharedId: entitySharedId,\n      storeKey: storeKey,\n      getPercentage: getPercentage,\n      model: model,\n      uploadAttachment: props.uploadAttachment || uploadAttachment,\n      uploadAttachmentFromUrl: props.uploadAttachmentFromUrl || uploadAttachmentFromUrl })));\n\n\n\n};\n\nexport { mapDispatchToProps, mapStateToProps };\nexport default connector(UploadSupportingFile);","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}function ownKeys(object, enumerableOnly) {var keys = Object.keys(object);if (Object.getOwnPropertySymbols) {var symbols = Object.getOwnPropertySymbols(object);enumerableOnly && (symbols = symbols.filter(function (sym) {return Object.getOwnPropertyDescriptor(object, sym).enumerable;})), keys.push.apply(keys, symbols);}return keys;}function _objectSpread(target) {for (var i = 1; i < arguments.length; i++) {var source = null != arguments[i] ? arguments[i] : {};i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {_defineProperty(target, key, source[key]);}) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));});}return target;}function _defineProperty(obj, key, value) {if (key in obj) {Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });} else {obj[key] = value;}return obj;}import { Field, LocalForm } from 'react-redux-form';\nimport { Translate } from \"../../I18N\";\nimport { Icon } from \"../../UI\";\nimport React from 'react';\nimport { FormGroup } from \"../../Forms\";\n\n\n\n\n\n\n\n\nconst WebMediaResourceForm = ({\n  handleSubmit,\n  url,\n  dispatch,\n  hasName = false }) =>\n{\n  const validators = _objectSpread(_objectSpread({},\n  hasName && { name: { required: (val) => !!val && val.trim() !== '' } }), {}, {\n    url: { required: (val) => !!val && val.trim() !== '' } });\n\n\n  return /*#__PURE__*/(\n    _jsx(LocalForm, {\n      onSubmit: handleSubmit,\n      getDispatch: dispatch,\n      model: \"urlForm\",\n      validators: validators,\n      initialState: { url },\n      className: !hasName ? 'select-from-link' : '' }, void 0, /*#__PURE__*/\n\n    _jsx(FormGroup, { className: \"has-feedback\", model: \".url\" }, void 0, /*#__PURE__*/\n    _jsx(Field, { model: \".url\" }, void 0, /*#__PURE__*/\n    _jsx(\"input\", {\n      type: \"text\",\n      className: \"form-control web-attachment-url\",\n      placeholder: \"Paste URL here\" }))),\n\n\n\n    hasName && /*#__PURE__*/\n    _jsx(FormGroup, { className: \"form-group\", model: \".name\" }, void 0, /*#__PURE__*/\n    _jsx(Field, { model: \".name\", className: \"field\" }, void 0, /*#__PURE__*/\n    _jsx(\"input\", { type: \"text\", className: \"form-control web-attachment-name\", placeholder: \"Title\" }))), /*#__PURE__*/\n\n\n\n    _jsx(\"button\", { type: \"submit\", className: \"btn\" }, void 0, /*#__PURE__*/\n    _jsx(Icon, { icon: \"link\" }), \"\\xA0 \", /*#__PURE__*/\n    _jsx(Translate, {}, void 0, \"Add from URL\"))));\n\n\n\n};\n\nexport { WebMediaResourceForm };","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport t from \"../../I18N/t\";\nimport { Icon } from \"../../UI\";\n\nimport { uploadAttachment } from \"../actions/actions\";\n\nexport class UploadAttachment extends Component {\n  onChangeSingle(e) {\n    const file = e.target.files[0];\n    this.props.uploadAttachment(this.props.entity, file, { __reducerKey: this.props.storeKey });\n  }\n\n  onChangeAll(e) {\n    const file = e.target.files[0];\n    this.props.uploadAttachment(\n    this.props.entity,\n    file,\n    { __reducerKey: this.props.storeKey },\n    {\n      allLanguages: true });\n\n\n  }\n\n  renderUploadButton() {\n    let uploadToAll = null;\n\n    if (this.props.languages.size > 1) {\n      uploadToAll = /*#__PURE__*/\n      _jsx(\"label\", { htmlFor: \"upload-attachment-all-input\", className: \"btn btn-success btn-xs add\" }, void 0, /*#__PURE__*/\n      _jsx(\"span\", { className: \"btn-label\" }, void 0, /*#__PURE__*/\n      _jsx(Icon, { icon: \"link\" }), \" \", t('System', 'Add to all languages')), /*#__PURE__*/\n\n      _jsx(\"input\", {\n        onChange: this.onChangeAll.bind(this),\n        type: \"file\",\n        id: \"upload-attachment-all-input\" }));\n\n\n\n    }\n\n    return /*#__PURE__*/(\n      _jsx(\"div\", {}, void 0, /*#__PURE__*/\n      _jsx(\"label\", { htmlFor: \"upload-attachment-input\", className: \"btn btn-success btn-xs add\" }, void 0, /*#__PURE__*/\n      _jsx(\"span\", { className: \"btn-label\" }, void 0, /*#__PURE__*/\n      _jsx(Icon, { icon: \"paperclip\" }), \" \", t('System', 'Add file')), /*#__PURE__*/\n\n      _jsx(\"input\", {\n        onChange: this.onChangeSingle.bind(this),\n        type: \"file\",\n        id: \"upload-attachment-input\" })),\n\n\n      uploadToAll));\n\n\n  }\n\n  renderProgress(progress) {\n    return /*#__PURE__*/(\n      _jsx(\"div\", { className: \"btn btn-default btn-disabled\" }, void 0, /*#__PURE__*/\n      _jsx(\"span\", { className: \"btn-label\" }, void 0, t('System', 'Uploading')), /*#__PURE__*/\n      _jsx(\"span\", {}, void 0, \"\\xA0\\xA0\", progress, \"%\")));\n\n\n  }\n\n  render() {\n    const progress = this.props.progress.get(this.props.entity);\n    return progress ? this.renderProgress(progress) : this.renderUploadButton();\n  }}\n\n\n\n\n\n\n\n\n\n\nexport function mapStateToProps({ attachments, settings }) {\n  return {\n    progress: attachments.progress,\n    languages: settings.collection.get('languages') };\n\n}\n\nexport function mapDispatchToProps(dispatch) {\n  return bindActionCreators({ uploadAttachment }, dispatch);\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(UploadAttachment);","import { fromJS as Immutable } from 'immutable';\nimport * as attachmentsTypes from \"../actions/actionTypes\";\nimport * as uploadTypes from \"../../Uploads/actions/actionTypes\";\n\nconst getId = (state, setInArray) => state.getIn(setInArray.concat(['_id']));\nconst getSharedId = (state, setInArray) => state.getIn(setInArray.concat(['sharedId']));\n\nconst getAttachments = (state, setInArray) =>\nstate.getIn(setInArray.concat(['attachments'])) || Immutable([]);\n\nconst getDocuments = (state, setInArray) =>\nstate.getIn(setInArray.concat(['documents'])) || Immutable([]);\n\nexport const manageAttachmentsReducer =\n(originalReducer, { useDefaults = true, setInArray = [] } = {}) =>\n(orignialState, originalAction) => {\n  let state = orignialState;\n  const action = originalAction || {};\n\n  if (useDefaults) {\n    state = orignialState || {};\n  }\n\n  if (\n  action.type === uploadTypes.UPLOAD_COMPLETE &&\n  getSharedId(state, setInArray) === action.doc)\n  {\n    const documents = getDocuments(state, setInArray);\n    return state.setIn(setInArray.concat(['documents']), documents.push(Immutable(action.file)));\n  }\n\n  if (\n  action.type === attachmentsTypes.ATTACHMENT_COMPLETE &&\n  getSharedId(state, setInArray) === action.entity)\n  {\n    const attachments = getAttachments(state, setInArray);\n    return state.setIn(\n    setInArray.concat(['attachments']),\n    attachments.push(Immutable(action.file)));\n\n  }\n\n  if (\n  action.type === attachmentsTypes.ATTACHMENT_DELETED &&\n  getSharedId(state, setInArray) === action.entity)\n  {\n    const attachments = getAttachments(state, setInArray);\n    return state.setIn(\n    setInArray.concat(['attachments']),\n    attachments.filterNot((a) => a.get('_id') === action.file._id));\n\n  }\n\n  if (\n  action.type === attachmentsTypes.ATTACHMENT_RENAMED &&\n  getSharedId(state, setInArray) === action.entity)\n  {\n    if (getId(state, setInArray) === action.file._id) {\n      return state.setIn(setInArray.concat(['file']), Immutable(action.file));\n    }\n\n    const attachments = getAttachments(state, setInArray);\n    return state.setIn(\n    setInArray.concat(['attachments']),\n    attachments.map((a) => {\n      if (a.get('_id') === action.file._id) {\n        return a.set('originalname', action.file.originalname);\n      }\n\n      return a;\n    }));\n\n  }\n\n  return originalReducer(state, action);\n};","import { fromJS as Immutable } from 'immutable';\nimport * as types from \"../actions/actionTypes\";\n\nconst initialState = {};\n\nexport default function documents(state = initialState, action = {}) {\n  if (action.type === types.START_UPLOAD_ATTACHMENT) {\n    return state.set(action.entity, 0);\n  }\n\n  if (action.type === types.ATTACHMENT_PROGRESS) {\n    return state.set(action.entity, action.progress);\n  }\n\n  if (action.type === types.ATTACHMENT_COMPLETE) {\n    return state.delete(action.entity);\n  }\n\n  if (action.type === types.ATTACHMENT_LOCAL_COMPLETE) {\n    return state.delete(action.entity);\n  }\n\n  return Immutable(state);\n}","import { combineReducers } from 'redux';\nimport { modelReducer, formReducer } from 'react-redux-form';\nimport progress from \"./progressReducer\";\n\nexport default combineReducers({\n  progress,\n  edit: combineReducers({\n    attachment: modelReducer('attachments.edit.attachment'),\n    form: formReducer('attachments.edit.attachment') }) });","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import React from 'react';\n\nimport ReactPlayer from 'react-player';\n\nimport MarkdownMedia from \"../../Markdown/components/MarkdownMedia\";\nimport { isSerializedFile, prepareHTMLMediaView } from \"../../../shared/fileUploadUtils\";\n\nexport const RenderAttachment = ({ attachment }) => {\n  const { mimetype = '' } = attachment;\n\n  const fileURL = isSerializedFile(attachment) ? prepareHTMLMediaView(attachment) : attachment.url;\n\n  if (mimetype.includes('image')) {\n    return fileURL ? /*#__PURE__*/\n    _jsx(\"img\", { src: fileURL, alt: attachment.originalname }) : /*#__PURE__*/\n\n    _jsx(\"img\", { src: `/api/files/${attachment.filename}`, alt: attachment.originalname });\n\n  }\n\n  const isVideoAudio = mimetype.includes('video') || mimetype.includes('audio');\n\n  const isFromSupportedSite = attachment.url && ReactPlayer.canPlay(attachment.url);\n\n  if (isVideoAudio || isFromSupportedSite) {\n    return fileURL ? /*#__PURE__*/\n    _jsx(MarkdownMedia, { config: `(${fileURL})` }) : /*#__PURE__*/\n\n    _jsx(MarkdownMedia, { config: `(/api/files/${attachment.filename})` });\n\n  }\n\n  return null;\n};","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { Form, Field } from 'react-redux-form';\n\nimport { FormGroup, Select } from \"../../ReactReduxForms\";\nimport { elasticLanguages } from \"../../../shared/languagesList\";\nimport t from \"../../I18N/t\";\nimport ShowIf from \"../../App/ShowIf\";\n\nexport class AttachmentForm extends Component {\n  render() {\n    const { model } = this.props;\n    const validators = { originalname: { required: (val) => !!val && val.trim() !== '' } };\n    const languageOptions = Object.keys(elasticLanguages).map((key) => ({\n      value: elasticLanguages[key].franc,\n      label: elasticLanguages[key].elastic }));\n\n    languageOptions.push({ value: 'other', label: 'other' });\n\n    return /*#__PURE__*/(\n      _jsx(Form, {\n        id: \"attachmentForm\",\n        model: model,\n        onSubmit: this.props.onSubmit,\n        validators: validators }, void 0, /*#__PURE__*/\n\n      _jsx(FormGroup, { model: model, field: \"originalname\" }, void 0, /*#__PURE__*/\n      _jsx(Field, { model: \".originalname\" }, void 0, /*#__PURE__*/\n      _jsx(\"input\", { className: \"form-control\" }))), /*#__PURE__*/\n\n\n      _jsx(ShowIf, { if: this.props.isSourceDocument }, void 0, /*#__PURE__*/\n      _jsx(FormGroup, { className: \"set-language\" }, void 0, /*#__PURE__*/\n      _jsx(\"label\", {}, void 0, t('System', 'Language')), /*#__PURE__*/\n      _jsx(Select, { model: \".language\", className: \"form-control\", options: languageOptions })))));\n\n\n\n\n  }}\n\n\n\n\n\n\n\n\nexport default connect()(AttachmentForm);","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport filesize from 'filesize';\n\nimport { NeedAuthorization } from \"../../Auth\";\nimport ShowIf from \"../../App/ShowIf\";\nimport { Translate } from \"../../I18N\";\nimport AttachmentForm from \"./AttachmentForm\";\nimport { wrapDispatch } from \"../../Multireducer\";\nimport { Icon } from \"../../UI\";\nimport { notify } from \"../../Notifications/actions/notificationsActions\";\nimport { store } from \"../../store\";\nimport { getFileExtension } from \"../../utils/getFileExtension\";\n\nimport {\ndeleteAttachment,\nrenameAttachment,\nloadForm,\nsubmitForm,\nresetForm } from \"../actions/actions\";\n\n\nconst getItemOptions = (filename, url) => {\n  const options = {};\n  options.itemClassName = '';\n  options.typeClassName = 'empty';\n  options.icon = 'paperclip';\n  options.deletable = true;\n  options.replaceable = false;\n  options.downloadHref = `/api/files/${filename}`;\n  options.url = url;\n\n  return options;\n};\n\nexport class Attachment extends Component {\n  static conformThumbnail(file, item) {\n    const acceptedThumbnailExtensions = ['png', 'gif', 'jpg', 'jpeg'];\n    let thumbnail = null;\n\n    if (file.filename && getFileExtension(file.filename) === 'pdf') {\n      thumbnail = /*#__PURE__*/\n      _jsx(\"span\", { \"no-translate\": true }, void 0, /*#__PURE__*/\n      _jsx(Icon, { icon: \"file-pdf\" }), \" pdf\");\n\n\n    }\n\n    if (file.url) {\n      thumbnail = /*#__PURE__*/\n      _jsx(\"span\", {}, void 0, /*#__PURE__*/\n      _jsx(Icon, { icon: \"link\" }));\n\n\n    }\n\n    if (\n    file.filename &&\n    acceptedThumbnailExtensions.indexOf(getFileExtension(file.filename.toLowerCase())) !== -1)\n    {\n      thumbnail = /*#__PURE__*/_jsx(\"img\", { src: item.downloadHref, alt: file.filename });\n    }\n\n    return /*#__PURE__*/_jsx(\"div\", { className: \"attachment-thumbnail\" }, void 0, thumbnail);\n  }\n\n  constructor(props) {\n    super(props);\n    this.state = { dropdownMenuOpen: false };\n\n    this.toggleDropdown = this.toggleDropdown.bind(this);\n    this.handleClickOutside = this.handleClickOutside.bind(this);\n    this.copyToClipboard = this.copyToClipboard.bind(this);\n    this.attachmentActionsRef = /*#__PURE__*/React.createRef();\n    this.onRenameSubmit = this.onRenameSubmit.bind(this);\n    this.toggleRename = this.toggleRename.bind(this);\n  }\n\n  componentDidMount() {\n    if (typeof document !== 'undefined') {\n      document.addEventListener('mousedown', this.handleClickOutside);\n    }\n  }\n\n  componentWillUnmount() {\n    if (typeof document !== 'undefined') {\n      document.removeEventListener('mousedown', this.handleClickOutside);\n    }\n  }\n\n  onRenameSubmit(newFile) {\n    const { parentSharedId, model, storeKey } = this.props;\n    this.props.renameAttachment(parentSharedId, model, storeKey, newFile);\n  }\n\n  toggleDropdown() {\n    this.setState((prevState) => ({\n      dropdownMenuOpen: !prevState.dropdownMenuOpen }));\n\n  }\n\n  deleteAttachment(attachment) {\n    this.context.confirm({\n      accept: () => {\n        this.props.deleteAttachment(this.props.parentSharedId, attachment, this.props.storeKey);\n      },\n      title: 'Confirm delete',\n      message: this.props.deleteMessage });\n\n  }\n\n  toggleRename() {\n    const { file, model } = this.props;\n    this.props.loadForm.bind(this, model, file)();\n    this.toggleDropdown();\n  }\n\n  copyToClipboard(item) {\n    const dummy = document.createElement('textarea');\n    document.body.appendChild(dummy);\n    dummy.value = item.url || window.location.origin + item.downloadHref;\n    dummy.select();\n    document.execCommand('copy');\n    document.body.removeChild(dummy);\n\n    store.dispatch(notify('Copied to clipboard', 'success'));\n    this.toggleDropdown();\n  }\n\n  handleClickOutside(e) {\n    if (\n    this.attachmentActionsRef.current &&\n    !this.attachmentActionsRef.current.contains(e.target))\n    {\n      this.setState({ dropdownMenuOpen: false });\n    }\n  }\n\n  render() {\n    const { file, model, storeKey, entity } = this.props;\n    const sizeString = file.size ? filesize(file.size) : '';\n    const item = getItemOptions(file.filename, file.url);\n    let name = /*#__PURE__*/\n    _jsx(\"a\", { className: \"attachment-link\", href: item.url || item.downloadHref }, void 0,\n    Attachment.conformThumbnail(file, item), /*#__PURE__*/\n    _jsx(\"span\", { className: \"attachment-name\" }, void 0, /*#__PURE__*/\n    _jsx(\"span\", {}, void 0, file.originalname), /*#__PURE__*/\n    _jsx(ShowIf, { if: Boolean(sizeString) }, void 0, /*#__PURE__*/\n    _jsx(\"span\", { className: \"attachment-size\" }, void 0, sizeString))));\n\n\n\n\n\n    let buttons = null;\n\n    if (this.props.beingEdited && !this.props.readOnly) {\n      name = /*#__PURE__*/\n      _jsx(\"div\", { className: \"attachment-link\" }, void 0,\n      Attachment.conformThumbnail(file, item), /*#__PURE__*/\n      _jsx(\"span\", { className: \"attachment-name\" }, void 0, /*#__PURE__*/\n      _jsx(AttachmentForm, { model: this.props.model, onSubmit: this.onRenameSubmit })));\n\n\n\n\n      buttons = /*#__PURE__*/\n      _jsx(\"div\", { className: \"attachment-buttons\" }, void 0, /*#__PURE__*/\n      _jsx(\"div\", { className: \"item-shortcut-group\" }, void 0, /*#__PURE__*/\n      _jsx(NeedAuthorization, { roles: ['admin', 'editor'], orWriteAccessTo: [entity] }, void 0, /*#__PURE__*/\n      _jsx(\"button\", {\n        type: \"button\",\n        className: \"item-shortcut btn btn-primary\",\n        onClick: this.props.resetForm.bind(this, model) }, void 0, /*#__PURE__*/\n\n      _jsx(Icon, { icon: \"times\" }))), /*#__PURE__*/\n\n\n      _jsx(NeedAuthorization, { roles: ['admin', 'editor'], orWriteAccessTo: [entity] }, void 0, /*#__PURE__*/\n      _jsx(\"button\", {\n        type: \"button\",\n        className: \"item-shortcut btn btn-success\",\n        onClick: this.props.submitForm.bind(this, model, storeKey) }, void 0, /*#__PURE__*/\n\n      _jsx(Icon, { icon: \"save\" })))));\n\n\n\n\n\n    }\n\n    return /*#__PURE__*/(\n      _jsx(\"div\", { className: \"attachment\" }, void 0,\n      name, /*#__PURE__*/\n      _jsx(NeedAuthorization, { roles: ['admin', 'editor'], orWriteAccessTo: [entity] }, void 0,\n      buttons, /*#__PURE__*/\n\n      _jsx(\"div\", { className: \"dropdown attachments-dropdown\" }, void 0, /*#__PURE__*/\n      _jsx(\"button\", {\n        className: \"btn btn-default dropdown-toggle attachments-dropdown-toggle\",\n        type: \"button\",\n        id: \"attachment-dropdown-actions\",\n        \"data-toggle\": \"dropdown\",\n        \"aria-haspopup\": \"true\",\n        onClick: this.toggleDropdown }, void 0, /*#__PURE__*/\n\n      _jsx(Icon, { icon: \"pencil-alt\" })), /*#__PURE__*/\n\n      React.createElement(\"ul\", {\n        className: \"dropdown-menu dropdown-menu-right\",\n        \"aria-labelledby\": \"attachment-dropdown-actions\",\n        style: { display: this.state.dropdownMenuOpen ? 'block' : 'none' },\n        ref: this.attachmentActionsRef }, /*#__PURE__*/\n\n      _jsx(\"li\", {}, void 0, /*#__PURE__*/\n      _jsx(\"button\", { type: \"button\", onClick: () => this.copyToClipboard(item) }, void 0, /*#__PURE__*/\n      _jsx(Icon, { icon: \"link\" }), \" \", /*#__PURE__*/_jsx(Translate, {}, void 0, \"Copy link\"))), /*#__PURE__*/\n\n\n      _jsx(\"li\", {}, void 0, /*#__PURE__*/\n      _jsx(\"a\", { href: item.url || item.downloadHref, target: \"_blank\", rel: \"noopener noreferrer\" }, void 0, /*#__PURE__*/\n      _jsx(Icon, { icon: \"link\" }), \" \", /*#__PURE__*/_jsx(Translate, {}, void 0, \"Download\"))), /*#__PURE__*/\n\n\n      _jsx(\"li\", {}, void 0, /*#__PURE__*/\n      _jsx(\"button\", { type: \"button\", onClick: this.toggleRename }, void 0, /*#__PURE__*/\n      _jsx(Icon, { icon: \"pencil-alt\" }), \" \", /*#__PURE__*/_jsx(Translate, {}, void 0, \"Rename\"))), /*#__PURE__*/\n\n\n      _jsx(\"li\", {}, void 0, /*#__PURE__*/\n      _jsx(\"button\", {\n        type: \"button\",\n        onClick: this.deleteAttachment.bind(this, file),\n        className: \"is--delete\" }, void 0, /*#__PURE__*/\n\n      _jsx(Icon, { icon: \"trash-alt\" }), \" \", /*#__PURE__*/_jsx(Translate, {}, void 0, \"Delete\"))))))));\n\n\n\n\n\n\n\n  }}\n\n\nAttachment.defaultProps = {\n  deleteMessage: 'Are you sure you want to delete this attachment?',\n  entity: null };\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nAttachment.contextTypes = {\n  confirm: PropTypes.func };\n\n\nexport function mapStateToProps({ attachments }, ownProps) {\n  return {\n    model: 'attachments.edit.attachment',\n    beingEdited: ownProps.file._id && attachments.edit.attachment._id === ownProps.file._id };\n\n}\n\nfunction mapDispatchToProps(dispatch, props) {\n  return bindActionCreators(\n  { deleteAttachment, renameAttachment, loadForm, submitForm, resetForm },\n  wrapDispatch(dispatch, props.storeKey));\n\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Attachment);","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport { Translate } from \"../../I18N\";\nimport { advancedSort } from \"../../utils/advancedSort\";\nimport { NeedAuthorization } from \"../../Auth\";\nimport Attachment from \"./Attachment\";\n\nimport UploadSupportingFile from \"./UploadSupportingFile\";\n\nexport default class AttachmentsList extends Component {\n  static arrangeFiles(files = []) {\n    return advancedSort(files, { property: 'originalname' });\n  }\n\n  render() {\n    const label = /*#__PURE__*/\n    _jsx(\"h2\", {}, void 0, /*#__PURE__*/\n    _jsx(Translate, {}, void 0, \"Supporting files\"));\n\n\n\n    const { parentId, parentSharedId, readOnly, storeKey, entity } = this.props;\n    const forcedReadOnly = readOnly || Boolean(this.props.isTargetDoc);\n\n    let uploadAttachmentButton = null;\n    if (!this.props.isTargetDoc) {\n      uploadAttachmentButton = /*#__PURE__*/\n      _jsx(NeedAuthorization, { roles: ['admin', 'editor'], orWriteAccessTo: [entity] }, void 0, /*#__PURE__*/\n      _jsx(\"div\", { className: \"attachment-add\" }, void 0, /*#__PURE__*/\n      _jsx(UploadSupportingFile, { entitySharedId: this.props.parentSharedId, storeKey: storeKey })));\n\n\n\n    }\n\n    const attachments = AttachmentsList.arrangeFiles(this.props.attachments);\n    return /*#__PURE__*/(\n      _jsx(\"div\", { className: \"attachments-list-parent\" }, void 0, /*#__PURE__*/\n      _jsx(\"div\", { className: \"attachments-list-header\" }, void 0,\n      attachments.length === 0 ? /*#__PURE__*/\n      _jsx(NeedAuthorization, { roles: ['admin', 'editor'], orWriteAccessTo: [entity] }, void 0,\n      label) : /*#__PURE__*/\n\n\n      React.createElement(React.Fragment, null, label),\n\n      uploadAttachmentButton), /*#__PURE__*/\n\n      _jsx(\"div\", { className: \"attachments-list\" }, void 0,\n      attachments.map((file, index) => /*#__PURE__*/\n      _jsx(Attachment, {\n\n        file: file,\n        parentId: parentId,\n        readOnly: forcedReadOnly,\n        storeKey: storeKey,\n        parentSharedId: parentSharedId,\n        isSourceDocument: false,\n        entity: entity }, index)))));\n\n\n\n\n\n  }}\n\n\nAttachmentsList.defaultProps = {\n  attachments: [],\n  readOnly: false,\n  isTargetDoc: false,\n  parentId: null,\n  parentSharedId: null,\n  storeKey: '',\n  entity: null };\n\n\n\n\n\n\n\n\n\n\n\n\nAttachmentsList.contextTypes = {\n  confirm: PropTypes.func };","/** @format */\n\nimport api from \"../utils/api\";\nimport { actions } from \"../BasicReducer\";\nimport { notify } from \"../Notifications/actions/notificationsActions\";\nimport { RequestParams } from \"../utils/RequestParams\";\n\nexport function login(credentials) {\n  const request = new RequestParams(credentials);\n  return async (dispatch) => {\n    await api.post('login', request);\n    const user = await api.get('user');\n    dispatch(actions.set('auth/user', user.json));\n  };\n}\n\nexport function recoverPassword(email, altMessage) {\n  const request = new RequestParams({ email });\n  return (dispatch) =>\n  api.post('recoverpassword', request).then(() => {\n    dispatch(\n    notify(\n    !altMessage ?\n    'Instructions to reset your password have been sent, please check your email' :\n    altMessage,\n    'success'));\n\n\n  });\n}\n\nexport function resetPassword(password, key) {\n  const request = new RequestParams({ password, key });\n  return (dispatch) =>\n  api.post('resetpassword', request).then(() => {\n    dispatch(notify('Password changed success', 'success'));\n  });\n}\n\nexport function unlockAccount(credentials) {\n  const request = new RequestParams(credentials);\n  return (dispatch) =>\n  api.post('unlockaccount', request).then(() => {\n    dispatch(notify('Account unlocked successfully', 'success'));\n  });\n}","import React, { useMemo } from 'react';\nimport { connect } from 'react-redux';\n\n\n\n\n\n\n\n\n\n\n\n\nconst checkWritePermissions = (\nentities = [],\nuser = undefined) =>\n{\n  let granted = user !== undefined && user.has('role') && entities.length > 0;\n  let i = 0;\n  while (granted && i < entities.length) {\n    const entity = entities[i];\n    i += 1;\n    if (entity && entity.permissions) {\n      const idsWithWritePermissions = entity.permissions.\n      filter((p) => p.level === 'write').\n      map((p) => p.refId);\n\n      granted =\n      idsWithWritePermissions.find(\n      (id) => {var _user$get;return (\n          id === user.get('_id') || ((_user$get = user.get('groups')) === null || _user$get === void 0 ? void 0 : _user$get.find((g) => g.get('_id') === id)));}) !==\n      undefined;\n    } else {\n      granted = false;\n    }\n  }\n  return granted;\n};\n\nconst checkRole = (user, roles = ['admin']) =>\n!!(user.get('_id') && roles.includes(user.get('role')));\n\nconst NeedAuthorization = ({\n  children,\n  roles,\n  orWriteAccessTo,\n  user }) =>\n{\n  const authorized = useMemo(\n  () => checkRole(user, roles) || checkWritePermissions(orWriteAccessTo, user),\n  [user, roles, orWriteAccessTo]);\n\n\n  return authorized ? /*#__PURE__*/React.createElement(React.Fragment, null, children) : null;\n};\n\nconst mapStateToProps = ({ user }) => ({ user });\n\nexport default connect(mapStateToProps)(NeedAuthorization);","import * as actions from \"./actions\";\nimport NeedAuthorization from \"./components/NeedAuthorization\";\n\nexport default {\n  actions };\n\n\nexport { NeedAuthorization };","import createReducer, { actions } from \"./reducer\";\n\nexport default createReducer;\nexport { actions };","/** @format */\n\nimport Immutable from 'immutable';\n\nconst SET = 'SET';\nconst SET_IN = 'SET_IN';\nconst UPDATE = 'UPDATE';\nconst UPDATE_IN = 'UPDATE_IN';\nconst UNSET = 'UNSET';\nconst REMOVE = 'REMOVE';\nconst PUSH = 'PUSH';\nconst CONCAT = 'CONCAT';\nconst CONCAT_IN = 'CONCAT_IN';\n\nexport default function createReducer(namespace, defaultValue) {\n  return (currentState = defaultValue, action = {}) => {\n    let index;\n\n    switch (action.type) {\n      case `${namespace}/${SET}`:\n        return Immutable.fromJS(action.value);\n\n      case `${namespace}/${SET_IN}`:\n        return currentState.set(action.key, Immutable.fromJS(action.value));\n\n      case `${namespace}/${UNSET}`:\n        return Immutable.fromJS(defaultValue);\n\n      case `${namespace}/${PUSH}`:\n        return currentState.push(Immutable.fromJS(action.value));\n\n      case `${namespace}/${CONCAT}`:\n        return currentState.concat(Immutable.fromJS(action.value));\n\n      case `${namespace}/${CONCAT_IN}`:\n        return currentState.updateIn(action.key, (collection) =>\n        collection.concat(Immutable.fromJS(action.value)));\n\n\n      case `${namespace}/${REMOVE}`:\n        return Immutable.fromJS(currentState).filter(\n        (object) => object.get('_id') !== action.value._id);\n\n\n      case `${namespace}/${UPDATE}`:\n        if (currentState instanceof Immutable.Map) {\n          return currentState.merge(action.value);\n        }\n\n        index = currentState.findIndex((o) => o.get('_id') === action.value._id);\n        if (index === -1) {\n          return currentState.push(Immutable.fromJS(action.value));\n        }\n        return currentState.set(index, Immutable.fromJS(action.value));\n\n      case `${namespace}/${UPDATE_IN}`:\n        index = currentState.\n        getIn(action.key).\n        findIndex(\n        (o) =>\n        o.get(action.customIndex || '_id') === (\n        action.customIndex ? action.value[action.customIndex] : action.value._id));\n\n        if (index === -1) {\n          return currentState.updateIn(action.key, (collection) =>\n          collection.push(Immutable.fromJS(action.value)));\n\n        }\n        return currentState.setIn([...action.key, index], Immutable.fromJS(action.value));\n\n      default:\n        return Immutable.fromJS(currentState);}\n\n  };\n}\n\nexport function update(namespace, value) {\n  return {\n    type: `${namespace}/${UPDATE}`,\n    value };\n\n}\n\nexport function updateIn(namespace, key, value, customIndex = '') {\n  return {\n    type: `${namespace}/${UPDATE_IN}`,\n    key,\n    value,\n    customIndex };\n\n}\n\nexport function set(namespace, value) {\n  return {\n    type: `${namespace}/${SET}`,\n    value };\n\n}\n\nexport function setIn(namespace, key, value) {\n  return {\n    type: `${namespace}/${SET_IN}`,\n    key,\n    value };\n\n}\n\nexport function unset(namespace) {\n  return {\n    type: `${namespace}/${UNSET}` };\n\n}\n\nexport function push(namespace, value) {\n  return {\n    type: `${namespace}/${PUSH}`,\n    value };\n\n}\n\nexport function concat(namespace, value) {\n  return {\n    type: `${namespace}/${CONCAT}`,\n    value };\n\n}\n\nexport function concatIn(namespace, key, value) {\n  return {\n    type: `${namespace}/${CONCAT_IN}`,\n    key,\n    value };\n\n}\n\nexport function remove(namespace, value) {\n  return {\n    type: `${namespace}/${REMOVE}`,\n    value };\n\n}\n\nexport const actions = {\n  update,\n  updateIn,\n  set,\n  setIn,\n  unset,\n  push,\n  concat,\n  concatIn,\n  remove };","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import React from 'react';\nimport PropTypes from 'prop-types';\n\nconst ExtendedTooltip = (props) => {\n  if (props.active) {\n    const dataSetA = props.payload[0];\n    const dataSetB = props.payload[1];\n\n    return /*#__PURE__*/(\n      _jsx(\"div\", { style: { backgroundColor: '#fff', border: '1px solid #ccc' } }, void 0, /*#__PURE__*/\n      _jsx(\"div\", { style: { backgroundColor: '#eee', borderBottom: '1px dashed #ccc', padding: '5px' } }, void 0,\n      dataSetA.payload.name, \":\\xA0\\xA0\", /*#__PURE__*/\n      _jsx(\"b\", { style: { color: '#600' } }, void 0, dataSetA.value + dataSetB.value)), /*#__PURE__*/\n\n      _jsx(\"div\", { style: { padding: '5px' } }, void 0,\n      dataSetA.payload.setALabel, \":\\xA0\\xA0\", /*#__PURE__*/_jsx(\"b\", { style: { color: '#600' } }, void 0, dataSetA.value), /*#__PURE__*/\n      _jsx(\"br\", {}),\n      dataSetB.payload.setBLabel, \":\\xA0\\xA0\", /*#__PURE__*/_jsx(\"b\", { style: { color: '#600' } }, void 0, dataSetB.value))));\n\n\n\n  }\n  return null;\n};\n\nExtendedTooltip.defaultProps = {\n  payload: [],\n  active: false };\n\n\n\n\n\n\n\nexport default ExtendedTooltip;","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { t } from \"../../I18N\";\n\nimport { parseWithAggregations } from \"../../Library/helpers/libraryFilters\";\n\nimport { LibraryChart } from \"./..\";\nimport arrayUtils from \"../utils/arrayUtils\";\n\nfunction translateOptions(_property) {\n  const property = _property;\n  property.options = property.options.map((_option) => {\n    const option = _option;\n    option.label = t(property.content, option.label, null, false);\n    return option;\n  });\n  return property;\n}\n\nfunction sortFields(_field) {\n  const field = _field;\n  field.options = arrayUtils.sortValues(field.options);\n  return field;\n}\n\nexport class LibraryCharts extends Component {\n  itemResults(item) {\n    const { aggregations } = this;\n    const buckets =\n    aggregations.all && aggregations.all.types ? aggregations.all.types.buckets : [];\n    const found = buckets.find((agg) => agg.key === item.id);\n\n    if (found) {\n      return found.filtered.doc_count;\n    }\n\n    if (item.items) {\n      return item.items.reduce((result, _item) => result + this.itemResults(_item), 0);\n    }\n\n    return 0;\n  }\n\n  conformDocumentTypesToFields() {\n    let items = this.props.collection.toJS().filters || [];\n\n    if (!items.length || this.props.storeKey === 'uploads') {\n      items = this.props.templates.toJS().map((tpl) => ({ id: tpl._id, name: tpl.name }));\n    }\n\n    if (this.props.storeKey === 'uploads') {\n      items.unshift({ id: 'missing', name: t('System', 'No type') });\n    }\n\n    const fields = [\n    {\n      options: items.map((item) => ({\n        label: t(item.id, item.name),\n        results: this.itemResults(item) })),\n\n      label: t('System', 'Document and entity types') }];\n\n\n\n    return fields;\n  }\n\n  render() {\n    let fields = [];\n\n    if (this.props.aggregations) {\n      this.aggregations = this.props.aggregations.toJS();\n\n      if (this.props.fields.size) {\n        fields = parseWithAggregations(this.props.fields.toJS(), this.aggregations).\n        filter(\n        (field) =>\n        (field.type === 'select' || field.type === 'multiselect') &&\n        field.options &&\n        field.options.length).\n\n        map(translateOptions).\n        map(sortFields);\n      }\n\n      fields = fields.length ? fields : this.conformDocumentTypesToFields();\n    }\n\n    return /*#__PURE__*/(\n      _jsx(\"div\", { className: \"documents-list\" }, void 0, /*#__PURE__*/\n      _jsx(\"div\", { className: \"main-wrapper\" }, void 0, /*#__PURE__*/\n      _jsx(\"div\", { className: \"item-group item-group-charts\" }, void 0,\n      fields.map((field, index) => /*#__PURE__*/\n      _jsx(LibraryChart, {\n\n        options: field.options,\n        label: t(this.props.translationContext, field.label) }, index))))));\n\n\n\n\n\n\n  }}\n\n\n\n\n\n\n\n\n\n\n\nexport function mapStateToProps(state, props) {\n  const documentTypesExist = props.storeKey && state[props.storeKey].filters.get('documentTypes');\n\n  return {\n    aggregations: props.storeKey ? state[props.storeKey].aggregations : null,\n    fields: props.storeKey ? state[props.storeKey].filters.get('properties') : null,\n    collection: state.settings.collection,\n    templates: state.templates,\n    translationContext: documentTypesExist ?\n    state[props.storeKey].filters.getIn(['documentTypes', 0]) :\n    null };\n\n}\n\nexport default connect(mapStateToProps)(LibraryCharts);","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { t } from \"../../I18N\";\n\nimport { Pie, Bar } from \"./..\";\n\nexport class LibraryChartComponent extends Component {\n  constructor(props) {\n    super(props);\n    this.state = { type: 'pie' };\n    this.maxPieItems = 14;\n    this.assignType = this.assignType.bind(this);\n    this.typeButton = this.typeButton.bind(this);\n  }\n\n  assignType(type) {\n    return () => {\n      this.setState({ type });\n    };\n  }\n\n  clusterResults(options) {\n    return options.reduce((_clusteredResults, option, optionIndex) => {\n      const clusteredResults = _clusteredResults;\n      if (optionIndex < this.maxPieItems) {\n        clusteredResults.push(option);\n      }\n\n      if (optionIndex === this.maxPieItems) {\n        clusteredResults.push({ label: t('System', 'Other'), results: option.results });\n      }\n\n      if (optionIndex > this.maxPieItems) {\n        clusteredResults[clusteredResults.length - 1].results += option.results;\n      }\n\n      return clusteredResults;\n    }, []);\n  }\n\n  typeButton(type) {\n    const className = `btn btn-sm ${this.state.type === type ? 'btn-success' : 'btn-default'}`;\n    return /*#__PURE__*/(\n      _jsx(\"button\", { className: className, onClick: this.assignType(type) }, void 0, /*#__PURE__*/\n      _jsx(\"i\", { className: `fa fa-${type}-chart` })));\n\n\n  }\n\n  render() {\n    if (!this.props.options) {\n      return null;\n    }\n\n    const chart =\n    this.state.type === 'pie' ? /*#__PURE__*/\n    _jsx(Pie, { data: this.clusterResults(this.props.options) }) : /*#__PURE__*/\n\n    _jsx(Bar, { data: this.props.options, chartLabel: this.props.label });\n\n\n    return /*#__PURE__*/(\n      _jsx(\"div\", { className: \"item item-chart\" }, void 0, /*#__PURE__*/\n      _jsx(\"div\", {}, void 0, /*#__PURE__*/\n      _jsx(\"div\", { className: \"item-chart-type\" }, void 0,\n      this.typeButton('pie'),\n      this.typeButton('bar')), /*#__PURE__*/\n\n      _jsx(\"p\", {}, void 0, this.props.label),\n      chart)));\n\n\n\n  }}\n\n\nLibraryChartComponent.defaultProps = {\n  options: [],\n  label: null };\n\n\n\n\n\n\n\nexport default connect()(LibraryChartComponent);","import loadable from '@loadable/component';\n\nimport colorScheme from \"./utils/colorScheme\";\nimport arrayUtils from \"./utils/arrayUtils\";\nimport LibraryChart from \"./components/LibraryChart\";\nimport LibraryCharts from \"./components/LibraryCharts\";\nimport ExtendedTooltip from \"./components/ExtendedTooltip\";\n\nconst Bar = loadable(async () =>\nimport( /* webpackChunkName: \"LazyLoadBar\" */\"./components/Bar.js\"));\n\n\nconst ColoredBar = loadable(async () =>\nimport( /* webpackChunkName: \"LazyLoadColoredBar\" */\"./components/ColoredBar.js\"));\n\n\nconst Pie = loadable(async () =>\nimport( /* webpackChunkName: \"LazyLoadPie\" */\"./components/Pie.js\"));\n\n\nconst StackedDualBarChart = loadable(async () =>\nimport(\n/* webpackChunkName: \"LazyLoadStackedDualBarChart\" */\"./components/StackedDualBarChart.js\"));\n\n\n\nexport {\nBar,\nColoredBar,\nExtendedTooltip,\nLibraryChart,\nLibraryCharts,\nPie,\nStackedDualBarChart,\ncolorScheme,\narrayUtils };","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import React from 'react';\nimport { t } from \"../../I18N\";\nimport colorScheme from \"./colorScheme\";\n\nconst compareStrings = (a, b) => a.label.toLowerCase().localeCompare(b.label.toLowerCase());\nconst compareDocCount = (a, b) => b.filtered.doc_count - a.filtered.doc_count;\n\nconst sortValues = (values) => {\n  values.sort((a, b) => {\n    if (a.others || b.others) {\n      return false;\n    }\n\n    if (a.results === b.results) {\n      return compareStrings(a, b);\n    }\n\n    return b.results - a.results;\n  });\n\n  return values;\n};\n\nconst sortAndOrder = (data, method, order, reverseCondition) => {\n  data.sort(method);\n  return order === reverseCondition ? data.reverse() : data;\n};\n\nconst sortData = (data, { by = 'result', order } = {}) => {\n  if (by === 'result') {\n    return sortAndOrder(data, compareDocCount, order, 'asc');\n  }\n\n  if (by === 'label') {\n    return sortAndOrder(data, compareStrings, order, 'desc');\n  }\n\n  return data;\n};\n\nconst limitMaxCategories = (sortedCategories, maxCategories, aggregateOthers) => {\n  const categories = sortedCategories.slice(0, Number(maxCategories));\n\n  if (aggregateOthers) {\n    categories[categories.length] = sortedCategories.slice(Number(maxCategories)).reduce(\n    (memo, category) => {\n      // eslint-disable-next-line\n      memo.filtered.doc_count += category.filtered.doc_count;\n      return memo;\n    },\n    { others: true, key: 'others', filtered: { doc_count: 0 } });\n\n  }\n\n  return categories;\n};\n\nconst determineRelevantCategories = (data, formatOptions) => {\n  const { excludeZero, pluckCategories = [] } = formatOptions;\n  let relevantCategories = data.filter((i) => i.key !== 'missing' && i.key !== 'any');\n\n  if (excludeZero) {\n    relevantCategories = relevantCategories.filter((i) => i.filtered.doc_count !== 0);\n  }\n\n  if (pluckCategories.length) {\n    relevantCategories = pluckCategories.reduce((results, category) => {\n      const matchingCategory = relevantCategories.find((c) => c.label === category);\n      if (matchingCategory) {\n        results.push(matchingCategory);\n      }\n      return results;\n    }, []);\n  }\n\n  return relevantCategories;\n};\n\nconst formatPayload = (data) =>\ndata.map((item, index) => ({\n  value: item.name,\n  type: 'rect',\n  color: colorScheme[index % colorScheme.length],\n  formatter: () => /*#__PURE__*/_jsx(\"span\", { style: { color: '#333' } }, void 0, item.name) }));\n\n\nconst formatForNestedValues = (category, options) => {\n  const { labelsMap = {}, excludeZero, context } = options;\n  const flatValues = category.values.map((value) => ({\n    id: value.key,\n    label: labelsMap[value.label] || t(context, value.label, null, false),\n    results: value.filtered.doc_count,\n    parent: labelsMap[category.label] || t(context, category.label, null, false) }));\n\n  if (excludeZero) {\n    return flatValues.filter((value) => value.results !== 0);\n  }\n  return flatValues;\n};\n\nconst formatDataForChart = (data, _property, formatOptions) => {\n  const { maxCategories, aggregateOthers = false, labelsMap = {}, sort, context } = formatOptions;\n\n  const relevantCategories = determineRelevantCategories(data.toJS(), formatOptions);\n  const sortedCategories = sortData(relevantCategories, sort);\n\n  let categories = sortedCategories;\n\n  if (Number(maxCategories)) {\n    categories = limitMaxCategories(sortedCategories, maxCategories, aggregateOthers);\n  }\n\n  return [].concat(\n  ...categories.\n  map((item) => {\n    if (item.others && item.filtered.doc_count) {\n      return { others: true, id: item.key, label: 'others', results: item.filtered.doc_count };\n    }\n\n    if (!item.label) {\n      return null;\n    }\n\n    if (item.values && formatOptions.scatter) {\n      return formatForNestedValues(item, formatOptions);\n    }\n\n    return {\n      id: item.key,\n      label: labelsMap[item.label] || t(context, item.label, null, false),\n      results: item.filtered.doc_count };\n\n  }).\n  filter((i) => !!i));\n\n};\n\nexport default {\n  sortValues,\n  formatPayload,\n  formatDataForChart };","export default [\n'#0088FE',\n'#00ABC4',\n'#00C49F',\n'#A8C400',\n'#FFBB28',\n'#FF8042',\n'#D24040',\n'#A250B3'];\n\n\nconst light = [\n'#7fc3fe',\n'#7fd4e1',\n'#7fe1ce',\n'#d3e17f',\n'#ffdc93',\n'#ffbfa0',\n'#e89f9f',\n'#d0a7d8'];\n\n\nexport { light };","export const SET_RELATION_TYPE = 'SET_RELATION_TYPE';\nexport const SET_TARGET_DOCUMENT = 'SET_TARGET_DOCUMENT';\nexport const CONNECTION_CREATED = 'CONNECTION_CREATED';\n//UI\nexport const OPEN_CONNECTION_PANEL = 'OPEN_CONNECTION_PANEL';\nexport const CLOSE_CONNECTION_PANEL = 'CLOSE_CONNECTION_PANEL';\nexport const SEARCHING_CONNECTIONS = 'SEARCHING_CONNECTIONS';\nexport const CREATING_CONNECTION = 'CREATING_CONNECTION';\nexport const CREATING_RANGED_CONNECTION = 'CREATING_RANGED_CONNECTION';\nexport const CANCEL_RANGED_CONNECTION = 'CANCEL_RANGED_CONNECTION';","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport { TemplateLabel, Icon } from \"../../Layout\";\nimport Loader from \"../../components/Elements/Loader\";\n\nexport class SearchResults extends Component {\n  render() {\n    const loading = /*#__PURE__*/\n    _jsx(\"div\", { className: \"cs-loader-container\" }, void 0, \"\\xA0\", /*#__PURE__*/\n\n    _jsx(Loader, {}));\n\n\n    const results = this.props.results.toJS().map((result, index) => /*#__PURE__*/\n    _jsx(\"div\", {\n      className: `item ${this.props.selected === result.sharedId ? 'is-selected' : ''}`,\n\n      onClick: () => this.props.onClick(result.sharedId, result) }, index, /*#__PURE__*/\n\n    _jsx(\"div\", { className: \"item-info\" }, void 0, /*#__PURE__*/\n    _jsx(\"div\", { className: \"item-name\" }, void 0, /*#__PURE__*/\n    _jsx(Icon, { className: \"item-icon item-icon-center\", data: result.icon }),\n    result.title)), /*#__PURE__*/\n\n\n    _jsx(\"div\", { className: \"item-actions\" }, void 0, /*#__PURE__*/\n    _jsx(TemplateLabel, { template: result.template }))));\n\n\n\n\n    return /*#__PURE__*/(\n      _jsx(\"div\", {}, void 0,\n      this.props.searching ? loading : '', /*#__PURE__*/\n      _jsx(\"div\", { className: \"item-group\" }, void 0, results)));\n\n\n  }}\n\n\n\n\n\n\n\n\n\nexport default SearchResults;","import * as types from \"./actionTypes\";\n\nexport function openPanel(connectionType, sourceDocument) {\n  return {\n    type: types.OPEN_CONNECTION_PANEL,\n    sourceDocument,\n    connectionType };\n\n}\n\nexport function closePanel() {\n  return {\n    type: types.CLOSE_CONNECTION_PANEL };\n\n}\n\nexport function searching() {\n  return {\n    type: types.SEARCHING_CONNECTIONS };\n\n}","import qs from 'qs';\nimport { actions } from \"../../BasicReducer\";\nimport { notificationActions } from \"../../Notifications\";\nimport api from \"../../utils/api\";\nimport debounce from \"../../utils/debounce\";\nimport { RequestParams } from \"../../utils/RequestParams\";\n\nimport * as types from \"./actionTypes\";\nimport * as uiActions from \"./uiActions\";\n\nexport function immediateSearch(dispatch, searchString, connectionType) {\n  dispatch(uiActions.searching());\n\n  const requestParams = new RequestParams(\n  qs.stringify({\n    filter: { searchString: searchString ? `title:(${searchString})` : undefined },\n    fields: ['title', 'template', 'sharedId', 'documents._id'] }));\n\n\n\n  return api.get('v2/entities', requestParams).then(({ json: { data } }) => {\n    let results = data;\n    if (connectionType === 'targetRanged') {\n      results = results.filter((r) => r.documents && r.documents.length);\n    }\n    dispatch(actions.set('connections/searchResults', results));\n  });\n}\n\nconst debouncedSearch = debounce(immediateSearch, 400);\n\nexport function search(searchTerm, connectionType) {\n  return (dispatch) => {\n    dispatch(actions.set('connections/searchTerm', searchTerm));\n    return debouncedSearch(dispatch, searchTerm, connectionType);\n  };\n}\n\nexport function startNewConnection(connectionType, sourceDocument) {\n  return (dispatch) =>\n  immediateSearch(dispatch, '', connectionType).then(() => {\n    dispatch(actions.set('connections/searchTerm', ''));\n    dispatch(uiActions.openPanel(connectionType, sourceDocument));\n  });\n}\n\nexport function setRelationType(template) {\n  return {\n    type: types.SET_RELATION_TYPE,\n    template };\n\n}\n\nexport function setTargetDocument(id) {\n  return {\n    type: types.SET_TARGET_DOCUMENT,\n    id };\n\n}\n\nexport function saveConnection(connection, callback = () => {}) {\n  return (dispatch, getState) => {\n    dispatch({ type: types.CREATING_CONNECTION });\n    if (connection.type !== 'basic') {\n      connection.language = getState().locale;\n    }\n\n    delete connection.type;\n\n    const sourceRelationship = {\n      entity: connection.sourceDocument,\n      template: null,\n      reference: connection.sourceRange,\n      file: connection.sourceFile };\n\n\n    const targetRelationship = { entity: connection.targetDocument, template: connection.template };\n    if (connection.targetRange) {\n      Object.assign(targetRelationship, {\n        reference: connection.targetRange,\n        file: connection.targetFile });\n\n    }\n\n    const apiCall = {\n      delete: [],\n      save: [[sourceRelationship, targetRelationship]] };\n\n\n    return api.post('relationships/bulk', new RequestParams(apiCall)).then((response) => {\n      dispatch({ type: types.CONNECTION_CREATED });\n      callback(response.json);\n      dispatch(notificationActions.notify('saved successfully !', 'success'));\n    });\n  };\n}\n\nexport function selectRangedTarget(connection, onRangedConnect) {\n  return (dispatch) => {\n    dispatch({ type: types.CREATING_RANGED_CONNECTION });\n    onRangedConnect(connection.targetDocument);\n  };\n}","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport { Map } from 'immutable';\nimport { Icon } from \"../../UI\";\nimport { Translate } from \"../../I18N\";\nimport { saveConnection, selectRangedTarget } from \"../actions/actions\";\n\nclass ActionButton extends Component {\n  onClick(enabled, connection) {\n    if (enabled) {\n      if (this.props.action === 'save') {\n        this.props.saveConnection(connection, this.props.onCreate);\n      }\n      if (this.props.action === 'connect') {\n        this.props.selectRangedTarget(connection, this.props.onRangedConnect);\n      }\n    }\n  }\n\n  renderContent() {\n    let buttonIcon = 'arrow-right';\n    if (this.props.busy) {\n      buttonIcon = 'spinner';\n    }\n    if (this.props.action === 'save') {\n      buttonIcon = 'save';\n      return /*#__PURE__*/_jsx(Translate, {}, void 0, \"Save\");\n    }\n    return /*#__PURE__*/_jsx(Icon, { icon: buttonIcon, spin: !!this.props.busy });\n  }\n\n  render() {\n    const connection = this.props.connection.toJS();\n\n    let connectionValid =\n    connection.sourceDocument && connection.targetDocument && connection.template;\n\n    if (this.props.type === 'basic') {\n      delete connection.sourceRange;\n    }\n\n    if (this.props.type !== 'basic') {\n      connectionValid = connectionValid && connection.sourceRange;\n    }\n\n    const enabled = connectionValid && !this.props.busy;\n    const buttonClass =\n    this.props.action === 'save' ? 'btn btn-success' : 'edit-metadata btn btn-success';\n\n    return /*#__PURE__*/(\n      _jsx(\"button\", {\n        className: buttonClass,\n        disabled: !enabled,\n        type: \"button\",\n        onClick: this.onClick.bind(this, enabled, connection) }, void 0,\n\n      this.renderContent()));\n\n\n  }}\n\n\nActionButton.defaultProps = {\n  onCreate: () => {},\n  onRangedConnect: () => {},\n  type: '',\n  busy: false };\n\n\n\n\n\n\n\n\n\n\n\n\n\nfunction mapStateToProps({ connections }) {\n  return {\n    type: connections.connection.get('type'),\n    connection: connections.connection,\n    busy: connections.uiState.get('creating') || connections.uiState.get('connecting') };\n\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return bindActionCreators({ saveConnection, selectRangedTarget }, dispatch);\n}\n\nexport { ActionButton, mapStateToProps };\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ActionButton);","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\n\nimport SearchInput from \"../../Layout/SearchInput\";\nimport { search } from \"../actions/actions\";\n\nexport class SearchForm extends Component {\n  render() {\n    return /*#__PURE__*/(\n      _jsx(SearchInput, {\n        value: this.props.searchTerm,\n        onChange: (e) => this.props.search(e.target.value, this.props.connectionType) }));\n\n\n  }}\n\n\n\n\n\n\n\n\nfunction mapStateToProps({ connections }) {\n  return {\n    searchTerm: connections.searchTerm };\n\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return bindActionCreators({ search }, dispatch);\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SearchForm);","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport React, { Component } from 'react';\n\nimport { Icon } from \"../../UI\";\nimport SidePanel from \"../../Layout/SidePanel\";\nimport { Translate } from \"../../I18N\";\n\nimport { closePanel } from \"../actions/uiActions\";\nimport { setRelationType, setTargetDocument } from \"../actions/actions\";\nimport ActionButton from \"./ActionButton\";\nimport SearchForm from \"./SearchForm\";\nimport SearchResults from \"./SearchResults\";\n\nclass CreateConnectionPanel extends Component {\n  renderCheckType(template) {\n    if (this.props.connection.get('template') === template.get('_id')) {\n      return /*#__PURE__*/_jsx(Icon, { icon: \"check\" });\n    }\n\n    return /*#__PURE__*/_jsx(Icon, { icon: ['far', 'square'] });\n  }\n\n  render() {\n    const { uiState, searchResults } = this.props;\n    const connection = this.props.connection.toJS();\n    const typeLabel = connection.type === 'basic' ? 'Connection' : 'Reference';\n    const open = Boolean(\n    this.props.uiState.get('open') && this.props.containerId === connection.sourceDocument);\n\n    const className = `${this.props.className} create-reference`;\n\n    return /*#__PURE__*/(\n      _jsx(SidePanel, { open: open, className: className }, void 0, /*#__PURE__*/\n      _jsx(\"div\", { className: \"sidepanel-header\" }, void 0, /*#__PURE__*/\n      _jsx(\"h1\", {}, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Create\"), \" \", typeLabel), /*#__PURE__*/\n\n      _jsx(\"button\", {\n        className: \"closeSidepanel close-modal\",\n        onClick: this.props.closePanel,\n        \"aria-label\": \"Close side panel\",\n        type: \"button\" }, void 0, /*#__PURE__*/\n\n      _jsx(Icon, { icon: \"times\" })), /*#__PURE__*/\n\n      _jsx(\"div\", { className: \"connections-list-title\" }, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Select relationship type\")), /*#__PURE__*/\n\n      _jsx(\"ul\", { className: \"connections-list multiselect\" }, void 0,\n      this.props.relationTypes.map((template) => /*#__PURE__*/\n      _jsx(\"li\", {\n        onClick: () => this.props.setRelationType(template.get('_id')),\n\n        className: \"multiselectItem\" }, template.get('_id'), /*#__PURE__*/\n\n      _jsx(\"label\", { className: \"multiselectItem-label\", htmlFor: template.get('_id') }, void 0, /*#__PURE__*/\n      _jsx(\"span\", { className: \"multiselectItem-icon\" }, void 0, this.renderCheckType(template)), /*#__PURE__*/\n      _jsx(\"span\", { className: \"multiselectItem-name\" }, void 0, template.get('name'))))))), /*#__PURE__*/\n\n\n\n\n\n\n      _jsx(\"div\", { className: \"sidepanel-footer\" }, void 0, /*#__PURE__*/\n      _jsx(\"div\", { className: \"btn-cluster content-right\" }, void 0, /*#__PURE__*/\n      _jsx(\"button\", {\n        className: \"btn btn-default\",\n        onClick: this.props.closePanel,\n        \"aria-label\": \"Close side panel\",\n        type: \"button\" }, void 0, /*#__PURE__*/\n\n      _jsx(Translate, {}, void 0, \"Cancel\")),\n\n      connection.type !== 'targetRanged' && /*#__PURE__*/\n      _jsx(ActionButton, {\n        action: \"save\",\n        onCreate: (reference) => {\n          this.props.onCreate(reference);\n        } }),\n\n\n      connection.type === 'targetRanged' && /*#__PURE__*/\n      _jsx(ActionButton, { action: \"connect\", onRangedConnect: this.props.onRangedConnect }))), /*#__PURE__*/\n\n\n\n\n      _jsx(\"div\", { className: \"sidepanel-body\" }, void 0, /*#__PURE__*/\n      _jsx(\"div\", { className: \"search-box\" }, void 0, /*#__PURE__*/\n      _jsx(SearchForm, { connectionType: connection.type })), /*#__PURE__*/\n\n      _jsx(SearchResults, {\n        results: searchResults,\n        searching: uiState.get('searching'),\n        selected: connection.targetDocument,\n        onClick: this.props.setTargetDocument }))));\n\n\n\n\n  }}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst mapStateToProps = ({ connections, relationTypes }) => ({\n  uiState: connections.uiState,\n  connection: connections.connection,\n  searchResults: connections.searchResults,\n  relationTypes });\n\n\nfunction mapDispatchToProps(dispatch) {\n  return bindActionCreators({ setRelationType, setTargetDocument, closePanel }, dispatch);\n}\n\nexport { CreateConnectionPanel, mapStateToProps };\n\nexport default connect(mapStateToProps, mapDispatchToProps)(CreateConnectionPanel);","function ownKeys(object, enumerableOnly) {var keys = Object.keys(object);if (Object.getOwnPropertySymbols) {var symbols = Object.getOwnPropertySymbols(object);enumerableOnly && (symbols = symbols.filter(function (sym) {return Object.getOwnPropertyDescriptor(object, sym).enumerable;})), keys.push.apply(keys, symbols);}return keys;}function _objectSpread(target) {for (var i = 1; i < arguments.length; i++) {var source = null != arguments[i] ? arguments[i] : {};i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {_defineProperty(target, key, source[key]);}) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));});}return target;}function _defineProperty(obj, key, value) {if (key in obj) {Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });} else {obj[key] = value;}return obj;}import { actions } from \"../../BasicReducer\";\nimport { actions as formActions } from 'react-redux-form';\nimport { notificationActions } from \"../../Notifications\";\nimport referencesAPI from \"../../Viewer/referencesAPI\";\nimport { fromJS as Immutable } from 'immutable';\nimport prioritySortingCriteria from \"../../utils/prioritySortingCriteria\";\nimport { RequestParams } from \"../../utils/RequestParams\";\n\nimport * as uiActions from \"../../Entities/actions/uiActions\";\n\nexport function search(requestParams) {\n  const { sharedId, sort, filters } = requestParams.data;\n  const searchTerm =\n  requestParams.data.search && requestParams.data.search.searchTerm ?\n  requestParams.data.search.searchTerm.value :\n  '';\n\n  let options = _objectSpread({ sharedId }, sort);\n  if (filters) {\n    options = _objectSpread(_objectSpread(_objectSpread({ sharedId }, sort), filters.toJS()), {}, { searchTerm });\n  }\n  return referencesAPI.search(requestParams.onlyHeaders().add(options));\n}\n\nexport function searchReferences() {\n  return async (dispatch, getState) => {\n    const relationshipsList = getState().relationships.list;\n    const results = await search(new RequestParams(relationshipsList));\n    dispatch(actions.set('relationships/list/searchResults', results));\n    dispatch(uiActions.showTab('connections'));\n  };\n}\n\nexport function connectionsChanged() {\n  return (dispatch, getState) => {\n    const relationshipsList = getState().relationships.list;\n    const { sharedId } = relationshipsList;\n\n    return referencesAPI.\n    getGroupedByConnection(new RequestParams({ sharedId })).\n    then((connectionsGroups) => {\n      const filteredTemplates = connectionsGroups.reduce(\n      (templateIds, group) => templateIds.concat(group.templates.map((t) => t._id.toString())),\n      []);\n\n\n      const sortOptions = prioritySortingCriteria.get({\n        currentCriteria: relationshipsList.sort,\n        filteredTemplates,\n        templates: getState().templates });\n\n      return Promise.all([connectionsGroups, sortOptions]);\n    }).\n    then(([connectionsGroups, sort]) => {\n      dispatch(actions.set('relationships/list/connectionsGroups', connectionsGroups));\n      dispatch(formActions.merge('relationships/list.sort', sort));\n      return searchReferences()(dispatch, getState);\n    });\n  };\n}\n\nexport function deleteConnection(connection) {\n  return async (dispatch, getState) => {\n    await referencesAPI.delete(new RequestParams({ _id: connection._id }));\n    dispatch(notificationActions.notify('Connection deleted', 'success'));\n    return connectionsChanged()(dispatch, getState);\n  };\n}\n\nexport function loadAllReferences() {\n  return async (dispatch, getState) => {\n    const relationshipsList = getState().relationships.list;\n    dispatch(\n    actions.set('relationships/list/filters', relationshipsList.filters.set('limit', 9999)));\n\n    return searchReferences()(dispatch, getState);\n  };\n}\n\nexport function loadMoreReferences(limit) {\n  return function (dispatch, getState) {\n    const relationshipsList = getState().relationships.list;\n    dispatch(\n    actions.set('relationships/list/filters', relationshipsList.filters.set('limit', limit)));\n\n    return searchReferences()(dispatch, getState);\n  };\n}\n\nexport function setFilter(groupFilterValues) {\n  return function (dispatch, getState) {\n    const relationshipsList = getState().relationships.list;\n    const currentFilter = relationshipsList.filters.get('filter') || Immutable({});\n    const newFilter = currentFilter.merge(groupFilterValues);\n    dispatch(\n    actions.set('relationships/list/filters', relationshipsList.filters.set('filter', newFilter)));\n\n    return searchReferences()(dispatch, getState);\n  };\n}\n\nexport function resetSearch() {\n  return function (dispatch, getState) {\n    dispatch(formActions.change('relationships/list/search.searchTerm', ''));\n    dispatch(actions.set('relationships/list/filters', Immutable({})));\n    return searchReferences()(dispatch, getState);\n  };\n}\n\nexport function switchView(type) {\n  return function (dispatch, getState) {\n    dispatch(actions.set('relationships/list/view', type));\n    if (type === 'graph') {\n      return loadAllReferences()(dispatch, getState);\n    }\n  };\n}","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\n\nimport ShowIf from \"../../App/ShowIf\";\nimport { Translate } from \"../../I18N\";\nimport { Icon } from \"../../UI\";\n\nimport { resetSearch } from \"../actions/actions\";\n\nclass ResetSearch extends Component {\n  render() {\n    const { connectionsGroups } = this.props;\n    return /*#__PURE__*/(\n      _jsx(ShowIf, { if: Boolean(connectionsGroups.size) }, void 0, /*#__PURE__*/\n      _jsx(\"button\", { type: \"button\", onClick: this.props.resetSearch, className: \"btn btn-default\" }, void 0, /*#__PURE__*/\n      _jsx(Icon, { icon: \"times\" }), /*#__PURE__*/\n      _jsx(\"span\", { className: \"btn-label\" }, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Clear Filters\")))));\n\n\n\n\n  }}\n\n\n\n\n\n\n\nfunction mapStateToProps({ relationships }) {\n  return {\n    connectionsGroups: relationships.list.connectionsGroups };\n\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return bindActionCreators({ resetSearch }, dispatch);\n}\n\nexport { ResetSearch };\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ResetSearch);","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\nimport { Field, Form, actions as formActions } from 'react-redux-form';\n\nimport debounce from \"../../utils/debounce\";\nimport { t } from \"../../I18N\";\nimport { Icon } from \"../../UI\";\n\nimport { searchReferences } from \"../actions/actions\";\n\nexport class SearchBar extends Component {\n  constructor(props) {\n    super(props);\n    this.changeSearchTerm = debounce(this.props.searchReferences, 400);\n  }\n\n  componentDidUpdate(prevProps) {\n    if (this.props.entityId !== prevProps.entityId) {\n      this.resetSearchTerm();\n    }\n  }\n\n  componentWillUnmount() {\n    this.resetSearchTerm();\n  }\n\n  resetSearchTerm() {\n    this.props.change('relationships/list/search.searchTerm', '');\n  }\n\n  resetSearch() {\n    this.resetSearchTerm();\n    this.props.searchReferences();\n  }\n\n  render() {\n    const { search } = this.props;\n    const searchTerm = search.searchTerm && search.searchTerm.value ? search.searchTerm.value : '';\n\n    return /*#__PURE__*/(\n      _jsx(\"div\", { className: \"search-box\" }, void 0, /*#__PURE__*/\n      _jsx(Form, {\n        model: \"relationships/list/search\",\n        onSubmit: this.props.searchReferences,\n        autoComplete: \"off\" }, void 0, /*#__PURE__*/\n\n      _jsx(\"div\", { className: `input-group${searchTerm ? ' is-active' : ''}` }, void 0, /*#__PURE__*/\n      _jsx(Field, { model: \"relationships/list/search.searchTerm\" }, void 0, /*#__PURE__*/\n      _jsx(Icon, { icon: \"search\" }), /*#__PURE__*/\n      _jsx(\"input\", {\n        type: \"text\",\n        placeholder: t('System', 'Search related entities or documents', null, false),\n        className: \"form-control\",\n        onChange: this.changeSearchTerm.bind(this),\n        autoComplete: \"off\",\n        value: searchTerm }), /*#__PURE__*/\n\n      _jsx(Icon, { icon: \"times\", onClick: this.resetSearch.bind(this) }))))));\n\n\n\n\n\n  }}\n\n\n\n\n\n\n\n\n\nexport function mapStateToProps({ relationships }) {\n  const { entityId, search } = relationships.list;\n  return {\n    entityId,\n    search };\n\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return bindActionCreators(\n  {\n    searchReferences,\n    change: formActions.change },\n\n  dispatch);\n\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SearchBar);","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { Map, List } from 'immutable';\n\nimport { t } from \"../../I18N\";\nimport formater from \"../../Metadata/helpers/formater\";\nimport { Icon } from \"../../UI\";\n\nconst conformQuote = (text) => /*#__PURE__*/\n_jsx(\"div\", { className: \"relationship-quote\" }, void 0, /*#__PURE__*/\n_jsx(\"span\", { className: \"quoteIconStart\" }, void 0, /*#__PURE__*/\n_jsx(Icon, { icon: \"quote-left\" })),\n\ntext, /*#__PURE__*/\n_jsx(\"span\", { className: \"quoteIconEnd\" }, void 0, /*#__PURE__*/\n_jsx(Icon, { icon: \"quote-right\" })));\n\n\n\n\nconst conformDl = ({ label, name, value }) => /*#__PURE__*/\n_jsx(\"dl\", { className: \"item-property-default\" }, name, /*#__PURE__*/\n_jsx(\"dt\", {}, void 0, label), /*#__PURE__*/\n_jsx(\"dd\", {}, void 0, Array.isArray(value) ? value.map((v) => v.value).join(', ') : value));\n\n\n\n\n\n\n\n\n\nconst extendedMetadata = (relationship, text, relationTypes, thesauris) => {\n  const formattedMetadata = formater.prepareMetadata(\n  relationship.toJS(),\n  relationTypes,\n  thesauris).\n  metadata;\n  return /*#__PURE__*/(\n    _jsx(\"div\", { className: \"relationship-metadata\" }, void 0, /*#__PURE__*/\n    _jsx(\"div\", { className: \"item-metadata\" }, void 0,\n    formattedMetadata.map(conformDl),\n    text &&\n    conformDl({\n      label: t('System', 'Text'),\n      name: 'text',\n      value: conformQuote(text) }))));\n\n\n\n\n};\n\nconst justText = (text) => /*#__PURE__*/_jsx(\"div\", { className: \"relationship-metadata\" }, void 0, conformQuote(text));\n\nconst HubRelationshipMetadata = (props) => {\n  const { relationship, relationTypes, thesauris } = props;\n  const text = relationship.getIn(['reference', 'text']);\n  const metadata = relationship.get('metadata');\n\n  if (metadata && metadata.size) {\n    return extendedMetadata(relationship, text, relationTypes, thesauris);\n  }\n\n  if (text) {\n    return justText(text);\n  }\n\n  return null;\n};\n\nHubRelationshipMetadata.defaultProps = {\n  relationship: Map({}) };\n\n\n\n\n\n\n\n\nexport function mapStateToProps({ relationTypes, thesauris }) {\n  return { relationTypes, thesauris };\n}\n\nexport default connect(mapStateToProps)(HubRelationshipMetadata);","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport { Map } from 'immutable';\nimport { Icon } from \"../../UI\";\nimport Doc from \"../../Library/components/Doc\";\nimport DropdownList from \"../../Forms/components/DropdownList\";\nimport * as actions from \"../actions/actions\";\nimport HubRelationshipMetadata from \"./HubRelationshipMetadata\";\n\nclass LeftRelationship extends Component {\n  static renderFigure() {\n    return /*#__PURE__*/(\n      _jsx(\"div\", { className: \"hubRelationship\" }, \"figure\", /*#__PURE__*/\n      _jsx(\"figure\", {})));\n\n\n  }\n\n  constructor(props) {\n    super(props);\n    this.toggelRemoveLeftRelationship = this.props.toggelRemoveLeftRelationship.bind(\n    null,\n    props.index);\n\n    this.onClick = this.onClick.bind(this);\n  }\n\n  onClick(_e, entity) {\n    this.props.selectConnection(entity);\n  }\n\n  renderTrashButton(hub) {\n    return (\n      this.props.editing && /*#__PURE__*/\n      _jsx(\"div\", { className: \"removeHub\" }, \"toggelRemoveLeftRelationship\", /*#__PURE__*/\n      _jsx(\"button\", { onClick: this.toggelRemoveLeftRelationship, className: \"relationships-icon\" }, void 0, /*#__PURE__*/\n      _jsx(Icon, { icon: !hub.get('deleted') ? 'trash-alt' : 'undo' }))));\n\n\n\n\n  }\n\n  renderRelationship() {\n    const { parentEntity, hub, search, editing, relationTypes, index } = this.props;\n    const relationship = hub.get('leftRelationship');\n    const targetReference = relationship.get('range') ? relationship : null;\n    return /*#__PURE__*/(\n      _jsx(\"div\", {\n\n        className: `leftRelationshipType ${hub.get('deleted') ? 'deleted' : ''}` }, \"leftRelationshipType\",\n\n      !editing && hub.getIn(['leftRelationship', 'template']) && /*#__PURE__*/\n      _jsx(\"div\", { className: \"rw-dropdown-list rw-widget\" }, void 0, /*#__PURE__*/\n      _jsx(\"div\", { className: \"rw-widget-input rw-widget-picker rw-widget-container no-edit\" }, void 0, /*#__PURE__*/\n      _jsx(\"div\", { className: \"rw-input rw-dropdown-list-input no-edit\" }, void 0,\n\n      relationTypes.find((r) => r._id === hub.getIn(['leftRelationship', 'template'])).\n      name))),\n\n\n\n\n\n      editing && /*#__PURE__*/\n      _jsx(DropdownList, {\n        valueField: \"_id\",\n        textField: \"name\",\n        data: relationTypes,\n        value: hub.getIn(['leftRelationship', 'template']),\n        filter: \"contains\",\n        onChange: this.props.updateLeftRelationshipType.bind(null, index) }), /*#__PURE__*/\n\n\n      _jsx(\"div\", {\n        className: `leftDocument ${\n        !hub.getIn(['leftRelationship', 'template']) && !editing ?\n        'docWithoutRelationshipType' :\n        ''\n        }` }, void 0, /*#__PURE__*/\n\n      _jsx(Doc, {\n        className: \"item-collapsed\",\n        doc: parentEntity,\n        searchParams: search,\n        onClick: this.onClick,\n        targetReference: targetReference })), /*#__PURE__*/\n\n\n      _jsx(HubRelationshipMetadata, { relationship: hub.get('leftRelationship') })));\n\n\n  }\n\n  render() {\n    const { hub, index, parentEntity } = this.props;\n    if (!parentEntity.get('sharedId')) {\n      return false;\n    }\n    return /*#__PURE__*/(\n      React.createElement(React.Fragment, null,\n      this.renderTrashButton(hub, index),\n      this.renderRelationship(),\n      LeftRelationship.renderFigure()));\n\n\n  }}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nfunction mapStateToProps(state) {\n  const { relationships } = state;\n  return {\n    parentEntity: relationships.list.entity,\n    search: relationships.list.sort,\n    editing: relationships.hubActions.get('editing'),\n    relationTypes: actions.selectRelationTypes(state) };\n\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return bindActionCreators(\n  {\n    selectConnection: actions.selectConnection,\n    updateLeftRelationshipType: actions.updateLeftRelationshipType,\n    toggelRemoveLeftRelationship: actions.toggelRemoveLeftRelationship },\n\n  dispatch);\n\n}\n\nexport { LeftRelationship, mapStateToProps };\nexport default connect(mapStateToProps, mapDispatchToProps)(LeftRelationship);","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport { Icon } from \"../../UI\";\nimport { Translate } from \"../../I18N\";\nimport Doc from \"../../Library/components/Doc\";\nimport DropdownList from \"../../Forms/components/DropdownList\";\nimport * as actions from \"../actions/actions\";\nimport * as uiActions from \"../actions/uiActions\";\nimport HubRelationshipMetadata from \"./HubRelationshipMetadata\";\n\nclass RightRelationship extends Component {\n  constructor(props) {\n    super(props);\n    this.updateRightRelationshipType = this.updateRightRelationshipType.bind(this);\n    this.toggleRemoveRightRelationshipGroup = this.toggleRemoveRightRelationshipGroup.bind(this);\n    this.toggleRemoveEntity = this.toggleRemoveEntity.bind(this);\n    this.setAddToData = this.setAddToData.bind(this);\n    this.onClick = this.onClick.bind(this);\n  }\n\n  onClick(_e, entity) {\n    this.props.selectConnection(entity);\n  }\n\n  setAddToData(hubIndex, rightRelationshipIndex) {\n    return () => {\n      this.props.setAddToData(hubIndex, rightRelationshipIndex);\n      this.props.openAddEntitiesPanel();\n    };\n  }\n\n  updateRightRelationshipType(index, rightRelationshipIndex) {\n    return (value) => {\n      this.props.updateRightRelationshipType(index, rightRelationshipIndex, value._id);\n    };\n  }\n\n  toggleRemoveRightRelationshipGroup(index, rightRelationshipIndex) {\n    return () => {\n      this.props.toggleRemoveRightRelationshipGroup(index, rightRelationshipIndex);\n    };\n  }\n\n  toggleRemoveEntity(index, rightRelationshipIndex, relationshipIndex) {\n    return () => {\n      this.props.toggleRemoveEntity(index, rightRelationshipIndex, relationshipIndex);\n    };\n  }\n\n  render() {\n    const { hub, index, search, hubActions, relationTypes } = this.props;\n    const editing = hubActions.get('editing');\n    return /*#__PURE__*/(\n      _jsx(\"div\", { className: \"rightRelationships\" }, void 0,\n      hub.get('rightRelationships').map((rightRelationshipGroup, rightRelationshipIndex) => /*#__PURE__*/\n      _jsx(\"div\", {\n        className: `rightRelationshipsTypeGroup ${\n        rightRelationshipGroup.get('deleted') ? 'deleted' : ''\n        }` },\n      rightRelationshipIndex, /*#__PURE__*/\n\n      _jsx(\"div\", {\n        className: `rightRelationshipType\n                             ${\n        rightRelationshipIndex === hub.get('rightRelationships').size - 1 ?\n        'last-of-type' :\n        ''\n        }` }, void 0,\n\n      !editing && /*#__PURE__*/\n      _jsx(\"div\", { className: \"rw-dropdown-list rw-widget no-edit\" }, void 0, /*#__PURE__*/\n      _jsx(\"div\", { className: \"rw-widget-input rw-widget-picker rw-widget-container no-edit\" }, void 0, /*#__PURE__*/\n      _jsx(\"div\", { className: \"rw-input rw-dropdown-list-input no-edit\" }, void 0,\n      (() => {\n        if (\n        relationTypes.find((r) => r._id === rightRelationshipGroup.get('template')))\n        {\n          return rightRelationshipGroup.get('template') ?\n          relationTypes.find(\n          (r) => r._id === rightRelationshipGroup.get('template')).\n          name : /*#__PURE__*/\n\n          _jsx(Icon, { icon: \"link\" });\n\n        }\n        return null;\n      })()))),\n\n\n\n\n      editing && /*#__PURE__*/\n      _jsx(DropdownList, {\n        valueField: \"_id\",\n        textField: \"name\",\n        data: relationTypes,\n        value: rightRelationshipGroup.get('template'),\n        placeholder: \"New connection type\",\n        filter: \"contains\",\n        onChange: this.updateRightRelationshipType(index, rightRelationshipIndex) })),\n\n\n\n      editing && /*#__PURE__*/\n      _jsx(\"div\", { className: \"removeRightRelationshipGroup\" }, void 0,\n      (() => {\n        if (rightRelationshipGroup.has('template')) {\n          return /*#__PURE__*/(\n            _jsx(\"button\", {\n              type: \"button\",\n              onClick: this.toggleRemoveRightRelationshipGroup(\n              index,\n              rightRelationshipIndex),\n\n              className: \"relationships-icon\" }, void 0, /*#__PURE__*/\n\n            _jsx(Icon, {\n              icon: !rightRelationshipGroup.get('deleted') ? 'trash-alt' : 'undo' })));\n\n\n\n        }\n\n        return /*#__PURE__*/_jsx(\"span\", {}, void 0, \"\\xA0\");\n      })()),\n\n\n      rightRelationshipGroup.get('relationships').map((relationship, relationshipIndex) => {\n        if (relationship.get('moved')) {\n          return false;\n        }\n        const rightRelationshipDeleted = rightRelationshipGroup.get('deleted');\n        const deleted = relationship.get('deleted');\n        const move = relationship.get('move');\n        return /*#__PURE__*/(\n          _jsx(\"div\", {\n            className: `rightRelationship ${\n            !rightRelationshipDeleted && deleted ? 'deleted' : ''\n            } ${move ? 'move' : ''}` },\n          relationshipIndex, /*#__PURE__*/\n\n          _jsx(\"div\", { className: \"rightRelationshipType\" }, void 0, /*#__PURE__*/\n          _jsx(Doc, {\n            className: \"item-collapsed\",\n            doc: relationship.get('entityData'),\n            searchParams: search,\n            onClick: this.onClick,\n            targetReference: relationship.get('reference') ? relationship : null }), /*#__PURE__*/\n\n          _jsx(HubRelationshipMetadata, { relationship: relationship })),\n\n          editing && /*#__PURE__*/\n          _jsx(\"div\", { className: \"removeEntity\" }, void 0, /*#__PURE__*/\n          _jsx(\"button\", {\n            type: \"button\",\n            onClick: this.toggleRemoveEntity(\n            index,\n            rightRelationshipIndex,\n            relationshipIndex),\n\n            className: \"relationships-icon\" }, void 0, /*#__PURE__*/\n\n          _jsx(Icon, { icon: !deleted ? 'trash-alt' : 'undo' }))),\n\n\n\n          editing && /*#__PURE__*/\n          _jsx(\"div\", { className: \"moveEntity\" }, void 0, /*#__PURE__*/\n          _jsx(\"button\", {\n            type: \"button\",\n            onClick: this.props.toggleMoveEntity.bind(\n            this,\n            index,\n            rightRelationshipIndex,\n            relationshipIndex),\n\n            className: `relationships-icon ${!move ? '' : 'moving'}` }, void 0, /*#__PURE__*/\n\n          _jsx(Icon, { icon: \"check\" })))));\n\n\n\n\n\n      }),\n      (() => {\n        if (editing && rightRelationshipGroup.has('template')) {\n          const isActive =\n          hubActions.getIn(['addTo', 'hubIndex']) === index &&\n          hubActions.getIn(['addTo', 'rightRelationshipIndex']) === rightRelationshipIndex;\n          return /*#__PURE__*/(\n            _jsx(\"div\", { className: \"rightRelationshipAdd\" }, void 0, /*#__PURE__*/\n            _jsx(\"button\", {\n              type: \"button\",\n              className: `relationships-new ${isActive ? 'is-active' : ''}`,\n              onClick: this.setAddToData(index, rightRelationshipIndex) }, void 0, /*#__PURE__*/\n\n            _jsx(\"span\", {}, void 0, /*#__PURE__*/\n            _jsx(Translate, {}, void 0, \"Add entities / documents\")), /*#__PURE__*/\n\n            _jsx(Icon, { icon: \"plus\" })), /*#__PURE__*/\n\n            _jsx(\"div\", { className: \"insertEntities\" }, void 0, /*#__PURE__*/\n            _jsx(\"button\", {\n              type: \"button\",\n              onClick: this.props.moveEntities.bind(this, index, rightRelationshipIndex),\n              className: \"relationships-icon\" }, void 0, /*#__PURE__*/\n\n            _jsx(Icon, { icon: \"arrow-left\" })))));\n\n\n\n\n        }\n\n        return null;\n      })()))));\n\n\n\n\n  }}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nfunction mapStateToProps(state) {\n  const { relationships } = state;\n  return {\n    search: relationships.list.sort,\n    hubs: relationships.hubs,\n    hubActions: relationships.hubActions,\n    relationTypes: actions.selectRelationTypes(state) };\n\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return bindActionCreators(\n  {\n    selectConnection: actions.selectConnection,\n    updateRightRelationshipType: actions.updateRightRelationshipType,\n    toggleRemoveRightRelationshipGroup: actions.toggleRemoveRightRelationshipGroup,\n    setAddToData: actions.setAddToData,\n    toggleRemoveEntity: actions.toggleRemoveEntity,\n    moveEntities: actions.moveEntities,\n    toggleMoveEntity: actions.toggleMoveEntity,\n    openAddEntitiesPanel: uiActions.openPanel },\n\n  dispatch);\n\n}\n\nexport { RightRelationship, mapStateToProps };\nexport default connect(mapStateToProps, mapDispatchToProps)(RightRelationship);","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport { Map, List } from 'immutable';\nimport { Icon } from \"../../UI\";\nimport { Translate } from \"../../I18N\";\nimport * as actions from \"../actions/actions\";\n\nimport LeftRelationship from \"./LeftRelationship\";\nimport RightRelationship from \"./RightRelationship\";\n\nexport class RelationshipsGraphEdit extends Component {\n  componentDidMount() {\n    this.props.parseResults(this.props.searchResults, this.props.parentEntity, this.props.editing);\n  }\n\n  componentDidUpdate(prevProps) {\n    if (this.props.searchResults !== prevProps.searchResults) {\n      this.props.parseResults(\n      this.props.searchResults,\n      this.props.parentEntity,\n      this.props.editing);\n\n    }\n  }\n\n  render() {\n    const { hubs, addHub } = this.props;\n\n    return /*#__PURE__*/(\n      _jsx(\"div\", { className: \"relationships-graph\" }, void 0, /*#__PURE__*/\n      _jsx(\"div\", {}, void 0,\n      hubs.map((hub, index) => /*#__PURE__*/\n      _jsx(\"div\", { className: \"relationshipsHub\" }, index, /*#__PURE__*/\n      _jsx(LeftRelationship, { index: index, hub: hub }), /*#__PURE__*/\n      _jsx(RightRelationship, { index: index, hub: hub }))),\n\n\n\n      this.props.editing && /*#__PURE__*/\n      _jsx(\"div\", { className: \"relationshipsHub\" }, void 0, /*#__PURE__*/\n      _jsx(\"div\", { className: \"leftRelationshipType \" }, void 0, /*#__PURE__*/\n      _jsx(\"button\", { type: \"button\", className: \"relationships-new\", onClick: addHub }, void 0, /*#__PURE__*/\n      _jsx(\"span\", {}, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"New relationships group\")), /*#__PURE__*/\n\n      _jsx(Icon, { icon: \"plus\" })))))));\n\n\n\n\n\n\n\n  }}\n\n\n\n\n\n\n\n\n\n\n\nexport function mapStateToProps(state) {\n  const { relationships } = state;\n  return {\n    parentEntity: relationships.list.entity,\n    searchResults: relationships.list.searchResults,\n    search: relationships.list.sort,\n    hubs: relationships.hubs,\n    editing: relationships.hubActions.get('editing') };\n\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return bindActionCreators(\n  {\n    parseResults: actions.parseResults,\n    addHub: actions.addHub },\n\n  dispatch);\n\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(RelationshipsGraphEdit);","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import PropTypes from 'prop-types';\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\n\nimport { t } from \"../../I18N\";\n\nimport { loadMoreReferences } from \"../../ConnectionsList/actions/actions\";\n\nexport const LoadMoreRelationshipsButton = ({\n  totalHubs,\n  requestedHubs,\n  action,\n  loadMoreAmmount }) =>\n{\n  if (requestedHubs < totalHubs) {\n    const actionFunction = () => {\n      action(requestedHubs + loadMoreAmmount);\n    };\n\n    return /*#__PURE__*/(\n      _jsx(\"div\", { className: \"text-center\" }, void 0, /*#__PURE__*/\n      _jsx(\"p\", { className: \"col-sm-12 text-center documents-counter\" }, void 0, /*#__PURE__*/\n      _jsx(\"b\", {}, void 0, requestedHubs), \" \", t('System', 'of'), \" \", /*#__PURE__*/_jsx(\"b\", {}, void 0, totalHubs), \" \", t('System', 'hubs')), /*#__PURE__*/\n\n      _jsx(\"button\", { onClick: actionFunction, className: \"btn btn-default btn-load-more\" }, void 0,\n      `${loadMoreAmmount}`, \" \", t('System', 'x more'))));\n\n\n\n  }\n\n  return null;\n};\n\n\n\n\n\n\n\n\nexport const mapStateToProps = ({ relationships }) => ({\n  totalHubs: relationships.list.searchResults.get('totalHubs'),\n  requestedHubs: relationships.list.searchResults.get('requestedHubs'),\n  loadMoreAmmount: 10 });\n\n\nfunction mapDispatchToProps(dispatch) {\n  return bindActionCreators(\n  {\n    action: loadMoreReferences },\n\n  dispatch);\n\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(LoadMoreRelationshipsButton);","import { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport { fromJS as Immutable } from 'immutable';\n\nimport SearchBar from \"./SearchBar\";\nimport RelationshipsGraph from \"../../Relationships/components/RelationshipsGraphEdit\";\nimport LoadMoreRelationshipsButton from \"../../Relationships/components/LoadMoreRelationshipsButton\";\nimport DocumentsList from \"../../Layout/DocumentsList\";\nimport { searchReferences } from \"../actions/actions\";\n\nexport function mapStateToProps({ relationships }) {\n  const documents = relationships.list.searchResults;\n\n  return {\n    documents,\n    connections: {\n      totalRows: (documents.get('rows') || Immutable([])).\n      filter((r) => r.get('sharedId') !== relationships.list.sharedId).\n      reduce((total, r) => total + r.get('connections').size, 0) },\n\n    filters: Immutable({ documentTypes: [] }),\n    search: relationships.list.sort,\n    sortButtonsStateProperty: 'relationships/list.sort',\n    SearchBar,\n    GraphView: RelationshipsGraph,\n    view: 'graph',\n    LoadMoreButton: LoadMoreRelationshipsButton,\n    connectionsGroups: relationships.list.connectionsGroups };\n\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return bindActionCreators(\n  {\n    searchDocuments: searchReferences },\n\n  dispatch);\n\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(DocumentsList);","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\nimport { is, fromJS as Immutable } from 'immutable';\nimport PropTypes from 'prop-types';\nimport React, { Component } from 'react';\n\nimport { t } from \"../../I18N\";\nimport ShowIf from \"../../App/ShowIf\";\nimport { Icon } from \"../../UI\";\n\nimport { setFilter } from \"../actions/actions\";\n\nexport class ConnectionsGroup extends Component {\n  static getDerivedStateFromProps(props, state) {\n    if (props.group.get('templates').size > state.groupTemplates.size) {\n      return {\n        selected: false,\n        groupTemplates: props.group.get('templates') };\n\n    }\n\n    return { groupTemplates: props.group.get('templates') };\n  }\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      expanded: true,\n      selected: false,\n      selectedItems: Immutable([]),\n      groupTemplates: Immutable([]) };\n\n  }\n\n  shouldComponentUpdate(nextProps, nextState) {\n    return (\n      !is(this.props.group, nextProps.group) ||\n      this.state.expanded !== nextState.expanded ||\n      this.state.selected !== nextState.selected ||\n      this.state.selectedItems.size !== nextState.selectedItems.size);\n\n  }\n\n  setGroupFilter(selectedItems) {\n    const newFilter = {};\n    newFilter[this.props.group.get('key')] = selectedItems;\n    this.props.setFilter(newFilter);\n  }\n\n  toggleSelectItem(item) {\n    let selectedItems;\n    let groupSelected;\n\n    if (this.state.selectedItems.includes(item)) {\n      groupSelected = false;\n      selectedItems = this.state.selectedItems.splice(this.state.selectedItems.indexOf(item), 1);\n    }\n\n    if (!this.state.selectedItems.includes(item)) {\n      selectedItems = this.state.selectedItems.push(item);\n      groupSelected = selectedItems.size === this.props.group.get('templates').size;\n    }\n\n    this.setGroupFilter(selectedItems);\n    this.setState({ selectedItems, selected: groupSelected });\n  }\n\n  toggleSelectGroup() {\n    const { group } = this.props;\n    const selectedItems = !this.state.selected ?\n    group.get('templates').map((i) => group.get('key') + i.get('_id')) :\n    Immutable([]);\n\n    this.setGroupFilter(selectedItems);\n    this.setState((currentState) => ({ selected: !currentState.selected, selectedItems }));\n  }\n\n  toggleExpandGroup() {\n    this.setState((currentState) => ({ expanded: !currentState.expanded }));\n  }\n\n  render() {\n    const group = this.props.group.toJS();\n    const { connectionLabel, templates } = group;\n    return /*#__PURE__*/(\n      _jsx(\"li\", { className: \"relationshipFilters\" }, void 0, /*#__PURE__*/\n      _jsx(\"div\", { className: \"multiselectItem\" }, void 0, /*#__PURE__*/\n      _jsx(\"input\", {\n        type: \"checkbox\",\n        className: \"form-control multiselectItem-input\",\n        id: `group${group.key}`,\n        onChange: this.toggleSelectGroup.bind(this),\n        checked: this.state.selected }), /*#__PURE__*/\n\n      _jsx(\"label\", { htmlFor: `group${group.key}`, className: \"multiselectItem-label\" }, void 0, /*#__PURE__*/\n      _jsx(\"span\", { className: \"multiselectItem-icon\" }, void 0, /*#__PURE__*/\n      _jsx(Icon, { icon: ['far', 'square'], className: \"checkbox-empty\" }), /*#__PURE__*/\n      _jsx(Icon, { icon: \"check\", className: \"checkbox-checked\" })), /*#__PURE__*/\n\n      _jsx(\"span\", { className: \"multiselectItem-name\" }, void 0, /*#__PURE__*/\n      _jsx(\"b\", {}, void 0, group.key ? t(group.context, connectionLabel) : t('System', 'No Label')))), /*#__PURE__*/\n\n\n      _jsx(\"span\", { className: \"multiselectItem-results\" }, void 0, /*#__PURE__*/\n      _jsx(\"span\", {}, void 0, group.templates.reduce((size, i) => size + i.count, 0)), /*#__PURE__*/\n      _jsx(\"span\", { className: \"multiselectItem-action\", onClick: this.toggleExpandGroup.bind(this) }, void 0, /*#__PURE__*/\n      _jsx(Icon, { icon: this.state.expanded ? 'caret-up' : 'caret-down' })))), /*#__PURE__*/\n\n\n\n      _jsx(ShowIf, { if: this.state.expanded }, void 0, /*#__PURE__*/\n      _jsx(\"ul\", { className: \"multiselectChild is-active\" }, void 0,\n      templates.map((template, index) => /*#__PURE__*/\n      _jsx(\"li\", { className: \"multiselectItem\", title: template.label }, index, /*#__PURE__*/\n      _jsx(\"input\", {\n        type: \"checkbox\",\n        className: \"multiselectItem-input\",\n        id: group.key + template._id,\n        onChange: this.toggleSelectItem.bind(this, group.key + template._id),\n        checked: this.state.selectedItems.includes(group.key + template._id) }), /*#__PURE__*/\n\n      _jsx(\"label\", { className: \"multiselectItem-label\", htmlFor: group.key + template._id }, void 0, /*#__PURE__*/\n      _jsx(\"span\", { className: \"multiselectItem-icon\" }, void 0, /*#__PURE__*/\n      _jsx(Icon, { icon: ['far', 'square'], className: \"checkbox-empty\" }), /*#__PURE__*/\n      _jsx(Icon, { icon: \"check\", className: \"checkbox-checked\" })), /*#__PURE__*/\n\n      _jsx(\"span\", { className: \"multiselectItem-name\" }, void 0, t(template._id, template.label))), /*#__PURE__*/\n\n      _jsx(\"span\", { className: \"multiselectItem-results\" }, void 0, template.count)))))));\n\n\n\n\n\n\n  }}\n\n\n\n\n\n\n\nexport const mapDispatchToProps = (dispatch) =>\nbindActionCreators(\n{\n  setFilter },\n\ndispatch);\n\n\nexport default connect(null, mapDispatchToProps)(ConnectionsGroup);","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import PropTypes from 'prop-types';\nimport Immutable from 'immutable';\nimport React, { Component } from 'react';\nimport { Icon } from \"../../UI\";\nimport { connect } from 'react-redux';\nimport { t } from \"../../I18N\";\n\nimport ConnectionsGroup from \"./ConnectionsGroup\";\n\nclass ConnectionsGroupsComponent extends Component {\n  render() {\n    const { connectionsGroups } = this.props;\n\n    let Results = /*#__PURE__*/\n    _jsx(\"div\", { className: \"blank-state\" }, void 0, /*#__PURE__*/\n    _jsx(Icon, { icon: \"exchange-alt\" }), /*#__PURE__*/\n    _jsx(\"h4\", {}, void 0, t('System', 'No Relationships')), /*#__PURE__*/\n    _jsx(\"p\", {}, void 0, t('System', 'No Relationships description')));\n\n\n\n    if (connectionsGroups.size) {\n      Results = /*#__PURE__*/\n      _jsx(\"div\", {}, void 0, /*#__PURE__*/\n      _jsx(\"div\", { className: \"nested-selector\" }, void 0, /*#__PURE__*/\n      _jsx(\"ul\", { className: \"multiselect is-active\" }, void 0,\n      connectionsGroups.map((group) => /*#__PURE__*/\n      _jsx(ConnectionsGroup, { group: group }, group.get('key'))))));\n\n\n\n\n\n    }\n\n    return Results;\n  }}\n\n\n\n\n\n\nfunction mapStateToProps({ relationships }) {\n  return {\n    connectionsGroups: relationships.list.connectionsGroups };\n\n}\n\nexport const ConnectionsGroups = connect(mapStateToProps)(ConnectionsGroupsComponent);","import { combineReducers } from 'redux';\nimport { modelReducer, formReducer } from 'react-redux-form';\nimport createReducer from \"../../BasicReducer\";\n\nimport prioritySortingCriteria from \"../../utils/prioritySortingCriteria\";\n\nexport default combineReducers({\n  entityId: createReducer('connectionsList/entityId', ''),\n  entity: createReducer('connectionsList/entity', {}),\n  connectionsGroups: createReducer('connectionsList/connectionsGroups', []),\n  searchResults: createReducer('connectionsList/searchResults', { totalRows: 0, rows: [] }),\n  sort: modelReducer('connectionsList.sort', prioritySortingCriteria.get()),\n  filters: createReducer('connectionsList/filters', {}),\n  search: formReducer('connectionsList/search'),\n  view: createReducer('connectionsList/view', 'graph') });","export const OPEN_MENU = 'OPEN_MENU';\nexport const CLOSE_MENU = 'CLOSE_MENU';","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import PropTypes from 'prop-types';\nimport React from 'react';\n\nconst FormGroup = (props) => {\n  let className = `${props.className} form-group`;\n  if ((!props.pristine || props.submitFailed) && props.valid === false) {\n    className += ' has-error';\n  }\n\n  return /*#__PURE__*/_jsx(\"div\", { className: className }, void 0, props.children);\n};\n\n\n\nFormGroup.defaultProps = {\n  className: '' };\n\n\n\n\n\n\n\n\n\n\nexport default FormGroup;","import api from \"../utils/api\";\nimport EntitiesApi from \"../Entities/EntitiesAPI\";\n\nexport default {\n  get(requestParams) {\n    return EntitiesApi.get(requestParams);\n  },\n\n  countByTemplate(requestParams) {\n    const url = 'documents/count_by_template';\n    return api.get(url, requestParams).then((response) => response.json);\n  },\n\n  uploads() {\n    const url = 'documents/uploads';\n    return api.get(url).then((response) => response.json.rows);\n  },\n\n  search(requestParams) {\n    const url = 'documents/search';\n    return api.get(url, requestParams).then((response) => response.json);\n  },\n\n  list(requestParams) {\n    const url = 'documents/list';\n    return api.get(url, requestParams).then((response) => response.json.rows);\n  },\n\n  save(requestParams) {\n    return api.post('documents', requestParams).then((response) => response.json);\n  },\n\n  delete(requestParams) {\n    return api.delete('documents', requestParams).then((response) => response.json);\n  } };","function ownKeys(object, enumerableOnly) {var keys = Object.keys(object);if (Object.getOwnPropertySymbols) {var symbols = Object.getOwnPropertySymbols(object);enumerableOnly && (symbols = symbols.filter(function (sym) {return Object.getOwnPropertyDescriptor(object, sym).enumerable;})), keys.push.apply(keys, symbols);}return keys;}function _objectSpread(target) {for (var i = 1; i < arguments.length; i++) {var source = null != arguments[i] ? arguments[i] : {};i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {_defineProperty(target, key, source[key]);}) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));});}return target;}function _defineProperty(obj, key, value) {if (key in obj) {Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });} else {obj[key] = value;}return obj;} /** @format */\n\nimport moment from 'moment';\n\nexport default {\n  performantDocToJSWithoutRelations(doc) {\n    return doc.delete('relations').toJS();\n  },\n\n  prepareMetadata(doc, templates, thesauris) {\n    const template = templates.find((t) => t._id === doc.template);\n\n    if (!template || !thesauris.length) {\n      return _objectSpread(_objectSpread({}, doc), {}, { metadata: [], documentType: '' });\n    }\n\n    const metadata = template.properties.map((property) => {\n      let value = null;\n      if (doc.metadata[property.name] && doc.metadata[property.name][0]) {\n        [{ value }] = doc.metadata[property.name];\n      }\n      if (property.type === 'select' && value) {\n        const thesauri = thesauris.\n        find((t) => t._id === property.content).\n        values.find((v) => v.id.toString() === value.toString());\n\n        value = '';\n        if (thesauri) {\n          value = thesauri.label;\n        }\n      }\n\n      if (property.type === 'date' && value) {\n        value = moment(value, 'X').format('MMM DD, YYYY');\n      }\n\n      return { label: property.label, value };\n    });\n\n    return _objectSpread(_objectSpread({}, doc), {}, { metadata, documentType: template.name });\n  } };","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport { Form, Field } from 'react-redux-form';\nimport { Icon } from \"../../UI\";\n\nexport class TocForm extends Component {\n  constructor(props) {\n    super(props);\n    this.submit = this.submit.bind(this);\n  }\n\n  indentButton(direction, tocElement) {\n    const { indent } = this.props;\n    const onClick = indent.bind(\n    null,\n    tocElement,\n    tocElement.indentation + (direction === 'more' ? 1 : -1));\n\n    return /*#__PURE__*/(\n      _jsx(\"button\", { type: \"button\", onClick: onClick, className: `toc-indent-${direction} btn btn-default` }, void 0, /*#__PURE__*/\n      _jsx(Icon, { icon: direction === 'more' ? 'arrow-right' : 'arrow-left', directionAware: true })));\n\n\n  }\n\n  submit(toc) {\n    this.props.onSubmit(toc, this.props.file._id);\n  }\n\n  render() {\n    const { toc, model, removeEntry } = this.props;\n    return /*#__PURE__*/(\n      _jsx(Form, { className: \"toc\", id: \"tocForm\", model: model, onSubmit: this.submit }, void 0,\n      toc.map((tocElement, index) => /*#__PURE__*/\n      _jsx(\"div\", { className: `toc-indent-${tocElement.indentation}` }, index, /*#__PURE__*/\n      _jsx(\"div\", { className: \"toc-edit\" }, void 0,\n      this.indentButton('less', tocElement),\n      this.indentButton('more', tocElement), /*#__PURE__*/\n      _jsx(Field, { model: `${model}[${index}].label` }, void 0, /*#__PURE__*/\n      _jsx(\"input\", { className: \"form-control\" })), /*#__PURE__*/\n\n      _jsx(\"button\", {\n        type: \"button\",\n        onClick: removeEntry.bind(this, tocElement),\n        className: \"btn btn-danger\" }, void 0, /*#__PURE__*/\n\n      _jsx(Icon, { icon: \"trash-alt\" })))))));\n\n\n\n\n\n\n  }}\n\n\nTocForm.defaultProps = {\n  toc: [],\n  removeEntry: () => {},\n  indent: () => {},\n  onSubmit: () => {} };\n\n\n\n\n\n\n\n\n\n\n\nexport default TocForm;","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { scrollToToc } from \"../../Viewer/actions/uiActions\";\nimport Immutable from 'immutable';\nimport ShowIf from \"../../App/ShowIf\";\nimport { t } from \"../../I18N\";\nimport { Icon } from \"../../UI\";\n\nimport \"./scss/showToc.scss\";\n\nexport class ShowToc extends Component {\n  scrollTo(tocElement, e) {\n    e.preventDefault();\n    this.props.scrollToToc(tocElement.toJS());\n  }\n\n  render() {\n    const toc = Immutable.fromJS(this.props.toc);\n\n    if (!toc.size) {\n      return /*#__PURE__*/(\n        _jsx(\"div\", { className: \"blank-state\" }, void 0, /*#__PURE__*/\n        _jsx(Icon, { icon: \"font\" }), /*#__PURE__*/\n        _jsx(\"h4\", {}, void 0, t('System', 'No Table of Contents')), /*#__PURE__*/\n        _jsx(\"p\", {}, void 0, t('System', 'No Table of Contents description'))));\n\n\n    }\n\n    return /*#__PURE__*/(\n      _jsx(\"div\", { className: \"toc\" }, void 0, /*#__PURE__*/\n      _jsx(\"ul\", { className: \"toc-view\" }, void 0,\n      toc.map((tocElement, index) => /*#__PURE__*/\n      _jsx(\"li\", { className: `toc-indent-${tocElement.get('indentation')}` }, index, /*#__PURE__*/\n      _jsx(ShowIf, { if: !this.props.readOnly }, void 0, /*#__PURE__*/\n      _jsx(\"a\", {\n        className: \"toc-view-link\",\n        href: \"#\",\n        onClick: this.scrollTo.bind(this, tocElement) }, void 0,\n\n      tocElement.get('label'), /*#__PURE__*/\n      _jsx(\"span\", { className: \"page-number\" }, void 0,\n      tocElement.getIn(['selectionRectangles', 0]).get('page')))), /*#__PURE__*/\n\n\n\n      _jsx(ShowIf, { if: this.props.readOnly }, void 0, /*#__PURE__*/\n      _jsx(\"span\", { className: \"toc-view-link\" }, void 0, tocElement.get('label'))))))));\n\n\n\n\n\n\n  }}\n\n\nShowToc.defaultProps = {\n  toc: [] };\n\n\n\n\n\n\n\n\nfunction mapDispatchToProps() {\n  return { scrollToToc };\n}\n\nexport default connect(null, mapDispatchToProps)(ShowToc);","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport { fromJS as Immutable } from 'immutable';\nimport { I18NLink } from \"../../I18N\";\nimport { NeedAuthorization } from \"../../Auth\";\nimport { Icon } from \"../../UI\";\n\nimport ShowIf from \"../../App/ShowIf\";\nimport { deleteReference } from \"../actions/referencesActions\";\nimport {\nhighlightReference,\nactivateReference,\nselectReference } from \"../actions/uiActions\";\n\nimport { Item } from \"../../Layout\";\nimport { createSelector } from 'reselect';\nimport helpers from \"../../Documents/helpers\";\n\nconst selectDoc = createSelector(\n(s) => s.documentViewer.targetDoc,\n(s) => s.documentViewer.doc,\n(targetDoc, doc) =>\ntargetDoc.get('_id') ?\nhelpers.performantDocToJSWithoutRelations(targetDoc) :\nhelpers.performantDocToJSWithoutRelations(doc));\n\n\nexport class Connection extends Component {\n  clickReference(reference) {\n    if (this.props.readOnly) {\n      return;\n    }\n    if (!this.props.targetDoc) {\n      this.props.activateReference(reference, this.props.referencesSection);\n    }\n\n    if (this.props.targetDoc && typeof reference.reference !== 'undefined') {\n      this.props.selectReference(reference);\n    }\n  }\n\n  deleteReference(reference) {\n    this.context.confirm({\n      accept: () => {\n        this.props.deleteReference(reference);\n      },\n      title: 'Confirm delete connection',\n      message: 'Are you sure you want to delete this connection?' });\n\n  }\n\n  relationType(id) {\n    const type = this.props.relationTypes.find((relation) => relation.get('_id') === id);\n    if (type) {\n      return type.name;\n    }\n  }\n\n  render() {\n    const { reference } = this.props;\n    let itemClass = '';\n    const disabled = this.props.targetDoc && typeof reference.reference === 'undefined';\n\n    if (this.props.highlighted) {\n      itemClass = 'relationship-hover';\n    }\n\n    if (this.props.active) {\n      itemClass = 'relationship-active';\n    }\n\n    if (this.props.active && this.props.targetDoc && this.props.targetRange) {\n      itemClass = 'relationship-selected';\n    }\n\n    if (this.props.readOnly) {\n      itemClass = '';\n    }\n\n    const doc = Immutable(reference.associatedRelationship.entityData);\n    return /*#__PURE__*/(\n      _jsx(Item, {\n        onMouseEnter: this.props.highlightReference.bind(null, reference._id),\n        onMouseLeave: this.props.highlightReference.bind(null, null),\n        onClick: this.clickReference.bind(this, reference),\n        doc: doc,\n        noMetadata: true,\n        className: `${itemClass} item-${reference._id} ${disabled ? 'disabled' : ''} ${\n        this.props.readOnly ? 'readOnly' : ''\n        }`,\n        \"data-id\": reference._id,\n        additionalText:\n        reference.associatedRelationship.reference ?\n        reference.associatedRelationship.reference.text :\n        null,\n\n        additionalMetadata: [\n        { label: 'Connection type', value: this.relationType(reference.template) }],\n\n        evalPublished: true,\n        buttons: /*#__PURE__*/\n        _jsx(\"div\", { className: \"item-shortcut-group\" }, void 0, /*#__PURE__*/\n        _jsx(ShowIf, { if: !this.props.targetDoc && !this.props.readOnly }, void 0, /*#__PURE__*/\n        _jsx(NeedAuthorization, { roles: ['admin', 'editor'] }, void 0, /*#__PURE__*/\n        _jsx(\"a\", {\n          className: \"item-shortcut btn btn-default btn-hover-danger delete\",\n          onClick: this.deleteReference.bind(this, reference) }, void 0, /*#__PURE__*/\n\n        _jsx(Icon, { icon: \"trash-alt\" })))), /*#__PURE__*/\n\n\n\n\n        _jsx(ShowIf, { if: !this.props.targetDoc }, void 0, /*#__PURE__*/\n        _jsx(I18NLink, {\n          to: `/entity/${doc.get('sharedId')}`,\n          onClick: (e) => e.stopPropagation(),\n          className: \"item-shortcut btn btn-default\" }, void 0, /*#__PURE__*/\n\n        _jsx(Icon, { icon: \"file\" })))) }));\n\n\n\n\n\n\n  }}\n\n\nConnection.contextTypes = {\n  confirm: PropTypes.func };\n\n\nConnection.defaultProps = {\n  targetDoc: false };\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst mapStateToProps = (state, ownProps) => {\n  const { documentViewer } = state;\n  return {\n    highlighted: documentViewer.uiState.get('highlightedReference') === ownProps.reference._id,\n    active: documentViewer.uiState.get('activeReference') === ownProps.reference._id,\n    targetRange: documentViewer.uiState.get('reference').get('targetRange'),\n    targetDoc: !!documentViewer.targetDoc.get('_id'),\n    relationTypes: documentViewer.relationTypes,\n    doc: selectDoc(state) };\n\n};\n\nfunction mapDispatchToProps(dispatch) {\n  return bindActionCreators(\n  {\n    highlightReference,\n    activateReference,\n    selectReference,\n    deleteReference },\n\n  dispatch);\n\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Connection);","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport { t, Translate } from \"../../I18N\";\nimport { Icon } from \"../../UI\";\nimport { Warning } from \"../../Layout\";\nimport { closePanel, deactivateReference } from \"../actions/uiActions\";\nimport Connection from \"./Connection\";\nimport { sortTextSelections } from \"../utils/sortTextSelections\";\n\nimport \"../scss/viewReferencesPanel.scss\";\n\nexport class ConnectionsList extends Component {\n  static blankStateMessage(title, message) {\n    return /*#__PURE__*/(\n      _jsx(\"div\", { className: \"blank-state\" }, void 0, /*#__PURE__*/\n      _jsx(Icon, { icon: \"sitemap\" }), /*#__PURE__*/\n      _jsx(\"h4\", {}, void 0, t('System', title)), /*#__PURE__*/\n      _jsx(\"p\", {}, void 0, t('System', message))));\n\n\n  }\n\n  // TODO: remove this method is it's not used anywhere\n  // eslint-disable-next-line react/no-unused-class-component-methods\n  close() {\n    this.props.closePanel();\n    this.props.deactivateReference();\n  }\n\n  render() {\n    const references = this.props.references.\n    toJS().\n    sort((a, b) => sortTextSelections(a.reference, b.reference));\n\n    if (this.props.loading) {\n      return false;\n    }\n\n    if (!this.props.references.size && this.props.referencesSection === 'references') {\n      return ConnectionsList.blankStateMessage('No References', 'No References description');\n    }\n\n    if (!this.props.references.size) {\n      return ConnectionsList.blankStateMessage('No Connections', 'No Connections description');\n    }\n\n    return /*#__PURE__*/(\n      _jsx(\"div\", { className: \"item-group\" }, void 0,\n      references.length > 299 && /*#__PURE__*/\n      _jsx(Warning, { inline: true }, void 0, /*#__PURE__*/\n      _jsx(Translate, { translationKey: \"Text references limit warning\" }, void 0, \"Text references are temporarily limited to a maximum of 300. We are currently working on a fix for this issue.\")),\n\n\n\n\n\n      (() =>\n      references.map((reference) => /*#__PURE__*/\n      _jsx(Connection, { readOnly: this.props.readOnly, reference: reference }, reference._id)))()));\n\n\n\n  }}\n\n\n\n\n\n\n\n\n\n\n\nfunction mapDispatchToProps(dispatch) {\n  return bindActionCreators({ closePanel, deactivateReference }, dispatch);\n}\n\nexport default connect(null, mapDispatchToProps)(ConnectionsList);","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };} /* eslint-disable react/no-danger */\n/* eslint-disable react/no-array-index-key */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { t, I18NLink } from \"../../I18N\";\nimport SafeHTML from \"../../utils/SafeHTML\";\nimport getFieldLabel from \"../../Templates/utils/getFieldLabel\";\nimport Immutable from 'immutable';\n\nexport const MetadataFieldSnippets = ({ fieldSnippets, documentViewUrl, template, searchTerm }) => /*#__PURE__*/\nReact.createElement(React.Fragment, null, /*#__PURE__*/\n_jsx(\"li\", { className: \"snippet-list-item-header metadata-snippet-header\" }, void 0, /*#__PURE__*/\n_jsx(I18NLink, { to: `${documentViewUrl}?searchTerm=${searchTerm}` }, void 0,\ngetFieldLabel(fieldSnippets.get('field'), template))),\n\n\nfieldSnippets.get('texts').map((snippet, index) => /*#__PURE__*/\n_jsx(\"li\", { className: \"snippet-list-item metadata-snippet\" }, index, /*#__PURE__*/\n_jsx(\"span\", {}, void 0, /*#__PURE__*/\n_jsx(SafeHTML, {}, void 0, snippet)))));\n\n\n\n\n\n\nMetadataFieldSnippets.defaultProps = {\n  searchTerm: '' };\n\n\n\n\n\n\n\n\n\n\n\nMetadataFieldSnippets.defaultProps = {\n  template: undefined };\n\n\nexport const DocumentContentSnippets = ({\n  selectSnippet,\n  documentSnippets,\n  documentViewUrl,\n  searchTerm,\n  selectedSnippet }) => /*#__PURE__*/\n\nReact.createElement(React.Fragment, null, /*#__PURE__*/\n_jsx(\"li\", { className: \"snippet-list-item-header fulltext-snippet-header\" }, void 0,\nt('System', 'Document contents')),\n\ndocumentSnippets.map((snippet, index) => {\n  const selected = snippet.get('text') === selectedSnippet.get('text') ? 'selected' : '';\n  return /*#__PURE__*/(\n    _jsx(\"li\", { className: `snippet-list-item fulltext-snippet ${selected}` }, index, /*#__PURE__*/\n    _jsx(I18NLink, {\n      onClick: () => selectSnippet(snippet.get('page'), snippet),\n      to: `${documentViewUrl}?page=${snippet.get('page')}&searchTerm=${searchTerm || ''}` }, void 0, /*#__PURE__*/\n\n    _jsx(\"span\", { className: \"page-number\" }, void 0, snippet.get('page')), /*#__PURE__*/\n    _jsx(\"span\", { className: \"snippet-text\" }, void 0, /*#__PURE__*/\n    _jsx(SafeHTML, {}, void 0, snippet.get('text'))))));\n\n\n\n\n}));\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nexport const SnippetList = ({\n  snippets,\n  documentViewUrl,\n  searchTerm,\n  selectSnippet,\n  template,\n  selectedSnippet }) => /*#__PURE__*/\n\n_jsx(\"ul\", { className: \"snippet-list\" }, void 0,\nsnippets.get('metadata').map((fieldSnippets) => /*#__PURE__*/\n_jsx(MetadataFieldSnippets, {\n\n  fieldSnippets: fieldSnippets,\n  template: template,\n  documentViewUrl: documentViewUrl,\n  searchTerm: searchTerm }, fieldSnippets.get('field'))),\n\n\nsnippets.get('fullText').size ? /*#__PURE__*/\n_jsx(DocumentContentSnippets, {\n  documentSnippets: snippets.get('fullText'),\n  documentViewUrl: documentViewUrl,\n  selectSnippet: selectSnippet,\n  selectedSnippet: selectedSnippet,\n  searchTerm: searchTerm }) :\n\n\n'');\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nSnippetList.defaultProps = {\n  template: undefined };\n\n\nexport const mapStateToProps = (state, ownProps) => ({\n  template: state.templates.find((tmpl) => tmpl.get('_id') === ownProps.doc.get('template')),\n  selectedSnippet: state.documentViewer.uiState.get('snippet') });\n\n\nexport default connect(mapStateToProps)(SnippetList);","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };} /* eslint-disable no-restricted-globals */\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\nimport Immutable from 'immutable';\n\nimport { Translate, t } from \"../../I18N\";\nimport SnippetList from \"../../Documents/components/SnippetList\";\nimport { selectSnippet } from \"../../Viewer/actions/uiActions\";\nimport { Form } from 'react-redux-form';\nimport { NumericRangeSlide } from \"../../ReactReduxForms\";\nimport { Icon } from \"../../Layout/Icon\";\nimport { TemplateLabel, DocumentLanguage } from \"../../Layout\";\n\nconst findResultsAboveThreshold = (results, threshold) => {\n  const boundingIndex = results.findIndex(({ score }) => score < threshold);\n  return boundingIndex >= 0 ? results.slice(0, boundingIndex) : results;\n};\n\nconst getSnippetsFromResults = (results, template) => {\n  const snippets = results.reduce(\n  (_memo, item) => {\n    const memo = _memo;\n    const text = `${item.text} (${(item.score * 100).toFixed(2)}%)`;\n    memo.count += 1;\n    if (isNaN(Number(item.page))) {\n      const field = template.\n      get('properties').\n      find((p) => p.get('name') === item.page).\n      get('label');\n      memo.metadata[field] = (memo.metadata[field] || []).concat([text]);\n      return memo;\n    }\n    memo.fullText.push({\n      page: Number(item.page),\n      text });\n\n    return memo;\n  },\n  { count: 0, metadata: {}, fullText: [] });\n\n\n  snippets.metadata = Object.keys(snippets.metadata).map((field) => ({\n    field,\n    texts: snippets.metadata[field] }));\n\n  return snippets;\n};\n\nexport class DocumentResults extends Component {\n  renderSnippetsList(doc, snippets, documentViewUrl) {\n    return /*#__PURE__*/(\n      _jsx(SnippetList, {\n        doc: Immutable.fromJS(doc),\n        documentViewUrl: documentViewUrl,\n        snippets: snippets,\n        searchTerm: \"\",\n        selectSnippet: (...args) => {\n          this.props.selectSnippet(...args);\n        } }));\n\n\n  }\n\n  renderFilter() {\n    const { threshold } = this.props;\n    return /*#__PURE__*/(\n      _jsx(\"dl\", { className: \"metadata-type-text\" }, void 0, /*#__PURE__*/\n      _jsx(\"dt\", { className: \"item-header\" }, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Threshold\"), \" \", (threshold * 100).toFixed(2), \" %\"), /*#__PURE__*/\n\n      _jsx(\"dd\", {}, void 0, /*#__PURE__*/\n      _jsx(Form, { model: \"semanticSearch.resultsFilters\" }, void 0, /*#__PURE__*/\n      _jsx(NumericRangeSlide, {\n        model: \".threshold\",\n        min: 0.3,\n        max: 1,\n        step: 0.01,\n        delay: 200,\n        minLabel: t('System', 'Exploration'),\n        maxLabel: t('System', 'Precision') })))));\n\n\n\n\n\n  }\n\n  render() {\n    const { doc, threshold, template } = this.props;\n\n    if (!doc.semanticSearch) {\n      return false;\n    }\n    const filteredResults = findResultsAboveThreshold(doc.semanticSearch.results, threshold);\n    const snippets = Immutable.fromJS(getSnippetsFromResults(filteredResults, template));\n    const documentViewUrl = doc.file ? `/document/${doc.sharedId}` : `/entity/${doc.sharedId}`;\n\n    return /*#__PURE__*/(\n      React.createElement(React.Fragment, null, /*#__PURE__*/\n      _jsx(\"div\", { className: \"view\" }, void 0, /*#__PURE__*/\n      _jsx(\"div\", { className: \"item-info\" }, void 0, /*#__PURE__*/\n      _jsx(\"div\", {}, void 0, /*#__PURE__*/\n      _jsx(Icon, { className: \"item-icon item-icon-center\", data: doc.icon }), /*#__PURE__*/\n      _jsx(\"h1\", { className: \"item-name\" }, void 0,\n      doc.title, /*#__PURE__*/\n      _jsx(DocumentLanguage, { doc: Immutable.fromJS(doc) }))), /*#__PURE__*/\n\n\n      _jsx(TemplateLabel, { template: doc.template })),\n\n      this.renderFilter(), /*#__PURE__*/\n      _jsx(\"dl\", { className: \"metadata-type-numeric\" }, void 0, /*#__PURE__*/\n      _jsx(\"dt\", {}, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Number of sentences above threshold\")), /*#__PURE__*/\n\n      _jsx(\"dd\", {}, void 0, filteredResults.length)), /*#__PURE__*/\n\n      _jsx(\"dl\", { className: \"metadata-type-numeric\" }, void 0, /*#__PURE__*/\n      _jsx(\"dt\", {}, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"% of sentences above threshold\")), /*#__PURE__*/\n\n      _jsx(\"dd\", {}, void 0,\n      (filteredResults.length / doc.semanticSearch.totalResults * 100).toFixed(2), \"%\"))),\n\n\n\n      this.renderSnippetsList(doc, snippets, documentViewUrl)));\n\n\n  }}\n\n\nDocumentResults.defaultProps = {\n  template: undefined };\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst mapStateToProps = ({ semanticSearch, templates }) => ({\n  threshold: semanticSearch.resultsFilters.threshold,\n  template: templates.find(\n  (tpl) => tpl.get('_id') === semanticSearch.selectedDocument.get('template')) });\n\n\n\nfunction mapDispatchToProps(dispatch) {\n  return bindActionCreators({ selectSnippet }, dispatch);\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(DocumentResults);","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport { t } from \"../../I18N\";\nimport { actions as formActions, Field, LocalForm } from 'react-redux-form';\nimport { searchSnippets } from \"../../Library/actions/libraryActions\";\nimport { selectSnippet } from \"../../Viewer/actions/uiActions\";\nimport { browserHistory } from 'react-router';\nimport { Icon } from \"../../UI\";\nimport ModalTips from \"../../App/ModalTips\";\nimport { toUrlParams } from \"../../../shared/JSONRequest\";\nimport { SearchTipsContent } from \"../../App/SearchTipsContent\";\nimport SnippetList from \"./SnippetList\";\n\nexport class SearchText extends Component {\n  constructor(props) {\n    super(props);\n    this.submit = this.submit.bind(this);\n    this.resetSearch = this.resetSearch.bind(this);\n  }\n\n  componentDidMount() {\n    if (this.props.storeKey === 'documentViewer') {\n      this.searchSnippets(this.props.searchTerm, this.props.doc.get('sharedId'));\n    }\n  }\n\n  componentDidUpdate(prevProps) {\n    if (\n    prevProps.searchTerm !== this.props.searchTerm ||\n    prevProps.doc.get('sharedId') !== this.props.doc.get('sharedId'))\n    {\n      this.searchSnippets(this.props.searchTerm, this.props.doc.get('sharedId'));\n    }\n  }\n\n  attachDispatch(dispatch) {\n    this.formDispatch = dispatch;\n  }\n\n  resetSearch() {}\n\n  searchSnippets(searchTerm, sharedId) {\n    if (sharedId) {\n      this.props.searchSnippets(searchTerm, sharedId, this.props.storeKey);\n      if (this.formDispatch) {\n        this.formDispatch(formActions.change('searchText.searchTerm', searchTerm));\n      }\n    }\n  }\n\n  submit(value) {\n    const path = browserHistory.getCurrentLocation().pathname;\n    const { query } = browserHistory.getCurrentLocation();\n    query.searchTerm = value.searchTerm;\n\n    browserHistory.push(path + toUrlParams(query));\n\n    return this.props.searchSnippets(\n    value.searchTerm,\n    this.props.doc.get('sharedId'),\n    this.props.storeKey);\n\n  }\n\n  render() {\n    const { doc, snippets } = this.props;\n    const documentViewUrl = doc.get('file') ?\n    `/document/${doc.get('sharedId')}` :\n    `/entity/${doc.get('sharedId')}`;\n    return /*#__PURE__*/(\n      _jsx(\"div\", {}, void 0, /*#__PURE__*/\n      _jsx(LocalForm, {\n        model: \"searchText\",\n        onSubmit: this.submit,\n        getDispatch: (dispatch) => this.attachDispatch(dispatch),\n        autoComplete: \"off\" }, void 0,\n\n      this.props.storeKey === 'documentViewer' && /*#__PURE__*/\n      _jsx(\"div\", { className: \"search-box\" }, void 0, /*#__PURE__*/\n      _jsx(\"div\", { className: \"input-group\" }, void 0, /*#__PURE__*/\n      _jsx(Field, { model: \".searchTerm\" }, void 0, /*#__PURE__*/\n      _jsx(Icon, { icon: \"search\" }), /*#__PURE__*/\n      _jsx(\"input\", {\n        type: \"text\",\n        placeholder: t('System', 'Search related entities or documents', null, false),\n        className: \"form-control\",\n        autoComplete: \"off\",\n        \"aria-label\": t('System', 'Search text description', null, false) }), /*#__PURE__*/\n\n      _jsx(Icon, { icon: \"times\", onClick: this.resetSearch }))), /*#__PURE__*/\n\n\n      _jsx(ModalTips, {\n        label: t('System', 'Search Tips', null, false),\n        title: t('System', 'Narrow down your searches', null, false) }, void 0, /*#__PURE__*/\n\n      _jsx(SearchTipsContent, {})))),\n\n\n\n\n\n      !snippets.get('count') && /*#__PURE__*/\n      _jsx(\"div\", { className: \"blank-state\" }, void 0, /*#__PURE__*/\n      _jsx(Icon, { icon: \"search\" }), /*#__PURE__*/\n      _jsx(\"h4\", {}, void 0, t('System', !this.props.searchTerm ? 'Search text' : 'No text match')), /*#__PURE__*/\n      _jsx(\"p\", {}, void 0,\n      t(\n      'System',\n      !this.props.searchTerm ? 'Search text description' : 'No text match description'))),\n\n\n\n\n      doc.size ? /*#__PURE__*/\n      _jsx(SnippetList, {\n        doc: this.props.doc,\n        snippets: snippets,\n        selectSnippet: this.props.selectSnippet,\n        searchTerm: this.props.searchTerm,\n        documentViewUrl: documentViewUrl }) :\n\n\n      ''));\n\n\n\n  }}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nSearchText.defaultProps = {\n  searchTerm: '',\n  snippets: {\n    count: 0,\n    metadata: [],\n    fullText: [] } };\n\n\n\nfunction mapStateToProps(state, props) {\n  return {\n    snippets: state[props.storeKey].sidepanel.snippets };\n\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return bindActionCreators({ searchSnippets, selectSnippet }, dispatch);\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SearchText);","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import PropTypes from 'prop-types';\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { t } from \"../../I18N\";\nimport { Icon } from \"../../UI\";\n\nconst SnippetsTab = ({ snippets }) => /*#__PURE__*/\n_jsx(\"div\", {}, void 0, /*#__PURE__*/\n_jsx(Icon, { icon: \"search\" }), /*#__PURE__*/\n_jsx(\"span\", { className: \"connectionsNumber\" }, void 0, snippets.get('count') ? snippets.get('count') : ''), /*#__PURE__*/\n_jsx(\"span\", { className: \"tab-link-tooltip\" }, void 0, t('System', 'Search text')));\n\n\n\n\n\n\n\nfunction mapStateToProps(state, props) {\n  return {\n    snippets: state[props.storeKey].sidepanel.snippets };\n\n}\n\nexport default connect(mapStateToProps)(SnippetsTab);","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}function ownKeys(object, enumerableOnly) {var keys = Object.keys(object);if (Object.getOwnPropertySymbols) {var symbols = Object.getOwnPropertySymbols(object);enumerableOnly && (symbols = symbols.filter(function (sym) {return Object.getOwnPropertyDescriptor(object, sym).enumerable;})), keys.push.apply(keys, symbols);}return keys;}function _objectSpread(target) {for (var i = 1; i < arguments.length; i++) {var source = null != arguments[i] ? arguments[i] : {};i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {_defineProperty(target, key, source[key]);}) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));});}return target;}function _defineProperty(obj, key, value) {if (key in obj) {Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });} else {obj[key] = value;}return obj;} /* eslint-disable max-lines */\nimport { Tabs, TabLink, TabContent } from 'react-tabs-redux';\nimport { browserHistory } from 'react-router';\nimport { connect } from 'react-redux';\nimport Immutable from 'immutable';\nimport PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport \"./scss/toc.scss\";\n\nimport { MetadataFormButtons, ShowMetadata } from \"../../Metadata\";\nimport { NeedAuthorization } from \"../../Auth\";\nimport { t, Translate } from \"../../I18N\";\nimport { AttachmentsList } from \"../../Attachments\";\nimport { FileList } from \"../../Attachments/components/FileList\";\nimport Connections from \"../../Viewer/components/ConnectionsList\";\nimport { ConnectionsGroups } from \"../../ConnectionsList\";\nimport ShowIf from \"../../App/ShowIf\";\nimport SidePanel from \"../../Layout/SidePanel\";\nimport DocumentSemanticSearchResults from \"../../SemanticSearch/components/DocumentResults\";\nimport { CopyFromEntity } from \"../../Metadata/components/CopyFromEntity\";\nimport { TocGeneratedLabel, ReviewTocButton } from \"../../ToggledFeatures/tocGeneration\";\nimport { Icon } from \"../../UI\";\n\nimport * as viewerModule from \"../../Viewer\";\nimport { entityDefaultDocument } from \"../../../shared/entityDefaultDocument\";\nimport SearchText from \"./SearchText\";\nimport ShowToc from \"./ShowToc\";\nimport SnippetsTab from \"./SnippetsTab\";\nimport helpers from \"../helpers\";\n\nclass DocumentSidePanel extends Component {\n  constructor(props) {\n    super(props);\n    this.selectTab = this.selectTab.bind(this);\n    this.state = { copyFrom: false, copyFromProps: [] };\n    this.toggleCopyFrom = this.toggleCopyFrom.bind(this);\n    this.onCopyFromSelect = this.onCopyFromSelect.bind(this);\n    this.deleteDocument = this.deleteDocument.bind(this);\n    this.toggleSharing = this.toggleSharing.bind(this);\n  }\n\n  componentDidUpdate(prevProps) {\n    if (\n    this.props.doc.get('_id') &&\n    prevProps.doc.get('_id') !== this.props.doc.get('_id') &&\n    this.props.getDocumentReferences)\n    {\n      this.props.getDocumentReferences(\n      this.props.doc.get('sharedId'),\n      this.props.file._id,\n      this.props.storeKey);\n\n    }\n  }\n\n  onCopyFromSelect(copyFromProps) {\n    this.setState({ copyFromProps });\n  }\n\n  getDefaultDocumentToC(isEntity, documents, language, defaultLanguage) {\n    let defaultDocumentToC = this.props.file.toc;\n\n    if (!isEntity) {\n      const defaultDocument = _objectSpread({},\n      entityDefaultDocument(documents, language, defaultLanguage));\n\n      if (defaultDocument) {\n        defaultDocumentToC = defaultDocument.toc;\n      }\n    }\n    return defaultDocumentToC;\n  }\n\n  deleteDocument() {\n    this.context.confirm({\n      accept: () => {\n        this.props.deleteDocument(this.props.doc.toJS()).then(() => {\n          const currentPath = browserHistory.getCurrentLocation().pathname;\n          const isLibraryorUploads = /library|uploads|^\\/$|^\\/..\\/$/;\n          if (!currentPath.match(isLibraryorUploads)) {\n            browserHistory.goBack();\n          }\n        });\n      },\n      title: 'Confirm',\n      message: 'Are you sure you want to delete this item?' });\n\n  }\n\n  selectTab(tabSelected) {\n    this.props.showTab(tabSelected);\n  }\n\n  _close() {\n    this.props.resetForm(this.props.formPath);\n    this.props.closePanel();\n    this.setState({ copyFrom: false });\n  }\n\n  close() {\n    if (this.props.formDirty) {\n      this.context.confirm({\n        accept: () => {\n          this._close();\n        },\n        title: 'Confirm',\n        message: 'All changes will be lost, are you sure you want to proceed?' });\n\n      return;\n    }\n    this._close();\n  }\n\n  toggleCopyFrom() {\n    this.setState((currentState) => ({\n      copyFrom: !currentState.copyFrom }));\n\n  }\n\n  toggleSharing() {\n    this.setState((currentState) => ({\n      sharing: !currentState.sharing }));\n\n  }\n\n  renderHeader(tab, doc, isEntity) {\n    if (this.state.copyFrom) {\n      return /*#__PURE__*/(\n        _jsx(\"div\", { className: \"sidepanel-header\" }, void 0, /*#__PURE__*/\n        _jsx(Translate, {}, void 0, \"Copy properties to this entity from\"), \":\"));\n\n\n    }\n\n    const { excludeConnectionsTab, connectionsGroups, isTargetDoc, references } = this.props;\n\n    const summary = connectionsGroups.reduce(\n    (summaryData, g) => {\n      g.get('templates').forEach((template) => {\n        summaryData.totalConnections += template.get('count');\n      });\n      return summaryData;\n    },\n    { totalConnections: 0 });\n\n    return /*#__PURE__*/(\n      _jsx(\"div\", { className: \"sidepanel-header\" }, void 0, /*#__PURE__*/\n      _jsx(\"button\", {\n        type: \"button\",\n        className: \"closeSidepanel close-modal\",\n        onClick: this.close.bind(this),\n        \"aria-label\": \"Close side panel\" }, void 0, /*#__PURE__*/\n\n      _jsx(Icon, { icon: \"times\" })), /*#__PURE__*/\n\n      _jsx(Tabs, { selectedTab: tab, renderActiveTabContentOnly: true, handleSelect: this.selectTab }, void 0, /*#__PURE__*/\n      _jsx(\"ul\", { className: \"nav nav-tabs\" }, void 0,\n      (() => {\n        if (!this.props.raw && doc.get('semanticSearch')) {\n          return /*#__PURE__*/(\n            _jsx(\"li\", {}, void 0, /*#__PURE__*/\n            _jsx(TabLink, {\n              to: \"semantic-search-results\",\n              role: \"button\",\n              tabIndex: \"0\",\n              \"aria-label\": t('System', 'Semantic search results', null, false),\n              component: \"div\" }, void 0, /*#__PURE__*/\n\n            _jsx(Icon, { icon: \"flask\" }), /*#__PURE__*/\n            _jsx(\"span\", { className: \"tab-link-tooltip\" }, void 0, /*#__PURE__*/\n            _jsx(Translate, {}, void 0, \"Semantic search results\")))));\n\n\n\n\n        }\n      })(),\n      (() => {\n        if (!this.props.raw) {\n          return /*#__PURE__*/(\n            _jsx(\"li\", {}, void 0, /*#__PURE__*/\n            _jsx(TabLink, {\n              to: \"text-search\",\n              role: \"button\",\n              tabIndex: \"0\",\n              \"aria-label\": t('System', 'Search text', null, false),\n              component: \"div\" }, void 0, /*#__PURE__*/\n\n            _jsx(SnippetsTab, { storeKey: this.props.storeKey }))));\n\n\n\n        }\n      })(),\n      (() => {\n        if (!isEntity && !this.props.raw) {\n          return /*#__PURE__*/(\n            _jsx(\"li\", {}, void 0, /*#__PURE__*/\n            _jsx(TabLink, {\n              to: \"toc\",\n              role: \"button\",\n              tabIndex: \"0\",\n              \"aria-label\": t('System', 'Table of Contents', null, false),\n              component: \"div\" }, void 0, /*#__PURE__*/\n\n            _jsx(Icon, { icon: \"font\" }), /*#__PURE__*/\n            _jsx(\"span\", { className: \"tab-link-tooltip\" }, void 0, t('System', 'Table of Contents')))));\n\n\n\n        }\n        return /*#__PURE__*/_jsx(\"span\", {});\n      })(),\n      (() => {\n        if (!isEntity && !this.props.raw) {\n          return /*#__PURE__*/(\n            _jsx(\"li\", {}, void 0, /*#__PURE__*/\n            _jsx(TabLink, {\n              to: \"references\",\n              role: \"button\",\n              tabIndex: \"0\",\n              \"aria-label\": t('System', 'References', null, false),\n              component: \"div\" }, void 0, /*#__PURE__*/\n\n            _jsx(Icon, { icon: \"sitemap\" }), /*#__PURE__*/\n            _jsx(\"span\", { className: \"connectionsNumber\" }, void 0, references.size), /*#__PURE__*/\n            _jsx(\"span\", { className: \"tab-link-tooltip\" }, void 0, t('System', 'References')))));\n\n\n\n        }\n        return /*#__PURE__*/_jsx(\"span\", {});\n      })(),\n      (() => {\n        if (!this.props.raw) {\n          return /*#__PURE__*/_jsx(\"li\", { className: \"tab-separator\" });\n        }\n        return /*#__PURE__*/_jsx(\"span\", {});\n      })(), /*#__PURE__*/\n      _jsx(\"li\", {}, void 0, /*#__PURE__*/\n      _jsx(TabLink, {\n        to: \"metadata\",\n        default: true,\n        role: \"button\",\n        tabIndex: \"0\",\n        \"aria-label\": t('System', 'Info', null, false),\n        component: \"div\" }, void 0, /*#__PURE__*/\n\n      _jsx(Icon, { icon: \"info-circle\" }), /*#__PURE__*/\n      _jsx(\"span\", { className: \"tab-link-tooltip\" }, void 0, t('System', 'Info')))),\n\n\n      (() => {\n        if (!isTargetDoc && !excludeConnectionsTab) {\n          return /*#__PURE__*/(\n            _jsx(\"li\", {}, void 0, /*#__PURE__*/\n            _jsx(TabLink, {\n              to: \"connections\",\n              role: \"button\",\n              tabIndex: \"0\",\n              \"aria-label\": t('System', 'Connections', null, false),\n              component: \"div\" }, void 0, /*#__PURE__*/\n\n            _jsx(Icon, { icon: \"exchange-alt\" }), /*#__PURE__*/\n            _jsx(\"span\", { className: \"connectionsNumber\" }, void 0, summary.totalConnections), /*#__PURE__*/\n            _jsx(\"span\", { className: \"tab-link-tooltip\" }, void 0, t('System', 'Connections')))));\n\n\n\n        }\n      })()))));\n\n\n\n\n  }\n\n  render() {\n    const {\n      doc,\n      docBeingEdited,\n      readOnly,\n      references,\n      EntityForm,\n      isTargetDoc,\n      relationships,\n      defaultLanguage } =\n    this.props;\n\n    const TocForm = this.props.tocFormComponent;\n\n    const jsDoc = helpers.performantDocToJSWithoutRelations(doc);\n    const { attachments, documents, language, defaultDoc } = jsDoc;\n\n    const isEntity = !documents || !documents.length;\n    const defaultDocumentToC =\n    isEntity || !defaultDoc ?\n    this.getDefaultDocumentToC(isEntity, documents, language, defaultLanguage) :\n    defaultDoc.toc;\n\n    this.initialTemplateId = doc.get('template');\n    const tab =\n    isEntity && (this.props.tab === 'references' || this.props.tab === 'toc') || !this.props.tab ?\n    'metadata' :\n    this.props.tab;\n\n    const className =\n    this.state.copyFrom && docBeingEdited && tab === 'metadata' ?\n    'metadata-sidepanel two-columns' :\n    'metadata-sidepanel';\n\n    return /*#__PURE__*/(\n      _jsx(SidePanel, { open: this.props.open, className: className }, void 0,\n      this.renderHeader(tab, doc, isEntity), /*#__PURE__*/\n      _jsx(ShowIf, { if: (this.props.tab === 'metadata' || !this.props.tab) && !this.state.copyFrom }, void 0, /*#__PURE__*/\n      _jsx(\"div\", { className: \"sidepanel-footer\" }, void 0, /*#__PURE__*/\n      _jsx(MetadataFormButtons, {\n        delete: this.deleteDocument,\n        data: this.props.doc,\n        formStatePath: this.props.formPath,\n        entityBeingEdited: docBeingEdited,\n        includeViewButton: !docBeingEdited && readOnly,\n        storeKey: this.props.storeKey,\n        copyFrom: this.toggleCopyFrom }))), /*#__PURE__*/\n\n\n\n      _jsx(NeedAuthorization, { roles: ['admin', 'editor'], orWriteAccessTo: [jsDoc] }, void 0,\n      this.props.tab === 'toc' && this.props.tocBeingEdited && /*#__PURE__*/\n      _jsx(\"div\", { className: \"sidepanel-footer\" }, void 0, /*#__PURE__*/\n      _jsx(\"div\", { className: \"btn-cluster content-right\" }, void 0, /*#__PURE__*/\n      _jsx(\"button\", {\n        type: \"button\",\n        className: \"edit-toc btn btn-default\",\n        onClick: this.props.leaveEditMode }, void 0, /*#__PURE__*/\n\n      _jsx(\"span\", { className: \"btn-label\" }, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Cancel\"))), /*#__PURE__*/\n\n\n      _jsx(\"button\", { type: \"submit\", form: \"tocForm\", className: \"edit-toc btn btn-success\" }, void 0, /*#__PURE__*/\n      _jsx(\"span\", { className: \"btn-label\" }, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Save\")))))), /*#__PURE__*/\n\n\n\n\n\n\n      _jsx(NeedAuthorization, { roles: ['admin', 'editor'], orWriteAccessTo: [jsDoc] }, void 0,\n      this.props.tab === 'toc' && !this.props.tocBeingEdited && !readOnly && /*#__PURE__*/\n      _jsx(\"div\", { className: \"sidepanel-footer\" }, void 0, /*#__PURE__*/\n      _jsx(\"div\", { className: \"btn-cluster\" }, void 0, /*#__PURE__*/\n      _jsx(\"button\", {\n        type: \"button\",\n        onClick: () => this.props.editToc(this.props.file.toc || []),\n        className: \"edit-toc btn btn-default\" }, void 0, /*#__PURE__*/\n\n      _jsx(Icon, { icon: \"pencil-alt\" }), /*#__PURE__*/\n      _jsx(\"span\", { className: \"btn-label\" }, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Edit\"))), /*#__PURE__*/\n\n\n      _jsx(ReviewTocButton, { file: this.props.file }, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Mark as Reviewed\"))))), /*#__PURE__*/\n\n\n\n\n\n      _jsx(\"div\", { className: \"sidepanel-body\" }, void 0, /*#__PURE__*/\n      _jsx(Tabs, { selectedTab: this.props.tab || 'metadata' }, void 0, /*#__PURE__*/\n      _jsx(TabContent, { for: \"text-search\", className: \"text-search\" }, void 0, /*#__PURE__*/\n      _jsx(SearchText, {\n        doc: doc,\n        storeKey: this.props.storeKey,\n        searchTerm: this.props.searchTerm })), /*#__PURE__*/\n\n\n      _jsx(TabContent, { for: \"toc\", className: \"toc\" }, void 0, /*#__PURE__*/\n      _jsx(\"div\", { className: \"tocHeader\" }, void 0, /*#__PURE__*/\n      _jsx(\"h1\", {}, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Table of contents\")), \"\\xA0\", /*#__PURE__*/\n\n\n      _jsx(TocGeneratedLabel, { file: this.props.file }, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"auto-created\"), \" \\u24D8\")), /*#__PURE__*/\n\n\n      _jsx(ShowIf, { if: !this.props.tocBeingEdited }, void 0, /*#__PURE__*/\n      _jsx(ShowToc, { toc: defaultDocumentToC, readOnly: readOnly })), /*#__PURE__*/\n\n      _jsx(ShowIf, { if: this.props.tocBeingEdited }, void 0, /*#__PURE__*/\n      _jsx(TocForm, {\n        removeEntry: this.props.removeFromToc,\n        indent: this.props.indentTocElement,\n        onSubmit: this.props.saveToc,\n        model: \"documentViewer.tocForm\",\n        state: this.props.tocFormState,\n        toc: this.props.tocForm,\n        file: this.props.file }))), /*#__PURE__*/\n\n\n\n      _jsx(TabContent, { for: \"metadata\", className: \"metadata\" }, void 0,\n      (() => {\n        if (docBeingEdited && this.state.copyFrom) {\n          return /*#__PURE__*/(\n            _jsx(\"div\", { className: \"side-panel-container\" }, void 0, /*#__PURE__*/\n            _jsx(EntityForm, {\n              storeKey: this.props.storeKey,\n              initialTemplateId: this.initialTemplateId,\n              highlightedProps: this.state.copyFromProps }), /*#__PURE__*/\n\n            _jsx(CopyFromEntity, {\n              originalEntity: this.props.formData,\n              templates: this.props.templates,\n              onSelect: this.onCopyFromSelect,\n              formModel: this.props.formPath,\n              onCancel: this.toggleCopyFrom })));\n\n\n\n        }\n        if (docBeingEdited) {\n          return /*#__PURE__*/(\n            _jsx(EntityForm, {\n              storeKey: this.props.storeKey,\n              initialTemplateId: this.initialTemplateId }));\n\n\n        }\n        return /*#__PURE__*/(\n          _jsx(\"div\", {}, void 0, /*#__PURE__*/\n          _jsx(ShowMetadata, {\n            relationships: relationships,\n            entity: jsDoc,\n            showTitle: true,\n            showType: true,\n            groupGeolocations: true }), /*#__PURE__*/\n\n          _jsx(FileList, { files: documents, storeKey: this.props.storeKey, entity: jsDoc }), /*#__PURE__*/\n          _jsx(AttachmentsList, {\n            attachments: attachments,\n            isTargetDoc: isTargetDoc,\n            isDocumentAttachments: Boolean(doc.get('file')),\n            parentId: doc.get('_id'),\n            parentSharedId: doc.get('sharedId'),\n            storeKey: this.props.storeKey,\n            entity: jsDoc })));\n\n\n\n      })()), /*#__PURE__*/\n\n      _jsx(TabContent, { for: \"references\", className: \"references\" }, void 0, /*#__PURE__*/\n      _jsx(Connections, {\n        referencesSection: \"references\",\n        references: references,\n        readOnly: readOnly })), /*#__PURE__*/\n\n\n      _jsx(TabContent, { for: \"connections\", className: \"connections\" }, void 0, /*#__PURE__*/\n      _jsx(ConnectionsGroups, {})), /*#__PURE__*/\n\n      _jsx(TabContent, { for: \"semantic-search-results\" }, void 0, /*#__PURE__*/\n      _jsx(DocumentSemanticSearchResults, { doc: jsDoc }))))));\n\n\n\n\n\n  }}\n\n\nDocumentSidePanel.defaultProps = {\n  tab: 'metadata',\n  open: false,\n  tocBeingEdited: false,\n  docBeingEdited: false,\n  searchTerm: '',\n  references: Immutable.fromJS([]),\n  relationships: Immutable.fromJS([]),\n  tocFormState: {},\n  formDirty: false,\n  isTargetDoc: false,\n  readOnly: false,\n  getDocumentReferences: undefined,\n  tocFormComponent: () => false,\n  EntityForm: () => false,\n  raw: false,\n  file: {},\n  leaveEditMode: () => {} };\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nDocumentSidePanel.contextTypes = {\n  confirm: PropTypes.func };\n\n\nconst mapStateToProps = (state, ownProps) => {\n  const isTargetDoc = state.documentViewer.targetDoc.get('_id');\n  const relevantReferences = isTargetDoc ?\n  viewerModule.selectors.selectTargetReferences(state) :\n  viewerModule.selectors.selectReferences(state);\n  const references = ownProps.references ?\n  viewerModule.selectors.parseReferences(ownProps.doc, ownProps.references) :\n  relevantReferences;\n  const defaultLanguage = state.settings.collection.\n  get('languages').\n  find((l) => l.get('default')).\n  get('key');\n\n  return {\n    references,\n    excludeConnectionsTab: Boolean(ownProps.references),\n    connectionsGroups: state.relationships.list.connectionsGroups,\n    relationships: ownProps.references,\n    defaultLanguage,\n    templates: state.templates,\n    formData: state[ownProps.storeKey].sidepanel.metadata };\n\n};\n\nexport { DocumentSidePanel, mapStateToProps };\n\nexport default connect(mapStateToProps)(DocumentSidePanel);","import api from \"../utils/api\";\nimport { RequestParams } from \"../utils/RequestParams\";\n\nexport default {\n  coerceValue(requestParams) {\n    const url = 'entities/coerce_value';\n    return api.post(url, requestParams).then((response) => response.json);\n  },\n\n  get(requestParams = new RequestParams(), language = '') {\n    const params = requestParams.add({\n      include:\n      requestParams.data && requestParams.data.include ?\n      requestParams.data.include.concat(['permissions']) :\n      ['permissions'] });\n\n    if (language) api.locale(language);\n    return api.get('entities', params).then((response) => response.json.rows);\n  },\n\n  countByTemplate(requestParams) {\n    const url = 'entities/count_by_template';\n    return api.get(url, requestParams).then((response) => response.json);\n  },\n\n  async getRawPage(requestParams) {\n    const response = await api.get(\n    'documents/page',\n    requestParams.add({ page: requestParams.data.page || 1 }));\n\n    return response.json.data;\n  },\n\n  uploads() {\n    const url = 'entities/uploads';\n    return api.get(url).then((response) => response.json.rows);\n  },\n\n  search(requestParams) {\n    const url = 'entities/search';\n    return api.get(url, requestParams).then((response) => response.json);\n  },\n\n  save(requestParams) {\n    return api.post('entities', requestParams).then((response) => response.json);\n  },\n\n  denormalize(requestParams) {\n    return api.post('entity_denormalize', requestParams).then((response) => response.json);\n  },\n\n  multipleUpdate(requestParams) {\n    return api.post('entities/multipleupdate', requestParams).then((response) => response.json);\n  },\n\n  delete(requestParams) {\n    return api.delete('entities', requestParams).then((response) => response.json);\n  },\n\n  deleteMultiple(requestParams) {\n    return api.post('entities/bulkdelete', requestParams).then((response) => response.json);\n  } };","//UI\nexport const SHOW_TAB = 'SHOW_TAB';\nexport const RESET_USER_SELECTED_TAB = 'RESET_USER_SELECTED_TAB';\nexport const SHOW_FILTERS = 'SHOW_FILTERS';\nexport const HIDE_FILTERS = 'HIDE_FILTERS';","import { actions } from \"../../BasicReducer\";\nimport api from \"../EntitiesAPI\";\nimport {\nremoveDocument,\nremoveDocuments,\nunselectAllDocuments,\nunselectDocument } from \"../../Library/actions/libraryActions\";\n\nimport { saveEntityWithFiles } from \"../../Library/actions/saveEntityWithFiles\";\nimport { notificationActions } from \"../../Notifications\";\nimport { actions as relationshipActions } from \"../../Relationships\";\nimport { RequestParams } from \"../../utils/RequestParams\";\nimport { actions as formActions } from 'react-redux-form';\n\nexport function saveEntity(entity) {\n  return async (dispatch) => {\n    const { entity: updatedDoc, errors } = await saveEntityWithFiles(entity, dispatch);\n    if (!errors.length) {\n      dispatch(notificationActions.notify('Entity saved', 'success'));\n    } else {\n      dispatch(\n      notificationActions.notify(\n      `Entity saved with the following errors: ${JSON.stringify(errors, null, 2)}`,\n      'warning'));\n\n\n    }\n    dispatch(formActions.reset('entityView.entityForm'));\n    dispatch(actions.set('entityView/entity', updatedDoc));\n    dispatch(relationshipActions.reloadRelationships(updatedDoc.sharedId));\n  };\n}\n\nexport function resetForm() {\n  return (dispatch) => dispatch(formActions.reset('entityView.entityForm'));\n}\n\nexport function deleteEntity(entity) {\n  return async (dispatch) => {\n    await api.delete(new RequestParams({ sharedId: entity.sharedId }));\n    dispatch(notificationActions.notify('Entity deleted', 'success'));\n    dispatch(removeDocument(entity));\n    await dispatch(unselectDocument(entity._id));\n  };\n}\n\nexport function deleteEntities(entities) {\n  return async (dispatch) => {\n    await api.deleteMultiple(new RequestParams({ sharedIds: entities.map((e) => e.sharedId) }));\n    dispatch(notificationActions.notify('Deletion success', 'success'));\n    await dispatch(unselectAllDocuments());\n    dispatch(removeDocuments(entities));\n  };\n}","import * as types from \"./actionTypes\";\n\nexport function showTab(tab) {\n  return {\n    type: types.SHOW_TAB,\n    tab };\n\n}\n\nexport function resetUserSelectedTab() {\n  return { type: types.RESET_USER_SELECTED_TAB };\n}\n\nexport function hideFilters() {\n  return { type: types.HIDE_FILTERS };\n}\n\nexport function showFilters() {\n  return { type: types.SHOW_FILTERS };\n}","export default {\n  filterBaseProperties: (data) => {\n    const properties = [\n    '_id',\n    'language',\n    'metadata',\n    'suggestedMetadata',\n    'sharedId',\n    'template',\n    'title',\n    'icon',\n    'type',\n    'attachments',\n    'documents'];\n\n    return Object.assign({}, ...properties.map((p) => ({ [p]: data[p] })));\n  } };","import WidgetsDropdownList from 'react-widgets/lib/DropdownList';\n\nexport default class DropdownList extends WidgetsDropdownList {\n  shouldComponentUpdate(nextProps) {\n    return this.props.value !== nextProps.value;\n  }}","import { remove as removeAccents } from 'diacritics';\n\nfunction matchesFilter(subject, filter) {\n  return removeAccents(subject.toLowerCase()).includes(removeAccents(filter.toLowerCase()));\n}\n\nexport function filterOptions(filter, options, optionsLabel = 'label') {\n  return options.filter(\n  (opt) =>\n  matchesFilter(opt[optionsLabel], filter) ||\n  opt.options && opt.options.some((childOpt) => matchesFilter(childOpt[optionsLabel], filter)));\n\n}\n\nexport default {\n  filterOptions };","function ownKeys(object, enumerableOnly) {var keys = Object.keys(object);if (Object.getOwnPropertySymbols) {var symbols = Object.getOwnPropertySymbols(object);enumerableOnly && (symbols = symbols.filter(function (sym) {return Object.getOwnPropertyDescriptor(object, sym).enumerable;})), keys.push.apply(keys, symbols);}return keys;}function _objectSpread(target) {for (var i = 1; i < arguments.length; i++) {var source = null != arguments[i] ? arguments[i] : {};i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {_defineProperty(target, key, source[key]);}) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));});}return target;}var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}function _defineProperty(obj, key, value) {if (key in obj) {Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });} else {obj[key] = value;}return obj;} /* eslint-disable class-methods-use-this,max-lines */\n\nimport ShowIf from \"../../App/ShowIf\";\nimport { filterOptions } from \"../../../shared/optionsUtils\";\nimport { t, Translate } from \"../../I18N\";\n\nimport { Icon as CustomIcon } from \"../../Layout/Icon\";\nimport React, { Component, createRef } from 'react';\nimport { Icon } from \"../../UI\";var\n\n\n\nSelectStates;(function (SelectStates) {SelectStates[SelectStates[\"OFF\"] = 0] = \"OFF\";SelectStates[SelectStates[\"PARTIAL\"] = 1] = \"PARTIAL\";SelectStates[SelectStates[\"ON\"] = 2] = \"ON\";SelectStates[SelectStates[\"GROUP\"] = 3] = \"GROUP\";})(SelectStates || (SelectStates = {}));\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst defaultProps = {\n  optionsLabel: 'label',\n  optionsValue: 'value',\n  prefix: '',\n  options: [],\n  filter: '',\n  optionsToShow: 5,\n  showAll: false,\n  hideSearch: false,\n  showSearch: false,\n  sort: false,\n  sortbyLabel: false,\n  forceHoist: false,\n  placeholder: '',\n  onChange: (_v) => {},\n  onFilter: async (_searchTerm) => {},\n  totalPossibleOptions: 0,\n  allowSelectGroup: false };\n\n\n\n\n\n\n\n\nconst isNotAnEmptyGroup = (option) => !option.options || option.options.length;\n\nclass MultiSelectBase extends Component\n\n\n{\n\n\n\n\n  constructor(props) {\n    super(props);_defineProperty(this, \"searchInputRef\", void 0);\n    this.state = { showAll: props.showAll, ui: {}, filter: '' };\n    this.filter = this.filter.bind(this);\n    this.resetFilter = this.resetFilter.bind(this);\n    this.showAll = this.showAll.bind(this);\n    this.focusSearch = this.focusSearch.bind(this);\n    this.searchInputRef = /*#__PURE__*/createRef();\n  }\n\n  static getDerivedStateFromProps(props) {\n    if (props.filter) {\n      return { filter: props.filter };\n    }\n\n    return null;\n  }\n\n  getPartialList() {\n    return [];\n  }\n\n  getPinnedList() {\n    return [];\n  }\n\n\n\n\n\n\n\n  getStateValue(\n  value,\n  group,\n  {\n    markGroup,\n    conditionValue,\n    markOptions })\n\n\n\n\n\n  {\n    let newValue = markGroup(value, group);\n    group.options.forEach((_item) => {\n      if (this.checked(_item) !== conditionValue) {\n        newValue = markOptions(newValue, _item);\n      }\n    });\n\n    return newValue;\n  }\n\n  getGroupStateValue(value, group) {\n    return this.getStateValue(value, group, {\n      markGroup: this.markChecked.bind(this),\n      conditionValue: SelectStates.OFF,\n      markOptions: this.markUnchecked.bind(this) });\n\n  }\n\n  getOnStateValue(value, group) {\n    return this.getStateValue(value, group, {\n      markGroup: this.markUnchecked.bind(this),\n      conditionValue: SelectStates.ON,\n      markOptions: this.markChecked.bind(this) });\n\n  }\n\n  getOffStateValue(value, group) {\n    return this.getStateValue(value, group, {\n      markGroup: this.markUnchecked.bind(this),\n      conditionValue: SelectStates.OFF,\n      markOptions: this.markUnchecked.bind(this) });\n\n  }\n\n  changeGroup(group, e) {\n    const { value, allowSelectGroup } = this.props;\n    const previousState = parseInt(e.target.dataset.state, 10);\n\n    const transitionCallbacks =\n\n    {\n      [SelectStates.OFF]: this.getOnStateValue,\n      [SelectStates.GROUP]: this.getOffStateValue,\n      [SelectStates.PARTIAL]: this.getOffStateValue,\n      [SelectStates.ON]: allowSelectGroup ? this.getGroupStateValue : this.getOffStateValue };\n\n\n    this.props.onChange(transitionCallbacks[previousState].call(this, value, group));\n  }\n\n  checked(option) {\n    if (!this.props.value) {\n      return SelectStates.OFF;\n    }\n\n    const checkedList = this.getCheckedList();\n    const partialList = this.getPartialList();\n\n    if (option.options) {\n      if (checkedList.includes(option[this.props.optionsValue])) {\n        return SelectStates.GROUP;\n      }\n\n      const numChecked = option.options.reduce(\n      (nc, _option) => nc + (checkedList.includes(_option[this.props.optionsValue]) ? 1 : 0),\n      0);\n\n      const numPartial = option.options.reduce(\n      (np, _option) => np + (partialList.includes(_option[this.props.optionsValue]) ? 1 : 0),\n      0);\n\n      if (numChecked === option.options.length) {\n        return SelectStates.ON;\n      }\n      if (numChecked + numPartial > 0) {\n        return SelectStates.PARTIAL;\n      }\n      return SelectStates.OFF;\n    }\n\n    if (checkedList.includes(option[this.props.optionsValue])) {\n      return SelectStates.ON;\n    }\n\n    if (partialList.includes(option[this.props.optionsValue])) {\n      return SelectStates.PARTIAL;\n    }\n\n    return SelectStates.OFF;\n  }\n\n  change(option) {\n    let { value } = this.props;\n    if (this.checked(option) === SelectStates.ON) {\n      value = this.markUnchecked(value, option);\n    } else {\n      value = this.markChecked(value, option);\n    }\n    this.props.onChange(value);\n  }\n\n  async filter(e) {\n    this.setState({ filter: e.target.value });\n    await this.props.onFilter(e.target.value);\n  }\n\n  async resetFilter() {\n    this.setState({ filter: '' });\n    await this.props.onFilter('');\n  }\n\n  showAll(e) {\n    e.preventDefault();\n    this.setState((prevState) => ({ showAll: !prevState.showAll }));\n  }\n\n  sort(options, isSubGroup = false) {\n    const { optionsValue, optionsLabel } = this.props;\n    const pinnedList = this.getPinnedList();\n    const sortedOptions = options.sort((a, b) => {\n      const aPinned = this.checked(a) !== SelectStates.OFF || pinnedList.includes(a[optionsValue]);\n      const bPinned = this.checked(b) !== SelectStates.OFF || pinnedList.includes(b[optionsValue]);\n      let sorting = 0;\n      if (!this.state.showAll) {\n        sorting = (bPinned ? 1 : 0) - (aPinned ? 1 : 0);\n      }\n\n      if (sorting === 0 && typeof options[0].results !== 'undefined' && a.results !== b.results) {\n        sorting = (a.results || 0) > (b.results || 0) ? -1 : 1;\n      }\n\n      const showingAll = this.state.showAll || options.length < this.props.optionsToShow;\n      if (sorting === 0 || showingAll || this.props.sortbyLabel || isSubGroup) {\n        sorting = a[optionsLabel] < b[optionsLabel] ? -1 : 1;\n      }\n\n      return sorting;\n    });\n\n    return this.moveNoValueOptionToBottom(sortedOptions);\n  }\n\n  sortOnlyAggregates(options) {\n    const { optionsLabel } = this.props;\n    if (!options.length || typeof options[0].results === 'undefined') {\n      return options;\n    }\n    const sortedOptions = options.sort((a, b) => {\n      let sorting = (b.results || 0) - (a.results || 0);\n\n      if (sorting === 0) {\n        sorting = a[optionsLabel] < b[optionsLabel] ? -1 : 1;\n      }\n\n      return sorting;\n    });\n    return this.moveNoValueOptionToBottom(sortedOptions);\n  }\n\n  moveNoValueOptionToBottom(options) {\n    let _options = [...options];\n    ['any', 'missing'].forEach((bottomId) => {\n      const bottomOption = _options.find((opt) => opt.id === bottomId);\n      if (bottomOption && this.checked(bottomOption) === SelectStates.OFF) {\n        _options = _options.filter((opt) => opt.id !== bottomId);\n        _options.push(bottomOption);\n      }\n    });\n    return _options;\n  }\n\n  hoistCheckedOptions(options) {\n    const [checkedOptions, otherOptions] = options.reduce(\n    ([checked, others], option) => {\n      if (this.checked(option) !== SelectStates.OFF) {\n        return [checked.concat([option]), others];\n      }\n      return [checked, others.concat([option])];\n    },\n    [[], []]);\n\n    const partitionedOptions = checkedOptions.concat(otherOptions);\n    return this.moveNoValueOptionToBottom(partitionedOptions);\n  }\n\n  moreLessLabel(totalOptions) {\n    const { totalPossibleOptions } = this.props;\n    const amount = totalPossibleOptions || totalOptions.length;\n\n    if (this.state.showAll) {\n      return /*#__PURE__*/_jsx(Translate, {}, void 0, \"x less\");\n    }\n\n    return /*#__PURE__*/(\n      _jsx(\"span\", {}, void 0,\n      amount - this.props.optionsToShow, \" \", /*#__PURE__*/_jsx(Translate, {}, void 0, \"x more\")));\n\n\n  }\n\n  toggleOptions(group, e) {\n    e.preventDefault();\n    const groupKey = group[this.props.optionsValue];\n    const { ui } = this.state;\n    ui[groupKey] = !ui[groupKey];\n    this.setState({ ui });\n  }\n\n  showSubOptions(parent) {\n    const toggled = this.state.ui[parent.id];\n    return toggled || this.checked(parent) !== SelectStates.OFF;\n  }\n\n  label(option) {\n    const { optionsValue, optionsLabel, prefix } = this.props;\n    return /*#__PURE__*/(\n      _jsx(\"label\", { className: \"multiselectItem-label\", htmlFor: prefix + option[optionsValue] }, void 0, /*#__PURE__*/\n      _jsx(\"span\", { className: \"multiselectItem-icon\" }, void 0, /*#__PURE__*/\n      _jsx(Icon, { icon: ['far', 'square'], className: \"checkbox-empty\" }), /*#__PURE__*/\n      _jsx(Icon, { icon: \"check\", className: \"checkbox-checked\" }), /*#__PURE__*/\n      _jsx(Icon, { icon: \"minus\", className: \"checkbox-partial\" }), /*#__PURE__*/\n      _jsx(Icon, { icon: ['fas', 'square'], className: \"checkbox-group\" })), /*#__PURE__*/\n\n      _jsx(\"span\", { className: \"multiselectItem-name\" }, void 0, /*#__PURE__*/\n      _jsx(CustomIcon, { className: \"item-icon\", data: option.icon }),\n      option[optionsLabel]), /*#__PURE__*/\n\n      _jsx(\"span\", { className: \"multiselectItem-results\" }, void 0,\n      option.results && /*#__PURE__*/_jsx(\"span\", {}, void 0, option.results),\n      option.options && /*#__PURE__*/\n      _jsx(\"span\", {\n        className: \"multiselectItem-action\",\n        onClick: this.toggleOptions.bind(this, option) }, void 0, /*#__PURE__*/\n\n      _jsx(Icon, { icon: this.state.ui[option.id] ? 'caret-up' : 'caret-down' })))));\n\n\n\n\n\n  }\n\n  focusSearch() {\n    const node = this.searchInputRef.current;\n    node.focus();\n  }\n\n  renderGroup(group, index) {\n    const { prefix } = this.props;\n    const state = this.checked(group);\n    return /*#__PURE__*/(\n      _jsx(\"li\", { className: \"multiselect-group\" }, index, /*#__PURE__*/\n      _jsx(\"div\", { className: \"multiselectItem\" }, void 0, /*#__PURE__*/\n      _jsx(\"input\", {\n        type: \"checkbox\",\n        className: \"group-checkbox multiselectItem-input\",\n        id: prefix + group.id,\n        onChange: this.changeGroup.bind(this, group),\n        checked: state !== SelectStates.OFF,\n        \"data-state\": state }),\n\n      this.label(_objectSpread(_objectSpread({}, group), {}, { results: group.results }))), /*#__PURE__*/\n\n      _jsx(ShowIf, { if: this.showSubOptions(group) }, void 0, /*#__PURE__*/\n      _jsx(\"ul\", { className: \"multiselectChild is-active\" }, void 0,\n      group.options.map((_item, i) =>\n      this.renderOption(_item, i, index.toString(), state === SelectStates.GROUP))))));\n\n\n\n\n\n  }\n\n  renderOption(option, index, groupIndex = '', disabled = false) {\n    const { optionsValue, optionsLabel, prefix } = this.props;\n    const key = `${groupIndex}${index}`;\n    return /*#__PURE__*/(\n      _jsx(\"li\", {\n        className: \"multiselectItem\",\n\n        title: option.title ? option.title : option[optionsLabel] }, key, /*#__PURE__*/\n\n      _jsx(\"input\", {\n        type: \"checkbox\",\n        className: \"multiselectItem-input\",\n        value: option[optionsValue],\n        id: prefix + option[optionsValue],\n        onChange: this.change.bind(this, option),\n        checked: this.checked(option) !== SelectStates.OFF,\n        \"data-state\": this.checked(option),\n        disabled: disabled }),\n\n      this.label(option)));\n\n\n  }\n\n  renderSearch() {\n    const { placeholder, options, optionsToShow, hideSearch, showSearch } = this.props;\n\n    return /*#__PURE__*/(\n      _jsx(\"li\", { className: \"multiselectActions\" }, void 0, /*#__PURE__*/\n      _jsx(ShowIf, { if: options.length > optionsToShow && !hideSearch || showSearch }, void 0, /*#__PURE__*/\n      _jsx(\"div\", { className: \"form-group\" }, void 0, /*#__PURE__*/\n      _jsx(Icon, { icon: this.state.filter ? 'times-circle' : 'search', onClick: this.resetFilter }), /*#__PURE__*/\n      React.createElement(\"input\", {\n        ref: this.searchInputRef,\n        className: \"form-control\",\n        type: \"text\",\n        placeholder: placeholder || t('System', 'Search item', null, false),\n        value: this.state.filter,\n        onChange: this.filter })))));\n\n\n\n\n\n  }\n\n  renderOptionsCount(totalOptions, renderedOptions) {\n    const { totalPossibleOptions } = this.props;\n    let count = `${totalPossibleOptions - renderedOptions.length}`;\n    if (totalPossibleOptions > 1000) {\n      count = `${count}+`;\n    }\n\n    return /*#__PURE__*/(\n      _jsx(\"li\", { className: \"multiselectActions\" }, void 0, /*#__PURE__*/\n      _jsx(ShowIf, { if: totalOptions.length > this.props.optionsToShow }, void 0, /*#__PURE__*/\n      _jsx(\"button\", { onClick: this.showAll, className: \"btn btn-xs btn-default\", type: \"button\" }, void 0, /*#__PURE__*/\n      _jsx(Icon, { icon: this.state.showAll ? 'caret-up' : 'caret-down' }), \"\\xA0\",\n\n      this.moreLessLabel(totalOptions))),\n\n\n      totalPossibleOptions > totalOptions.length && this.state.showAll && /*#__PURE__*/\n      _jsx(\"div\", { className: \"total-options\" }, void 0,\n      count, \" \", /*#__PURE__*/_jsx(Translate, {}, void 0, \"more options.\"), ' ', /*#__PURE__*/\n      _jsx(\"button\", { onClick: this.focusSearch, type: \"button\" }, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Narrow your search\")))));\n\n\n\n\n\n  }\n\n  render() {\n    const { optionsLabel } = this.props;\n\n    let totalOptions = this.props.options.filter((option) => {\n      let notDefined;\n      return (\n        isNotAnEmptyGroup(option) && (\n        option.results === notDefined ||\n        option.results > 0 ||\n        option.options && option.options.length ||\n        this.checked(option)));\n\n    });\n\n    totalOptions = totalOptions.map((option) => {\n      if (!option.options) {\n        return option;\n      }\n      return _objectSpread(_objectSpread({},\n      option), {}, {\n        options: option.options.filter((_opt) => {\n          let notDefined;\n\n          return _opt.results === notDefined || _opt.results > 0 || this.checked(_opt);\n        }) });\n\n    });\n\n    if (this.state.filter) {\n      totalOptions = filterOptions(this.state.filter, totalOptions, optionsLabel);\n    }\n\n    let options = totalOptions.slice();\n    const tooManyOptions = !this.state.showAll && options.length > this.props.optionsToShow;\n\n    if (this.props.sort) {\n      options = this.sort(options);\n    } else {\n      options = this.sortOnlyAggregates(options);\n    }\n\n    if (this.props.forceHoist || !this.props.sort && !this.state.showAll) {\n      options = this.hoistCheckedOptions(options);\n    }\n\n    let renderingOptions = options;\n\n    if (tooManyOptions) {\n      const numberOfActiveOptions = options.filter((opt) => this.checked(opt)).length;\n      const optionsToShow =\n      this.props.optionsToShow > numberOfActiveOptions ?\n      this.props.optionsToShow :\n      numberOfActiveOptions;\n      renderingOptions = options.slice(0, optionsToShow);\n    }\n\n    renderingOptions = renderingOptions.map((option) => {\n      if (!option.options) {\n        return option;\n      }\n      return _objectSpread(_objectSpread({}, option), {}, { options: this.sort(option.options, true) });\n    });\n\n    return /*#__PURE__*/(\n      _jsx(\"ul\", { className: \"multiselect is-active\" }, void 0,\n      this.renderSearch(),\n      !renderingOptions.length && /*#__PURE__*/\n      _jsx(\"span\", { className: \"no-options-message\" }, void 0, t('System', 'No options found')),\n\n      renderingOptions.map((option, index) => {\n        if (option.options) {\n          return this.renderGroup(option, index);\n        }\n\n        return this.renderOption(option, index);\n      }),\n      this.renderOptionsCount(options, renderingOptions)));\n\n\n  }}_defineProperty(MultiSelectBase, \"defaultProps\", defaultProps);\n\n\nclass MultiSelect extends MultiSelectBase {\n\n\n  markChecked(value, option) {\n    const newValue = value.slice(0);\n    newValue.push(option[this.props.optionsValue]);\n    return newValue;\n  }\n\n  markUnchecked(value, option) {\n    const opt = option[this.props.optionsValue];\n    if (!value.includes(opt)) {\n      return value;\n    }\n    return value.filter((v) => v !== opt);\n  }\n\n  getCheckedList() {\n    return this.props.value || [];\n  }}_defineProperty(MultiSelect, \"defaultProps\", _objectSpread(_objectSpread({}, defaultProps), {}, { value: [] }));\n\n\nclass MultiSelectTristate extends MultiSelectBase {\n\n\n  markChecked(value, option) {\n    const opt = option[this.props.optionsValue];\n    const newValue = _objectSpread(_objectSpread({}, value), {}, { added: value.added.slice(0), removed: value.removed.slice(0) });\n    newValue.removed = value.removed.filter((v) => v !== opt);\n    if (value.originalFull.includes(opt)) {\n      return newValue;\n    }\n    // Flip originally partial options from off to partial, and then from partial to on.\n    if (!value.originalPartial.includes(opt) || !value.removed.includes(opt)) {\n      newValue.added.push(opt);\n    }\n    return newValue;\n  }\n\n  markUnchecked(value, option) {\n    const opt = option[this.props.optionsValue];\n    const newValue = _objectSpread(_objectSpread({}, value), {}, { added: value.added.slice(0), removed: value.removed.slice(0) });\n    if (value.originalFull.includes(opt) || value.originalPartial.includes(opt)) {\n      newValue.removed.push(option[this.props.optionsValue]);\n    }\n    newValue.added = value.added.filter((v) => v !== option[this.props.optionsValue]);\n    return newValue;\n  }\n\n  getCheckedList() {\n    const { value } = this.props;\n    return value.originalFull.filter((v) => !value.removed.includes(v)).concat(value.added);\n  }\n\n  getPartialList() {\n    const { value } = this.props;\n    return value.originalPartial.filter((v) => !value.removed.includes(v));\n  }\n\n  getPinnedList() {\n    const { value } = this.props;\n    return value.originalPartial.concat(value.originalFull);\n  }}_defineProperty(MultiSelectTristate, \"defaultProps\", _objectSpread(_objectSpread({}, defaultProps), {}, { value: {} }));\n\n\n\nexport { defaultProps, MultiSelect, MultiSelectTristate };","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };} /** @format */\n\nimport { advancedSort } from \"../../utils/advancedSort\";\nimport PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport { t } from \"../../I18N\";\nexport default class Select extends Component {\n  render() {\n    const { options, optionsValue, optionsLabel, placeholder, sort } = this.props;\n\n    let _options = options;\n    if (sort) {\n      const sortRoot = options.reduce((memo, option) => memo && !option.options, true);\n      _options = sortRoot ? advancedSort(options, { property: optionsLabel }) : options;\n    }\n    const { value } = this.props;\n\n    return /*#__PURE__*/(\n      _jsx(\"select\", { className: \"form-control\", onChange: this.props.onChange, value: value }, void 0, \"`\", /*#__PURE__*/\n      _jsx(\"option\", { value: \"\" }, void 0, t('System', placeholder, null, false)), \"`;\",\n      _options.map((option, index) => {\n        const key = option._id || option.id || index;\n        if (option.options) {\n          const groupOptions = sort ?\n          advancedSort(option.options, { property: optionsLabel }) :\n          option.options;\n          return /*#__PURE__*/(\n            _jsx(\"optgroup\", { label: option.label }, key,\n            groupOptions.map((opt, indx) => {\n              const ky = opt._id || opt.id || indx;\n              return /*#__PURE__*/(\n                _jsx(\"option\", { value: opt[optionsValue] }, ky,\n                opt[optionsLabel]));\n\n\n            })));\n\n\n        }\n        return /*#__PURE__*/(\n          _jsx(\"option\", { value: option[optionsValue] }, key,\n          option[optionsLabel]));\n\n\n      })));\n\n\n  }}\n\n\nSelect.defaultProps = {\n  value: '',\n  optionsValue: 'value',\n  optionsLabel: 'label',\n  placeholder: 'Select...',\n  sort: false };","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import { connect } from 'react-redux';\nimport 'react-datepicker/dist/react-datepicker.css';\n\nimport DatePickerComponent, { registerLocale } from 'react-datepicker';\nimport * as localization from 'date-fns/locale';\nimport PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport moment from 'moment-timezone';\n\nconst removeOffset = (useTimezone, value) => {\n  let datePickerValue = null;\n  const miliseconds = value * 1000;\n  if (value) {\n    const newValue = moment.utc(miliseconds);\n\n    if (!useTimezone) {\n      // in order to get the system offset for the specific date we\n      // need to create a new not UTC moment object with the original timestamp\n      newValue.subtract(moment(moment(miliseconds)).utcOffset(), 'minutes');\n    }\n\n    datePickerValue = parseInt(newValue.locale('en').format('x'), 10);\n  }\n\n  return datePickerValue;\n};\n\nconst addOffset = (useTimezone, endOfDay, value) => {\n  const newValue = moment.utc(value);\n\n  if (!useTimezone) {\n    // in order to get the proper offset moment has to be initialized with the actual date\n    // without this you always get the \"now\" moment offset\n    newValue.add(moment(value).utcOffset(), 'minutes');\n  }\n\n  if (endOfDay) {\n    const method = useTimezone ? newValue.local() : newValue.utc();\n    method.endOf('day');\n  }\n\n  return newValue;\n};\n\nclass DatePicker extends Component {\n  constructor(props) {\n    super(props);\n    this.handleChange = this.handleChange.bind(this);\n    registerLocale(props.locale || 'en', localization[props.locale] || localization.enGB);\n  }\n\n  handleChange(datePickerValue) {\n    const { endOfDay, useTimezone, onChange } = this.props;\n\n    if (!datePickerValue) {\n      onChange(null);\n    } else {\n      const newValue = addOffset(useTimezone, endOfDay, datePickerValue);\n      onChange(parseInt(newValue.locale('en').format('X'), 10));\n    }\n  }\n\n  render() {\n    const { locale, format, useTimezone, value } = this.props;\n    const defaultFormat = 'dd/MM/yyyy';\n    const datePickerValue = removeOffset(useTimezone, value);\n    return /*#__PURE__*/(\n      _jsx(DatePickerComponent, {\n        dateFormat: format || defaultFormat,\n        className: \"form-control\",\n        onChange: this.handleChange,\n        selected: datePickerValue,\n        locale: locale,\n        placeholderText: format || defaultFormat,\n        isClearable: true,\n        fixedHeight: true,\n        showYearDropdown: true }));\n\n\n  }}\n\n\nDatePicker.defaultProps = {\n  value: undefined,\n  endOfDay: false,\n  locale: 'en',\n  format: 'dd/MM/yyyy',\n  useTimezone: false };\n\n\n\n\n\n\n\n\n\n\n\nexport default connect()(DatePicker);","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport api from \"../../utils/api\";\n\nclass Captcha extends Component {\n  constructor(props) {\n    super(props);\n    this.onChange = this.onChange.bind(this);\n    const { refresh } = this.props;\n\n    refresh(this.refresh.bind(this));\n    this.state = { svg: '', id: '' };\n  }\n\n  componentDidMount() {\n    this.refresh();\n  }\n\n  onChange(e) {\n    const { onChange } = this.props;\n    onChange({ text: e.target.value, id: this.state.id });\n  }\n\n  async refresh() {\n    const { remote } = this.props;\n    const url = remote ? 'remotecaptcha' : 'captcha';\n    const response = await api.get(url);\n\n    this.setState(response.json);\n  }\n\n  render() {\n    const { value } = this.props;\n    const { svg } = this.state;\n\n    return /*#__PURE__*/(\n      _jsx(\"div\", { className: \"captcha\" }, void 0, /*#__PURE__*/\n      _jsx(\"div\", { dangerouslySetInnerHTML: { __html: svg } }), /*#__PURE__*/\n      _jsx(\"input\", { className: \"form-control\", onChange: this.onChange, value: value.text })));\n\n\n  }}\n\n\nCaptcha.defaultProps = {\n  value: { text: '', id: '' },\n  refresh: () => {},\n  remote: false };\n\n\n\n\n\n\n\n\n\nexport default Captcha;","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}function ownKeys(object, enumerableOnly) {var keys = Object.keys(object);if (Object.getOwnPropertySymbols) {var symbols = Object.getOwnPropertySymbols(object);enumerableOnly && (symbols = symbols.filter(function (sym) {return Object.getOwnPropertyDescriptor(object, sym).enumerable;})), keys.push.apply(keys, symbols);}return keys;}function _objectSpread(target) {for (var i = 1; i < arguments.length; i++) {var source = null != arguments[i] ? arguments[i] : {};i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {_defineProperty(target, key, source[key]);}) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));});}return target;}function _defineProperty(obj, key, value) {if (key in obj) {Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });} else {obj[key] = value;}return obj;}import PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport { Translate } from \"../../I18N\";\nimport DatePicker from \"./DatePicker\";\n\nclass DateRange extends Component {\n  onChange(prop, propValue) {\n    const { value, onChange } = this.props;\n    const state = _objectSpread(_objectSpread({}, value), {}, { [prop]: propValue });\n\n    onChange(state);\n  }\n\n  render() {\n    const { useTimezone, locale, format } = this.props;\n    const { value } = this.props;\n    const { from: stateFrom, to: stateTo } = value || { from: null, to: null };\n\n    return /*#__PURE__*/(\n      _jsx(\"div\", {}, void 0, /*#__PURE__*/\n      _jsx(\"div\", { className: \"DatePicker__From\" }, void 0, /*#__PURE__*/\n      _jsx(Translate, { translationKey: \"Label date \\\"From\\\"\" }, void 0, \"From:\"), /*#__PURE__*/\n      _jsx(DatePicker, {\n        locale: locale,\n        format: format,\n        useTimezone: useTimezone,\n        value: stateFrom,\n        onChange: (val) => this.onChange('from', val) })), /*#__PURE__*/\n\n\n      _jsx(\"div\", { className: \"DatePicker__To\" }, void 0, /*#__PURE__*/\n      _jsx(Translate, { translationKey: \"Label date \\\"to\\\"\" }, void 0, \"To:\"), /*#__PURE__*/\n      _jsx(DatePicker, {\n        locale: locale,\n        format: format,\n        useTimezone: useTimezone,\n        value: stateTo,\n        endOfDay: true,\n        onChange: (val) => this.onChange('to', val) }))));\n\n\n\n\n  }}\n\n\nDateRange.defaultProps = {\n  value: { from: null, to: null },\n  onChange: () => {},\n  locale: undefined,\n  format: undefined,\n  useTimezone: false };\n\n\n\n\n\n\n\n\n\n\nexport default DateRange;","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { Control } from 'react-redux-form';\n\nconst mapProps = {\n  className: ({ fieldValue }) => {\n    const _fieldValue = fieldValue.$form || fieldValue;\n    return _fieldValue.submitFailed && !_fieldValue.valid ? 'has-error' : '';\n  } };\n\n\nfunction controlComponent(className) {\n  // eslint-disable-next-line react/prop-types\n  return (props) => /*#__PURE__*/_jsx(\"div\", { className: `${className} ${props.className}` }, void 0, props.children);\n}\n\nexport class FormGroup extends Component {\n  render() {\n    if (this.props.model) {\n      const className = `form-group ${this.props.className || ''}`;\n      return /*#__PURE__*/(\n        _jsx(Control.custom, {\n          model: this.props.model,\n          component: controlComponent(className),\n          mapProps: mapProps }, void 0,\n\n        this.props.children));\n\n\n    }\n\n    return /*#__PURE__*/_jsx(\"div\", { className: `form-group ${this.props.className}` }, void 0, this.props.children);\n  }}\n\n\n\n\nFormGroup.defaultProps = {\n  hasError: false,\n  className: '',\n  model: '',\n  children: PropTypes.any };\n\n\n\n\n\n\n\n\n\nexport default connect()(FormGroup);","const _excluded = [\"lookup\", \"onChange\", \"totalPossibleOptions\"];function _extends() {_extends = Object.assign ? Object.assign.bind() : function (target) {for (var i = 1; i < arguments.length; i++) {var source = arguments[i];for (var key in source) {if (Object.prototype.hasOwnProperty.call(source, key)) {target[key] = source[key];}}}return target;};return _extends.apply(this, arguments);}function _objectWithoutProperties(source, excluded) {if (source == null) return {};var target = _objectWithoutPropertiesLoose(source, excluded);var key, i;if (Object.getOwnPropertySymbols) {var sourceSymbolKeys = Object.getOwnPropertySymbols(source);for (i = 0; i < sourceSymbolKeys.length; i++) {key = sourceSymbolKeys[i];if (excluded.indexOf(key) >= 0) continue;if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;target[key] = source[key];}}return target;}function _objectWithoutPropertiesLoose(source, excluded) {if (source == null) return {};var target = {};var sourceKeys = Object.keys(source);var key, i;for (i = 0; i < sourceKeys.length; i++) {key = sourceKeys[i];if (excluded.indexOf(key) >= 0) continue;target[key] = source[key];}return target;}function ownKeys(object, enumerableOnly) {var keys = Object.keys(object);if (Object.getOwnPropertySymbols) {var symbols = Object.getOwnPropertySymbols(object);enumerableOnly && (symbols = symbols.filter(function (sym) {return Object.getOwnPropertyDescriptor(object, sym).enumerable;})), keys.push.apply(keys, symbols);}return keys;}function _objectSpread(target) {for (var i = 1; i < arguments.length; i++) {var source = null != arguments[i] ? arguments[i] : {};i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {_defineProperty(target, key, source[key]);}) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));});}return target;}function _defineProperty(obj, key, value) {if (key in obj) {Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });} else {obj[key] = value;}return obj;}import React, { Component } from 'react';\nimport debounce from \"../../utils/debounce\";\nimport { MultiSelect, defaultProps } from \"./MultiSelect\";\n\n\n\n\n\n\n\n\n\n\n\nconst uniqueOptions = (optionsValue) => (option, i, arr) =>\narr.findIndex((o) => o[optionsValue] === option[optionsValue]) === i;\n\nfunction notEmpty(value) {\n  return value !== null && value !== undefined;\n}\n\nexport const debounceTime = 200;\n\nexport class LookupMultiSelect extends Component {\n\n\n  static getDerivedStateFromProps(props) {\n    return { totalPossibleOptions: props.totalPossibleOptions };\n  }\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      lookupOptions: [],\n      selectedOptions: [],\n      totalPossibleOptions: props.totalPossibleOptions };\n\n    this.onChange = this.onChange.bind(this);\n    this.onFilter = debounce(this.onFilter.bind(this), debounceTime);\n  }\n\n  onChange(value) {\n    this.props.onChange(value);\n    const options = this.combineOptions();\n\n    const selectedOptions = value.\n    map((v) => options.find((o) => o[this.props.optionsValue] === v)).\n    filter(notEmpty);\n\n    this.setState({ selectedOptions });\n  }\n\n  async onFilter(searchTerm) {\n    if (searchTerm.length) {\n      const { options, count } = await this.props.lookup(searchTerm);\n\n      const lookupOptions = options.map((o) => _objectSpread(_objectSpread({},\n      o), {}, {\n        [this.props.optionsValue]: o.value,\n        [this.props.optionsLabel]: o.label }));\n\n\n      this.setState({ lookupOptions, totalPossibleOptions: count });\n    }\n\n    if (!searchTerm.length) {\n      this.setState({\n        lookupOptions: [],\n        totalPossibleOptions: this.props.totalPossibleOptions });\n\n    }\n  }\n\n  combineOptions() {\n    return [\n    ...this.props.options,\n    ...this.state.lookupOptions,\n    ...this.state.selectedOptions].\n    filter(uniqueOptions(this.props.optionsValue));\n  }\n\n  render() {\n    const _this$props = this.props,{ lookup, onChange, totalPossibleOptions } = _this$props,rest = _objectWithoutProperties(_this$props, _excluded);\n    const filteredTotalPossibleOptions = this.state.totalPossibleOptions;\n    return /*#__PURE__*/(\n      React.createElement(MultiSelect, _extends({},\n      rest, {\n        onChange: this.onChange,\n        onFilter: this.onFilter,\n        totalPossibleOptions: filteredTotalPossibleOptions,\n        options: this.combineOptions() })));\n\n\n  }}_defineProperty(LookupMultiSelect, \"defaultProps\", _objectSpread(_objectSpread({}, defaultProps), {}, { value: [] }));","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import MarkdownViewer from \"../../Markdown\";\nimport React, { Component } from 'react';\nimport { TabContent, TabLink, Tabs } from 'react-tabs-redux';\nimport { Translate } from \"../../I18N\";\n\n\n\n\n\n\n\n\nexport class MarkDown extends Component {\n  render() {\n    const { rows = 6, value = '', onChange, showPreview = true } = this.props;\n    return /*#__PURE__*/(\n      _jsx(\"div\", { className: \"markdownEditor\" }, void 0, /*#__PURE__*/\n      _jsx(Tabs, { renderActiveTabContentOnly: true }, void 0, /*#__PURE__*/\n      _jsx(\"div\", { className: \"tab-nav\" }, void 0, /*#__PURE__*/\n      _jsx(TabLink, { to: \"edit\", default: true }, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Edit\")),\n\n      showPreview && /*#__PURE__*/\n      _jsx(TabLink, { to: \"preview\", component: \"div\" }, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Preview\")), /*#__PURE__*/\n\n\n      _jsx(\"a\", {\n        className: \"tab-link tab-link--help\",\n        href: \"https://guides.github.com/features/mastering-markdown/\",\n        target: \"_blank\",\n        rel: \"noopener noreferrer\" }, void 0, /*#__PURE__*/\n\n      _jsx(Translate, {}, void 0, \"help\"))), /*#__PURE__*/\n\n\n      _jsx(TabContent, { for: \"edit\" }, void 0, /*#__PURE__*/\n      _jsx(\"textarea\", { className: \"form-control\", rows: rows, onChange: onChange, value: value })),\n\n      showPreview && /*#__PURE__*/\n      _jsx(TabContent, { for: \"preview\", className: \"markdownViewer\" }, void 0, /*#__PURE__*/\n      _jsx(MarkdownViewer, { html: this.props.htmlOnViewer, markdown: value })))));\n\n\n\n\n\n  }}","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport { MarkDown } from \"./MarkDown\";\n\nexport default class Nested extends Component {\n  constructor(props) {\n    super(props);\n    this.state = { value: this.parseValue(this.props.value) };\n  }\n\n  parseValue(rows = []) {\n    if (!rows[0]) {\n      return '';\n    }\n\n    const keys = Object.keys(rows[0]).sort();\n    let result = `| ${keys.join(' | ')} |\\n`;\n    result += `| ${keys.map(() => '-').join(' | ')} |\\n`;\n    result += `${rows.\n    map((row) => `| ${keys.map((key) => (row[key] || []).join(',')).join(' | ')}`).\n    join(' |\\n')} |`;\n\n    return result;\n  }\n\n  onChange(e) {\n    const value = e.target.value || '';\n    let formatedValues = [];\n    this.setState({ value });\n    if (value) {\n      const rows = value.split('\\n').filter((row) => row);\n      const keys = rows[0].\n      split('|').\n      map((key) => key.trim()).\n      filter((key) => key);\n      const entries = rows.splice(2);\n      formatedValues = entries.map((row) =>\n      row.\n      split('|').\n      splice(1).\n      reduce((result, val, index) => {\n        if (!keys[index]) {\n          return result;\n        }\n        const values = val.\n        split(',').\n        map((v) => v.trim()).\n        filter((v) => v);\n        result[keys[index]] = values;\n        return result;\n      }, {}));\n\n    }\n\n    this.props.onChange(formatedValues);\n  }\n\n  render() {\n    return /*#__PURE__*/_jsx(MarkDown, { onChange: this.onChange.bind(this), value: this.state.value });\n  }}","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}function ownKeys(object, enumerableOnly) {var keys = Object.keys(object);if (Object.getOwnPropertySymbols) {var symbols = Object.getOwnPropertySymbols(object);enumerableOnly && (symbols = symbols.filter(function (sym) {return Object.getOwnPropertyDescriptor(object, sym).enumerable;})), keys.push.apply(keys, symbols);}return keys;}function _objectSpread(target) {for (var i = 1; i < arguments.length; i++) {var source = null != arguments[i] ? arguments[i] : {};i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {_defineProperty(target, key, source[key]);}) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));});}return target;}function _defineProperty(obj, key, value) {if (key in obj) {Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });} else {obj[key] = value;}return obj;}import PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport ShowIf from \"../../App/ShowIf\";\nimport { Field, Control } from 'react-redux-form';\nimport { t } from \"../../I18N\";\nimport { advancedSort } from \"../../utils/advancedSort\";\nimport nestedProperties from \"../../Templates/components/ViolatedArticlesNestedProperties\";\nimport { store } from \"../../store\";\nimport { Icon } from \"../../UI\";\nimport { MultiSelect } from \"./MultiSelect\";\n\nexport default class NestedMultiselect extends Component {\n  constructor(props) {\n    super(props);\n    const values = this.props.value || {};\n    this.state = { values, filter: '' };\n    if (!Object.keys(this.state.values).length) {\n      this.state.values = props.property.nestedProperties.reduce((result, prop) => {\n        result[prop.key] = [];\n        return result;\n      }, {});\n    }\n  }\n\n  onChange(key, optionsSelected) {\n    const values = _objectSpread(_objectSpread({}, this.state.values), {}, { [key]: optionsSelected });\n\n    this.setState({ values });\n    this.props.onChange(values);\n  }\n\n  getOptions(prop, aggregations) {\n    if (this.props.options) {\n      return this.props.options;\n    }\n\n    if (!aggregations.all[this.props.property.name][prop]) {\n      return [];\n    }\n    let options = aggregations.all[this.props.property.name][prop].buckets;\n    if (options.length === 1 && options[0].key === 'missing') {\n      return [];\n    }\n    options = options.\n    map((item) => ({\n      label: item.key,\n      value: item.key,\n      results: item.filtered.total.filtered.doc_count })).\n\n    filter((option) => option.results);\n    return advancedSort(options, {\n      property: 'value',\n      treatAs: 'dottedList',\n      listTypes: [Number, Number, String] });\n\n  }\n\n  resetFilter() {\n    this.setState({ filter: '' });\n  }\n\n  filter(e) {\n    this.setState({ filter: e.target.value });\n  }\n\n  selectAnyChange(key, e) {\n    const values = _objectSpread(_objectSpread({}, this.state.values), {}, { [key]: [], [`${key}any`]: e.target.checked });\n    this.setState({ values });\n    this.props.onChange(values);\n  }\n\n  toggleOptions(key, e) {\n    e.preventDefault();\n    const state = {};\n    state[key] = !this.state[key];\n    this.setState(state);\n  }\n\n  render() {\n    const { property } = this.props;\n    const { locale } = store.getState();\n    const aggregations = this.props.aggregations ? this.props.aggregations.toJS() : {};\n    return /*#__PURE__*/(\n      _jsx(\"ul\", { className: \"multiselect is-active\" }, void 0, /*#__PURE__*/\n      _jsx(\"li\", { className: \"multiselectActions\" }, void 0, /*#__PURE__*/\n      _jsx(\"div\", { className: \"form-group\" }, void 0, /*#__PURE__*/\n      _jsx(Icon, {\n        icon: this.state.filter ? 'times-circle' : 'search',\n        onClick: this.resetFilter.bind(this) }), /*#__PURE__*/\n\n      _jsx(\"input\", {\n        className: \"form-control\",\n        type: \"text\",\n        placeholder: t('System', 'Search item', null, false),\n        value: this.state.filter,\n        onChange: this.filter.bind(this) }))),\n\n\n\n      (() =>\n      property.nestedProperties.map((prop, index) => {\n        const options = this.getOptions(prop, aggregations);\n        if (!options.length) {\n          return false;\n        }\n        const label = nestedProperties[prop.toLowerCase()] ?\n        nestedProperties[prop.toLowerCase()][`label_${locale}`] :\n        prop;\n        return /*#__PURE__*/(\n          _jsx(\"li\", {}, index, /*#__PURE__*/\n          _jsx(Field, { model: `.filters.${property.name}.properties.${prop}.any` }, void 0, /*#__PURE__*/\n          _jsx(\"div\", { className: \"multiselectItem\" }, void 0, /*#__PURE__*/\n          _jsx(\"input\", {\n            type: \"checkbox\",\n            className: \"form-control multiselectItem-input\",\n            id: prop.key,\n            onChange: this.selectAnyChange.bind(this, prop) }), /*#__PURE__*/\n\n          _jsx(\"label\", { htmlFor: prop, className: \"multiselectItem-label\" }, void 0, /*#__PURE__*/\n          _jsx(\"span\", { className: \"multiselectItem-icon\" }), /*#__PURE__*/\n          _jsx(\"span\", { className: \"multiselectItem-name\", title: label }, void 0, /*#__PURE__*/\n          _jsx(\"b\", {}, void 0, label))), /*#__PURE__*/\n\n\n          _jsx(\"span\", { className: \"multiselectItem-results\" }, void 0, /*#__PURE__*/\n          _jsx(\"span\", {\n            className: \"multiselectItem-action\",\n            onClick: this.toggleOptions.bind(this, prop) }, void 0, /*#__PURE__*/\n\n          _jsx(Icon, { icon: this.state[prop] ? 'caret-up' : 'caret-down' }))))), /*#__PURE__*/\n\n\n\n\n          _jsx(ShowIf, { if: this.state[prop] }, void 0, /*#__PURE__*/\n          _jsx(Control, {\n            component: MultiSelect,\n            model: `.filters.${property.name}.properties.${prop}.values`,\n            prefix: property.name + prop,\n            options: options,\n            onChange: this.onChange.bind(this, prop),\n            showAll: true,\n            hideSearch: true,\n            sortbyLabel: true,\n            filter: this.state.filter }))));\n\n\n\n\n      }))()));\n\n\n  }}\n\n\nNestedMultiselect.defaultProps = {\n  value: {},\n  options: undefined };","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import DatePicker from \"./DatePicker\";\nimport React, { Component } from 'react';\nimport { Icon } from \"../../UI\";\nimport { Translate } from \"../../I18N\";\n\n\n\n\n\n\n\n\n\n\n\n\nexport default class MultiDate extends Component {\n  constructor(props) {\n    super(props);\n    const values = this.props.value && this.props.value.length ? this.props.value : [null];\n    this.state = { values };\n  }\n\n  onChange(index, value) {\n    const values = this.state.values.slice();\n    values[index] = value;\n    this.setState({ values });\n    this.props.onChange(values);\n  }\n\n  add(e) {\n    e.preventDefault();\n    const values = this.state.values.slice();\n    values.push(null);\n    this.setState({ values });\n  }\n\n  remove(index, e) {\n    e.preventDefault();\n    const values = this.state.values.slice();\n    values.splice(index, 1);\n    this.setState({ values });\n    this.props.onChange(values);\n  }\n\n  render() {\n    return /*#__PURE__*/(\n      _jsx(\"div\", { className: \"multidate\" }, void 0,\n      (() =>\n      this.state.values.map((value, index) => /*#__PURE__*/\n      _jsx(\"div\", { className: \"multidate-item\" }, index, /*#__PURE__*/\n      _jsx(DatePicker, {\n        locale: this.props.locale,\n        format: this.props.format,\n        onChange: this.onChange.bind(this, index),\n        value: value }), /*#__PURE__*/\n\n      _jsx(\"button\", {\n        type: \"button\",\n        className: \"react-datepicker__delete-icon\",\n        onClick: this.remove.bind(this, index) }))))(), /*#__PURE__*/\n\n\n\n      _jsx(\"button\", { type: \"button\", className: \"btn btn-success add\", onClick: this.add.bind(this) }, void 0, /*#__PURE__*/\n      _jsx(Icon, { icon: \"plus\" }), \"\\xA0\", /*#__PURE__*/\n\n      _jsx(Translate, {}, void 0, \"Add date\"))));\n\n\n\n  }}","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}function ownKeys(object, enumerableOnly) {var keys = Object.keys(object);if (Object.getOwnPropertySymbols) {var symbols = Object.getOwnPropertySymbols(object);enumerableOnly && (symbols = symbols.filter(function (sym) {return Object.getOwnPropertyDescriptor(object, sym).enumerable;})), keys.push.apply(keys, symbols);}return keys;}function _objectSpread(target) {for (var i = 1; i < arguments.length; i++) {var source = null != arguments[i] ? arguments[i] : {};i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {_defineProperty(target, key, source[key]);}) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));});}return target;}function _defineProperty(obj, key, value) {if (key in obj) {Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });} else {obj[key] = value;}return obj;}import PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport { Icon } from \"../../UI\";\nimport { Translate } from \"../../I18N\";\nimport DatePicker from \"./DatePicker\";\n\nexport default class MultiDateRange extends Component {\n  constructor(props) {\n    super(props);\n    const values =\n    this.props.value && this.props.value.length ? this.props.value : [{ from: null, to: null }];\n    this.state = { values };\n  }\n\n  fromChange(index, value) {\n    const values = this.state.values.slice();\n    values[index] = _objectSpread({}, values[index]);\n    values[index].from = value;\n    this.setState({ values });\n    this.props.onChange(values);\n  }\n\n  toChange(index, value) {\n    const values = this.state.values.slice();\n    values[index] = _objectSpread({}, values[index]);\n    values[index].to = value;\n    this.setState({ values });\n    this.props.onChange(values);\n  }\n\n  add(e) {\n    e.preventDefault();\n    const values = this.state.values.slice();\n    values.push({ from: null, to: null });\n    this.setState({ values });\n  }\n\n  remove(index, e) {\n    e.preventDefault();\n    const values = this.state.values.slice();\n    values.splice(index, 1);\n    this.setState({ values });\n    this.props.onChange(values);\n  }\n\n  render() {\n    return /*#__PURE__*/(\n      _jsx(\"div\", { className: \"multidate\" }, void 0,\n      (() =>\n      this.state.values.map((value, index) => /*#__PURE__*/\n      _jsx(\"div\", { className: \"multidate-item\" }, index, /*#__PURE__*/\n      _jsx(\"div\", { className: \"multidate-range\" }, void 0, /*#__PURE__*/\n      _jsx(\"div\", { className: \"DatePicker__From\" }, void 0, /*#__PURE__*/\n      _jsx(Translate, { translationKey: \"Label date \\\"From\\\"\" }, void 0, \"From:\"), /*#__PURE__*/\n      _jsx(DatePicker, {\n        format: this.props.format,\n        value: value.from,\n        onChange: this.fromChange.bind(this, index) })), /*#__PURE__*/\n\n\n      _jsx(\"div\", { className: \"DatePicker__To\" }, void 0, /*#__PURE__*/\n      _jsx(Translate, { translationKey: \"Label date \\\"to\\\"\" }, void 0, \"To:\"), /*#__PURE__*/\n      _jsx(DatePicker, {\n        format: this.props.format,\n        value: value.to,\n        endOfDay: true,\n        onChange: this.toChange.bind(this, index) })), /*#__PURE__*/\n\n\n      _jsx(\"button\", {\n        className: \"react-datepicker__delete-icon\",\n        onClick: this.remove.bind(this, index) }), /*#__PURE__*/\n\n      _jsx(\"div\", { className: \"multidate-range-clear-float\" })))))(), /*#__PURE__*/\n\n\n\n      _jsx(\"button\", { className: \"btn btn-success add\", onClick: this.add.bind(this) }, void 0, /*#__PURE__*/\n      _jsx(Icon, { icon: \"plus\" }), \"\\xA0\", /*#__PURE__*/\n\n      _jsx(Translate, {}, void 0, \"Add date\"))));\n\n\n\n  }}","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport { Icon, CountryList } from \"../../UI\";\nimport { Translate } from \"../../I18N\";\n\nconst style = { display: 'inline-block', width: '25px' };\n\nexport default class IconSelectorItem extends Component {\n  shouldComponentUpdate(nextProps) {\n    return this.props.item._id !== nextProps.item._id;\n  }\n\n  render() {\n    const { item } = this.props;\n\n    let icon = /*#__PURE__*/_jsx(Translate, {}, void 0, \"No icon / flag\");\n    if (item.type === 'Icons') {\n      icon = /*#__PURE__*/\n      _jsx(\"span\", { style: style }, void 0, /*#__PURE__*/\n      _jsx(Icon, { icon: `${item._id}` }));\n\n\n    }\n\n    if (item.type === 'Flags') {\n      const className = `flag-icon flag-icon-${CountryList.get(item._id).cca2}`.toLowerCase();\n      icon = /*#__PURE__*/\n      _jsx(\"span\", { style: style }, void 0, /*#__PURE__*/\n      _jsx(\"span\", { className: className }));\n\n\n    }\n\n    return /*#__PURE__*/(\n      _jsx(\"span\", {}, void 0,\n      icon,\n      item.label));\n\n\n  }}\n\n\nIconSelectorItem.defaultProps = {\n  item: undefined };","function _extends() {_extends = Object.assign ? Object.assign.bind() : function (target) {for (var i = 1; i < arguments.length; i++) {var source = arguments[i];for (var key in source) {if (Object.prototype.hasOwnProperty.call(source, key)) {target[key] = source[key];}}}return target;};return _extends.apply(this, arguments);}import React, { Component } from 'react';\nimport { iconNames } from \"../../UI/Icon/library\";\nimport { CountryList } from \"../../UI\";\nimport DropdownList from \"./DropdownList\";\nimport IconSelectorItem from \"./IconSelectorItem\";\n\nexport default class IconSelector extends Component {\n  constructor(props) {\n    super(props);\n    const listOptions = [{ _id: null, type: 'Empty' }].\n    concat(\n    iconNames.map((icon) => ({\n      _id: icon,\n      type: 'Icons',\n      label: icon }))).\n\n\n    concat(\n    Array.from(CountryList).map((country) => ({\n      _id: country[1].cca3,\n      type: 'Flags',\n      label: country[1].label })));\n\n\n\n    this.state = { listOptions };\n  }\n\n  render() {\n    return /*#__PURE__*/(\n      React.createElement(DropdownList, _extends({\n        valueField: \"_id\",\n        textField: \"label\",\n        data: this.state.listOptions,\n        valueComponent: IconSelectorItem,\n        itemComponent: IconSelectorItem,\n        defaultValue: this.state.listOptions[0],\n        filter: \"contains\",\n        groupBy: \"type\" },\n      this.props)));\n\n\n  }}","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import PropTypes from 'prop-types';\nimport React, { Component } from 'react';\n\nexport default class Numeric extends Component {\n  onChange(e) {\n    const { value } = e.target;\n    const { onChange } = this.props;\n\n    const numericValue = value !== '' ? parseFloat(value) : '';\n    return onChange(numericValue);\n  }\n\n  render() {\n    const { value = '' } = this.props;\n    const sanitizeValue = value !== null ? value : '';\n    return /*#__PURE__*/(\n      _jsx(\"input\", {\n        type: \"number\",\n        step: \"any\",\n        className: \"form-control\",\n        onChange: this.onChange.bind(this),\n        value: sanitizeValue }));\n\n\n  }}\n\n\nNumeric.defaultProps = {\n  value: '' };","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}function ownKeys(object, enumerableOnly) {var keys = Object.keys(object);if (Object.getOwnPropertySymbols) {var symbols = Object.getOwnPropertySymbols(object);enumerableOnly && (symbols = symbols.filter(function (sym) {return Object.getOwnPropertyDescriptor(object, sym).enumerable;})), keys.push.apply(keys, symbols);}return keys;}function _objectSpread(target) {for (var i = 1; i < arguments.length; i++) {var source = null != arguments[i] ? arguments[i] : {};i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {_defineProperty(target, key, source[key]);}) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));});}return target;}function _defineProperty(obj, key, value) {if (key in obj) {Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });} else {obj[key] = value;}return obj;}import PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport { Translate } from \"../../I18N\";\nimport Numeric from \"./Numeric\";\n\nexport default class NumericRange extends Component {\n  constructor(props) {\n    super(props);\n    const value = props.value || {};\n    this.state = { from: value.from, to: value.to };\n  }\n\n  onChange(prop, value) {\n    const newState = _objectSpread(_objectSpread({},\n    this.state), {}, {\n      [prop]: value });\n\n\n    this.setState(newState);\n\n    const { from, to } = newState;\n\n    this.props.onChange(_objectSpread(_objectSpread({},\n    from !== '' ? { from } : {}),\n    to !== '' ? { to } : {}));\n\n  }\n\n  render() {\n    return /*#__PURE__*/(\n      _jsx(\"div\", {}, void 0, /*#__PURE__*/\n      _jsx(\"div\", { className: \"Numeric__From\" }, void 0, /*#__PURE__*/\n      _jsx(Translate, { translationKey: \"Label date \\\"From\\\"\" }, void 0, \"From:\"), /*#__PURE__*/\n      _jsx(Numeric, { value: this.state.from, onChange: (val) => this.onChange('from', val) })), /*#__PURE__*/\n\n      _jsx(\"div\", { className: \"Numeric__To\" }, void 0, /*#__PURE__*/\n      _jsx(Translate, { translationKey: \"Label date \\\"to\\\"\" }, void 0, \"To:\"), /*#__PURE__*/\n      _jsx(Numeric, { value: this.state.to, onChange: (val) => this.onChange('to', val) }))));\n\n\n\n  }}","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import PropTypes from 'prop-types';\nimport React, { Component } from 'react';\n\nexport default class NumericRangeSlide extends Component {\n  static getDerivedStateFromProps({ value }) {\n    if (value) {\n      return { value };\n    }\n\n    return null;\n  }\n\n  constructor(props) {\n    super(props);\n    this.state = { value: props.value };\n    this.onChange = this.onChange.bind(this);\n  }\n\n  onChange(e) {\n    const { value } = e.target;\n    this.setState({ value });\n    const { delay, onChange } = this.props;\n    if (delay) {\n      clearTimeout(this.timeOut);\n      this.timeOut = setTimeout(() => {\n        onChange(value ? parseFloat(value) : null);\n      }, delay);\n\n      return;\n    }\n\n    onChange(value ? parseFloat(value) : null);\n  }\n\n  renderTickMarksDatalist() {\n    const { min, max, step, prefix } = this.props;\n    return /*#__PURE__*/(\n      _jsx(\"datalist\", { id: `${prefix}-tickmarks` }, void 0, /*#__PURE__*/\n      _jsx(\"option\", { value: min }),\n      (() => {\n        const options = [];\n        for (let i = min; i < max; i += step) {\n          options.push( /*#__PURE__*/_jsx(\"option\", { value: i.toFixed(2) }, i));\n        }\n        return options;\n      })(), /*#__PURE__*/\n      _jsx(\"option\", { value: max })));\n\n\n  }\n\n  render() {\n    const { min, max, step, prefix, minLabel, maxLabel } = this.props;\n    const { value } = this.state;\n    return /*#__PURE__*/(\n      React.createElement(React.Fragment, null, /*#__PURE__*/\n      _jsx(\"div\", { className: \"NumericRangeSlide\" }, void 0, /*#__PURE__*/\n      _jsx(\"input\", {\n        type: \"range\",\n        list: `${prefix}-tickmarks`,\n        min: min,\n        max: max,\n        step: step,\n        onChange: this.onChange,\n        value: value }), /*#__PURE__*/\n\n      _jsx(\"div\", { className: \"NumericRangeSlide-range-labels\" }, void 0, /*#__PURE__*/\n      _jsx(\"span\", {}, void 0, minLabel), /*#__PURE__*/\n      _jsx(\"span\", {}, void 0, maxLabel))),\n\n\n      this.renderTickMarksDatalist()));\n\n\n  }}\n\n\nNumericRangeSlide.defaultProps = {\n  onChange: () => {},\n  value: 50,\n  step: 5,\n  min: 0,\n  max: 100,\n  prefix: '',\n  delay: 0,\n  minLabel: '',\n  maxLabel: '' };","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import PropTypes from 'prop-types';\nimport React, { Component } from 'react';\n\nexport default class RadioButtons extends Component {\n  change(value) {\n    this.props.onChange(value);\n  }\n\n  checked(value) {\n    return value === this.props.value;\n  }\n\n  renderLabel(opt) {\n    if (this.props.renderLabel) {\n      return this.props.renderLabel(opt);\n    }\n\n    const { optionsLabel } = this.props;\n    return opt[optionsLabel];\n  }\n\n  render() {\n    const { optionsValue, prefix, options } = this.props;\n\n    return /*#__PURE__*/(\n      _jsx(\"div\", {}, void 0,\n      options.map((option) => /*#__PURE__*/\n      _jsx(\"div\", { className: \"radio\" }, option[optionsValue], /*#__PURE__*/\n      _jsx(\"label\", { htmlFor: prefix + option[optionsValue] }, void 0, /*#__PURE__*/\n      _jsx(\"input\", {\n        type: \"radio\",\n        value: option[optionsValue],\n        id: prefix + option[optionsValue],\n        onChange: this.change.bind(this, option[optionsValue]),\n        checked: this.checked(option[optionsValue]) }), /*#__PURE__*/\n\n      _jsx(\"span\", { className: \"multiselectItem-name\" }, void 0, this.renderLabel(option)))))));\n\n\n\n\n\n  }}\n\n\nRadioButtons.defaultProps = {\n  optionsLabel: 'label',\n  optionsValue: 'value',\n  prefix: '',\n  renderLabel: undefined,\n  value: null };","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import React from 'react';\nimport { Translate } from \"../../I18N\";\n\n\n\n\n\n\n\n\n\nconst Switcher = ({\n  onChange,\n  value,\n  prefix,\n  leftLabel = /*#__PURE__*/_jsx(Translate, { translationKey: \"Filters AND operator\" }, void 0, \"AND\"),\n  rightLabel = /*#__PURE__*/_jsx(Translate, { translationKey: \"Filters OR operator\" }, void 0, \"OR\") }) =>\n{\n  const onChangeHandler = (e) => {\n    onChange(e.target.checked);\n  };\n\n  return /*#__PURE__*/(\n    _jsx(\"div\", { className: \"switcher-wrapper\" }, void 0, /*#__PURE__*/\n    _jsx(\"span\", { className: value ? 'is-active' : '' }, void 0, leftLabel), /*#__PURE__*/\n    _jsx(\"input\", {\n      id: `${prefix}switcher`,\n      type: \"checkbox\",\n      checked: value || false,\n      onChange: onChangeHandler }), /*#__PURE__*/\n\n    _jsx(\"label\", { htmlFor: `${prefix}switcher`, className: \"switcher\" }), /*#__PURE__*/\n    _jsx(\"span\", { className: value ? '' : 'is-active' }, void 0, rightLabel)));\n\n\n};\n\nexport { Switcher };","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}function ownKeys(object, enumerableOnly) {var keys = Object.keys(object);if (Object.getOwnPropertySymbols) {var symbols = Object.getOwnPropertySymbols(object);enumerableOnly && (symbols = symbols.filter(function (sym) {return Object.getOwnPropertyDescriptor(object, sym).enumerable;})), keys.push.apply(keys, symbols);}return keys;}function _objectSpread(target) {for (var i = 1; i < arguments.length; i++) {var source = null != arguments[i] ? arguments[i] : {};i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {_defineProperty(target, key, source[key]);}) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));});}return target;}function _defineProperty(obj, key, value) {if (key in obj) {Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });} else {obj[key] = value;}return obj;}import PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport { Map } from \"../../Map\";\nimport { Translate } from \"../../I18N\";\n\nconst defaultValue = { lat: '', lon: '', label: '' };\n\nfunction isCoordinateValid(coord) {\n  return typeof coord === 'number' && !Number.isNaN(coord);\n}\n\nexport default class Geolocation extends Component {\n  constructor(props) {\n    super(props);\n    this.latChange = this.latChange.bind(this);\n    this.lonChange = this.lonChange.bind(this);\n    this.mapClick = this.mapClick.bind(this);\n    this.clearCoordinates = this.clearCoordinates.bind(this);\n    this.emptyValue = [];\n    const { lat, lon } = this.getInputValues();\n\n    this.state = {\n      currentLatitude: lat,\n      currentLongitude: lon };\n\n  }\n\n  onChange(newValue) {\n    this.setState({ currentLatitude: newValue.lat, currentLongitude: newValue.lon });\n    const { onChange, value } = this.props;\n\n    if (!isCoordinateValid(newValue.lat) || !isCoordinateValid(newValue.lon)) {\n      onChange(this.emptyValue);\n      return;\n    }\n    const valueToSend = value.slice(1);\n    valueToSend.unshift(newValue);\n    onChange(valueToSend);\n  }\n\n  getInputValues() {\n    const { value } = this.props;\n    const { lat, lon, label } = value && value[0] ? value[0] : _objectSpread({}, defaultValue);\n    return { lat, lon, label };\n  }\n\n  latChange(e) {\n    let latitude = e.target.value ? parseFloat(e.target.value) : '';\n    latitude = latitude && latitude < -89.99999 ? -89.99999 : latitude;\n    latitude = latitude && latitude > 90 ? 90 : latitude;\n\n    const { label } = this.getInputValues();\n    const { currentLongitude } = this.state;\n    this.onChange({ lat: latitude, lon: currentLongitude, label });\n  }\n\n  lonChange(e) {\n    const longitude = e.target.value ? parseFloat(e.target.value) : '';\n\n    const { label } = this.getInputValues();\n    const { currentLatitude } = this.state;\n    this.onChange({ lat: currentLatitude, lon: longitude, label });\n  }\n\n  mapClick(event) {\n    const { label } = this.getInputValues();\n    this.onChange({ lat: parseFloat(event.lngLat[1]), lon: parseFloat(event.lngLat[0]), label });\n  }\n\n  clearCoordinates() {\n    this.setState({ currentLatitude: '', currentLongitude: '' });\n    const { onChange } = this.props;\n    onChange(this.emptyValue);\n  }\n\n  render() {\n    const { currentLatitude, currentLongitude } = this.state;\n    const markers = [];\n\n    if (isCoordinateValid(currentLatitude) && isCoordinateValid(currentLongitude)) {\n      markers.push({\n        latitude: parseFloat(currentLatitude),\n        longitude: parseFloat(currentLongitude) });\n\n    }\n\n    return /*#__PURE__*/(\n      _jsx(\"div\", { className: \"geolocation form-inline\" }, void 0, /*#__PURE__*/\n      _jsx(Map, {\n        markers: markers,\n        onClick: this.mapClick,\n        height: 370,\n        autoCenter: false,\n        mapStyleSwitcher: true,\n        showControls: true }), /*#__PURE__*/\n\n      _jsx(\"div\", { className: \"form-row\" }, void 0, /*#__PURE__*/\n      _jsx(\"div\", { className: \"form-group half-width\" }, void 0, /*#__PURE__*/\n      _jsx(\"label\", {}, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Latitude\")), /*#__PURE__*/\n\n      _jsx(\"input\", {\n        onChange: this.latChange,\n        className: \"form-control\",\n        type: \"number\",\n        id: \"lat\",\n        value: currentLatitude,\n        step: \"any\" })), /*#__PURE__*/\n\n\n      _jsx(\"div\", { className: \"form-group half-width\" }, void 0, /*#__PURE__*/\n      _jsx(\"label\", {}, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Longitude\")), /*#__PURE__*/\n\n      _jsx(\"input\", {\n        onChange: this.lonChange,\n        className: \"form-control\",\n        type: \"number\",\n        id: \"lon\",\n        value: currentLongitude,\n        step: \"any\" }))),\n\n\n\n      (currentLatitude || currentLongitude) && /*#__PURE__*/\n      _jsx(\"div\", { className: \"clear-field-button\" }, void 0, /*#__PURE__*/\n      _jsx(\"button\", { type: \"button\", onClick: this.clearCoordinates }, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Clear coordinates\")))));\n\n\n\n\n\n  }}\n\n\nGeolocation.defaultProps = {\n  value: [_objectSpread({}, defaultValue)] };","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}function ownKeys(object, enumerableOnly) {var keys = Object.keys(object);if (Object.getOwnPropertySymbols) {var symbols = Object.getOwnPropertySymbols(object);enumerableOnly && (symbols = symbols.filter(function (sym) {return Object.getOwnPropertyDescriptor(object, sym).enumerable;})), keys.push.apply(keys, symbols);}return keys;}function _objectSpread(target) {for (var i = 1; i < arguments.length; i++) {var source = null != arguments[i] ? arguments[i] : {};i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {_defineProperty(target, key, source[key]);}) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));});}return target;}function _defineProperty(obj, key, value) {if (key in obj) {Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });} else {obj[key] = value;}return obj;}import PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport { Translate } from \"../../I18N\";\n\nexport default class LinkField extends Component {\n  constructor(props) {\n    super(props);\n    this.urlChange = this.urlChange.bind(this);\n    this.labelChange = this.labelChange.bind(this);\n  }\n\n  onChange(diffValue) {\n    const { value, onChange } = this.props;\n    const newValue = _objectSpread(_objectSpread({}, value), diffValue);\n    if (!newValue.label && !newValue.url) {\n      onChange(null);\n      return;\n    }\n    onChange(newValue);\n  }\n\n  urlChange(e) {\n    const label = e.target.value;\n    this.onChange({ label });\n  }\n\n  labelChange(e) {\n    const url = e.target.value;\n    this.onChange({ url });\n  }\n\n  render() {\n    const { value } = this.props;\n    const { label, url } = value || {};\n\n    return /*#__PURE__*/(\n      _jsx(\"div\", { className: \"link form-inline\" }, void 0, /*#__PURE__*/\n      _jsx(\"div\", { className: \"form-row\" }, void 0, /*#__PURE__*/\n      _jsx(\"div\", { className: \"form-group\" }, void 0, /*#__PURE__*/\n      _jsx(\"label\", {}, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Label\")), /*#__PURE__*/\n\n      _jsx(\"input\", {\n        onChange: this.urlChange,\n        className: \"form-control\",\n        id: \"label\",\n        value: label || '',\n        step: \"any\" })), /*#__PURE__*/\n\n\n      _jsx(\"div\", { className: \"form-group\" }, void 0, /*#__PURE__*/\n      _jsx(\"label\", {}, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"URL\")), /*#__PURE__*/\n\n      _jsx(\"input\", {\n        onChange: this.labelChange,\n        className: \"form-control\",\n        id: \"url\",\n        value: url || '',\n        step: \"any\" })))));\n\n\n\n\n\n  }}\n\n\nLinkField.defaultProps = {\n  value: { label: '', url: '' } };","import { connect } from 'react-redux';\nimport { getModel } from 'react-redux-form';\n\nexport const FormValue = ({ value, children }) => children(value);\n\nexport const mapStateToProps = (state, { model }) => ({ value: getModel(state, model) });\n\nexport default connect(mapStateToProps)(FormValue);","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}function ownKeys(object, enumerableOnly) {var keys = Object.keys(object);if (Object.getOwnPropertySymbols) {var symbols = Object.getOwnPropertySymbols(object);enumerableOnly && (symbols = symbols.filter(function (sym) {return Object.getOwnPropertyDescriptor(object, sym).enumerable;})), keys.push.apply(keys, symbols);}return keys;}function _objectSpread(target) {for (var i = 1; i < arguments.length; i++) {var source = null != arguments[i] ? arguments[i] : {};i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {_defineProperty(target, key, source[key]);}) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));});}return target;}function _defineProperty(obj, key, value) {if (key in obj) {Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });} else {obj[key] = value;}return obj;}import React, { useEffect, useState } from 'react';\nimport { isObject } from 'lodash';\nimport { Translate } from \"../../I18N\";\nimport { Icon } from \"../../UI\";\n\nimport { prepareHTMLMediaView } from \"../../../shared/fileUploadUtils\";\nimport { MediaModal, MediaModalType } from \"../../Metadata/components/MediaModal\";\nimport MarkdownMedia from \"../../Markdown/components/MarkdownMedia\";\n\n\n\n\n\n\n\n\n\nconst getValue = (value) =>\nisObject(value) && value.data ? value.data : value;\n\nconst prepareValue = (\nvalue,\nlocalAttachments) =>\n{\n  const valueString = getValue(value);\n  const values = {\n    originalValue: valueString,\n    fileURL: valueString,\n    type: '' };\n\n\n  if (/^[a-zA-Z\\d_]*$/.test(values.originalValue)) {\n    values.type = 'uploadId';\n  }\n\n  if (/^https?:\\/\\//.test(values.originalValue)) {\n    values.type = 'webUrl';\n  }\n\n  const supportingFile = localAttachments.find(\n  (file) => values.originalValue === (file.url || file.fileLocalID || `/api/files/${file.filename}`));\n\n\n  if (values.type === 'uploadId' && supportingFile) {\n    values.fileURL = prepareHTMLMediaView(supportingFile);\n  }\n\n  return _objectSpread(_objectSpread({}, values), {}, { supportingFile });\n};\n\nconst MediaField = (props) => {\n  const {\n    value,\n    onChange,\n    type,\n    localAttachments = [],\n    formModel,\n    name: formField,\n    multipleEdition } =\n  props;\n  const [openModal, setOpenModal] = useState(false);\n\n  const handleCloseMediaModal = () => {\n    setOpenModal(false);\n  };\n\n  const handleImageRemove = () => {\n    onChange(null);\n  };\n\n  const file = prepareValue(value, localAttachments);\n\n  useEffect(() => {\n    if (file.originalValue && !file.supportingFile && file.type === 'uploadId') {\n      handleImageRemove();\n    }\n  }, [localAttachments]);\n\n  useEffect(\n  () => () => {var _file$supportingFile;\n    if ((_file$supportingFile = file.supportingFile) !== null && _file$supportingFile !== void 0 && _file$supportingFile.serializedFile && file.fileURL) {\n      URL.revokeObjectURL(file.fileURL);\n    }\n  },\n  []);\n\n\n  return /*#__PURE__*/(\n    _jsx(\"div\", { className: \"search__filter--selected__media\" }, void 0,\n    file.fileURL && (\n    type === MediaModalType.Image ? /*#__PURE__*/\n    _jsx(\"img\", { src: file.fileURL, alt: \"\" }) : /*#__PURE__*/\n\n    _jsx(MarkdownMedia, { config: file.fileURL })), /*#__PURE__*/\n\n\n    _jsx(\"div\", { className: \"search__filter--selected__media-toolbar\" }, void 0, /*#__PURE__*/\n    _jsx(\"button\", { type: \"button\", onClick: () => setOpenModal(true), className: \"btn\" }, void 0, /*#__PURE__*/\n    _jsx(Icon, { icon: \"plus\" }), \" \", /*#__PURE__*/_jsx(Translate, {}, void 0, value ? 'Update' : 'Add file')),\n\n\n    file.originalValue && /*#__PURE__*/\n    _jsx(\"button\", { type: \"button\", onClick: handleImageRemove, className: \"btn\" }, void 0, /*#__PURE__*/\n    _jsx(Icon, { icon: \"unlink\" }), \"\\xA0 \", /*#__PURE__*/\n    _jsx(Translate, {}, void 0, \"Unlink\"))), /*#__PURE__*/\n\n\n\n\n    _jsx(MediaModal, {\n      isOpen: openModal,\n      onClose: handleCloseMediaModal,\n      onChange: onChange,\n      selectedUrl: file.originalValue,\n      attachments: localAttachments,\n      type: type,\n      formModel: formModel,\n      formField: formField,\n      multipleEdition: multipleEdition })));\n\n\n\n};\n\nexport default MediaField;","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}function _defineProperty(obj, key, value) {if (key in obj) {Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });} else {obj[key] = value;}return obj;}\n\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { actions as formActions, getModel } from 'react-redux-form';\nimport { notify } from \"../../Notifications/actions/notificationsActions\";\nimport { Icon } from \"../../UI\";\nimport { propertyTypes } from \"../../../shared/propertyTypes\";\nimport { Translate } from \"../../I18N\";\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst defaultProps = {\n  // The suggestions value, provided by redux Component.\n  value: [],\n  // The 'main' value, provided by mapStateToProps.\n  selectValue: [] };\n\n\nexport function acceptSuggestion(\nsuggestion,\npropertyType,\nselectModel,\nselectValue)\n{\n  return (dispatch) => {\n    switch (propertyType) {\n      case propertyTypes.multiselect:\n        if (!selectValue.includes(suggestion)) {\n          dispatch(formActions.change(selectModel, [...selectValue, suggestion]));\n        }\n        break;\n      case propertyTypes.select:\n        if (!selectValue.length || selectValue[0] !== suggestion) {\n          dispatch(formActions.change(selectModel, suggestion));\n        }\n        break;\n      default:\n        break;}\n\n  };\n}\n\nexport class MultiSuggestBase extends Component {\n\n\n  static confidenceBlob(suggestionConfidence) {\n    let label = 'low';\n    if ((suggestionConfidence !== null && suggestionConfidence !== void 0 ? suggestionConfidence : 0.0) >= 0.75) {\n      label = 'high';\n    } else if ((suggestionConfidence !== null && suggestionConfidence !== void 0 ? suggestionConfidence : 0.0) >= 0.5) {\n      label = 'medium';\n    }\n    return /*#__PURE__*/_jsx(\"span\", { className: `confidence-bubble ${label}` }, void 0, label);\n  }\n\n  acceptSuggestion(id) {\n    const { propertyType, selectModel, selectValue } = this.props;\n    this.props.acceptSuggestion(id, propertyType, selectModel, selectValue);\n  }\n\n  rejectSuggestion(id, e) {\n    // Don't bubble the event up to onClick handlers of parents.\n    e.stopPropagation();\n    e.preventDefault();\n    const suggestedValues = (this.props.value || []).slice();\n    const index = suggestedValues.findIndex((v) => v.value === id);\n    if (index < 0) {\n      return;\n    }\n    suggestedValues.splice(index, 1);\n    this.props.onChange(suggestedValues);\n    this.props.notify('The suggestion has been rejected', 'success', 1000);\n  }\n\n  render() {\n    const { selectValue, value: proposedValues } = this.props;\n    const filteredValues = proposedValues.filter(\n    (value) => value.value && !selectValue.includes(value.value));\n\n    if (!filteredValues.length) {\n      return null;\n    }\n    return /*#__PURE__*/(\n      _jsx(\"div\", { className: \"suggestions multiselect\" }, void 0, /*#__PURE__*/\n      _jsx(\"b\", { className: \"suggestions-title\" }, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Suggestions\"), \"\\xA0\", /*#__PURE__*/\n      _jsx(\"span\", {}, void 0, \"(\", filteredValues.length, \")\")),\n\n      filteredValues.map((value) => /*#__PURE__*/\n      _jsx(\"div\", { className: \"multiselectItem\" }, value.value, /*#__PURE__*/\n      _jsx(\"label\", {\n        className: \"multiselectItem-label\",\n        onClick: this.acceptSuggestion.bind(this, value.value) }, void 0, /*#__PURE__*/\n\n      _jsx(\"span\", { className: \"multiselectItem-icon\" }, void 0, /*#__PURE__*/\n      _jsx(Icon, { icon: ['far', 'square'], className: \"checkbox-empty\" })), /*#__PURE__*/\n\n      _jsx(\"span\", { className: \"multiselectItem-name\" }, void 0, value.label),\n      MultiSuggestBase.confidenceBlob(value.suggestion_confidence), /*#__PURE__*/\n      _jsx(\"div\", {\n        className: \"multiselectItem-button\",\n        onClick: this.rejectSuggestion.bind(this, value.value) }, void 0, /*#__PURE__*/\n\n      _jsx(\"div\", { className: \"property-help no-margin\" }, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Reject\"), /*#__PURE__*/\n      _jsx(\"div\", { className: \"property-description-top-left\" }, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Is the suggestion incorrect? Click on 'Reject' and Uwazi will improve on the suggestions it makes\")))))))));\n\n\n\n\n\n\n\n\n\n\n\n  }}_defineProperty(MultiSuggestBase, \"defaultProps\", defaultProps);\n\n\nexport function mapStateToProps(state, props) {\n  let { selectModel } = props;\n  if (selectModel && selectModel[0] === '.') {\n    // TODO(bdittes): Correctly inherit parent path.\n    selectModel = `entityView.entityForm${selectModel}`;\n  }\n  const rawValue = getModel(state, selectModel) || [];\n  return { selectModel, selectValue: Array.isArray(rawValue) ? rawValue : [rawValue] };\n}\n\n\nexport const MultiSuggest = connect(mapStateToProps, { acceptSuggestion, notify })(\nMultiSuggestBase);","function ownKeys(object, enumerableOnly) {var keys = Object.keys(object);if (Object.getOwnPropertySymbols) {var symbols = Object.getOwnPropertySymbols(object);enumerableOnly && (symbols = symbols.filter(function (sym) {return Object.getOwnPropertyDescriptor(object, sym).enumerable;})), keys.push.apply(keys, symbols);}return keys;}function _objectSpread(target) {for (var i = 1; i < arguments.length; i++) {var source = null != arguments[i] ? arguments[i] : {};i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {_defineProperty(target, key, source[key]);}) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));});}return target;}function _defineProperty(obj, key, value) {if (key in obj) {Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });} else {obj[key] = value;}return obj;}export default function (obj, keys = []) {\n  const target = _objectSpread({}, obj);\n\n  keys.forEach((key) => {\n    delete target[key];\n  });\n\n  return target;\n}","function _extends() {_extends = Object.assign ? Object.assign.bind() : function (target) {for (var i = 1; i < arguments.length; i++) {var source = arguments[i];for (var key in source) {if (Object.prototype.hasOwnProperty.call(source, key)) {target[key] = source[key];}}}return target;};return _extends.apply(this, arguments);}function _defineProperty(obj, key, value) {if (key in obj) {Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });} else {obj[key] = value;}return obj;} /** @format */\n\nimport PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { Link, browserHistory } from 'react-router';\nimport objectWithoutKeys from \"../../utils/objectWithoutKeys\";\n\nconst defaultProps = {\n  disabled: false,\n  onClick: (_e) => {},\n  confirmTitle: '',\n  confirmMessage: '' };\n\n\n\n\n\n\n\n\n\n\nexport class I18NLink extends Component {\n\n\n\n\n\n\n  static navigate(to) {\n    browserHistory.push(to);\n  }\n\n  constructor(props) {\n    super(props);\n    this.onClick = this.onClick.bind(this);\n  }\n\n  onClick(e) {\n    const { to, disabled, onClick, confirmTitle, confirmMessage } = this.props;\n    e.preventDefault();\n    if (disabled) {\n      return;\n    }\n\n    if (onClick) {\n      if (confirmTitle) {\n        this.context.confirm({\n          accept: () => {\n            onClick(e);\n            I18NLink.navigate(to);\n          },\n          title: confirmTitle,\n          message: confirmMessage });\n\n      } else {\n        onClick(e);\n        I18NLink.navigate(to);\n      }\n    }\n  }\n\n  render() {\n    const props = objectWithoutKeys(this.props, [\n    'dispatch',\n    'onClick',\n    'confirmTitle',\n    'confirmMessage']);\n\n    return /*#__PURE__*/React.createElement(Link, _extends({ onClick: this.onClick }, props));\n  }}_defineProperty(I18NLink, \"defaultProps\", defaultProps);_defineProperty(I18NLink, \"contextTypes\", { confirm: PropTypes.func });\n\n\nexport function mapStateToProps({ locale }, ownProps) {\n  return { to: `/${locale || ''}/${ownProps.to}`.replace(/\\/+/g, '/') };\n}\n\nexport default connect(mapStateToProps)(I18NLink);","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\nimport { withRouter } from 'react-router';\nimport PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport { Icon } from \"../../UI\";\nimport { actions, Translate, t } from \"./..\";\n\nimport { DropdownList } from \"../../Forms\";\n\nconst prepareDropdownValues = (languageMap, locale, user) => {\n  const languages = languageMap.toJS();\n\n  const selectedLanguage =\n  languages.find((lang) => lang.key === locale) || languages.find((lang) => lang.default);\n\n  const loggedUser = user.get('_id') && user.get('role') !== 'collaborator';\n\n  if (loggedUser) {\n    languages.push({ label: 'Live translate', key: 'livetranslate', type: 'livetranslate' });\n  }\n\n  return { languages, selectedLanguage, loggedUser };\n};\n\nconst listItem = (item, i18nmode) => {\n  if (!item.type) {\n    return /*#__PURE__*/_jsx(\"span\", {}, void 0, item.localized_label || item.label);\n  }\n\n  return /*#__PURE__*/(\n    _jsx(\"div\", { className: \"live-translate\" }, void 0, /*#__PURE__*/\n    _jsx(Icon, { icon: \"circle\", className: i18nmode ? 'live-on' : 'live-off' }), /*#__PURE__*/\n    _jsx(Translate, {}, void 0, item.label)));\n\n\n};\nclass I18NMenu extends Component {\n  static reload(url) {\n    window.location.href = url;\n  }\n\n  render() {\n    const {\n      languages: languageMap,\n      locale,\n      location,\n      i18nmode,\n      toggleInlineEdit,\n      user } =\n    this.props;\n\n    const { languages, selectedLanguage, loggedUser } = prepareDropdownValues(\n    languageMap,\n    locale,\n    user);\n\n\n    if (location.search.match(/page=/)) {\n      const cleanSearch = location.search.split(/page=\\d+|&page=\\d+/).join('');\n      location.search = cleanSearch === '?' ? '' : cleanSearch;\n    }\n\n    const regexp = new RegExp(`^/?${locale}/|^/?${locale}$`);\n    const path = location.pathname.replace(regexp, '/');\n\n    if (languageMap.size === 0) {\n      return null;\n    }\n    return languageMap.count() > 1 || user.size ? /*#__PURE__*/\n    _jsx(\"div\", {\n      className: `menuNav-I18NMenu ${!loggedUser === false ? ' only-language' : ' '} ${\n      languageMap.count() === 1 ? ' one-language' : ' '\n      } `,\n      role: \"navigation\",\n      \"aria-label\": \"Languages\" }, void 0,\n\n    !i18nmode && /*#__PURE__*/\n    _jsx(DropdownList, {\n      data: languages,\n      id: \"key\",\n      defaultValue: selectedLanguage,\n      textField: \"localized_label\",\n      className: \"menuNav-language\",\n      itemComponent: ({ item }) => listItem(item),\n      valueField: \"key\",\n      valueComponent: ({ item }) => listItem(item),\n      onSelect: (selected) => {\n        if (selected.type === 'livetranslate') {\n          toggleInlineEdit();\n        } else {\n          const url = `/${selected.key}${path}${\n          path.match('document') ? '' : location.search\n          }`;\n          I18NMenu.reload(url);\n        }\n      } }),\n\n\n    i18nmode && /*#__PURE__*/\n    _jsx(\"div\", { className: \"menuNav-language\" }, void 0, /*#__PURE__*/\n    _jsx(\"button\", {\n      className: \"singleItem\",\n      type: \"button\",\n      onClick: toggleInlineEdit,\n      \"aria-label\": t('System', 'Turn off inline translation', null, false) }, void 0, /*#__PURE__*/\n\n    _jsx(\"div\", { className: \"live-translate\" }, void 0, /*#__PURE__*/\n    _jsx(Icon, { icon: \"circle\", className: i18nmode ? 'live-on' : 'live-off' }))), /*#__PURE__*/\n\n\n    _jsx(\"span\", { className: \"singleItem\" }, void 0, /*#__PURE__*/\n    _jsx(Translate, {}, void 0, \"Live translate\")))) : /*#__PURE__*/\n\n\n\n\n\n    _jsx(\"div\", { className: \"no-i18nmenu\" });\n\n  }}\n\n\nI18NMenu.defaultProps = {\n  locale: null };\n\n\n\n\n\n\n\n\n\n\n\nfunction mapDispatchToProps(dispatch) {\n  return bindActionCreators({ toggleInlineEdit: actions.toggleInlineEdit }, dispatch);\n}\n\nexport function mapStateToProps(state) {\n  return {\n    languages: state.settings.collection.get('languages'),\n    i18nmode: state.inlineEdit.get('inlineEdit'),\n    locale: state.locale,\n    user: state.user };\n\n}\n\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(I18NMenu));","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\n\nexport class I18N extends Component {\n  render() {\n    const dictionary = this.props.dictionaries.toJS().find((d) => d.locale === this.props.locale) || {\n      values: {} };\n\n    let text = this.props.children;\n    text = dictionary.values[text] || text;\n    return /*#__PURE__*/_jsx(\"span\", {}, void 0, text);\n  }}\n\n\n\n\n\n\n\n\nconst mapStateToProps = ({ locale, dictionaries }) => ({ locale, dictionaries });\n\nexport default connect(mapStateToProps)(I18N);","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport { actions } from \"./..\";\n\nexport class Translate extends Component {\n  static resetCachedTranslation() {\n    Translate.translation = null;\n  }\n\n  constructor(props) {\n    super(props);\n    this.onClick = this.onClick.bind(this);\n  }\n\n  onClick(e) {\n    if (this.props.i18nmode) {\n      e.stopPropagation();\n      e.preventDefault();\n      this.props.edit(this.props.context, this.props.translationKey);\n    }\n  }\n\n  render() {\n    return /*#__PURE__*/(\n      _jsx(\"span\", {\n        onClick: this.onClick,\n        className: this.props.i18nmode ? 'translation active' : 'translation' }, void 0,\n\n      this.props.children));\n\n\n  }}\n\n\nTranslate.defaultProps = {\n  i18nmode: false,\n  context: 'System',\n  edit: false,\n  translationKey: '' };\n\n\n\n\n\n\n\n\n\n\nexport const mapStateToProps = (state, props) => {\n  if (!Translate.translation || Translate.translation.locale !== state.locale) {\n    const translations = state.translations.toJS();\n    Translate.translation = translations.find((t) => t.locale === state.locale) || { contexts: [] };\n  }\n  const _ctx = props.context || 'System';\n  const key = props.translationKey || props.children;\n  const context = Translate.translation.contexts.find((ctx) => ctx.id === _ctx) || { values: {} };\n  const canEditThisValue = _ctx === 'System' || !!context.values[props.children];\n  return {\n    translationKey: key,\n    children: context.values[key] || props.children,\n    i18nmode: state.inlineEdit.get('inlineEdit') && canEditThisValue };\n\n};\n\nfunction mapDispatchToProps(dispatch) {\n  return bindActionCreators({ edit: actions.inlineEditTranslation }, dispatch);\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Translate);","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport { bindActionCreators } from 'redux';\nimport { Form, Field } from 'react-redux-form';\nimport { connect } from 'react-redux';\nimport { actions, Translate, t } from \"./..\";\nimport Modal from \"../../Layout/Modal\";\nimport { FormGroup } from \"../../Forms\";\n\nexport class TranslateForm extends Component {\n  constructor(props) {\n    super(props);\n    this.submit = this.submit.bind(this);\n    this.cancel = this.cancel.bind(this);\n  }\n\n  submit(values) {\n    let translations = this.props.translations.toJS();\n    translations = translations.map((translation) => {\n      const { locale } = translation;\n      const context = translation.contexts.find((c) => c.id === this.props.context);\n      context.values[this.props.value] = values[locale];\n      translation.contexts = [context];\n      return translation;\n    });\n    this.props.saveTranslations(translations);\n    this.props.close();\n  }\n\n  cancel() {\n    this.props.close();\n  }\n\n  render() {\n    const translations = this.props.translations.toJS();\n    const languages = translations.map((translation) => translation.locale);\n\n    return /*#__PURE__*/(\n      _jsx(Modal, { isOpen: this.props.isOpen, type: \"info\" }, void 0, /*#__PURE__*/\n      _jsx(Modal.Body, {}, void 0, /*#__PURE__*/\n      _jsx(\"h4\", {}, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Translate\")), /*#__PURE__*/\n\n      _jsx(Form, { model: \"inlineEditModel\", onSubmit: this.submit, id: \"inlineEdit\" }, void 0,\n      languages.map((language) => /*#__PURE__*/\n      _jsx(FormGroup, { model: `.${language}` }, language, /*#__PURE__*/\n      _jsx(Field, { model: `.${language}` }, void 0, /*#__PURE__*/\n      _jsx(\"label\", { className: \"form-group-label\", htmlFor: language }, void 0,\n      language, /*#__PURE__*/\n      _jsx(\"input\", { id: language, className: \"form-control\" }))))))), /*#__PURE__*/\n\n\n\n\n\n\n\n      _jsx(Modal.Footer, {}, void 0, /*#__PURE__*/\n      _jsx(\"button\", { type: \"button\", className: \"btn btn-default cancel-button\", onClick: this.cancel }, void 0,\n      t('System', 'Cancel', null, false)), /*#__PURE__*/\n\n      _jsx(\"button\", { type: \"submit\", form: \"inlineEdit\", className: \"btn confirm-button btn-primary\" }, void 0,\n      t('System', 'Submit', null, false)))));\n\n\n\n\n  }}\n\n\nTranslateForm.defaultProps = {\n  isOpen: false };\n\n\n\n\n\n\n\n\n\n\n\nexport function mapStateToProps(state) {\n  return {\n    translations: state.translations,\n    isOpen: state.inlineEdit.get('showInlineEditForm'),\n    context: state.inlineEdit.get('context'),\n    value: state.inlineEdit.get('key') };\n\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return bindActionCreators(\n  { saveTranslations: actions.saveTranslations, close: actions.closeInlineEditTranslation },\n  dispatch);\n\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(TranslateForm);","import * as Cookie from 'tiny-cookie';\nimport { isClient } from \"../utils\";\n\nconst languageInLanguages = (languages, locale) => Boolean(languages.find((l) => l.key === locale));\nconst getURLLocale = (locale, languages = []) =>\nlanguageInLanguages(languages, locale) ? locale : null;\nconst getCookieLocale = (cookie, languages) =>\ncookie.locale && languageInLanguages(languages, cookie.locale) ? cookie.locale : null;\nconst getDefaultLocale = (languages) => (languages.find((language) => language.default) || {}).key;\n\nconst I18NUtils = {\n  getLocale(urlLanguage, languages, cookie = {}) {\n    return (\n      getURLLocale(urlLanguage, languages) ||\n      getCookieLocale(cookie, languages) ||\n      getDefaultLocale(languages));\n\n  },\n\n  saveLocale: (locale) => {\n    if (isClient) {\n      Cookie.set('locale', locale, { expires: 365 * 10 });\n    }\n  } };\n\n\nexport default I18NUtils;","import api from \"../utils/api\";\n\nexport default {\n  get(requestParams) {\n    return api.get('translations', requestParams).then((response) => response.json.rows);\n  },\n\n  save(requestParams) {\n    return api.post('translations', requestParams).then((response) => response.json);\n  },\n\n  addEntry(requestParams) {\n    return api.post('translations/addentry', requestParams).then((response) => response.json);\n  },\n\n  addLanguage(requestParams) {\n    return api.post('translations/languages', requestParams).then((response) => response.json);\n  },\n\n  deleteLanguage(requestParams) {\n    return api.delete('translations/languages', requestParams).then((response) => response.json);\n  },\n\n  setDefaultLanguage(requestParams) {\n    return api.post('translations/setasdeafult', requestParams).then((response) => response.json);\n  } };","import { actions as formActions } from 'react-redux-form';\nimport * as notifications from \"../../Notifications/actions/notificationsActions\";\nimport { store } from \"../../store\";\nimport { RequestParams } from \"../../utils/RequestParams\";\n\nimport { httpRequest } from \"../../../shared/superagent\";\nimport t from \"../t\";\nimport I18NApi from \"../I18NApi\";\n\nexport function inlineEditTranslation(contextId, key) {\n  return (dispatch) => {\n    const state = store.getState();\n    const translations = state.translations.toJS();\n    const languages = translations.map((_t) => _t.locale);\n    const formData = languages.reduce((values, locale) => {\n      const translation = translations.find((_t) => _t.locale === locale);\n      const context = translation.contexts.find((c) => c.id === contextId);\n      values[locale] = context.values[key] || key; // eslint-disable-line no-param-reassign\n      return values;\n    }, {});\n\n    dispatch({ type: 'OPEN_INLINE_EDIT_FORM', context: contextId, key });\n    dispatch(formActions.load('inlineEditModel', formData));\n  };\n}\n\nexport function closeInlineEditTranslation() {\n  return (dispatch) => {\n    dispatch({ type: 'CLOSE_INLINE_EDIT_FORM' });\n    dispatch(formActions.reset('inlineEditModel'));\n  };\n}\n\nexport function toggleInlineEdit() {\n  return { type: 'TOGGLE_INLINE_EDIT' };\n}\n\nexport function saveTranslations(translations) {\n  return (dispatch) => {\n    Promise.all(translations.map((translation) => I18NApi.save(new RequestParams(translation)))).then(\n    () => {\n      notifications.notify(t('System', 'Translations saved', null, false), 'success')(dispatch);\n    });\n\n  };\n}\n\nexport function importTranslations(context, file) {\n  return async (dispatch) => {\n    try {\n      const headers = {\n        Accept: 'application/json',\n        'X-Requested-With': 'XMLHttpRequest' };\n\n      const fields = {\n        context };\n\n      const translations = await httpRequest('translations/import', fields, headers, file);\n      await dispatch(formActions.load('translationsForm', translations));\n      notifications.notify(t(context, 'Translations imported.', null, false), 'success')(dispatch);\n    } catch (e) {\n      notifications.notify(t(context, e.error, null, false), 'danger')(dispatch);\n    }\n  };\n}\n\nexport function editTranslations(translations) {\n  return (dispatch) => {\n    dispatch(formActions.load('translationsForm', translations));\n  };\n}\n\nexport function resetForm() {\n  return (dispatch) => {\n    dispatch(formActions.reset('translationsForm'));\n  };\n}\n\nexport function addLanguage(language) {\n  return (dispatch) =>\n  I18NApi.addLanguage(new RequestParams(language)).then(() => {\n    notifications.notify(t('System', 'New language added', null, false), 'success')(dispatch);\n  });\n}\n\nexport function deleteLanguage(key) {\n  return (dispatch) =>\n  I18NApi.deleteLanguage(new RequestParams({ key })).then(() => {\n    notifications.notify(t('System', 'Language deleted', null, false), 'success')(dispatch);\n  });\n}\n\nexport function setDefaultLanguage(key) {\n  return (dispatch) =>\n  I18NApi.setDefaultLanguage(new RequestParams({ key })).then(() => {\n    notifications.notify(\n    t('System', 'Default language change success', null, false),\n    'success')(\n    dispatch);\n  });\n}","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import { store } from \"../store\";\nimport React from 'react';\nimport translate, { getLocaleTranslation, getContext } from \"../../shared/translate\";\nimport { Translate } from '.';\n\nconst testingEnvironment = process.env.NODE_ENV === 'test';\n\nconst t = (contextId, key, _text, returnComponent = true) => {\n  if (!contextId) {\n    // eslint-disable-next-line no-console\n    console.warn(`You cannot translate \"${key}\", because context id is \"${contextId}\"`);\n  }\n\n  if (returnComponent && !testingEnvironment) {\n    return /*#__PURE__*/_jsx(Translate, { context: contextId }, void 0, key);\n  }\n\n  const text = _text || key;\n\n  if (!t.translation) {\n    const state = store.getState();\n    const translations = state.translations.toJS();\n    t.translation = getLocaleTranslation(translations, state.locale);\n  }\n\n  const context = getContext(t.translation, contextId);\n\n  return translate(context, key, text);\n};\n\nt.resetCachedTranslation = () => {\n  t.translation = null;\n};\n\nexport default t;","/** @format */\n\nexport function getLocaleTranslation(translations, locale) {\n  return translations.find((d) => d.locale === locale) || { contexts: [] };\n}\n\nexport function getContext(translation, contextId = '') {\n  return (\n    translation.contexts.find((ctx) => ctx.id.toString() === contextId.toString()) || { values: {} });\n\n}\n\nexport default function translate(context, key, text) {\n  return context.values[key] || text;\n}","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}function ownKeys(object, enumerableOnly) {var keys = Object.keys(object);if (Object.getOwnPropertySymbols) {var symbols = Object.getOwnPropertySymbols(object);enumerableOnly && (symbols = symbols.filter(function (sym) {return Object.getOwnPropertyDescriptor(object, sym).enumerable;})), keys.push.apply(keys, symbols);}return keys;}function _objectSpread(target) {for (var i = 1; i < arguments.length; i++) {var source = null != arguments[i] ? arguments[i] : {};i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {_defineProperty(target, key, source[key]);}) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));});}return target;}function _defineProperty(obj, key, value) {if (key in obj) {Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });} else {obj[key] = value;}return obj;}import PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport { wrapDispatch } from \"../../Multireducer\";\nimport { actions } from 'react-redux-form';\nimport { t } from \"../../I18N\";\nimport { Icon } from \"../../UI\";\nimport { DropdownList } from \"../../Forms\";\nimport { propertyTypes } from \"../../../shared/propertyTypes\";\n\nconst isSortableType = (type) =>\n[propertyTypes.text, propertyTypes.date, propertyTypes.numeric, propertyTypes.select].includes(\ntype);\n\n\nconst getMetadataSorts = (templates) =>\ntemplates.toJS().reduce((sorts, template) => {\n  template.properties.forEach((property) => {\n    const sortable =\n    property.filter && (\n    isSortableType(property.type) ||\n    property.inherit && isSortableType(property.inherit.type));\n\n    if (sortable && !sorts.find((s) => s.name === property.name)) {\n      const sortString = `metadata.${property.name}${property.inherit ? '.inheritedValue' : ''}`;\n      sorts.push({\n        label: property.label,\n        name: property.name,\n        value: sortString,\n        type: property.type,\n        context: template._id });\n\n    }\n  });\n  return sorts;\n}, []);\n\nclass SortButtons extends Component {\n  constructor(props) {\n    super(props);\n    this.changeOrder = this.changeOrder.bind(this);\n  }\n\n  changeOrder() {\n    const { sort, treatAs } = this.props.search;\n    this.sort(sort, treatAs, this.props.search.order === 'asc' ? 'desc' : 'asc');\n  }\n\n  sort(property, defaultTreatAs, selectedSort) {\n    const treatAs = defaultTreatAs;\n    let order = selectedSort;\n\n    if (treatAs && !selectedSort) {\n      order = treatAs === 'string' ? 'asc' : 'desc';\n    }\n\n    const sort = { sort: property, order, treatAs };\n\n    this.props.merge(this.props.stateProperty, sort);\n\n    // TEST!!!\n    const filters = _objectSpread(_objectSpread(_objectSpread({}, this.props.search), sort), {}, { userSelectedSorting: true });\n    // -------\n    delete filters.treatAs;\n\n    if (this.props.sortCallback) {\n      this.props.sortCallback({ search: filters }, this.props.storeKey);\n    }\n  }\n\n  validateSearch() {\n    const { search } = this.props;\n    const _search = _objectSpread({}, search);\n    if (_search.sort === '_score' && !_search.searchTerm) {\n      _search.sort = 'creationDate';\n      _search.order = 'desc';\n    }\n    return _search;\n  }\n\n  render() {\n    const { templates } = this.props;\n    const search = this.validateSearch();\n    const metadataSorts = getMetadataSorts(templates);\n    const commonSorts = [\n    { label: 'Title', value: 'title', type: 'text', context: 'System' },\n    { label: 'Date added', value: 'creationDate', type: 'number', context: 'System' },\n    { label: 'Date modified', value: 'editDate', type: 'number', context: 'System' }];\n\n    if (search.searchTerm) {\n      commonSorts.push({\n        label: 'Search relevance',\n        value: '_score',\n        type: 'number',\n        context: 'System' });\n\n    }\n    const sortOptions = [...commonSorts, ...metadataSorts].map((option) => _objectSpread(_objectSpread({},\n    option), {}, {\n      label: t(option.context, option.label, undefined, false) }));\n\n\n    return /*#__PURE__*/(\n      _jsx(\"div\", { className: \"sort-buttons\" }, void 0, /*#__PURE__*/\n      _jsx(DropdownList, {\n        className: \"sort-dropdown\",\n        value: search.sort,\n        data: sortOptions,\n        valueField: \"value\",\n        textField: \"label\",\n        onChange: (selected) =>\n        this.sort(\n        selected.value,\n        selected.type === 'text' || selected.type === 'select' ? 'string' : 'number') }), /*#__PURE__*/\n\n\n\n      _jsx(\"button\", {\n        type: \"button\",\n        disabled: search.sort === '_score',\n        className: `sorting-toggle ${search.sort === '_score' && 'disabled'}`,\n        onClick: this.changeOrder }, void 0, /*#__PURE__*/\n\n      _jsx(Icon, {\n        icon: search.order === 'asc' && search.sort !== '_score' ? 'arrow-up' : 'arrow-down' }))));\n\n\n\n\n  }}\n\n\n\n\n\n\n\n\n\n\n\n\nfunction mapStateToProps(state, ownProps) {\n  let { templates } = state;\n  const stateProperty = ownProps.stateProperty ?\n  ownProps.stateProperty :\n  `${ownProps.storeKey}.search`;\n\n  if (ownProps.selectedTemplates && ownProps.selectedTemplates.count()) {\n    templates = templates.filter((i) => ownProps.selectedTemplates.includes(i.get('_id')));\n  }\n\n  const search = stateProperty.\n  split(/[.,/]/).\n  reduce(\n  (memo, property) => Object.keys(memo).indexOf(property) !== -1 ? memo[property] : null,\n  state);\n\n  return { stateProperty, search, templates };\n}\n\nfunction mapDispatchToProps(dispatch, props) {\n  return bindActionCreators({ merge: actions.merge }, wrapDispatch(dispatch, props.storeKey));\n}\n\nexport { SortButtons, mapStateToProps };\nexport default connect(mapStateToProps, mapDispatchToProps)(SortButtons);","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import React from 'react';\nimport { Translate } from \"../I18N\";\n\n\n\n\n\n\n\n\n\nexport const DocumentCounter = (props) => {\n  const {\n    totalConnectionsCount,\n    selectedEntitiesCount,\n    entityListCount,\n    entityTotal,\n    hitsTotalRelation } =\n  props;\n  const totalEntitiesValue = /*#__PURE__*/_jsx(\"b\", {}, void 0, \" \", `${entityTotal}${hitsTotalRelation === 'gte' ? '+' : ''}`, \" \");\n  const entityCounter = /*#__PURE__*/\n  React.createElement(React.Fragment, null,\n  selectedEntitiesCount > 0 && /*#__PURE__*/\n  React.createElement(React.Fragment, null, /*#__PURE__*/\n  _jsx(\"b\", {}, void 0, \" \", selectedEntitiesCount, \" \"), \" \", /*#__PURE__*/_jsx(Translate, {}, void 0, \"selected of\")), /*#__PURE__*/\n\n\n  _jsx(\"b\", {}, void 0, \" \", entityListCount, \" \"), \" \", /*#__PURE__*/_jsx(Translate, {}, void 0, \"shown of\"),\n  totalEntitiesValue, /*#__PURE__*/\n  _jsx(Translate, {}, void 0, \"entities\"));\n\n\n  const connectionsCounter = /*#__PURE__*/\n  React.createElement(React.Fragment, null, /*#__PURE__*/\n  _jsx(\"b\", {}, void 0, totalConnectionsCount, \" \"), /*#__PURE__*/\n  _jsx(Translate, {}, void 0, \"connections\"), \", \", /*#__PURE__*/_jsx(\"b\", {}, void 0, totalEntitiesValue, \" \"), /*#__PURE__*/\n  _jsx(Translate, {}, void 0, \"entities\"));\n\n\n\n  return /*#__PURE__*/_jsx(\"span\", {}, void 0, totalConnectionsCount === undefined ? entityCounter : connectionsCounter);\n};","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import React, { Component } from 'react';\nimport { Icon } from \"../../UI\";\nimport { Translate } from \"../../I18N\";\n\nexport default class Welcome extends Component {\n  render() {\n    return /*#__PURE__*/(\n      _jsx(\"div\", { className: \"blank-state\" }, void 0, /*#__PURE__*/\n      _jsx(Icon, { icon: \"cog\" }), /*#__PURE__*/\n      _jsx(\"h4\", {}, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Welcome to Uwazi\")), /*#__PURE__*/\n\n      _jsx(\"a\", { href: \"https://uwazi.readthedocs.io/en/latest/\", target: \"_blank\", rel: \"noreferrer\" }, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Learn more\"))));\n\n\n\n  }}","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import React from 'react';\nimport { connect } from 'react-redux';\n\nimport Doc from \"../Library/components/Doc\";\n\nimport { RowList } from \"./Lists\";\n\n\n\n\nclass TilesViewerComponent extends React.Component {\n  render() {\n    return /*#__PURE__*/(\n      _jsx(RowList, { zoomLevel: this.props.rowListZoomLevel }, void 0,\n      this.props.documents.get('rows').map((doc, index) => /*#__PURE__*/\n      _jsx(Doc, {\n        doc: doc,\n        storeKey: this.props.storeKey,\n\n        onClick: this.props.clickOnDocument,\n        onSnippetClick: this.props.onSnippetClick,\n        deleteConnection: this.props.deleteConnection,\n        searchParams: this.props.search }, index))));\n\n\n\n\n  }}\n\n\nconst mapStateToProps = (state, props) => ({\n  documents: state[props.storeKey].documents,\n  search: state[props.storeKey].search });\n\n\nexport const TilesViewer = connect(mapStateToProps)(TilesViewerComponent);","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}function ownKeys(object, enumerableOnly) {var keys = Object.keys(object);if (Object.getOwnPropertySymbols) {var symbols = Object.getOwnPropertySymbols(object);enumerableOnly && (symbols = symbols.filter(function (sym) {return Object.getOwnPropertyDescriptor(object, sym).enumerable;})), keys.push.apply(keys, symbols);}return keys;}function _objectSpread(target) {for (var i = 1; i < arguments.length; i++) {var source = null != arguments[i] ? arguments[i] : {};i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {_defineProperty(target, key, source[key]);}) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));});}return target;}function _defineProperty(obj, key, value) {if (key in obj) {Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });} else {obj[key] = value;}return obj;} /* eslint-disable max-lines */\nimport PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport { Link, withRouter } from 'react-router';\nimport { toUrlParams } from \"../../shared/JSONRequest\";\nimport rison from 'rison-node';\nimport SearchBar from \"../Library/components/SearchBar\";\nimport SortButtons from \"../Library/components/SortButtons\";\nimport Loader from \"../components/Elements/Loader\";\nimport Footer from \"../App/Footer\";\nimport { NeedAuthorization } from \"../Auth\";\nimport { t, Translate } from \"../I18N\";\nimport { DocumentCounter } from \"./DocumentCounter\";\nimport { Icon } from \"../UI\";\nimport Welcome from \"./components/Welcome\";\nimport { TilesViewer } from \"./TilesViewer\";\nimport blankState from \"../Library/helpers/blankState\";\n\nclass DocumentsList extends Component {\n  constructor(props, context) {\n    super(props, context);\n    this.state = { loading: false };\n    this.clickOnDocument = this.clickOnDocument.bind(this);\n    this.selectAllDocuments = this.selectAllDocuments.bind(this);\n    this.loadNextGroupOfEntities = this.loadNextGroupOfEntities.bind(this);\n  }\n\n  componentWillReceiveProps() {\n    this.setState({ loading: false });\n  }\n\n  loadMoreDocuments(amount, from) {\n    this.setState({ loading: true });\n    this.props.loadMoreDocuments(this.props.storeKey, amount, from);\n  }\n\n  selectAllDocuments() {\n    if (this.props.selectAllDocuments) {\n      this.props.selectAllDocuments.apply(this);\n    }\n  }\n\n  clickOnDocument(...args) {\n    if (this.props.clickOnDocument) {\n      this.props.clickOnDocument.apply(this, args);\n    }\n  }\n\n  loadNextGroupOfEntities() {\n    const from = this.props.documents.get('rows').size;\n    const DEFAULT_PAGE_SIZE = 30;\n    if (from) {\n      this.loadMoreDocuments(DEFAULT_PAGE_SIZE, from);\n    }\n  }\n\n  loadMoreButton(amount) {\n    const query = _objectSpread({}, this.props.location.query);\n    const q = query.q ? rison.decode(query.q) : {};\n    const from = this.props.documents.get('rows').size;\n    q.from = from;\n    q.limit = amount;\n    query.q = rison.encode(q);\n    const url = `${this.props.location.pathname}${toUrlParams(query)}`;\n    return /*#__PURE__*/(\n      _jsx(Link, {\n        to: url,\n        className: \"btn btn-default btn-load-more\",\n        onClick: (e) => {\n          e.preventDefault();\n          this.loadMoreDocuments(amount, from);\n        } }, void 0,\n\n      amount, \" \", t('System', 'x more')));\n\n\n  }\n\n  render() {\n    const {\n      documents,\n      connections,\n      GraphView,\n      view,\n      searchCentered,\n      hideFooter,\n      connectionsGroups,\n      LoadMoreButton,\n      rowListZoomLevel,\n      CollectionViewer } =\n    this.props;\n\n    const totalConnections = connections ?\n    connectionsGroups.reduce(\n    (total, g) =>\n    total +\n    g.get('templates').reduce((count, template) => count + template.get('count'), 0),\n    0) :\n\n    undefined;\n\n    const counter = /*#__PURE__*/\n    _jsx(DocumentCounter, {\n      selectedEntitiesCount: this.props.selectedDocuments.size,\n      entityListCount: this.props.documents.get('rows').size,\n      entityTotal: documents.get('totalRows'),\n      hitsTotalRelation: documents.get('relation'),\n      totalConnectionsCount: totalConnections });\n\n\n\n    const Search = this.props.SearchBar;\n    const ActionButtons = this.props.ActionButtons ? /*#__PURE__*/\n    _jsx(\"div\", { className: \"search-list-actions\" }, void 0, /*#__PURE__*/\n    _jsx(this.props.ActionButtons, {})) :\n\n    null;\n    const FooterComponent = !hideFooter ? /*#__PURE__*/_jsx(Footer, {}) : null;\n\n    return /*#__PURE__*/(\n      _jsx(\"div\", { className: \"documents-list\" }, void 0, /*#__PURE__*/\n      _jsx(\"div\", { className: \"main-wrapper\" }, void 0, /*#__PURE__*/\n      _jsx(\"div\", { className: `search-list ${searchCentered ? 'centered' : ''}` }, void 0,\n      ActionButtons, \" \", Search && /*#__PURE__*/_jsx(Search, { storeKey: this.props.storeKey })), /*#__PURE__*/\n\n      _jsx(\"div\", { className: `sort-by ${searchCentered ? 'centered' : ''}` }, void 0, /*#__PURE__*/\n      _jsx(\"span\", { className: \"documents-counter-sort\" }, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"sorted by\")), /*#__PURE__*/\n\n      _jsx(SortButtons, {\n        sortCallback: this.props.searchDocuments,\n        selectedTemplates: this.props.filters.get('documentTypes'),\n        stateProperty: this.props.sortButtonsStateProperty,\n        storeKey: this.props.storeKey }), /*#__PURE__*/\n\n      _jsx(NeedAuthorization, {}, void 0, /*#__PURE__*/\n      _jsx(\"div\", { className: \"select-all-documents\" }, void 0, /*#__PURE__*/\n      _jsx(\"button\", {\n        type: \"button\",\n        className: \"btn btn-default btn-xs\",\n        onClick: this.selectAllDocuments }, void 0, /*#__PURE__*/\n\n      _jsx(Translate, {}, void 0, \"Select all\")))), /*#__PURE__*/\n\n\n\n      _jsx(\"div\", { className: \"documents-counter\" }, void 0, /*#__PURE__*/\n      _jsx(\"span\", { className: \"documents-counter-label\" }, void 0, counter))),\n\n\n      blankState() && /*#__PURE__*/_jsx(Welcome, {}),\n\n      (() => {\n        if (view !== 'graph') {\n          return /*#__PURE__*/(\n            React.createElement(CollectionViewer, {\n\n              rowListZoomLevel,\n              storeKey: this.props.storeKey,\n              clickOnDocument: this.clickOnDocument,\n              onSnippetClick: this.props.onSnippetClick,\n              deleteConnection: this.props.deleteConnection,\n              loadNextGroupOfEntities: this.loadNextGroupOfEntities }));\n\n\n\n        }\n        if (view === 'graph') {\n          return /*#__PURE__*/_jsx(GraphView, { clickOnDocument: this.clickOnDocument });\n        }\n        return null;\n      })(), /*#__PURE__*/\n\n      _jsx(\"div\", { className: \"row\" }, void 0,\n      (() => {\n        if (view !== 'graph') {\n          return /*#__PURE__*/_jsx(\"p\", { className: \"col-sm-12 text-center documents-counter\" }, void 0, counter);\n        }\n        return null;\n      })(),\n      (() => {\n        if (LoadMoreButton) {\n          return /*#__PURE__*/_jsx(LoadMoreButton, {});\n        }\n        if (documents.get('rows').size < documents.get('totalRows') && !this.state.loading) {\n          return /*#__PURE__*/(\n            _jsx(\"div\", { className: \"col-sm-12 text-center\" }, void 0,\n            this.loadMoreButton(30), \" \", this.loadMoreButton(300)));\n\n\n        }\n        if (this.state.loading) {\n          return /*#__PURE__*/_jsx(Loader, {});\n        }\n        return null;\n      })(), /*#__PURE__*/\n      _jsx(NeedAuthorization, {}, void 0, /*#__PURE__*/\n      _jsx(\"div\", { className: \"col-sm-12 force-ltr text-center protip\" }, void 0, /*#__PURE__*/\n      _jsx(Icon, { icon: \"lightbulb\" }), ' ', /*#__PURE__*/\n      _jsx(\"b\", {}, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"ProTip!\")), /*#__PURE__*/\n\n      _jsx(\"span\", {}, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Use\"), \"\\xA0\", /*#__PURE__*/\n      _jsx(\"span\", { className: \"protip-key\", \"no-translate\": true }, void 0, \"cmd\"), \"\\xA0 \", /*#__PURE__*/\n\n\n      _jsx(Translate, {}, void 0, \"or\"), ' ', /*#__PURE__*/\n      _jsx(\"span\", { className: \"protip-key\", \"no-translate\": true }, void 0, \"shift\"), \"\\xA0 \", /*#__PURE__*/\n\n\n      _jsx(Translate, {}, void 0, \"+ click to select multiple cards.\"))))),\n\n\n\n\n      FooterComponent)));\n\n\n\n  }}\n\n\nDocumentsList.defaultProps = {\n  SearchBar,\n  rowListZoomLevel: 0,\n  CollectionViewer: TilesViewer,\n  selectedDocuments: {} };\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nexport { DocumentsList };\nexport default withRouter(DocumentsList);","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\n\nimport { Icon as UIIcon, CountryList } from \"../UI\";\n\nfunction getFaSize(size) {\n  switch (size) {\n    case 'xs':\n      return 'sm';\n    case 'sm':\n      return 'lg';\n    case 'md':\n      return '2x';\n    case 'lg':\n      return '2x';\n    case 'xlg':\n      return '2x';\n    default:\n      return 'sm';}\n\n}\n\nexport class Icon extends Component {\n  getJSData() {\n    const { data } = this.props;\n    let _data = data;\n\n    if (data && _data.toJS) {\n      _data = _data.toJS();\n    }\n\n    return _data;\n  }\n\n  getIcon(_data) {\n    const { className, size } = this.props;\n    let icon;\n\n    if (_data.type === 'Icons') {\n      icon = /*#__PURE__*/_jsx(UIIcon, { icon: `${_data._id}`, size: `${getFaSize(size)}` });\n    }\n\n    if (_data.type === 'Flags') {\n      const flagClassName = `flag-icon flag-icon-${CountryList.get(_data._id).cca2}`.toLowerCase();\n      const componentClassName = `${className} ${flagClassName}`;\n      icon = /*#__PURE__*/_jsx(\"span\", { className: componentClassName });\n    }\n\n    return icon;\n  }\n\n  render() {\n    const { className } = this.props;\n    let html = null;\n    const _data = this.getJSData();\n\n    if (_data && _data._id) {\n      const icon = this.getIcon(_data);\n      html = /*#__PURE__*/_jsx(\"span\", { className: className }, void 0, icon);\n    }\n\n    return html;\n  }}\n\n\nIcon.defaultProps = {\n  data: undefined,\n  className: undefined,\n  size: undefined };\n\n\n\n\n\n\n\n\nexport default connect()(Icon);","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };} // TEST!!! Entire file is untested\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { Icon } from \"../UI\";\n\nconst List = ({ children }) => /*#__PURE__*/_jsx(\"div\", { className: \"item-group\" }, void 0, children);\n\nconst ItemName = ({ children }) => /*#__PURE__*/\n_jsx(\"div\", { className: \"item-name\" }, void 0, /*#__PURE__*/\n_jsx(\"span\", {}, void 0, children));\n\n\n\nconst ItemFooter = ({ children, onClick }) => /*#__PURE__*/\n_jsx(\"div\", { className: \"item-actions\", onClick: onClick }, void 0,\nchildren);\n\n\n\nconst ProgressBar = ({ progress }) => {\n  let message = `${progress} % Completed`;\n  let icon = 'upload';\n  if (progress === 0 || progress === 100) {\n    message = 'Processing...';\n    icon = 'clock';\n  }\n  return /*#__PURE__*/(\n    _jsx(\"div\", { className: \"label-progress\" }, void 0, /*#__PURE__*/\n    _jsx(\"span\", { className: \"label label-info\" }, void 0, /*#__PURE__*/\n    _jsx(Icon, { icon: icon }), \" \", /*#__PURE__*/_jsx(\"span\", {}, void 0, message)), /*#__PURE__*/\n\n    _jsx(\"div\", { className: \"progress\" }, void 0, /*#__PURE__*/\n    _jsx(\"div\", {\n      className: \"progress-bar progress-bar-striped active\",\n      style: { width: `${progress}%` } }))));\n\n\n\n\n};\n\nconst ItemLabel = ({ children, status }) => {\n  let icon = '';\n  if (status === 'success') {\n    icon = /*#__PURE__*/_jsx(Icon, { icon: \"check\" });\n  }\n  if (status === 'danger') {\n    icon = /*#__PURE__*/_jsx(Icon, { icon: \"times\" });\n  }\n  if (status === 'warning') {\n    icon = /*#__PURE__*/_jsx(Icon, { icon: \"exclamation-triangle\" });\n  }\n  return /*#__PURE__*/(\n    _jsx(\"span\", { className: `label label-${status || 'default'}` }, void 0,\n    icon, \" \", /*#__PURE__*/_jsx(\"span\", {}, void 0, children)));\n\n\n};\n\nItemFooter.Label = ItemLabel;\nItemFooter.ProgressBar = ProgressBar;\n\nconst RowList = ({ children, zoomLevel }) => /*#__PURE__*/\n_jsx(\"div\", { className: `item-group item-group-zoom-${zoomLevel}` }, void 0, children);\n\n\nconst RowListItem = ({\n  children,\n  status,\n  onClick,\n  onMouseEnter,\n  onMouseLeave,\n  active,\n  className }) =>\n{\n  let activeClass = '';\n  if (active === true) {\n    activeClass = 'is-active';\n  }\n  if (active === false) {\n    activeClass = 'is-disabled';\n  }\n\n  return /*#__PURE__*/(\n    _jsx(\"div\", {\n      className: `${className} item item-status item-${status || 'default'} ${activeClass}`,\n      onClick: onClick,\n      onMouseEnter: onMouseEnter,\n      onMouseLeave: onMouseLeave }, void 0,\n\n    children));\n\n\n};\n\nRowList.Item = RowListItem;\n\n\n\n\n\nRowList.defaultProps = {\n  children: '',\n  zoomLevel: 0 };\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nexport { List, RowList, ItemFooter, ItemName };","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport ReactModal from 'react-modal';\nimport { Translate } from \"../I18N\";\n\nexport default class Modal extends Component {\n  render() {\n    const style = {\n      overlay: { zIndex: this.props.zIndex, backgroundColor: 'rgba(0, 0, 0, 0.75)' } };\n\n    const { type, className, children, isOpen } = this.props;\n    return /*#__PURE__*/(\n      _jsx(ReactModal, {\n        style: style,\n        className: `modal-dialog modal-${type} ${className}`,\n        isOpen: isOpen,\n        contentLabel: \"\",\n        ariaHideApp: false }, void 0, /*#__PURE__*/\n\n      _jsx(\"div\", { className: \"modal-content\" }, void 0, children)));\n\n\n  }}\n\n\n\n\n\n\n\n\n\n\n\nModal.defaultProps = {\n  isOpen: false,\n  type: 'success',\n  className: '',\n  zIndex: 100 };\n\nconst Body = ({ children }) => /*#__PURE__*/_jsx(\"div\", { className: \"modal-body\" }, void 0, children);\n\n\nconst Header = ({ children }) => /*#__PURE__*/_jsx(\"div\", { className: \"modal-header\" }, void 0, children);\n\n\nconst Footer = ({ children }) => /*#__PURE__*/_jsx(\"div\", { className: \"modal-footer\" }, void 0, children);\n\n\nconst Title = ({ children }) => /*#__PURE__*/_jsx(\"h4\", { className: \"modal-title\" }, void 0, children);\n\n\nconst Close = ({ onClick }) => /*#__PURE__*/\n_jsx(\"button\", { type: \"button\", className: \"close\", onClick: onClick }, void 0, /*#__PURE__*/\n_jsx(\"span\", { \"aria-hidden\": \"true\" }, void 0, \"\\xD7\"), /*#__PURE__*/\n_jsx(\"span\", { className: \"sr-only\" }, void 0, /*#__PURE__*/\n_jsx(Translate, {}, void 0, \"Close\")));\n\n\n\n\n\nModal.Body = Body;\nModal.Header = Header;\nModal.Footer = Footer;\nModal.Title = Title;\nModal.Close = Close;","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}function _extends() {_extends = Object.assign ? Object.assign.bind() : function (target) {for (var i = 1; i < arguments.length; i++) {var source = arguments[i];for (var key in source) {if (Object.prototype.hasOwnProperty.call(source, key)) {target[key] = source[key];}}}return target;};return _extends.apply(this, arguments);}import React, { Component } from 'react';\nimport { Icon } from \"../UI\";\nimport { t } from \"../I18N\";\nimport ModalTips from \"../App/ModalTips\";\nimport { SearchTipsContent } from \"../App/SearchTipsContent\";\n\nexport class SearchInput extends Component {\n  render() {\n    return /*#__PURE__*/(\n      _jsx(\"div\", { className: \"input-group\" }, void 0, /*#__PURE__*/\n      React.createElement(\"input\", _extends({ type: \"text\", className: \"form-control\", placeholder: \"Search\" }, this.props)), /*#__PURE__*/\n      _jsx(Icon, { icon: \"search\" }), /*#__PURE__*/\n      _jsx(ModalTips, {\n        label: t('System', 'Search Tips', null, false),\n        title: t('System', 'Narrow down your searches', null, false) }, void 0, /*#__PURE__*/\n\n      _jsx(SearchTipsContent, {}))));\n\n\n\n  }}\n\n\nexport default SearchInput;","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import PropTypes from 'prop-types';\nimport React, { Component } from 'react';\n\nexport class SidePanel extends Component {\n  render() {\n    const propsClass = this.props.className || '';\n    return /*#__PURE__*/(\n      _jsx(\"aside\", {\n        className: `side-panel ${propsClass} ${this.props.open ? 'is-active' : 'is-hidden'} ${\n        this.props.mode\n        } ` }, void 0,\n\n      this.props.children));\n\n\n  }}\n\n\n\n\n\n\n\n\n\nSidePanel.defaultProps = {\n  mode: '' };\n\n\nexport default SidePanel;","function ownKeys(object, enumerableOnly) {var keys = Object.keys(object);if (Object.getOwnPropertySymbols) {var symbols = Object.getOwnPropertySymbols(object);enumerableOnly && (symbols = symbols.filter(function (sym) {return Object.getOwnPropertyDescriptor(object, sym).enumerable;})), keys.push.apply(keys, symbols);}return keys;}function _objectSpread(target) {for (var i = 1; i < arguments.length; i++) {var source = null != arguments[i] ? arguments[i] : {};i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {_defineProperty(target, key, source[key]);}) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));});}return target;}function _defineProperty(obj, key, value) {if (key in obj) {Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });} else {obj[key] = value;}return obj;}var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { createSelector } from 'reselect';\nimport { COLORS } from \"../utils/colors\";\nimport t from \"../I18N/t\";\n\nconst getTemplateInfo = createSelector(\n(s) => s.templates,\n(_s, p) => p.template,\n(templates, currentTemplate) => {\n  let styleProps;\n  const name = templates.reduce((result, template, index) => {\n    if (template.get('_id') === currentTemplate) {\n      styleProps = template.get('color') ?\n      { className: 'btn-color', style: { backgroundColor: template.get('color') } } :\n      { className: `btn-color btn-color-${index % COLORS.length}` };\n      return template.get('name');\n    }\n    return result;\n  }, '');\n\n  return { name, styleProps };\n});\n\n\nexport class TemplateLabel extends Component {\n  render() {\n    const { name, template, className, style } = this.props;\n    return /*#__PURE__*/(\n      _jsx(\"span\", { className: className, style: style }, void 0,\n      template && t(template, name)));\n\n\n  }}\n\n\nTemplateLabel.defaultProps = {\n  className: 'btn-color',\n  style: undefined };\n\n\n\n\n\n\n\n\n\nconst mapStateToProps = (state, props) => {\n  const template = getTemplateInfo(state, props);\n  return _objectSpread({\n    name: template.name,\n    template: props.template },\n  template.styleProps);\n\n};\n\nexport default connect(mapStateToProps)(TemplateLabel);","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import PropTypes from 'prop-types';\nimport React from 'react';\nimport { Icon } from \"../UI\";\n\nconst Tip = ({ children, icon, position }) => {\n  const className = position ? `property-description-${position}` : 'property-description';\n  return /*#__PURE__*/(\n    _jsx(\"span\", { className: \"property-help\" }, void 0, /*#__PURE__*/\n    _jsx(Icon, { icon: icon }), /*#__PURE__*/\n    _jsx(\"div\", { className: className }, void 0, children)));\n\n\n};\n\nTip.defaultProps = {\n  icon: 'question-circle',\n  position: '' };\n\n\n\n\n\n\n\n\nexport default Tip;","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import PropTypes from 'prop-types';\nimport React from 'react';\nimport { Icon } from \"../UI\";\n\nconst Warning = ({ children, inline }) =>\ninline ? /*#__PURE__*/\n_jsx(\"div\", { className: \"alert alert-warning fade in\" }, void 0, /*#__PURE__*/\n_jsx(Icon, { icon: \"exclamation-triangle\" }),\nchildren) : /*#__PURE__*/\n\n\n_jsx(\"span\", { className: \"property-help\" }, void 0, /*#__PURE__*/\n_jsx(Icon, { icon: \"exclamation-triangle\" }), /*#__PURE__*/\n_jsx(\"div\", { className: \"property-description\" }, void 0, children));\n\n\n\nWarning.defaultProps = {\n  inline: false };\n\n\n\n\n\n\n\nexport default Warning;","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import React, { Component } from 'react';\nimport { Translate } from \"../../I18N\";\n\n\n\n\n\n\n\n\nconst getUwaziFavorites = () =>\nlocalStorage.getItem('uwaziFavorites') ? localStorage.getItem('uwaziFavorites').split(',') : [];\n\nclass FavoriteBanner extends Component {\n  constructor(props) {\n    super(props);\n    this.state = { selected: false };\n    this.toggleClick = this.toggleClick.bind(this);\n  }\n\n  componentDidMount() {\n    const { sharedId } = this.props;\n    const shouldBeSelected = getUwaziFavorites().includes(sharedId);\n    if (shouldBeSelected) {\n      this.setState({ selected: shouldBeSelected });\n    }\n  }\n\n  toggleClick(e) {\n    const { sharedId } = this.props;\n    const uwaziFavorites = getUwaziFavorites();\n    e.stopPropagation();\n    e.preventDefault();\n    if (uwaziFavorites.includes(sharedId)) {\n      const itemIndex = uwaziFavorites.indexOf(sharedId);\n      uwaziFavorites.splice(itemIndex, 1);\n    } else {\n      uwaziFavorites.push(sharedId);\n    }\n    localStorage.setItem('uwaziFavorites', uwaziFavorites.join(','));\n    this.setState({ selected: getUwaziFavorites().includes(sharedId) });\n  }\n\n  render() {\n    const { selected } = this.state;\n\n    return /*#__PURE__*/(\n      _jsx(\"button\", {\n        className: `btn favoriteBanner ${selected ? 'selected' : ''}`,\n        onClick: this.toggleClick,\n        type: \"button\",\n        suppressHydrationWarning: true }, void 0, /*#__PURE__*/\n\n      _jsx(\"span\", { className: \"tab-link-tooltip\" }, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Add / remove favorite\"))));\n\n\n\n  }}\n\n\nexport { FavoriteBanner };","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\n\nimport { language as getLanguage } from \"../../shared/languagesList\";\nimport t from \"../I18N/t\";\n\nexport class DocumentLanguage extends Component {\n  render() {\n    const { doc } = this.props;\n\n    if (!doc.get('file')) {\n      return null;\n    }\n\n    if (doc.get('file')) {\n      const fileLanguage = doc.getIn(['file', 'language']);\n      if (fileLanguage && fileLanguage !== 'other') {\n        if (this.props.locale === getLanguage(fileLanguage, 'ISO639_1')) {\n          return null;\n        }\n\n        return /*#__PURE__*/(\n          _jsx(\"span\", { className: \"item-type__documentLanguage\" }, void 0, /*#__PURE__*/\n          _jsx(\"span\", {}, void 0, getLanguage(fileLanguage, 'ISO639_1') || fileLanguage)));\n\n\n      }\n\n      return /*#__PURE__*/(\n        _jsx(\"span\", { className: \"item-type__documentLanguage\" }, void 0, /*#__PURE__*/\n        _jsx(\"span\", {}, void 0, t('System', 'Other'))));\n\n\n    }\n  }}\n\n\n\n\n\n\n\nexport const mapStateToProps = ({ locale }) => ({ locale });\n\nexport default connect(mapStateToProps)(DocumentLanguage);","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport React from 'react';\n\nimport SafeHTML from \"../utils/SafeHTML\";\nimport getFieldLabel from \"../Templates/utils/getFieldLabel\";\n\nimport t from \"../I18N/t\";\n\nexport const ItemSnippet = ({ snippets, onSnippetClick, template }) => {\n  let content;\n  let source;\n  if (snippets.metadata.length) {\n    source = getFieldLabel(snippets.metadata[0].field, template);\n    [content] = snippets.metadata[0].texts;\n  } else {\n    source = t('System', 'Document contents');\n    content = snippets.fullText[0].text;\n  }\n  /* eslint-disable react/no-danger */\n  const snippetElement = /*#__PURE__*/\n  React.createElement(React.Fragment, null, /*#__PURE__*/\n  _jsx(\"div\", { className: \"item-snippet-source\" }, void 0, source), /*#__PURE__*/\n  _jsx(\"div\", { onClick: onSnippetClick, className: \"item-snippet\" }, void 0, /*#__PURE__*/\n  _jsx(SafeHTML, {}, void 0, content)));\n\n\n\n\n  if (snippets.count === 1) {\n    return /*#__PURE__*/_jsx(\"div\", { className: \"item-snippet-wrapper\" }, void 0, snippetElement);\n  }\n\n  return /*#__PURE__*/(\n    _jsx(\"div\", { className: \"item-snippet-wrapper\" }, void 0,\n    snippetElement, /*#__PURE__*/\n    _jsx(\"div\", {}, void 0, /*#__PURE__*/\n    _jsx(\"a\", { onClick: onSnippetClick }, void 0, t('System', 'Show more')))));\n\n\n\n};\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nItemSnippet.defaultProps = {\n  onSnippetClick: undefined };\n\n\nexport const mapStateToProps = (state, ownProps) => ({\n  template: state.templates.find((tmpl) => tmpl.get('_id') === ownProps.doc.template) });\n\n\nexport default connect(mapStateToProps)(ItemSnippet);","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport React, { Component } from 'react';\n\nimport { FormatMetadata } from \"../Metadata\";\nimport prioritySortingCriteria from \"../utils/prioritySortingCriteria\";\n\nimport { FeatureToggle } from \"../components/Elements/FeatureToggle\";\nimport { FavoriteBanner } from \"../Favorites\";\nimport helpers from \"../Documents/helpers\";\nimport { Translate } from \"../I18N\";\nimport { RowList, ItemFooter } from \"./Lists\";\nimport DocumentLanguage from \"./DocumentLanguage\";\nimport Icon from \"./Icon\";\nimport Tip from \"./Tip\";\nimport ItemSnippet from \"./ItemSnippet\";\nimport TemplateLabel from \"./TemplateLabel\";\n\nexport class Item extends Component {\n  getSearchSnipett(doc) {\n    if (!doc.snippets || !doc.snippets.count) {\n      return false;\n    }\n    return /*#__PURE__*/(\n      _jsx(ItemSnippet, { onSnippetClick: this.props.onSnippetClick, snippets: doc.snippets, doc: doc }));\n\n  }\n\n  render() {\n    const { onClick, onMouseEnter, onMouseLeave, active, additionalIcon, additionalText, buttons } =\n    this.props;\n\n    const doc = helpers.performantDocToJSWithoutRelations(this.props.doc);\n    const Snippet = additionalText ? /*#__PURE__*/\n    _jsx(\"div\", { className: \"item-snippet-wrapper\" }, void 0, /*#__PURE__*/\n    _jsx(\"div\", { className: \"item-snippet\" }, void 0, additionalText)) :\n\n    null;\n    const baseClasName = `item-document template-${doc.template}`;\n    const itemClassName = `${baseClasName} ${this.props.className || ''}`;\n    const itemProps = {\n      className: itemClassName,\n      onClick,\n      onMouseEnter,\n      onMouseLeave,\n      active,\n      tabIndex: '1' };\n\n\n    return /*#__PURE__*/(\n      React.createElement(RowList.Item, itemProps,\n      this.props.itemHeader, /*#__PURE__*/\n      _jsx(\"div\", { className: \"item-info\" }, void 0, /*#__PURE__*/\n      _jsx(\"div\", { className: \"item-name\" }, void 0,\n      additionalIcon || '', /*#__PURE__*/\n      _jsx(Icon, { className: \"item-icon item-icon-center\", data: doc.icon }), /*#__PURE__*/\n      _jsx(\"span\", {}, void 0, doc[this.props.titleProperty]), /*#__PURE__*/\n      _jsx(DocumentLanguage, { doc: this.props.doc })),\n\n      Snippet,\n      this.getSearchSnipett(doc)), /*#__PURE__*/\n\n      _jsx(\"div\", { className: \"item-metadata\" }, void 0, /*#__PURE__*/\n      _jsx(FormatMetadata, {\n        entity: this.props.noMetadata ? {} : doc,\n        sortedProperty: this.props.search.sort,\n        additionalMetadata: this.props.additionalMetadata,\n        renderLabel: (prop, label) => !prop.noLabel && label })), /*#__PURE__*/\n\n\n      _jsx(ItemFooter, {}, void 0, /*#__PURE__*/\n      React.createElement(React.Fragment, null,\n      doc.template ? /*#__PURE__*/_jsx(TemplateLabel, { template: doc.template }) : false,\n      doc.published ?\n      '' : /*#__PURE__*/\n\n      _jsx(Tip, { icon: \"lock\" }, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"This entity is restricted from public view.\"))),\n\n\n\n      this.props.labels,\n      buttons), /*#__PURE__*/\n\n      _jsx(FeatureToggle, { feature: \"favorites\" }, void 0, /*#__PURE__*/\n      _jsx(\"div\", { className: \"item-favorite\" }, void 0, /*#__PURE__*/\n      _jsx(FavoriteBanner, { sharedId: doc.sharedId })))));\n\n\n\n\n  }}\n\n\nItem.defaultProps = {\n  onClick: () => {},\n  onMouseEnter: () => {},\n  onMouseLeave: () => {},\n  noMetadata: false };\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nItem.defaultProps = {\n  search: prioritySortingCriteria.get(),\n  titleProperty: 'title' };\n\n\nexport const mapStateToProps = ({ templates, thesauris }, ownProps) => {\n  const search = ownProps.searchParams;\n  const _templates = ownProps.templates || templates;\n  return { templates: _templates, thesauris, search };\n};\n\nexport default connect(mapStateToProps)(Item);","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport { Icon } from \"../UI\";\n\nconst getExtension = (filename) => filename.substr(filename.lastIndexOf('.') + 1);\n\nconst acceptedThumbnailExtensions = ['png', 'gif', 'jpg'];\n\nexport class Thumbnail extends Component {\n  render() {\n    const { file, alt } = this.props;\n\n    const extension = getExtension(file);\n    let thumbnail;\n\n    if (acceptedThumbnailExtensions.includes(extension)) {\n      thumbnail = /*#__PURE__*/_jsx(\"img\", { src: file, alt: alt });\n    }\n\n    if (extension === 'pdf') {\n      thumbnail = /*#__PURE__*/\n      _jsx(\"span\", { \"no-translate\": true }, void 0, /*#__PURE__*/\n      _jsx(Icon, { icon: \"file-pdf\" }), \" pdf\");\n\n\n    }\n\n    return /*#__PURE__*/_jsx(\"div\", { className: \"thumbnail\" }, void 0, thumbnail);\n  }}\n\n\nThumbnail.defaultProps = {\n  alt: '' };\n\n\n\n\n\n\n\nexport default Thumbnail;","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport { Translate } from \"../I18N\";\nimport Modal from \"./Modal\";\n\nclass ConfirmModal extends Component {\n  render() {\n    return /*#__PURE__*/(\n      _jsx(Modal, { isOpen: this.props.isOpen, type: this.props.type }, void 0, /*#__PURE__*/\n      _jsx(Modal.Body, {}, void 0, /*#__PURE__*/\n      _jsx(\"h4\", {}, void 0, this.props.title), /*#__PURE__*/\n      _jsx(\"p\", {}, void 0, this.props.message)), /*#__PURE__*/\n\n\n      _jsx(Modal.Footer, {}, void 0, /*#__PURE__*/\n      _jsx(\"button\", {\n        type: \"button\",\n        className: \"btn btn-default cancel-button\",\n        onClick: this.props.onCancel }, void 0, /*#__PURE__*/\n\n      _jsx(Translate, {}, void 0, \"Cancel\")), /*#__PURE__*/\n\n      _jsx(\"button\", {\n        type: \"button\",\n        className: `btn confirm-button btn-${this.props.type}`,\n        onClick: this.props.onAccept }, void 0, /*#__PURE__*/\n\n      _jsx(Translate, {}, void 0, \"Accept\")))));\n\n\n\n\n  }}\n\n\nConfirmModal.defaultProps = {\n  isOpen: true,\n  message: 'Are you sure you want to continue?',\n  title: 'Confirm action',\n  type: 'danger' };\n\n\n\n\n\n\n\n\n\n\n\nexport default ConfirmModal;","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import PropTypes from 'prop-types';\nimport React, { Component } from 'react';\n\nimport ConfirmModal from \"./ConfirmModal\";\n\nclass ConfirmButton extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      showModal: false };\n\n    this.openModal = this.openModal.bind(this);\n    this.onAccept = this.onAccept.bind(this);\n    this.closeModal = this.closeModal.bind(this);\n  }\n\n  onAccept() {\n    this.closeModal();\n    this.props.action();\n  }\n\n  closeModal() {\n    this.setState({ showModal: false });\n  }\n\n  openModal() {\n    this.setState({ showModal: true });\n  }\n\n  render() {\n    return /*#__PURE__*/(\n      React.createElement(React.Fragment, null, /*#__PURE__*/\n      _jsx(\"button\", { type: \"button\", className: this.props.className, onClick: this.openModal }, void 0,\n      this.props.children),\n\n      this.state.showModal && /*#__PURE__*/\n      _jsx(ConfirmModal, {\n        message: this.props.message,\n        title: this.props.title,\n        onAccept: this.onAccept,\n        onCancel: this.closeModal })));\n\n\n\n\n  }}\n\n\nConfirmButton.defaultProps = {\n  children: '',\n  message: 'Are you sure you want to continue?',\n  title: 'Confirm action',\n  className: '',\n  action: () => false };\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nexport default ConfirmButton;","const _excluded = [\"to\"],_excluded2 = [\"children\", \"location\", \"queryParams\"];function _extends() {_extends = Object.assign ? Object.assign.bind() : function (target) {for (var i = 1; i < arguments.length; i++) {var source = arguments[i];for (var key in source) {if (Object.prototype.hasOwnProperty.call(source, key)) {target[key] = source[key];}}}return target;};return _extends.apply(this, arguments);}function _objectWithoutProperties(source, excluded) {if (source == null) return {};var target = _objectWithoutPropertiesLoose(source, excluded);var key, i;if (Object.getOwnPropertySymbols) {var sourceSymbolKeys = Object.getOwnPropertySymbols(source);for (i = 0; i < sourceSymbolKeys.length; i++) {key = sourceSymbolKeys[i];if (excluded.indexOf(key) >= 0) continue;if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;target[key] = source[key];}}return target;}function _objectWithoutPropertiesLoose(source, excluded) {if (source == null) return {};var target = {};var sourceKeys = Object.keys(source);var key, i;for (i = 0; i < sourceKeys.length; i++) {key = sourceKeys[i];if (excluded.indexOf(key) >= 0) continue;target[key] = source[key];}return target;}function ownKeys(object, enumerableOnly) {var keys = Object.keys(object);if (Object.getOwnPropertySymbols) {var symbols = Object.getOwnPropertySymbols(object);enumerableOnly && (symbols = symbols.filter(function (sym) {return Object.getOwnPropertyDescriptor(object, sym).enumerable;})), keys.push.apply(keys, symbols);}return keys;}function _objectSpread(target) {for (var i = 1; i < arguments.length; i++) {var source = null != arguments[i] ? arguments[i] : {};i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {_defineProperty(target, key, source[key]);}) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));});}return target;}function _defineProperty(obj, key, value) {if (key in obj) {Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });} else {obj[key] = value;}return obj;}import { Link, withRouter } from 'react-router';\nimport PropTypes from 'prop-types';\nimport React from 'react';\n\nimport { toUrlParams } from \"../../shared/JSONRequest\";\n\nconst newParams = (oldQuery, newQuery) => {\n  const params = _objectSpread(_objectSpread({}, oldQuery), newQuery);\n  return Object.keys(params).reduce((memo, key) => {\n    if (params[key] !== '') {\n      return Object.assign(memo, { [key]: params[key] });\n    }\n    return memo;\n  }, {});\n};\n\nconst validProps = (props) => {\n  const { to } = props,valid = _objectWithoutProperties(props, _excluded);\n  return valid;\n};\n\nconst CurrentLocationLink = (_ref) => {let { children, location, queryParams } = _ref,otherProps = _objectWithoutProperties(_ref, _excluded2);return /*#__PURE__*/ (\n    // eslint-disable-next-line jsx-a11y/anchor-is-valid\n    React.createElement(Link, _extends({\n      to: `${location.pathname}${toUrlParams(newParams(location.query, queryParams))}` },\n    validProps(otherProps)),\n\n    children));};\n\n\n\nCurrentLocationLink.defaultProps = {\n  children: '',\n  queryParams: {} };\n\n\n\n\n\n\n\n\n\n\n\nexport { CurrentLocationLink };\n\nexport default withRouter(CurrentLocationLink);","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import PropTypes from 'prop-types';\nimport React from 'react';\n\nimport { Icon } from \"../UI\";\nimport { I18NLink, t } from \"../I18N\";\n\nconst BackButton = ({ to, className }) => /*#__PURE__*/\n_jsx(I18NLink, { to: to, className: `btn btn-default ${className}` }, void 0, /*#__PURE__*/\n_jsx(Icon, { icon: \"arrow-left\", directionAware: true }), /*#__PURE__*/\n_jsx(\"span\", { className: \"btn-label\" }, void 0, t('System', 'Back')));\n\n\n\nBackButton.defaultProps = {\n  to: '',\n  className: '' };\n\n\n\n\n\n\n\nexport default BackButton;","export const SET_DOCUMENTS = 'SET_DOCUMENTS';\nexport const ADD_DOCUMENTS = 'ADD_DOCUMENTS';\nexport const UNSET_DOCUMENTS = 'UNSET_DOCUMENTS';\nexport const UPDATE_DOCUMENT = 'LIBRARY/UPDATE_DOCUMENT';\nexport const UPDATE_DOCUMENTS = 'LIBRARY/UPDATE_DOCUMENTS';\nexport const UPDATE_DOCUMENTS_PUBLISHED = 'UPDATE_DOCUMENTS_PUBLISHED';\nexport const SET_LIBRARY_TEMPLATES = 'SET_LIBRARY_TEMPLATES';\nexport const ELEMENT_CREATED = 'ELEMENT_CREATED';\nexport const REMOVE_DOCUMENT = 'REMOVE_DOCUMENT';\nexport const REMOVE_DOCUMENTS = 'REMOVE_DOCUMENTS';\nexport const REMOVE_DOCUMENTS_SHAREDIDS = 'REMOVE_DOCUMENTS_SHAREDIDS';\nexport const UPDATE_SELECTED_ENTITIES = 'UPDATE_SELECTED_ENTITIES';\n//Search\nexport const SET_SEARCHTERM = 'SET_SEARCHTERM';\nexport const SET_PREVIEW_DOC = 'SET_PREVIEW_DOC';\nexport const SET_SUGGESTIONS = 'SET_SUGGESTIONS';\nexport const SHOW_SUGGESTIONS = 'SHOW_SUGGESTIONS';\nexport const HIDE_SUGGESTIONS = 'HIDE_SUGGESTIONS';\nexport const OVER_SUGGESTIONS = 'OVER_SUGGESTIONS';\n//Filters\nexport const SET_LIBRARY_FILTERS = 'SET_LIBRARY_FILTERS';\nexport const UPDATE_LIBRARY_FILTERS = 'UPDATE_LIBRARY_FILTERS';\nexport const INITIALIZE_FILTERS_FORM = 'INITIALIZE_FILTERS_FORM';\n//ui\nexport const SELECT_DOCUMENT = 'SELECT_DOCUMENT';\nexport const SELECT_SINGLE_DOCUMENT = 'SELECT_SINGLE_DOCUMENT';\nexport const SELECT_DOCUMENTS = 'SELECT_DOCUMENTS';\nexport const UNSELECT_DOCUMENT = 'UNSELECT_DOCUMENT';\nexport const UNSELECT_ALL_DOCUMENTS = 'UNSELECT_ALL_DOCUMENTS';\nexport const SHOW_FILTERS = 'SHOW_FILTERS';\nexport const HIDE_FILTERS = 'HIDE_FILTERS';\nexport const ENTER_LIBRARY = 'ENTER_LIBRARY';\nexport const ZOOM_IN = 'ZOOM_IN';\nexport const ZOOM_OUT = 'ZOOM_OUT';\nexport const SET_TABLE_VIEW_COLUMNS = 'SET_TABLE_VIEW_COLUMNS';\nexport const SET_TABLE_VIEW_COLUMN_HIDDEN = 'SET_TABLE_VIEW_COLUMN_HIDDEN';\nexport const SET_TABLE_VIEW_ALL_COLUMNS_HIDDEN = 'SET_TABLE_VIEW_ALL_COLUMNS_HIDDEN';","function ownKeys(object, enumerableOnly) {var keys = Object.keys(object);if (Object.getOwnPropertySymbols) {var symbols = Object.getOwnPropertySymbols(object);enumerableOnly && (symbols = symbols.filter(function (sym) {return Object.getOwnPropertyDescriptor(object, sym).enumerable;})), keys.push.apply(keys, symbols);}return keys;}function _objectSpread(target) {for (var i = 1; i < arguments.length; i++) {var source = null != arguments[i] ? arguments[i] : {};i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {_defineProperty(target, key, source[key]);}) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));});}return target;}function _defineProperty(obj, key, value) {if (key in obj) {Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });} else {obj[key] = value;}return obj;} /* eslint-disable max-lines */\nimport qs from 'qs';\nimport rison from 'rison-node';\nimport { actions as formActions } from 'react-redux-form';\nimport { browserHistory } from 'react-router';\nimport { store } from \"../../store\";\nimport * as types from \"./actionTypes\";\nimport { actions } from \"../../BasicReducer\";\nimport { documentsApi } from \"../../Documents\";\nimport { api as entitiesAPI } from \"../../Entities\";\nimport { notificationActions } from \"../../Notifications\";\nimport { RequestParams } from \"../../utils/RequestParams\";\nimport searchAPI from \"../../Search/SearchAPI\";\nimport referencesAPI from \"../../Viewer/referencesAPI\";\nimport { toUrlParams } from \"../../../shared/JSONRequest\";\nimport { selectedDocumentsChanged, maybeSaveQuickLabels } from \"./quickLabelActions\";\nimport { filterToQuery } from \"../helpers/publishedStatusFilter\";\nimport { saveEntityWithFiles } from \"./saveEntityWithFiles\";\n\nfunction enterLibrary() {\n  return { type: types.ENTER_LIBRARY };\n}\n\nfunction initializeFiltersForm(values = {}) {\n  return Object.assign(values, { type: types.INITIALIZE_FILTERS_FORM });\n}\n\nfunction selectDocument(_doc) {\n  return async (dispatch, getState) => {\n    const doc = _doc.toJS ? _doc.toJS() : _doc;\n    const showingSemanticSearch = getState().library.sidepanel.tab === 'semantic-search-results';\n    if (showingSemanticSearch && !doc.semanticSearch) {\n      dispatch(actions.set('library.sidepanel.tab', ''));\n    }\n    await dispatch(maybeSaveQuickLabels());\n    dispatch({ type: types.SELECT_DOCUMENT, doc });\n    dispatch(selectedDocumentsChanged());\n  };\n}\n\nfunction getAndSelectDocument(sharedId) {\n  return (dispatch) => {\n    entitiesAPI.get(new RequestParams({ sharedId })).then((entity) => {\n      dispatch({ type: types.SELECT_SINGLE_DOCUMENT, doc: entity[0] });\n    });\n  };\n}\n\nfunction selectDocuments(docs) {\n  return async (dispatch) => {\n    await dispatch(maybeSaveQuickLabels());\n    dispatch({ type: types.SELECT_DOCUMENTS, docs });\n    dispatch(selectedDocumentsChanged());\n  };\n}\n\nfunction unselectDocument(docId) {\n  return async (dispatch) => {\n    await dispatch(maybeSaveQuickLabels());\n    dispatch({ type: types.UNSELECT_DOCUMENT, docId });\n    dispatch(selectedDocumentsChanged());\n  };\n}\n\nfunction selectSingleDocument(doc) {\n  return async (dispatch) => {\n    await dispatch(maybeSaveQuickLabels());\n    dispatch({ type: types.SELECT_SINGLE_DOCUMENT, doc });\n    dispatch(selectedDocumentsChanged());\n  };\n}\n\nfunction unselectAllDocuments() {\n  return async (dispatch) => {\n    await dispatch(maybeSaveQuickLabels());\n    dispatch({ type: types.UNSELECT_ALL_DOCUMENTS });\n    dispatch(selectedDocumentsChanged());\n  };\n}\n\nfunction updateSelectedEntities(entities) {\n  return { type: types.UPDATE_SELECTED_ENTITIES, entities };\n}\n\nfunction showFilters() {\n  return { type: types.SHOW_FILTERS };\n}\n\nfunction hideFilters() {\n  return { type: types.HIDE_FILTERS };\n}\n\nfunction setDocuments(docs) {\n  return { type: types.SET_DOCUMENTS, documents: docs };\n}\n\nfunction addDocuments(docs) {\n  return { type: types.ADD_DOCUMENTS, documents: docs };\n}\n\nfunction unsetDocuments() {\n  return { type: types.UNSET_DOCUMENTS };\n}\n\nfunction setTemplates(templates, thesauris) {\n  return (dispatch) => {\n    dispatch({ type: types.SET_LIBRARY_TEMPLATES, templates, thesauris });\n  };\n}\n\nfunction setPreviewDoc(docId) {\n  return { type: types.SET_PREVIEW_DOC, docId };\n}\n\nfunction setSuggestions(suggestions) {\n  return { type: types.SET_SUGGESTIONS, suggestions };\n}\n\nfunction hideSuggestions() {\n  return { type: types.HIDE_SUGGESTIONS };\n}\n\nfunction showSuggestions() {\n  return { type: types.SHOW_SUGGESTIONS };\n}\n\nfunction setOverSuggestions(boolean) {\n  return { type: types.OVER_SUGGESTIONS, hover: boolean };\n}\n\nfunction zoomIn() {\n  return { type: types.ZOOM_IN };\n}\n\nfunction zoomOut() {\n  return { type: types.ZOOM_OUT };\n}\n\nfunction filterIsEmpty(value) {\n  if (value && value.values && !value.values.length) {\n    return true;\n  }\n\n  if (Array.isArray(value) && !value.length) {\n    return true;\n  }\n\n  if (typeof value === 'string' && !value) {\n    return true;\n  }\n\n  if (typeof value === 'object') {\n    const hasValue = Object.keys(value).reduce(\n    (result, key) => result || Boolean(value[key]),\n    false);\n\n    return !hasValue;\n  }\n\n  return false;\n}\n\nfunction processFilters(readOnlySearch, filters, limit, from) {\n  let search = _objectSpread({\n    filters: {} },\n  readOnlySearch);\n\n\n  if (search.publishedStatus) {\n    search = filterToQuery(search);\n  }\n\n  search.filters = {};\n\n  filters.properties.forEach((property) => {\n    if (!filterIsEmpty(readOnlySearch.filters[property.name]) && !property.filters) {\n      search.filters[property.name] = readOnlySearch.filters[property.name];\n    }\n\n    if (property.filters) {\n      const searchFilter = _objectSpread({}, readOnlySearch.filters[property.name]);\n      property.filters.forEach((filter) => {\n        if (filterIsEmpty(searchFilter[filter.name])) {\n          delete searchFilter[filter.name];\n        }\n      });\n\n      if (Object.keys(searchFilter).length) {\n        search.filters[property.name] = searchFilter;\n      }\n    }\n  });\n\n  search.types = filters.documentTypes;\n  search.limit = limit;\n  search.from = from;\n  return search;\n}\n\nfunction encodeSearch(_search, appendQ = true) {\n  const search = _objectSpread({}, _search);\n  Object.keys(search).forEach((key) => {\n    if (search[key] && search[key].length === 0) {\n      delete search[key];\n    }\n\n    if (typeof search[key] === 'object' && Object.keys(search[key]).length === 0) {\n      delete search[key];\n    }\n\n    if (search[key] === '') {\n      delete search[key];\n    }\n  });\n\n  if (search.searchTerm) {\n    search.searchTerm = `${encodeURIComponent(search.searchTerm).replace(/%20/g, ' ')}:`;\n  }\n\n  const encodedSearch = rison.encode(search).replace(/searchTerm:'([^:]+):'/, \"searchTerm:'$1'\");\n  return appendQ ? `?q=${encodedSearch}` : encodedSearch;\n}\n\nfunction setSearchInUrl(searchParams) {\n  const { pathname } = browserHistory.getCurrentLocation();\n  const path = `${pathname}/`.replace(/\\/\\//g, '/');\n  const query = browserHistory.getCurrentLocation().query || {};\n\n  query.q = encodeSearch(searchParams, false);\n\n  browserHistory.push(path + toUrlParams(query));\n}\n\nfunction searchDocuments(\n{ search = undefined, filters = undefined },\nstoreKey,\nlimit = 30,\nfrom = 0)\n{\n  return (dispatch, getState) => {\n    const state = getState()[storeKey];\n    const currentSearch = search || state.search;\n    let currentFilters = filters || state.filters;\n    currentFilters = currentFilters.toJS ? currentFilters.toJS() : currentFilters;\n\n    const searchParams = processFilters(currentSearch, currentFilters, limit, from);\n    searchParams.searchTerm = state.search.searchTerm;\n\n    const { query } = browserHistory.getCurrentLocation();\n    const currentSearchParams = rison.decode(decodeURIComponent(query.q || '()'));\n\n    if (searchParams.searchTerm && searchParams.searchTerm !== currentSearchParams.searchTerm) {\n      searchParams.sort = '_score';\n    }\n\n    if (currentSearch.userSelectedSorting) {\n      dispatch(actions.set(`${storeKey}.selectedSorting`, currentSearch));\n    }\n\n    searchParams.customFilters = currentSearch.customFilters;\n\n    setSearchInUrl(searchParams);\n  };\n}\n\nfunction elementCreated(doc) {\n  return { type: types.ELEMENT_CREATED, doc };\n}\n\nfunction updateEntity(updatedDoc) {\n  return { type: types.UPDATE_DOCUMENT, doc: updatedDoc };\n}\n\nfunction updateEntities(updatedDocs) {\n  return { type: types.UPDATE_DOCUMENTS, docs: updatedDocs };\n}\n\nfunction searchSnippets(searchString, sharedId, storeKey) {\n  const requestParams = new RequestParams(\n  qs.stringify({\n    filter: { sharedId, searchString },\n    fields: ['snippets'] }));\n\n\n\n  return (dispatch) =>\n  searchAPI.searchSnippets(requestParams).then(({ data }) => {\n    const snippets = data.length ? data[0].snippets : { total: 0, fullText: [], metadata: [] };\n    dispatch(actions.set(`${storeKey}.sidepanel.snippets`, snippets));\n    return snippets;\n  });\n}\n\nfunction saveDocument(doc, formKey) {\n  return async (dispatch) => {\n    const updatedDoc = await documentsApi.save(new RequestParams(doc));\n    dispatch(notificationActions.notify('Document updated', 'success'));\n    dispatch(formActions.reset(formKey));\n    dispatch(updateEntity(updatedDoc));\n    dispatch(actions.updateIn('library.markers', ['rows'], updatedDoc));\n    await dispatch(selectSingleDocument(updatedDoc));\n  };\n}\n\nfunction multipleUpdate(entities, values) {\n  return async (dispatch) => {\n    const ids = entities.map((entity) => entity.get('sharedId')).toJS();\n    const updatedDocs = await entitiesAPI.multipleUpdate(new RequestParams({ ids, values }));\n    dispatch(notificationActions.notify('Update success', 'success'));\n    dispatch(updateEntities(updatedDocs));\n  };\n}\n\nfunction saveEntity(entity, formModel) {\n  // eslint-disable-next-line max-statements\n  return async (dispatch) => {\n    const { entity: updatedDoc, errors } = await saveEntityWithFiles(entity, dispatch);\n    let message = '';\n\n    dispatch(formActions.reset(formModel));\n    await dispatch(unselectAllDocuments());\n    if (entity._id) {\n      message = 'Entity updated';\n      dispatch(updateEntity(updatedDoc));\n      dispatch(actions.updateIn('library.markers', ['rows'], updatedDoc));\n    } else {\n      message = 'Entity created';\n      dispatch(elementCreated(updatedDoc));\n    }\n    if (errors.length) {\n      message = `${message} with the following errors: ${JSON.stringify(errors, null, 2)}`;\n    }\n    await dispatch(notificationActions.notify(message, errors.length ? 'warning' : 'success'));\n    await dispatch(selectSingleDocument(updatedDoc));\n  };\n}\n\nfunction removeDocument(doc) {\n  return { type: types.REMOVE_DOCUMENT, doc };\n}\n\nfunction removeDocuments(docs) {\n  return { type: types.REMOVE_DOCUMENTS, docs };\n}\n\nfunction deleteDocument(doc) {\n  return async (dispatch) => {\n    await documentsApi.delete(new RequestParams({ sharedId: doc.sharedId }));\n    dispatch(notificationActions.notify('Document deleted', 'success'));\n    await dispatch(unselectAllDocuments());\n    dispatch(removeDocument(doc));\n  };\n}\n\nfunction deleteEntity(entity) {\n  return async (dispatch) => {\n    await entitiesAPI.delete(entity);\n    dispatch(notificationActions.notify('Entity deleted', 'success'));\n    await dispatch(unselectDocument(entity._id));\n    dispatch(removeDocument(entity));\n  };\n}\n\nfunction loadMoreDocuments(storeKey, amount, from) {\n  return (dispatch, getState) => {\n    const { search } = getState()[storeKey];\n    searchDocuments({ search }, storeKey, amount, from)(dispatch, getState);\n  };\n}\n\nfunction getSuggestions() {\n  return { type: 'GET_SUGGESTIONS' };\n}\n\nfunction getDocumentReferences(sharedId, fileId, storeKey) {\n  return (dispatch) =>\n  referencesAPI.\n  get(new RequestParams({ sharedId, file: fileId, onlyTextReferences: true })).\n  then((references) => {\n    dispatch(actions.set(`${storeKey}.sidepanel.references`, references));\n  });\n}\n\nfunction getAggregationSuggestions(storeKey, property, searchTerm) {\n  const state = store.getState()[storeKey];\n  const { search, filters } = state;\n\n  const query = processFilters(search, filters.toJS(), 0);\n  query.searchTerm = search.searchTerm;\n  if (storeKey === 'uploads') {\n    query.unpublished = true;\n  }\n  return searchAPI.getAggregationSuggestions(new RequestParams({ query, property, searchTerm }));\n}\n\nfunction setTableViewColumns(columns) {\n  return { type: types.SET_TABLE_VIEW_COLUMNS, columns };\n}\n\nfunction setTableViewColumnHidden(name, hidden) {\n  return {\n    type: types.SET_TABLE_VIEW_COLUMN_HIDDEN,\n    name,\n    hidden };\n\n}\n\nfunction setTableViewAllColumnsHidden(hidden) {\n  return {\n    type: types.SET_TABLE_VIEW_ALL_COLUMNS_HIDDEN,\n    hidden };\n\n}\n\nexport {\nenterLibrary,\ninitializeFiltersForm,\nselectDocument,\ngetAndSelectDocument,\nselectDocuments,\nunselectDocument,\nselectSingleDocument,\nunselectAllDocuments,\nupdateSelectedEntities,\nshowFilters,\nhideFilters,\nsetDocuments,\naddDocuments,\nunsetDocuments,\nsetTemplates,\nsetPreviewDoc,\nsetSuggestions,\nhideSuggestions,\nshowSuggestions,\nsetOverSuggestions,\nzoomIn,\nzoomOut,\nfilterIsEmpty,\nprocessFilters,\nencodeSearch,\nsearchDocuments,\nelementCreated,\nupdateEntity,\nupdateEntities,\nsearchSnippets,\nsaveDocument,\nmultipleUpdate,\nsaveEntity,\nremoveDocument,\nremoveDocuments,\ndeleteDocument,\ndeleteEntity,\nloadMoreDocuments,\ngetSuggestions,\ngetDocumentReferences,\ngetAggregationSuggestions,\nsetTableViewAllColumnsHidden,\nsetTableViewColumnHidden,\nsetTableViewColumns };","function ownKeys(object, enumerableOnly) {var keys = Object.keys(object);if (Object.getOwnPropertySymbols) {var symbols = Object.getOwnPropertySymbols(object);enumerableOnly && (symbols = symbols.filter(function (sym) {return Object.getOwnPropertyDescriptor(object, sym).enumerable;})), keys.push.apply(keys, symbols);}return keys;}function _objectSpread(target) {for (var i = 1; i < arguments.length; i++) {var source = null != arguments[i] ? arguments[i] : {};i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {_defineProperty(target, key, source[key]);}) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));});}return target;}function _defineProperty(obj, key, value) {if (key in obj) {Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });} else {obj[key] = value;}return obj;}import { actions } from \"../../BasicReducer\";\nimport EntitiesAPI from \"../../Entities/EntitiesAPI\";\n\nimport { notificationActions } from \"../../Notifications\";\nimport { RequestParams } from \"../../utils/RequestParams\";\nimport { actions as formActions } from 'react-redux-form';\n\nimport { getThesaurusPropertyNames } from \"../../../shared/commonTopicClassification\";\n\n\nimport { updateEntities } from \"./libraryActions\";\n\nexport function toggleQuickLabelAutoSave() {\n  return (dispatch, getState) => {\n    const opts = getState().library.sidepanel.quickLabelState.toJS();\n    dispatch(\n    actions.set('library.sidepanel.quickLabelState', _objectSpread(_objectSpread({},\n    opts), {}, {\n      autoSave: !opts.autoSave })));\n\n\n  };\n}\n\nfunction buildQuickLabelMetadata(docs, propNames) {\n  const counts = propNames.reduce(\n  (res, p) => _objectSpread(_objectSpread({}, res), {}, { [p]: {} }),\n  {});\n\n  docs.forEach((d) =>\n  propNames.forEach((p) => {\n    if (!d.metadata || !d.metadata[p]) {\n      return;\n    }\n    if (!counts[p]) {\n      counts[p] = {};\n    }\n    d.metadata[p].forEach((mo) => {\n      if (!mo.value) {\n        return;\n      }\n      if (!counts[p][mo.value]) {\n        counts[p][mo.value] = 1;\n      } else {\n        counts[p][mo.value] += 1;\n      }\n    });\n  }));\n\n  return propNames.reduce(\n  (res, p) => _objectSpread(_objectSpread({},\n  res), {}, {\n    [p]: {\n      added: [],\n      removed: [],\n      originalFull: Object.keys(counts[p]).filter((k) => counts[p][k] === docs.length),\n      originalPartial: Object.keys(counts[p]).filter((k) => counts[p][k] < docs.length) } }),\n\n\n  {});\n\n}\n\nexport function selectedDocumentsChanged() {\n  return (dispatch, getState) => {var _state$library, _state$library$sidepa, _state$library$sidepa2;\n    const model = 'library.sidepanel.quickLabelMetadata';\n    const state = getState();\n    if (!((_state$library = state.library) !== null && _state$library !== void 0 && (_state$library$sidepa = _state$library.sidepanel) !== null && _state$library$sidepa !== void 0 && (_state$library$sidepa2 = _state$library$sidepa.quickLabelState) !== null && _state$library$sidepa2 !== void 0 && _state$library$sidepa2.get('thesaurus'))) {\n      return;\n    }\n    dispatch(formActions.reset(model));\n    const sharedIds = state.library.ui.\n    get('selectedDocuments').\n    map((d) => d.get('sharedId')).\n    toJS();\n    const docs = state.library.documents.\n    get('rows').\n    filter((d) => sharedIds.includes(d.get('sharedId'))).\n    toJS();\n    if (!docs.length) {\n      return;\n    }\n    const templateIds = docs.map((d) => d.template).filter((v) => v);\n    const templates = state.templates.filter((t) => templateIds.includes(t.get('_id'))).toJS();\n    const propNames = getThesaurusPropertyNames(\n    state.library.sidepanel.quickLabelState.get('thesaurus'),\n    templates);\n\n    const newState = buildQuickLabelMetadata(docs, propNames);\n    dispatch(formActions.load(model, newState));\n    dispatch(formActions.setPristine(model));\n  };\n}\n\nexport function maybeSaveQuickLabels(force) {\n  return async (dispatch, getState) => {var _state$library2, _state$library2$sidep, _state$library2$sidep2;\n    const state = getState();\n    if (!force && !((_state$library2 = state.library) !== null && _state$library2 !== void 0 && (_state$library2$sidep = _state$library2.sidepanel) !== null && _state$library2$sidep !== void 0 && (_state$library2$sidep2 = _state$library2$sidep.quickLabelState) !== null && _state$library2$sidep2 !== void 0 && _state$library2$sidep2.get('autoSave'))) {\n      return;\n    }\n    const current = state.library.sidepanel.quickLabelMetadata;\n    const diffs =\n\n    {};\n    Object.keys(current).forEach((p) => {\n      if (current[p] && current[p].added.length + current[p].removed.length > 0) {\n        diffs[p] = {\n          added: current[p].added.map((v) => ({ value: v })),\n          removed: current[p].removed.map((v) => ({ value: v })) };\n\n      }\n    });\n    if (!diffs || !Object.keys(diffs).length) {\n      return;\n    }\n    const ids = state.library.ui.\n    get('selectedDocuments').\n    map((entity) => entity.get('sharedId')).\n    toJS();\n    const updatedDocs = await EntitiesAPI.multipleUpdate(\n    new RequestParams({ ids, values: { diffMetadata: diffs } }));\n\n    dispatch(notificationActions.notify('Update success', 'success'));\n    dispatch(updateEntities(updatedDocs));\n    dispatch(selectedDocumentsChanged());\n  };\n}","const _excluded = [\"serializedFile\"];function ownKeys(object, enumerableOnly) {var keys = Object.keys(object);if (Object.getOwnPropertySymbols) {var symbols = Object.getOwnPropertySymbols(object);enumerableOnly && (symbols = symbols.filter(function (sym) {return Object.getOwnPropertyDescriptor(object, sym).enumerable;})), keys.push.apply(keys, symbols);}return keys;}function _objectSpread(target) {for (var i = 1; i < arguments.length; i++) {var source = null != arguments[i] ? arguments[i] : {};i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {_defineProperty(target, key, source[key]);}) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));});}return target;}function _defineProperty(obj, key, value) {if (key in obj) {Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });} else {obj[key] = value;}return obj;}function _objectWithoutProperties(source, excluded) {if (source == null) return {};var target = _objectWithoutPropertiesLoose(source, excluded);var key, i;if (Object.getOwnPropertySymbols) {var sourceSymbolKeys = Object.getOwnPropertySymbols(source);for (i = 0; i < sourceSymbolKeys.length; i++) {key = sourceSymbolKeys[i];if (excluded.indexOf(key) >= 0) continue;if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;target[key] = source[key];}}return target;}function _objectWithoutPropertiesLoose(source, excluded) {if (source == null) return {};var target = {};var sourceKeys = Object.keys(source);var key, i;for (i = 0; i < sourceKeys.length; i++) {key = sourceKeys[i];if (excluded.indexOf(key) >= 0) continue;target[key] = source[key];}return target;}import superagent from 'superagent';\n\nimport { groupBy } from 'lodash';\n\nimport * as attachmentsTypes from \"../../Attachments/actions/actionTypes\";\nimport * as uploadsActionTypes from \"../../Uploads/actions/actionTypes\";\nimport { ensure } from \"../../../shared/tsUtils\";\nimport { constructFile } from \"../../../shared/fileUploadUtils\";\n\nconst readFileAsBase64 = async (file, cb) =>\nnew Promise((resolve) => {\n  const reader = new FileReader();\n\n  reader.onload = (base64) => {\n    const info = ensure(base64.target.result);\n    cb(info);\n    resolve();\n  };\n  reader.readAsDataURL(file);\n});\n\nconst saveEntityWithFiles = async (entity, dispatch) => {\n  const [attachments, supportingFiles] = entity.attachments ?\n  entity.attachments.reduce(\n  (accumulator, attachmentInfo) => {\n    const { serializedFile } = attachmentInfo,attachment = _objectWithoutProperties(attachmentInfo, _excluded);\n    accumulator[0].push(attachment);\n    if (serializedFile) {\n      accumulator[1].push(constructFile(attachmentInfo));\n    }\n    return accumulator;\n  },\n  [[], []]) :\n\n  [[], []];\n\n  const { oldDocuments = [], newDocuments = [] } = groupBy(entity.documents || [], (document) =>\n  document._id !== undefined ? 'oldDocuments' : 'newDocuments');\n\n  const entityToSave = _objectSpread(_objectSpread({}, entity), {}, { documents: oldDocuments });\n\n  const addedDocuments = await Promise.all(\n  newDocuments.map(async (file) => {\n    // eslint-disable-next-line @typescript-eslint/no-floating-promises\n    const blob = await fetch(file.data).then(async (r) => r.blob());\n    const newDocument = new File([blob], file.originalFile.name, { type: blob.type });\n    URL.revokeObjectURL(file.data);\n    return newDocument;\n  }));\n\n\n  return new Promise((resolve, reject) => {\n    const request = superagent.\n    post('/api/entities').\n    set('Accept', 'application/json').\n    set('X-Requested-With', 'XMLHttpRequest').\n    field(\n    'entity',\n    JSON.stringify(_objectSpread(_objectSpread({},\n    entityToSave),\n    attachments.length > 0 && { attachments })));\n\n\n\n    if (dispatch) {\n      // eslint-disable-next-line @typescript-eslint/no-floating-promises\n      request.on('progress', (data) => {\n        dispatch({\n          type: attachmentsTypes.ATTACHMENT_PROGRESS,\n          entity: entity.sharedId || 'NEW_ENTITY',\n          progress: data.percent ? Math.floor(data.percent) : data.percent });\n\n      });\n    }\n\n    supportingFiles.forEach((file, index) => {\n      // eslint-disable-next-line @typescript-eslint/no-floating-promises\n      request.attach(`attachments[${index}]`, file);\n      // eslint-disable-next-line @typescript-eslint/no-floating-promises\n      request.field(`attachments_originalname[${index}]`, file.name);\n    });\n\n    addedDocuments.forEach((file, index) => {\n      // eslint-disable-next-line @typescript-eslint/no-floating-promises\n      request.attach(`documents[${index}]`, file);\n      // eslint-disable-next-line @typescript-eslint/no-floating-promises\n      request.field(`documents_originalname[${index}]`, file.name);\n    });\n\n    request.end((err, res) => {\n      if (err) return reject(err);\n\n      if (dispatch && addedDocuments.length) {\n        dispatch({\n          type: uploadsActionTypes.NEW_UPLOAD_DOCUMENT,\n          doc: res.body.entity.sharedId });\n\n      }\n      resolve(res.body);\n    });\n  });\n};\n\nexport { readFileAsBase64, saveEntityWithFiles };","import { createSelector } from 'reselect';\n\nconst docState = createSelector(\n(state, props) => state.progress.get(props.doc.get('sharedId')),\n(_state, props) => {\n  if (!props.doc.get('documents')) {\n    return null;\n  }\n  if (!props.doc.get('documents').size) {\n    return null;\n  }\n  return props.doc.get('documents').reduce((_processed, d) => d.get('status'), 'ready');\n},\n(_state, props) => props.doc.get('documents') && !props.doc.get('documents').size,\n(_state, props) => props.doc.get('template'),\n(progress, docsStatus, isEntity, template) => {\n  if (!template && (docsStatus === 'ready' || isEntity)) {\n    return {\n      progress,\n      status: 'warning',\n      message: 'No type selected' };\n\n  }\n\n  if (progress >= 0 && progress < 100) {\n    return {\n      progress,\n      status: 'processing',\n      message: 'Uploading...' };\n\n  }\n\n  if (docsStatus === 'failed' && !isEntity) {\n    return {\n      status: 'danger',\n      message: 'Conversion failed' };\n\n  }\n\n  if (docsStatus === 'processing' && !isEntity) {\n    return {\n      progress: 100,\n      status: 'processing',\n      message: 'Processing...' };\n\n  }\n\n  return {};\n});\n\n\nexport default docState;","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport { ItemFooter } from \"../../Layout/Lists\";\nimport { connect } from 'react-redux';\nimport docState from \"../docState\";\n\nexport class UploadEntityStatus extends Component {\n  renderProgressBar() {\n    const isInProgress = this.props.progress || this.props.progress === 0;\n\n    if (isInProgress) {\n      return /*#__PURE__*/_jsx(ItemFooter.ProgressBar, { progress: this.props.progress });\n    }\n  }\n\n  render() {\n    if (!this.props.status) {\n      return null;\n    }\n\n    const ProgressBar = this.renderProgressBar();\n\n    return /*#__PURE__*/(\n      _jsx(\"div\", {}, void 0,\n      ProgressBar, /*#__PURE__*/\n      _jsx(ItemFooter.Label, { status: this.props.status }, void 0, this.props.message)));\n\n\n  }}\n\n\n\n\n\n\n\n\nexport function mapStateToProps(state, props) {\n  return docState(state, props);\n}\n\nexport default connect(mapStateToProps)(UploadEntityStatus);","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };} /** @format */\n\nimport PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\nimport { Map } from 'immutable';\nimport { t, I18NLink } from \"../../I18N\";\nimport { Icon } from \"../../UI\";\nimport { actions } from \"../../BasicReducer\";\nimport url from 'url';\n\nfunction getDocumentUrlQuery(searchTerm, targetReference) {\n  const query = {};\n  if (searchTerm) {\n    query.searchTerm = searchTerm;\n  }\n  if (targetReference) {\n    query.ref = targetReference.get('_id');\n  }\n  return query;\n}\n\nexport class ViewDocButton extends Component {\n  constructor(props) {\n    super(props);\n    this.onClick = this.onClick.bind(this);\n  }\n\n  onClick(e) {\n    e.stopPropagation();\n    const { targetReference, openReferencesTab } = this.props;\n    if (targetReference) {\n      openReferencesTab();\n    }\n  }\n\n  render() {\n    const { sharedId, processed, searchTerm, file, targetReference } = this.props;\n    const isEntity = !file;\n\n    const pathname = `/entity/${sharedId}`;\n    const query = getDocumentUrlQuery(searchTerm, targetReference);\n    const documentViewUrl = url.format({\n      pathname,\n      query });\n\n\n    if (!processed && !isEntity) {\n      return false;\n    }\n\n    return /*#__PURE__*/(\n      _jsx(I18NLink, {\n        to: documentViewUrl,\n        className: \"btn btn-default btn-xs view-doc\",\n        onClick: this.onClick }, void 0, /*#__PURE__*/\n\n      _jsx(Icon, { icon: \"angle-right\", directionAware: true }), \" \", t('System', 'View')));\n\n\n  }}\n\n\nViewDocButton.defaultProps = {\n  searchTerm: '',\n  processed: false,\n  targetReference: null };\n\n\n\n\n\n\n\n\n\n\n\nexport function mapStateToProps(state, props) {\n  return {\n    searchTerm: props.storeKey ? state[props.storeKey].search.searchTerm : '' };\n\n}\n\nexport function mapDispatchToProps(dispatch) {\n  return bindActionCreators(\n  {\n    openReferencesTab: () => (_dispatch) =>\n    _dispatch(actions.set('viewer.sidepanel.tab', 'references')) },\n\n  dispatch);\n\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ViewDocButton);","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { NeedAuthorization } from \"../../Auth\";\nimport ShowIf from \"../../App/ShowIf\";\nimport { t } from \"../../I18N\";\nimport UploadEntityStatus from \"./UploadEntityStatus\";\nimport ViewDocButton from \"./ViewDocButton\";\nimport { Icon } from \"../../UI\";\n\nimport { Item } from \"../../Layout\";\nimport { is, Map } from 'immutable';\nimport helpers from \"../../Documents/helpers\";\n\nexport class Doc extends Component {\n  shouldComponentUpdate(nextProps) {\n    return (\n      !is(this.props.doc, nextProps.doc) ||\n      !is(this.props.targetReference, nextProps.targetReference) ||\n      this.props.additionalText !== nextProps.additionalText ||\n      this.props.active !== nextProps.active ||\n      this.props.searchParams &&\n      nextProps.searchParams &&\n      this.props.searchParams.sort !== nextProps.searchParams.sort);\n\n  }\n\n  onClick(e) {\n    if (this.props.onClick) {\n      this.props.onClick(e, this.props.doc, this.props.active);\n    }\n  }\n\n  getConnections(connections) {\n    return /*#__PURE__*/(\n      _jsx(\"div\", {}, void 0,\n      connections.map((connection, index) => /*#__PURE__*/\n      _jsx(\"div\", { className: \"item-connection\" }, index, /*#__PURE__*/\n      _jsx(\"div\", {}, void 0, /*#__PURE__*/\n      _jsx(Icon, { icon: \"exchange-alt\" }), /*#__PURE__*/\n      _jsx(\"span\", {}, void 0,\n      t(connection.context, connection.label),\n      connection.type === 'metadata' ? ` ${t('System', 'in')}...` : '')), /*#__PURE__*/\n\n\n      _jsx(NeedAuthorization, { roles: ['admin', 'editor'] }, void 0, /*#__PURE__*/\n      _jsx(ShowIf, { if: connection.sourceType !== 'metadata' }, void 0, /*#__PURE__*/\n      _jsx(\"button\", {\n        className: \"btn btn-default btn-hover-danger btn-xs\",\n        onClick: (e) => this.deleteConnection(e, connection),\n        type: \"button\" }, void 0, /*#__PURE__*/\n\n      _jsx(Icon, { icon: \"trash-alt\" }))))))));\n\n\n\n\n\n\n\n  }\n\n  deleteConnection(e, connection) {\n    e.stopPropagation();\n    const { _id, sourceType } = connection;\n    this.props.deleteConnection({ _id, sourceType });\n  }\n\n  render() {\n    const { className, additionalText, targetReference } = this.props;\n    const doc = helpers.performantDocToJSWithoutRelations(this.props.doc);\n    const { sharedId, file, processed } = doc;\n\n    let itemConnections = null;\n    if (doc.connections && doc.connections.length) {\n      itemConnections = this.getConnections(doc.connections);\n    }\n\n    const buttons = /*#__PURE__*/\n    _jsx(\"div\", {}, void 0, /*#__PURE__*/\n    _jsx(ViewDocButton, {\n      file: file,\n      sharedId: sharedId,\n      processed: processed,\n      storeKey: this.props.storeKey,\n      targetReference: targetReference }));\n\n\n\n\n    return /*#__PURE__*/(\n      _jsx(Item, {\n        onClick: this.onClick.bind(this),\n        onSnippetClick: this.props.onSnippetClick,\n        active: this.props.active,\n        doc: this.props.doc,\n        additionalText: additionalText,\n        searchParams: this.props.searchParams,\n        deleteConnection: this.props.deleteConnection,\n        itemHeader: itemConnections,\n        buttons: buttons,\n        labels: /*#__PURE__*/_jsx(UploadEntityStatus, { doc: this.props.doc }),\n        className: className }));\n\n\n  }}\n\n\nDoc.defaultProps = {\n  targetReference: null };\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nDoc.contextTypes = {\n  confirm: PropTypes.func };\n\n\nexport function mapStateToProps(state, ownProps) {\n  const active = ownProps.storeKey ?\n  !!state[ownProps.storeKey].ui.\n  get('selectedDocuments').\n  find((doc) => doc.get('_id') === ownProps.doc.get('_id')) :\n  false;\n  return {\n    active };\n\n}\n\nexport default connect(mapStateToProps)(Doc);","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}function ownKeys(object, enumerableOnly) {var keys = Object.keys(object);if (Object.getOwnPropertySymbols) {var symbols = Object.getOwnPropertySymbols(object);enumerableOnly && (symbols = symbols.filter(function (sym) {return Object.getOwnPropertyDescriptor(object, sym).enumerable;})), keys.push.apply(keys, symbols);}return keys;}function _objectSpread(target) {for (var i = 1; i < arguments.length; i++) {var source = null != arguments[i] ? arguments[i] : {};i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {_defineProperty(target, key, source[key]);}) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));});}return target;}function _defineProperty(obj, key, value) {if (key in obj) {Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });} else {obj[key] = value;}return obj;}import { Field, Form, actions as formActions } from 'react-redux-form';\nimport { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport React, { Component } from 'react';\n\nimport { Icon } from \"../../UI\";\nimport { searchDocuments, processFilters } from \"../actions/libraryActions\";\nimport { t, Translate } from \"../../I18N\";\nimport { wrapDispatch } from \"../../Multireducer\";\nimport ModalTips from \"../../App/ModalTips\";\nimport { SearchTipsContent } from \"../../App/SearchTipsContent\";\nimport { submitNewSearch } from \"../../SemanticSearch/actions/actions\";\nimport { FeatureToggleSemanticSearch } from \"../../SemanticSearch/components/FeatureToggleSemanticSearch\";\n\n// eslint-disable-next-line import/exports-last\nexport class SearchBar extends Component {\n  constructor(props) {\n    super(props);\n    this.search = this.search.bind(this);\n    this.resetSearch = this.resetSearch.bind(this);\n    this.submitSearch = this.submitSearch.bind(this);\n    this.submitSemanticSearch = this.submitSemanticSearch.bind(this);\n  }\n\n  resetSearch() {\n    this.props.change(`${this.props.storeKey}.search.searchTerm`, '');\n    const search = _objectSpread({}, this.props.search);\n    search.searchTerm = '';\n    this.props.searchDocuments({ search }, this.props.storeKey);\n  }\n\n  submitSemanticSearch() {\n    this.props.semanticSearch(this.props.search);\n  }\n\n  submitSearch() {\n    const search = _objectSpread({}, this.props.search);\n    this.props.searchDocuments({ search }, this.props.storeKey);\n  }\n\n  search(search) {\n    this.props.searchDocuments({ search }, this.props.storeKey);\n  }\n\n  render() {\n    const { search, storeKey } = this.props;\n    const model = `${storeKey}.search`;\n    return /*#__PURE__*/(\n      _jsx(\"div\", { className: \"search-box\" }, void 0, /*#__PURE__*/\n      _jsx(Form, { model: model, onSubmit: this.search, autoComplete: \"off\" }, void 0, /*#__PURE__*/\n      _jsx(\"div\", { className: `input-group${search.searchTerm ? ' is-active' : ''}` }, void 0, /*#__PURE__*/\n      _jsx(Field, { model: \".searchTerm\" }, void 0, /*#__PURE__*/\n      _jsx(\"input\", {\n        type: \"text\",\n        placeholder: t('System', 'Search', null, false),\n        \"aria-label\": t('System', 'Search text description', null, false),\n        className: \"form-control\",\n        autoComplete: \"off\" }), /*#__PURE__*/\n\n      _jsx(Icon, { icon: \"times\", onClick: this.resetSearch, \"aria-label\": \"Reset Search input\" })), /*#__PURE__*/\n\n      _jsx(Icon, { icon: \"search\", onClick: this.submitSearch, \"aria-label\": \"Search button\" })), /*#__PURE__*/\n\n      _jsx(FeatureToggleSemanticSearch, {}, void 0, /*#__PURE__*/\n      _jsx(\"button\", {\n        disabled: search.searchTerm ? '' : 'disabled',\n        type: \"button\",\n        onClick: this.submitSemanticSearch,\n        className: \"btn btn-success semantic-search-button\" }, void 0, /*#__PURE__*/\n\n      _jsx(Icon, { icon: \"flask\" }), \" \", /*#__PURE__*/_jsx(Translate, {}, void 0, \"Semantic Search\")))), /*#__PURE__*/\n\n\n\n      _jsx(ModalTips, {\n        label: t('System', 'Search Tips', null, false),\n        title: t('System', 'Narrow down your searches', null, false) }, void 0, /*#__PURE__*/\n\n      _jsx(SearchTipsContent, {}))));\n\n\n\n  }}\n\n\n\n\n\n\n\n\n\n\nexport function mapStateToProps(state, props) {\n  const search = processFilters(state[props.storeKey].search, state[props.storeKey].filters.toJS());\n  return {\n    search };\n\n}\n\nfunction mapDispatchToProps(dispatch, props) {\n  return bindActionCreators(\n  {\n    searchDocuments,\n    change: formActions.change,\n    semanticSearch: submitNewSearch },\n\n  wrapDispatch(dispatch, props.storeKey));\n\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SearchBar);","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import PropTypes from 'prop-types';\nimport React from 'react';\n\nimport { LookupMultiSelect, Switcher } from \"../../ReactReduxForms\";\n\nconst SelectFilter = ({\n  onChange,\n  model,\n  label,\n  options,\n  prefix,\n  showBoolSwitch,\n  sort,\n  lookup,\n  totalPossibleOptions,\n  allowSelectGroup }) => /*#__PURE__*/\n\n_jsx(\"ul\", { className: \"search__filter is-active\" }, void 0, /*#__PURE__*/\n_jsx(\"li\", {}, void 0,\nlabel,\nshowBoolSwitch && /*#__PURE__*/_jsx(Switcher, { model: `${model}.and`, prefix: prefix, onChange: onChange })), /*#__PURE__*/\n\n_jsx(\"li\", { className: \"wide\" }, void 0, /*#__PURE__*/\n_jsx(LookupMultiSelect, {\n  model: `${model}.values`,\n  prefix: prefix,\n  options: options,\n  onChange: onChange,\n  sort: sort,\n  lookup: lookup,\n  totalPossibleOptions: totalPossibleOptions,\n  allowSelectGroup: allowSelectGroup })));\n\n\n\n\n\nSelectFilter.defaultProps = {\n  onChange: () => {},\n  label: '',\n  prefix: '',\n  showBoolSwitch: false,\n  sort: false,\n  options: [],\n  lookup: null,\n  totalPossibleOptions: 0,\n  allowSelectGroup: false };\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nexport default SelectFilter;","import { store } from \"../../store\";\nimport { isClient } from \"../../utils\";\n\nexport default function blankState() {\n  const state = store.getState();\n  if (!isClient) {\n    return false;\n  }\n  return !state.thesauris.reduce((r, t) => r || !!t.get('values').size, false);\n}","function _extends() {_extends = Object.assign ? Object.assign.bind() : function (target) {for (var i = 1; i < arguments.length; i++) {var source = arguments[i];for (var key in source) {if (Object.prototype.hasOwnProperty.call(source, key)) {target[key] = source[key];}}}return target;};return _extends.apply(this, arguments);}import comonProperties from \"../../../shared/comonProperties\";\nimport prioritySortingCriteria from \"../../utils/prioritySortingCriteria\";\nimport { queryToFilter } from \"./publishedStatusFilter\";\n\nfunction getOptions(property, thesauris) {\n  const matchingTHesauri = thesauris.find((thesauri) => thesauri._id === property.content);\n  return matchingTHesauri ? matchingTHesauri.values : null;\n}\n\nexport function populateOptions(filters, thesauris) {\n  return filters.map((property) => {\n    if (property.content) {\n      return Object.assign(property, { options: getOptions(property, thesauris) });\n    }\n\n    if (!property.content && property.type === 'relationship') {\n      return Object.assign(property, {\n        options: thesauris.\n        filter((t) => t.type === 'template').\n        reduce((options, thesauri) => options.concat(thesauri.values), []) });\n\n    }\n\n    return property;\n  });\n}\n\nfunction URLQueryToState(query, templates, _thesauris, _relationTypes, forcedProps = []) {\n  let properties = comonProperties.comonFilters(templates, query.types, forcedProps);\n  if (!query.types || !query.types.length) {\n    properties = comonProperties.defaultFilters(templates, forcedProps);\n  }\n\n  const {\n    searchTerm = '',\n    filters = {},\n    sort = prioritySortingCriteria.get().sort,\n    order = prioritySortingCriteria.get().order,\n    userSelectedSorting,\n    includeUnpublished = false,\n    unpublished = false,\n    allAggregations = false } =\n  query;\n\n  return {\n    properties,\n    search: {\n      searchTerm,\n      filters,\n      customFilters: query.customFilters,\n      sort,\n      order,\n      userSelectedSorting,\n      publishedStatus: queryToFilter(unpublished, includeUnpublished),\n      allAggregations } };\n\n\n}\n\nconst normalizeBucket = (bucket) => {\n  const normalizedBucket = {\n    id: bucket.key,\n    value: bucket.key,\n    label: bucket.label,\n    results: bucket.filtered.doc_count };\n\n\n  if (bucket.icon) {\n    normalizedBucket.icon = bucket.icon;\n  }\n\n  if (bucket.values) {\n    normalizedBucket.options = bucket.values.map(normalizeBucket);\n  }\n\n  if (bucket.key === 'missing') {\n    normalizedBucket.noValueKey = true;\n  }\n\n  return normalizedBucket;\n};\n\nexport function parseWithAggregations(filters, aggregations, showNoValue = true) {\n  return filters.map((_ref) => {let property = _extends({}, _ref);\n    const propertyAggregations = aggregations.all[property.name];\n    if (propertyAggregations && propertyAggregations.buckets) {\n      property.options = propertyAggregations.buckets.\n      map(normalizeBucket).\n      filter((opt) => opt.results || !showNoValue && opt.value === 'missing');\n\n      property.totalPossibleOptions = propertyAggregations.count;\n    }\n\n    return property;\n  });\n}\n\nexport default {\n  URLQueryToState,\n  populateOptions,\n  parseWithAggregations };","function ownKeys(object, enumerableOnly) {var keys = Object.keys(object);if (Object.getOwnPropertySymbols) {var symbols = Object.getOwnPropertySymbols(object);enumerableOnly && (symbols = symbols.filter(function (sym) {return Object.getOwnPropertyDescriptor(object, sym).enumerable;})), keys.push.apply(keys, symbols);}return keys;}function _objectSpread(target) {for (var i = 1; i < arguments.length; i++) {var source = null != arguments[i] ? arguments[i] : {};i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {_defineProperty(target, key, source[key]);}) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));});}return target;}function _defineProperty(obj, key, value) {if (key in obj) {Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });} else {obj[key] = value;}return obj;}\n\n\n\n\n\nexport const filterToQuery = (search) => {\n  const filteredQuery = _objectSpread({}, search);\n  const published = filteredQuery.publishedStatus.values.includes('published');\n  const restricted = filteredQuery.publishedStatus.values.includes('restricted');\n\n  filteredQuery.includeUnpublished = published === restricted;\n  filteredQuery.unpublished = !published && restricted;\n\n  delete filteredQuery.publishedStatus;\n\n  return filteredQuery;\n};\n\nexport const queryToFilter = (unpublished, includeUnpublished) => ({\n  values: [\n  ...(!unpublished ? ['published'] : []),\n  ...(!includeUnpublished && unpublished || includeUnpublished && !unpublished ?\n  ['restricted'] :\n  [])] });","const _excluded = [\"collectionSettings\", \"templates\"];var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}function ownKeys(object, enumerableOnly) {var keys = Object.keys(object);if (Object.getOwnPropertySymbols) {var symbols = Object.getOwnPropertySymbols(object);enumerableOnly && (symbols = symbols.filter(function (sym) {return Object.getOwnPropertyDescriptor(object, sym).enumerable;})), keys.push.apply(keys, symbols);}return keys;}function _objectSpread(target) {for (var i = 1; i < arguments.length; i++) {var source = null != arguments[i] ? arguments[i] : {};i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {_defineProperty(target, key, source[key]);}) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));});}return target;}function _defineProperty(obj, key, value) {if (key in obj) {Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });} else {obj[key] = value;}return obj;}function _objectWithoutProperties(source, excluded) {if (source == null) return {};var target = _objectWithoutPropertiesLoose(source, excluded);var key, i;if (Object.getOwnPropertySymbols) {var sourceSymbolKeys = Object.getOwnPropertySymbols(source);for (i = 0; i < sourceSymbolKeys.length; i++) {key = sourceSymbolKeys[i];if (excluded.indexOf(key) >= 0) continue;if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;target[key] = source[key];}}return target;}function _objectWithoutPropertiesLoose(source, excluded) {if (source == null) return {};var target = {};var sourceKeys = Object.keys(source);var key, i;for (i = 0; i < sourceKeys.length; i++) {key = sourceKeys[i];if (excluded.indexOf(key) >= 0) continue;target[key] = source[key];}return target;}import React from 'react';\nimport { connect } from 'react-redux';\nimport { Loader } from '@googlemaps/js-api-loader';\n\nimport { LMap } from \"./index\";\nimport { ErrorBoundary } from \"../App/ErrorHandling/ErrorBoundary\";\n\n\n\n\n\n\n\n\n\n\n\n\nconst mapStateToProps = ({ settings, templates }) => ({\n  collectionSettings: settings.collection,\n  templates });\n\n\nconst connector = connect(mapStateToProps);\n\n\n\n\nconst MapComponent = (_ref) => {var _collectionSettings$g;let { collectionSettings, templates } = _ref,props = _objectWithoutProperties(_ref, _excluded);\n  const startingPoint = collectionSettings === null || collectionSettings === void 0 ? void 0 : (_collectionSettings$g = collectionSettings.get('mapStartingPoint')) === null || _collectionSettings$g === void 0 ? void 0 : _collectionSettings$g.toJS();\n  const tilesProvider = (collectionSettings === null || collectionSettings === void 0 ? void 0 : collectionSettings.get('tilesProvider')) || 'mapbox';\n  const mapApiKey = collectionSettings === null || collectionSettings === void 0 ? void 0 : collectionSettings.get('mapApiKey');\n\n  if (tilesProvider === 'google' && mapApiKey) {\n    const loader = new Loader({\n      apiKey: mapApiKey,\n      retries: 0 });\n\n    loader.\n    load().\n    then(() => {}).\n    catch(() => {});\n  }\n\n  const templatesInfo = templates.reduce(\n  (info, t) => _objectSpread(_objectSpread({},\n  info),\n  t ?\n  {\n    [t.get('_id')]: {\n      color: t.get('color'),\n      name: t.get('name') } } :\n\n\n  {}),\n\n  {});\n\n  const mapProps = _objectSpread(_objectSpread({}, props), {}, { startingPoint, tilesProvider, mapApiKey, templatesInfo });\n  return /*#__PURE__*/(\n    _jsx(ErrorBoundary, {}, void 0, /*#__PURE__*/\n    React.createElement(LMap, mapProps)));\n\n\n};\n\nconst container = connector(MapComponent);\nexport { container as Map };","const _mergeArrays = (first, second) => {\n  let bigArray;\n  let smallArray;\n  if (first.length > second.length) {\n    bigArray = first;\n    smallArray = second;\n  } else {\n    bigArray = second;\n    smallArray = first;\n  }\n\n  smallArray.forEach((item) => bigArray.push(item));\n  return bigArray;\n};\n\nconst extractPropertyBasedMarkers = (entity, geolocationProp, propertyMetadata, color) => {\n  const markers = [];\n  propertyMetadata.\n  filter((mo) => mo.get('value')).\n  forEach((point) => {\n    markers.push({\n      properties: { entity: entity.toJS(), color, info: point.getIn(['value', 'label']) },\n      latitude: point.getIn(['value', 'lat']),\n      longitude: point.getIn(['value', 'lon']),\n      label: geolocationProp.get('label') });\n\n  });\n  return markers;\n};\n\nconst extractInheritedMarkers = (entity, geolocationProp, propertyMetadata, color) => {\n  const markers = [];\n  propertyMetadata.forEach((relatedProperty) => {\n    if (relatedProperty.has('inherit_geolocation')) {\n      // conditional is a quick hack to prevent app crash\n      relatedProperty.\n      get('inherit_geolocation').\n      filter((mo) => mo.get('value')).\n      forEach((point) => {\n        markers.push({\n          properties: {\n            entity: entity.toJS(),\n            color,\n            info: point.getIn(['value', 'label']),\n            inherited: true,\n            label: relatedProperty.get('label'),\n            context: geolocationProp.get('content') },\n\n          latitude: point.getIn(['value', 'lat']),\n          longitude: point.getIn(['value', 'lon']),\n          label: geolocationProp.get('label') });\n\n      });\n    }\n  });\n  return markers;\n};\n\nconst extractMarkers = ({ entity, geolocationProps, metadata, color, type }) => {\n  let markers = [];\n  const geolocationPropNames = geolocationProps.map((prop) => prop.get('name'));\n\n  if (geolocationProps.size && metadata) {\n    const [...properties] = metadata.keys();\n    properties.forEach((property) => {\n      if (geolocationPropNames.includes(property) && metadata.has(property)) {\n        const geolocationProp = geolocationProps.find((p) => p.get('name') === property);\n        const propertyMetadata = metadata.get(property);\n        if (type === 'PropertyBased') {\n          markers = _mergeArrays(\n          markers,\n          extractPropertyBasedMarkers(entity, geolocationProp, propertyMetadata, color));\n\n        } else {\n          markers = _mergeArrays(\n          markers,\n          extractInheritedMarkers(entity, geolocationProp, propertyMetadata, color));\n\n        }\n      }\n    });\n  }\n  return markers;\n};\n\nconst getPropertyBasedMarkers = (template, entity) => {\n  const color = template.get('color');\n  const templateProperties = template.get('properties');\n  const metadata = entity.get('metadata');\n\n  const geolocationProps = templateProperties.filter(\n  (property) => property.get('type') === 'geolocation');\n\n\n  return extractMarkers({ entity, geolocationProps, metadata, color, type: 'PropertyBased' });\n};\n\nconst getInheritedMarkers = (template, entity) => {\n  const templateProperties = template.get('properties');\n  const color = template.get('color');\n  const metadata = entity.get('metadata');\n\n  const geolocationProps = templateProperties.filter(\n  (property) => property.getIn(['inherit', 'type']) === 'geolocation');\n\n\n  return extractMarkers({ entity, geolocationProps, metadata, color, type: 'Inherited' });\n};\n\nconst getEntityMarkers = (entity, templates) => {\n  const template = templates.find((_t) => _t.get('_id') === entity.get('template'));\n\n  const propertyBasedMarkers = getPropertyBasedMarkers(template, entity);\n  const inheritedMarkers = getInheritedMarkers(template, entity, templates);\n\n  return _mergeArrays(propertyBasedMarkers, inheritedMarkers);\n};\n\nconst getMarkers = (entities, templates) => {\n  const m = entities.reduce((markers, entity) => {\n    const entityMarkers = getEntityMarkers(entity, templates);\n    return _mergeArrays(markers, entityMarkers);\n  }, []);\n  return m;\n};\n\nexport { getMarkers };","import { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport Immutable from 'immutable';\nimport { createSelector } from 'reselect';\nimport { getMarkers } from \"./helper\";\n\nconst selectMarkers = createSelector(\n({ entities }) => entities,\n({ state }) => state.templates,\n(entities, templates) => getMarkers(entities, templates));\n\n\nexport const MarkersComponent = ({ children, markers }) => children(markers);\n\nMarkersComponent.defaultProps = {\n  entities: Immutable.List() };\n\n\nMarkersComponent.propTypes = {\n  children: PropTypes.func.isRequired,\n  templates: PropTypes.instanceOf(Immutable.List).isRequired,\n  entities: PropTypes.instanceOf(Immutable.List) };\n\n\nexport const mapStateToProps = (state, ownProps) => ({\n  markers: selectMarkers({ state, entities: ownProps.entities }),\n  templates: state.templates });\n\n\nexport default connect(mapStateToProps)(MarkersComponent);","import loadable from '@loadable/component';\nimport React from 'react';\nimport { Map } from \"./MapContainer\";\nimport * as helper from \"./helper\";\n\nconst LMap = loadable(async () => {\n  const { LMap: LMapComponent } = await import( /* webpackChunkName: \"LazyLoadMap\" */\"./LMap.tsx\");\n  return (props) => /*#__PURE__*/React.createElement(LMapComponent, props);\n});\n\nexport { default as Markers } from \"./Markers.js\";\nexport { helper, LMap, Map };","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import { Link } from 'react-router';\nimport { isClient } from \"../../utils\";\nimport PropTypes from 'prop-types';\nimport React from 'react';\n\nconst MarkdownLink = ({ url, classname, children }) => {\n  if (isClient) {\n    console.warn('MarkdownLink is deprecated, use <Link to=\"url\"></Link> instead');\n  }\n  return /*#__PURE__*/(\n    _jsx(Link, { to: url, className: classname, href: url }, void 0,\n    children));\n\n\n};\n\nMarkdownLink.defaultProps = {\n  children: '',\n  classname: '' };\n\n\n\n\n\n\n\n\n\n\n\n\nexport default MarkdownLink;","function _extends() {_extends = Object.assign ? Object.assign.bind() : function (target) {for (var i = 1; i < arguments.length; i++) {var source = arguments[i];for (var key in source) {if (Object.prototype.hasOwnProperty.call(source, key)) {target[key] = source[key];}}}return target;};return _extends.apply(this, arguments);}var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport ReactPlayer from 'react-player';\nimport { Icon } from \"../../UI\";\n\nconst propsToConfig = (props) => {\n  const config = { url: '', options: {} };\n\n  let parsedProps = props.config.replace(/\\(|\\)/g, '').split(',');\n  config.url = parsedProps.shift();\n\n  parsedProps = (parsedProps.join(',') || '{}').replace(/&quot;/g, '\"');\n\n  try {\n    parsedProps = JSON.parse(parsedProps);\n  } catch (error) {\n    parsedProps = {};\n  }\n\n  config.options = parsedProps;\n\n  return config;\n};\n\nclass MarkdownMedia extends Component {\n  timeLinks(_timelinks) {\n    const timelinks = _timelinks || {};\n    return Object.keys(timelinks).map((timeKey, index) => {\n      const seconds = timeKey.\n      split(':').\n      reverse().\n      reduce((_seconds, n, _index) => _seconds + parseInt(n, 10) * 60 ** _index, 0);\n      return /*#__PURE__*/(\n        _jsx(\"div\", { className: \"timelink\", onClick: this.seekTo.bind(this, seconds) }, index, /*#__PURE__*/\n        _jsx(\"b\", {}, void 0, /*#__PURE__*/\n        _jsx(Icon, { icon: \"play\" }), \" \", timeKey), /*#__PURE__*/\n\n        _jsx(\"span\", {}, void 0, timelinks[timeKey])));\n\n\n    });\n  }\n\n  seekTo(seconds) {\n    this.player.seekTo(seconds);\n  }\n\n  render() {\n    const config = propsToConfig(this.props);\n    const { compact } = this.props;\n    const dimensions = { width: '100%' };\n    if (compact) {\n      dimensions.height = '100%';\n    }\n    return /*#__PURE__*/(\n      _jsx(\"div\", { className: `video-container ${compact ? 'compact' : ''}` }, void 0, /*#__PURE__*/\n      _jsx(\"div\", {}, void 0, /*#__PURE__*/\n      React.createElement(ReactPlayer, _extends({\n        className: \"react-player\",\n        ref: (ref) => {\n          this.player = ref;\n        },\n        url: config.url },\n      dimensions, {\n        controls: true }))), /*#__PURE__*/\n\n\n      _jsx(\"div\", {}, void 0, this.timeLinks(config.options.timelinks)), /*#__PURE__*/\n      _jsx(\"p\", { className: \"print-view-alt\" }, void 0, config.url)));\n\n\n  }}\n\n\nMarkdownMedia.defaultProps = {\n  compact: false };\n\n\n\n\n\n\n\nexport default MarkdownMedia;","import { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\n\nimport markdownDatasets from \"../markdownDatasets\";\n\nconst CounterComponent = ({ count }) => count;\n\nCounterComponent.defaultProps = {\n  count: '-' };\n\n\nCounterComponent.propTypes = {\n  count: PropTypes.oneOfType([PropTypes.number, PropTypes.string]) };\n\n\nexport const mapStateToProps = (state, props) => ({\n  count: markdownDatasets.getAggregation(state, props) });\n\n\nexport default connect(mapStateToProps)(CounterComponent);","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport { Translate } from \"../../I18N\";\nimport api from \"../../utils/api\";\nimport { Icon } from \"../../UI\";\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport { notify } from \"../../Notifications/actions/notificationsActions\";\nimport { RequestParams } from \"../../utils/RequestParams\";\n\nexport class ContactForm extends Component {\n  constructor(props, context) {\n    super(props, context);\n    this.state = { name: '', email: '', message: '' };\n    this.submit = this.submit.bind(this);\n  }\n\n  onChange(key, e) {\n    const changedData = {};\n    changedData[key] = e.target.value;\n    this.setState(changedData);\n  }\n\n  async submit(e) {\n    e.preventDefault();\n    await api.post('contact', new RequestParams(this.state));\n    this.props.notify('Message sent', 'success');\n    this.setState({ name: '', email: '', message: '' });\n  }\n\n  render() {\n    return /*#__PURE__*/(\n      _jsx(\"form\", { onSubmit: this.submit, className: \"contact-form\" }, void 0, /*#__PURE__*/\n      _jsx(\"div\", { className: \"form-group\" }, void 0, /*#__PURE__*/\n      _jsx(\"label\", { className: \"form-group-label\", htmlFor: \"name\" }, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Name\")), /*#__PURE__*/\n\n      _jsx(\"input\", {\n        required: true,\n        name: \"name\",\n        className: \"form-control\",\n        onChange: this.onChange.bind(this, 'name'),\n        value: this.state.name })), /*#__PURE__*/\n\n\n      _jsx(\"div\", { className: \"form-group\" }, void 0, /*#__PURE__*/\n      _jsx(\"label\", { className: \"form-group-label\", htmlFor: \"email\" }, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Email\")), /*#__PURE__*/\n\n      _jsx(\"input\", {\n        required: true,\n        name: \"email\",\n        className: \"form-control\",\n        onChange: this.onChange.bind(this, 'email'),\n        value: this.state.email })), /*#__PURE__*/\n\n\n      _jsx(\"div\", { className: \"form-group\" }, void 0, /*#__PURE__*/\n      _jsx(\"label\", { className: \"form-group-label\", htmlFor: \"message\" }, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Message\")), /*#__PURE__*/\n\n      _jsx(\"textarea\", {\n        required: true,\n        name: \"message\",\n        className: \"form-control\",\n        onChange: this.onChange.bind(this, 'message'),\n        value: this.state.message })), /*#__PURE__*/\n\n\n      _jsx(\"button\", { type: \"submit\", className: \"btn btn-success\" }, void 0, /*#__PURE__*/\n      _jsx(Icon, { icon: \"paper-plane\" }), \"\\xA0\", /*#__PURE__*/\n\n      _jsx(\"span\", { className: \"btn-label\" }, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Send\")))));\n\n\n\n\n  }}\n\n\n\n\n\n\nfunction mapDispatchToProps(dispatch) {\n  return bindActionCreators({ notify }, dispatch);\n}\n\nexport default connect(null, mapDispatchToProps)(ContactForm);","const generateNewSafeName = (label) =>\nlabel.\ntrim().\nreplace(/[#|\\\\|/|*|?|\"|<|>|=|||\\s|:|.|[|\\]|%]/gi, '_').\nreplace(/^[_|\\-|+|$]/, '').\ntoLowerCase();\n\nconst safeName = (label, newNameGeneration = false) => {\n  if (newNameGeneration) {\n    return generateNewSafeName(label);\n  }\n  return label.\n  trim().\n  replace(/[^a-z0-9]/gi, '_').\n  toLowerCase();\n};\n\nexport { safeName };","export const objectPath = (path, object) =>\npath.split('.').reduce((o, key) => {\n  if (!o || !key) {\n    return o;\n  }\n  return o.toJS ? o.get(key) : o[key];\n}, object);\n\nexport const logError = (err, propValueOf, propLabelOf) => {\n  /* eslint-disable no-console */\n  console.error('Error on EntityData: ');\n  console.error('value-of: ', propValueOf, '; label-of: ', propLabelOf);\n  console.error(err);\n  /* eslint-enable no-console */\n};","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };} /* eslint-disable react/no-multi-comp */\nimport React from 'react';\nimport { connect } from 'react-redux';\n\n\nimport formatter from \"../../Metadata/helpers/formater\";\nimport { safeName } from \"../../../shared/propertyNames\";\nimport { showByType } from \"../../Metadata/components/Metadata\";\nimport { Translate } from \"../../I18N\";\n\nimport { ensure } from \"../../../shared/tsUtils\";\nimport { logError } from \"../utils\";\n\n\n\n\n\n\n\n\n\n\n\n\nconst mapStateToProps = ({ entityView, templates, thesauris, settings }) => ({\n  entity: entityView.entity,\n  templates,\n  thesauri: thesauris,\n  newNameGeneration: settings.collection.get('newNameGeneration') || false });\n\n\nconst connector = connect(mapStateToProps);\n\n\n\n\nconst rootProperties = ['title', 'creationDate', 'editDate'];\n\nconst getPropertyData = ({ formattedEntity, propertyName, newNameGeneration }) =>\nformattedEntity.metadata.find((p) => p.name === safeName(propertyName, newNameGeneration));\n\nconst extractRootProperty = ({ formattedEntity, propertyName }) =>\nformattedEntity[propertyName];\n\nconst extractMetadataProperty = ({ formattedEntity, propertyName, newNameGeneration }) => {\n  const propertyData = formattedEntity.metadata.find(\n  (p) => p.name === safeName(propertyName, newNameGeneration));\n\n  return showByType(propertyData, false);\n};\n\nconst extractRootLabel = ({ propertyName, template: _template }) => {var _template$get;\n  const template = ensure(_template);\n  const term =\n  ((_template$get = template.\n  get('commonProperties')) === null || _template$get === void 0 ? void 0 : _template$get.\n  find((p) => (p === null || p === void 0 ? void 0 : p.get('name')) === propertyName).\n  get('label')) || '';\n\n  const context = propertyName === 'title' ? template.get('_id') : 'System';\n  return /*#__PURE__*/_jsx(Translate, { context: context }, void 0, term);\n};\n\nconst extractMetadataLabel = ({ formattedEntity, propertyName, newNameGeneration }) => {\n  const propertyData = getPropertyData({ formattedEntity, propertyName, newNameGeneration });\n  return /*#__PURE__*/_jsx(Translate, { context: propertyData.translateContext }, void 0, propertyData.label);\n};\n\nconst getProperty = (\npropValueOf,\npropLabelOf) =>\n{\n  if (propValueOf && propLabelOf) {\n    throw new Error('Can\\'t provide both \"value-of\" and \"label-of\".');\n  }\n\n  const property = propValueOf || propLabelOf;\n\n  if (!property) {\n    throw new Error('\"value-of\" or \"label-of\" must be provided.');\n  }\n\n  return property;\n};\n\nconst getMethod = (propValueOf, propertyName) => {\n  const isRootProperty = rootProperties.includes(propertyName);\n\n  if (propValueOf) {\n    return isRootProperty ? extractRootProperty : extractMetadataProperty;\n  }\n\n  return isRootProperty ? extractRootLabel : extractMetadataLabel;\n};\n\nconst EntityData = ({\n  entity,\n  templates,\n  thesauri,\n  'value-of': propValueOf,\n  'label-of': propLabelOf,\n  newNameGeneration }) =>\n{\n  const formattedEntity = formatter.prepareMetadata(entity.toJS(), templates, thesauri);\n  const template = templates.find((t) => (t === null || t === void 0 ? void 0 : t.get('_id')) === entity.get('template'));\n  // eslint-disable-next-line react/jsx-no-useless-fragment\n  let output = /*#__PURE__*/React.createElement(React.Fragment, null);\n\n  try {\n    const propertyName = getProperty(propValueOf, propLabelOf);\n    const renderMethod = getMethod(propValueOf, propertyName);\n    output = /*#__PURE__*/React.createElement(React.Fragment, null, renderMethod({ formattedEntity, propertyName, newNameGeneration, template }));\n  } catch (err) {\n    logError(err, propValueOf, propLabelOf);\n  }\n\n  return output;\n};\n\nconst container = connector(EntityData);\nexport { container as EntityData };","/* eslint-disable react/no-multi-comp */\nimport sift from 'sift';\n\n\n\n\n\n\n\n// eslint-disable-next-line max-statements\nconst Section = ({ data, children, showIf: condition }) => {\n  const filtered = data.filter(sift(condition));\n  return filtered.length > 0 ? children : null;\n};\n\nexport { Section };","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}function ownKeys(object, enumerableOnly) {var keys = Object.keys(object);if (Object.getOwnPropertySymbols) {var symbols = Object.getOwnPropertySymbols(object);enumerableOnly && (symbols = symbols.filter(function (sym) {return Object.getOwnPropertyDescriptor(object, sym).enumerable;})), keys.push.apply(keys, symbols);}return keys;}function _objectSpread(target) {for (var i = 1; i < arguments.length; i++) {var source = null != arguments[i] ? arguments[i] : {};i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {_defineProperty(target, key, source[key]);}) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));});}return target;}function _defineProperty(obj, key, value) {if (key in obj) {Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });} else {obj[key] = value;}return obj;} /* eslint-disable react/no-multi-comp */\nimport { connect } from 'react-redux';\nimport React from 'react';\n\nimport { logError } from \"../utils\";\nimport { Section } from \"./Section\";\n\n\n\n\n\n\nconst mapStateToProps = ({ templates, entityView }) => ({\n  entity: entityView.entity,\n  templates });\n\n\nconst connector = connect(mapStateToProps);\n\n\n\n\nconst getPropertyValue = (property, metadataProperty) => {\n  switch (property.type) {\n    case 'multiselect':\n    case 'multidaterange':\n    case 'nested':\n    case 'multidate':\n    case 'geolocation':\n      return metadataProperty.map((v) => v.label || v.value);\n    case 'relationship':{\n        let value = [];\n        metadataProperty.forEach((v) => {\n          if (v.inheritedType && v.inheritedValue) {\n            const properties = getPropertyValue({ type: v.inheritedType }, v.inheritedValue);\n            value = Array.isArray(properties) ? [...value, ...properties] : [...value, properties];\n          } else {\n            value.push(v.label || v.value);\n          }\n        });\n        return Array.from(new Set(value));\n      }\n    case 'generatedid':\n      return typeof metadataProperty === 'string' ? metadataProperty : metadataProperty[0].value;\n    default:\n      return metadataProperty[0].label || metadataProperty[0].value;}\n\n};\n\n// eslint-disable-next-line import/exports-last\nexport const UnwrapMetadataObject = (MetadataObject, Template) =>\nObject.keys(MetadataObject).reduce((UnwrapedMO, key) => {\n  if (!MetadataObject[key].length) {\n    return UnwrapedMO;\n  }\n  const property = Template.properties.find((p) => p.name === key);\n  const propertyValue = getPropertyValue(property, MetadataObject[key]);\n  return _objectSpread(_objectSpread({}, UnwrapedMO), {}, { [key]: propertyValue });\n}, {});\n\n// eslint-disable-next-line max-statements\nconst EntitySection = ({ entity, templates, children, 'show-if': showIf }) => {\n  const jsEntity = entity.toJS();\n  const template = templates.find((t) => (t === null || t === void 0 ? void 0 : t.get('_id')) === jsEntity.template);\n  const unwrappedMetadata = UnwrapMetadataObject(jsEntity.metadata, template.toJS());\n  jsEntity.metadata = unwrappedMetadata;\n  try {\n    const condition = JSON.parse(showIf);\n    return /*#__PURE__*/(\n      _jsx(Section, { data: [jsEntity], showIf: condition }, void 0,\n      children));\n\n\n  } catch (e) {\n    logError(e, showIf);\n    return null;\n  }\n};\n\nconst container = connector(EntitySection);\nexport { container as EntitySection };","import React from 'react';\n\nexport default /*#__PURE__*/React.createContext('');","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };} /** @format */\n\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { I18NLink } from \"../../I18N\";\nimport PagesContext from \"./Context\";\n\nexport default class EntityLink extends Component {\n  render() {\n    const { children } = this.props;\n    return /*#__PURE__*/(\n      _jsx(PagesContext.Consumer, {}, void 0,\n      (entity) => {\n        const sharedId = entity.toJS ? entity.get('sharedId') : entity.sharedId;\n        const url = `/entity/${sharedId}`;\n        return /*#__PURE__*/_jsx(I18NLink, { to: url }, void 0, children);\n      }));\n\n\n  }}\n\n\nEntityLink.defaultProps = {\n  children: '' };","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { Icon } from \"../../UI\";\n\nconst normalizeIndex = (index, length) => index >= 0 ? index % length : length + index;\n\nconst getVisibleIndices = (centerIndex, visibleCount, totalLength) => {\n  const minIndex = -Math.floor(visibleCount / 2);\n  const rawIndices = [];\n  for (let i = 0; i < visibleCount; i += 1) {\n    rawIndices.push(centerIndex + minIndex + i);\n  }\n  return rawIndices.map((i) => normalizeIndex(i, totalLength));\n};\n\nconst getVisibleItems = (data, currentIndex, visibleCount) => {\n  if (!data.length) {\n    return [];\n  }\n\n  let visibleIndices = data.map((_item, index) => index);\n\n  if (data.length > visibleCount) {\n    visibleIndices = getVisibleIndices(currentIndex, visibleCount, data.length);\n  }\n\n  const visibleItems = visibleIndices.map((i) => data[i]);\n  return visibleItems;\n};\n\nexport default class VictimSlider extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      // initialize slider with a victim that has an image\n      currentIndex: 0 };\n\n  }\n\n  componentDidMount() {\n    const { initialIndex } = this.props;\n    this.setState({\n      currentIndex: initialIndex || 0 });\n\n  }\n\n  slide(dir) {\n    let { currentIndex } = this.state;\n    const { children } = this.props;\n    currentIndex = normalizeIndex(currentIndex + dir, children.length);\n    this.setState({ currentIndex });\n  }\n\n  render() {\n    const { children, visibleCount } = this.props;\n    const { currentIndex } = this.state;\n    const items = getVisibleItems(children, currentIndex, visibleCount);\n\n    return /*#__PURE__*/(\n      _jsx(\"div\", { className: \"slider\" }, void 0,\n      children.length > visibleCount && /*#__PURE__*/\n      _jsx(\"div\", { className: \"slider-buttons\" }, void 0, /*#__PURE__*/\n      _jsx(\"button\", { className: \"slider-btn\", onClick: () => this.slide(-1) }, void 0, /*#__PURE__*/\n      _jsx(Icon, { icon: \"angle-left\" })), /*#__PURE__*/\n\n      _jsx(\"button\", { className: \"slider-btn\", onClick: () => this.slide(1) }, void 0, /*#__PURE__*/\n      _jsx(Icon, { icon: \"angle-right\" }))), /*#__PURE__*/\n\n\n\n      _jsx(\"div\", { className: \"slider-items\" }, void 0, items)));\n\n\n  }}","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import React, { Component } from 'react';\nimport { fromJS as Immutable } from 'immutable';\nimport PropTypes from 'prop-types';\nimport qs from 'qs';\n\nimport { RowList } from \"../../Layout/Lists\";\nimport Doc from \"../../Library/components/Doc\";\nimport { t, I18NLink } from \"../../I18N\";\nimport { selectSingleDocument } from \"../../Library/actions/libraryActions\";\nimport { wrapDispatch } from \"../../Multireducer\";\nimport { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\nimport Slider from \"./slider\";\n\nexport class ItemList extends Component {\n  render() {\n    const { items, link } = this.props;\n    const { sort } = qs.parse(link.substring(link.indexOf('?')), { ignoreQueryPrefix: true });\n    const searchParams = sort ? { sort } : { sort: 'title' };\n\n    const mapDispatchToProps = (dispatch) =>\n    bindActionCreators(\n    {\n      onClick: (_e, item) => selectSingleDocument(item) },\n\n    wrapDispatch(dispatch, 'library'));\n\n\n    const toRenderItems = items.map((item, index) => {\n      const ConnectedItem = connect(null, mapDispatchToProps)(Doc);\n      return /*#__PURE__*/(\n        _jsx(ConnectedItem, {\n\n          doc: Immutable(item),\n          searchParams: searchParams,\n          storeKey: \"library\" }, index));\n\n\n    });\n\n    let list = /*#__PURE__*/_jsx(RowList, {}, void 0, toRenderItems);\n\n    if (this.props.options.slider) {\n      list = /*#__PURE__*/\n      _jsx(RowList, {}, void 0, /*#__PURE__*/\n      _jsx(Slider, { visibleCount: 3 }, void 0, toRenderItems));\n\n\n    }\n\n    return /*#__PURE__*/(\n      _jsx(\"div\", {}, void 0,\n      list, /*#__PURE__*/\n      _jsx(\"div\", { className: \"row\" }, void 0, /*#__PURE__*/\n      _jsx(\"div\", { className: \"col-sm-12 text-center\" }, void 0, /*#__PURE__*/\n      _jsx(I18NLink, { to: `${link}` }, void 0, /*#__PURE__*/\n      _jsx(\"button\", { className: \"btn btn-default\" }, void 0, t('System', 'View in library')))))));\n\n\n\n\n\n  }}\n\n\nItemList.defaultProps = {\n  items: [],\n  options: {} };\n\n\n\n\n\n\n\n\nexport default ItemList;","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport PagesContext from \"./Context\";\nimport { objectPath } from \"../utils\";\n\nclass Repeat extends Component {\n  render() {\n    const { path, children } = this.props;\n    return /*#__PURE__*/(\n      _jsx(PagesContext.Consumer, {}, void 0,\n      (value) => {\n        const data = objectPath(path, value) || [];\n        return data.map((item, index) => /*#__PURE__*/\n        _jsx(PagesContext.Provider, { value: item }, index,\n        children));\n\n\n      }));\n\n\n  }}\n\n\n\n\n\n\n\nexport default Repeat;","const _excluded = [\"children\"];var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}function _objectWithoutProperties(source, excluded) {if (source == null) return {};var target = _objectWithoutPropertiesLoose(source, excluded);var key, i;if (Object.getOwnPropertySymbols) {var sourceSymbolKeys = Object.getOwnPropertySymbols(source);for (i = 0; i < sourceSymbolKeys.length; i++) {key = sourceSymbolKeys[i];if (excluded.indexOf(key) >= 0) continue;if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;target[key] = source[key];}}return target;}function _objectWithoutPropertiesLoose(source, excluded) {if (source == null) return {};var target = {};var sourceKeys = Object.keys(source);var key, i;for (i = 0; i < sourceKeys.length; i++) {key = sourceKeys[i];if (excluded.indexOf(key) >= 0) continue;target[key] = source[key];}return target;}function ownKeys(object, enumerableOnly) {var keys = Object.keys(object);if (Object.getOwnPropertySymbols) {var symbols = Object.getOwnPropertySymbols(object);enumerableOnly && (symbols = symbols.filter(function (sym) {return Object.getOwnPropertyDescriptor(object, sym).enumerable;})), keys.push.apply(keys, symbols);}return keys;}function _objectSpread(target) {for (var i = 1; i < arguments.length; i++) {var source = null != arguments[i] ? arguments[i] : {};i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {_defineProperty(target, key, source[key]);}) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));});}return target;}function _defineProperty(obj, key, value) {if (key in obj) {Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });} else {obj[key] = value;}return obj;}import { connectAdvanced } from 'react-redux';\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport PagesContext from \"./Context\";\nimport { objectPath } from \"../utils\";\n\nclass Connect extends Component {\n  static objectPath(path, object) {\n    return path.split('.').reduce((o, key) => o.toJS ? o.get(key) : o[key], object);\n  }\n\n  static renderChildren(children, props) {\n    return Array.isArray(children) ?\n    children.map((child, index) => /*#__PURE__*/React.cloneElement(child, _objectSpread(_objectSpread({}, props), {}, { index }))) : /*#__PURE__*/\n    React.cloneElement(children, props);\n  }\n\n  render() {\n    const _this$props = this.props,{ children } = _this$props,props = _objectWithoutProperties(_this$props, _excluded);\n    return /*#__PURE__*/(\n      _jsx(PagesContext.Provider, { value: props }, void 0,\n      Connect.renderChildren(children, props)));\n\n\n  }}\n\n\n\n\n\n\nexport const mapStateToProps = (state, props) =>\nObject.keys(props).reduce((mappedProps, propName) => {\n  if (propName === 'children') {\n    return Object.assign(mappedProps, { children: props.children });\n  }\n\n  const value = objectPath(props[propName], state);\n  return Object.assign(mappedProps, { [propName]: value });\n}, {});\n\nexport default connectAdvanced(() => mapStateToProps)(Connect);","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import React from 'react';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport PropTypes from 'prop-types';\nimport Immutable from 'immutable';\n\nimport { Map, Markers } from \"../../Map\";\nimport { TemplateLabel } from \"../../Layout\";\nimport {\ngetAndSelectDocument,\nselectDocuments,\nunselectAllDocuments } from \"../../Library/actions/libraryActions\";\n\nimport { wrapDispatch } from \"../../Multireducer\";\n\nimport Loader from \"../../components/Elements/Loader\";\nimport markdownDatasets from \"../markdownDatasets\";\n\nconst renderInfo = (marker) => /*#__PURE__*/\n_jsx(\"div\", {}, void 0, /*#__PURE__*/\n_jsx(TemplateLabel, { template: marker.properties.entity.template }), \"\\xA0 \",\nmarker.properties.entity.title);\n\n\n\nexport const MapComponent = (props) => {\n  const { data, classname, scrollZoom, showControls } = props;\n  const clickOnMarker = (marker) => props.getAndSelectDocument(marker.properties.entity.sharedId);\n  const clickOnCluster = (cluster) => {\n    props.unselectAllDocuments();\n    props.selectDocuments(cluster.map((m) => m.properties.entity));\n  };\n\n  return /*#__PURE__*/(\n    _jsx(\"div\", { className: `Map ${classname}` }, void 0,\n    data ? /*#__PURE__*/\n    _jsx(Markers, { entities: data }, void 0,\n    (markers) => /*#__PURE__*/\n    _jsx(Map, {\n      markers: markers,\n      zoom: 1,\n      clickOnMarker: clickOnMarker,\n      clickOnCluster: clickOnCluster,\n      renderPopupInfo: renderInfo,\n      cluster: true,\n      scrollZoom: scrollZoom === 'true',\n      showControls: showControls === 'true' })) : /*#__PURE__*/\n\n\n\n\n    _jsx(Loader, {})));\n\n\n\n};\n\nMapComponent.defaultProps = {\n  classname: '',\n  data: null,\n  scrollZoom: null,\n  showControls: null };\n\n\n\n\n\n\n\n\n\n\n\n\nexport const mapStateToProps = (state, props) => ({\n  data: markdownDatasets.getRows(state, props) });\n\n\nexport const mapDispatchToProps = (dispatch) =>\nbindActionCreators(\n{ getAndSelectDocument, selectDocuments, unselectAllDocuments },\nwrapDispatch(dispatch, 'library'));\n\n\nexport default connect(mapStateToProps, mapDispatchToProps, null)(MapComponent);","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import { Link } from 'react-router';\nimport PropTypes from 'prop-types';\nimport React from 'react';\n\nconst PayPalDonateLink = ({ paypalid, classname, children, currency, amount }) => {\n  const amountParam = amount ? `&amount=${amount}` : '';\n  const url = `https://www.paypal.com/cgi-bin/webscr?cmd=_donations&business=${paypalid}&currency_code=${currency}${amountParam}&source=url`;\n  classname += ' paypal-donate';\n  return /*#__PURE__*/(\n    _jsx(Link, { className: classname, href: url, target: \"_blank\", rel: \"noreferrer noopener\" }, void 0,\n    children));\n\n\n};\n\nPayPalDonateLink.defaultProps = {\n  children: '',\n  classname: '',\n  amount: null };\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nexport default PayPalDonateLink;","function _extends() {_extends = Object.assign ? Object.assign.bind() : function (target) {for (var i = 1; i < arguments.length; i++) {var source = arguments[i];for (var key in source) {if (Object.prototype.hasOwnProperty.call(source, key)) {target[key] = source[key];}}}return target;};return _extends.apply(this, arguments);}function ownKeys(object, enumerableOnly) {var keys = Object.keys(object);if (Object.getOwnPropertySymbols) {var symbols = Object.getOwnPropertySymbols(object);enumerableOnly && (symbols = symbols.filter(function (sym) {return Object.getOwnPropertyDescriptor(object, sym).enumerable;})), keys.push.apply(keys, symbols);}return keys;}function _objectSpread(target) {for (var i = 1; i < arguments.length; i++) {var source = null != arguments[i] ? arguments[i] : {};i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {_defineProperty(target, key, source[key]);}) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));});}return target;}function _defineProperty(obj, key, value) {if (key in obj) {Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });} else {obj[key] = value;}return obj;}var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };} /* eslint-disable react/jsx-pascal-case */\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport Immutable from 'immutable';\nimport { MetadataFormFields, validator, prepareMetadataAndFiles } from \"../../Metadata\";\nimport { LocalForm, actions, Control } from 'react-redux-form';\nimport { Captcha } from \"../../ReactReduxForms\";\nimport { Translate } from \"../../I18N\";\nimport { publicSubmit } from \"../../Uploads/actions/uploadsActions\";\nimport { bindActionCreators } from 'redux';\nimport { FormGroup } from \"../../Forms\";\nimport { Icon } from \"../../UI\";\nimport Loader from \"../../components/Elements/Loader\";\nimport \"./scss/public-form.scss\";\nimport Dropzone from 'react-dropzone';\nimport { BrowserView, MobileView } from 'react-device-detect';\nimport { generateID } from \"../../../shared/IDGenerator\";\n\nclass PublicForm extends Component {\n  static renderTitle(template) {\n    const titleProperty = template.get('commonProperties').find((p) => p.get('name') === 'title');\n    const useGeneratedId = Boolean(titleProperty.get('generatedId'));\n\n    let input = /*#__PURE__*/_jsx(Control.text, { id: \"title\", className: \"form-control\", model: \".title\" });\n\n    if (useGeneratedId) {\n      input = /*#__PURE__*/React.cloneElement(input, { defaultValue: generateID(3, 4, 4) });\n    }\n\n    return /*#__PURE__*/(\n      _jsx(FormGroup, { model: \".title\" }, \"title\", /*#__PURE__*/\n      _jsx(\"ul\", { className: \"search__filter\" }, void 0, /*#__PURE__*/\n      _jsx(\"li\", {}, void 0, /*#__PURE__*/\n      _jsx(\"label\", { htmlFor: \"title\" }, void 0, /*#__PURE__*/\n      _jsx(Translate, { context: template.get('_id') }, void 0, titleProperty.get('label')), /*#__PURE__*/\n      _jsx(\"span\", { className: \"required\" }, void 0, \"*\"))), /*#__PURE__*/\n\n\n      _jsx(\"li\", { className: \"wide\" }, void 0, input))));\n\n\n\n  }\n\n  static renderSubmitState() {\n    return /*#__PURE__*/(\n      _jsx(\"div\", { className: \"public-form submiting\" }, void 0, /*#__PURE__*/\n      _jsx(\"h3\", {}, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Submiting\")), /*#__PURE__*/\n\n      _jsx(Loader, {})));\n\n\n  }\n\n  constructor(props) {\n    super(props);\n    this.removeAttachment = this.removeAttachment.bind(this);\n    this.fileDropped = this.fileDropped.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.validators = _objectSpread({\n      captcha: { required: (val) => val && val.text.length } },\n    validator.generate(props.template.toJS()));\n\n    const generatedIdTitle = props.template.\n    get('commonProperties').\n    find((p) => p.get('name') === 'title' && p.get('generatedId') === true);\n    this.state = { submiting: false, files: [], generatedIdTitle };\n  }\n\n  fileDropped(files) {\n    const uploadedFiles = files;\n    this.state.files.forEach((file) => uploadedFiles.push(file));\n    this.setState({ files: uploadedFiles });\n  }\n\n  async removeAttachment(removedFile) {\n    await this.setState((prevState) => ({\n      files: prevState.files.filter((file) => file !== removedFile) }));\n\n    if (!this.state.files.length) {\n      const input = document.querySelector('input[name=\"publicform.file\"]');\n      input.value = '';\n    }\n  }\n\n  attachDispatch(dispatch) {\n    this.formDispatch = dispatch;\n  }\n\n  resetForm() {\n    this.formDispatch(actions.reset('publicform'));\n    if (this.state.generatedIdTitle) {\n      this.formDispatch(actions.load('publicform', { title: generateID(3, 4, 4) }));\n    }\n  }\n\n  async handleSubmit(_values) {\n    const { submit, remote } = this.props;\n    const values = await prepareMetadataAndFiles(\n    _values,\n    this.state.files,\n    this.props.template.toJS());\n\n    try {\n      const submitResult = await submit(values, remote);\n      this.setState({ submiting: true });\n      await submitResult.promise;\n      this.resetForm();\n      this.setState({ submiting: false, files: [] });\n    } catch (e) {\n      this.setState({ submiting: false });\n    }\n    this.refreshCaptcha();\n  }\n\n  renderFileField(id, options) {\n    const defaults = { className: 'form-control on-mobile', model: `.${id}` };\n    const props = Object.assign(defaults, options);\n    return /*#__PURE__*/(\n      _jsx(\"div\", { className: \"form-group\" }, void 0, /*#__PURE__*/\n      _jsx(\"ul\", { className: \"search__filter\" }, void 0, /*#__PURE__*/\n      _jsx(\"li\", { className: \"attachments-list\" }, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, id === 'file' ? 'Document' : 'Attachments'), /*#__PURE__*/\n      _jsx(BrowserView, {}, void 0, /*#__PURE__*/\n      _jsx(Dropzone, {\n        onDrop: this.fileDropped,\n        className: \"dropzone\",\n        accept: id === 'file' ? '.pdf' : undefined }, void 0, /*#__PURE__*/\n\n      _jsx(\"label\", {}, void 0, /*#__PURE__*/\n      _jsx(\"div\", { className: \"text-content\" }, void 0, /*#__PURE__*/\n      _jsx(\"div\", { id: \"icon\" }, void 0, /*#__PURE__*/\n      _jsx(Icon, { icon: \"cloud-upload-alt\" })), /*#__PURE__*/\n\n      _jsx(\"div\", { id: \"upload-text\" }, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Drop your files here to upload or\")), /*#__PURE__*/\n\n      _jsx(\"div\", { id: \"upload-button\" }, void 0, /*#__PURE__*/\n      _jsx(\"div\", { id: \"button\" }, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Select files on your device\"))))))), /*#__PURE__*/\n\n\n\n\n\n\n      _jsx(MobileView, {}, void 0, /*#__PURE__*/\n      React.createElement(Control.file, _extends({\n        id: id },\n      props, {\n        onChange: (e) => this.fileDropped([...e.target.files]) }))), /*#__PURE__*/\n\n\n      _jsx(\"div\", { className: \"preview-list\" }, void 0, /*#__PURE__*/\n      _jsx(\"ul\", {}, void 0,\n      this.state.files.map((file) => /*#__PURE__*/\n      _jsx(\"li\", {}, file.preview, /*#__PURE__*/\n      _jsx(\"div\", { className: \"preview-title\" }, void 0, file.name), /*#__PURE__*/\n      _jsx(\"div\", {}, void 0, /*#__PURE__*/\n      _jsx(\"span\", { onClick: () => this.removeAttachment(file) }, void 0, /*#__PURE__*/\n      _jsx(Icon, { icon: \"times\" }), \"\\xA0\", /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Remove\")))))))))));\n\n\n\n\n\n\n\n\n\n\n  }\n\n  renderCaptcha() {\n    return /*#__PURE__*/(\n      _jsx(FormGroup, { model: \".captcha\" }, \"captcha\", /*#__PURE__*/\n      _jsx(\"ul\", { className: \"search__filter\" }, void 0, /*#__PURE__*/\n      _jsx(\"li\", {}, void 0, /*#__PURE__*/\n      _jsx(\"label\", {}, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Captcha\"), /*#__PURE__*/\n      _jsx(\"span\", { className: \"required\" }, void 0, \"*\"))), /*#__PURE__*/\n\n\n      _jsx(\"li\", { className: \"wide\" }, void 0, /*#__PURE__*/\n      _jsx(Captcha, {\n        remote: this.props.remote,\n        refresh: (refresh) => {\n          this.refreshCaptcha = refresh;\n        },\n        model: \".captcha\" })))));\n\n\n\n\n\n  }\n\n  render() {\n    const { template, thesauris, file, attachments } = this.props;\n    const { submiting } = this.state;\n    return /*#__PURE__*/(\n      _jsx(LocalForm, {\n        validators: this.validators,\n        model: \"publicform\",\n        getDispatch: (dispatch) => this.attachDispatch(dispatch),\n        onSubmit: this.handleSubmit }, void 0,\n\n      submiting && PublicForm.renderSubmitState(),\n      !submiting && /*#__PURE__*/\n      _jsx(\"div\", { className: \"public-form\" }, void 0,\n      PublicForm.renderTitle(template), /*#__PURE__*/\n      _jsx(MetadataFormFields, {\n        thesauris: thesauris,\n        model: \"publicform\",\n        template: template,\n        boundChange: (formModel, value) =>\n        this.formDispatch(actions.change(formModel, value)) }),\n\n\n      file ? this.renderFileField('file', { accept: '.pdf' }) : false,\n      attachments ? this.renderFileField('attachments', { multiple: 'multiple' }) : false,\n      this.renderCaptcha(), /*#__PURE__*/\n      _jsx(\"button\", { type: \"submit\", className: \"btn btn-success\" }, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Submit\")))));\n\n\n\n\n\n  }}\n\n\n\n\n\n\n\n\n\nexport const mapStateToProps = (state, props) => ({\n  template: state.templates.find((template) => template.get('_id') === props.template),\n  thesauris: state.thesauris,\n  file: props.file !== undefined,\n  remote: props.remote !== undefined,\n  attachments: props.attachments !== undefined });\n\nexport function mapDispatchToProps(dispatch) {\n  return bindActionCreators({ submit: publicSubmit }, dispatch);\n}\nexport default connect(mapStateToProps, mapDispatchToProps)(PublicForm);","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\n\nimport markdownDatasets from \"../markdownDatasets\";\nimport PagesContext from \"./Context\";\nimport { objectPath } from \"../utils\";\n\nexport class ValueComponent extends Component {\n  renderChildren(_value) {\n    const { path } = this.props;\n    return path ? objectPath(path, _value) : _value;\n  }\n\n  render() {\n    const { property, value } = this.props;\n    return property ?\n    this.renderChildren(value) : /*#__PURE__*/\n\n    _jsx(PagesContext.Consumer, {}, void 0, (val) => this.renderChildren(val));\n\n  }}\n\n\nValueComponent.defaultProps = {\n  value: '-',\n  path: '',\n  property: '' };\n\n\n\n\n\n\n\n\nexport const mapStateToProps = (state, props) =>\nprops.property ? { value: markdownDatasets.getMetadataValue(state, props) } : {};\n\nexport default connect(mapStateToProps)(ValueComponent);","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import { Form, Field } from 'react-redux-form';\nimport { browserHistory } from 'react-router';\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport rison from 'rison-node';\nimport { Icon } from \"../../UI\";\nimport { t } from \"../../I18N\";\nimport ModalTips from \"../../App/ModalTips\";\nimport { SearchTipsContent } from \"../../App/SearchTipsContent\";\n\nconst search = ({ searchTerm }) => {\n  browserHistory.push(`/library/?q=${rison.encode({ searchTerm })}`);\n};\n\nconst SearchBox = ({ placeholder, classname }) => /*#__PURE__*/\n_jsx(\"div\", { className: `search-box ${classname}` }, void 0, /*#__PURE__*/\n_jsx(Form, { model: \"library.search\", onSubmit: search }, void 0, /*#__PURE__*/\n_jsx(\"div\", { className: \"input-group\" }, void 0, /*#__PURE__*/\n_jsx(\"button\", { type: \"submit\", className: \"btn btn-primary\" }, void 0, /*#__PURE__*/\n_jsx(Icon, { icon: \"search\" })), /*#__PURE__*/\n\n_jsx(Field, { model: \".searchTerm\" }, void 0, /*#__PURE__*/\n_jsx(\"input\", { className: \"form-control\", type: \"text\", placeholder: placeholder })))), /*#__PURE__*/\n\n\n\n_jsx(ModalTips, {\n  label: t('System', 'Search Tips', null, false),\n  title: t('System', 'Narrow down your searches', null, false) }, void 0, /*#__PURE__*/\n\n_jsx(SearchTipsContent, {})));\n\n\n\n\nSearchBox.defaultProps = {\n  placeholder: '',\n  classname: '' };\n\n\n\n\n\n\n\nexport default SearchBox;","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\n\nimport { wrapDispatch } from \"../../Multireducer\";\nimport { getAndSelectDocument as getAndSelectDocumentAction } from \"../../Library/actions/libraryActions\";\n\nclass EntityInfo extends Component {\n  constructor(props) {\n    super(props);\n    this.getAndSelect = this.getAndSelect.bind(this);\n  }\n\n  async getAndSelect(sharedId) {\n    const { getAndSelectDocument } = this.props;\n    getAndSelectDocument(sharedId);\n  }\n\n  render() {\n    const { entity, tag, classname, children } = this.props;\n    return /*#__PURE__*/React.createElement(\n    tag,\n    { className: classname, onClick: () => this.getAndSelect(entity) },\n    children);\n\n  }}\n\n\nEntityInfo.defaultProps = {\n  entity: '',\n  tag: 'div',\n  children: '',\n  classname: '' };\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nexport const mapDispatchToProps = (dispatch) =>\nbindActionCreators(\n{ getAndSelectDocument: getAndSelectDocumentAction },\nwrapDispatch(dispatch, 'library'));\n\n\nexport default connect(() => ({}), mapDispatchToProps)(EntityInfo);","import loadable from '@loadable/component';\n\nimport { Link } from 'react-router';\nimport { Icon } from \"../../UI\";\nimport Counter from \"./Counter\";\nimport ContactForm from \"./ContactForm\";\nimport { EntityData } from \"./EntityData\";\nimport { EntitySection } from \"./EntitySection\";\nimport EntityLink from \"./EntityLink\";\nimport ItemList from \"./ItemList\";\nimport Repeat from \"./Repeat\";\nimport Context from \"./Context\";\nimport Connect from \"./Connect\";\nimport Map from \"./Map\";\nimport MarkdownLink from \"./MarkdownLink\";\nimport MarkdownMedia from \"./MarkdownMedia\";\nimport PayPalDonateLink from \"./PayPalDonateLink\";\nimport PublicForm from \"./PublicForm\";\nimport Value from \"./Value\";\nimport SearchBox from \"./SearchBox\";\nimport EntityInfo from \"./EntityInfo\";\n\nconst BarChart = loadable(async () =>\nimport( /* webpackChunkName: \"LazyLoadBarChart\" */\"./BarChart.js\"));\n\nconst FreeBarChart = loadable(async () =>\nimport( /* webpackChunkName: \"LazyLoadFreeBarChart\" */\"./FreeBarChart.tsx\"));\n\n\nconst Slideshow = loadable(async () =>\nimport( /* webpackChunkName: \"LazyLoadSlideshow\" */\"./Slideshow.js\"));\n\n\nconst PieChart = loadable(async () =>\nimport( /* webpackChunkName: \"LazyLoadPieChart\" */\"./PieChart.js\"));\n\n\nconst ListChart = loadable(async () =>\nimport( /* webpackChunkName: \"LazyLoadListChart\" */\"./ListChart.js\"));\n\nconst GaugeChart = loadable(async () =>\nimport( /* webpackChunkName: \"LazyLoadGaugeChart\" */\"./GaugeChart.js\"));\n\n\nexport {\nMarkdownMedia,\nContactForm,\nContext,\nConnect,\nEntityData,\nEntityLink,\nItemList,\nSlideshow,\nMarkdownLink,\nPayPalDonateLink,\nPublicForm,\nSearchBox,\nCounter,\nBarChart,\nFreeBarChart,\nPieChart,\nListChart,\nRepeat,\nGaugeChart,\nValue,\nIcon,\nMap,\nLink,\nEntityInfo,\nEntitySection };","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import Immutable from 'immutable';\nimport PropTypes from 'prop-types';\nimport React, { Component } from 'react';\n\nimport { StackedDualBarChart, arrayUtils } from \"../../../Charts\";\nimport Loader from \"../../../components/Elements/Loader\";\nimport { t } from \"../../../I18N\";\n\nexport const countriesTemplate = '58b2f3a35d59f31e1345b480';\nexport const countryKey = 'pa_s';\n\nclass CejilChart extends Component {\n  componentDidMount() {\n    this.props.getData.call(this).then(([groupedResults, setA, setB]) => {\n      this.setState({ groupedResults, setA, setB });\n    });\n  }\n\n  render() {\n    let output = /*#__PURE__*/_jsx(Loader, {});\n\n    if (this.state && this.state.groupedResults) {\n      const { aggregations } = this.state.groupedResults;\n      const countriesData = this.props.thesauris.find(\n      (thesaury) => thesaury.get('_id') === countriesTemplate);\n\n\n      let data = arrayUtils.sortValues(\n      aggregations.all[countryKey].buckets.\n      filter((country) => country.filtered.doc_count && country.key !== 'any').\n      map((_country) => {\n        const country = _country;\n        const foundCountry = countriesData.get('values').find((v) => v.get('id') === country.key);\n        country.label = foundCountry ?\n        foundCountry.get('label') :\n        t('System', 'No Value', null, false);\n        country.results = country.filtered.doc_count;\n        return country;\n      }));\n\n\n      data = this.props.prepareData.call(this, data, this.state.setA, this.state.setB);\n\n      output = /*#__PURE__*/\n      _jsx(\"div\", { className: \"item item-chart\" }, void 0, /*#__PURE__*/\n      _jsx(\"p\", {}, void 0, this.props.label), /*#__PURE__*/\n      _jsx(StackedDualBarChart, { data: data, chartLabel: this.props.label }));\n\n\n    }\n\n    return /*#__PURE__*/(\n      _jsx(\"div\", { className: \"item-group-charts\", style: { paddingTop: '15px', paddingRight: '15px' } }, void 0,\n      output));\n\n\n  }}\n\n\nCejilChart.defaultProps = {\n  label: null };\n\n\n\n\n\n\n\n\n\nexport default CejilChart;","function findBucketsByCountry(set, countryKey, key) {\n  return set.aggregations.all[countryKey].buckets.find((country) => country.key === key);\n}\n\nexport default {\n  findBucketsByCountry };","import { connect } from 'react-redux';\n\nimport { RequestParams } from \"../../../utils/RequestParams\";\nimport api from \"../../../Search/SearchAPI\";\nimport { t } from \"../../../I18N\";\n\nimport CejilChart from \"./CejilChart\";\nimport parsingUtils from \"../utils/parsingUtils\";\n\nconst casesTemplate = '58b2f3a35d59f31e1345b48a';\nconst provisionalMeasuresTemplate = '58b2f3a35d59f31e1345b4a4';\nconst countryKey = 'pa_s';\n\nfunction conformSearchQuery(types) {\n  return api.search(new RequestParams({ types, limit: 0 }));\n}\n\nfunction getData() {\n  const types = [\n  [casesTemplate, provisionalMeasuresTemplate],\n  [casesTemplate],\n  [provisionalMeasuresTemplate]];\n\n  return Promise.all(types.map(conformSearchQuery));\n}\n\nfunction prepareData(countries, setA, setB) {\n  const caseTemptale = this.props.templates.find((template) => template.get('_id') === casesTemplate);\n  const caseLabel = t(casesTemplate, caseTemptale.get('name'), null, false);\n\n  const provisionalMeasureTemplate = this.props.templates.find(\n  (template) => template.get('_id') === provisionalMeasuresTemplate);\n\n  const provisionalMeasureLabel = t(\n  provisionalMeasuresTemplate,\n  provisionalMeasureTemplate.get('name'),\n  null,\n  false);\n\n\n  return countries.map((_country) => {\n    const country = _country;\n    const caseResults = parsingUtils.findBucketsByCountry(setA, countryKey, country.key);\n    const provisionalMeasureResults = parsingUtils.findBucketsByCountry(\n    setB,\n    countryKey,\n    country.key);\n\n\n    country.name = country.label;\n\n    country.setALabel = caseLabel;\n    country.setAValue = caseResults ? caseResults.filtered.doc_count : 0;\n\n    country.setBLabel = provisionalMeasureLabel;\n    country.setBValue = provisionalMeasureResults ?\n    provisionalMeasureResults.filtered.doc_count :\n    0;\n\n    return country;\n  });\n}\n\nexport function mapStateToProps({ templates, thesauris }) {\n  return { templates, thesauris, getData, prepareData };\n}\n\nexport default connect(mapStateToProps)(CejilChart);","function ownKeys(object, enumerableOnly) {var keys = Object.keys(object);if (Object.getOwnPropertySymbols) {var symbols = Object.getOwnPropertySymbols(object);enumerableOnly && (symbols = symbols.filter(function (sym) {return Object.getOwnPropertyDescriptor(object, sym).enumerable;})), keys.push.apply(keys, symbols);}return keys;}function _objectSpread(target) {for (var i = 1; i < arguments.length; i++) {var source = null != arguments[i] ? arguments[i] : {};i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {_defineProperty(target, key, source[key]);}) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));});}return target;}function _defineProperty(obj, key, value) {if (key in obj) {Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });} else {obj[key] = value;}return obj;}import { connect } from 'react-redux';\n\nimport { RequestParams } from \"../../../utils/RequestParams\";\nimport api from \"../../../Search/SearchAPI\";\nimport { t } from \"../../../I18N\";\n\nimport CejilChart from \"./CejilChart\";\nimport parsingUtils from \"../utils/parsingUtils\";\n\nexport const judgesCommisionersTemplate = '58b2f3a35d59f31e1345b4b6';\nexport const countryKey = 'pa_s';\nexport const male = 'dedcc624-0e11-4d4e-90d5-d1c0ea4c7a18';\nexport const female = 'f2457229-e142-4b74-b595-2ac2f9b5f64e';\nexport const sexTranslationsContext = '58b2f3a35d59f31e1345b52d';\n\nfunction assignFilter(filters, sex) {\n  return _objectSpread(_objectSpread({}, filters), {}, { sexo: { values: [sex] } });\n}\n\nfunction conformSearchQuery(filters) {\n  return api.search(new RequestParams({ types: [judgesCommisionersTemplate], filters, limit: 0 }));\n}\n\nfunction getData() {\n  const filters = {};\n  filters[this.props.filterProperty] = { from: -2208988800 };\n\n  const maleFilters = assignFilter(filters, male);\n  const femaleFilters = assignFilter(filters, female);\n\n  return Promise.all([filters, maleFilters, femaleFilters].map(conformSearchQuery));\n}\n\nfunction prepareData(countries, setA, setB) {\n  return countries.map((_country) => {\n    const country = _country;\n    const maleResults = parsingUtils.findBucketsByCountry(setA, countryKey, country.key);\n    const femaleResults = parsingUtils.findBucketsByCountry(setB, countryKey, country.key);\n\n    country.name = country.label;\n\n    country.setALabel = t(sexTranslationsContext, 'Hombre', null, false);\n    country.setAValue = maleResults ? maleResults.filtered.doc_count : 0;\n\n    country.setBLabel = t(sexTranslationsContext, 'Mujer', null, false);\n    country.setBValue = femaleResults ? femaleResults.filtered.doc_count : 0;\n\n    return country;\n  });\n}\n\nexport function mapStateToProps({ thesauris }, { filterProperty = 'mandatos_de_la_corte' }) {\n  return { thesauris, getData, prepareData, filterProperty };\n}\n\nexport default connect(mapStateToProps)(CejilChart);","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\n\nimport { I18NLink } from \"../../../I18N\";\nimport { Icon } from \"../../../UI\";\n\nimport api from \"../../../Search/SearchAPI\";\n\nconst processesIds = ['58b2f3a35d59f31e1345b48a'];\nconst provisionalMeasuresIds = ['58b2f3a35d59f31e1345b4a4'];\nconst documentsIds = [\n'58b2f3a35d59f31e1345b4ac',\n'58b2f3a35d59f31e1345b471',\n'58b2f3a35d59f31e1345b482',\n'58b2f3a35d59f31e1345b479'];\n\n\nexport class cejilChart001 extends Component {\n  getData() {\n    api.search({ limit: 0 }).then((results) => {\n      this.setState({ data: results.aggregations.all });\n    });\n  }\n\n  conformLibraryLink(types, link) {\n    const escapedValues = types.map((t) => `%27${t}%27`);\n    if (link && link.indexOf('/library/') !== -1) {\n      return link.substring(link.indexOf('/library/'), link.length);\n    }\n    return `/library/?q=(order:desc,sort:creationDate,types:!(${escapedValues.join(\n    ',')\n    }),userSelectedSorting:!t)`;\n  }\n\n  getCount(ids) {\n    return ids.reduce((count, id) => {\n      const bucket = this.state.data.types.buckets.find((b) => b.key === id);\n      return count + (bucket ? bucket.filtered.doc_count : 0);\n    }, 0);\n  }\n\n  componentDidMount() {\n    this.getData();\n  }\n\n  render() {\n    const { title = '', buttons = [], links = [] } = this.props;\n    const Loader = /*#__PURE__*/_jsx(Icon, { icon: \"spinner\", pulse: true, fixedWidth: true });\n\n    let processesCount = Loader;\n    let provisionalMeasuresCount = Loader;\n    let documentsCount = Loader;\n\n    if (this.state && this.state.data) {\n      processesCount = this.getCount(processesIds);\n      provisionalMeasuresCount = this.getCount(provisionalMeasuresIds);\n      documentsCount = this.getCount(documentsIds);\n    }\n\n    return /*#__PURE__*/(\n      _jsx(\"div\", { className: \"hero\" }, void 0, /*#__PURE__*/\n      _jsx(\"h1\", {}, void 0, title), /*#__PURE__*/\n      _jsx(\"div\", { className: \"hero-stats\" }, void 0, /*#__PURE__*/\n      _jsx(I18NLink, {\n        to: this.conformLibraryLink(processesIds, links.length && links[0] ? links[0] : null) }, void 0, /*#__PURE__*/\n\n      _jsx(\"h2\", {}, void 0, processesCount), /*#__PURE__*/\n      _jsx(\"span\", {}, void 0, buttons[0])), /*#__PURE__*/\n\n      _jsx(I18NLink, {\n        to: this.conformLibraryLink(\n        provisionalMeasuresIds,\n        links.length && links[1] ? links[1] : null) }, void 0, /*#__PURE__*/\n\n\n      _jsx(\"h2\", {}, void 0, provisionalMeasuresCount), /*#__PURE__*/\n      _jsx(\"span\", {}, void 0, buttons[1])), /*#__PURE__*/\n\n      _jsx(I18NLink, {\n        to: this.conformLibraryLink(documentsIds, links.length && links[2] ? links[2] : null) }, void 0, /*#__PURE__*/\n\n      _jsx(\"h2\", {}, void 0, documentsCount), /*#__PURE__*/\n      _jsx(\"span\", {}, void 0, buttons[2])))));\n\n\n\n\n  }}\n\n\n\n\n\n\n\n\n\nexport function mapStateToProps({ templates, thesauris }) {\n  return { templates, thesauris };\n}\n\nexport default connect(mapStateToProps)(cejilChart001);","import cejilChart001 from \"./components/cejilChart001\";\nimport CejilChart002 from \"./components/CejilChart002\";\nimport cejilHero from \"./components/cejilHero\";\n\nexport default {\n  cejilChart001,\n  CejilChart002,\n  cejilHero };","function ownKeys(object, enumerableOnly) {var keys = Object.keys(object);if (Object.getOwnPropertySymbols) {var symbols = Object.getOwnPropertySymbols(object);enumerableOnly && (symbols = symbols.filter(function (sym) {return Object.getOwnPropertyDescriptor(object, sym).enumerable;})), keys.push.apply(keys, symbols);}return keys;}function _objectSpread(target) {for (var i = 1; i < arguments.length; i++) {var source = null != arguments[i] ? arguments[i] : {};i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {_defineProperty(target, key, source[key]);}) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));});}return target;}function _defineProperty(obj, key, value) {if (key in obj) {Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });} else {obj[key] = value;}return obj;}import React from 'react';\n\nimport HtmlToReact, { Parser } from 'html-to-react';\nimport instanceMarkdownIt from 'markdown-it';\nimport mdContainer from 'markdown-it-container';\nimport * as CustomComponents from \"./components\";\n\nconst components = Object.keys(CustomComponents).reduce(\n(map, key) => _objectSpread(_objectSpread({}, map), {}, { [key.toLowerCase()]: CustomComponents[key] }),\n{});\n\nconst availableComponents = Object.keys(components);\n\nconst myParser = new Parser({ xmlMode: true });\nconst processNodeDefinitions = new HtmlToReact.ProcessNodeDefinitions(React);\nconst customComponentMatcher = '{\\\\w+}\\\\(.+\\\\)\\\\(.+\\\\)|{\\\\w+}\\\\(.+\\\\)';\n\nconst dynamicCustomContainersConfig = {\n  validate() {\n    return true;\n  },\n  render(tokens, idx) {\n    const token = tokens[idx];\n\n    if (token.type === 'container_dynamic_open') {\n      return `<div class=\"${token.info.trim()}\">`;\n    }\n    return '</div>';\n  } };\n\n\nconst markdownIt = instanceMarkdownIt({ xhtmlOut: true }).use(\nmdContainer,\n'dynamic',\ndynamicCustomContainersConfig);\n\nconst markdownItWithHtml = instanceMarkdownIt({ html: true, xhtmlOut: true }).use(\nmdContainer,\n'dynamic',\ndynamicCustomContainersConfig);\n\nconst customComponentTypeMatcher = /{(.+)}\\(/;\n\nconst getConfig = (string) => {\n  const customComponentOptionsMatcher = /{\\w+}(\\(.+\\)\\(.+\\))|{\\w+}(\\(.+\\))/g;\n  let config;\n  const configMatch = customComponentOptionsMatcher.exec(string);\n  if (configMatch) {\n    config = configMatch[1] || configMatch[2];\n  }\n\n  return config;\n};\n\nconst removeWhitespacesInsideTableTags = (html) =>\nhtml.\nreplace(\n/((\\/)?(table|thead|tbody|tr|th|td)>)[\\s\\n]+(<(\\/)?(table|thead|tbody|tr|th|td))/g,\n'$1$4').\n\nreplace(\n/((\\/)?(table|thead|tbody|tr|th|td)>)[\\s\\n]+(<(\\/)?(table|thead|tbody|tr|th|td))/g,\n'$1$4');\n\n\nconst getNodeTypeAndConfig = (_config, node, isCustomComponentPlaceholder, isCustomComponent) => {\n  let type;\n  let config = _config;\n\n  if (isCustomComponentPlaceholder) {\n    [, type] = node.children[0].data.match(customComponentTypeMatcher);\n    config = getConfig(node.children[0].data);\n  }\n\n  if (isCustomComponent) {\n    [, type] = node.data.match(customComponentTypeMatcher);\n    config = getConfig(node.data);\n  }\n\n  type = availableComponents.includes(node.name ? node.name.toLowerCase() : '') ?\n  components[node.name.toLowerCase()] :\n  type;\n\n  return { type, config };\n};\n\nexport default ((_markdown, callback, withHtml = false) => {\n  let renderer = markdownIt;\n  if (withHtml) {\n    renderer = markdownItWithHtml;\n  }\n\n  const markdown = _markdown.replace(new RegExp(`(${customComponentMatcher})`, 'g'), '$1\\n');\n\n  const html = removeWhitespacesInsideTableTags(\n  renderer.\n  render(markdown).\n  replace(\n  new RegExp(`<p>(${customComponentMatcher})</p>`, 'g'),\n  '<placeholder>$1</placeholder>'));\n\n\n\n  const isValidNode = (node) => {\n    const isBadNode = node.type === 'tag' && node.name.match(/<|>/g);\n    if (isBadNode) {\n      return false;\n    }\n    return true;\n  };\n\n  const processingInstructions = [\n  {\n    shouldProcessNode() {\n      return true;\n    },\n\n    processNode: (node, children, index) => {\n      if (\n      node.name && (\n      node.name.toLowerCase() === 'dataset' || node.name.toLowerCase() === 'query'))\n      {\n        return false;\n      }\n      const isCustomComponentPlaceholder =\n      node.name === 'placeholder' &&\n      node.children &&\n      node.children[0] &&\n      node.children[0].data &&\n      node.children[0].data.match(customComponentMatcher);\n\n      const isCustomComponent =\n      node && (\n      !node.parent || node.parent && node.parent.name !== 'placeholder') &&\n      node.data &&\n      node.data.match(customComponentMatcher);\n\n      const { type, config } = getNodeTypeAndConfig(\n      node.attribs,\n      node,\n      isCustomComponentPlaceholder,\n      isCustomComponent);\n\n\n      const newNode = callback(type, config, index, children);\n\n      return newNode || processNodeDefinitions.processDefaultNode(node, children, index);\n    } }];\n\n\n\n  return myParser.parseWithInstructions(html, isValidNode, processingInstructions);\n});","function _extends() {_extends = Object.assign ? Object.assign.bind() : function (target) {for (var i = 1; i < arguments.length; i++) {var source = arguments[i];for (var key in source) {if (Object.prototype.hasOwnProperty.call(source, key)) {target[key] = source[key];}}}return target;};return _extends.apply(this, arguments);}var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport rison from 'rison-node';\nimport { Translate } from \"../I18N\";\nimport { MarkdownLink, SearchBox, MarkdownMedia, ItemList } from \"./components\";\nimport CustomHookComponents from \"./CustomHooks\";\n\nimport markdownToReact from \"./markdownToReact\";\n\nclass MarkdownViewer extends Component {\n  static errorHtml(index, message) {\n    return /*#__PURE__*/(\n      _jsx(\"p\", { className: \"error\" }, index, /*#__PURE__*/\n      _jsx(\"br\", {}), /*#__PURE__*/\n      _jsx(\"strong\", {}, void 0, /*#__PURE__*/\n      _jsx(\"i\", {}, void 0, /*#__PURE__*/\n      _jsx(Translate, { translationKey: \"Custom component error\" }, void 0, \"Custom component markup error: unsuported values! Please check your configuration\"))), /*#__PURE__*/\n\n\n\n\n      _jsx(\"br\", {}),\n      message, /*#__PURE__*/\n      _jsx(\"br\", {})));\n\n\n  }\n\n  static customHook(config, index) {\n    const props = rison.decode(config);\n    if (!CustomHookComponents[props.component]) {\n      throw new Error('Invalid  component');\n    }\n    const Element = CustomHookComponents[props.component];\n    return /*#__PURE__*/React.createElement(Element, _extends({}, props, { key: index }));\n  }\n\n  inlineComponent(type, config, index) {\n    const { compact } = this.props;\n    let result;\n    if (type === 'list') {\n      result = this.list(config, index);\n    }\n\n    if (type === 'link') {\n      result = /*#__PURE__*/React.createElement(MarkdownLink, _extends({}, rison.decode(config), { key: index }));\n    }\n\n    if (type === 'searchbox') {\n      result = /*#__PURE__*/React.createElement(SearchBox, _extends({}, rison.decode(config), { key: index }));\n    }\n\n    if (['vimeo', 'youtube', 'media'].includes(type)) {\n      result = /*#__PURE__*/\n      _jsx(\"div\", {}, index, /*#__PURE__*/\n      _jsx(MarkdownMedia, { config: config, compact: compact }, index));\n\n\n    }\n\n    if (type === 'customhook') {\n      result = MarkdownViewer.customHook(config, index);\n    }\n    return result;\n  }\n\n  customComponent(type, config, index, children) {\n    try {\n      if (typeof type === 'function' || typeof type === 'object') {\n        const Element = type;\n        return /*#__PURE__*/(\n          React.createElement(Element, _extends({}, config, { key: index }),\n          children));\n\n\n      }\n\n      if (type) {\n        return this.inlineComponent(type, config, index);\n      }\n    } catch (error) {\n      return MarkdownViewer.errorHtml(index, error.message);\n    }\n\n    return false;\n  }\n\n  list(_config, index) {\n    const listData = this.props.lists[this.renderedLists] || {};\n    const output = /*#__PURE__*/\n    _jsx(ItemList, {\n\n      link: `/library/${listData.params}`,\n      items: listData.items,\n      options: listData.options }, index);\n\n\n    this.renderedLists += 1;\n    return output;\n  }\n\n  render() {\n    this.renderedLists = 0;\n\n    const ReactFromMarkdown = markdownToReact(\n    this.props.markdown,\n    this.customComponent.bind(this),\n    this.props.html);\n\n\n    if (!ReactFromMarkdown) {\n      return false;\n    }\n\n    return /*#__PURE__*/_jsx(\"div\", { className: \"markdown-viewer\" }, void 0, ReactFromMarkdown);\n  }}\n\n\nMarkdownViewer.defaultProps = {\n  lists: [],\n  markdown: '',\n  html: false,\n  compact: false };\n\n\n\n\n\n\n\n\n\nexport default MarkdownViewer;","import MarkdownViewer from \"./MarkdownViewer\";\n\nexport { default as markdownDatasets } from \"./markdownDatasets\";\n\nexport default MarkdownViewer;","function ownKeys(object, enumerableOnly) {var keys = Object.keys(object);if (Object.getOwnPropertySymbols) {var symbols = Object.getOwnPropertySymbols(object);enumerableOnly && (symbols = symbols.filter(function (sym) {return Object.getOwnPropertyDescriptor(object, sym).enumerable;})), keys.push.apply(keys, symbols);}return keys;}function _objectSpread(target) {for (var i = 1; i < arguments.length; i++) {var source = null != arguments[i] ? arguments[i] : {};i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {_defineProperty(target, key, source[key]);}) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));});}return target;}function _defineProperty(obj, key, value) {if (key in obj) {Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });} else {obj[key] = value;}return obj;}import HtmlParser from 'htmlparser2/lib/Parser';\nimport qs from 'qs';\nimport rison from 'rison-node';\nimport Big from 'big.js';\n\nimport searchApi from \"../Search/SearchAPI\";\nimport api from \"../utils/api\";\nimport entitiesApi from \"../Entities/EntitiesAPI\";\n\nconst conformUrl = ({ url = '', geolocation = false }) => {\n  const { q } = qs.parse(url.substring(url.indexOf('?')), { ignoreQueryPrefix: true });\n\n  if (!q) {\n    const defaultValue = geolocation ?\n    { allAggregations: true, limit: 0, geolocation: true } :\n    { allAggregations: true, limit: 0 };\n\n    return defaultValue;\n  }\n\n  const params = rison.decode(q);\n  params.limit = 0;\n\n  if (geolocation) {\n    params.geolocation = true;\n  }\n\n  return params;\n};\n\nconst conformValues = (attribs) => attribs.entity ? attribs : conformUrl(attribs);\n\nconst parseDatasets = (markdown) => {\n  const result = {};\n  const parser = new HtmlParser(\n  {\n    onopentag(name, attribs) {\n      if (name === 'dataset') {\n        result[attribs.name || 'default'] = conformValues(attribs);\n      }\n      if (name === 'query') {\n        result[attribs.name || 'default'] = { url: attribs.url, query: true };\n      }\n    } },\n\n  { decodeEntities: true });\n\n\n  parser.parseComplete(markdown);\n  return result;\n};\n\nconst requestDatasets = (datasets, requestParams) =>\nPromise.all(\nObject.keys(datasets).map((name) => {\n  if (datasets[name].query) {\n    return api.\n    get(datasets[name].url, requestParams).\n    then((data) => ({ data: data.json, name, params: datasets[name] }));\n  }\n  const apiAction = datasets[name].entity ? entitiesApi.get : searchApi.search;\n  const params = datasets[name].entity ? { sharedId: datasets[name].entity } : datasets[name];\n  const postAction = datasets[name].entity ? (d) => d[0] : (d) => d;\n  return apiAction(requestParams.set(params)).\n  then(postAction).\n  then((data) => ({ data, name, params: datasets[name] }));\n}));\n\n\nconst conformDatasets = (sets) =>\nsets.reduce((memo, set) => {\n  const data = set.params.extractFirstRow ? set.data.rows[0] : set.data;\n  return _objectSpread(_objectSpread({}, memo), {}, { [set.name]: data });\n}, {});\n\nconst getAggregations = (state, { property, dataset = 'default' }) => {\n  const data = state.page.datasets.get(dataset);\n  return !data ? undefined : data.getIn(['aggregations', 'all', property, 'buckets']);\n};\n\nconst addValues = (aggregations, values) => {\n  let result = new Big(0);\n  values.forEach((key) => {\n    const value = aggregations.find((bucket) => bucket.get('key') === key);\n    const filteredValue = value ? value.getIn(['filtered', 'doc_count']) : 0;\n    result = result.plus(filteredValue || 0);\n  });\n  return Number(result);\n};\n\nexport default {\n  async fetch(markdown, requestParams, { additionalDatasets = {} } = {}) {\n    const datasets = parseDatasets(markdown);\n    const extendedDatsets = _objectSpread(_objectSpread({}, datasets), additionalDatasets);\n    return requestDatasets(extendedDatsets, requestParams).then(conformDatasets);\n  },\n\n  getRows(state, { dataset = 'default' }) {\n    const data = state.page.datasets.get(dataset);\n    if (!data) {\n      return undefined;\n    }\n    return data.get('rows');\n  },\n\n  getAggregations,\n\n  getAggregation(state, { uniqueValues, property, value, dataset = 'default' }) {\n    const aggregations = getAggregations(state, { property, dataset });\n    if (!aggregations) {\n      return undefined;\n    }\n\n    if (uniqueValues) {\n      return aggregations.filter((a) => a.getIn(['filtered', 'doc_count']) !== 0).size;\n    }\n\n    const values = value ? value.split(',') : [''];\n    return addValues(aggregations, values);\n  },\n\n  getMetadataValue(state, { property, dataset = 'default' }) {\n    const data = state.page.datasets.get(dataset);\n    const propertyExists = data && data.hasIn(['metadata', property]);\n    const mos = propertyExists ? data.getIn(['metadata', property]).toJS() : [];\n    return mos && mos.length && mos[0].value ? Number(mos[0].value) : undefined;\n  } };","function ownKeys(object, enumerableOnly) {var keys = Object.keys(object);if (Object.getOwnPropertySymbols) {var symbols = Object.getOwnPropertySymbols(object);enumerableOnly && (symbols = symbols.filter(function (sym) {return Object.getOwnPropertyDescriptor(object, sym).enumerable;})), keys.push.apply(keys, symbols);}return keys;}function _objectSpread(target) {for (var i = 1; i < arguments.length; i++) {var source = null != arguments[i] ? arguments[i] : {};i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {_defineProperty(target, key, source[key]);}) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));});}return target;}function _defineProperty(obj, key, value) {if (key in obj) {Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });} else {obj[key] = value;}return obj;}import { actions as formActions, getModel } from 'react-redux-form';\n\nimport { advancedSort } from \"../../utils/advancedSort\";\nimport { api } from \"../../Entities\";\nimport { notificationActions } from \"../../Notifications\";\nimport { removeDocuments, unselectAllDocuments } from \"../../Library/actions/libraryActions\";\nimport { RequestParams } from \"../../utils/RequestParams\";\nimport searchAPI from \"../../Search/SearchAPI\";\nimport { actions } from \"../../BasicReducer\";\nimport { generateID } from \"../../../shared/IDGenerator\";\nimport emptyTemplate from \"../helpers/defaultTemplate\";\n\nexport function resetReduxForm(form) {\n  return formActions.reset(form);\n}\n\nconst propertyExists = (property, previousTemplate) =>\npreviousTemplate &&\nBoolean(\npreviousTemplate.properties.find(\n(p) => p.name === property.name && p.type === property.type && p.content === property.content));\n\n\n\nconst defaultValueByType = (type, options) => {\n  switch (type) {\n    case 'daterange':\n      return { from: null, to: null };\n    case 'generatedid':\n      return !options.resetExisting ? generateID(3, 4, 4) : undefined;\n    case 'multiselect':\n    case 'relationship':\n    case 'nested':\n    case 'multidate':\n    case 'multidaterange':\n      return [];\n    default:\n      if (!['date', 'geolocation', 'link'].includes(type)) {\n        return '';\n      }\n      return undefined;}\n\n};\n\nexport const resetMetadata = (metadata, template, options, previousTemplate) => {\n  const resetedMetadata = {};\n  template.properties.forEach((property) => {\n    const resetValue =\n    options.resetExisting ||\n    !propertyExists(property, previousTemplate) ||\n    !metadata[property.name];\n\n    const { type, name } = property;\n    if (!resetValue) {\n      resetedMetadata[property.name] = metadata[property.name];\n    }\n    if (resetValue) {\n      const defaultValue = defaultValueByType(type, options);\n      if (defaultValue !== undefined) resetedMetadata[name] = defaultValue;\n    }\n  });\n  return resetedMetadata;\n};\n\nconst getPropertyValue = (property, metadataProperty) => {\n  switch (property.type) {\n    case 'multiselect':\n    case 'multidaterange':\n    case 'nested':\n    case 'relationship':\n    case 'multidate':\n    case 'geolocation':\n      return metadataProperty.map((v) => v.value);\n    case 'generatedid':\n      return typeof metadataProperty === 'string' ? metadataProperty : metadataProperty[0].value;\n    default:\n      return metadataProperty[0].value;}\n\n};\n\nexport const UnwrapMetadataObject = (MetadataObject, Template) =>\nObject.keys(MetadataObject).reduce((UnwrapedMO, key) => {\n  if (!MetadataObject[key].length) {\n    return UnwrapedMO;\n  }\n  const property = Template.properties.find((p) => p.name === key);\n  const propertyValue = getPropertyValue(property, MetadataObject[key]);\n  return _objectSpread(_objectSpread({}, UnwrapedMO), {}, { [key]: propertyValue });\n}, {});\n\nfunction checkGeneratedTitle(entity, template) {\n  const generatedTitle =\n  !entity.title &&\n  template.commonProperties.find((property) => property.name === 'title' && property.generatedId);\n  if (generatedTitle) {\n    return generateID(3, 4, 4);\n  }\n  return entity.title;\n}\n\nexport function loadFetchedInReduxForm(form, entity, templates) {\n  const sortedTemplates = advancedSort(templates, { property: 'name' });\n  const defaultTemplate = sortedTemplates.find((t) => t.default);\n  const templateId = entity.template || defaultTemplate._id;\n  const template = sortedTemplates.find((t) => t._id === templateId) || emptyTemplate;\n  const title = checkGeneratedTitle(entity, template);\n\n  const entitySelectedOptions = {};\n  template.properties.forEach((property) => {\n    if (property.type === 'relationship') {\n      entitySelectedOptions[property.name] = entity.metadata ? entity.metadata[property.name] : [];\n    }\n  });\n\n  const metadata = UnwrapMetadataObject(\n  resetMetadata(_objectSpread({}, entity.metadata), template, { resetExisting: false }, template),\n  template);\n\n\n  // suggestedMetadata remains in metadata-object form (all components consuming it are new).\n  return [\n  formActions.reset(form),\n  formActions.load(form, _objectSpread(_objectSpread({}, entity), {}, { metadata, template: templateId, title })),\n  formActions.setPristine(form),\n  actions.set('entityThesauris', entitySelectedOptions)];\n\n}\n\nexport function loadInReduxForm(form, _entity, templates) {\n  return (dispatch) => {\n    (_entity.sharedId ?\n    api.get(new RequestParams({ sharedId: _entity.sharedId })) :\n    Promise.resolve([_entity])).\n    then(([response]) => {\n      const { attachments } = response;\n      const sortedAttachments = attachments ?\n      advancedSort(attachments, { property: 'originalname' }) :\n      attachments;\n      const entity = _objectSpread(_objectSpread({}, response), {}, { attachments: sortedAttachments });\n      loadFetchedInReduxForm(form, entity, templates).forEach((action) => dispatch(action));\n    });\n  };\n}\n\nexport function changeTemplate(form, templateId) {\n  return (dispatch, getState) => {\n    const entity = _objectSpread({}, getModel(getState(), form));\n    const { templates } = getState();\n    const template = templates.find((t) => t.get('_id') === templateId);\n    const previousTemplate = templates.find((t) => t.get('_id') === entity.template);\n\n    const templateJS = template.toJS();\n    const title = checkGeneratedTitle(entity, templateJS);\n\n    entity.metadata = resetMetadata(\n    entity.metadata,\n    templateJS,\n    { resetExisting: false },\n    previousTemplate.toJS());\n\n    entity.template = template.get('_id');\n\n    dispatch(formActions.reset(form));\n    setTimeout(() => {\n      dispatch(formActions.load(form, _objectSpread(_objectSpread({}, entity), {}, { title })));\n    });\n  };\n}\n\nexport function loadTemplate(form, template) {\n  return (dispatch) => {\n    const entity = { template: template._id, metadata: {} };\n    entity.metadata = resetMetadata(entity.metadata, template, { resetExisting: true });\n    dispatch(formActions.load(form, entity));\n    dispatch(formActions.setPristine(form));\n  };\n}\n\nexport function removeIcon(model) {\n  return formActions.change(model, { _id: null, type: 'Empty' });\n}\n\nexport function multipleUpdate(entities, values) {\n  return async (dispatch) => {\n    const ids = entities.map((e) => e.get('sharedId')).toJS();\n    const updatedEntities = await api.multipleUpdate(new RequestParams({ ids, values }));\n    dispatch(notificationActions.notify('Update success', 'success'));\n    if (values.published !== undefined) {\n      await dispatch(unselectAllDocuments());\n      dispatch(removeDocuments(updatedEntities));\n    }\n    return updatedEntities;\n  };\n}\n\nexport async function getSuggestions(templates, searchTerm = '') {\n  const request = new RequestParams({ searchTerm, templates });\n  return searchAPI.getSuggestions(request);\n}\n\nexport const clearMetadataSelections = () =>\nactions.unset('documentViewer.metadataExtraction', ['selections']);","function ownKeys(object, enumerableOnly) {var keys = Object.keys(object);if (Object.getOwnPropertySymbols) {var symbols = Object.getOwnPropertySymbols(object);enumerableOnly && (symbols = symbols.filter(function (sym) {return Object.getOwnPropertyDescriptor(object, sym).enumerable;})), keys.push.apply(keys, symbols);}return keys;}function _objectSpread(target) {for (var i = 1; i < arguments.length; i++) {var source = null != arguments[i] ? arguments[i] : {};i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {_defineProperty(target, key, source[key]);}) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));});}return target;}function _defineProperty(obj, key, value) {if (key in obj) {Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });} else {obj[key] = value;}return obj;}\nimport { actions as formActions } from 'react-redux-form';\n\nimport entitiesAPI from \"../../Entities/EntitiesAPI\";\nimport { actions } from \"../../BasicReducer\";\nimport { notificationActions } from \"../../Notifications\";\nimport { t } from \"../../I18N\";\nimport { RequestParams } from \"../../utils/RequestParams\";\n\n\nconst updateSelection = (\nselection,\nfieldName,\nfieldId) =>\n{\n  const selected = _objectSpread({}, selection);\n\n  const data = _objectSpread(_objectSpread({},\n  fieldId && { propertyID: fieldId }), {}, {\n    name: fieldName,\n    timestamp: Date(),\n    selection: selected });\n\n\n  return actions.updateIn('documentViewer.metadataExtraction', ['selections'], data, 'propertyID');\n};\n\nconst deleteSelection =\n(entityDocument, propertyName, propertyID) =>\n(dispatch) => {var _document$extractedMe;\n  const document = entityDocument === null || entityDocument === void 0 ? void 0 : entityDocument.toJS();\n\n  const updatedSelections = document === null || document === void 0 ? void 0 : (_document$extractedMe = document.extractedMetadata) === null || _document$extractedMe === void 0 ? void 0 : _document$extractedMe.filter(\n  (selection) =>\n  propertyName === 'title' && selection.name !== 'title' ||\n  selection.propertyID !== propertyID);\n\n\n  const data = _objectSpread(_objectSpread({},\n  propertyID && { propertyID }), {}, {\n    name: propertyName,\n    selection: { text: '', selectionRectangles: [] },\n    deleteSelection: true });\n\n\n  return [\n  dispatch(\n  actions.setIn('viewer/doc', 'defaultDoc', _objectSpread(_objectSpread({},\n  document), {}, {\n    extractedMetadata: updatedSelections }))),\n\n\n  dispatch(\n  actions.updateIn('documentViewer.metadataExtraction', ['selections'], data, 'propertyID'))];\n\n\n};\n\nconst updateFormField = async (\nvalue,\nmodel,\nfieldType,\nlocale) =>\n{\n  if (fieldType === 'date') {\n    const requestParams = new RequestParams({\n      locale,\n      value,\n      type: 'date' });\n\n    const { value: coercedValue, success } = await entitiesAPI.coerceValue(requestParams);\n    if (!success) {\n      return notificationActions.notify(\n      t('System', 'Value cannot be transformed to date', null, false),\n      'danger');\n\n    }\n    return formActions.change(model, coercedValue);\n  }\n\n  if (fieldType === 'numeric' && Number.isNaN(Number.parseInt(value, 10))) {\n    return formActions.change(model, '0');\n  }\n\n  return formActions.change(model, value);\n};\n\nexport { updateSelection, updateFormField, deleteSelection };","\nimport { actions } from 'react-redux-form';\nimport { readFileAsBase64 } from \"../../Library/actions/saveEntityWithFiles\";\nimport uniqueID from \"../../../shared/uniqueID\";\nimport * as types from \"../../Attachments/actions/actionTypes\";\n\nconst uploadLocalAttachment =\n(\nentitySharedId,\nfile,\nstoreKeys,\nfileLocalID) =>\n\nasync (dispatch) =>\nreadFileAsBase64(file, (info) => {\n  const newFile = {\n    originalname: file.name,\n    filename: file.name,\n    serializedFile: info,\n    type: 'attachment',\n    mimetype: file.type,\n    entity: entitySharedId,\n    fileLocalID: fileLocalID || uniqueID() };\n\n  dispatch(actions.push(`${storeKeys.model}.attachments`, newFile));\n  dispatch({ type: types.ATTACHMENT_PROGRESS, entity: entitySharedId, progress: 100 });\n});\n\nconst uploadLocalAttachmentFromUrl =\n(\nentitySharedId,\nformData,\nstoreKeys) =>\n\n(dispatch) => {\n  const { name, url } = formData;\n  const newUrl = {\n    originalname: name,\n    url,\n    entity: entitySharedId };\n\n  dispatch(actions.push(`${storeKeys.model}.attachments`, newUrl));\n  dispatch({ type: types.ATTACHMENT_PROGRESS, entity: entitySharedId, progress: 100 });\n};\n\nconst attachmentCompleted = (entitySharedId) => (dispatch) => {\n  dispatch({ type: types.ATTACHMENT_LOCAL_COMPLETE, entity: entitySharedId });\n};\n\nexport { uploadLocalAttachment, uploadLocalAttachmentFromUrl, attachmentCompleted };","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import React, { Component } from 'react';\n\nimport SearchResults from \"../../Connections/components/SearchResults\";\n\nimport SearchInput from \"../../Layout/SearchInput\";\nimport debounce from \"../../utils/debounce\";\nimport { RequestParams } from \"../../utils/RequestParams\";\n\nimport Immutable from 'immutable';\nimport SearchApi from \"../../Search/SearchAPI\";\n\n\n\n\n\n\n\n\n\n\n\n\n\nexport class SearchEntities extends Component {\n  constructor(props) {\n    super(props);\n    this.state = { searchResults: Immutable.fromJS([]), searching: false, touched: false };\n    this.onSelect = this.onSelect.bind(this);\n    this.onChange = this.onChange.bind(this);\n    this.search = this.search.bind(this);\n  }\n\n  componentDidMount() {\n    if (this.props.initialSearchTerm) {\n      this.search(this.props.initialSearchTerm);\n    }\n  }\n\n  onSelect(_sharedId, entity) {\n    this.props.onSelect(entity);\n  }\n\n  search(searchTerm) {\n    this.setState({ searching: true });\n    const requestParams = new RequestParams({\n      searchTerm,\n      fields: ['title'],\n      includeUnpublished: true });\n\n\n    return SearchApi.search(requestParams).then(\n    ({ rows: searchResults }) => {\n      this.setState({\n        searchResults: Immutable.fromJS(searchResults),\n        searching: false });\n\n      this.props.onFinishSearch(searchTerm);\n    });\n\n  }\n\n  onChange(e) {\n    this.setState({ touched: true });\n    const searchTerm = e.target.value;\n    return debounce(this.search, 400)(searchTerm);\n  }\n\n  render() {\n    const { searchResults, searching } = this.state;\n    return /*#__PURE__*/(\n      React.createElement(React.Fragment, null, /*#__PURE__*/\n      _jsx(\"div\", { className: \"search-box\" }, void 0, /*#__PURE__*/\n      _jsx(SearchInput, {\n        onChange: this.onChange,\n        value: !this.state.touched ? this.props.initialSearchTerm : undefined })), /*#__PURE__*/\n\n\n      _jsx(SearchResults, { results: searchResults, searching: searching, onClick: this.onSelect })));\n\n\n  }}","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}function ownKeys(object, enumerableOnly) {var keys = Object.keys(object);if (Object.getOwnPropertySymbols) {var symbols = Object.getOwnPropertySymbols(object);enumerableOnly && (symbols = symbols.filter(function (sym) {return Object.getOwnPropertyDescriptor(object, sym).enumerable;})), keys.push.apply(keys, symbols);}return keys;}function _objectSpread(target) {for (var i = 1; i < arguments.length; i++) {var source = null != arguments[i] ? arguments[i] : {};i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {_defineProperty(target, key, source[key]);}) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));});}return target;}function _defineProperty(obj, key, value) {if (key in obj) {Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });} else {obj[key] = value;}return obj;}import React, { Component } from 'react';\n\n\n\n\nimport comonProperties from \"../../../shared/comonProperties\";\nimport { Icon } from \"../../UI\";\nimport { Translate } from \"../../I18N\";\nimport { actions, FormatMetadata } from \"./..\";\nimport { store } from \"../../store\";\n\nimport { SearchEntities } from \"./SearchEntities\";\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nexport class CopyFromEntity extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = { propsToCopy: [], selectedEntity: {}, lastSearch: undefined };\n    this.onSelect = this.onSelect.bind(this);\n    this.cancel = this.cancel.bind(this);\n    this.copy = this.copy.bind(this);\n    this.backToSearch = this.backToSearch.bind(this);\n    this.onFinishedSearch = this.onFinishedSearch.bind(this);\n  }\n\n  onSelect(selectedEntity) {\n    const copyFromTemplateId = selectedEntity.template;\n    const templates = this.props.templates.toJS();\n    const originalTemplate = this.props.originalEntity.template;\n\n    const propsToCopy = comonProperties.\n    comonProperties(templates, [originalTemplate, copyFromTemplateId], ['generatedid']).\n    map((p) => p.name);\n\n    this.setState({ selectedEntity, propsToCopy });\n    this.props.onSelect(propsToCopy, selectedEntity);\n  }\n\n  copy() {\n    if (!this.state.selectedEntity.metadata) {\n      return;\n    }\n\n    const updatedEntity = this.state.propsToCopy.reduce(\n    (entity, propName) => {\n      if (!entity.metadata) {\n        entity.metadata = {};\n      }\n\n      entity.metadata[propName] = this.state.selectedEntity.metadata[propName];\n      return entity;\n    }, _objectSpread(_objectSpread({},\n    this.props.originalEntity), {}, { metadata: _objectSpread({}, this.props.originalEntity.metadata) }));\n\n\n    actions.\n    loadFetchedInReduxForm(this.props.formModel, updatedEntity, this.props.templates.toJS()).\n    forEach((action) => store === null || store === void 0 ? void 0 : store.dispatch(action));\n\n    this.props.onSelect([]);\n    this.props.onCancel();\n  }\n\n  backToSearch() {\n    this.setState({ propsToCopy: [], selectedEntity: {} });\n    this.props.onSelect([]);\n  }\n\n  cancel() {\n    this.props.onSelect([]);\n    this.props.onCancel();\n  }\n\n  onFinishedSearch(searchTerm) {\n    this.setState({ lastSearch: searchTerm });\n  }\n\n  renderPanel() {\n    return this.state.selectedEntity._id ? /*#__PURE__*/\n    React.createElement(React.Fragment, null, /*#__PURE__*/\n    _jsx(\"div\", { className: \"view\" }, void 0, /*#__PURE__*/\n    _jsx(FormatMetadata, {\n      entity: this.state.selectedEntity,\n      highlight: this.state.propsToCopy,\n      excludePreview: true })), /*#__PURE__*/\n\n\n    _jsx(\"div\", { className: \"copy-from-buttons\" }, void 0, /*#__PURE__*/\n    _jsx(\"button\", { className: \"back-copy-from btn btn-light\", onClick: this.backToSearch }, void 0, /*#__PURE__*/\n    _jsx(Icon, { icon: \"arrow-left\" }), /*#__PURE__*/\n    _jsx(\"span\", { className: \"btn-label\" }, void 0, /*#__PURE__*/\n    _jsx(Translate, {}, void 0, \"Back to search\"))), /*#__PURE__*/\n\n\n    _jsx(\"button\", { className: \"cancel-copy-from btn btn-primary\", onClick: this.cancel }, void 0, /*#__PURE__*/\n    _jsx(Icon, { icon: \"times\" }), /*#__PURE__*/\n    _jsx(\"span\", { className: \"btn-label\" }, void 0, /*#__PURE__*/\n    _jsx(Translate, {}, void 0, \"Cancel\"))), /*#__PURE__*/\n\n\n    _jsx(\"button\", { className: \"copy-copy-from btn btn-success\", onClick: this.copy }, void 0, /*#__PURE__*/\n    _jsx(Icon, { icon: \"copy-from\", transform: \"left-0.075 up-0.1\" }), /*#__PURE__*/\n    _jsx(\"span\", { className: \"btn-label\" }, void 0, /*#__PURE__*/\n    _jsx(Translate, {}, void 0, \"Copy Highlighted\"))))) : /*#__PURE__*/\n\n\n\n\n\n    React.createElement(React.Fragment, null, /*#__PURE__*/\n    _jsx(SearchEntities, {\n      onSelect: this.onSelect,\n      onFinishSearch: this.onFinishedSearch,\n      initialSearchTerm: this.state.lastSearch }), /*#__PURE__*/\n\n    _jsx(\"div\", { className: \"copy-from-buttons\" }, void 0, /*#__PURE__*/\n    _jsx(\"button\", { className: \"cancel-copy-from btn btn-primary\", onClick: this.cancel }, void 0, /*#__PURE__*/\n    _jsx(Icon, { icon: \"times\" }), /*#__PURE__*/\n    _jsx(\"span\", { className: \"btn-label\" }, void 0, /*#__PURE__*/\n    _jsx(Translate, {}, void 0, \"Cancel\")))));\n\n\n\n\n\n  }\n\n  render() {\n    return /*#__PURE__*/_jsx(\"div\", { className: \"copy-from\" }, void 0, this.renderPanel());\n  }}","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import React from 'react';\nimport { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\nimport { uniqBy } from 'lodash';\n\n\n\nimport { Translate } from \"../../I18N\";\nimport { deleteSelection } from \"../actions/metadataExtractionActions\";\n\n\n\n\n\n\nconst checkPropertySelections = (property, selections) =>\nselections === null || selections === void 0 ? void 0 : selections.filter((selection) => {\n  if (selection.deleteSelection) {\n    return false;\n  }\n  return (\n    property === 'title' && selection.name === 'title' || selection.propertyID === property);\n\n});\n\nconst mapStateToProps = (state) => {\n  const entityDocument = state.documentViewer.doc.get('defaultDoc');\n  const newSelections = state.documentViewer.metadataExtraction.get('selections');\n  return {\n    entityDocument,\n    newSelections };\n\n};\n\nconst mapDispatchToProps = (dispatch) =>\nbindActionCreators(\n{\n  deleteSelectionAction: deleteSelection },\n\ndispatch);\n\n\nconst mergeProps = (\nstateProps,\n\n\n\ndispatchProps,\n\n\nownProps) => (\n{\n  onClickFunction: () =>\n  dispatchProps.deleteSelectionAction(\n  stateProps.entityDocument,\n  ownProps.propertyName,\n  ownProps.propertyID),\n\n  ownProps,\n  stateProps });\n\n\nconst connector = connect(mapStateToProps, mapDispatchToProps, mergeProps);\n\n\n\nconst DeleteSelectionButtonComponent = ({ onClickFunction, ownProps, stateProps }) => {var _stateProps$newSelect, _stateProps$entityDoc, _stateProps$entityDoc2;\n  const property = ownProps.propertyName === 'title' ? 'title' : ownProps.propertyID;\n\n  const selections = uniqBy(\n  [\n  ...(((_stateProps$newSelect = stateProps.newSelections) === null || _stateProps$newSelect === void 0 ? void 0 : _stateProps$newSelect.toJS()) || []),\n  ...(((_stateProps$entityDoc = stateProps.entityDocument) === null || _stateProps$entityDoc === void 0 ? void 0 : (_stateProps$entityDoc2 = _stateProps$entityDoc.get('extractedMetadata')) === null || _stateProps$entityDoc2 === void 0 ? void 0 : _stateProps$entityDoc2.toJS()) || [])],\n\n  'propertyID');\n\n\n  const hasSelections = property ? checkPropertySelections(property, selections) : false;\n\n  if (!hasSelections || !hasSelections.length) {\n    return null;\n  }\n\n  return /*#__PURE__*/(\n    _jsx(\"button\", { type: \"button\", className: \"delete-selection\", onClick: onClickFunction }, void 0, /*#__PURE__*/\n    _jsx(Translate, { translationKey: \"Clear PDF selection\" }, void 0, \"Clear PDF selection\")));\n\n\n};\n\nconst container = connector(DeleteSelectionButtonComponent);\n\nexport { container as DeleteSelectionButton };","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import React from 'react';\nimport filesize from 'filesize';\nimport { Translate } from \"../../I18N\";\n\nimport { RenderAttachment } from \"../../Attachments\";\n\nimport { isSerializedFile } from \"../../../shared/fileUploadUtils\";\n\n\n\n\n\n\n\nexport const MediaModalFileList = ({\n  filteredAttachments,\n  handleAttachmentClick,\n  selectedUrl }) =>\n\nfilteredAttachments.length > 0 ? /*#__PURE__*/\n_jsx(\"div\", { className: \"media-grid container\" }, void 0, /*#__PURE__*/\n_jsx(\"div\", { className: \"row\" }, void 0,\nfilteredAttachments.map((attachment) => {\n  const attachmentUrl =\n  attachment.url || attachment.fileLocalID || `/api/files/${attachment.filename}`;\n\n  const fileSize =\n  isSerializedFile(attachment) && attachment.serializedFile ?\n  attachment.serializedFile.length :\n  attachment.size;\n\n  const sizeLabel = fileSize ? filesize(fileSize) : '_';\n\n  return /*#__PURE__*/(\n    _jsx(\"div\", {\n      className: \"media-grid-item\",\n\n      onClick: handleAttachmentClick(attachmentUrl) }, `attachment_${attachment._id}`, /*#__PURE__*/\n\n    _jsx(\"div\", {\n      className: `${'media-grid-card'} ${attachmentUrl === selectedUrl ? 'active' : ''}` }, void 0, /*#__PURE__*/\n\n    _jsx(\"div\", { className: \"media-grid-card-header\" }, void 0, /*#__PURE__*/\n    _jsx(\"h5\", {}, void 0, attachment.originalname), /*#__PURE__*/\n    _jsx(\"span\", { style: !fileSize ? { color: '#FFFFFF' } : {} }, void 0, sizeLabel)), /*#__PURE__*/\n\n    _jsx(\"div\", { className: \"media-grid-card-content\" }, void 0, /*#__PURE__*/\n    _jsx(\"div\", { className: \"media\" }, void 0, /*#__PURE__*/\n    _jsx(RenderAttachment, { attachment: attachment }))))));\n\n\n\n\n\n}))) : /*#__PURE__*/\n\n\n\n_jsx(\"h4\", { className: \"empty-attachments-message\" }, void 0, /*#__PURE__*/\n_jsx(Translate, {}, void 0, \"No attachments\"));","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import { Icon } from \"../../UI\";\nimport React from 'react';\nimport { Field } from 'react-redux-form';\nimport { Translate } from \"../../I18N\";\n\n\n\n\n\n\n\n\n\n\nexport const MediaModalUploadFileButton = ({\n  formModel,\n  acceptedFileTypes,\n  inputFileRef,\n  handleFileInPublicForm,\n  handleUploadButtonClicked,\n  handleInputFileChange }) =>\n{\n  const inputComponent = (fileFieldAction) => /*#__PURE__*/\n  _jsx(\"div\", { className: \"upload-button\" }, void 0, /*#__PURE__*/\n  _jsx(\"button\", { type: \"button\", onClick: handleUploadButtonClicked, className: \"btn\" }, void 0, /*#__PURE__*/\n  _jsx(Icon, { icon: \"cloud-upload-alt\" }), \"\\xA0 \", /*#__PURE__*/\n  _jsx(Translate, {}, void 0, \"Select from computer\")), /*#__PURE__*/\n\n  React.createElement(\"input\", {\n    \"aria-label\": \"fileInput\",\n    type: \"file\",\n    onChange: fileFieldAction,\n    style: { display: 'none' },\n    ref: inputFileRef,\n    accept: acceptedFileTypes }));\n\n\n\n\n  if (formModel === 'publicform') {\n    return /*#__PURE__*/(\n      _jsx(Field, {\n        \"aria-label\": \"fileInput\",\n        model: \".file\",\n        component: () => inputComponent(handleFileInPublicForm),\n        type: \"file\" }));\n\n\n  }\n\n  return inputComponent(handleInputFileChange);\n};","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}function ownKeys(object, enumerableOnly) {var keys = Object.keys(object);if (Object.getOwnPropertySymbols) {var symbols = Object.getOwnPropertySymbols(object);enumerableOnly && (symbols = symbols.filter(function (sym) {return Object.getOwnPropertyDescriptor(object, sym).enumerable;})), keys.push.apply(keys, symbols);}return keys;}function _objectSpread(target) {for (var i = 1; i < arguments.length; i++) {var source = null != arguments[i] ? arguments[i] : {};i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {_defineProperty(target, key, source[key]);}) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));});}return target;}function _defineProperty(obj, key, value) {if (key in obj) {Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });} else {obj[key] = value;}return obj;}import React, { useMemo, useRef } from 'react';\nimport ReactModal from 'react-modal';\nimport ReactPlayer from 'react-player';\nimport { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\nimport { actions as formActions } from 'react-redux-form';\nimport { get } from 'lodash';\nimport { Translate } from \"../../I18N\";\nimport { Icon } from \"../../UI\";\n\nimport uniqueID from \"../../../shared/uniqueID\";\n\nimport { WebMediaResourceForm } from \"../../Attachments/components/WebMediaResourceForm\";\nimport { uploadLocalAttachment } from \"../actions/supportingFilesActions\";\nimport { mimeTypeFromUrl } from \"../../../api/files/extensionHelper\";\nimport { MediaModalFileList } from \"./MediaModalFileList\";\nimport { MediaModalUploadFileButton } from \"./MediaModalUploadFileButton\";var\n\nMediaModalType;(function (MediaModalType) {MediaModalType[MediaModalType[\"Image\"] = 0] = \"Image\";MediaModalType[MediaModalType[\"Media\"] = 1] = \"Media\";})(MediaModalType || (MediaModalType = {}));\n\n\n\n\nconst getAcceptedFileTypes = (type) =>\ntype === MediaModalType.Image ? 'image/*' : 'video/*';\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst mapStateToProps = (state, ownProps) => {\n  const model = ownProps.formModel;\n  return {\n    entity: get(state, model) };\n\n};\n\nconst mapDispatchToProps = (dispatch) =>\nbindActionCreators(\n{ localAttachmentAction: uploadLocalAttachment, rrfChange: formActions.change },\ndispatch);\n\n\nconst connector = connect(mapStateToProps, mapDispatchToProps);\n\n\n\n\nfunction filterAttachments(\ntype,\nattachments)\n{\n  const filteredAttachments = attachments.map((a) => {\n    const mimetype = a.url && !a.mimetype ? mimeTypeFromUrl(a.url) : a.mimetype;\n    return _objectSpread(_objectSpread({}, a), {}, { mimetype });\n  });\n  switch (type) {\n    case MediaModalType.Image:\n      return filteredAttachments.filter((a) => a.mimetype && a.mimetype.includes('image'));\n    case MediaModalType.Media:\n      return filteredAttachments.filter(\n      (a) =>\n      a.mimetype && (a.mimetype.includes('video') || a.mimetype.includes('audio')) ||\n      a.url && ReactPlayer.canPlay(a.url));\n\n    default:\n      return attachments;}\n\n}\n\nconst MediaModalComponent = ({\n  isOpen,\n  attachments = [],\n  selectedUrl,\n  entity,\n  formModel,\n  formField,\n  type,\n  multipleEdition,\n  onClose,\n  onChange,\n  localAttachmentAction,\n  rrfChange }) =>\n{\n  const filteredAttachments = useMemo(\n  () => filterAttachments(type, attachments),\n  [attachments, type]);\n\n\n  const inputFileRef = useRef(null);\n\n  const handleAttachmentClick = (url) => () => {\n    onChange(url);\n    onClose();\n  };\n\n  const handleSubmitFromUrl = (formData) => {\n    onChange(formData.url);\n    onClose();\n  };\n\n  const handleFileInPublicForm = (event) => {\n    const { files } = event.target;\n    if (files && files.length > 0) {\n      const data = { data: URL.createObjectURL(files[0]), originalFile: files[0] };\n      onChange(data);\n      onClose();\n    }\n  };\n\n  const handleUploadButtonClicked = () => {var _inputFileRef$current;\n    (_inputFileRef$current = inputFileRef.current) === null || _inputFileRef$current === void 0 ? void 0 : _inputFileRef$current.click();\n  };\n\n  const handleInputFileChange = async (event) => {\n    const [file] = event.target.files || [];\n\n    if (file) {\n      const fileLocalID = uniqueID();\n\n      localAttachmentAction(\n      entity.sharedId || 'NEW_ENTITY',\n      file,\n      {\n        __reducerKey: 'library',\n        model: formModel },\n\n      fileLocalID);\n\n      rrfChange(formField, fileLocalID);\n      onClose();\n    }\n  };\n\n  return /*#__PURE__*/(\n    _jsx(ReactModal, {\n      isOpen: isOpen,\n      className: \"attachments-modal\",\n      overlayClassName: \"attachments-modal__overlay\",\n      ariaHideApp: false }, void 0, /*#__PURE__*/\n\n    _jsx(\"div\", { className: \"attachments-modal__header\" }, void 0, /*#__PURE__*/\n    _jsx(\"h4\", {}, void 0, /*#__PURE__*/\n    _jsx(Translate, {}, void 0, \"Supporting files\")), /*#__PURE__*/\n\n\n    _jsx(\"button\", { type: \"button\", onClick: onClose, className: \"attachments-modal__close\" }, void 0, /*#__PURE__*/\n    _jsx(Icon, { icon: \"times\" }), /*#__PURE__*/\n    _jsx(\"span\", {}, void 0, /*#__PURE__*/\n    _jsx(Translate, {}, void 0, \"Close\")))), /*#__PURE__*/\n\n\n\n    _jsx(\"div\", { className: \"attachments-modal__content\" }, void 0, /*#__PURE__*/\n    _jsx(\"div\", { className: \"attachments-modal__tabs-content\" }, void 0, /*#__PURE__*/\n    _jsx(\"div\", { className: \"upload-options\" }, void 0,\n    !multipleEdition && /*#__PURE__*/\n    _jsx(MediaModalUploadFileButton, {\n      formModel: formModel,\n      acceptedFileTypes: getAcceptedFileTypes(type),\n      inputFileRef: inputFileRef,\n      handleUploadButtonClicked: handleUploadButtonClicked,\n      handleFileInPublicForm: handleFileInPublicForm,\n      handleInputFileChange: handleInputFileChange }),\n\n\n    !multipleEdition && /*#__PURE__*/_jsx(Translate, {}, void 0, \"or\"), /*#__PURE__*/\n    _jsx(\"div\", { className: \"wrapper-web\" }, void 0, /*#__PURE__*/\n    _jsx(WebMediaResourceForm, { handleSubmit: handleSubmitFromUrl }))), /*#__PURE__*/\n\n\n    _jsx(\"div\", {\n      className: `tab-content attachments-modal__tabs-content ${\n      !filteredAttachments.length ? 'centered' : ''\n      }` }, void 0, /*#__PURE__*/\n\n    _jsx(MediaModalFileList, {\n      filteredAttachments: filteredAttachments,\n      handleAttachmentClick: handleAttachmentClick,\n      selectedUrl: selectedUrl || '' }))))));\n\n\n\n\n\n\n};\n\nconst container = connector(MediaModalComponent);\n\n\nexport { MediaModalType, container as MediaModal };","import mimetypes from 'mime-types';\n\nexport const mimeTypeFromUrl = (url) => {var _url$split$0$split$po;\n  const acceptedMimeTypes = ['image', 'audio', 'text', 'video'];\n  const extension = url === null || url === void 0 ? void 0 : (_url$split$0$split$po = url.split(/[#?]/)[0].split('.').pop()) === null || _url$split$0$split$po === void 0 ? void 0 : _url$split$0$split$po.trim();\n\n  if (extension) {\n    const mimetype = mimetypes.lookup(extension) || 'text/html';\n    if (acceptedMimeTypes.includes(mimetype.split('/')[0])) {\n      return mimetype;\n    }\n  }\n\n  return 'text/html';\n};","function _extends() {_extends = Object.assign ? Object.assign.bind() : function (target) {for (var i = 1; i < arguments.length; i++) {var source = arguments[i];for (var key in source) {if (Object.prototype.hasOwnProperty.call(source, key)) {target[key] = source[key];}}}return target;};return _extends.apply(this, arguments);}function ownKeys(object, enumerableOnly) {var keys = Object.keys(object);if (Object.getOwnPropertySymbols) {var symbols = Object.getOwnPropertySymbols(object);enumerableOnly && (symbols = symbols.filter(function (sym) {return Object.getOwnPropertyDescriptor(object, sym).enumerable;})), keys.push.apply(keys, symbols);}return keys;}function _objectSpread(target) {for (var i = 1; i < arguments.length; i++) {var source = null != arguments[i] ? arguments[i] : {};i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {_defineProperty(target, key, source[key]);}) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));});}return target;}function _defineProperty(obj, key, value) {if (key in obj) {Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });} else {obj[key] = value;}return obj;}var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import React from 'react';\nimport PropTypes from 'prop-types';\nimport formatcoords from 'formatcoords';\nimport { Translate } from \"../../I18N\";\n\nimport { Map } from \"../../Map\";\n\nconst GeolocationViewer = ({ points, onlyForCards }) => {\n  if (onlyForCards) {\n    return /*#__PURE__*/(\n      _jsx(\"div\", {}, void 0,\n      points.\n      filter((p) => Boolean(p)).\n      map((p, i) => {\n        const coords = formatcoords(p.lat, p.lon);\n        return /*#__PURE__*/(\n          _jsx(\"div\", {}, i,\n          p.label ? `${p.label}: ` : '',\n          coords.format('DD MM ss X', { latLonSeparator: ', ', decimalPlaces: 0 })));\n\n\n      })));\n\n\n  }\n\n  const markers = [];\n  points.\n  filter((p) => Boolean(p)).\n  forEach(({ lat, lon, label, color }) => {\n    markers.push({\n      latitude: lat,\n      longitude: lon,\n      properties: _objectSpread({ info: label }, color ? { color } : {}) });\n\n  });\n\n  const componentProps = markers.length ?\n  { latitude: markers[0].latitude, longitude: markers[0].longitude } :\n  {};\n\n  return /*#__PURE__*/(\n    React.createElement(React.Fragment, null, /*#__PURE__*/\n    React.createElement(Map, _extends({}, componentProps, { height: 370, markers: markers, mapStyleSwitcher: true, showControls: true })), /*#__PURE__*/\n    _jsx(\"div\", { className: \"print-view-alt\" }, void 0, /*#__PURE__*/\n    _jsx(\"p\", {}, void 0, /*#__PURE__*/\n    _jsx(Translate, {}, void 0, \"Latitude\"), \": \", componentProps.latitude), /*#__PURE__*/\n\n    _jsx(\"p\", {}, void 0, /*#__PURE__*/\n    _jsx(Translate, {}, void 0, \"Longitude\"), \": \", componentProps.longitude))));\n\n\n\n\n};\n\nGeolocationViewer.defaultProps = {\n  points: [],\n  onlyForCards: true };\n\n\n\n\n\n\n\nexport default GeolocationViewer;","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}function ownKeys(object, enumerableOnly) {var keys = Object.keys(object);if (Object.getOwnPropertySymbols) {var symbols = Object.getOwnPropertySymbols(object);enumerableOnly && (symbols = symbols.filter(function (sym) {return Object.getOwnPropertyDescriptor(object, sym).enumerable;})), keys.push.apply(keys, symbols);}return keys;}function _objectSpread(target) {for (var i = 1; i < arguments.length; i++) {var source = null != arguments[i] ? arguments[i] : {};i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {_defineProperty(target, key, source[key]);}) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));});}return target;}function _defineProperty(obj, key, value) {if (key in obj) {Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });} else {obj[key] = value;}return obj;}import React from 'react';\nimport GeolocationViewer from \"./GeolocationViewer\";\nimport { connect } from 'react-redux';\nimport { createSelector } from 'reselect';\nimport { Translate } from \"../../I18N\";\nimport { bindActionCreators } from 'redux';\n\nimport { ensure } from \"../../../shared/tsUtils\";\nimport { Pill } from \"./Pill\";\nimport * as actions from \"../../Relationships/actions/actions\";\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst templatesMap = createSelector(\n(s) => s.templates,\n(templates) =>\ntemplates.reduce(\n(map, template) => _objectSpread(_objectSpread({},\nmap), {}, {\n  [ensure(template === null || template === void 0 ? void 0 : template.get('_id'))]: {\n    name: template === null || template === void 0 ? void 0 : template.get('name'),\n    color: template === null || template === void 0 ? void 0 : template.get('color') } }),\n\n\n{}));\n\n\n\nfunction mapDispatchToProps(dispatch) {\n  return bindActionCreators(\n  {\n    selectConnection: actions.selectConnection },\n\n  dispatch);\n\n}\n\nconst mapStateToProps = (state) => ({\n  templatesInfo: templatesMap(state) });\n\n\nconst connector = connect(mapStateToProps, mapDispatchToProps);\n\n\nconst notLabeledOrMultiple = (member) =>\nmember.value.length === 1 && !member.value[0].label;\n\nconst pillColor = (member, templatesInfo, templateId) => {var _templatesInfo$member;return (\n    ((_templatesInfo$member = templatesInfo[member.translateContext]) === null || _templatesInfo$member === void 0 ? void 0 : _templatesInfo$member.color) || templatesInfo[templateId].color);};\n\nconst getFirstGroupInfo = (\nmembers,\ntemplatesInfo,\ntemplateId) => /*#__PURE__*/\n\n_jsx(\"dl\", {\n  className: \"pills-container\" },\nmembers.map((member) => `${member.translateContext}_${member.name}`).join(','), /*#__PURE__*/\n\n_jsx(\"dt\", {}), /*#__PURE__*/\n_jsx(\"dd\", {}, void 0,\nmembers.map((member) => /*#__PURE__*/\n_jsx(Pill, {\n\n  color: pillColor(member, templatesInfo, templateId) }, `${member.value[0].lat}_${member.value[0].lon}`, /*#__PURE__*/\n\n_jsx(Translate, { context: templateId }, void 0, member.label)))));\n\n\n\n\n\n\nconst getMultiMemberInfo =\n(\ntemplatesInfo,\nselectConnection,\ntemplateId) =>\n\n(member) => {var _templatesInfo$member2;return /*#__PURE__*/(\n\n    _jsx(\"dl\", { className: \"pills-container\" }, `${member.translateContext}_${member.name}`, /*#__PURE__*/\n    _jsx(\"dt\", {}, void 0, /*#__PURE__*/\n    _jsx(\"span\", {}, void 0, /*#__PURE__*/\n    _jsx(Translate, { context: templateId }, void 0, member.label),\n    ((_templatesInfo$member2 = templatesInfo[member.translateContext]) === null || _templatesInfo$member2 === void 0 ? void 0 : _templatesInfo$member2.name) && /*#__PURE__*/\n    React.createElement(React.Fragment, null,\n    ' (', /*#__PURE__*/\n    _jsx(Translate, {}, void 0, \"linked\"), ' ', /*#__PURE__*/\n    _jsx(Translate, { context: templateId }, void 0,\n    templatesInfo[member.translateContext].name),\n\n    ') '))), /*#__PURE__*/\n\n\n\n\n    _jsx(\"dd\", {}, void 0,\n    member.value.map((value) => /*#__PURE__*/\n    _jsx(\"div\", {\n\n      onClick: () => value.relatedEntity && selectConnection(value.relatedEntity),\n      style: { cursor: value.relatedEntity ? 'pointer' : 'default' } }, `${value.lat}_${value.lon}`, /*#__PURE__*/\n\n    _jsx(Pill, {\n\n      color: pillColor(member, templatesInfo, templateId) }, `${value.lat}_${value.lon}`, /*#__PURE__*/\n\n    _jsx(Translate, { context: member.translateContext }, void 0, value.label || '')))))));};\n\n\n\n\n\n\n\nconst computeRenderMemberGroups = (\nmembers,\ntemplatesInfo,\nselectConnection,\ntemplateId) =>\n{\n  const firstGroup = [];\n  const restOfGroups = [];\n\n  members.forEach((member) => {\n    if (notLabeledOrMultiple(member)) {\n      firstGroup.push(member);\n    } else {\n      restOfGroups.push(member);\n    }\n  });\n\n  return [\n  firstGroup.length ? getFirstGroupInfo(firstGroup, templatesInfo, templateId) : null].\n  concat(restOfGroups.map(getMultiMemberInfo(templatesInfo, selectConnection, templateId)));\n};\n\n// eslint-disable-next-line react/no-multi-comp\nconst GroupedGeolocationViewerComponent = (props) => {\n  const markers = props.members.reduce((flat, member) => {\n    if (notLabeledOrMultiple(member)) {\n      return flat.concat([_objectSpread(_objectSpread({},\n\n      member.value[0]), {}, {\n        label: member.label,\n        color: pillColor(member, props.templatesInfo, props.templateId) })]);\n\n\n    }\n\n    return flat.concat(\n    member.value.map((v) => _objectSpread(_objectSpread({},\n    v), {}, {\n      color: pillColor(member, props.templatesInfo, props.templateId) })));\n\n\n  }, []);\n\n  return /*#__PURE__*/(\n    React.createElement(React.Fragment, null, /*#__PURE__*/\n    _jsx(GeolocationViewer, { points: markers, onlyForCards: false }),\n    computeRenderMemberGroups(\n    props.members,\n    props.templatesInfo,\n    props.selectConnection,\n    props.templateId)));\n\n\n\n};\n\nexport const GroupedGeolocationViewer = connector(GroupedGeolocationViewerComponent);","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import React from 'react';\nimport { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\nimport { I18NLink } from \"../../I18N\";\n\nimport { Icon } from \"../../Layout\";\nimport * as actions from \"../../Relationships/actions/actions\";\n\n\n\n\n\nconst mapStateToProps = ({ entityView }) => ({\n  uiState: entityView.uiState });\n\n\nfunction mapDispatchToProps(dispatch) {\n  return bindActionCreators(\n  {\n    selectConnection: actions.selectConnection },\n\n  dispatch);\n\n}\n\nconst connector = connect(mapStateToProps, mapDispatchToProps);\n\n\n\nconst RelationshipLink = ({ propValue: propVal, selectConnection }) => {\n  if (propVal.relatedEntity) {\n    return /*#__PURE__*/(\n      _jsx(\"button\", {\n        type: \"button\",\n        className: \"link-button\",\n        onClick: () => selectConnection(propVal.relatedEntity) },\n      propVal.url,\n\n      propVal.icon && /*#__PURE__*/_jsx(Icon, { className: \"item-icon\", data: propVal.icon }),\n      propVal.value));\n\n\n  }\n  return /*#__PURE__*/(\n    _jsx(I18NLink, { to: propVal.url }, propVal.url,\n    propVal.icon && /*#__PURE__*/_jsx(Icon, { className: \"item-icon\", data: propVal.icon }),\n    propVal.value));\n\n\n};\n\nconst container = connector(RelationshipLink);\nexport { container as RelationshipLink };","function ownKeys(object, enumerableOnly) {var keys = Object.keys(object);if (Object.getOwnPropertySymbols) {var symbols = Object.getOwnPropertySymbols(object);enumerableOnly && (symbols = symbols.filter(function (sym) {return Object.getOwnPropertyDescriptor(object, sym).enumerable;})), keys.push.apply(keys, symbols);}return keys;}function _objectSpread(target) {for (var i = 1; i < arguments.length; i++) {var source = null != arguments[i] ? arguments[i] : {};i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {_defineProperty(target, key, source[key]);}) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));});}return target;}function _defineProperty(obj, key, value) {if (key in obj) {Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });} else {obj[key] = value;}return obj;}var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import React from 'react';\n\nimport { Icon } from \"../../Layout\";\n\nconst composeIcon = (data) =>\ntypeof data.value === 'string' && data.icon !== undefined ? /*#__PURE__*/\nReact.createElement(React.Fragment, null, /*#__PURE__*/\n_jsx(Icon, { data: data.icon }), /*#__PURE__*/\n_jsx(\"span\", {}, void 0, \"\\xA0\")) :\n\nnull;\n\nconst composeCount = (data, key) => {\n  if (data.valueCount > 1) {\n    return /*#__PURE__*/(\n      _jsx(React.Fragment, {}, key,\n      composeIcon(data),\n      data.value, \"\\xA0\", /*#__PURE__*/\n\n      _jsx(\"span\", { className: \"item-count\" }, void 0, data.valueCount)));\n\n\n  }\n  return /*#__PURE__*/(\n    React.createElement(React.Fragment, null,\n    composeIcon(data),\n    data.value));\n\n\n};\n\nconst renderItemValue = (v, key, i) => /*#__PURE__*/\n_jsx(\"li\", { className: \"item-value\" }, key,\ncomposeCount(v, `item-value-${i}`));\n\n\n\nconst renderList = (prop) => /*#__PURE__*/\n_jsx(\"ul\", { className: \"multiline\" }, void 0,\nprop.value.map((v, index) => {\n  const key = `${prop.name}_${index}`;\n  return renderItemValue(v, key, index);\n}));\n\n\n\nconst renderCompact = (prop) => /*#__PURE__*/\n_jsx(\"ul\", { className: \"compact comma-separated\" }, void 0, prop.value.map((v, i) => renderItemValue(v, i, i)));\n\n\nconst groupRepeatedValues = (property) =>\nproperty.value.reduce((results, v) => {\n  const previousValue = results.find((r) => r.value === v.value);\n  if (previousValue) {\n    previousValue.valueCount += 1;\n  } else {\n    results.push(_objectSpread(_objectSpread({}, v), {}, { valueCount: 1 }));\n  }\n  return results;\n}, []);\n\nconst ValueList = ({ property, compact }) => {\n  const propertyWithGroupedValues = _objectSpread(_objectSpread({}, property), {}, { value: groupRepeatedValues(property) });\n  return compact ? renderCompact(propertyWithGroupedValues) : renderList(propertyWithGroupedValues);\n};\n\nexport default ValueList;","function ownKeys(object, enumerableOnly) {var keys = Object.keys(object);if (Object.getOwnPropertySymbols) {var symbols = Object.getOwnPropertySymbols(object);enumerableOnly && (symbols = symbols.filter(function (sym) {return Object.getOwnPropertyDescriptor(object, sym).enumerable;})), keys.push.apply(keys, symbols);}return keys;}function _objectSpread(target) {for (var i = 1; i < arguments.length; i++) {var source = null != arguments[i] ? arguments[i] : {};i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {_defineProperty(target, key, source[key]);}) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));});}return target;}function _defineProperty(obj, key, value) {if (key in obj) {Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });} else {obj[key] = value;}return obj;}var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };} /* eslint-disable import/exports-last */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { flattenDeep } from 'lodash';\nimport { t } from \"../../I18N\";\nimport MarkdownViewer from \"../../Markdown\";\nimport { GroupedGeolocationViewer } from \"./GroupedGeolocationViewer\";\nimport GeolocationViewer from \"./GeolocationViewer\";\nimport { RelationshipLink } from \"./RelationshipLink\";\nimport ValueList from \"./ValueList\";\n\nconst renderRelationshipLinks = (linksProp, compact) => {\n  const formattedLinkValues = Array.isArray(linksProp.value) ? linksProp.value : [linksProp.value];\n  const hydratedValues = formattedLinkValues.map((linkValue) => ({\n    value: /*#__PURE__*/_jsx(RelationshipLink, { propValue: linkValue }) }));\n\n  const hydratedProp = _objectSpread(_objectSpread({}, linksProp), {}, { value: hydratedValues });\n  return /*#__PURE__*/_jsx(ValueList, { compact: compact, property: hydratedProp });\n};\n\nexport const showByType = (prop, compact, templateId) => {\n  let result = prop.value;\n\n  switch (prop.type) {\n    case null:\n      result = t('System', 'No property');\n      break;\n    case 'markdown':\n      result = /*#__PURE__*/_jsx(MarkdownViewer, { html: true, markdown: prop.value });\n      break;\n    case 'link':\n      result = /*#__PURE__*/\n      _jsx(\"a\", { href: prop.value.url, target: \"_blank\", rel: \"noopener noreferrer\" }, void 0,\n      prop.value.label ? prop.value.label : prop.value.url);\n\n\n      break;\n    case 'image':\n      result = prop.value && /*#__PURE__*/\n      _jsx(\"img\", {\n\n        className: `multimedia-img ${prop.style}`,\n        src: prop.value,\n        alt: prop.label }, prop.value);\n\n\n      break;\n    case 'media':{\n        result = prop.value && /*#__PURE__*/_jsx(MarkdownViewer, { markdown: `{media}(${prop.value})`, compact: true });\n        break;\n      }\n    case 'geolocation':\n      result = /*#__PURE__*/\n      _jsx(GeolocationViewer, {\n        points: prop.value,\n        onlyForCards: Boolean(prop.onlyForCards || compact) });\n\n\n      break;\n    case 'select':\n      result = prop.parent ? `${prop.parent}: ${prop.value}` : result;\n      break;\n    case 'geolocation_group':\n      result = /*#__PURE__*/_jsx(GroupedGeolocationViewer, { members: prop.members, templateId: templateId });\n      break;\n    case 'relationship':\n      result = renderRelationshipLinks(prop, compact);\n      break;\n    default:\n      if (prop.value && prop.value.map) {\n        const propValue = flattenDeep(\n        prop.value.map((_value) =>\n        _value.parent && Array.isArray(_value.value) ?\n        flattenDeep(\n        _value.value.map((v) => _objectSpread(_objectSpread({}, v), {}, { value: `${_value.parent}: ${v.value}` }))) :\n\n        _value));\n\n\n\n        // eslint-disable-next-line no-param-reassign\n        prop.value = propValue.map((_value) => {\n          const value = showByType(_value, compact, templateId);\n          return value && value.value ?\n          value : _objectSpread({\n            value }, _value.icon !== undefined ? { icon: _value.icon } : {});\n        });\n        result = /*#__PURE__*/_jsx(ValueList, { compact: compact, property: prop });\n      }\n      break;}\n\n\n  return result;\n};\n\nconst computeGroup = (metadata, startIndex) => {\n  const members = [];\n  let index = startIndex;\n  let lastIndexInTemplate = metadata[index].indexInTemplate - 1;\n\n  while (\n  index < metadata.length &&\n  metadata[index].type === 'geolocation' &&\n  metadata[index].indexInTemplate === lastIndexInTemplate + 1)\n  {\n    members.push(metadata[index]);\n    lastIndexInTemplate = metadata[index].indexInTemplate;\n    index += 1;\n  }\n\n  return [members, index];\n};\n\nconst getNewGroupedGeolocationField = (members) => {\n  if (members.length === 1) {\n    return {\n      type: 'geolocation_group',\n      name: 'geolocation_group',\n      label: members[0].label,\n      translateContext: members[0].translateContext,\n      members };\n\n  }\n\n  return {\n    type: 'geolocation_group',\n    label: 'Combined geolocations',\n    members };\n\n};\n\nconst groupAdjacentGeolocations = (metadata) => {\n  const groupedMetadata = [];\n  let index = 0;\n\n  while (index < metadata.length) {\n    if (metadata[index].type !== 'geolocation') {\n      groupedMetadata.push(metadata[index]);\n      index += 1;\n    } else {\n      const [members, i] = computeGroup(metadata, index);\n\n      index = i;\n      groupedMetadata.push(getNewGroupedGeolocationField(members));\n    }\n  }\n\n  return groupedMetadata;\n};\n\nfunction filterProps(showSubset) {\n  return (p) => {\n    if (showSubset && !showSubset.includes(p.name)) {\n      return false;\n    }\n    if (Array.isArray(p.value)) {\n      return p.value.length;\n    }\n    return p.value || p.type === null || p.type === 'numeric' && p.value === 0;\n  };\n}\n\nconst flattenInherittedRelationships = (metadata) =>\nmetadata.map((property) => {\n  if (property.type === 'inherit' && property.inheritedType === 'relationship') {\n    // eslint-disable-next-line no-param-reassign\n    property.value = property.value.reduce(\n    (flattenedValues, v) => flattenedValues.concat(v.value || []),\n    []);\n\n  }\n  return property;\n});\n\nconst Metadata = ({\n  metadata,\n  compact,\n  renderLabel,\n  showSubset,\n  highlight,\n  groupGeolocations,\n  templateId }) =>\n{\n  const filteredMetadata = metadata.filter(filterProps(showSubset));\n  const flattenedMetadata = flattenInherittedRelationships(filteredMetadata);\n  const groupedMetadata = groupGeolocations ?\n  groupAdjacentGeolocations(flattenedMetadata) :\n  flattenedMetadata;\n\n  return /*#__PURE__*/(\n    React.createElement(React.Fragment, null,\n    groupedMetadata.map((prop, index) => {\n      let type = prop.type ? prop.type : 'default';\n      type = type === 'image' || type === 'media' ? 'multimedia' : type;\n      const highlightClass = highlight.includes(prop.name) ? 'highlight' : '';\n      const fullWidthClass = prop.fullWidth ? 'full-width' : '';\n\n      return /*#__PURE__*/(\n        _jsx(\"dl\", {\n          className: `metadata-type-${type} metadata-name-${prop.name} ${fullWidthClass} ${highlightClass}` },\n        `${prop.name}_${index}`,\n\n        renderLabel(prop, /*#__PURE__*/_jsx(\"dt\", {}, void 0, t(prop.translateContext || 'System', prop.label))), /*#__PURE__*/\n        _jsx(\"dd\", { className: prop.sortedBy ? 'item-current-sort' : '' }, void 0,\n        showByType(prop, compact, templateId))));\n\n\n\n    })));\n\n\n};\n\nMetadata.defaultProps = {\n  compact: false,\n  showSubset: undefined,\n  renderLabel: (_prop, label) => label,\n  highlight: [],\n  groupGeolocations: false };\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nexport default Metadata;","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import React from 'react';\nimport { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\n\nimport { Icon } from \"../../UI\";\n\nimport { t, Translate } from \"../../I18N\";\nimport { notificationActions } from \"../../Notifications\";\n\nimport { updateSelection, updateFormField } from \"../actions/metadataExtractionActions\";\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst mapStateToProps = (state) => ({\n  selection: state.documentViewer.uiState.\n  get('reference').\n  get('sourceRange') });\n\n\nconst mapDispatchToProps = (dispatch, ownProps) => {\n  const { fieldName, fieldId, model, fieldType, locale } = ownProps;\n  return bindActionCreators(\n  {\n    updateField: (value) => async (dis) => {\n      const action = await updateFormField(value, model, fieldType, locale);\n      dis(action);\n    },\n    setSelection: (selection) => updateSelection(selection, fieldName, fieldId),\n    notify: notificationActions.notify },\n\n  dispatch);\n\n};\n\nconst connector = connect(mapStateToProps, mapDispatchToProps);\n\n\n\nconst MetadataExtractorComponent = ({\n  selection,\n  setSelection,\n  updateField,\n  notify }) =>\n{\n  const onClick = async () => {var _selection$selectionR;\n    if (!((_selection$selectionR = selection.selectionRectangles) !== null && _selection$selectionR !== void 0 && _selection$selectionR.length)) {\n      notify(\n      t('System', 'Could not detect the area for the selected text', null, false),\n      'warning');\n\n    }\n    setSelection(selection);\n    updateField(selection.text);\n  };\n\n  if (!selection) {\n    return null;\n  }\n\n  return /*#__PURE__*/(\n    _jsx(\"button\", { type: \"button\", onClick: onClick, className: \"extraction-button\" }, void 0, /*#__PURE__*/\n    _jsx(\"span\", {}, void 0, /*#__PURE__*/\n    _jsx(Translate, {}, void 0, \"Click to fill\"), \" \", /*#__PURE__*/_jsx(Icon, { icon: \"bullseye\" }))));\n\n\n\n};\n\nconst container = connector(MetadataExtractorComponent);\n\n\nexport { container as MetadataExtractor };","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import PropTypes from 'prop-types';\nimport React from 'react';\n\nclass ToggleDisplay extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      show: props.open };\n\n    this.show = this.show.bind(this);\n    this.hide = this.hide.bind(this);\n  }\n\n  show() {\n    this.setState({ show: true });\n  }\n\n  hide() {\n    this.setState({ show: false });\n    this.props.onHide();\n  }\n\n  render() {\n    return /*#__PURE__*/(\n      React.createElement(React.Fragment, null,\n      !this.state.show && /*#__PURE__*/_jsx(\"button\", { onClick: this.show }, void 0, this.props.showLabel),\n      this.state.show && /*#__PURE__*/_jsx(\"button\", { onClick: this.hide }, void 0, this.props.hideLabel),\n      this.state.show && this.props.children));\n\n\n  }}\n\n\nToggleDisplay.defaultProps = {\n  onHide: () => {},\n  showLabel: 'show',\n  hideLabel: 'hide',\n  open: false };\n\n\n\n\n\n\n\n\n\n\n\n\nexport default ToggleDisplay;","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };} /** @format */\n\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { connect } from 'react-redux';\n\nimport { IconSelector } from \"../../ReactReduxForms\";\nimport { actions } from \"./..\";\nimport { FormValue } from \"../../Forms\";\nimport ToggleDisplay from \"../../Layout/ToggleDisplay\";\nimport { bindActionCreators } from 'redux';\nimport { Translate } from \"../../I18N\";\nimport { Icon } from \"../../UI\";\n\nexport const IconFieldBase = ({ model, removeIcon }) => /*#__PURE__*/\n_jsx(FormValue, { model: `${model}.icon` }, void 0,\n(icon = {}) => /*#__PURE__*/\n_jsx(\"div\", { className: \"icon-selector\" }, void 0, /*#__PURE__*/\n_jsx(ToggleDisplay, {\n  showLabel: /*#__PURE__*/\n  _jsx(\"span\", {}, void 0, /*#__PURE__*/\n  _jsx(Translate, {}, void 0, \"add icon\"), /*#__PURE__*/\n  _jsx(Icon, { icon: \"eye\" })),\n\n\n  hideLabel: /*#__PURE__*/\n  _jsx(\"span\", {}, void 0, /*#__PURE__*/\n  _jsx(Translate, {}, void 0, \"remove icon\"), /*#__PURE__*/\n  _jsx(Icon, { icon: \"eye-slash\" })),\n\n\n  onHide: () => removeIcon(`${model}.icon`),\n  open: !!icon._id }, void 0, /*#__PURE__*/\n\n_jsx(\"ul\", { className: \"search__filter\" }, void 0, /*#__PURE__*/\n_jsx(\"li\", {}, void 0, /*#__PURE__*/\n_jsx(\"label\", {}, void 0, /*#__PURE__*/\n_jsx(Translate, {}, void 0, \"Icon\"), \" / \", /*#__PURE__*/_jsx(Translate, {}, void 0, \"Flag\"))), /*#__PURE__*/\n\n\n_jsx(\"li\", { className: \"wide\" }, void 0, /*#__PURE__*/\n_jsx(IconSelector, { model: \".icon\" }))))));\n\n\n\n\n\n\n\n\n\n\n\n\n\nfunction mapDispatchToProps(dispatch) {\n  return bindActionCreators({ removeIcon: actions.removeIcon }, dispatch);\n}\n\nexport const IconField = connect(null, mapDispatchToProps)(IconFieldBase);","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import React from 'react';\nimport { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\nimport { Field, actions } from 'react-redux-form';\n\nimport { Icon } from \"../../UI\";\nimport { Translate } from \"../../I18N\";\nimport { getFileExtension } from \"../../utils/getFileExtension\";\nimport uniqueID from \"../../../shared/uniqueID\";\n\nconst getFileIcon = (file) => {\n  const acceptedThumbnailExtensions = ['png', 'gif', 'jpg', 'jpeg'];\n  let thumbnail = /*#__PURE__*/\n  _jsx(\"span\", { \"no-translate\": true }, void 0, /*#__PURE__*/\n  _jsx(Icon, { icon: \"file\" }), \" file\");\n\n\n\n  if (file.filename && getFileExtension(file.filename) === 'pdf') {\n    thumbnail = /*#__PURE__*/\n    _jsx(\"span\", { \"no-translate\": true }, void 0, /*#__PURE__*/\n    _jsx(Icon, { icon: \"file-pdf\" }), \" pdf\");\n\n\n  }\n\n  if (file.url) {\n    thumbnail = /*#__PURE__*/\n    _jsx(\"span\", {}, void 0, /*#__PURE__*/\n    _jsx(Icon, { icon: \"link\" }));\n\n\n  }\n\n  if (\n  !file.serializedFile &&\n  file.filename &&\n  acceptedThumbnailExtensions.indexOf(getFileExtension(file.filename.toLowerCase())) !== -1)\n  {\n    thumbnail = /*#__PURE__*/_jsx(\"img\", { src: `/api/files/${file.filename}`, alt: file.originalname });\n  }\n  return thumbnail;\n};\n\nconst fieldModel = (file, type, index) => {\n  if (type === 'attachment') return `.attachments.${index}.originalname`;\n  if (file._id) return `.documents.${index}.originalname`;\n  return `.documents.${index}.originalFile.name`;\n};\n\n\n\n\n\n\n\nconst mapDispatchToProps = (dispatch, ownProps) => {\n  const { model, type } = ownProps;\n  const path = type === 'attachment' ? `${model}.attachments` : `${model}.documents`;\n  return bindActionCreators(\n  {\n    removeFile: (index) => actions.remove(path, index) },\n\n  dispatch);\n\n};\n\nconst connector = connect(null, mapDispatchToProps);\n\n\n\n\nconst MetadataFormFiles = ({ files = [], removeFile, type }) => /*#__PURE__*/\n_jsx(\"div\", { className: \"attachments-list editor\" }, void 0,\nfiles.map((file, index) => {\n  const attachmentClass = file._id ? 'attachment' : 'attachment new';\n  return /*#__PURE__*/(\n    _jsx(\"div\", { className: attachmentClass }, file._id || uniqueID(), /*#__PURE__*/\n    _jsx(\"div\", { className: \"attachment-thumbnail\" }, void 0, getFileIcon(file)), /*#__PURE__*/\n    _jsx(\"div\", { className: \"attachment-name\" }, void 0, /*#__PURE__*/\n    _jsx(Field, { model: fieldModel(file, type, index), updateOn: \"blur\" }, void 0, /*#__PURE__*/\n    _jsx(\"input\", { className: \"form-control\" }))), /*#__PURE__*/\n\n\n    _jsx(\"button\", {\n      type: \"button\",\n      className: \"btn delete-supporting-file\",\n      onClick: () => removeFile(index) }, void 0, /*#__PURE__*/\n\n    _jsx(Icon, { icon: \"trash-alt\" }), \"\\xA0 \", /*#__PURE__*/\n    _jsx(Translate, {}, void 0, \"Delete file\"))));\n\n\n\n}));\n\n\n\nconst container = connector(MetadataFormFiles);\nexport { container as MetadataFormFiles };","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import React from 'react';\n\n\nimport { Translate } from \"../../I18N\";\nimport UploadSupportingFile from \"../../Attachments/components/UploadSupportingFile\";\nimport {\nuploadLocalAttachment,\nuploadLocalAttachmentFromUrl } from \"../actions/supportingFilesActions\";\n\nimport { MetadataFormFiles } from \"./MetadataFormFiles\";\n\n\n\n\n\n\n\nconst SupportingFiles = ({ supportingFiles, entitySharedID, model }) => /*#__PURE__*/\n_jsx(\"div\", { className: \"attachments-list-parent\" }, void 0, /*#__PURE__*/\n_jsx(\"div\", { className: \"attachments-list-header editor\" }, void 0, /*#__PURE__*/\n_jsx(\"h2\", {}, void 0, /*#__PURE__*/\n_jsx(Translate, {}, void 0, \"Supporting files\")), /*#__PURE__*/\n\n\n_jsx(UploadSupportingFile, {\n  entitySharedId: entitySharedID || 'NEW_ENTITY',\n  storeKey: \"library\",\n  uploadAttachment: uploadLocalAttachment,\n  uploadAttachmentFromUrl: uploadLocalAttachmentFromUrl,\n  model: model })), /*#__PURE__*/\n\n\n\n_jsx(MetadataFormFiles, { model: model, type: \"attachment\", files: supportingFiles }));\n\n\n\nexport { SupportingFiles };","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import React, { useRef } from 'react';\nimport { bindActionCreators } from 'redux';\nimport { actions } from 'react-redux-form';\nimport { connect } from 'react-redux';\nimport { get } from 'lodash';\nimport { Icon } from \"../../UI\";\nimport { Translate } from \"../../I18N\";\n\nimport { MetadataFormFiles } from \"./MetadataFormFiles\";\n\n\n\n\n\nconst handlePDFUpload =\n(event, model) => (dispatch) => {\n  const { files } = event.target;\n  if (files && files.length > 0) {\n    Array.from(files).forEach((file) => {\n      const data = { data: URL.createObjectURL(file), originalFile: file };\n      dispatch(actions.push(`${model}.documents`, data));\n    });\n  }\n};\n\nconst mapStateToProps = (state, ownProps) => {\n  const entity = get(state, ownProps.model);\n  return {\n    entity };\n\n};\n\nconst mapDispatchToProps = (dispatch) =>\nbindActionCreators({ handlePDFUploadAction: handlePDFUpload }, dispatch);\n\nconst connector = connect(mapStateToProps, mapDispatchToProps);\n\n\n\n\nconst PDFUpload = ({ model, entity, handlePDFUploadAction }) => {\n  const inputFileRef = useRef(null);\n\n  const handleUploadButtonClicked = () => {var _inputFileRef$current;\n    (_inputFileRef$current = inputFileRef.current) === null || _inputFileRef$current === void 0 ? void 0 : _inputFileRef$current.click();\n  };\n\n  return /*#__PURE__*/(\n    _jsx(\"div\", { className: \"document-list-parent\" }, void 0, /*#__PURE__*/\n    _jsx(\"div\", { className: \"attachments-list-header editor\" }, void 0, /*#__PURE__*/\n    _jsx(\"h2\", {}, void 0, /*#__PURE__*/\n    _jsx(Translate, {}, void 0, \"Primary Documents\")), /*#__PURE__*/\n\n    _jsx(\"button\", { type: \"button\", onClick: handleUploadButtonClicked, className: \"btn\" }, void 0, /*#__PURE__*/\n    _jsx(Icon, { icon: \"plus\" }), \"\\xA0\", /*#__PURE__*/\n\n    _jsx(Translate, {}, void 0, \"Add PDF\"))), /*#__PURE__*/\n\n\n    React.createElement(\"input\", {\n      \"aria-label\": \"pdfInput\",\n      type: \"file\",\n      onChange: (event) => handlePDFUploadAction(event, model),\n      style: { display: 'none' },\n      ref: inputFileRef,\n      accept: \"application/pdf\",\n      multiple: true }), /*#__PURE__*/\n\n    _jsx(MetadataFormFiles, { model: model, type: \"document\", files: entity.documents })));\n\n\n};\n\nconst container = connector(PDFUpload);\nexport { container as PDFUpload };","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import entitiesUtil from \"../../Entities/utils/filterBaseProperties\";\nimport { Select as SimpleSelect } from \"../../Forms\";\nimport { I18NLink, t, Translate } from \"../../I18N\";\nimport { notificationActions } from \"../../Notifications\";\nimport { FormGroup } from \"../../ReactReduxForms\";\nimport Immutable from 'immutable';\nimport PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { Field, Form } from 'react-redux-form';\nimport { bindActionCreators } from 'redux';\nimport { createSelector } from 'reselect';\nimport { Icon } from \"../../UI\";\nimport { wrapEntityMetadata } from \"./..\";\nimport defaultTemplate from \"../helpers/defaultTemplate\";\nimport validator from \"../helpers/validator\";\nimport { IconField } from \"./IconField\";\nimport MetadataFormFields from \"./MetadataFormFields\";\nimport { MetadataExtractor } from \"./MetadataExtractor\";\nimport { SupportingFiles } from \"./SupportingFiles\";\nimport { PDFUpload } from \"./PDFUpload\";\nimport { DeleteSelectionButton } from \"./DeleteSelectionButton\";\n\nconst immutableDefaultTemplate = Immutable.fromJS(defaultTemplate);\nconst selectTemplateOptions = createSelector(\n(s) => s.templates,\n(templates) => templates.map((tmpl) => ({ label: tmpl.get('name'), value: tmpl.get('_id') })));\n\n\nclass MetadataForm extends Component {\n  constructor(props) {\n    super(props);\n    this.onSubmit = this.onSubmit.bind(this);\n    this.onSubmitFailed = this.onSubmitFailed.bind(this);\n  }\n\n  componentWillUnmount() {\n    this.props.componentWillUnmount();\n  }\n\n  onSubmit(entity) {\n    this.props.onSubmit(\n    wrapEntityMetadata(entitiesUtil.filterBaseProperties(entity)),\n    this.props.model);\n\n  }\n\n  onSubmitFailed() {\n    this.props.notify(t('System', 'Invalid form', null, false), 'danger');\n  }\n\n  renderTemplateSelect(templateOptions, template) {\n    if (templateOptions.size) {\n      const sortedTemplates = templateOptions.toJS().sort((a, b) => a.label > b.label ? 1 : -1);\n\n      return /*#__PURE__*/(\n        _jsx(FormGroup, {}, void 0, /*#__PURE__*/\n        _jsx(\"ul\", { className: \"search__filter\" }, void 0, /*#__PURE__*/\n        _jsx(\"li\", {}, void 0, /*#__PURE__*/\n        _jsx(\"label\", {}, void 0, t('System', 'Type'))), /*#__PURE__*/\n\n        _jsx(\"li\", { className: \"wide\" }, void 0,\n        this.props.initialTemplateId !== undefined &&\n        this.props.initialTemplateId !== this.props.templateId && /*#__PURE__*/\n        _jsx(\"span\", {}, void 0, /*#__PURE__*/\n        _jsx(Icon, { icon: \"exclamation-triangle\" }), /*#__PURE__*/\n        _jsx(Translate, { context: \"System\" }, void 0, \"Changing the type will erase all connections to this entity.\"))), /*#__PURE__*/\n\n\n\n\n\n        _jsx(\"li\", { className: \"wide\" }, void 0, /*#__PURE__*/\n        _jsx(SimpleSelect, {\n          className: \"form-control\",\n          value: template.get('_id'),\n          options: sortedTemplates,\n          onChange: (e) => {\n            this.props.changeTemplate(this.props.model, e.target.value);\n          } })))));\n\n\n\n\n\n    }\n\n    return /*#__PURE__*/(\n      _jsx(\"ul\", { className: \"search__filter\" }, void 0, /*#__PURE__*/\n      _jsx(\"div\", { className: \"text-center protip\" }, void 0, /*#__PURE__*/\n      _jsx(Icon, { icon: \"lightbulb\" }), ' ', /*#__PURE__*/\n      _jsx(\"b\", {}, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"ProTip!\")), /*#__PURE__*/\n\n      _jsx(\"span\", {}, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"You can create metadata templates in\"), ' ', /*#__PURE__*/\n      _jsx(I18NLink, { to: \"/settings\" }, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"settings\")), \".\"))));\n\n\n\n\n\n\n  }\n\n  render() {\n    const {\n      model,\n      template,\n      templateOptions,\n      id,\n      multipleEdition,\n      showSubset,\n      version,\n      storeKey,\n      highlightedProps,\n      attachments,\n      sharedId,\n      progress } =\n    this.props;\n\n    if (!template) {\n      return /*#__PURE__*/_jsx(\"div\", {});\n    }\n    const titleLabel = template.get('commonProperties') ?\n    template.\n    get('commonProperties').\n    find((p) => p.get('name') === 'title').\n    get('label') :\n    'Title';\n\n    return /*#__PURE__*/(\n      _jsx(\"fieldset\", { disabled: progress !== undefined }, void 0, /*#__PURE__*/\n      _jsx(Form, {\n        id: id,\n        model: model,\n        onSubmit: this.onSubmit,\n        validators: validator.generate(template.toJS(), multipleEdition),\n        onSubmitFailed: this.onSubmitFailed }, void 0,\n\n      !multipleEdition && (!showSubset || showSubset.includes('title')) && /*#__PURE__*/\n      _jsx(FormGroup, { model: \".title\" }, void 0, /*#__PURE__*/\n      _jsx(\"ul\", { className: \"search__filter\" }, void 0, /*#__PURE__*/\n      _jsx(\"li\", {}, void 0, /*#__PURE__*/\n      _jsx(\"label\", {}, void 0, /*#__PURE__*/\n      _jsx(Translate, { context: template.get('_id') }, void 0, titleLabel), ' ', /*#__PURE__*/\n      _jsx(\"span\", { className: \"required\" }, void 0, \"*\"))), /*#__PURE__*/\n\n\n      _jsx(\"li\", { className: \"wide\" }, void 0, /*#__PURE__*/\n      _jsx(\"div\", { className: \"metadata-extractor-container\" }, void 0,\n      storeKey === 'documentViewer' && /*#__PURE__*/\n      _jsx(MetadataExtractor, { fieldName: \"title\", model: `${model}.title` }), /*#__PURE__*/\n\n      _jsx(Field, { model: \".title\" }, void 0, /*#__PURE__*/\n      _jsx(\"textarea\", { className: \"form-control\" })))), /*#__PURE__*/\n\n\n\n      _jsx(\"div\", { className: \"form-title-actions\" }, void 0,\n      storeKey === 'documentViewer' && /*#__PURE__*/_jsx(DeleteSelectionButton, { propertyName: \"title\" }), /*#__PURE__*/\n      _jsx(IconField, { model: model })))),\n\n\n\n\n\n      (!showSubset || showSubset.includes('template')) &&\n      this.renderTemplateSelect(templateOptions, template), /*#__PURE__*/\n      _jsx(MetadataFormFields, {\n        multipleEdition: multipleEdition,\n        thesauris: this.props.thesauris,\n        model: model,\n        template: template,\n        showSubset: showSubset,\n        version: version,\n        highlightedProps: highlightedProps,\n        storeKey: storeKey }),\n\n      !multipleEdition && !showSubset && /*#__PURE__*/\n      React.createElement(React.Fragment, null, /*#__PURE__*/\n      _jsx(PDFUpload, { entitySharedID: sharedId, model: model }), /*#__PURE__*/\n      _jsx(SupportingFiles, {\n        supportingFiles: attachments,\n        entitySharedID: sharedId,\n        model: model })))));\n\n\n\n\n\n\n  }}\n\n\nMetadataForm.defaultProps = {\n  id: 'metadataForm',\n  multipleEdition: false,\n  showSubset: undefined,\n  version: undefined,\n  initialTemplateId: undefined,\n  componentWillUnmount: () => {},\n  notify: () => {},\n  changeTemplate: () => {},\n  onSubmit: () => {},\n  highlightedProps: [],\n  storeKey: '',\n  attachments: [],\n  sharedId: '',\n  progress: undefined };\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nfunction mapDispatchToProps(dispatch) {\n  return bindActionCreators({ notify: notificationActions.notify }, dispatch);\n}\nexport const mapStateToProps = (state, ownProps) => {\n  const entityModel = ownProps.model.split('.').reduce((o, i) => o[i], state);\n  const { attachments, sharedId } = entityModel;\n  return {\n    thesauris: ownProps.thesauris ? ownProps.thesauris : state.thesauris || Immutable.fromJS([]),\n    template: ownProps.template ?\n    ownProps.template :\n    state.templates.find((tmpl) => tmpl.get('_id') === ownProps.templateId) ||\n    immutableDefaultTemplate,\n    templateOptions: selectTemplateOptions(state),\n    attachments,\n    sharedId,\n    progress: sharedId ?\n    state.attachments.progress.get(sharedId) :\n    state.attachments.progress.get('NEW_ENTITY') };\n\n};\n\nexport { MetadataForm };\nexport default connect(mapStateToProps, mapDispatchToProps)(MetadataForm);","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };} /** @format */\n\nimport PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { getField } from 'react-redux-form';\nimport { Icon } from \"../../UI\";\n\n// exported for testing.\nexport class MultipleEditionFieldWarningBase extends Component {\n  render() {\n    if (!this.props.touched || !this.props.multipleEdition) {\n      return false;\n    }\n    return /*#__PURE__*/(\n      _jsx(\"span\", {}, void 0, /*#__PURE__*/\n      _jsx(Icon, { icon: \"exclamation-triangle\" }), \"\\xA0\"));\n\n\n\n  }}\n\n\n\n\n\n\n\n// exported for testing.\nexport const mapStateToProps = (state, props) => {\n  const fieldState = getField(state, `${props.model}.${props.field}`) || { pristine: true };\n  let touched = !fieldState.pristine;\n  if (fieldState.$form) {\n    touched = !fieldState.$form.pristine;\n  }\n  return { touched };\n};\n\nexport default connect(mapStateToProps)(MultipleEditionFieldWarningBase);","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}function ownKeys(object, enumerableOnly) {var keys = Object.keys(object);if (Object.getOwnPropertySymbols) {var symbols = Object.getOwnPropertySymbols(object);enumerableOnly && (symbols = symbols.filter(function (sym) {return Object.getOwnPropertyDescriptor(object, sym).enumerable;})), keys.push.apply(keys, symbols);}return keys;}function _objectSpread(target) {for (var i = 1; i < arguments.length; i++) {var source = null != arguments[i] ? arguments[i] : {};i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {_defineProperty(target, key, source[key]);}) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));});}return target;}function _defineProperty(obj, key, value) {if (key in obj) {Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });} else {obj[key] = value;}return obj;} /* eslint-disable max-statements */\n/* eslint-disable max-lines */\nimport { FormGroup } from \"../../Forms\";\nimport { t, Translate } from \"../../I18N\";\nimport { preloadOptionsLimit } from \"../../../shared/config\";\nimport Immutable from 'immutable';\nimport PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { Field, actions as formActions } from 'react-redux-form';\nimport { propertyTypes } from \"../../../shared/propertyTypes\";\nimport { getSuggestions } from \"../actions/actions\";\nimport { generateID } from \"../../../shared/IDGenerator\";\nimport { bindActionCreators } from 'redux';\nimport Tip from \"../../Layout/Tip\";\n\nimport {\nDatePicker,\nDateRange,\nGeolocation,\nLinkField,\nMarkDown,\nMultiDate,\nMultiDateRange,\nMultiSelect,\nMultiSuggest,\nNested,\nNumeric,\nSelect,\nLookupMultiSelect,\nMediaField } from \"../../ReactReduxForms\";\n\nimport MultipleEditionFieldWarning from \"./MultipleEditionFieldWarning\";\nimport { MediaModalType } from \"./MediaModal\";\nimport { MetadataExtractor } from \"./MetadataExtractor\";\nimport { DeleteSelectionButton } from \"./DeleteSelectionButton\";\n\nconst translateOptions = (thesauri) =>\nthesauri.\nget('values').\nmap((optionIm) => {\n  const option = optionIm.toJS();\n  option.label = t(thesauri.get('_id'), option.label, null, false);\n  if (option.values) {\n    option.options = option.values.map((val) => _objectSpread(_objectSpread({},\n    val), {}, {\n      label: t(thesauri.get('_id'), val.label, null, false) }));\n\n  }\n  return option;\n}).\ntoJS();\n\nconst groupSameRelationshipFields = (fields) =>\nfields.\nmap((field) => {\n  if (field.type !== 'relationship') {\n    return field;\n  }\n\n  const multiEditingRelationshipFields = fields.filter(\n  (f) =>\n  f.content === field.content &&\n  f.relationType === field.relationType &&\n  f._id !== field._id);\n\n\n  if (multiEditingRelationshipFields.length) {\n    return _objectSpread(_objectSpread({},\n    field), {}, {\n      multiEditingRelationshipFields });\n\n  }\n\n  return field;\n}).\nfilter((f) => f);\n\nclass MetadataFormFields extends Component {\n  getField(property, _model, thesauris, formModel) {\n    let thesauri;\n    let totalPossibleOptions = 0;\n    const {\n      dateFormat,\n      version,\n      entityThesauris,\n      attachments,\n      localAttachments,\n      multipleEdition,\n      locale } =\n    this.props;\n    const propertyType = property.type;\n    const plainAttachments = attachments.toJS();\n    const plainLocalAttachments = localAttachments;\n\n    switch (propertyType) {\n      case 'select':\n        thesauri = thesauris.find((opt) => opt.get('_id').toString() === property.content.toString());\n        return /*#__PURE__*/(\n          _jsx(Select, {\n            model: _model,\n            optionsValue: \"id\",\n            options: translateOptions(thesauri),\n            placeholder: \"Select...\" }));\n\n\n      case 'multiselect':\n        thesauri = thesauris.find((opt) => opt.get('_id').toString() === property.content.toString());\n        return /*#__PURE__*/(\n          _jsx(MultiSelect, {\n            model: _model,\n            optionsValue: \"id\",\n            options: translateOptions(thesauri),\n            prefix: _model,\n            forceHoist: version === 'OneUp',\n            placeholder:\n            version === 'OneUp' ?\n            `${t('System', 'Search', null, false)} '${thesauri.get('name')}'` :\n            null }));\n\n\n\n      case 'relationship':\n        if (property.content) {\n          const source = thesauris.find(\n          (opt) => opt.get('_id').toString() === property.content.toString());\n\n\n          totalPossibleOptions = source.get('optionsCount');\n          thesauri = translateOptions(source);\n        }\n\n        if (!property.content) {\n          thesauri = Array.prototype.\n          concat(\n          ...thesauris.\n          filter((filterThesauri) => filterThesauri.get('type') === 'template').\n          map((source) => {\n            totalPossibleOptions += source.get('optionsCount');\n            return translateOptions(source);\n          })).\n\n          slice(0, preloadOptionsLimit);\n        }\n\n        if (entityThesauris.get(property.name)) {\n          entityThesauris.\n          get(property.name).\n          toJS().\n          forEach((o) => {\n            thesauri.push({ id: o.value, label: o.label });\n          });\n        }\n\n        return /*#__PURE__*/(\n          _jsx(LookupMultiSelect, {\n            lookup: getSuggestions.bind(null, property.content ? [property.content] : []),\n            model: _model,\n            optionsValue: \"id\",\n            options: thesauri,\n            totalPossibleOptions: totalPossibleOptions,\n            prefix: _model,\n            onChange: this.relationshipChange.bind(this, property),\n            sort: true }));\n\n\n      case 'date':\n        return /*#__PURE__*/_jsx(DatePicker, { model: _model, format: dateFormat, locale: locale });\n      case 'daterange':\n        return /*#__PURE__*/_jsx(DateRange, { model: _model, format: dateFormat, locale: locale });\n      case 'numeric':\n        return /*#__PURE__*/_jsx(Numeric, { model: _model });\n      case 'markdown':\n        return /*#__PURE__*/_jsx(MarkDown, { model: _model });\n      case 'nested':\n        return /*#__PURE__*/_jsx(Nested, { model: _model });\n      case 'multidate':\n        return /*#__PURE__*/_jsx(MultiDate, { model: _model, format: dateFormat, locale: locale });\n      case 'multidaterange':\n        return /*#__PURE__*/_jsx(MultiDateRange, { model: _model, format: dateFormat, locale: locale });\n      case 'geolocation':\n        return /*#__PURE__*/_jsx(Geolocation, { model: _model });\n      case 'link':\n        return /*#__PURE__*/_jsx(LinkField, { model: _model });\n      case 'media':\n        return /*#__PURE__*/(\n          _jsx(MediaField, {\n            model: _model,\n            formModel: formModel,\n            attachments: plainAttachments,\n            localAttachments: plainLocalAttachments,\n            type: MediaModalType.Media,\n            multipleEdition: multipleEdition }));\n\n\n      case 'image':\n        return /*#__PURE__*/(\n          _jsx(MediaField, {\n            model: _model,\n            formModel: formModel,\n            attachments: plainAttachments,\n            localAttachments: plainLocalAttachments,\n            type: MediaModalType.Image,\n            multipleEdition: multipleEdition }));\n\n\n      case 'preview':\n        return /*#__PURE__*/(\n          _jsx(\"div\", {}, void 0, /*#__PURE__*/\n          _jsx(\"em\", {}, void 0, /*#__PURE__*/\n          _jsx(Translate, {}, void 0, \"This content is automatically generated\"))));\n\n\n\n      case 'generatedid':\n        return /*#__PURE__*/(\n          _jsx(Field, { model: _model }, void 0, /*#__PURE__*/\n          _jsx(\"input\", {\n            type: \"text\",\n            className: \"form-control\",\n            defaultValue: formModel === 'publicform' ? generateID(3, 4, 4) : undefined })));\n\n\n\n      case 'text':\n        return /*#__PURE__*/(\n          _jsx(Field, { model: _model }, void 0, /*#__PURE__*/\n          _jsx(\"input\", { type: \"text\", className: \"form-control\" })));\n\n\n      default:\n        return false;}\n\n  }\n\n  relationshipChange(prop, value) {var _prop$multiEditingRel;\n    const { change, model } = this.props;\n    (_prop$multiEditingRel = prop.multiEditingRelationshipFields) === null || _prop$multiEditingRel === void 0 ? void 0 : _prop$multiEditingRel.forEach((p) => {\n      change(`${model}.metadata.${p.name}`, value);\n    });\n  }\n\n  renderLabel(property) {\n    const { template, multipleEdition, model } = this.props;\n    const templateID = template.get('_id');\n    let label = templateID ? /*#__PURE__*/\n    _jsx(Translate, { context: templateID }, void 0, property.label) :\n\n    property.label;\n\n\n    if (property.multiEditingRelationshipFields) {\n      label = /*#__PURE__*/\n      React.createElement(React.Fragment, null, /*#__PURE__*/\n      _jsx(Translate, { context: templateID }, void 0, property.label), \"\\xA0(\", /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"affects\"), \"\\xA0\",\n      property.multiEditingRelationshipFields.map((p) => /*#__PURE__*/\n      _jsx(\"span\", {}, p._id, \"\\\"\", /*#__PURE__*/\n      _jsx(Translate, { context: templateID }, void 0, p.label), \"\\\"\\xA0\")), \")\", /*#__PURE__*/\n\n\n\n      _jsx(Tip, { icon: \"info-circle\", position: \"right\" }, void 0, /*#__PURE__*/\n      _jsx(\"p\", {}, void 0, /*#__PURE__*/\n      _jsx(Translate, { translationKey: \"Multiple relationships edit description\" }, void 0, \"Making changes to this property will affect other properties on this template because they all share relationships with the same configuration.\"))));\n\n\n\n\n\n\n\n    }\n\n    return /*#__PURE__*/(\n      _jsx(\"li\", { className: \"title\" }, void 0, /*#__PURE__*/\n      _jsx(\"label\", {}, void 0, /*#__PURE__*/\n      _jsx(MultipleEditionFieldWarning, {\n        multipleEdition: multipleEdition,\n        model: model,\n        field: `metadata.${property.name}` }),\n\n      label,\n      property.required ? /*#__PURE__*/_jsx(\"span\", { className: \"required\" }, void 0, \"*\") : '')));\n\n\n\n  }\n\n  render() {\n    const { thesauris, template, model, showSubset, storeKey, locale } = this.props;\n\n    const mlThesauri = thesauris.\n    filter((thes) => !!thes.get('enable_classification')).\n    map((thes) => thes.get('_id')).\n    toJS();\n    const fields = groupSameRelationshipFields(template.get('properties').toJS());\n    return /*#__PURE__*/(\n      _jsx(\"div\", {}, void 0,\n      fields.\n      filter((p) => !showSubset || showSubset.includes(p.name)).\n      map((property) => {\n        const showIXButtons =\n        storeKey === 'documentViewer' &&\n        ['text', 'date', 'numeric', 'markdown'].includes(property.type);\n        return /*#__PURE__*/(\n          _jsx(FormGroup, {\n\n            model: `.metadata.${property.name}`,\n            className:\n            model === 'publicform' && property.type === 'generatedid' ?\n            ' hidden ' :\n            property.type }, property.name, /*#__PURE__*/\n\n\n          _jsx(\"ul\", {\n            className: `search__filter is-active ${\n            this.props.highlightedProps.includes(property.name) ? 'highlight' : ''\n            }` }, void 0,\n\n          this.renderLabel(property),\n          mlThesauri.includes(property.content) &&\n          [propertyTypes.multiselect, propertyTypes.select].includes(property.type) ? /*#__PURE__*/\n          _jsx(\"li\", { className: \"wide\" }, void 0, /*#__PURE__*/\n          _jsx(MultiSuggest, {\n            model: `.suggestedMetadata.${property.name}`,\n            selectModel: `.metadata.${property.name}`,\n            propertyType: property.type })) :\n\n\n          null, /*#__PURE__*/\n          _jsx(\"li\", { className: \"wide\" }, void 0, /*#__PURE__*/\n          _jsx(\"div\", { className: \"metadata-extractor-container\" }, void 0,\n          showIXButtons && /*#__PURE__*/\n          _jsx(MetadataExtractor, {\n            fieldName: property.name,\n            fieldId: property._id,\n            fieldType: property.type,\n            model: `${model}.metadata.${property.name}`,\n            locale: locale }),\n\n\n          this.getField(property, `.metadata.${property.name}`, thesauris, model))),\n\n\n          showIXButtons && /*#__PURE__*/\n          _jsx(DeleteSelectionButton, { propertyName: property.name, propertyID: property._id }))));\n\n\n\n\n      })));\n\n\n  }}\n\n\nMetadataFormFields.defaultProps = {\n  multipleEdition: false,\n  dateFormat: null,\n  version: undefined,\n  showSubset: undefined,\n  entityThesauris: Immutable.fromJS({}),\n  attachments: Immutable.fromJS([]),\n  highlightedProps: [],\n  localAttachments: [],\n  storeKey: '',\n  locale: '' };\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nexport const mapStateToProps = (state, ownProps) => {\n  const { storeKey } = ownProps;\n\n  let attachments = Immutable.fromJS([]);\n  let localAttachments;\n\n  if (storeKey === 'library') {\n    const selectedDocuments = state.library.ui.get('selectedDocuments');\n    attachments = selectedDocuments.size ? selectedDocuments.get(0).get('attachments') : undefined;\n    localAttachments = state.library.sidepanel.metadata.attachments;\n  }\n\n  if (storeKey === 'documentViewer') {\n    const entity = state[storeKey].doc;\n    attachments = entity.get('attachments');\n    localAttachments = state[storeKey].sidepanel.metadata.attachments;\n  }\n\n  if (!storeKey) {\n    const { entity } = state.entityView;\n    attachments = entity.get('attachments');\n    localAttachments = state.entityView.entityForm.attachments;\n  }\n\n  const { locale } = state;\n  return {\n    dateFormat: state.settings.collection.get('dateFormat'),\n    entityThesauris: state.entityThesauris,\n    attachments,\n    localAttachments,\n    locale };\n\n};\n\nexport const mapDispatchToProps = (dispatch, ownProps) => {\n  if (ownProps.boundChange) {\n    return { change: ownProps.boundChange };\n  }\n  return bindActionCreators({ change: formActions.change }, dispatch);\n};\n\nexport { MetadataFormFields, translateOptions };\nexport default connect(mapStateToProps, mapDispatchToProps)(MetadataFormFields);","export const preloadOptionsLimit = 200;\nexport const preloadOptionsSearch = 2000;","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import React from 'react';\n\n\n\n\n\n\nexport const Pill = (props) => /*#__PURE__*/\n_jsx(\"span\", { className: \"pill\", style: { backgroundColor: props.color } }, void 0,\nprops.children);","import Immutable from 'immutable';\nimport comonProperties from \"../../../shared/comonProperties\";\n\nexport default ((templates, entities) => {\n  const selectedTemplates = entities.\n  map((entity) => entity.get('template')).\n  filter((type, index, _types) => _types.indexOf(type) === index);\n  const properties = comonProperties.comonProperties(templates, selectedTemplates);\n  const _id = selectedTemplates.size === 1 ? selectedTemplates.first() : '';\n\n  const withoutTemplate = entities.reduce((memo, entity) => memo && !entity.get('template'), true);\n\n  if (withoutTemplate) {\n    return Immutable.fromJS(templates.find((template) => template.default));\n  }\n  return Immutable.fromJS({ _id, properties });\n});","export default {\n  comonProperties: [{ label: 'Title', name: 'title', isComonProperty: true, type: 'text' }],\n  properties: [] };","const _excluded = [\"parent\"];function _objectWithoutProperties(source, excluded) {if (source == null) return {};var target = _objectWithoutPropertiesLoose(source, excluded);var key, i;if (Object.getOwnPropertySymbols) {var sourceSymbolKeys = Object.getOwnPropertySymbols(source);for (i = 0; i < sourceSymbolKeys.length; i++) {key = sourceSymbolKeys[i];if (excluded.indexOf(key) >= 0) continue;if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;target[key] = source[key];}}return target;}function _objectWithoutPropertiesLoose(source, excluded) {if (source == null) return {};var target = {};var sourceKeys = Object.keys(source);var key, i;for (i = 0; i < sourceKeys.length; i++) {key = sourceKeys[i];if (excluded.indexOf(key) >= 0) continue;target[key] = source[key];}return target;}function ownKeys(object, enumerableOnly) {var keys = Object.keys(object);if (Object.getOwnPropertySymbols) {var symbols = Object.getOwnPropertySymbols(object);enumerableOnly && (symbols = symbols.filter(function (sym) {return Object.getOwnPropertyDescriptor(object, sym).enumerable;})), keys.push.apply(keys, symbols);}return keys;}function _objectSpread(target) {for (var i = 1; i < arguments.length; i++) {var source = null != arguments[i] ? arguments[i] : {};i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {_defineProperty(target, key, source[key]);}) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));});}return target;}function _defineProperty(obj, key, value) {if (key in obj) {Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });} else {obj[key] = value;}return obj;} /* eslint-disable max-lines */\nimport moment from 'moment-timezone';\nimport Immutable from 'immutable';\nimport { advancedSort } from \"../../utils/advancedSort\";\nimport { store } from \"../../store\";\nimport nestedProperties from \"../../Templates/components/ViolatedArticlesNestedProperties\";\n\nconst prepareRelatedEntity = (options, propValue, templates, property) => {\n  const relation =\n  options.doc && options.doc.relations ?\n  options.doc.relations.find((rel) => rel.entity === propValue.value) :\n  undefined;\n\n  if (relation && relation.entityData) {\n    const template = templates.find((t) => relation.entityData.template === t.get('_id'));\n    const inheritedProperty = template.\n    get('properties').\n    find((p) => p.get('_id') === property.get('inherit').get('property'));\n    return _objectSpread(_objectSpread({},\n    relation.entityData), {}, {\n      inheritedProperty: inheritedProperty.get('name') });\n\n  }\n\n  return undefined;\n};\n\nconst addSortedProperties = (templates, sortedProperties) =>\ntemplates.reduce((_property, template) => {\n  if (!template.get('properties')) {\n    return _property;\n  }\n\n  let matchProp = template.\n  get('properties').\n  find((prop) => sortedProperties.includes(`metadata.${prop.get('name')}`));\n\n  if (matchProp) {\n    matchProp = matchProp.set('type', null).set('translateContext', template.get('_id'));\n  }\n\n  return _property || matchProp;\n}, false);\n\nconst formatMetadataSortedProperties = (metadata, sortedProperties) =>\nmetadata.map((prop) => {\n  const newProp = _objectSpread({}, prop);\n  newProp.sortedBy = false;\n  if (sortedProperties.includes(`metadata.${prop.name}`)) {\n    newProp.sortedBy = true;\n    if (!prop.value && prop.value !== 0) {\n      newProp.value = 'No value';\n      newProp.translateContext = 'System';\n    }\n  }\n  return newProp;\n});\n\nconst addCreationDate = (result, doc) =>\nresult.push({\n  value: moment(doc.creationDate).format('ll'),\n  label: 'Date added',\n  name: 'creationDate',\n  translateContext: 'System',\n  sortedBy: true });\n\n\nconst addModificationDate = (result, doc) =>\nresult.push({\n  value: moment(doc.editDate).format('ll'),\n  label: 'Date modified',\n  name: 'editDate',\n  translateContext: 'System',\n  sortedBy: true });\n\n\nconst groupByParent = (options) =>\noptions.reduce((groupedOptions, _ref) => {let { parent } = _ref,option = _objectWithoutProperties(_ref, _excluded);\n  if (!parent) {\n    groupedOptions.push(option);\n    return groupedOptions;\n  }\n\n  const alreadyDefinedOption = groupedOptions.find((o) => o.parent === parent);\n  if (alreadyDefinedOption) {\n    alreadyDefinedOption.value.push(option);\n    return groupedOptions;\n  }\n\n  const parentOption = { value: [option], parent };\n  groupedOptions.push(parentOption);\n\n  return groupedOptions;\n}, []);\n\nconst conformSortedProperty = (metadata, templates, doc, sortedProperties) => {\n  const sortPropertyInMetadata = metadata.find((p) =>\n  sortedProperties.includes(`metadata.${p.name}`));\n\n  if (\n  !sortPropertyInMetadata &&\n  !sortedProperties.includes('creationDate') &&\n  !sortedProperties.includes('editDate'))\n  {\n    return metadata.push(addSortedProperties(templates, sortedProperties)).filter((p) => p);\n  }\n\n  let result = formatMetadataSortedProperties(metadata, sortedProperties);\n\n  if (sortedProperties.includes('creationDate')) {\n    result = addCreationDate(result, doc);\n  }\n\n  if (sortedProperties.includes('editDate')) {\n    result = addModificationDate(result, doc);\n  }\n\n  return result;\n};\n\nconst propertyValueFormatter = {\n  date: (timestamp) => moment.utc(timestamp, 'X').format('ll') };\n\n\nexport default {\n  formatDateRange(daterange = {}) {\n    let from = '';\n    let to = '';\n    if (daterange.value.from) {\n      from = moment.utc(daterange.value.from, 'X').format('ll');\n    }\n    if (daterange.value.to) {\n      to = moment.utc(daterange.value.to, 'X').format('ll');\n    }\n    return `${from} ~ ${to}`;\n  },\n\n  getSelectOptions(option, thesaurus, doc) {\n    let value = '';\n    let originalValue = '';\n    let icon;\n    let parent;\n\n    if (option) {var _option$parent;\n      value = option.label || option.value;\n      originalValue = option.value;\n      icon = option.icon;\n      parent = (_option$parent = option.parent) === null || _option$parent === void 0 ? void 0 : _option$parent.label;\n    }\n\n    let url;\n    if (option && thesaurus && thesaurus.get('type') === 'template') {\n      url = `/entity/${option.value}`;\n    }\n\n    let relatedEntity;\n    if (doc && doc.relations && doc.relations.length > 0) {\n      const relation = doc.relations.find((e) => e.entity === option.value);\n      relatedEntity = relation === null || relation === void 0 ? void 0 : relation.entityData;\n      relatedEntity = relatedEntity ? _objectSpread(_objectSpread({},\n      relatedEntity), {}, { inheritedProperty: 'title' }) :\n      relatedEntity;\n    }\n\n    return { value, originalValue, url, icon, parent, relatedEntity };\n  },\n\n  multimedia(property, [{ value }], type) {\n    return {\n      type,\n      label: property.get('label'),\n      name: property.get('name'),\n      style: property.get('style') || 'contain',\n      noLabel: Boolean(property.get('noLabel')),\n      value };\n\n  },\n\n  date(property, date = [{}]) {\n    const timestamp = date[0].value;\n    const value = propertyValueFormatter.date(timestamp);\n    return {\n      label: property.get('label'),\n      name: property.get('name'),\n      value,\n      timestamp };\n\n  },\n\n  daterange(property, daterange) {\n    return {\n      label: property.get('label'),\n      name: property.get('name'),\n      value: this.formatDateRange(daterange[0]),\n      originalValue: daterange[0].value };\n\n  },\n\n  multidate(property, timestamps = []) {\n    const value = timestamps.map((timestamp) => ({\n      timestamp: timestamp.value,\n      value: moment.utc(timestamp.value, 'X').format('ll') }));\n\n    return { label: property.get('label'), name: property.get('name'), value };\n  },\n\n  multidaterange(property, dateranges = []) {\n    const value = dateranges.map((range) => ({\n      value: this.formatDateRange(range),\n      originalValue: range.value }));\n\n    return {\n      label: property.get('label'),\n      name: property.get('name'),\n      value };\n\n  },\n\n  image(property, value) {\n    return this.multimedia(property, value, 'image');\n  },\n\n  link(_property, [value]) {\n    return _objectSpread(_objectSpread({}, value), {}, { type: 'link' });\n  },\n\n  preview(property, _value, _thesauri, { doc }) {\n    const defaultDoc = doc.defaultDoc || {};\n    return this.multimedia(\n    property,\n    [{ value: defaultDoc._id ? `/api/files/${defaultDoc._id}.jpg` : null }],\n    'image');\n\n  },\n\n  media(property, value) {\n    return this.multimedia(property, value, 'media');\n  },\n\n  default(_property, [value]) {\n    return value;\n  },\n\n  geolocation(property, value, _thesauri, { onlyForCards }) {\n    return {\n      label: property.get('label'),\n      name: property.get('name'),\n      value: value.map((geolocation) => geolocation.value),\n      onlyForCards: Boolean(onlyForCards),\n      type: 'geolocation' };\n\n  },\n\n  select(property, [metadataValue]) {\n    const { value, url, icon, parent } = this.getSelectOptions(metadataValue);\n    return {\n      label: property.get('label'),\n      name: property.get('name'),\n      originalValue: metadataValue.value,\n      value,\n      icon,\n      url,\n      parent };\n\n  },\n\n  multiselect(property, thesauriValues) {\n    const sortedValues = this.getThesauriValues(thesauriValues);\n    const groupsOptions = groupByParent(sortedValues);\n    return {\n      label: property.get('label'),\n      name: property.get('name'),\n      value: groupsOptions };\n\n  },\n\n  inherit(property, propValue, thesauri, options, templates) {\n    const propertyInfo = Immutable.fromJS({\n      label: property.get('label'),\n      name: property.get('name'),\n      type: property.get('inherit').get('type'),\n      noLabel: property.get('noLabel') });\n\n\n    const type = propertyInfo.get('type');\n    const methodType = this[type] ? type : 'default';\n    let value = (propValue || []).\n    map((v) => {\n      if (v && v.inheritedValue) {\n        if (\n        !v.inheritedValue.length ||\n        v.inheritedValue.every(\n        (iv) => !(iv.value || type === null || type === 'numeric' && iv.value === 0)))\n\n        {\n          return null;\n        }\n\n        const relatedEntity = prepareRelatedEntity(options, v, templates, property);\n\n        const formattedValue = this[methodType](\n        propertyInfo,\n        v.inheritedValue,\n        thesauri,\n        options,\n        templates);\n\n        return _objectSpread(_objectSpread({},\n        formattedValue),\n        relatedEntity && { relatedEntity });\n\n      }\n\n      return {};\n    }).\n    filter((v) => v);\n    let propType = 'inherit';\n    if (['multidate', 'multidaterange', 'multiselect', 'geolocation'].includes(type)) {\n      propType = type;\n      value = this.flattenInheritedMultiValue(value, type, propValue || [], undefined, {\n        doc: options.doc });\n\n    }\n    value = value.filter((v) => v);\n    return _objectSpread(_objectSpread({\n      translateContext: property.get('content') },\n    propertyInfo.toJS()), {}, {\n      name: property.get('name'),\n      value,\n      label: property.get('label'),\n      type: propType,\n      inheritedType: type,\n      onlyForCards: Boolean(options.onlyForCards),\n      indexInTemplate: property.get('indexInTemplate') });\n\n  },\n\n  flattenInheritedMultiValue(\n  relationshipValues,\n  type,\n  thesaurusValues,\n  templateThesaurus,\n  { doc })\n  {\n    const result = relationshipValues.map((relationshipValue, index) => {\n      let { value } = relationshipValue;\n      if (!value) return [];\n      if (type === 'geolocation') {\n        const options = this.getSelectOptions(thesaurusValues[index], templateThesaurus, doc);\n        const entityLabel = options.value;\n        value = value.map((v) => _objectSpread(_objectSpread({},\n        v), {}, {\n          relatedEntity: options.relatedEntity ? options.relatedEntity : undefined,\n          label: `${entityLabel}${v.label ? ` (${v.label})` : ''}` }));\n\n      }\n      return value;\n    });\n    return result.flat();\n  },\n\n  relationship(property, thesaurusValues, _thesauri, { doc }) {\n    const thesaurus = Immutable.fromJS({\n      type: 'template' });\n\n    const sortedValues = this.getThesauriValues(thesaurusValues, thesaurus, doc);\n    return { label: property.get('label'), name: property.get('name'), value: sortedValues };\n  },\n\n  markdown(property, [{ value }], _thesauris, { type }) {\n    return {\n      label: property.get('label'),\n      name: property.get('name'),\n      value,\n      type: type || 'markdown' };\n\n  },\n\n  nested(property, rows, thesauri) {\n    if (!rows[0]) {\n      return { label: property.get('label'), name: property.get('name'), value: '' };\n    }\n\n    const { locale } = store.getState();\n    const keys = Object.keys(rows[0].value).sort();\n    const translatedKeys = keys.map((key) =>\n    nestedProperties[key.toLowerCase()] ?\n    nestedProperties[key.toLowerCase()][`key_${locale}`] :\n    key);\n\n    let result = `| ${translatedKeys.join(' | ')}|\\n`;\n    result += `| ${keys.map(() => '-').join(' | ')}|\\n`;\n    result += `${rows.\n    map((row) => `| ${keys.map((key) => (row.value[key] || []).join(', ')).join(' | ')}`).\n    join('|\\n')}|`;\n\n    return this.markdown(property, [{ value: result }], thesauri, { type: 'markdown' });\n  },\n\n  getThesauriValues(thesaurusValues, thesaurus, doc) {\n    return advancedSort(\n    thesaurusValues.\n    map((thesaurusValue) => this.getSelectOptions(thesaurusValue, thesaurus, doc)).\n    filter((v) => v.value),\n    { property: 'value' });\n\n  },\n\n  prepareMetadataForCard(doc, templates, thesauri, sortedProperty) {\n    return this.prepareMetadata(doc, templates, thesauri, null, {\n      onlyForCards: true,\n      sortedProperties: [sortedProperty] });\n\n  },\n\n  prepareMetadata(_doc, templates, thesauri, relationships, _options = {}) {\n    const doc = _objectSpread({ metadata: {} }, _doc);\n    const options = _objectSpread({ sortedProperties: [] }, _options);\n    const template = templates.find((temp) => temp.get('_id') === doc.template);\n\n    if (!template || !thesauri.size) {\n      return _objectSpread(_objectSpread({}, doc), {}, { metadata: [], documentType: '' });\n    }\n\n    let metadata = template.\n    get('properties').\n    map((p, index) => p.set('indexInTemplate', index)).\n    filter(\n    this.filterProperties(options.onlyForCards, options.sortedProperties, {\n      excludePreview: options.excludePreview })).\n\n\n    map((property) =>\n    this.applyTransformation(property, {\n      doc,\n      thesauri,\n      options,\n      template,\n      templates,\n      relationships }));\n\n\n\n    metadata = conformSortedProperty(metadata, templates, doc, options.sortedProperties);\n\n    return _objectSpread(_objectSpread({}, doc), {}, { metadata: metadata.toJS(), documentType: template.get('name') });\n  },\n\n  applyTransformation(property, { doc, thesauri, options, template, templates }) {\n    const value = doc.metadata[property.get('name')];\n    const showInCard = property.get('showInCard');\n\n    if (property.get('inherit')) {\n      return this.inherit(property, value, thesauri, _objectSpread(_objectSpread({}, options), {}, { doc }), templates);\n    }\n\n    const methodType = this[property.get('type')] ? property.get('type') : 'default';\n\n    if (value && value.length || methodType === 'preview') {\n      return _objectSpread(_objectSpread({\n        translateContext: template.get('_id') },\n      property.toJS()),\n      this[methodType](property, value, thesauri, _objectSpread(_objectSpread({}, options), {}, { doc })));\n\n    }\n\n    return {\n      label: property.get('label'),\n      name: property.get('name'),\n      type: property.get('type'),\n      value,\n      showInCard,\n      translateContext: template.get('_id') };\n\n  },\n\n  filterProperties(onlyForCards, sortedProperties, options = {}) {\n    return (p) => {\n      if (options.excludePreview && p.get('type') === 'preview') {\n        return false;\n      }\n\n      if (!onlyForCards) {\n        return true;\n      }\n\n      if (p.get('showInCard') || sortedProperties.includes(`metadata.${p.get('name')}`)) {\n        return true;\n      }\n\n      return false;\n    };\n  } };\n\n\nexport { propertyValueFormatter };","/** @format */\n\nexport function notEmpty(val) {\n  if (Array.isArray(val)) {\n    return Boolean(val.length);\n  }\n  if (typeof val === 'number') {\n    return true;\n  }\n\n  if (typeof val === 'object' && val !== null) {\n    return Boolean(Object.keys(val).length);\n  }\n  return !!val && val.trim() !== '';\n}\n\nexport function labelAndUrl(val) {\n  return (\n    !notEmpty(val) ||\n    !notEmpty(val.label) ||\n    notEmpty(val.label) && notEmpty(val.url) ||\n    notEmpty(val.url));\n\n}\n\nexport function latAndLon(val) {\n  return (\n    !notEmpty(val) ||\n    notEmpty(val[0].lat) && notEmpty(val[0].lon) ||\n    !notEmpty(val[0].lat) && !notEmpty(val[0].lon));\n\n}\n\nconst geolocationValidation = (property) => {\n  const validationObject = {};\n  if (property.required) {\n    validationObject[`metadata.${property.name}[0].lat`] = { required: notEmpty };\n    validationObject[`metadata.${property.name}[0].lon`] = { required: notEmpty };\n    return validationObject;\n  }\n\n  validationObject[`metadata.${property.name}`] = { required: latAndLon };\n  return validationObject;\n};\n\nconst linkValidation = (property) => {\n  const validationObject = {};\n  if (property.required) {\n    validationObject[`metadata.${property.name}.label`] = { required: notEmpty };\n    validationObject[`metadata.${property.name}.url`] = { required: notEmpty };\n    return validationObject;\n  }\n\n  validationObject[`metadata.${property.name}`] = { required: labelAndUrl };\n  return validationObject;\n};\n\nexport default {\n  generate(template, noTitle = false) {\n    const validationObject = {\n      title: { required: notEmpty } };\n\n\n    if (noTitle) {\n      delete validationObject.title;\n    }\n\n    template.properties.forEach((property) => {\n      if (property.required) {\n        validationObject[`metadata.${property.name}`] = { required: notEmpty };\n      }\n\n      if (property.type === 'link') {\n        Object.assign(validationObject, linkValidation(property));\n      }\n\n      if (property.type === 'geolocation') {\n        Object.assign(validationObject, geolocationValidation(property));\n      }\n    });\n\n    return validationObject;\n  } };","import { createSelector } from 'reselect';\nimport { entityDefaultDocument } from \"../../shared/entityDefaultDocument\";\n\nimport Immutable from 'immutable';\nimport formater from \"./helpers/formater\";\n\nconst indexValues = (t) =>\nt.set(\n'values',\nt.get('values').reduce((indexed, value) => {\n  if (value.get('values')) {\n    return indexed.merge(indexValues(value).get('values'));\n  }\n  return indexed.set(value.get('id'), value);\n}, new Immutable.Map({})));\n\n\nconst indexedThesaurus = createSelector(\n(s) => s.thesauris,\n(thesaurus) => thesaurus.map((t) => indexValues(t)));\n\n\nconst formatMetadata = createSelector(\n(s) => s.templates,\nindexedThesaurus,\n(s) => s.settings,\n(_s, doc, sortProperty, references, options) => ({ doc, sortProperty, references, options }),\n(templates, thesauris, settings, { doc, sortProperty, references, options }) => {\n  const defaultDoc = entityDefaultDocument(\n  doc.documents,\n  doc.language,\n  settings.\n  get('languages').\n  find((l) => l.get('default')).\n  get('key'));\n\n\n  if (sortProperty) {\n    return formater.prepareMetadataForCard(\n    Object.assign(doc, { defaultDoc }),\n    templates,\n    thesauris,\n    sortProperty).\n    metadata;\n  }\n\n  return formater.prepareMetadata(\n  Object.assign(doc, { defaultDoc }),\n  templates,\n  thesauris,\n  references,\n  options).\n  metadata;\n});\n\n\nconst metadataSelectors = {\n  formatMetadata,\n  indexedThesaurus };\n\n\nexport { metadataSelectors };","const _excluded = [\"templates\", \"thesauris\", \"settings\", \"excludePreview\"],_excluded2 = [\"additionalMetadata\", \"sortedProperty\", \"entity\", \"relationships\"];function _extends() {_extends = Object.assign ? Object.assign.bind() : function (target) {for (var i = 1; i < arguments.length; i++) {var source = arguments[i];for (var key in source) {if (Object.prototype.hasOwnProperty.call(source, key)) {target[key] = source[key];}}}return target;};return _extends.apply(this, arguments);}function _objectWithoutProperties(source, excluded) {if (source == null) return {};var target = _objectWithoutPropertiesLoose(source, excluded);var key, i;if (Object.getOwnPropertySymbols) {var sourceSymbolKeys = Object.getOwnPropertySymbols(source);for (i = 0; i < sourceSymbolKeys.length; i++) {key = sourceSymbolKeys[i];if (excluded.indexOf(key) >= 0) continue;if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;target[key] = source[key];}}return target;}function _objectWithoutPropertiesLoose(source, excluded) {if (source == null) return {};var target = {};var sourceKeys = Object.keys(source);var key, i;for (i = 0; i < sourceKeys.length; i++) {key = sourceKeys[i];if (excluded.indexOf(key) >= 0) continue;target[key] = source[key];}return target;}import { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport Immutable from 'immutable';\nimport { metadataSelectors } from \"../selectors\";\nimport Metadata from \"../components/Metadata\";\n\nconst removeUneededProps = (_ref) => {let { templates, thesauris, settings, excludePreview } = _ref,rest = _objectWithoutProperties(_ref, _excluded);return rest;};\n\nconst BaseFormatMetadata = (_ref2) => {let {\n    additionalMetadata,\n    sortedProperty,\n    entity,\n    relationships } = _ref2,\n  props = _objectWithoutProperties(_ref2, _excluded2);return /*#__PURE__*/(\n\n    React.createElement(Metadata, _extends({\n      metadata: additionalMetadata.concat(\n      metadataSelectors.formatMetadata(props, entity, sortedProperty, relationships, {\n        excludePreview: props.excludePreview })),\n\n\n      templateId: entity.template,\n      compact: !!sortedProperty },\n    removeUneededProps(props))));};\n\n\n\nBaseFormatMetadata.defaultProps = {\n  sortedProperty: '',\n  additionalMetadata: [],\n  relationships: Immutable.fromJS([]),\n  excludePreview: false };\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nexport function mapStateToProps(state, { entity, sortedProperty = '' }) {\n  return {\n    templates: state.templates,\n    thesauris: state.thesauris,\n    settings: state.settings.collection,\n    entity,\n    sortedProperty };\n\n}\n\nexport const FormatMetadata = connect(mapStateToProps)(BaseFormatMetadata);","/** @format */\n\nconst caseTemplate = '58b2f3a35d59f31e1345b48a';\nconst matterTemplate = '58b2f3a35d59f31e1345b4a4';\n\nconst renderableTemplates = {\n  judgement: '58b2f3a35d59f31e1345b4ac',\n  admissibilityReport: '58b2f3a35d59f31e1345b479',\n  orderOfThePresident: '58b2f3a35d59f31e1345b482',\n  orderOfTheCourt: '58b2f3a35d59f31e1345b471',\n  letterOfSubmission: '59ee461f40f4a54920bd9b87',\n  meritsReport: '5a4d294c79f3f44b101e2816',\n  fondo: '59ee427f40f4a54920bd9b67',\n  hearing: '5a68ba41e1525a0c66291e22' };\n\n\nconst datePropertyOverrides = {\n  // hearing: 'fecha_de_la_audiencia',\n};\n\nexport { caseTemplate, matterTemplate, renderableTemplates, datePropertyOverrides };","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };} /** @format */\n\nimport PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\n\nimport Loader from \"../../components/Elements/Loader\";\nimport { t as translate, I18NLink } from \"../../I18N\";\nimport ShowIf from \"../../App/ShowIf\";\n\nimport DocumentsAPI from \"../../Documents/DocumentsAPI\";\nimport EntitiesAPI from \"../../Entities/EntitiesAPI\";\nimport ReferencesAPI from \"../../Viewer/referencesAPI\";\nimport formater from \"../../Metadata/helpers/formater\";\nimport { RequestParams } from \"../../utils/RequestParams\";\n\nimport { Icon } from \"../../UI\";\n\nimport moment from 'moment';\n\nimport {\ncaseTemplate,\nmatterTemplate,\nrenderableTemplates,\ndatePropertyOverrides } from \"../utils/timelineFixedData\";\n\n\nconst desiredTemplates = Object.keys(renderableTemplates).map((t) => renderableTemplates[t]);\nconst dateProperties = Object.keys(renderableTemplates).reduce(\n(memo, t) =>\nObject.assign(memo, { [renderableTemplates[t]]: datePropertyOverrides[t] || 'fecha' }),\n{});\n\n\nconst fetchReferences = (entityId) => ReferencesAPI.get(new RequestParams({ sharedId: entityId }));\n\nconst getRelatedReferences = (references, template) => {\n  let promise = Promise.resolve([]);\n  const relatedEntity = references.find((r) => r.entityData.template === template);\n  if (relatedEntity) {\n    promise = fetchReferences(relatedEntity.entityData.sharedId);\n  }\n\n  return promise;\n};\n\nconst fetchReferenceData = (references) => {\n  const fetchPromises = references.map((reference) => {\n    const get = reference.entityData.type === 'document' ? DocumentsAPI.get : EntitiesAPI.get;\n    return get(new RequestParams({ sharedId: reference.entityData.sharedId }));\n  });\n\n  return Promise.all(fetchPromises);\n};\n\nconst assignDataToYear = (years, date, data) => {\n  const year = moment.utc(date * 1000).format('YYYY');\n  years[year] = years[year] || [];\n  years[year].push(data);\n};\n\nconst normalizeYears = (years) => {\n  const currentYear = Number(moment().format('YYYY'));\n  const { minYear, maxYear } = Object.keys(years).reduce(\n  (memo, year) => {\n    memo.minYear = Math.min(memo.minYear, Number(year));\n    memo.maxYear = Math.max(memo.maxYear, Number(year));\n    return memo;\n  },\n  { minYear: currentYear, maxYear: 0 });\n\n\n  for (let year = minYear - 3; year < (maxYear || currentYear) + 3; year += 1) {\n    years[year] = years[year] || [];\n  }\n\n  return years;\n};\n\nconst splitByOrigin = (years) =>\n['main', 'related'].reduce(\n(tracks, trackName) => {\n  tracks[trackName] = Object.keys(years).reduce(\n  (memo, year) => {\n    memo.years[year] = years[year].filter((i) =>\n    trackName === 'main' ? i.origin !== 'related' : i.origin === 'related');\n\n    return memo;\n  },\n  { years: {}, label: '', className: '' });\n\n  return tracks;\n},\n{ main: {}, related: {} });\n\n\nexport class TimelineViewer extends Component {\n  getTemplateType(itemTemplate) {\n    return this.plainTemplates.reduce((result, template, index) => {\n      if (template._id === itemTemplate) {\n        return `timeline-item-type-${index}`;\n      }\n      return result;\n    }, '');\n  }\n\n  getDates(entity, origin) {\n    const caseDatesNames = this.props.templates.reduce((names, t) => {\n      t.get('properties').forEach((p) => {\n        if (p.get('type') === 'multidate' || p.get('type') === 'date') {\n          names.push(p.get('name'));\n        }\n      });\n      return names;\n    }, []);\n\n    return entity.metadata.reduce((dates, metadata) => {\n      if (caseDatesNames.indexOf(metadata.name) !== -1) {\n        if (metadata.type === 'date') {\n          dates.push({ label: metadata.label, timestamp: metadata.timestamp, origin });\n        }\n\n        if (metadata.type === 'multidate') {\n          (metadata.value || []).forEach((date) => {\n            dates.push({ label: metadata.label, timestamp: date.timestamp, origin });\n          });\n        }\n      }\n      return dates;\n    }, []);\n  }\n\n  assignActiveYears(tracks) {\n    Object.keys(tracks).forEach((track) => {\n      tracks[track].active = Object.keys(tracks[track].years).reduce(\n      (memo, year) => {\n        if (tracks[track].years[year].length) {\n          if (!memo.start) {\n            memo.start = year;\n          }\n          memo.end = year;\n        }\n        return memo;\n      },\n      { start: null, end: null });\n\n    });\n\n    return tracks;\n  }\n\n  sortEvents(years) {\n    Object.keys(years).reduce((memo, year) => {\n      years[year].sort((a, b) => Number(a.timestamp) > Number(b.timestamp));\n      if (!memo && years[year].length) {\n        years[year][0].firstMilestone = true;\n        return true;\n      }\n      return memo;\n    }, null);\n\n    return years;\n  }\n\n  arrangeTracks(references, dates, hasRelatedReferences) {\n    const years = {};\n    references.forEach((reference) => {\n      const isDesiredTemplate = desiredTemplates.indexOf(reference.data.template !== -1);\n      const metadataProperty = reference.data.metadata[dateProperties[reference.data.template]];\n      const hasDate = metadataProperty[0] && metadataProperty[0].value !== null;\n      if (isDesiredTemplate && hasDate) {\n        assignDataToYear(\n        years,\n        reference.data.metadata[dateProperties[reference.data.template]][0].value,\n        reference);\n\n        this.assignAdditionalData(reference);\n      }\n    });\n\n    dates.forEach((date) => {\n      assignDataToYear(years, date.timestamp, date);\n    });\n\n    const tracks = this.assignActiveYears(splitByOrigin(normalizeYears(this.sortEvents(years))));\n\n    if (!hasRelatedReferences) {\n      delete tracks.related;\n    }\n\n    return tracks;\n  }\n\n  assignTrackLabels(tracks, isMainMatter) {\n    const mainTrackTemplate = this.plainTemplates.find(\n    (template) => template._id === (!isMainMatter ? caseTemplate : matterTemplate));\n\n    tracks.main.label = translate(mainTrackTemplate._id, mainTrackTemplate.name);\n    tracks.main.className = this.getTemplateType(mainTrackTemplate._id);\n    if (tracks.related) {\n      const relatedTrackTemplate = this.plainTemplates.find(\n      (template) => template._id === matterTemplate);\n\n      tracks.related.label = translate(relatedTrackTemplate._id, relatedTrackTemplate.name);\n      tracks.related.className = this.getTemplateType(relatedTrackTemplate._id);\n    }\n    return tracks;\n  }\n\n  getRelatedEntity(references, isCase) {\n    let fetchRelatedEntity = Promise.resolve(null);\n\n    const relatedEntity = references.find(\n    (r) => r.entityData.template === (isCase ? matterTemplate : caseTemplate));\n\n    if (relatedEntity) {\n      fetchRelatedEntity = EntitiesAPI.get(\n      new RequestParams({ sharedId: relatedEntity.entityData.sharedId })).\n      then((results) =>\n      formater.prepareMetadata(results[0], this.props.templates, this.props.thesauris));\n\n    }\n\n    return fetchRelatedEntity;\n  }\n\n  getTimelineInfo(entity) {\n    let usefulReferences;\n    const isCase = entity.template === caseTemplate;\n\n    this.plainTemplates = this.props.templates.toJS();\n\n    fetchReferences(entity.sharedId).\n    then((references) => {\n      const relatedReferences = getRelatedReferences(\n      references,\n      isCase ? matterTemplate : caseTemplate);\n\n      return Promise.all([\n      this.getRelatedEntity(references, isCase),\n      references,\n      relatedReferences]);\n\n    }).\n    then(([relatedEntity, references, relatedReferences]) => {\n      usefulReferences = this.filterUsefulReferences(\n      entity,\n      references,\n      relatedReferences,\n      isCase);\n\n      return Promise.all([\n      relatedEntity,\n      fetchReferenceData(usefulReferences),\n      relatedReferences]);\n\n    }).\n    then(([relatedEntity, referencesData, relatedReferences]) => {\n      const conformedReferences = usefulReferences.map((reference, index) => {\n        const { parentTemplate, origin } = reference;\n        return { reference, parentTemplate, origin, data: referencesData[index][0] };\n      });\n\n      let entityDatesTrack = isCase ? 'main' : 'related';\n      entityDatesTrack = !isCase && !relatedEntity ? 'main' : entityDatesTrack;\n\n      const entityDates = this.getDates(entity, entityDatesTrack);\n      const relatedDates = relatedEntity ?\n      this.getDates(relatedEntity, isCase ? 'related' : 'main') :\n      [];\n      const dates = entityDates.concat(relatedDates);\n\n      const isMainMatter = !isCase && !relatedEntity;\n\n      this.setState({\n        references: conformedReferences,\n        tracks: this.assignTrackLabels(\n        this.arrangeTracks(conformedReferences, dates, relatedReferences.length),\n        isMainMatter) });\n\n\n    });\n  }\n\n  assignAdditionalData(reference) {\n    Object.keys(renderableTemplates).forEach((templateName) => {\n      if (reference.data.template === renderableTemplates[templateName]) {\n        reference.additionalData = { type: templateName };\n      }\n    });\n\n    reference.additionalData.className = this.getTemplateType(reference.data.template);\n    reference.additionalData.date =\n    reference.data.metadata[dateProperties[reference.data.template]][0].value;\n    reference.timestamp = reference.data.metadata[dateProperties[reference.data.template]][0].value;\n  }\n\n  filterUsefulReferences(entity, references, relatedReferences, isCase) {\n    const referenceLabel = this.plainTemplates.find((t) => t._id === entity.template).name;\n    const referenceClassName = this.getTemplateType(entity.template);\n    const relatedReferenceLabel = this.plainTemplates.find(\n    (t) => t._id === (isCase ? matterTemplate : caseTemplate)).\n    name;\n    const relatedReferenceClassName = this.getTemplateType(isCase ? matterTemplate : caseTemplate);\n\n    return references.\n    map((r) => {\n      r.parentTemplate = { label: referenceLabel, className: referenceClassName };\n      r.origin = isCase || !relatedReferences.length ? 'main' : 'related';\n      return r;\n    }).\n    concat(\n    relatedReferences.map((r) => {\n      r.parentTemplate = { label: relatedReferenceLabel, className: relatedReferenceClassName };\n      r.origin = isCase ? 'related' : 'main';\n      return r;\n    })).\n\n    filter((r) => desiredTemplates.indexOf(r.entityData.template) !== -1);\n  }\n\n  componentDidMount() {\n    this.getTimelineInfo(this.props.entity);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (this.props.entity._id !== nextProps.entity._id) {\n      this.setState({ tracks: null }, () => {\n        this.getTimelineInfo(nextProps.entity);\n      });\n    }\n  }\n\n  render() {\n    const tracks = { keys: ['main'], main: '', related: '', axis: '' };\n    if (this.state && this.state.tracks) {\n      if (Object.keys(this.state.tracks).indexOf('related') !== -1) {\n        tracks.keys.push('related');\n      }\n\n      tracks.keys.forEach((trackName) => {\n        const track = this.state.tracks[trackName];\n        tracks[trackName] = Object.keys(track.years).map((year) => {\n          const nth5 = year % 5 === 0 ? 'nth5' : '';\n          const activeClassName = `timeline-year-active ${track.className.replace(\n          'timeline-item-',\n          '')\n          }`;\n          const active =\n          year >= track.active.start && year <= track.active.end ? activeClassName : '';\n          return /*#__PURE__*/(\n            _jsx(\"div\", { className: `timeline-year ${nth5} ${active}` }, year, /*#__PURE__*/\n            _jsx(ShowIf, { if: year === track.active.start }, void 0, /*#__PURE__*/\n            _jsx(\"span\", { className: `timeline-track-label item-type__name ${track.className}` }, void 0,\n            track.label)),\n\n\n\n            track.years[year].map((reference, index) => {\n              if (reference.reference) {\n                const linkType = reference.reference.entityData.file ? 'document' : 'entity';\n                return /*#__PURE__*/(\n                  _jsx(I18NLink, {\n                    to: `/${linkType}/${reference.data.sharedId}`,\n\n                    className: `timeline-item ${reference.additionalData.className}`,\n                    \"data-toggle\": \"tooltip\",\n                    \"data-placement\": \"top\",\n                    \"data-animation\": \"false\",\n                    title: `${moment.utc(reference.additionalData.date * 1000).format('ll')}\\n${\n                    reference.data.title\n                    }` }, index, /*#__PURE__*/\n\n                  _jsx(ShowIf, { if: reference.firstMilestone }, void 0, /*#__PURE__*/\n                  _jsx(\"span\", { className: \"timeline-milestone \" }, void 0, /*#__PURE__*/\n                  _jsx(\"span\", {}, void 0,\n                  `${moment.\n                  utc(reference.additionalData.date * 1000).\n                  format('MMM YYYY')}`))), /*#__PURE__*/\n\n\n\n                  _jsx(ShowIf, { if: reference.additionalData.type === 'judgement' }, void 0, /*#__PURE__*/\n                  _jsx(Icon, { icon: \"gavel\" }))));\n\n\n\n              }\n\n              if (!reference.reference) {\n                return /*#__PURE__*/(\n                  _jsx(\"span\", {\n\n                    className: \"timeline-item\",\n                    \"data-toggle\": \"tooltip\",\n                    \"data-placement\": \"top\",\n                    \"data-animation\": \"false\",\n                    title: `${moment.utc(reference.timestamp * 1000).format('ll')}\\n${\n                    reference.label\n                    }` }, index, /*#__PURE__*/\n\n                  _jsx(ShowIf, { if: reference.firstMilestone }, void 0, /*#__PURE__*/\n                  _jsx(\"span\", { className: \"timeline-milestone \" }, void 0, /*#__PURE__*/\n                  _jsx(\"span\", {}, void 0,\n                  `${moment.utc(reference.timestamp * 1000).format('MMM YYYY')}`)))));\n\n\n\n\n\n              }\n            })));\n\n\n        });\n      });\n\n      tracks.axis = Object.keys(this.state.tracks.main.years).map((year) => /*#__PURE__*/\n      _jsx(\"div\", { className: \"timeline-year\" }, year, /*#__PURE__*/\n      _jsx(\"div\", { className: `timeline-label ${year % 5 === 0 ? 'timeline-label-text' : ''}` }, void 0, /*#__PURE__*/\n      _jsx(\"span\", {}, void 0, year))));\n\n\n\n    }\n\n    return /*#__PURE__*/(\n      _jsx(\"div\", { className: \"timeline\" }, void 0,\n      (() => {\n        if (!this.state || !this.state.tracks) {\n          return /*#__PURE__*/_jsx(Loader, {});\n        }\n\n        return null;\n      })(), /*#__PURE__*/\n      _jsx(ShowIf, { if: Boolean(this.state && this.state.tracks && this.state.tracks.related) }, void 0, /*#__PURE__*/\n      _jsx(\"div\", { className: \"timeline-track\" }, void 0, tracks.related)), /*#__PURE__*/\n\n      _jsx(\"div\", { className: \"timeline-track\" }, void 0, tracks.main), /*#__PURE__*/\n      _jsx(\"div\", { className: \"timeline-track\" }, void 0, tracks.axis)));\n\n\n  }}\n\n\n\n\n\n\n\n\n\nfunction mapStateToProps({ templates, thesauris }, { entity }) {\n  return {\n    templates,\n    thesauris,\n    entity: formater.prepareMetadata(entity, templates, thesauris) };\n\n}\n\nexport default connect(mapStateToProps)(TimelineViewer);","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import ShowIf from \"../../App/ShowIf\";\nimport { DocumentLanguage, TemplateLabel } from \"../../Layout\";\nimport { Icon } from \"../../Layout/Icon\";\nimport TimelineViewer from \"../../Timeline/components/TimelineViewer\";\nimport { caseTemplate, matterTemplate } from \"../../Timeline/utils/timelineFixedData\";\nimport Immutable from 'immutable';\nimport PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { FormatMetadata } from \"../containers/FormatMetadata\";\n\nexport class ShowMetadata extends Component {\n  render() {\n    const { entity, showTitle, showType, relationships, showSubset, groupGeolocations } =\n    this.props;\n    let header = '';\n    if (showTitle || showType) {\n      let title = '';\n      if (showTitle) {\n        title = /*#__PURE__*/\n        _jsx(\"div\", {}, void 0, /*#__PURE__*/\n        _jsx(Icon, { className: \"item-icon item-icon-center\", data: entity.icon }), /*#__PURE__*/\n        _jsx(\"h1\", { className: \"item-name\" }, void 0,\n        entity.title, /*#__PURE__*/\n        _jsx(DocumentLanguage, { doc: Immutable.fromJS(entity) })));\n\n\n\n      }\n      const type = showType ? /*#__PURE__*/_jsx(TemplateLabel, { template: entity.template }) : '';\n      header = /*#__PURE__*/\n      _jsx(\"div\", { className: \"item-info\" }, void 0,\n      title,\n      type);\n\n\n    }\n\n    return /*#__PURE__*/(\n      _jsx(\"div\", { className: \"view\" }, void 0,\n      header, /*#__PURE__*/\n\n      _jsx(ShowIf, { if: entity.template === caseTemplate || entity.template === matterTemplate }, void 0, /*#__PURE__*/\n      _jsx(\"dl\", { className: \"metadata-timeline-viewer\" }, void 0, /*#__PURE__*/\n      _jsx(\"dd\", {}, void 0, /*#__PURE__*/\n      _jsx(TimelineViewer, { entity: entity })))), /*#__PURE__*/\n\n\n\n      _jsx(FormatMetadata, {\n        entity: entity,\n        relationships: relationships,\n        showSubset: showSubset,\n        groupGeolocations: groupGeolocations,\n        renderLabel: (prop, label) => !prop.noLabel && label })));\n\n\n\n  }}\n\nShowMetadata.defaultProps = {\n  showSubset: undefined,\n  groupGeolocations: false };\n\n\n\n\n\n\n\n\n\n\n\n\nconst mapStateToProps = ({ templates }) => ({ templates });\n\nexport default connect(mapStateToProps)(ShowMetadata);","const unique = (v, i, a) => a.indexOf(v) === i;\nconst emptyString = (v) => v.trim() !== '';\n\nexport { unique, emptyString };","function ownKeys(object, enumerableOnly) {var keys = Object.keys(object);if (Object.getOwnPropertySymbols) {var symbols = Object.getOwnPropertySymbols(object);enumerableOnly && (symbols = symbols.filter(function (sym) {return Object.getOwnPropertyDescriptor(object, sym).enumerable;})), keys.push.apply(keys, symbols);}return keys;}function _objectSpread(target) {for (var i = 1; i < arguments.length; i++) {var source = null != arguments[i] ? arguments[i] : {};i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {_defineProperty(target, key, source[key]);}) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));});}return target;}function _defineProperty(obj, key, value) {if (key in obj) {Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });} else {obj[key] = value;}return obj;}import Ajv from 'ajv';\nimport { objectIdSchema } from \"./commonSchemas\";\nimport { unique } from \"../../api/utils/filters\";\nimport { wrapValidator } from \"../tsUtils\";\n\n\nconst ajv = new Ajv({ allErrors: true });\najv.addVocabulary(['tsType']);\n\nexport const emitSchemaTypes = true;\n\nexport let AccessLevels;(function (AccessLevels) {AccessLevels[\"READ\"] = \"read\";AccessLevels[\"WRITE\"] = \"write\";})(AccessLevels || (AccessLevels = {}));\n\n\n\n\nexport let MixedAccess;(function (MixedAccess) {MixedAccess[\"MIXED\"] = \"mixed\";})(MixedAccess || (MixedAccess = {}));\n\n\n\n\n\nexport let PermissionType;(function (PermissionType) {PermissionType[\"USER\"] = \"user\";PermissionType[\"GROUP\"] = \"group\";PermissionType[\"PUBLIC\"] = \"public\";})(PermissionType || (PermissionType = {}));\n\n\n\n\n\nexport const permissionType = { type: 'string', enum: Object.values(PermissionType) };\nexport const permissionLevel = {\n  type: 'string',\n  enum: Object.values(_objectSpread(_objectSpread({}, AccessLevels), MixedAccess)) };\n\n\nexport const permissionSchema = {\n  type: 'object',\n  additionalProperties: false,\n  definitions: { objectIdSchema },\n  properties: {\n    refId: objectIdSchema,\n    type: permissionType,\n    level: permissionLevel },\n\n  required: ['refId', 'type', 'level'] };\n\n\najv.addKeyword({\n  keyword: 'uniqueIds',\n  type: 'object',\n  errors: true,\n  validate: (fields, data) => {\n    const allowedIds = data.permissions.map((item) => item.refId);\n    const uniqueIds = allowedIds.filter(unique);\n    if (allowedIds.length !== uniqueIds.length) {\n      throw new Ajv.ValidationError([\n      {\n        keyword: 'duplicatedPermissions',\n        schemaPath: '',\n        params: { keyword: 'duplicatedPermissions', fields },\n        message: 'Permissions should be unique by person/group',\n        instancePath: '.permissions' }]);\n\n\n    }\n    return true;\n  } });\n\n\nexport const permissionsDataSchema = {\n  type: 'object',\n  additionalProperties: false,\n  definitions: { objectIdSchema },\n  properties: {\n    ids: { type: 'array', items: { type: 'string' } },\n    permissions: {\n      type: 'array',\n      items: _objectSpread({}, permissionSchema) } },\n\n\n  required: ['ids', 'permissions'] };\n\n\nexport const validateUniquePermissions = wrapValidator(\najv.compile({ type: 'object', uniqueIds: true }));","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import React from 'react';\nimport { Icon } from \"../../UI\";\n\nimport { PermissionType } from \"../../../shared/types/permissionSchema\";\n\n\n\n\n\nconst iconsMap = {\n  [PermissionType.USER]: 'user',\n  [PermissionType.GROUP]: 'users',\n  [PermissionType.PUBLIC]: 'globe-africa' };\n\n\nexport const MemberListItemInfo = ({ value: { type, label } }) => /*#__PURE__*/\n_jsx(\"div\", { className: \"member-list-item\" }, void 0, /*#__PURE__*/\n_jsx(\"div\", { className: \"round-icon\" }, void 0, /*#__PURE__*/\n_jsx(Icon, { icon: iconsMap[type] })), /*#__PURE__*/\n\n_jsx(\"span\", {}, void 0, label));","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import { Translate } from \"../../I18N\";\nimport React, { useCallback, useRef, useState } from 'react';\nimport { Icon } from \"../../UI\";\n\nimport debounce from \"../../utils/debounce\";\nimport { MemberListItemInfo } from \"./MemberListItemInfo\";\n\n\n\n\n\n\n\nexport const UserGroupsLookupField = ({\n  onChange,\n  onSelect,\n  options }) =>\n{\n  const [selected, setSelected] = useState(null);\n  const [show, setShow] = useState(false);\n  const [searchTerm, setSearchTerm] = useState('');\n  const debouncedOnChange = useCallback(debounce(onChange, 500), [onChange]);\n\n  const onChangeHandler = (event) => {\n    setShow(true);\n    setSearchTerm(event.target.value);\n    debouncedOnChange(event.target.value);\n  };\n\n  const getOnSelectHandler = (selection) => () => {\n    onSelect(selection);\n    setShow(false);\n  };\n\n  const onKeyPressHandler = (event) => {\n    switch (event.key) {\n      case 'ArrowUp':\n        event.preventDefault();\n        if (!selected) {\n          setSelected(options.length - 1);\n        } else {\n          setSelected((selected - 1) % options.length);\n        }\n\n        break;\n      case 'ArrowDown':\n        event.preventDefault();\n        if (selected === null) {\n          setSelected(0);\n        } else {\n          setSelected((selected + 1) % options.length);\n        }\n\n        break;\n      case 'Enter':\n        event.preventDefault();\n        if (selected !== null) {\n          onSelect(options[selected]);\n          setShow(false);\n        }\n        break;\n      case 'Escape':\n        event.preventDefault();\n        setShow(false);\n        break;\n      default:\n        break;}\n\n  };\n\n  const optionsListRef = useRef(null);\n\n  return /*#__PURE__*/(\n    _jsx(\"div\", { className: \"userGroupsLookupField\" }, void 0, /*#__PURE__*/\n    _jsx(\"input\", {\n      type: \"text\",\n      placeholder: \"Add people or groups\",\n      onChange: onChangeHandler,\n      onKeyDown: onKeyPressHandler,\n      onBlur: (e) => {\n        if (e.relatedTarget !== optionsListRef.current) {\n          setShow(false);\n        }\n      },\n      onFocus: () => {\n        setShow(true);\n      },\n      value: searchTerm }),\n\n    show && options.length ? /*#__PURE__*/\n    React.createElement(\"ul\", { tabIndex: -1, role: \"listbox\", ref: optionsListRef },\n    options.map((result, index) => /*#__PURE__*/\n    _jsx(\"li\", {\n\n      role: \"option\",\n      \"aria-selected\": index === selected,\n      onClick: getOnSelectHandler(result),\n      className: index === selected ? 'selected' : '' }, `${result.type}-${result.refId}`, /*#__PURE__*/\n\n    _jsx(MemberListItemInfo, { value: result }), /*#__PURE__*/\n    _jsx(\"div\", { className: \"press-enter-note\" }, void 0, /*#__PURE__*/\n    _jsx(\"span\", {}, void 0, /*#__PURE__*/\n    _jsx(Translate, {}, void 0, \"Press enter to add\")), /*#__PURE__*/\n\n    _jsx(Icon, { icon: \"level-down-alt\", transform: { rotate: 90 } }))))) :\n\n\n\n\n    null));\n\n\n};","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}function ownKeys(object, enumerableOnly) {var keys = Object.keys(object);if (Object.getOwnPropertySymbols) {var symbols = Object.getOwnPropertySymbols(object);enumerableOnly && (symbols = symbols.filter(function (sym) {return Object.getOwnPropertyDescriptor(object, sym).enumerable;})), keys.push.apply(keys, symbols);}return keys;}function _objectSpread(target) {for (var i = 1; i < arguments.length; i++) {var source = null != arguments[i] ? arguments[i] : {};i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {_defineProperty(target, key, source[key]);}) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));});}return target;}function _defineProperty(obj, key, value) {if (key in obj) {Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });} else {obj[key] = value;}return obj;}import React, { useState } from 'react';\n\nimport { t } from \"../../I18N\";\nimport { MixedAccess } from \"../../../shared/types/permissionSchema\";\nimport { PermissionType, AccessLevels } from \"../../../shared/types/permissionSchema\";\n\n\n\n\n\n\n\n\nexport const MemberListItemPermission = ({\n  value,\n  onChange,\n  onDelete,\n  disabled }) =>\n{\n  const [stillIncludeMixed] = useState(value.level === MixedAccess.MIXED);\n\n  const onChangeHandler = (event) => {\n    if (event.target.value === 'delete') {\n      return onDelete(value);\n    }\n\n    return onChange(_objectSpread(_objectSpread({},\n    value), {}, {\n      level: event.target.value }));\n\n  };\n\n  return /*#__PURE__*/(\n    _jsx(\"select\", { value: value.level, onChange: onChangeHandler, disabled: disabled }, void 0,\n    stillIncludeMixed ? /*#__PURE__*/\n    _jsx(\"option\", { value: MixedAccess.MIXED }, void 0, t('System', 'Mixed access', null, false)) :\n    null, /*#__PURE__*/\n    _jsx(\"option\", { value: AccessLevels.READ }, void 0, t('System', 'Can see', null, false)),\n    value.type !== PermissionType.PUBLIC ? /*#__PURE__*/\n    _jsx(\"option\", { value: AccessLevels.WRITE }, void 0, t('System', 'Can edit', null, false)) :\n    null, /*#__PURE__*/\n    _jsx(\"option\", { disabled: true }, void 0, \"\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\"), /*#__PURE__*/\n    _jsx(\"option\", { value: \"delete\" }, void 0, t('System', 'Remove', null, false))));\n\n\n};","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };} /* eslint-disable react/no-multi-comp */\nimport React from 'react';\n\nimport { PermissionType } from \"../../../shared/types/permissionSchema\";\nimport { NeedAuthorization } from \"../../Auth\";\nimport { MemberListItemInfo } from \"./MemberListItemInfo\";\nimport { MemberListItemPermission } from \"./MemberListItemPermission\";\n\n\n\n\n\n\nconst notShowPublicToCollab = (member, children) =>\nmember.type === PermissionType.PUBLIC ? /*#__PURE__*/\n_jsx(NeedAuthorization, { roles: ['admin', 'editor'] }, void 0, children) :\n\nchildren;\n\n\nexport const MembersList = ({ members, onChange }) => {\n  const onChangeHandler = (index) => (value) => {\n    const newMembers = [...members];\n    newMembers[index] = value;\n    onChange(newMembers);\n  };\n\n  const onDeleteHandler = (value) => {\n    onChange(members.filter((m) => m !== value));\n  };\n\n  return /*#__PURE__*/(\n    _jsx(\"table\", { className: \"members-list\" }, void 0, /*#__PURE__*/\n    _jsx(\"tbody\", {}, void 0,\n    members.map((member, index) => /*#__PURE__*/\n    _jsx(\"tr\", {}, `${member.type}-${member.refId}`, /*#__PURE__*/\n    _jsx(\"td\", {}, void 0, /*#__PURE__*/\n    _jsx(MemberListItemInfo, { value: member })), /*#__PURE__*/\n\n    _jsx(\"td\", {}, void 0,\n    notShowPublicToCollab(\n    member, /*#__PURE__*/\n    _jsx(MemberListItemPermission, {\n      value: member,\n      onChange: onChangeHandler(index),\n      onDelete: onDeleteHandler,\n      disabled: !member.refId }))))))));\n\n\n\n\n\n\n\n\n};","function ownKeys(object, enumerableOnly) {var keys = Object.keys(object);if (Object.getOwnPropertySymbols) {var symbols = Object.getOwnPropertySymbols(object);enumerableOnly && (symbols = symbols.filter(function (sym) {return Object.getOwnPropertyDescriptor(object, sym).enumerable;})), keys.push.apply(keys, symbols);}return keys;}function _objectSpread(target) {for (var i = 1; i < arguments.length; i++) {var source = null != arguments[i] ? arguments[i] : {};i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {_defineProperty(target, key, source[key]);}) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));});}return target;}function _defineProperty(obj, key, value) {if (key in obj) {Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });} else {obj[key] = value;}return obj;}var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };} /* eslint-disable react/no-multi-comp */\n/* eslint-disable max-statements */\nimport Modal from \"../../Layout/Modal\";\nimport React, { useState, useEffect } from 'react';\nimport { Icon } from \"../../UI\";\nimport { Translate } from \"../../I18N\";\n\nimport { AccessLevels, PermissionType } from \"../../../shared/types/permissionSchema\";\nimport { saveEntitiesPermissions } from \"../actions/actions\";\nimport { connect } from 'react-redux';\n\nimport { UserGroupsLookupField } from \"./UserGroupsLookupField\";\nimport { MembersList } from \"./MembersList\";\nimport { loadGrantedPermissions, searchCollaborators } from \"../PermissionsAPI\";\n\n\n\n\n\n\n\n\n\n\n\n\nconst pseudoMembers = [\n{\n  refId: '',\n  type: 'group',\n  label: 'Administrators and Editors',\n  level: AccessLevels.WRITE }];\n\n\n\nconst findPublicPermission = (permissions) =>\npermissions.find((p) => p.type === PermissionType.PUBLIC);\n\nconst getWarningMessage = (publishingLevel) =>\n!publishingLevel ? /*#__PURE__*/\nReact.createElement(React.Fragment, null, /*#__PURE__*/\n_jsx(Translate, {}, void 0, \"Caution: the selected entities will be \"), /*#__PURE__*/\n_jsx(\"b\", {}, void 0, /*#__PURE__*/\n_jsx(Translate, {}, void 0, \"private\")), \". \", /*#__PURE__*/\n\n_jsx(Translate, {}, void 0, \"Only allowed users will be able to see them\")) : /*#__PURE__*/\n\n\nReact.createElement(React.Fragment, null, /*#__PURE__*/\n_jsx(Translate, {}, void 0, \"Caution: the selected entities will be \"), /*#__PURE__*/\n_jsx(\"b\", {}, void 0, /*#__PURE__*/\n_jsx(Translate, {}, void 0, \"public\")), \". \", /*#__PURE__*/\n\n_jsx(Translate, {}, void 0, \"Anyone will be able to see them\"));\n\n\n\nexport const ShareEntityModalComponent = ({\n  isOpen,\n  onClose,\n  sharedIds,\n  saveEntitiesPermissions: savePermissions,\n  storeKey }) =>\n{var _findPublicPermission;\n  const [results, setResults] = useState([]);\n  const [assignments, setAssignments] = useState([]);\n  const [dirty, setDirty] = useState(false);\n  const [originalPublicLevel, setOriginalPublicLevel] = useState(false);\n\n  const searchAndLoadCollabs = async (\n  searchTerm,\n  currentAssignments) =>\n  {\n    const collaborators = await searchCollaborators(searchTerm);\n    setResults(\n    collaborators.filter(\n    (r) => !currentAssignments.find((a) => a.refId === r.refId && a.type === r.type)));\n\n\n  };\n\n  useEffect(() => {\n    loadGrantedPermissions(sharedIds).\n    then((permissions) => {\n      const loadedAssignments = permissions.map((p) => _objectSpread(_objectSpread({}, p), {}, { refId: p.refId }));\n      setAssignments(loadedAssignments);\n\n      const publicPermission = findPublicPermission(permissions);\n      setOriginalPublicLevel((publicPermission === null || publicPermission === void 0 ? void 0 : publicPermission.level) || false);\n\n      searchAndLoadCollabs('', loadedAssignments).catch(() => {});\n    }).\n    catch(() => {});\n\n    return () => {\n      setAssignments([]);\n      setResults([]);\n      setDirty(false);\n      setOriginalPublicLevel(false);\n    };\n  }, []);\n\n  const onChangeHandler = async (value) => {\n    await searchAndLoadCollabs(value, assignments);\n  };\n\n  const onSelectHandler = (value) => {\n    setAssignments([...assignments, _objectSpread(_objectSpread({}, value), {}, { level: value.level || AccessLevels.READ })]);\n    setResults(results.filter((r) => !(value.refId === r.refId && value.type === r.type)));\n    setDirty(true);\n  };\n\n  const onSaveHandler = async () => {\n    await savePermissions(\n    {\n      ids: sharedIds,\n      permissions: assignments.map((a) => ({\n        refId: a.refId,\n        type: a.type,\n        level: a.level })) },\n\n\n    storeKey);\n\n    return onClose();\n  };\n\n  const members = pseudoMembers.concat(assignments);\n  const currentPublicLevel = ((_findPublicPermission = findPublicPermission(members)) === null || _findPublicPermission === void 0 ? void 0 : _findPublicPermission.level) || false;\n\n  return /*#__PURE__*/(\n    _jsx(Modal, { isOpen: isOpen, type: \"content\", className: \"share-modal\", zIndex: 1000 }, void 0, /*#__PURE__*/\n    _jsx(Modal.Header, {}, void 0, /*#__PURE__*/\n    _jsx(\"div\", { className: \"round-icon\" }, void 0, /*#__PURE__*/\n    _jsx(Icon, { icon: \"user-plus\" })), /*#__PURE__*/\n\n    _jsx(\"h1\", {}, void 0, /*#__PURE__*/\n    _jsx(Translate, {}, void 0, \"Share with people and groups\"))), /*#__PURE__*/\n\n\n\n    _jsx(Modal.Body, {}, void 0, /*#__PURE__*/\n    _jsx(UserGroupsLookupField, {\n      onChange: onChangeHandler,\n      onSelect: onSelectHandler,\n      options: results }), /*#__PURE__*/\n\n    _jsx(\"div\", { className: \"member-list-wrapper\" }, void 0, /*#__PURE__*/\n    _jsx(MembersList, {\n      members: members,\n      onChange: (value) => {\n        setAssignments(value.filter((m) => m.refId));\n        setDirty(true);\n      } })),\n\n\n    originalPublicLevel !== currentPublicLevel ? /*#__PURE__*/\n    _jsx(\"span\", { className: \"validation-message\" }, void 0, getWarningMessage(currentPublicLevel), \".\") :\n    null),\n\n\n    dirty ? /*#__PURE__*/\n    _jsx(Modal.Footer, {}, void 0, /*#__PURE__*/\n    _jsx(\"button\", { type: \"button\", className: \"btn btn-default cancel-button\", onClick: onClose }, void 0, /*#__PURE__*/\n    _jsx(Icon, { icon: \"times\" }), /*#__PURE__*/\n    _jsx(Translate, {}, void 0, \"Discard changes\")), /*#__PURE__*/\n\n    _jsx(\"button\", { type: \"button\", className: \"btn confirm-button btn-success\", onClick: onSaveHandler }, void 0, /*#__PURE__*/\n    _jsx(Icon, { icon: \"save\" }), /*#__PURE__*/\n    _jsx(Translate, {}, void 0, \"Save changes\"))) : /*#__PURE__*/\n\n\n\n    _jsx(Modal.Footer, {}, void 0, /*#__PURE__*/\n    _jsx(\"button\", { type: \"button\", className: \"btn btn-default pristine\", onClick: onClose }, void 0, /*#__PURE__*/\n    _jsx(Translate, {}, void 0, \"Close\")))));\n\n\n\n\n\n};\n\nconst mapDispatchToProps = {\n  saveEntitiesPermissions };\n\n\nexport const ShareEntityModal = connect(null, mapDispatchToProps)(ShareEntityModalComponent);","/* eslint-disable max-statements */\n\n\nimport { notificationActions } from \"../../Notifications\";\nimport { savePermissions } from \"../PermissionsAPI\";\n\nimport { wrapDispatch } from \"../../Multireducer\";\nimport {\nREMOVE_DOCUMENTS_SHAREDIDS,\nUPDATE_DOCUMENTS_PUBLISHED } from \"../../Library/actions/actionTypes\";\n\nimport { unselectAllDocuments } from \"../../Library/actions/libraryActions\";\nimport { PermissionType, MixedAccess } from \"../../../shared/types/permissionSchema\";\n\nexport function saveEntitiesPermissions(permissionsData, storeKey) {\n  return async (dispatch, getState) => {\n    const response = await savePermissions(permissionsData);\n    const publicPermission = response.permissions.find((p) => p.type === PermissionType.PUBLIC);\n    const publicIsMixed = (publicPermission === null || publicPermission === void 0 ? void 0 : publicPermission.level) === MixedAccess.MIXED;\n\n    if (storeKey && !publicIsMixed) {\n      const { unpublished: showingUnpublished, includeUnpublished } =\n      getState()[storeKey].search || {};\n\n      const notShowingPublicAndPrivate = showingUnpublished || !includeUnpublished;\n      const toMoveFromCollection = showingUnpublished === !!publicPermission;\n\n      const wrappedDispatch = wrapDispatch(dispatch, storeKey);\n\n      if (notShowingPublicAndPrivate) {\n        if (toMoveFromCollection) {\n          wrappedDispatch({\n            type: REMOVE_DOCUMENTS_SHAREDIDS,\n            sharedIds: permissionsData.ids });\n\n\n          wrappedDispatch(unselectAllDocuments());\n        }\n      } else {\n        wrappedDispatch({\n          type: UPDATE_DOCUMENTS_PUBLISHED,\n          sharedIds: permissionsData.ids,\n          published: !!publicPermission });\n\n      }\n    }\n\n    dispatch(notificationActions.notify('Update success', 'success'));\n  };\n}","import api from \"../utils/api\";\nimport { RequestParams } from \"../utils/RequestParams\";\n\n\n\nexport const searchCollaborators = async (value) => {\n  const response = await api.get('collaborators', new RequestParams({ filterTerm: value }));\n  return response.json;\n};\n\nexport const loadGrantedPermissions = async (\nsharedIds) =>\n{\n  const response = await api.put('entities/permissions', new RequestParams({ sharedIds }));\n  return response.json;\n};\n\nexport const savePermissions = async (\npermissionsData) =>\n{\n  const response = await api.post('entities/permissions', new RequestParams(permissionsData));\n  return response.json;\n};","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import { Translate } from \"../../I18N\";\nimport { Icon } from \"../../UI\";\nimport React, { useState } from 'react';\nimport { ShareEntityModal } from \"./ShareEntityModal\";\n\n\n\n\n\n\nexport const ShareButton = ({ sharedIds, storeKey }) => {\n  const [sharing, setSharing] = useState(false);\n\n  return /*#__PURE__*/(\n    React.createElement(React.Fragment, null, /*#__PURE__*/\n    _jsx(\"button\", { className: \"btn btn-success share-btn\", type: \"button\", onClick: () => setSharing(true) }, void 0, /*#__PURE__*/\n    _jsx(Icon, { icon: \"user-plus\" }), /*#__PURE__*/\n    _jsx(\"span\", { className: \"btn-label\" }, void 0, /*#__PURE__*/\n    _jsx(Translate, {}, void 0, \"Share\"))),\n\n\n    sharing ? /*#__PURE__*/\n    _jsx(ShareEntityModal, {\n\n      isOpen: true,\n      onClose: () => setSharing(false),\n      sharedIds: sharedIds,\n      storeKey: storeKey }, sharedIds.join('-')) :\n\n    null));\n\n\n};","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport { wrapDispatch } from \"../../Multireducer\";\n\nimport { NeedAuthorization } from \"../../Auth\";\nimport { Translate, I18NLink } from \"../../I18N\";\nimport { Icon } from \"../../UI\";\n\nimport { ShareButton } from \"../../Permissions/components/ShareButton\";\nimport * as actions from \"../actions/actions\";\n\nclass MetadataFormButtons extends Component {\n  render() {\n    const { entityBeingEdited, exclusivelyViewButton, formName, hideDelete, uploadFileprogress } =\n    this.props;\n    const data = this.props.data.toJS();\n\n    const ViewButton = /*#__PURE__*/\n    _jsx(I18NLink, {\n      to: `entity/${data.sharedId}`,\n      className: \"edit-metadata btn btn-default\",\n      tabIndex: \"0\" }, void 0, /*#__PURE__*/\n\n    _jsx(Icon, { icon: \"file\" }), /*#__PURE__*/\n    _jsx(\"span\", { className: \"btn-label\" }, void 0, /*#__PURE__*/\n    _jsx(Translate, {}, void 0, \"View\")));\n\n\n\n\n    if (exclusivelyViewButton) {\n      return /*#__PURE__*/_jsx(\"span\", {}, void 0, ViewButton);\n    }\n\n    return /*#__PURE__*/(\n      React.createElement(React.Fragment, null, /*#__PURE__*/\n      _jsx(\"div\", { className: \"btn-cluster\" }, void 0,\n      this.props.includeViewButton && ViewButton, /*#__PURE__*/\n      _jsx(NeedAuthorization, { roles: ['admin', 'editor'], orWriteAccessTo: [data] }, void 0,\n      !entityBeingEdited && /*#__PURE__*/\n      _jsx(\"button\", {\n        type: \"button\",\n        onClick: () => {\n          this.props.loadInReduxForm(\n          this.props.formStatePath,\n          data,\n          this.props.templates.toJS());\n\n          this.props.clearMetadataSelections();\n        },\n        className: \"edit-metadata btn btn-default\" }, void 0, /*#__PURE__*/\n\n      _jsx(Icon, { icon: \"pencil-alt\" }), /*#__PURE__*/\n      _jsx(\"span\", { className: \"btn-label\" }, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Edit\")))), /*#__PURE__*/\n\n\n\n\n      _jsx(NeedAuthorization, { roles: ['admin', 'editor'], orWriteAccessTo: [data] }, void 0,\n      !entityBeingEdited && !hideDelete && data && data.sharedId && /*#__PURE__*/\n      _jsx(ShareButton, { sharedIds: [data.sharedId], storeKey: this.props.storeKey })),\n\n\n      entityBeingEdited && /*#__PURE__*/\n      _jsx(\"button\", {\n        type: \"button\",\n        className: \"btn btn-default copy-from-btn\",\n        onClick: this.props.copyFrom,\n        disabled: uploadFileprogress !== undefined }, void 0, /*#__PURE__*/\n\n      _jsx(Icon, { icon: \"copy-from\", transform: \"left-0.07 up-0.06\" }), /*#__PURE__*/\n      _jsx(\"span\", { className: \"btn-label\" }, void 0,\n      ' ', /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Copy From\")))), /*#__PURE__*/\n\n\n\n\n      _jsx(\"div\", { className: \"btn-cluster content-right\" }, void 0,\n      entityBeingEdited && /*#__PURE__*/\n      React.createElement(React.Fragment, null, /*#__PURE__*/\n      _jsx(\"button\", {\n        type: \"button\",\n        disabled: uploadFileprogress !== undefined,\n        onClick: () => this.props.resetForm(this.props.formStatePath),\n        className: \"cancel-edit-metadata btn btn-default btn-extra-padding\" }, void 0, /*#__PURE__*/\n\n      _jsx(\"span\", { className: \"btn-label\" }, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Cancel\"))), /*#__PURE__*/\n\n\n      _jsx(\"button\", {\n        type: \"submit\",\n        form: formName,\n        className: \"btn btn-success btn-extra-padding\",\n        disabled: uploadFileprogress !== undefined }, void 0,\n\n      uploadFileprogress ? /*#__PURE__*/_jsx(Icon, { icon: \"spinner\", spin: true }) : null, /*#__PURE__*/\n      _jsx(\"span\", { className: \"btn-label\" }, void 0,\n      uploadFileprogress ? /*#__PURE__*/\n      _jsx(\"span\", {}, void 0, `${uploadFileprogress}%`) : /*#__PURE__*/\n\n      _jsx(Translate, {}, void 0, \"Save\")))), /*#__PURE__*/\n\n\n\n\n\n      _jsx(NeedAuthorization, { roles: ['admin', 'editor'], orWriteAccessTo: [data] }, void 0,\n      !entityBeingEdited && !hideDelete && /*#__PURE__*/\n      _jsx(\"button\", {\n        className: \"delete-metadata btn btn-danger\",\n        type: \"button\",\n        onClick: this.props.delete }, void 0, /*#__PURE__*/\n\n      _jsx(Icon, { icon: \"trash-alt\" }), /*#__PURE__*/\n      _jsx(\"span\", { className: \"btn-label\" }, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Delete\")))))));\n\n\n\n\n\n\n\n  }}\n\n\nMetadataFormButtons.contextTypes = {\n  confirm: PropTypes.func };\n\n\nMetadataFormButtons.defaultProps = {\n  entityBeingEdited: false,\n  includeViewButton: true,\n  hideDelete: false,\n  formName: 'metadataForm',\n  delete: () => {},\n  copyFrom: () => {},\n  storeKey: undefined,\n  uploadFileprogress: undefined };\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst mapStateToProps = (state, ownProps) => {\n  const { sharedId } = ownProps.data.toJS();\n  return {\n    templates: state.templates,\n    uploadFileprogress: sharedId ?\n    state.attachments.progress.get(sharedId) :\n    state.attachments.progress.get('NEW_ENTITY') };\n\n};\n\nfunction mapDispatchToProps(dispatch, props) {\n  return bindActionCreators(\n  {\n    loadInReduxForm: actions.loadInReduxForm,\n    resetForm: actions.resetReduxForm,\n    clearMetadataSelections: actions.clearMetadataSelections },\n\n  wrapDispatch(dispatch, props.storeKey));\n\n}\n\nexport { MetadataFormButtons };\nexport default connect(mapStateToProps, mapDispatchToProps)(MetadataFormButtons);","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport { t, Translate } from \"../../I18N\";\nimport { deleteEntities } from \"../../Entities/actions/actions\";\nimport * as metadataActions from \"../actions/actions\";\nimport { createSelector } from 'reselect';\nimport { wrapDispatch } from \"../../Multireducer\";\nimport { advancedSort } from \"../../utils/advancedSort\";\nimport { ShareButton } from \"../../Permissions/components/ShareButton\";\nimport TemplateLabel from \"../../Layout/TemplateLabel\";\nimport SidePanel from \"../../Layout/SidePanel\";\nimport Immutable from 'immutable';\nimport { Icon } from \"../../UI\";\nimport { NeedAuthorization } from \"../../Auth\";\nimport MetadataForm from \"./MetadataForm\";\nimport comonTemplate from \"../helpers/comonTemplate\";\n\nconst sortedTemplates = createSelector(\n(s) => s.templates,\n(templates) => {\n  const _templates = templates ? templates.toJS() : [];\n  return advancedSort(_templates, { property: 'name' });\n});\n\n\nconst commonTemplate = createSelector(sortedTemplates, (s) => s.entitiesSelected, comonTemplate);\n\nclass SelectMultiplePanel extends Component {\n  constructor(props) {\n    super(props);\n    this.close = this.close.bind(this);\n    this.delete = this.delete.bind(this);\n    this.cancel = this.cancel.bind(this);\n    this.save = this.save.bind(this);\n    this.edit = this.edit.bind(this);\n    this.changeTemplate = this.changeTemplate.bind(this);\n  }\n\n  close() {\n    this.props.unselectAllDocuments();\n    this.props.resetForm(this.props.formKey);\n  }\n\n  delete() {\n    this.context.confirm({\n      accept: () => {\n        this.props.deleteEntities(this.props.entitiesSelected.toJS());\n      },\n      title: 'Confirm',\n      message: 'Confirm delete multiple items' });\n\n  }\n\n  metadataFieldModified(key) {\n    return (\n      !this.props.formState.metadata[key].pristine && (\n      !this.props.formState.metadata[key].$form ||\n      !this.props.formState.metadata[key].$form.pristine));\n\n  }\n\n  save(formValues) {\n    const modifiedValues = { metadata: {} };\n    const template = this.props.template.toJS();\n    Object.keys(formValues.metadata).forEach((key) => {\n      if (this.metadataFieldModified(key)) {\n        modifiedValues.metadata[key] = formValues.metadata[key];\n      }\n    });\n\n    if (template._id) {\n      modifiedValues.template = template._id;\n    }\n\n    if (this.props.formState.icon && !this.props.formState.icon.pristine) {\n      modifiedValues.icon = formValues.icon;\n    }\n\n    return this.props.\n    multipleUpdate(this.props.entitiesSelected, modifiedValues).\n    then((updatedEntities) => {\n      this.props.updateEntities(updatedEntities);\n      this.props.unselectAllDocuments();\n      this.props.resetForm(this.props.formKey);\n    });\n  }\n\n  changeTemplate(_formModel, template) {\n    const updatedEntities = this.props.entitiesSelected.map((entity) =>\n    entity.set('template', template));\n\n    this.props.updateSelectedEntities(updatedEntities);\n  }\n\n  cancel() {\n    this.context.confirm({\n      accept: () => {\n        this.props.resetForm(this.props.formKey);\n      },\n      title: 'Confirm',\n      message: 'Discard changes' });\n\n  }\n\n  edit() {\n    this.props.loadForm(this.props.formKey, this.props.template.toJS());\n  }\n\n  sharedIds() {\n    return this.props.entitiesSelected.map((entity) => entity.get('sharedId'));\n  }\n\n  renderEditingForm() {\n    const { formKey, thesauris } = this.props;\n\n    return /*#__PURE__*/(\n      React.createElement(React.Fragment, null, /*#__PURE__*/\n      _jsx(\"div\", { className: \"alert alert-warning\" }, void 0, /*#__PURE__*/\n      _jsx(Icon, { icon: \"exclamation-triangle\", size: \"2x\" }), /*#__PURE__*/\n      _jsx(\"p\", {}, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Warning: you are editing multiple entities. Fields marked with a\"), ' ', /*#__PURE__*/\n      _jsx(Icon, { icon: \"exclamation-triangle\" }), ' ', /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"will be updated with the same value.\"))), /*#__PURE__*/\n\n\n      _jsx(MetadataForm, {\n        id: \"multiEdit\",\n        model: formKey,\n        onSubmit: this.save,\n        thesauris: thesauris,\n        template: this.props.template,\n        changeTemplate: this.changeTemplate,\n        multipleEdition: true })));\n\n\n\n  }\n\n  renderEditingButtons() {\n    return /*#__PURE__*/(\n      _jsx(NeedAuthorization, {\n        roles: ['admin', 'editor'],\n        orWriteAccessTo: this.props.entitiesSelected.toJS() }, void 0, /*#__PURE__*/\n\n      _jsx(\"div\", { className: \"btn-cluster content-right\" }, void 0, /*#__PURE__*/\n      _jsx(\"button\", {\n        type: \"button\",\n        onClick: this.cancel,\n        className: \"cancel-edit-metadata btn btn-default\" }, void 0, /*#__PURE__*/\n\n      _jsx(\"span\", { className: \"btn-label\" }, void 0, t('System', 'Cancel'))), /*#__PURE__*/\n\n      _jsx(\"button\", { type: \"submit\", form: \"multiEdit\", className: \"btn btn-success\" }, void 0, /*#__PURE__*/\n      _jsx(\"span\", { className: \"btn-label\" }, void 0, t('System', 'Save'))))));\n\n\n\n\n  }\n\n  renderListButtons() {\n    return /*#__PURE__*/(\n      _jsx(NeedAuthorization, {\n        roles: ['admin', 'editor'],\n        orWriteAccessTo: this.props.entitiesSelected.toJS() }, void 0, /*#__PURE__*/\n\n      _jsx(\"div\", { className: \"btn-cluster\" }, void 0, /*#__PURE__*/\n      _jsx(\"button\", { type: \"button\", onClick: this.edit, className: \"edit btn btn-default\" }, void 0, /*#__PURE__*/\n      _jsx(Icon, { icon: \"pencil-alt\" }), /*#__PURE__*/\n      _jsx(\"span\", { className: \"btn-label\" }, void 0, t('System', 'Edit'))), /*#__PURE__*/\n\n      _jsx(ShareButton, { sharedIds: this.sharedIds(), storeKey: this.props.storeKey })), /*#__PURE__*/\n\n      _jsx(\"div\", { className: \"btn-cluster content-right\" }, void 0, /*#__PURE__*/\n      _jsx(\"button\", { type: \"button\", className: \"delete btn btn-danger\", onClick: this.delete }, void 0, /*#__PURE__*/\n      _jsx(Icon, { icon: \"trash-alt\" }), /*#__PURE__*/\n      _jsx(\"span\", { className: \"btn-label\" }, void 0, t('System', 'Delete'))))));\n\n\n\n\n  }\n\n  renderList() {\n    const { entitiesSelected, getAndSelectDocument } = this.props;\n    return /*#__PURE__*/(\n      _jsx(\"ul\", { className: \"entities-list\" }, void 0,\n      entitiesSelected.map((entity, index) => {\n        const onClick = getAndSelectDocument.bind(this, entity.get('sharedId'));\n        return /*#__PURE__*/(\n          _jsx(\"li\", { onClick: onClick }, index, /*#__PURE__*/\n          _jsx(\"span\", { className: \"entity-title\" }, void 0,\n          entity.get('title'), /*#__PURE__*/\n          _jsx(TemplateLabel, { template: entity.get('template') }))));\n\n\n\n      })));\n\n\n  }\n\n  render() {\n    const { entitiesSelected, open, editing } = this.props;\n    return /*#__PURE__*/(\n      _jsx(SidePanel, { open: open, className: \"multi-edit\" }, void 0, /*#__PURE__*/\n      _jsx(\"div\", { className: \"sidepanel-header\" }, void 0, /*#__PURE__*/\n      _jsx(Icon, { icon: \"check\" }), ' ', /*#__PURE__*/\n      _jsx(\"span\", {}, void 0,\n      entitiesSelected.size, \" \", t('System', 'selected')), /*#__PURE__*/\n\n      _jsx(\"button\", { type: \"button\", className: \"closeSidepanel close-modal\", onClick: this.close }, void 0, /*#__PURE__*/\n      _jsx(Icon, { icon: \"times\" }))), /*#__PURE__*/\n\n\n      _jsx(\"div\", { className: \"sidepanel-body\" }, void 0,\n      !editing && this.renderList(),\n      editing && this.renderEditingForm()), /*#__PURE__*/\n\n      _jsx(\"div\", { className: \"sidepanel-footer\" }, void 0,\n      !editing && this.renderListButtons(),\n      editing && this.renderEditingButtons())));\n\n\n\n  }}\n\n\nSelectMultiplePanel.defaultProps = {\n  entitiesSelected: Immutable.fromJS([]),\n  template: null,\n  open: false,\n  editing: false };\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nSelectMultiplePanel.contextTypes = {\n  confirm: PropTypes.func };\n\n\nconst mapStateToProps = (_state, props) => ({\n  template: commonTemplate(props),\n  open: props.entitiesSelected.size > 1,\n  editing: Object.keys(props.state || {}).length > 0 });\n\n\nfunction mapDispatchToProps(dispatch, props) {\n  return bindActionCreators(\n  {\n    deleteEntities,\n    loadForm: metadataActions.loadTemplate,\n    resetForm: metadataActions.resetReduxForm,\n    multipleUpdate: metadataActions.multipleUpdate },\n\n  wrapDispatch(dispatch, props.storeKey));\n\n}\n\nexport { SelectMultiplePanel, mapStateToProps };\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SelectMultiplePanel);","function ownKeys(object, enumerableOnly) {var keys = Object.keys(object);if (Object.getOwnPropertySymbols) {var symbols = Object.getOwnPropertySymbols(object);enumerableOnly && (symbols = symbols.filter(function (sym) {return Object.getOwnPropertyDescriptor(object, sym).enumerable;})), keys.push.apply(keys, symbols);}return keys;}function _objectSpread(target) {for (var i = 1; i < arguments.length; i++) {var source = null != arguments[i] ? arguments[i] : {};i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {_defineProperty(target, key, source[key]);}) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));});}return target;}function _defineProperty(obj, key, value) {if (key in obj) {Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });} else {obj[key] = value;}return obj;}import uniqueID from \"../../../shared/uniqueID\";\n\nconst prepareFiles = async (mediaProperties, values) => {\n  const metadataFiles = {};\n  const entityAttachments = [];\n  const files = [];\n\n  if (values.metadata || mediaProperties.length === 0) {\n    await Promise.all(\n    mediaProperties.map(async (p) => {\n      if (!values.metadata[p.name] || /^https?:\\/\\//.test(values.metadata[p.name])) {\n        return Promise.resolve();\n      }\n      const { data, originalFile } = values.metadata[p.name];\n      const blob = await fetch(data).then((r) => r.blob());\n      const file = new File([blob], originalFile.name, { type: blob.type });\n      const fileID = uniqueID();\n\n      metadataFiles[p.name] = fileID;\n\n      entityAttachments.push({\n        originalname: file.name,\n        filename: file.name,\n        type: 'attachment',\n        mimetype: blob.type,\n        fileLocalID: fileID });\n\n\n      files.push(file);\n\n      return URL.revokeObjectURL(values.metadata[p.name]);\n    }));\n\n  }\n\n  return { metadataFiles, entityAttachments, files };\n};\n\nfunction wrapEntityMetadata(entity) {\n  if (!entity.metadata) {\n    return _objectSpread({}, entity);\n  }\n  const newFileMetadataValues = (entity.attachments || []).\n  filter((attachment) => attachment.fileLocalID).\n  reduce(\n  (previousValue, attachment, index) => _objectSpread(_objectSpread({},\n  previousValue), {}, {\n    [attachment.fileLocalID]: { value: '', attachment: index } }),\n\n  {});\n\n\n  const metadata = Object.keys(entity.metadata).reduce((wrappedMo, key) => {\n    const newFileMetadataValue = newFileMetadataValues[entity.metadata[key]];\n    return _objectSpread(_objectSpread({},\n    wrappedMo), {}, {\n      [key]: Array.isArray(entity.metadata[key]) ?\n      entity.metadata[key].map((v) => ({ value: v })) :\n      [newFileMetadataValue || { value: entity.metadata[key] }] });\n\n  }, {});\n  // suggestedMetadata is always in metadata-object form.\n  return _objectSpread(_objectSpread({}, entity), {}, { metadata });\n}\n\nconst prepareMetadataAndFiles = async (values, attachedFiles, template) => {\n  const mediaProperties = template.properties.filter((p) => p.type === 'image' || p.type === 'media');\n  const { metadataFiles, entityAttachments, files } = await prepareFiles(mediaProperties, values);\n  const fields = _objectSpread(_objectSpread({}, values.metadata), metadataFiles);\n  const entity = _objectSpread(_objectSpread({}, values), {}, { metadata: fields, attachments: entityAttachments });\n  const wrappedEntity = wrapEntityMetadata(entity);\n  wrappedEntity.file = values.file ? values.file[0] : undefined;\n  wrappedEntity.attachments = [];\n  wrappedEntity.attachments.push(...files);\n  wrappedEntity.attachments.push(...attachedFiles);\n  return _objectSpread(_objectSpread({}, wrappedEntity), {}, { template: template._id });\n};\n\nexport { prepareMetadataAndFiles, wrapEntityMetadata };","export const SHOW_MODAL = 'SHOW_MODAL';\nexport const HIDE_MODAL = 'CLOSE_MODAL';","export default function (reducer, reducerKey) {\n  return function (state, action) {\n    if (action.__reducerKey === reducerKey) {\n      return reducer(state, action);\n    }\n\n    return reducer(state, {});\n  };\n}","const wrapAction = (action, reducerKey) => {\n  action.__reducerKey = reducerKey;\n  return action;\n};\n\nexport default function wrapDispatch(dispatch, reducerKey) {\n  const wrappedDispatch = (action) => {\n    let wrappedAction = wrapAction(action, reducerKey);\n    if (typeof action === 'function') {\n      wrappedAction = (_globalDispatch, getState) => action(wrappedDispatch, getState);\n    }\n\n    return dispatch(wrappedAction);\n  };\n\n  return wrappedDispatch;\n}","import multireducer from \"./multireducer\";\nimport wrapDispatch from \"./wrapDispatch\";\n\nexport { multireducer, wrapDispatch };\n\nexport default {\n  multireducer,\n  wrapDispatch };","export const NOTIFY = 'NOTIFY';\nexport const REMOVE_NOTIFICATION = 'REMOVE_NOTIFICATION';","import * as actions from \"./actionTypes\";\nimport ID from \"../../../shared/uniqueID\";\n\nexport function removeNotification(id) {\n  return {\n    type: actions.REMOVE_NOTIFICATION,\n    id };\n\n}\n\nexport function notify(message, type, delay = 6000) {\n  return (dispatch) => {\n    const id = ID();\n    dispatch({ type: actions.NOTIFY, notification: { message, type, id } });\n    if (delay) {\n      setTimeout(() => {\n        dispatch(removeNotification(id));\n      }, delay);\n    }\n    return id;\n  };\n}","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\nimport { Icon } from \"../../UI\";\nimport { removeNotification } from \"../actions/notificationsActions\";\n\nexport class Notification extends Component {\n  close() {\n    this.props.removeNotification(this.props.id);\n  }\n\n  render() {\n    const { type, message } = this.props;\n    const cssClass = `alert alert-${type}`;\n    let icon = 'check';\n    if (type === 'warning' || type === 'danger') {\n      icon = 'exclamation-triangle';\n    }\n\n    const isNode = typeof message !== 'string';\n\n    const FormattedMessage = isNode ?\n    message :\n    message.split('\\n').map((item, i) => /*#__PURE__*/\n    //eslint-disable-next-line react/no-array-index-key\n    _jsx(React.Fragment, {}, i,\n    item, /*#__PURE__*/\n    _jsx(\"br\", {})));\n\n\n\n    return /*#__PURE__*/(\n      _jsx(\"div\", { className: cssClass, onClick: this.close.bind(this) }, void 0, /*#__PURE__*/\n      _jsx(Icon, { icon: icon }), /*#__PURE__*/\n      _jsx(\"span\", { className: \"alert-text\" }, void 0, FormattedMessage), /*#__PURE__*/\n      _jsx(Icon, { icon: \"times\" })));\n\n\n  }}\n\n\nNotification.defaultProps = {\n  type: 'success' };\n\n\n\n\n\n\n\n\n\nfunction mapDispatchToProps(dispatch) {\n  return bindActionCreators({ removeNotification }, dispatch);\n}\n\nexport default connect(null, mapDispatchToProps)(Notification);","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}function _extends() {_extends = Object.assign ? Object.assign.bind() : function (target) {for (var i = 1; i < arguments.length; i++) {var source = arguments[i];for (var key in source) {if (Object.prototype.hasOwnProperty.call(source, key)) {target[key] = source[key];}}}return target;};return _extends.apply(this, arguments);}import PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\n\nimport Notification from \"./Notification\";\n\nexport class Notifications extends Component {\n  render() {\n    return /*#__PURE__*/(\n      _jsx(\"div\", { className: \"alert-wrapper\" }, void 0,\n      this.props.notifications.map((notification) => /*#__PURE__*/\n      React.createElement(Notification, _extends({ key: notification.id }, notification)))));\n\n\n\n  }}\n\n\n\n\n\n\nconst mapStateToProps = (state) => ({ notifications: state.notifications.toJS() });\n\nexport default connect(mapStateToProps)(Notifications);","import { notify, removeNotification } from \"./actions/notificationsActions\";\nimport Notifications from \"./components/Notifications\";\n\nconst notificationActions = {\n  notify,\n  removeNotification };\n\n\nexport { notificationActions };\n\nexport default Notifications;","import loadable from '@loadable/component';\n\nconst PDF = loadable(() => import( /* webpackChunkName: \"LazyLoadPDF\" */\"./components/PDF.js\"));\nconst PDFPage = loadable(() =>\nimport( /* webpackChunkName: \"LazyLoadPDFPage\" */\"./components/PDFPage.js\"));\n\n\nexport { PDF, PDFPage };","//DATA\nexport const UPDATE_PAGE = 'UPDATE_PAGE';\nexport const PAGE_SAVED = 'PAGE_SAVED';\nexport const DELETE_PAGE = 'DELETE_PAGE';\nexport const RESET_PAGE = 'RESET_PAGE';\n\n//UI\nexport const SAVING_PAGE = 'SAVING_PAGE';","function _extends() {_extends = Object.assign ? Object.assign.bind() : function (target) {for (var i = 1; i < arguments.length; i++) {var source = arguments[i];for (var key in source) {if (Object.prototype.hasOwnProperty.call(source, key)) {target[key] = source[key];}}}return target;};return _extends.apply(this, arguments);}import React from 'react';\nimport { Control } from 'react-redux-form';\nimport * as forms from \"../Forms\";\n\nexport const Select = (props) => /*#__PURE__*/React.createElement(Control.select, _extends({ component: forms.Select }, props));\nexport const DatePicker = (props) => /*#__PURE__*/React.createElement(Control, _extends({ component: forms.DatePicker }, props));\nexport const Captcha = (props) => /*#__PURE__*/React.createElement(Control, _extends({ component: forms.Captcha }, props));\nexport const DateRange = (props) => /*#__PURE__*/React.createElement(Control.select, _extends({ component: forms.DateRange }, props));\nexport const MultiSelect = (props) => /*#__PURE__*/React.createElement(Control.select, _extends({ component: forms.MultiSelect }, props));\nexport const LookupMultiSelect = (props) => /*#__PURE__*/\nReact.createElement(Control.select, _extends({ component: forms.LookupMultiSelect }, props));\n\nexport const MultiSelectTristate = (props) => /*#__PURE__*/\nReact.createElement(Control.select, _extends({ component: forms.MultiSelectTristate }, props));\n\nexport const MarkDown = (props) => /*#__PURE__*/React.createElement(Control.text, _extends({ component: forms.MarkDown }, props));\nexport const Nested = (props) => /*#__PURE__*/React.createElement(Control.select, _extends({ component: forms.Nested }, props));\nexport const MultiDate = (props) => /*#__PURE__*/React.createElement(Control.select, _extends({ component: forms.MultiDate }, props));\nexport const MultiSuggest = (props) => /*#__PURE__*/React.createElement(Control.select, _extends({ component: forms.MultiSuggest }, props));\nexport const MultiDateRange = (props) => /*#__PURE__*/\nReact.createElement(Control.select, _extends({ component: forms.MultiDateRange }, props));\n\nexport const Numeric = (props) => /*#__PURE__*/React.createElement(Control, _extends({ component: forms.Numeric }, props));\nexport const NumericRange = (props) => /*#__PURE__*/React.createElement(Control.select, _extends({ component: forms.NumericRange }, props));\nexport const NumericRangeSlide = (props) => /*#__PURE__*/\nReact.createElement(Control.select, _extends({ component: forms.NumericRangeSlide }, props));\n\nexport const DropdownList = (props) => /*#__PURE__*/React.createElement(Control.select, _extends({ component: forms.DropdownList }, props));\nexport const IconSelector = (props) => /*#__PURE__*/React.createElement(Control.select, _extends({ component: forms.IconSelector }, props));\nexport const RadioButtons = (props) => /*#__PURE__*/React.createElement(Control.select, _extends({ component: forms.RadioButtons }, props));\nexport const Switcher = (props) => /*#__PURE__*/React.createElement(Control.select, _extends({ component: forms.Switcher }, props));\nexport const Geolocation = (props) => /*#__PURE__*/React.createElement(Control, _extends({ component: forms.Geolocation }, props));\nexport const LinkField = (props) => /*#__PURE__*/React.createElement(Control, _extends({ component: forms.LinkField }, props));\nexport const NestedMultiselect = (props) => /*#__PURE__*/React.createElement(forms.NestedMultiselect, props);\nexport const FormGroup = (props) => /*#__PURE__*/React.createElement(forms.FormGroup, props);\nexport const MediaField = (props) => /*#__PURE__*/React.createElement(Control, _extends({ component: forms.MediaField }, props));","export const PARSE_RELATIONSHIPS_RESULTS = 'PARSE_RELATIONSHIPS_RESULTS';\nexport const ADD_RELATIONSHIPS_HUB = 'ADD_RELATIONSHIPS_HUB';\nexport const UPDATE_RELATIONSHIPS_LEFT_TYPE = 'UPDATE_RELATIONSHIPS_LEFT_TYPE';\nexport const UPDATE_RELATIONSHIPS_RIGHT_TYPE = 'UPDATE_RELATIONSHIPS_RIGHT_TYPE';\nexport const TOGGLE_REMOVE_RELATIONSHIPS_LEFT = 'TOGGLE_REMOVE_RELATIONSHIPS_LEFT';\nexport const TOGGLE_REMOVE_RELATIONSHIPS_RIGHT_GROUP = 'TOGGLE_REMOVE_RELATIONSHIPS_RIGHT_GROUP';\nexport const SET_RELATIONSHIPS_ADD_TO_DATA = 'EDIT_RELATIONSHIPS_GROUP';\nexport const ADD_RELATIONSHIPS_ENTITY = 'ADD_RELATIONSHIPS_ENTITY';\nexport const TOGGLE_REMOVE_RELATIONSHIPS_ENTITY = 'TOGGLE_REMOVE_RELATIONSHIPS_ENTITY';\nexport const TOGGLE_MOVE_RELATIONSHIPS_ENTITY = 'TOGGLE_MOVE_RELATIONSHIPS_ENTITY';\nexport const MOVE_RELATIONSHIPS_ENTITY = 'MOVE_RELATIONSHIPS_ENTITY';\nexport const UPDATE_RELATIONSHIP_ENTITY_DATA = 'UPDATE_RELATIONSHIP_ENTITY_DATA';\n\nexport const EDIT_RELATIONSHIPS = 'EDIT_RELATIONSHIPS';\nexport const SAVING_RELATIONSHIPS = 'SAVING_RELATIONSHIPS';\nexport const SAVED_RELATIONSHIPS = 'SAVED_RELATIONSHIPS';\n\n//UI\nexport const OPEN_RELATIONSHIPS_PANEL = 'OPEN_RELATIONSHIPS_PANEL';\nexport const CLOSE_RELATIONSHIPS_PANEL = 'CLOSE_RELATIONSHIPS_PANEL';\nexport const SEARCHING_RELATIONSHIPS = 'SEARCHING_RELATIONSHIPS';","function ownKeys(object, enumerableOnly) {var keys = Object.keys(object);if (Object.getOwnPropertySymbols) {var symbols = Object.getOwnPropertySymbols(object);enumerableOnly && (symbols = symbols.filter(function (sym) {return Object.getOwnPropertyDescriptor(object, sym).enumerable;})), keys.push.apply(keys, symbols);}return keys;}function _objectSpread(target) {for (var i = 1; i < arguments.length; i++) {var source = null != arguments[i] ? arguments[i] : {};i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {_defineProperty(target, key, source[key]);}) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));});}return target;}function _defineProperty(obj, key, value) {if (key in obj) {Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });} else {obj[key] = value;}return obj;}import api from \"../../utils/api\";\nimport { actions } from \"../../BasicReducer\";\nimport debounce from \"../../utils/debounce\";\nimport { createSelector } from 'reselect';\nimport { notificationActions } from \"../../Notifications\";\nimport { referencesActions } from \"../../Viewer\";\nimport { RequestParams } from \"../../utils/RequestParams\";\nimport SearchApi from \"../../Search/SearchAPI\";\nimport { t } from \"../../I18N\";\nimport EntitiesApi from \"../../Entities/EntitiesAPI\";\nimport * as types from \"./actionTypes\";\nimport * as uiActions from \"./uiActions\";\nimport * as routeUtils from \"../utils/routeUtils\";\n\nfunction parseResults(results, parentEntity, editing) {\n  return { type: types.PARSE_RELATIONSHIPS_RESULTS, results, parentEntity, editing };\n}\n\nfunction edit(value, results, parentEntity) {\n  return { type: types.EDIT_RELATIONSHIPS, value, results, parentEntity, editing: value };\n}\n\nfunction addHub() {\n  return { type: types.ADD_RELATIONSHIPS_HUB };\n}\n\nfunction toggelRemoveLeftRelationship(index) {\n  return { type: types.TOGGLE_REMOVE_RELATIONSHIPS_LEFT, index };\n}\n\nfunction toggleRemoveRightRelationshipGroup(index, rightIndex) {\n  return { type: types.TOGGLE_REMOVE_RELATIONSHIPS_RIGHT_GROUP, index, rightIndex };\n}\n\nfunction updateLeftRelationshipType(index, _id) {\n  return { type: types.UPDATE_RELATIONSHIPS_LEFT_TYPE, index, _id };\n}\n\nfunction setAddToData(index, rightIndex) {\n  return { type: types.SET_RELATIONSHIPS_ADD_TO_DATA, index, rightIndex };\n}\n\nfunction updateRelationshipEntityData(entity) {\n  return { type: types.UPDATE_RELATIONSHIP_ENTITY_DATA, entity };\n}\n\nfunction updateRightRelationshipType(index, rightIndex, _id) {\n  return (dispatch, getState) => {\n    const { hubs } = getState().relationships;\n    const newRightRelationshipType =\n    rightIndex === hubs.getIn([index, 'rightRelationships']).size - 1;\n\n    dispatch({\n      type: types.UPDATE_RELATIONSHIPS_RIGHT_TYPE,\n      index,\n      rightIndex,\n      _id,\n      newRightRelationshipType });\n\n\n    if (newRightRelationshipType) {\n      dispatch(setAddToData(index, rightIndex));\n      dispatch(uiActions.openPanel());\n    }\n  };\n}\n\nfunction addEntity(index, rightIndex, entity, errors = []) {\n  return (dispatch) => {\n    const title = entity.title.length > 75 ? `${entity.title.slice(0, 75)}(...)` : entity.title;\n    let message = `${title} added to hub`;\n    if (errors.length) {\n      message = `${message} with the following errors: ${JSON.stringify(errors, null)}`;\n    }\n    dispatch(\n    notificationActions.notify(\n    `${message}. Save your work to make change permanent.`,\n    errors.length ? 'warning' : 'success'));\n\n\n    dispatch({ type: types.ADD_RELATIONSHIPS_ENTITY, index, rightIndex, entity });\n  };\n}\n\nfunction toggleRemoveEntity(index, rightIndex, relationshipIndex) {\n  return { type: types.TOGGLE_REMOVE_RELATIONSHIPS_ENTITY, index, rightIndex, relationshipIndex };\n}\n\nfunction toggleMoveEntity(index, rightIndex, relationshipIndex) {\n  return { type: types.TOGGLE_MOVE_RELATIONSHIPS_ENTITY, index, rightIndex, relationshipIndex };\n}\n\nfunction moveEntities(index, rightRelationshipIndex) {\n  return { type: types.MOVE_RELATIONSHIPS_ENTITY, index, rightRelationshipIndex };\n}\n\nfunction reloadRelationships(sharedId) {\n  return (dispatch, getState) =>\n  routeUtils.\n  requestState(new RequestParams({ sharedId }), getState()).\n  then(([connectionsGroups, searchResults]) => {\n    dispatch(actions.set('relationships/list/connectionsGroups', connectionsGroups));\n    dispatch(actions.set('relationships/list/searchResults', searchResults));\n  });\n}\n\nfunction saveRelationships() {\n  return (dispatch, getState) => {\n    dispatch({ type: types.SAVING_RELATIONSHIPS });\n    const parentEntityId = getState().relationships.list.sharedId;\n    const hubs = getState().relationships.hubs.toJS();\n\n    const apiCall = hubs.reduce(\n    (apiActions, hubData) => {\n      if (!hubData.hub && !hubData.deleted) {\n        const leftRelationship = _objectSpread({ entity: parentEntityId }, hubData.leftRelationship);\n        const rightRelationships = hubData.rightRelationships.reduce(\n        (relationships, rightGroup) => {\n          if (!rightGroup.deleted) {\n            const newRelationships = rightGroup.relationships.filter((r) => !r.deleted);\n\n            return relationships.concat(newRelationships);\n          }\n          return relationships;\n        },\n        []);\n\n        const fullHubData = [leftRelationship].concat(rightRelationships);\n        apiActions.save.push(fullHubData);\n      }\n\n      if (hubData.hub) {\n        if (hubData.deleted) {\n          apiActions.delete.push({ _id: hubData.leftRelationship._id, entity: parentEntityId });\n        }\n\n        if (hubData.modified && !hubData.deleted) {\n          apiActions.save.push(_objectSpread({\n            entity: parentEntityId,\n            hub: hubData.hub },\n          hubData.leftRelationship));\n\n        }\n\n        hubData.rightRelationships.forEach((rightGroup) => {\n          rightGroup.relationships.forEach((r) => {\n            const deleted = rightGroup.deleted || r.deleted || r.moved;\n\n            if (deleted && r._id) {\n              apiActions.delete.push({ _id: r._id, entity: r.entity });\n            }\n\n            const toSave = rightGroup.modified || !r._id;\n            if (toSave && !deleted) {\n              apiActions.save.push(\n              Object.assign(r, {\n                entity: r.entity,\n                hub: hubData.hub,\n                template: rightGroup.template }));\n\n\n            }\n          });\n        });\n      }\n      return apiActions;\n    },\n    { save: [], delete: [] });\n\n\n    return api.\n    post('relationships/bulk', new RequestParams(apiCall)).\n    then((response) =>\n    Promise.all([\n    response,\n    EntitiesApi.get(new RequestParams({ sharedId: parentEntityId })).then(([r]) => r),\n    reloadRelationships(parentEntityId)(dispatch, getState)])).\n\n\n    then(([response, parentEntity]) => {\n      dispatch(actions.set('entityView/entity', parentEntity));\n      dispatch(actions.set('viewer/doc', parentEntity));\n\n      dispatch(uiActions.closePanel());\n      dispatch(\n      edit(\n      false,\n      getState().relationships.list.searchResults,\n      getState().relationships.list.entity));\n\n\n      dispatch(referencesActions.loadReferences(parentEntityId));\n      dispatch({ type: types.SAVED_RELATIONSHIPS, response });\n      dispatch(notificationActions.notify('Relationships saved', 'success'));\n    }).\n    catch((e) => {\n      dispatch({ type: types.SAVED_RELATIONSHIPS, e });\n    });\n  };\n}\n\nfunction immidiateSearch(dispatch, searchTerm) {\n  dispatch(uiActions.searching());\n\n  const requestParams = new RequestParams({\n    searchTerm,\n    fields: ['title'],\n    includeUnpublished: true });\n\n\n  return SearchApi.search(requestParams).then(({ rows: results }) => {\n    dispatch(actions.set('relationships/searchResults', results));\n  });\n}\n\nconst debouncedSearch = debounce(immidiateSearch, 400);\n\nconst selectRelationTypes = createSelector(\n(state) => state.translations,\n(state) => state.relationTypes,\n(state) => state.locale,\n(translations, relationTypes, locale) => {\n  const translationContexts = translations.find(\n  (translation) => translation.get('locale') === locale);\n\n  const relations = relationTypes.toJS().map((rel) => {\n    const [translationContext] = translationContexts.\n    get('contexts').\n    filter((context) => context.get('id') === rel._id);\n    const name = translationContext ?\n    t(translationContext.get('id'), rel.name, null, false) :\n    rel.name;\n    return _objectSpread(_objectSpread({},\n    rel), {}, {\n      name });\n\n  });\n  return [{ _id: null, name: t('System', 'No Label', null, false) }].concat(relations);\n});\n\n\nfunction search(searchTerm) {\n  return (dispatch) => {\n    dispatch(actions.set('relationships/searchTerm', searchTerm));\n    return debouncedSearch(dispatch, searchTerm);\n  };\n}\n\nfunction selectConnection(connection) {\n  return actions.set('relationships/connection', connection);\n}\n\nfunction unselectConnection() {\n  return actions.set('relationships/connection', {});\n}\n\nexport {\nunselectConnection,\nselectConnection,\nsearch,\nselectRelationTypes,\nimmidiateSearch,\nsaveRelationships,\nreloadRelationships,\ntoggleRemoveEntity,\ntoggleMoveEntity,\nmoveEntities,\naddEntity,\nupdateRightRelationshipType,\nupdateRelationshipEntityData,\nsetAddToData,\nparseResults,\nedit,\naddHub,\ntoggelRemoveLeftRelationship,\ntoggleRemoveRightRelationshipGroup,\nupdateLeftRelationshipType };","import * as types from \"./actionTypes\";\n\nexport function openPanel() {\n  return { type: types.OPEN_RELATIONSHIPS_PANEL };\n}\n\nexport function closePanel() {\n  return { type: types.CLOSE_RELATIONSHIPS_PANEL };\n}\n\nexport function searching() {\n  return { type: types.SEARCHING_RELATIONSHIPS };\n}","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };} // TEST!!!\nimport PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport { NeedAuthorization } from \"../../Auth\";\nimport { t } from \"../../I18N\";\nimport { Icon } from \"../../UI\";\n\nimport * as actions from \"../actions/actions\";\n\nclass RelationshipsFormButtons extends Component {\n  constructor(props) {\n    super(props);\n    this.edit = this.edit.bind(this);\n  }\n\n  componentWillUnmount() {\n    this.edit(false)();\n  }\n\n  edit(value) {\n    return () => {\n      this.props.edit(value, this.props.searchResults, this.props.parentEntity);\n    };\n  }\n\n  render() {\n    const { editing, saving } = this.props;\n    const entityData = this.props.parentEntity.toJS();\n\n    return /*#__PURE__*/(\n      React.createElement(React.Fragment, null, /*#__PURE__*/\n      _jsx(NeedAuthorization, { roles: ['admin', 'editor'], orWriteAccessTo: [entityData] }, void 0,\n      !editing && /*#__PURE__*/\n      _jsx(\"div\", { className: \"btn-cluster\" }, void 0, /*#__PURE__*/\n      _jsx(\"button\", {\n        type: \"button\",\n        onClick: this.edit(true),\n        className: \"edit-metadata btn btn-default\" }, void 0, /*#__PURE__*/\n\n      _jsx(Icon, { icon: \"pencil-alt\" }), /*#__PURE__*/\n      _jsx(\"span\", { className: \"btn-label\" }, void 0, t('System', 'Edit'))))), /*#__PURE__*/\n\n\n\n\n      _jsx(NeedAuthorization, { roles: ['admin', 'editor'], orWriteAccessTo: [entityData] }, void 0,\n      editing && /*#__PURE__*/\n      _jsx(\"div\", { className: \"btn-cluster content-right\" }, void 0, /*#__PURE__*/\n      _jsx(\"button\", {\n        type: \"button\",\n        onClick: this.edit(false),\n        className: \"cancel-edit-metadata btn btn-default btn-extra-padding\" }, void 0, /*#__PURE__*/\n\n      _jsx(\"span\", { className: \"btn-label\" }, void 0, t('System', 'Cancel'))), /*#__PURE__*/\n\n      _jsx(\"button\", {\n        type: \"button\",\n        onClick: this.props.save,\n        className: \"btn btn-success btn-extra-padding\",\n        disabled: saving }, void 0,\n\n      saving && /*#__PURE__*/_jsx(Icon, { icon: \"spinner\", pulse: true, fixedWidth: true }), /*#__PURE__*/\n      _jsx(\"span\", { className: \"btn-label\" }, void 0, t('System', 'Save')))))));\n\n\n\n\n\n\n  }}\n\n\n\n\n\n\n\n\n\n\n\nconst mapStateToProps = ({ relationships }) => ({\n  editing: relationships.hubActions.get('editing'),\n  saving: relationships.hubActions.get('saving'),\n  parentEntity: relationships.list.entity,\n  searchResults: relationships.list.searchResults });\n\n\nfunction mapDispatchToProps(dispatch) {\n  return bindActionCreators(\n  {\n    edit: actions.edit,\n    save: actions.saveRelationships },\n\n  dispatch);\n\n}\n\nexport { RelationshipsFormButtons };\n\nexport default connect(mapStateToProps, mapDispatchToProps)(RelationshipsFormButtons);","// TEST!!!\nimport { fromJS } from 'immutable';\nimport { actions as formActions } from 'react-redux-form';\n\nimport { actions } from \"../../BasicReducer\";\nimport { actions as connectionsListActions } from \"../../ConnectionsList\";\nimport prioritySortingCriteria from \"../../utils/prioritySortingCriteria\";\nimport referencesAPI from \"../../Viewer/referencesAPI\";\n\nfunction requestState(requestParams, state) {\n  return referencesAPI.getGroupedByConnection(requestParams).then((connectionsGroups) => {\n    const filteredTemplates = connectionsGroups.reduce(\n    (templateIds, group) => templateIds.concat(group.templates.map((t) => t._id.toString())),\n    []);\n\n\n    const sortOptions = prioritySortingCriteria.get({\n      currentCriteria: {},\n      filteredTemplates,\n      templates: state.templates });\n\n    const params = state.relationships ? state.relationships.list : {};\n    params.sort = params.sort || sortOptions;\n    params.filters = fromJS({ limit: 10 });\n    params.sharedId = requestParams.data.sharedId;\n    const newParams = requestParams.add(params);\n    return Promise.all([\n    connectionsGroups,\n    connectionsListActions.search(newParams),\n    params.sort,\n    params.filters]);\n\n  });\n}\n\nfunction emptyState() {\n  return (dispatch) => {\n    dispatch(actions.unset('relationships/list/sharedId'));\n    dispatch(actions.unset('relationships/list/entity'));\n    dispatch(actions.unset('relationships/list/connectionsGroups'));\n    dispatch(actions.unset('relationships/list/searchResults'));\n    dispatch(actions.unset('relationships/list/filters'));\n    dispatch(actions.unset('relationships/list.sort'));\n    dispatch(actions.unset('relationships/list/view'));\n\n    dispatch(actions.set('relationships/connection', {}));\n  };\n}\n\nfunction setReduxState(state) {\n  return (dispatch) => {\n    dispatch(actions.set('relationships/list/sharedId', state.relationships.list.sharedId));\n    dispatch(actions.set('relationships/list/entity', state.relationships.list.entity));\n    dispatch(\n    actions.set(\n    'relationships/list/connectionsGroups',\n    state.relationships.list.connectionsGroups));\n\n\n    dispatch(\n    actions.set('relationships/list/searchResults', state.relationships.list.searchResults));\n\n    dispatch(actions.set('relationships/list/filters', state.relationships.list.filters));\n    dispatch(formActions.merge('relationships/list.sort', state.relationships.list.sort));\n    dispatch(actions.set('relationships/list/view', state.relationships.list.view));\n  };\n}\n\nexport { requestState, emptyState, setReduxState };","import api from \"../utils/api\";\nimport { RequestParams } from \"../utils/RequestParams\";\n\nexport default {\n  countByTemplate(requestParams) {\n    const url = 'search/count_by_template';\n    return api.get(url, requestParams).then((response) => response.json);\n  },\n\n  searchSnippets(requestParams) {\n    return api.get('v2/entities', requestParams).then((response) => response.json);\n  },\n\n  search(requestParams = new RequestParams()) {\n    const params = requestParams.add({\n      include:\n      requestParams.data && requestParams.data.include ?\n      requestParams.data.include.concat(['permissions']) :\n      ['permissions'] });\n\n    return api.get('search', params).then((response) => response.json);\n  },\n\n  list(requestParams) {\n    const url = 'search/list';\n    return api.get(url, requestParams).then((response) => response.json.rows);\n  },\n\n  getSuggestions(requestParams) {\n    const url = 'search/lookup';\n    return api.get(url, requestParams).then((response) => response.json);\n  },\n\n  getAggregationSuggestions(requestParams) {\n    const url = 'search/lookupaggregation';\n    return api.get(url, requestParams).then((response) => response.json);\n  } };","import api from \"../utils/api\";\n\nexport default {\n  search(requestParams) {\n    const url = 'semantic-search';\n    return api.post(url, requestParams).then((response) => response.json);\n  },\n  getAllSearches(requestParams) {\n    const url = 'semantic-search';\n    return api.get(url, requestParams).then((response) => response.json);\n  },\n  getEntitiesMatchingFilters(requestParams) {\n    const url = 'semantic-search/list';\n    return api.get(url, requestParams).then((response) => response.json);\n  },\n  getSearch(requestParams) {\n    const url = 'semantic-search';\n    return api.get(url, requestParams).then((response) => response.json);\n  },\n  deleteSearch(requestParams) {\n    const url = 'semantic-search';\n    return api.delete(url, requestParams).then((response) => response.json);\n  },\n  stopSearch(requestParams) {\n    const url = 'semantic-search/stop';\n    return api.post(url, requestParams).then((response) => response.json);\n  },\n  resumeSearch(requestParams) {\n    const url = 'semantic-search/resume';\n    return api.post(url, requestParams).then((response) => response.json);\n  },\n  registerForUpdates(requestParams) {\n    const url = 'semantic-search/notify-updates';\n    return api.post(url, requestParams).then((response) => response.json);\n  } };","function ownKeys(object, enumerableOnly) {var keys = Object.keys(object);if (Object.getOwnPropertySymbols) {var symbols = Object.getOwnPropertySymbols(object);enumerableOnly && (symbols = symbols.filter(function (sym) {return Object.getOwnPropertyDescriptor(object, sym).enumerable;})), keys.push.apply(keys, symbols);}return keys;}function _objectSpread(target) {for (var i = 1; i < arguments.length; i++) {var source = null != arguments[i] ? arguments[i] : {};i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {_defineProperty(target, key, source[key]);}) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));});}return target;}function _defineProperty(obj, key, value) {if (key in obj) {Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });} else {obj[key] = value;}return obj;}import Immutable from 'immutable';\nimport { actions } from \"../../BasicReducer\";\nimport { RequestParams } from \"../../utils/RequestParams\";\n\nimport api from \"../SemanticSearchAPI\";\n\nexport function fetchSearches() {\n  return (dispatch) =>\n  api.getAllSearches().then((response) => {\n    dispatch(actions.set('semanticSearch/searches', response));\n  });\n}\n\nexport function setEditSearchEntities(entities = []) {\n  return (dispatch) => {\n    dispatch(actions.set('semanticSearch/multiedit', entities));\n  };\n}\n\nexport function editSearchEntities(searchId, args) {\n  const requestParams = new RequestParams(_objectSpread({ searchId }, args));\n  return (dispatch) =>\n  api.getEntitiesMatchingFilters(requestParams).then((response) => {\n    dispatch(setEditSearchEntities(response));\n  });\n}\n\nexport function selectSemanticSearchDocument(doc) {\n  return (dispatch) => {\n    dispatch(actions.set('semanticSearch/selectedDocument', doc));\n    dispatch(actions.set('library.sidepanel.tab', 'semantic-search-results'));\n  };\n}\n\nexport function unselectSemanticSearchDocument() {\n  return (dispatch) => {\n    dispatch(actions.set('semanticSearch/selectedDocument', {}));\n  };\n}\n\nfunction sanitizeSearchFilters(filters) {\n  return Object.keys(filters).reduce((partial, key) => {\n    const emptyFilter =\n    !filters[key] || typeof filters[key] === 'object' && !Object.keys(filters[key]).length;\n    if (emptyFilter) {\n      return partial;\n    }\n    return _objectSpread(_objectSpread({}, partial), {}, { [key]: filters[key] });\n  }, {});\n}\n\nexport function submitNewSearch(args) {\n  const { searchTerm } = args;\n  const query = _objectSpread(_objectSpread({}, args), {}, { searchTerm: '', filters: sanitizeSearchFilters(args.filters) });\n\n  return (dispatch) =>\n  api.search(new RequestParams({ searchTerm, query })).then(() => dispatch(fetchSearches()));\n}\n\nexport function showSemanticSearch() {\n  return (dispatch) => {\n    dispatch(actions.set('semanticSearch/showSemanticSearchPanel', true));\n  };\n}\n\nexport function hideSemanticSearch() {\n  return (dispatch) => {\n    dispatch(actions.set('semanticSearch/showSemanticSearchPanel', false));\n  };\n}\n\nexport function deleteSearch(searchId) {\n  return (dispatch) =>\n  api.deleteSearch(new RequestParams({ searchId })).then(() => {\n    dispatch(fetchSearches());\n  });\n}\n\nexport function stopSearch(searchId) {\n  return (dispatch) =>\n  api.stopSearch(new RequestParams({ searchId })).then(() => {\n    dispatch(fetchSearches());\n  });\n}\n\nexport function resumeSearch(searchId) {\n  return (dispatch) =>\n  api.resumeSearch(new RequestParams({ searchId })).then(() => {\n    dispatch(fetchSearches());\n  });\n}\n\nexport function registerForUpdates() {\n  return () => api.registerForUpdates();\n}\n\nexport function updateSearch(updatedSearch) {\n  return (dispatch) => dispatch(actions.update('semanticSearch/searches', updatedSearch));\n}\n\nexport function addSearchResults(newDocs) {\n  return (dispatch, getState) => {\n    const currentSearch = getState().semanticSearch.search;\n    const newResults = currentSearch.update('results', (existingDocs) =>\n    newDocs.reduce((updatedDocs, newDoc) => {\n      if (!updatedDocs.find((d) => newDoc._id === d.get('_id'))) {\n        return updatedDocs.push(Immutable.fromJS(newDoc));\n      }\n      return updatedDocs;\n    }, existingDocs));\n\n    dispatch(actions.set('semanticSearch/search', newResults));\n  };\n}\n\nexport function getSearch(searchId, args) {\n  const requestParams = new RequestParams(_objectSpread({ searchId }, args));\n  return (dispatch, getState) =>\n  api.getSearch(requestParams).then((search) => {\n    dispatch(actions.set('semanticSearch/search', search));\n    const selectedDoc = getState().semanticSearch.selectedDocument;\n    if (selectedDoc) {\n      const updatedDoc = search.results.find((doc) => doc.sharedId === selectedDoc.get('sharedId'));\n      if (updatedDoc) {\n        dispatch(actions.set('semanticSearch/selectedDocument', updatedDoc));\n      }\n    }\n  });\n}\n\nexport function getMoreSearchResults(searchId, args) {\n  const requestParams = new RequestParams(_objectSpread({ searchId }, args));\n  return (dispatch) =>\n  api.\n  getSearch(requestParams).\n  then((search) =>\n  dispatch(actions.concatIn('semanticSearch/search', ['results'], search.results)));\n\n}","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };} /** @format */\n\nimport * as React from 'react';\nimport { connect } from 'react-redux';\nimport { NeedAuthorization } from \"../../Auth\";\n\n\n\n\n\n\nconst FeatureToggleSemanticSearch = ({\n  semanticSearchActivated,\n  children }) =>\n\nsemanticSearchActivated ? /*#__PURE__*/\n_jsx(NeedAuthorization, { roles: ['admin'] }, void 0, children) :\nnull;\n\nFeatureToggleSemanticSearch.defaultProps = {\n  semanticSearchActivated: false };\n\n\nexport function mapStateToProps({ settings }) {\n  const features = settings.collection.toJS().features || {};\n  return {\n    semanticSearchActivated: features.semanticSearch };\n\n}\n\nconst container = connect(mapStateToProps)(FeatureToggleSemanticSearch);\nexport { container as FeatureToggleSemanticSearch };","//DATA\nexport const NAVLINKS_SAVED = 'NAVLINKS_SAVED';\n\n//UI\nexport const EDIT_LINK = 'EDIT_LINK';\nexport const SAVING_NAVLINKS = 'SAVING_NAVLINKS';","//DATA\nexport const ADD_PROPERTY = 'ADD_PROPERTY';\nexport const ADD_PLACEHOLDER = 'ADD_PLACEHOLDER';\nexport const REMOVE_PROPERTY = 'REMOVE_PROPERTY';\nexport const REORDER_PROPERTY = 'REORDER_PROPERTY';\nexport const UPDATE_PROPERTY = 'UPDATE_PROPERTY';\nexport const UPDATE_TEMPLATE = 'UPDATE_TEMPLATE';\nexport const SELECT_PROPERTY = 'SELECT_PROPERTY';\nexport const SET_TEMPLATES = 'SET_TEMPLATES';\nexport const TEMPLATE_SAVED = 'TEMPLATE_SAVED';\nexport const DELETE_TEMPLATE = 'DELETE_TEMPLATE';\nexport const SET_TEMPLATE = 'SET_TEMPLATE';\nexport const RESET_TEMPLATE = 'RESET_TEMPLATE';\n\n//UI\nexport const EDIT_PROPERTY = 'EDIT_PROPERTY';\nexport const SET_THESAURIS = 'SET_THESAURIS';\nexport const SHOW_REMOVE_PROPERTY_CONFIRM = 'SHOW_REMOVE_PROPERTY_CONFIRM';\nexport const HIDE_REMOVE_PROPERTY_CONFIRM = 'HIDE_REMOVE_PROPERTY_CONFIRM';\nexport const SAVING_TEMPLATE = 'SAVING_TEMPLATE';","/* eslint-disable */\nexport default {\n  daddh: {\n    key_es: 'DADDH',\n    key_en: 'ADRDM',\n    key_pt: 'DADDH',\n    label_es: 'Declaracin Americana de los Derechos y Deberes del Hombre',\n    label_en: 'American Declaration of the Rights and Duties of Man',\n    label_pt: 'Declarao Americana dos Direitos e Deveres do Homem' },\n\n  dple: {\n    key_es: 'DPLE',\n    key_en: 'DPFE',\n    key_pt: 'DPLE',\n    label_es: 'Declaracin de Principios sobre Libertad de Expresin',\n    label_en: 'Declaration of Principles on Freedom of Expresion',\n    label_pt: 'Declarao de Princpios sobre Liberdade de Expresso ' },\n\n  pbpppl: {\n    key_es: 'PBPPPL',\n    key_en: 'PBPPDL',\n    key_pt: 'PBPPPL',\n    label_es:\n    'Principios y Buenas Prcticas sobre la Proteccin de las Personas Privadas de Libertad en las Amricas',\n    label_en:\n    'Principles and Best Practices on the Protection of Persons Deprived of Liberty in the Americas',\n    label_pt: 'Princpios e Boas Prcticas para as Pessoas Privadas de Liberdade nas Amricas' },\n\n  cadh: {\n    key_es: 'CADH',\n    key_en: 'ACHR',\n    key_pt: 'CADH',\n    label_es: 'Convencin Americana sobre Derechos Humanos',\n    label_en: 'American Convention on Human Rights',\n    label_pt: 'Conveno Americana sobre Direitos Humanos' },\n\n  'prot-pdm': {\n    key_es: 'Prot-PdM',\n    key_en: 'Prot-DP',\n    key_pt: 'Prot-PdM',\n    label_es:\n    'Protocolo a la Convencin Americana sobre Derechos Humanos relativo a la Abolicin de la Pena de Muerte',\n    label_en: 'Protocol to the American Convention on Human Rights to Abolish the Death Penalty',\n    label_pt:\n    'Protocolo  Conveno Americana sobre Direitos Humanos relativo  abolio da Pena de Morte' },\n\n  'prot-desc': {\n    key_es: 'Prot-DESC',\n    key_en: 'Prot-ESCR',\n    key_pt: 'Prot-desc',\n    label_es: `Protocolo Adicional a la Convencin Americana sobre Derechos Humanos en Materia de Derechos Econmicos, Sociales y Culturales 'Protocolo de San Salvador'`,\n    label_en: `Additional Protocol to the American Convention on Human Rights in the Area of Economic, Social and Cultural Rights 'Protocol of San Salvador'`,\n    label_pt: `Protocolo adicional  Conveno Americana sobre Direitos Humanos em matria de Direitos Econmicos, sociais e culturais 'Protocolo de So Salvador'` },\n\n  cipst: {\n    key_es: 'CIPST',\n    key_en: 'IACPPT',\n    key_pt: 'CIPST',\n    label_es: 'Convencin Interamericana para Prevenir y Sancionar la Tortura',\n    label_en: 'Inter-American Convention to Prevent and Punish Torture',\n    label_pt: 'Conveno Interamericana para Prevenir e Sancionar a Tortura' },\n\n  cidfp: {\n    key_es: 'CIDFP',\n    key_en: 'IACFDP',\n    key_pt: 'CIDFP',\n    label_es: 'Convencin Interamericana sobre Desaparicin Forzada de Personas',\n    label_en: 'Inter-American Convention on Forced Disappearance of Persons',\n    label_pt: 'Conveno Interamericana sobre Desaparecimento Forado de Pessoas' },\n\n  ciedpd: {\n    key_es: 'CIEDPD',\n    key_en: 'IACEDAPD',\n    key_pt: 'CIEDPD',\n    label_es:\n    'Convencin Interamericana para la Eliminacin de todas las Formas de Discriminacin contra las Personas con Discapacidad',\n    label_en:\n    'Inter-American Convention on the Elimination of All Forms of Discrimination Against Persons with Disabilities',\n    label_pt:\n    'Conveno Interamericana para a eliminao de todas as formas de discriminao contra as pessoas portadoras de deficincia' },\n\n  cbdopara: {\n    key_es: 'CBdoPara',\n    key_en: 'IACBdoPara',\n    key_pt: 'CIBdoPara',\n    label_es: `Convencin Interamericana para Prevenir, Sancionar y Erradicar la Violencia contra la Mujer 'Convencin de Belem Do Para'`,\n    label_en: `Inter-American Convention on the Prevention, Punishment and Eradication of Violence Against Women 'Convention of Belm Do Par'`,\n    label_pt: `Conveno Interamericana para Prevenir, Punir e Erradicar a violncia contra a mulher 'Conveno de Belm do Par'` },\n\n  cicc: {\n    key_es: 'CICC',\n    key_en: 'IACAC',\n    key_pt: 'CICC',\n    label_es: 'Convencin Interamericana contra la Corrupcin',\n    label_en: 'Inter-American Convention Against Corruption',\n    label_pt: 'Conveno Interamericana contra a corrupo' },\n\n  cdi: {\n    key_es: 'CDI',\n    key_en: 'IADC',\n    key_pt: 'CDI',\n    label_es: 'Carta Democrtica Interamericana',\n    label_en: 'Inter-American Democratic Charter',\n    label_pt: 'Carta Democrtica Interamericana' },\n\n  cicdi: {\n    key_es: 'CICDI',\n    key_en: 'IACDI',\n    key_pt: 'CICDI',\n    label_es: 'Convencin Interamericana contra toda Forma de Discriminacin e Intolerancia',\n    label_en: 'Inter-American Convention against all forms of Discrimination and Intolerance',\n    label_pt: 'Conveno Interamericana contra toda a Forma de Discriminao y Intolerncia ' },\n\n  cirdri: {\n    key_es: 'CIRDRI',\n    key_en: 'IACRDRI',\n    key_pt: 'CIRDRI',\n    label_es:\n    'Convencin Interamericana contra el Racismo, la Discriminacin Racial y Formas Conexas de Intolerancia',\n    label_en:\n    'Inter-American Convention against Racism, Racial Discrimination and related forms of Intolerance',\n    label_pt:\n    'Conveno Interamericana contra o Racismo, a Discriminao Racial y Formas Correlatas de Intolerncia' },\n\n  'e-cidh': {\n    key_es: 'E-CIDH',\n    key_en: 'S-IACHR',\n    key_pt: 'E-CIDH',\n    label_es: 'Estatuto de la Comisin Interamericana de Derechos Humanos ',\n    label_en: 'Statute of the Inter-American Commission on Human Rights',\n    label_pt: 'Estatuto da Comisso Interamericana de Direitos Humanos' },\n\n  'e-corteidh': {\n    key_es: 'E-CorteIDH',\n    key_en: 'S-IACoHR',\n    key_pt: 'E-CorteIDH',\n    label_es: 'Estatuto de la Corte Interamericana de Derechos Humanos ',\n    label_en: 'Statute of the Inter-American Court of Human Rights',\n    label_pt: 'Estatuto da Corte Interamericana de Direitos Humanos' },\n\n  'r-cidh (2013)': {\n    key_es: 'R-CIDH (2013)',\n    key_en: 'R-IACHR (2013)',\n    key_pt: 'R-CIDH (2013)',\n    label_es: 'Reglamento de la Comisin Interamericana de Derechos Humanos (2013  vigente)',\n    label_en:\n    'Rules of Procedure of the Inter-American Commission on Human Rights (2013 - in force)',\n    label_pt: 'Regulamento da Comisso Interamericana de Direitos Humanos (2013  em vigor)' },\n\n  'r-cidh (2011)': {\n    key_es: 'R-CIDH (2011)',\n    key_en: 'R-IACHR (2011)',\n    key_pt: 'R-CIDH (2011)',\n    label_es: 'Reglamento de la Comisin Interamericana de Derechos Humanos (2011)',\n    label_en: 'Rules of Procedure of the Inter-American Commission on Human Rights (2011)',\n    label_pt: 'Regulamento da Comisso Interamericana de Direitos Humanos (2011)' },\n\n  'r-cidh (2009)': {\n    key_es: 'R-CIDH (2009)',\n    key_en: 'R-IACHR (2009)',\n    key_pt: 'R-CIDH (2009)',\n    label_es: 'Reglamento de la Comisin Interamericana de Derechos Humanos (2009)',\n    label_en: 'Rules of Procedure of the Inter-American Commission on Human Rights (2009)',\n    label_pt: 'Regulamento da Comisso Interamericana de Direitos Humanos (2009)' },\n\n  'r-cidh (2008)': {\n    key_es: 'R-CIDH (2008)',\n    key_en: 'R-IACHR (2008)',\n    key_pt: 'R-CIDH (2008)',\n    label_es: 'Reglamento de la Comisin Interamericana de Derechos Humanos (2008)',\n    label_en: 'Rules of Procedure of the Inter-American Commission on Human Rights (2008)',\n    label_pt: 'Regulamento da Comisso Interamericana de Direitos Humanos (2008)' },\n\n  'r-cidh (2006)': {\n    key_es: 'R-CIDH (2006)',\n    key_en: 'R-IACHR (2006)',\n    key_pt: 'R-CIDH (2006)',\n    label_es: 'Reglamento de la Comisin Interamericana de Derechos Humanos (2006)',\n    label_en: 'Rules of Procedure of the Inter-American Commission on Human Rights (2006)',\n    label_pt: 'Regulamento da Comisso Interamericana de Direitos Humanos (2006)' },\n\n  'r-cidh (2003)': {\n    key_es: 'R-CIDH (2003)',\n    key_en: 'R-IACHR (2003)',\n    key_pt: 'R-CIDH (2003)',\n    label_es: 'Reglamento de la Comisin Interamericana de Derechos Humanos (2003)',\n    label_en: 'Rules of Procedure of the Inter-American Commission on Human Rights (2003)',\n    label_pt: 'Regulamento da Comisso Interamericana de Direitos Humanos (2003)' },\n\n  'r-cidh (2002)': {\n    key_es: 'R-CIDH (2002)',\n    key_en: 'R-IACHR (2002)',\n    key_pt: 'R-CIDH (2002)',\n    label_es: 'Reglamento de la Comisin Interamericana de Derechos Humanos (2002)',\n    label_en: 'Rules of Procedure of the Inter-American Commission on Human Rights (2002)',\n    label_pt: 'Regulamento da Comisso Interamericana de Direitos Humanos (2002)' },\n\n  'r-cidh (2000)': {\n    key_es: 'R-CIDH (2000)',\n    key_en: 'R-IACHR (2000)',\n    key_pt: 'R-CIDH (2000)',\n    label_es: 'Reglamento de la Comisin Interamericana de Derechos Humanos (2000)',\n    label_en: 'Rules of Procedure of the Inter-American Commission on Human Rights (2000)',\n    label_pt: 'Regulamento da Comisso Interamericana de Direitos Humanos (2000)' },\n\n  'r-cidh (1980)': {\n    key_es: 'R-CIDH (1980)',\n    key_en: 'R-IACHR (1980)',\n    key_pt: 'R-CIDH (1980)',\n    label_es: 'Reglamento de la Comisin Interamericana de Derechos Humanos (1980)',\n    label_en: 'Rules of Procedure of the Inter-American Commission on Human Rights (1980)',\n    label_pt: 'Regulamento da Comisso Interamericana de Direitos Humanos (1980)' },\n\n  'r-cidh (1966)': {\n    key_es: 'R-CIDH (1966)',\n    key_en: 'R-IACHR (1966)',\n    key_pt: 'R-CIDH (1966)',\n    label_es: 'Reglamento de la Comisin Interamericana de Derechos Humanos (1966)',\n    label_en: 'Rules of Procedure of the Inter-American Commission on Human Rights (1966)',\n    label_pt: 'Regulamento da Comisso Interamericana de Direitos Humanos (1966)' },\n\n  'r-corteidh (2009/noviembre)': {\n    key_es: 'R-CorteIDH (2009/noviembre)',\n    key_en: 'R-IACoHR (2009/november)',\n    key_pt: 'R-CorteIDH (2009/novembro)',\n    label_es: 'Reglamento de la Corte Interamericana de Derechos Humanos (2009/noviembre)',\n    label_en: 'Rules of Procedure of the Inter-American Court of Human Rights (2009/november)',\n    label_pt: 'Regulamento da Corte Interamericana de Direitos Humanos (2009/novembro)' },\n\n  'r-corteidh (2009/enero)': {\n    key_es: 'R-CorteIDH (2009/enero)',\n    key_en: 'R-IACoHR (2009/january)',\n    key_pt: 'R-CorteIDH (2009/janeiro)',\n    label_es: 'Reglamento de la Corte Interamericana de Derechos Humanos (2009/enero)',\n    label_en: 'Rules of Procedure of the Inter-American Court of Human Rights (2009/january)',\n    label_pt: 'Regulamento da Corte Interamericana de Direitos Humanos (2009/janeiro)' },\n\n  'r-corteidh (2003)': {\n    key_es: 'R-CorteIDH (2003)',\n    key_en: 'R-IACoHR (2003)',\n    key_pt: 'R-CorteIDH (2003)',\n    label_es: 'Reglamento de la Corte Interamericana de Derechos Humanos (2003)',\n    label_en: 'Rules of Procedure of the Inter-American Court of Human Rights (2003)',\n    label_pt: 'Regulamento da Corte Interamericana de Direitos Humanos (2003)' },\n\n  'r-corteidh (2000)': {\n    key_es: 'R-CorteIDH (2000)',\n    key_en: 'R-IACoHR (2000)',\n    key_pt: 'R-CorteIDH (2000)',\n    label_es: 'Reglamento de la Corte Interamericana de Derechos Humanos (2000)',\n    label_en: 'Rules of Procedure of the Inter-American Court of Human Rights (2000)',\n    label_pt: 'Regulamento da Corte Interamericana de Direitos Humanos (2000)' },\n\n  'r-corteidh (1996)': {\n    key_es: 'R-CorteIDH (1996)',\n    key_en: 'R-IACoHR (1996)',\n    key_pt: 'R-CorteIDH (1996)',\n    label_es: 'Reglamento de la Corte Interamericana de Derechos Humanos (1996)',\n    label_en: 'Rules of Procedure of the Inter-American Court of Human Rights (1996)',\n    label_pt: 'Regulamento da Corte Interamericana de Direitos Humanos (1996)' },\n\n  'r-corteidh (1991)': {\n    key_es: 'R-CorteIDH (1991)',\n    key_en: 'R-IACoHR (1991)',\n    key_pt: 'R-CorteIDH (1991)',\n    label_es: 'Reglamento de la Corte Interamericana de Derechos Humanos (1991)',\n    label_en: 'Rules of Procedure of the Inter-American Court of Human Rights (1991)',\n    label_pt: 'Regulamento da Corte Interamericana de Direitos Humanos (1991)' },\n\n  'r-corteidh (1980)': {\n    key_es: 'R-CorteIDH (1980)',\n    key_en: 'R-IACoHR (1980)',\n    key_pt: 'R-CorteIDH (1980)',\n    label_es: 'Reglamento de la Corte Interamericana de Derechos Humanos (1980)',\n    label_en: 'Rules of Procedure of the Inter-American Court of Human Rights (1980)',\n    label_pt: 'Regulamento da Corte Interamericana de Direitos Humanos (1980)' },\n\n  rcfal: {\n    key_es: 'RCFAL',\n    key_en: 'RICLAF',\n    key_pt: 'RCFAJ',\n    label_es:\n    'Reglamento de la Comisin Interamericana de derechos humanos sobre el Fondo de Asistencia Legal del Sistema Interamericano de Derechos Humanos',\n    label_en:\n    'Rules of Procedure of the Inter-American Commission of Human Rights on the Legal Assistance Fund of the Inter-American Human Rights System',\n    label_pt:\n    'Regulamento da Comisso Interamericana sobre o Fundo de Assistncia Jurdica do Sistema Interamericano de Direitos Humanos' },\n\n  rcofalv: {\n    key_es: 'RCoFALV',\n    key_en: 'RCoVLAF',\n    key_pt: 'RCoFALV',\n    label_es:\n    'Reglamento de la Corte Interamericana de derechos humanos sobre el funcionamiento del fondo de asistencia legal de victimas',\n    label_en:\n    'Rules of Procedure of the Inter-American Court of Human Rights on the Victims Legal Assistance Fund',\n    label_pt:\n    'Regulamento da Corte Interamericana de Direitos Humanos sobre o funcionamento do Fundo de Assistncia Jurdica s Vtimas' } };","import { t } from \"../../I18N\";\n\nfunction getTitleLabel(template) {\n  const titleField = template.commonProperties.find((p) => p.name === 'title');\n  return t(template._id, titleField.label);\n}\n\nfunction getMetadataFieldLabel(field, template) {\n  const name = field.split('.')[1];\n  const property = template.properties.find((p) => p.name === name);\n  return property && t(template._id, property.label) || field;\n}\n\nexport default function getFieldLabel(field, template) {\n  const _template = template && template.toJS ? template.toJS() : template;\n  if (field === 'title' && _template) {\n    return getTitleLabel(_template);\n  }\n  if (field.startsWith('metadata.') && _template) {\n    return getMetadataFieldLabel(field, _template) || field;\n  }\n  return field;\n}","export default {\n  get: () => [\n  {\n    localID: 'commonTitle',\n    label: 'Title',\n    name: 'title',\n    isCommonProperty: true,\n    type: 'text',\n    prioritySorting: false,\n    generatedId: false },\n\n  {\n    localID: 'commonCreationDate',\n    label: 'Date added',\n    name: 'creationDate',\n    isCommonProperty: true,\n    type: 'date',\n    prioritySorting: false },\n\n  {\n    localID: 'commonEditDate',\n    label: 'Date modified',\n    name: 'editDate',\n    isCommonProperty: true,\n    type: 'date',\n    prioritySorting: false }] };","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import React from 'react';\nimport { FeatureToggle } from \"../../components/Elements/FeatureToggle\";\n\n\n\n\n\n\n\nexport const TocGeneratedLabel = ({ file, children }) => /*#__PURE__*/\n_jsx(FeatureToggle, { feature: \"tocGeneration\" }, void 0,\nfile.generatedToc && /*#__PURE__*/_jsx(\"div\", { className: \"badge\" }, void 0, children));","function ownKeys(object, enumerableOnly) {var keys = Object.keys(object);if (Object.getOwnPropertySymbols) {var symbols = Object.getOwnPropertySymbols(object);enumerableOnly && (symbols = symbols.filter(function (sym) {return Object.getOwnPropertyDescriptor(object, sym).enumerable;})), keys.push.apply(keys, symbols);}return keys;}function _objectSpread(target) {for (var i = 1; i < arguments.length; i++) {var source = null != arguments[i] ? arguments[i] : {};i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {_defineProperty(target, key, source[key]);}) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));});}return target;}function _defineProperty(obj, key, value) {if (key in obj) {Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });} else {obj[key] = value;}return obj;}import { actions } from \"../../BasicReducer/reducer\";\nimport { actions as formActions } from 'react-redux-form';\nimport { RequestParams } from \"../../utils/RequestParams\";\nimport api from \"../../utils/api\";\nimport { notificationActions } from \"../../Notifications\";\n\n\nimport { ensure } from \"../../../shared/tsUtils\";\n\n\nconst tocGenerationActions = {\n  reviewToc(fileId) {\n    return async (dispatch, getState) => {\n      const currentDoc = getState().documentViewer.doc.toJS();\n      dispatch(formActions.reset('documentViewer.sidepanel.metadata'));\n\n      const updatedFile = (await api.post('files/tocReviewed', new RequestParams({ fileId }))).json;\n      const doc = _objectSpread(_objectSpread({},\n      currentDoc), {}, {\n        defaultDoc: updatedFile,\n        documents: ensure(currentDoc.documents).map((d) => {\n          if (d._id === updatedFile._id) {\n            return updatedFile;\n          }\n          return d;\n        }) });\n\n\n      dispatch(notificationActions.notify('Document updated', 'success'));\n      dispatch(formActions.reset('documentViewer.sidepanel.metadata'));\n      dispatch(actions.set('viewer/doc', doc));\n    };\n  } };\n\n\nexport { tocGenerationActions };","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import React from 'react';\nimport { Icon } from \"../../UI\";\nimport { FeatureToggle } from \"../../components/Elements/FeatureToggle\";\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\n\nimport { tocGenerationActions } from \"./actions\";\n\n\n\n\n\n\nconst mapDispatchToProps = (dispatch) =>\nbindActionCreators({ onClick: tocGenerationActions.reviewToc }, dispatch);\n\nconst connector = connect(null, mapDispatchToProps);\n\n\n\n\nconst ReviewTocButton = ({ file, onClick, children }) => /*#__PURE__*/\n_jsx(FeatureToggle, { feature: \"tocGeneration\" }, void 0,\nfile.generatedToc && /*#__PURE__*/\n_jsx(\"button\", { type: \"button\", onClick: () => onClick(file._id), className: \"edit-toc btn btn-success\" }, void 0, /*#__PURE__*/\n_jsx(Icon, { icon: \"tasks\" }), /*#__PURE__*/\n_jsx(\"span\", { className: \"btn-label\" }, void 0, children)));\n\n\n\n\n\nconst container = connector(ReviewTocButton);\nexport { container as ReviewTocButton };","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import React from 'react';\n\nimport { FeatureToggle } from \"../../components/Elements/FeatureToggle\";\nimport SelectFilter from \"../../Library/components/SelectFilter\";\nimport FormGroup from \"../../DocumentForm/components/FormGroup\";\nimport { t } from \"../../I18N\";\nimport { NeedAuthorization } from \"../../Auth\";\n\n\n\n\n\n\nconst filteredAggregation = (aggregations, key) => {var _aggregations$all, _aggregations$all$gen;\n  const bucket = ((aggregations === null || aggregations === void 0 ? void 0 : (_aggregations$all = aggregations.all) === null || _aggregations$all === void 0 ? void 0 : (_aggregations$all$gen = _aggregations$all.generatedToc) === null || _aggregations$all$gen === void 0 ? void 0 : _aggregations$all$gen.buckets) || []).find((a) => a.key === key) || {\n    filtered: { doc_count: 0 } };\n\n  return bucket.filtered.doc_count;\n};\n\nconst options = (aggregations = { all: {} }) => [\n{\n  label: t('System', 'Automatically generated'),\n  value: true,\n  results: filteredAggregation(aggregations, 'true') },\n\n{\n  label: t('System', 'Reviewed'),\n  value: false,\n  results: filteredAggregation(aggregations, 'false') }];\n\n\n\nexport const FilterTocGeneration = ({ onChange, aggregations }) => /*#__PURE__*/\n_jsx(NeedAuthorization, { roles: ['admin'] }, void 0, /*#__PURE__*/\n_jsx(FeatureToggle, { feature: \"tocGeneration\" }, void 0, /*#__PURE__*/\n_jsx(FormGroup, { className: \"admin-filter\" }, \"generatedToc\", /*#__PURE__*/\n_jsx(SelectFilter, {\n  model: \".customFilters.generatedToc\",\n  prefix: \"generatedToc\",\n  label: t('System', 'Automatic Table of Contents'),\n  onChange: onChange,\n  options: options(aggregations),\n  showBoolSwitch: false }))));","function ownKeys(object, enumerableOnly) {var keys = Object.keys(object);if (Object.getOwnPropertySymbols) {var symbols = Object.getOwnPropertySymbols(object);enumerableOnly && (symbols = symbols.filter(function (sym) {return Object.getOwnPropertyDescriptor(object, sym).enumerable;})), keys.push.apply(keys, symbols);}return keys;}function _objectSpread(target) {for (var i = 1; i < arguments.length; i++) {var source = null != arguments[i] ? arguments[i] : {};i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {_defineProperty(target, key, source[key]);}) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));});}return target;}function _defineProperty(obj, key, value) {if (key in obj) {Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });} else {obj[key] = value;}return obj;}\n\n\nexport const tocGenerationUtils = {\n  aggregations(params, settings) {var _settings$features;\n    return _objectSpread(_objectSpread({},\n    params),\n    settings !== null && settings !== void 0 && (_settings$features = settings.features) !== null && _settings$features !== void 0 && _settings$features.tocGeneration ? { aggregateGeneratedToc: true } : {});\n\n  } };","/* eslint-disable max-len */\n\nconst twoFactorAuthSvgPath =\n'm 4.92478,2.8916 c 1.1013,0 2.03317,0.93187 2.03317,2.03318 0,1.12954 -0.93187,2.03317 -2.03317,2.03317 -1.12955,0 -2.03318,-0.90363 -2.03318,-2.03317 0,-1.10131 0.90363,-2.03318 2.03318,-2.03318 z m 9.93992,0 c 1.1013,0 2.0332,0.93187 2.0332,2.03318 0,1.12954 -0.9319,2.03317 -2.0332,2.03317 -1.1295,0 -2.0331,-0.90363 -2.0331,-2.03317 0,-1.10131 0.9036,-2.03318 2.0331,-2.03318 z m -2.9368,2.03318 c 0,1.12954 -0.9318,2.03317 -2.03314,2.03317 -1.12954,0 -2.03318,-0.90363 -2.03318,-2.03317 0,-1.10131 0.90364,-2.03318 2.03318,-2.03318 1.10134,0 2.03314,0.93187 2.03314,2.03318 z m 5.2744,4.56534 c 0.2504,-0.12305 0.489,-0.26641 0.7136,-0.42795 0.2403,-0.0887 0.5,-0.13737 0.7716,-0.13737 1.2187,0 2.25,1.03125 2.25,2.25 v 2.25 h -4.5 v -2.25 c 0,-0.6619 0.295,-1.26855 0.7648,-1.68468 z M 18.6875,6.4248 C 16.852,6.4248 15.261,7.47907 14.47,9 H 5 C 2.79086,9 1,7.20914 1,5 1,2.79086 2.79086,1 5,1 h 10 c 2.2091,0 4,1.79086 4,4 0,0.502 -0.0925,0.98239 -0.2613,1.42509 C 18.7216,6.4249 18.7046,6.4248 18.6875,6.4248 Z M 0,5 c 0,2.76142 2.23858,5 5,5 h 5.268852 3.817448 c -0.0971,0.3766 -0.1488,0.7704 -0.1488,1.1748 v 2.25 h -0.75 c -0.8437,0 -1.5,0.6875 -1.5,1.5 v 6 c 0,0.8438 0.6563,1.5 1.5,1.5 h 11 c 0.8125,0 1.5,-0.6562 1.5,-1.5 v -6 c 0,-0.8125 -0.6875,-1.5 -1.5,-1.5 h -0.75 v -2.25 c 0,-2.22743 -1.5902,-4.13221 -3.6821,-4.62581 C 19.9142,6.06129 20,5.54067 20,5 20,2.23858 17.7614,0 15,0 H 12.408196 5 C 2.23858,0 0,2.23858 0,5 Z';\nexport const twoFactorAuth = {\n  prefix: 'fas',\n  iconName: 'two-factor-auth',\n  fillRule: 'nonzero',\n  icon: [18, 18, [], 'e001', twoFactorAuthSvgPath] };","/* eslint-disable max-len */\n\nconst infoCircleHollowSvgPath =\n'M 6.781,0 C 3.035,0 0,3.0625 0,6.78125 c 0,3.7461 3.035,6.7812 6.781,6.7812 3.719,0 6.781,-3.0351 6.781,-6.7812 C 13.562,3.0625 10.5,0 6.781,0 Z m 0,12.25005 c -3.035,0 -5.469,-2.4336 -5.469,-5.4688 0,-3.00781 2.434,-5.46875 5.469,-5.46875 3.008,0 5.469,2.46094 5.469,5.46875 0,3.0352 -2.461,5.4688 -5.469,5.4688 z m 0,-9.24224 c -0.656,0 -1.148,0.51953 -1.148,1.14844 0,0.65625 0.492,1.14844 1.148,1.14844 0.629,0 1.148,-0.49219 1.148,-1.14844 0,-0.62891 -0.519,-1.14844 -1.148,-1.14844 z m 1.531,6.94534 v -0.6563 c 0,-0.164 -0.164,-0.3281 -0.328,-0.3281 H 7.656 V 6.23437 C 7.656,6.07031 7.492,5.90625 7.328,5.90625 h -1.75 c -0.192,0 -0.328,0.16406 -0.328,0.32812 v 0.65626 c 0,0.1914 0.136,0.32812 0.328,0.32812 h 0.328 v 1.75 H 5.578 c -0.192,0 -0.328,0.1641 -0.328,0.3281 v 0.6563 c 0,0.1914 0.136,0.3281 0.328,0.3281 h 2.406 c 0.164,0 0.328,-0.1367 0.328,-0.3281 z';\nexport const infoCircleHollow = {\n  prefix: 'fas',\n  iconName: 'info-circle-hollow',\n  icon: [14, 14, [], 'e001', infoCircleHollowSvgPath] };","/**\n *\n *\n * @format\n */\n\n/* eslint-disable max-len */\n\n/**\n * Original svg code for the save and next icon\n * <svg width=\"448px\" height=\"448px\" viewBox=\"0 0 448 448\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\n *  <g id=\"Page-1\" stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\">\n *      <path d=\"M316.118,0 C328.646297,0 340.669588,4.89796549 349.627934,13.6333306 L350.059,14.059 L433.941,97.941 C442.799876,106.799811 447.838459,118.764857 447.996182,131.276197 L448,131.882 L448,400 C448,426.2449 426.937651,447.569698 400.793778,447.993569 L400,448 L48,448 C21.7551,448 0.430302,426.937651 0.00643053,400.793778 L0,400 L0,48 C0,21.7551 21.062349,0.430302 47.2062225,0.00643053 L48,0 L316.118,0 Z M229.58855,116.6485 C224.81453,111.783833 217.011829,111.783833 212.186475,116.6485 L212.186475,116.6485 L200.790425,128.137394 C195.862404,133.053813 195.965071,141.075338 200.995759,145.888253 L200.995759,145.888253 L262.852695,205.29929 L115.320054,205.29929 C108.492691,205.29929 103,210.83673 103,217.719716 L103,217.719716 L103,234.280284 C103,241.16327 108.492691,246.70071 115.320054,246.70071 L115.320054,246.70071 L262.852695,246.70071 L200.995759,306.111747 C196.016404,310.924662 195.913737,318.946187 200.790425,323.862606 L200.790425,323.862606 L212.186475,335.3515 C216.960495,340.216167 224.763196,340.216167 229.58855,335.3515 L229.58855,335.3515 L329.380984,234.74605 C334.206339,229.933135 334.206339,222.066865 329.380984,217.202198 L329.380984,217.202198 Z\" id=\"Combined-Shape\"></path>\n *  </g>\n * </svg>\n */\n\nconst saveAndNextSvgPath =\n'M316.118,0 C328.646297,0 340.669588,4.89796549 349.627934,13.6333306 L350.059,14.059 L433.941,97.941 C442.799876,106.799811 447.838459,118.764857 447.996182,131.276197 L448,131.882 L448,400 C448,426.2449 426.937651,447.569698 400.793778,447.993569 L400,448 L48,448 C21.7551,448 0.430302,426.937651 0.00643053,400.793778 L0,400 L0,48 C0,21.7551 21.062349,0.430302 47.2062225,0.00643053 L48,0 L316.118,0 Z M229.58855,116.6485 C224.81453,111.783833 217.011829,111.783833 212.186475,116.6485 L212.186475,116.6485 L200.790425,128.137394 C195.862404,133.053813 195.965071,141.075338 200.995759,145.888253 L200.995759,145.888253 L262.852695,205.29929 L115.320054,205.29929 C108.492691,205.29929 103,210.83673 103,217.719716 L103,217.719716 L103,234.280284 C103,241.16327 108.492691,246.70071 115.320054,246.70071 L115.320054,246.70071 L262.852695,246.70071 L200.995759,306.111747 C196.016404,310.924662 195.913737,318.946187 200.790425,323.862606 L200.790425,323.862606 L212.186475,335.3515 C216.960495,340.216167 224.763196,340.216167 229.58855,335.3515 L229.58855,335.3515 L329.380984,234.74605 C334.206339,229.933135 334.206339,222.066865 329.380984,217.202198 L329.380984,217.202198 Z';\nexport const saveAndNext = {\n  prefix: 'fas',\n  iconName: 'save-and-next',\n  icon: [448, 448, [], 'e001', saveAndNextSvgPath] };","/* eslint-disable max-len */\n\nconst exportCsvSvgPath =\n'M11.7382 0.617802L15.1979 4.03631C15.5686 4.40699 15.8157 4.94242 15.8157 5.43666V19.1519C15.8157 20.2227 14.9096 21.0877 13.7976 21.0877H9.20995V19.1519H13.8388V7.29007H9.51416C8.97873 7.29007 8.52567 6.83701 8.52567 6.30158V2.01815H1.93578V19.1519H5.6261V21.0877H1.93578C0.864923 21.0877 0 20.2227 0 19.1519V2.01815C0 0.90611 0.864923 0.0411868 1.93578 0H10.3791C10.8733 0 11.3676 0.247121 11.7382 0.617802ZM13.674 5.3131L10.5026 2.14172V5.3131H13.674ZM8.00289 17.5106C8.30154 17.5106 8.6002 17.7584 8.6002 18.1055V22.253H10.9894C11.537 22.253 11.7859 22.8975 11.4374 23.2446L7.85356 26.8141C7.60468 27.062 7.1567 27.062 6.90782 26.8141L3.32396 23.2446C2.97553 22.8975 3.22441 22.253 3.77194 22.253H6.21096V18.1055C6.21096 17.7584 6.45984 17.5106 6.80827 17.5106H8.00289ZM3.16316 9.65899V16.3429C3.16316 16.7136 3.45147 17.0019 3.82215 17.0019H11.73C12.0595 17.0019 12.389 16.7136 12.389 16.3429V9.65899C12.389 9.3295 12.0595 9 11.73 9H3.82215C3.45147 9 3.16316 9.3295 3.16316 9.65899ZM11.071 10.412H8.43507V12.389H11.071V10.412ZM8.43507 13.707H11.071V15.6839H8.43507V13.707ZM7.1171 13.707H4.48114V15.6839H7.1171V13.707ZM4.48114 10.412H7.1171V12.389H4.48114V10.412Z';\nexport const exportCsv = {\n  prefix: 'fas',\n  iconName: 'export-csv',\n  icon: [17, 17, [], 'e001', exportCsvSvgPath] };","/* eslint-disable max-len */\n\nconst importCsvSvgPath =\n'M8.09613 9.55878C8.39826 9.55878 8.70039 9.30908 8.70039 8.95951V4.78165H11.1175C11.6714 4.78165 11.9232 4.13244 11.5707 3.78287L7.94506 0.187271C7.69328 -0.0624237 7.24008 -0.0624237 6.9883 0.187271L3.36269 3.78287C3.0102 4.13244 3.26198 4.78165 3.81589 4.78165H6.28332V8.95951C6.28332 9.30908 6.5351 9.55878 6.88759 9.55878H8.09613ZM8.625 10.1763V12.1059C8.625 12.6452 9.08333 13.1016 9.625 13.1016H14V25.0501H1.95833V7.79117H5.69161V5.75827H1.95833C0.875 5.79976 0 6.671 0 7.79117V25.0501C0 26.1288 0.875 27 1.95833 27H13.9583C15.0833 27 16 26.1288 16 25.0501V11.2347C16 10.7368 15.75 10.1975 15.375 9.82407L11.875 6.38059C11.5 6.0072 11 5.75827 10.5 5.75827H9.31722V9.30138C9.31722 9.74421 8.99658 10.0806 8.625 10.1763ZM13.8333 11.1102L10.625 7.91564V11.1102H13.8333ZM3.20001 15.5V22.2206C3.20001 22.594 3.49168 22.8844 3.86668 22.8844H11.8667C12.2 22.8844 12.5333 22.594 12.5333 22.2206V15.5C12.5333 15.1681 12.2 14.8362 11.8667 14.8362H3.86668C3.49168 14.8362 3.20001 15.1681 3.20001 15.5ZM11.2 16.2464H8.53335V18.2378H11.2V16.2464ZM8.53335 19.5654H11.2V21.5568H8.53335V19.5654ZM7.20001 19.5654H4.53335V21.5568H7.20001V19.5654ZM4.53335 16.2464H7.20001V18.2378H4.53335V16.2464Z';\nexport const importCsv = {\n  prefix: 'fas',\n  iconName: 'import-csv',\n  icon: [17, 17, [], 'e001', importCsvSvgPath] };","/* eslint-disable max-len */\n\nconst copyFromSvgPath =\n'M11.5 3H2.5C1.6875 3 1 3.6875 1 4.5V13.5C1 14.3438 1.6875 15 2.5 15H11.5C12.3438 15 13 14.3438 13 13.5V12.1624H9.02806V13.5556C9.02806 14.1781 8.25736 14.5041 7.81274 14.0595L5.26353 11.4807C4.96711 11.2139 4.96711 10.7693 5.26353 10.5025L7.81274 7.92365C8.25736 7.47902 9.02806 7.80508 9.02806 8.42756V9.79109H13V4.5C13 3.6875 12.3438 3 11.5 3ZM14 9.79109V6.41033C14 6.27055 13.9883 6.13349 13.966 6.00006H19.5C20.3438 6.00006 21 6.68756 21 7.50006V16.5001C21 17.3438 20.3438 18.0001 19.5 18.0001H10.5C9.6875 18.0001 9 17.3438 9 16.5001V15.9488H11.5385C12.8979 15.9488 14 14.8467 14 13.4873V12.1624H16.6442C16.8517 12.1624 16.9999 12.0142 16.9999 11.8067V10.1468C16.9999 9.96894 16.8517 9.79109 16.6442 9.79109H14Z';\nexport const copyFrom = {\n  prefix: 'fas',\n  iconName: 'copy-from',\n  icon: [16, 16, [], 'e001', copyFromSvgPath] };","/* eslint-disable max-len */\n\nconst funnelFilterSvgPath =\n'M4.86858 9.74499c-.18725 0-.3745.18725-.3745.37451v.749c0 .2107.18725.3745.3745.3745h2.26284c.18725 0 .3745-.1638.3745-.3745v-.749c0-.18726-.18725-.37451-.3745-.37451H4.86858zm-2.99605-5.9921c-.18725 0-.3745.18725-.3745.3745v.74901c0 .21066.18725.37451.3745.37451h8.25497c.1872 0 .3745-.16385.3745-.37451v-.74901c0-.18725-.1873-.3745-.3745-.3745H1.87253zm1.49803 2.99605c-.18726 0-.37451.18725-.37451.3745v.74902c0 .21065.18725.3745.37451.3745h5.25888c.18726 0 .37451-.16385.37451-.3745v-.74902c0-.18725-.18725-.3745-.37451-.3745H3.37056zM.374506.756836C.187253.756836 0 .944089 0 1.13134v.74901c0 .21066.187253.37451.374506.37451H11.6255c.1872 0 .3745-.16385.3745-.37451v-.74901c0-.187251-.1873-.374504-.3745-.374504H.374506z';\nexport const funnelFilter = {\n  prefix: 'fas',\n  iconName: 'funnel-filter',\n  icon: [12, 12, [], 'e001', funnelFilterSvgPath] };","import { library } from '@fortawesome/fontawesome-svg-core';\nimport { faAlignJustify } from '@fortawesome/free-solid-svg-icons/faAlignJustify';\nimport { faAngleDoubleLeft } from '@fortawesome/free-solid-svg-icons/faAngleDoubleLeft';\nimport { faAngleDoubleRight } from '@fortawesome/free-solid-svg-icons/faAngleDoubleRight';\nimport { faAngleLeft } from '@fortawesome/free-solid-svg-icons/faAngleLeft';\nimport { faAngleRight } from '@fortawesome/free-solid-svg-icons/faAngleRight';\nimport { faArrowLeft } from '@fortawesome/free-solid-svg-icons/faArrowLeft';\nimport { faArrowRight } from '@fortawesome/free-solid-svg-icons/faArrowRight';\nimport { faArrowUp } from '@fortawesome/free-solid-svg-icons/faArrowUp';\nimport { faArrowDown } from '@fortawesome/free-solid-svg-icons/faArrowDown';\nimport { faBars } from '@fortawesome/free-solid-svg-icons/faBars';\nimport { faBook } from '@fortawesome/free-solid-svg-icons/faBook';\nimport { faBullhorn } from '@fortawesome/free-solid-svg-icons/faBullhorn';\nimport { faCalculator } from '@fortawesome/free-solid-svg-icons/faCalculator';\nimport { faCalendar } from '@fortawesome/free-solid-svg-icons/faCalendar';\nimport { faCaretDown } from '@fortawesome/free-solid-svg-icons/faCaretDown';\nimport { faCaretSquareDown } from '@fortawesome/free-solid-svg-icons/faCaretSquareDown';\nimport { faCaretUp } from '@fortawesome/free-solid-svg-icons/faCaretUp';\nimport { faChartBar } from '@fortawesome/free-solid-svg-icons/faChartBar';\nimport { faCheck } from '@fortawesome/free-solid-svg-icons/faCheck';\nimport { faCheckCircle } from '@fortawesome/free-solid-svg-icons/faCheckCircle';\nimport { faChevronLeft } from '@fortawesome/free-solid-svg-icons/faChevronLeft';\nimport { faChevronRight } from '@fortawesome/free-solid-svg-icons/faChevronRight';\nimport { faCircle } from '@fortawesome/free-solid-svg-icons/faCircle';\nimport { faClock } from '@fortawesome/free-solid-svg-icons/faClock';\nimport { faClone } from '@fortawesome/free-solid-svg-icons/faClone';\nimport { faCloudUploadAlt } from '@fortawesome/free-solid-svg-icons/faCloudUploadAlt';\nimport { faCloudDownloadAlt } from '@fortawesome/free-solid-svg-icons/faCloudDownloadAlt';\nimport { faCode } from '@fortawesome/free-solid-svg-icons/faCode';\nimport { faCoffee } from '@fortawesome/free-solid-svg-icons/faCoffee';\nimport { faCog } from '@fortawesome/free-solid-svg-icons/faCog';\nimport { faComment } from '@fortawesome/free-solid-svg-icons/faComment';\nimport { faCubes } from '@fortawesome/free-solid-svg-icons/faCubes';\nimport { faCircle as faEmptyCircle } from '@fortawesome/free-regular-svg-icons/faCircle';\nimport { faEnvelope } from '@fortawesome/free-solid-svg-icons/faEnvelope';\nimport { faExchangeAlt } from '@fortawesome/free-solid-svg-icons/faExchangeAlt';\nimport { faExclamationTriangle } from '@fortawesome/free-solid-svg-icons/faExclamationTriangle';\nimport { faFile } from '@fortawesome/free-solid-svg-icons/faFile';\nimport { faFlask } from '@fortawesome/free-solid-svg-icons/faFlask';\nimport { faFilter } from '@fortawesome/free-solid-svg-icons/faFilter';\nimport { faFilePdf } from '@fortawesome/free-solid-svg-icons/faFilePdf';\nimport { faFileImage } from '@fortawesome/free-solid-svg-icons/faFileImage';\nimport { faFingerprint } from '@fortawesome/free-solid-svg-icons/faFingerprint';\nimport { faFont } from '@fortawesome/free-solid-svg-icons/faFont';\nimport { faGavel } from '@fortawesome/free-solid-svg-icons/faGavel';\nimport { faGlobeAfrica } from '@fortawesome/free-solid-svg-icons/faGlobeAfrica';\nimport { faHome } from '@fortawesome/free-solid-svg-icons/faHome';\nimport { faImage } from '@fortawesome/free-solid-svg-icons/faImage';\nimport { faInfoCircle } from '@fortawesome/free-solid-svg-icons/faInfoCircle';\nimport { faLanguage } from '@fortawesome/free-solid-svg-icons/faLanguage';\nimport { faKey } from '@fortawesome/free-solid-svg-icons/faKey';\nimport { faLevelDownAlt } from '@fortawesome/free-solid-svg-icons/faLevelDownAlt';\nimport { faLightbulb } from '@fortawesome/free-solid-svg-icons/faLightbulb';\nimport { faLink } from '@fortawesome/free-solid-svg-icons/faLink';\nimport { faUnlink } from '@fortawesome/free-solid-svg-icons/faUnlink';\nimport { faList } from '@fortawesome/free-solid-svg-icons/faList';\nimport { faLock } from '@fortawesome/free-solid-svg-icons/faLock';\nimport { faMapMarker } from '@fortawesome/free-solid-svg-icons/faMapMarker';\nimport { faMinus } from '@fortawesome/free-solid-svg-icons/faMinus';\nimport { faPaperPlane } from '@fortawesome/free-solid-svg-icons/faPaperPlane';\nimport { faPaperclip } from '@fortawesome/free-solid-svg-icons/faPaperclip';\nimport { faParagraph } from '@fortawesome/free-solid-svg-icons/faParagraph';\nimport { faPassport } from '@fortawesome/free-solid-svg-icons/faPassport';\nimport { faPencilAlt } from '@fortawesome/free-solid-svg-icons/faPencilAlt';\nimport { faPlay } from '@fortawesome/free-solid-svg-icons/faPlay';\nimport { faPlus } from '@fortawesome/free-solid-svg-icons/faPlus';\nimport { faPowerOff } from '@fortawesome/free-solid-svg-icons/faPowerOff';\nimport { faQuestionCircle } from '@fortawesome/free-solid-svg-icons/faQuestionCircle';\nimport { faQuoteLeft } from '@fortawesome/free-solid-svg-icons/faQuoteLeft';\nimport { faQuoteRight } from '@fortawesome/free-solid-svg-icons/faQuoteRight';\nimport { faSave } from '@fortawesome/free-solid-svg-icons/faSave';\nimport { faSearch } from '@fortawesome/free-solid-svg-icons/faSearch';\nimport { faServer } from '@fortawesome/free-solid-svg-icons/faServer';\nimport { faSearchMinus } from '@fortawesome/free-solid-svg-icons/faSearchMinus';\nimport { faSearchPlus } from '@fortawesome/free-solid-svg-icons/faSearchPlus';\nimport { faSitemap } from '@fortawesome/free-solid-svg-icons/faSitemap';\nimport { faSort } from '@fortawesome/free-solid-svg-icons/faSort';\nimport { faSortAlphaDown } from '@fortawesome/free-solid-svg-icons/faSortAlphaDown';\nimport { faSpinner } from '@fortawesome/free-solid-svg-icons/faSpinner';\nimport { faSquare } from '@fortawesome/free-regular-svg-icons/faSquare';\nimport { faSquare as faSolidSquare } from '@fortawesome/free-solid-svg-icons/faSquare';\nimport { faStar } from '@fortawesome/free-solid-svg-icons/faStar';\nimport { faStop } from '@fortawesome/free-solid-svg-icons/faStop';\nimport { faSync } from '@fortawesome/free-solid-svg-icons/faSync';\nimport { faTag } from '@fortawesome/free-solid-svg-icons/faTag';\nimport { faTerminal } from '@fortawesome/free-solid-svg-icons/faTerminal';\nimport { faTh } from '@fortawesome/free-solid-svg-icons/faTh';\nimport { faTimes } from '@fortawesome/free-solid-svg-icons/faTimes';\nimport { faTimesCircle } from '@fortawesome/free-solid-svg-icons/faTimesCircle';\nimport { faToggleOff } from '@fortawesome/free-solid-svg-icons/faToggleOff';\nimport { faToggleOn } from '@fortawesome/free-solid-svg-icons/faToggleOn';\nimport { faTrashAlt } from '@fortawesome/free-solid-svg-icons/faTrashAlt';\nimport { faUndo } from '@fortawesome/free-solid-svg-icons/faUndo';\nimport { faUpload } from '@fortawesome/free-solid-svg-icons/faUpload';\nimport { faVideo } from '@fortawesome/free-solid-svg-icons/faVideo';\nimport { faEye } from '@fortawesome/free-solid-svg-icons/faEye';\nimport { faArrowsAlt } from '@fortawesome/free-solid-svg-icons/faArrowsAlt';\nimport { faEyeSlash } from '@fortawesome/free-solid-svg-icons/faEyeSlash';\nimport { faUser } from '@fortawesome/free-solid-svg-icons/faUser';\nimport { faUsers } from '@fortawesome/free-solid-svg-icons/faUsers';\nimport { faUserCheck } from '@fortawesome/free-solid-svg-icons/faUserCheck';\nimport { faUserPlus } from '@fortawesome/free-solid-svg-icons/faUserPlus';\nimport { faUserTimes } from '@fortawesome/free-solid-svg-icons/faUserTimes';\nimport { faHandPaper } from '@fortawesome/free-solid-svg-icons/faHandPaper';\nimport { faBullseye } from '@fortawesome/free-solid-svg-icons/faBullseye';\nimport { faExternalLinkAlt } from '@fortawesome/free-solid-svg-icons/faExternalLinkAlt';\nimport { twoFactorAuth } from \"./two-factor-auth\";\nimport { infoCircleHollow } from \"./info-circle-hollow\";\nimport { faTasks } from '@fortawesome/free-solid-svg-icons/faTasks';\nimport { faMap } from '@fortawesome/free-solid-svg-icons/faMap';\nimport { faMapMarkerAlt } from '@fortawesome/free-solid-svg-icons/faMapMarkerAlt';\nimport { faColumns } from '@fortawesome/free-solid-svg-icons';\nimport { saveAndNext } from \"./save-and-next\";\nimport { exportCsv } from \"./export-csv\";\nimport { importCsv } from \"./import-csv\";\nimport { copyFrom } from \"./copy-from\";\nimport { funnelFilter } from \"./funnel-filter\";\n\nconst icons = {\n  faAlignJustify,\n  faAngleDoubleLeft,\n  faAngleDoubleRight,\n  faAngleLeft,\n  faAngleRight,\n  faArrowLeft,\n  faArrowsAlt,\n  faArrowUp,\n  faArrowDown,\n  faArrowRight,\n  faBars,\n  faBook,\n  faBullhorn,\n  faCalculator,\n  faCalendar,\n  faCaretDown,\n  faCaretSquareDown,\n  faCaretUp,\n  faChartBar,\n  faCheck,\n  faCheckCircle,\n  faChevronLeft,\n  faChevronRight,\n  faCircle,\n  faClock,\n  faClone,\n  faCloudUploadAlt,\n  faCloudDownloadAlt,\n  faCode,\n  faCoffee,\n  faCog,\n  faComment,\n  faCubes,\n  faEmptyCircle,\n  faEnvelope,\n  faExchangeAlt,\n  faExclamationTriangle,\n  faFlask,\n  faFile,\n  faFilter,\n  faFilePdf,\n  faFileImage,\n  faFingerprint,\n  faFont,\n  faGavel,\n  faGlobeAfrica,\n  faHome,\n  faImage,\n  faInfoCircle,\n  faKey,\n  faLanguage,\n  faLevelDownAlt,\n  faLightbulb,\n  faLink,\n  faUnlink,\n  faList,\n  faLock,\n  faMapMarker,\n  faMinus,\n  faPaperPlane,\n  faPaperclip,\n  faParagraph,\n  faPassport,\n  faPencilAlt,\n  faPlay,\n  faPlus,\n  faPowerOff,\n  faQuestionCircle,\n  faQuoteLeft,\n  faQuoteRight,\n  faSave,\n  faSearch,\n  faServer,\n  faSearchMinus,\n  faSearchPlus,\n  faSitemap,\n  faSort,\n  faSortAlphaDown,\n  faSpinner,\n  faSquare,\n  faSolidSquare,\n  faStar,\n  faStop,\n  faSync,\n  faTag,\n  faTerminal,\n  faTh,\n  faTimes,\n  faTimesCircle,\n  faToggleOff,\n  faToggleOn,\n  faTrashAlt,\n  faUndo,\n  faUpload,\n  faVideo,\n  faEye,\n  faEyeSlash,\n  faUser,\n  faUsers,\n  faUserTimes,\n  faUserPlus,\n  faUserCheck,\n  faHandPaper,\n  faExternalLinkAlt,\n  faMap,\n  faMapMarkerAlt,\n  saveAndNext,\n  faTasks,\n  exportCsv,\n  importCsv,\n  copyFrom,\n  funnelFilter,\n  twoFactorAuth,\n  infoCircleHollow,\n  faBullseye,\n  faColumns };\n\n\nexport const loadIcons = () => {\n  library.add(...Object.keys(icons).map((key) => icons[key]));\n};\n\nexport const iconNames = Object.keys(icons).map((key) => icons[key].iconName);","const _excluded = [\"locale\", \"directionAware\"];function _extends() {_extends = Object.assign ? Object.assign.bind() : function (target) {for (var i = 1; i < arguments.length; i++) {var source = arguments[i];for (var key in source) {if (Object.prototype.hasOwnProperty.call(source, key)) {target[key] = source[key];}}}return target;};return _extends.apply(this, arguments);}function _objectWithoutProperties(source, excluded) {if (source == null) return {};var target = _objectWithoutPropertiesLoose(source, excluded);var key, i;if (Object.getOwnPropertySymbols) {var sourceSymbolKeys = Object.getOwnPropertySymbols(source);for (i = 0; i < sourceSymbolKeys.length; i++) {key = sourceSymbolKeys[i];if (excluded.indexOf(key) >= 0) continue;if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;target[key] = source[key];}}return target;}function _objectWithoutPropertiesLoose(source, excluded) {if (source == null) return {};var target = {};var sourceKeys = Object.keys(source);var key, i;for (i = 0; i < sourceKeys.length; i++) {key = sourceKeys[i];if (excluded.indexOf(key) >= 0) continue;target[key] = source[key];}return target;} /** @format */\n\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { connect } from 'react-redux';\n\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { availableLanguages as languagesList } from \"../../../shared/languagesList\";\nimport { loadIcons } from \"./library\";\n\nloadIcons();\n\nconst Icon = (_ref) => {let { locale, directionAware } = _ref,ownProps = _objectWithoutProperties(_ref, _excluded);\n  const languageData = languagesList.find((l) => l.key === locale);\n  return /*#__PURE__*/(\n    React.createElement(FontAwesomeIcon, _extends({}, ownProps, { flip: languageData && languageData.rtl ? 'horizontal' : null })));\n\n};\n\nIcon.defaultProps = {\n  locale: '',\n  directionAware: false };\n\n\n\n\n\n\n\nexport const mapStateToProps = ({ locale }) => ({ locale });\n\nexport default connect(mapStateToProps, () => ({}))(Icon);","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import React from 'react';\nimport PropTypes from 'prop-types';\n\nconst ProgressBar = ({ max, value }) => {\n  const percentage = 100 * value / max;\n  return /*#__PURE__*/(\n    _jsx(\"div\", { className: \"uw-progress-bar--container\" }, void 0, /*#__PURE__*/\n    _jsx(\"div\", { className: \"uw-progress-bar\" }, void 0, /*#__PURE__*/\n    _jsx(\"div\", { className: \"uw-progress-bar--progress\", style: { width: `${percentage}%` } })), /*#__PURE__*/\n\n    _jsx(\"div\", { className: \"uw-progress-bar--counter\" }, void 0,\n    value, \"/\", max)));\n\n\n\n};\n\n\n\n\n\n\nProgressBar.defaultProps = {\n  max: 100,\n  value: 0 };\n\n\nexport default ProgressBar;","import countries from 'world-countries';\n\nconst CountryList = new Map(\ncountries.map((obj) => [obj.cca3, { cca2: obj.cca2, label: obj.name.common, cca3: obj.cca3 }]));\n\n\nexport default CountryList;","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import React from 'react';\n\n\n\n\n\nexport const ToggleButton = ({ checked, onClick }) => /*#__PURE__*/\n_jsx(\"label\", { className: \"toggleButton\" }, void 0, /*#__PURE__*/\n_jsx(\"input\", { type: \"checkbox\", checked: checked, onChange: onClick }), /*#__PURE__*/\n_jsx(\"span\", { className: \"slider\" }));","export const SET_UPLOADS = 'SET_UPLOADS';\nexport const SET_THESAURIS_UPLOADS = 'SET_THESAURIS_UPLOADS';\nexport const SET_TEMPLATES_UPLOADS = 'SET_TEMPLATES_UPLOADS';\nexport const NEW_UPLOAD_DOCUMENT = 'NEW_UPLOAD_DOCUMENT';\nexport const UPLOAD_PROGRESS = 'UPLOAD_PROGRESS';\nexport const UPLOAD_COMPLETE = 'UPLOAD_COMPLETE';\nexport const UPLOADS_COMPLETE = 'UPLOADS_COMPLETE';\nexport const BATCH_UPLOAD_COMPLETE = 'BATCH_UPLOAD_COMPLETE';\nexport const CONVERSION_COMPLETE = 'CONVERSION_COMPLETE';\nexport const UPDATE_DOCUMENT = 'UPLOADS/UPDATE_DOCUMENT';\nexport const UPDATE_DOCUMENTS = 'UPLOADS/UPDATE_DOCUMENTS';\nexport const ENTER_UPLOADS_SECTION = 'ENTER_UPLOADS_SECTION';\nexport const MOVED_TO_LIBRARY = 'MOVED_TO_LIBRARY';\nexport const ELEMENT_DELETED = 'ELEMENT_DELETED';\nexport const REMOVE_DOCUMENT = 'REMOVE_DOCUMENT';\nexport const ELEMENT_CREATED = 'ELEMENT_CREATED';\nexport const SELECT_DOCUMENT = 'UPLOADS/SELECT_DOCUMENT';\nexport const SELECT_DOCUMENTS = 'UPLOADS/SELECT_DOCUMENTS';\nexport const UNSELECT_DOCUMENT = 'UPLOADS/UNSELECT_DOCUMENT';\nexport const UNSELECT_ALL_DOCUMENTS = 'UPLOADS/UNSELECT_ALL_DOCUMENTS';\nexport const UPDATE_SELECTED_ENTITIES = 'UPLOADS/UPDATE_SELECTED_ENTITIES';","import superagent from 'superagent';\n\nimport { actions as basicActions } from \"../../BasicReducer\";\nimport { notificationActions } from \"../../Notifications\";\nimport { selectSingleDocument } from \"../../Library/actions/libraryActions\";\nimport * as metadata from \"../../Metadata\";\nimport * as types from \"./actionTypes\";\nimport * as libraryTypes from \"../../Library/actions/actionTypes\";\nimport uniqueID from \"../../../shared/uniqueID\";\nimport { RequestParams } from \"../../utils/RequestParams\";\n\nimport { APIURL } from \"../../config.js\";\nimport api from \"../../utils/api\";\nimport EntitiesApi from \"../../Entities/EntitiesAPI\";\n\nexport function enterUploads() {\n  return {\n    type: types.ENTER_UPLOADS_SECTION };\n\n}\n\nexport function showImportPanel() {\n  return (dispatch) => {\n    dispatch(basicActions.set('showImportPanel', true));\n  };\n}\n\nexport function closeImportPanel() {\n  return (dispatch) => {\n    dispatch(basicActions.set('showImportPanel', false));\n  };\n}\n\nexport function closeImportProgress() {\n  return (dispatch) => {\n    dispatch(basicActions.set('importProgress', 0));\n    dispatch(basicActions.set('importStart', false));\n    dispatch(basicActions.set('importEnd', false));\n    dispatch(basicActions.set('importError', {}));\n  };\n}\n\nexport function newEntity(storeKey = 'uploads') {\n  return async (dispatch, getState) => {\n    const newEntityMetadata = { title: '', type: 'entity' };\n    dispatch(\n    metadata.actions.loadInReduxForm(\n    `${storeKey}.sidepanel.metadata`,\n    newEntityMetadata,\n    getState().templates.toJS()));\n\n\n    await dispatch(selectSingleDocument(newEntityMetadata));\n  };\n}\n\nexport function createDocument(newDoc) {\n  return (dispatch) =>\n  api.post('documents', new RequestParams(newDoc)).then((response) => {\n    const doc = response.json;\n    dispatch({ type: types.NEW_UPLOAD_DOCUMENT, doc: doc.sharedId });\n    dispatch({ type: types.ELEMENT_CREATED, doc });\n    return doc;\n  });\n}\n\nexport function importData([file], template) {\n  return (dispatch) =>\n  new Promise((resolve) => {\n    superagent.\n    post(`${APIURL}import`).\n    set('Accept', 'application/json').\n    set('X-Requested-With', 'XMLHttpRequest').\n    field('template', template).\n    attach('file', file, file.name).\n    on('progress', (data) => {\n      dispatch(basicActions.set('importUploadProgress', Math.floor(data.percent)));\n    }).\n    on('response', (response) => {\n      dispatch(basicActions.set('importUploadProgress', 0));\n      resolve(response);\n    }).\n    end();\n  });\n}\n\nexport function upload(docId, file, endpoint = 'files/upload/document') {\n  return async (dispatch) =>\n  new Promise((resolve) => {\n    superagent.\n    post(APIURL + endpoint).\n    set('Accept', 'application/json').\n    set('X-Requested-With', 'XMLHttpRequest').\n    field('entity', docId).\n    field('originalname', file.name).\n    attach('file', file).\n    on('progress', (data) => {\n      dispatch({\n        type: types.UPLOAD_PROGRESS,\n        doc: docId,\n        progress: Math.floor(data.percent) });\n\n    }).\n    on('response', (response) => {\n      dispatch({ type: types.UPLOAD_COMPLETE, doc: docId, file: response.body });\n      resolve(JSON.parse(response.text));\n    }).\n    end();\n  });\n}\n\nexport function publicSubmit(data, remote = false) {\n  return (dispatch) =>\n  new Promise((resolve) => {\n    const request = superagent.\n    post(remote ? `${APIURL}remotepublic` : `${APIURL}public`).\n    set('Accept', 'application/json').\n    set('X-Requested-With', 'XMLHttpRequest').\n    field('captcha', JSON.stringify(data.captcha));\n\n    if (data.file) {\n      request.attach('file', data.file);\n    }\n\n    if (data.attachments) {\n      data.attachments.forEach((attachment, index) => {\n        request.attach(`attachments[${index}]`, attachment);\n        request.field(`attachments_originalname[${index}]`, attachment.name);\n      });\n    }\n    request.field(\n    'entity',\n    JSON.stringify({ title: data.title, template: data.template, metadata: data.metadata }));\n\n    let completionResolve;\n    let completionReject;\n    const uploadCompletePromise = new Promise((_resolve, _reject) => {\n      completionResolve = _resolve;\n      completionReject = _reject;\n    });\n    request.\n    on('progress', () => {\n      resolve({ promise: uploadCompletePromise });\n    }).\n    on('response', (response) => {\n      if (response.status === 200) {\n        dispatch(notificationActions.notify('Success', 'success'));\n        completionResolve(response);\n        return;\n      }\n      if (response.status === 403) {\n        dispatch(notificationActions.notify(response.body.error, 'danger'));\n        completionReject(response);\n        return;\n      }\n      completionReject(response);\n      dispatch(notificationActions.notify('An error has ocurred', 'danger'));\n    }).\n    end();\n  });\n}\n\nexport function uploadCustom(file) {\n  return (dispatch) => {\n    const id = `customUpload_${uniqueID()}`;\n    return upload(\n    id,\n    file,\n    'files/upload/custom')(\n    dispatch).then((response) => {\n      dispatch(basicActions.push('customUploads', response));\n    });\n  };\n}\n\nexport function deleteCustomUpload(_id) {\n  return (dispatch) =>\n  api.delete('files', new RequestParams({ _id })).then((response) => {\n    dispatch(basicActions.remove('customUploads', response.json[0]));\n  });\n}\n\nexport function uploadDocument(docId, file) {\n  return async (dispatch) => upload(docId, file)(dispatch);\n}\n\nexport function documentProcessed(sharedId, __reducerKey) {\n  return (dispatch) => {\n    EntitiesApi.get(new RequestParams({ sharedId })).then(([doc]) => {\n      dispatch({ type: types.UPLOAD_PROGRESS, doc: sharedId, progress: 100 });\n      dispatch({ type: libraryTypes.UPDATE_DOCUMENT, doc, __reducerKey });\n      dispatch({ type: libraryTypes.UNSELECT_ALL_DOCUMENTS, __reducerKey });\n      dispatch({ type: libraryTypes.SELECT_DOCUMENT, doc, __reducerKey });\n      dispatch({\n        type: types.UPLOADS_COMPLETE,\n        doc: sharedId,\n        files: doc.documents,\n        __reducerKey: 'library' });\n\n      dispatch(basicActions.update('entityView/entity', doc));\n      dispatch(basicActions.update('viewer/doc', doc));\n      dispatch({ type: types.BATCH_UPLOAD_COMPLETE, doc: sharedId });\n    });\n  };\n}\n\nexport function conversionComplete(docId) {\n  return {\n    type: types.CONVERSION_COMPLETE,\n    doc: docId };\n\n}","export const SET_REFERENCES = 'SET_REFERENCES';\nexport const VIEWER_SET_TEMPLATES = 'VIEWER_SET_TEMPLATES';\nexport const VIEWER_SET_THESAURIS = 'VIEWER_SET_THESAURIS';\nexport const SET_DOCUMENT = 'SET_DOCUMENT';\nexport const SET_TARGET_DOCUMENT = 'SET_TARGET_DOCUMENT';\nexport const RESET_DOCUMENT_VIEWER = 'RESET_DOCUMENT_VIEWER';\n\nexport const SET_SELECTION = 'SET_SELECTION';\nexport const UNSET_SELECTION = 'UNSET_SELECTION';\nexport const SET_TARGET_SELECTION = 'SET_TARGET_SELECTION';\nexport const UNSET_TARGET_SELECTION = 'UNSET_TARGET_SELECTION';\nexport const VIEWER_UPDATE_DOCUMENT = 'VEWER_UPDATE_DOCUMENT';\n\n//REFERENCES\nexport const ADD_REFERENCE = 'ADD_CREATED_REFERENCE';\nexport const REMOVE_REFERENCE = 'REMOVE_REFERENCE';\n\n//MENU\nexport const LOAD_DEFAULT_VIEWER_MENU = 'LOAD_DEFAULT_VIEWER_MENU';\n\n//UI\nexport const GO_TO_ACTIVE = 'GO_TO_ACTIVE';\nexport const OPEN_PANEL = 'OPEN_PANEL';\nexport const PDF_READY = 'PDF_READY';\nexport const TARGET_PDF_READY = 'TARGET_PDF_READY';\nexport const SHOW_TAB = 'SHOW_TAB';\nexport const CLOSE_PANEL = 'CLOSE_PANEL';\nexport const SELECT_TARGET_DOCUMENT = 'SELECT_TARGET_DOCUMENT';\nexport const RESET_REFERENCE_CREATION = 'RESET_REFERENCE_CREATION';\nexport const HIGHLIGHT_REFERENCE = 'HIGHLIGHT_REFERENCE';\nexport const ACTIVE_REFERENCE = 'ACTIVE_REFERENCE';\nexport const DEACTIVATE_REFERENCE = 'DEACTIVATE_REFERENCE';\nexport const SELECT_SNIPPET = 'SELECT_SNIPPET';","function ownKeys(object, enumerableOnly) {var keys = Object.keys(object);if (Object.getOwnPropertySymbols) {var symbols = Object.getOwnPropertySymbols(object);enumerableOnly && (symbols = symbols.filter(function (sym) {return Object.getOwnPropertyDescriptor(object, sym).enumerable;})), keys.push.apply(keys, symbols);}return keys;}function _objectSpread(target) {for (var i = 1; i < arguments.length; i++) {var source = null != arguments[i] ? arguments[i] : {};i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {_defineProperty(target, key, source[key]);}) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));});}return target;}function _defineProperty(obj, key, value) {if (key in obj) {Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });} else {obj[key] = value;}return obj;}import * as types from \"./actionTypes\";\nimport referencesAPI from \"../referencesAPI\";\nimport { notificationActions } from \"../../Notifications\";\nimport { actions } from \"../../BasicReducer\";\nimport { RequestParams } from \"../../utils/RequestParams\";\n\nimport { actions as connectionsActions } from \"../../Connections\";\nimport { reloadRelationships } from \"../../Relationships/actions/actions\";\nimport * as uiActions from \"./uiActions\";\n\nexport function setReferences(references) {\n  return {\n    type: types.SET_REFERENCES,\n    references };\n\n}\n\nexport function loadReferences(sharedId) {\n  return (dispatch) =>\n  referencesAPI.get(new RequestParams({ sharedId })).then((references) => {\n    dispatch(setReferences(references));\n  });\n}\n\nexport function addReference(references, delayActivation) {\n  return (dispatch, getState) => {\n    const tab = 'references';\n\n    dispatch({ type: types.ADD_REFERENCE, reference: references.saves[1] });\n    dispatch({ type: types.ADD_REFERENCE, reference: references.saves[0] });\n\n    dispatch(actions.unset('viewer/targetDoc'));\n    dispatch(actions.unset('viewer/targetDocHTML'));\n    dispatch(actions.unset('viewer/targetDocReferences'));\n    dispatch(reloadRelationships(getState().relationships.list.sharedId));\n\n    dispatch(uiActions.activateReference(references.saves[0], tab, delayActivation));\n  };\n}\n\nexport function saveTargetRangedReference(connection, targetRange, targetFile, onCreate) {\n  return (dispatch, getState) => {\n    if (targetRange.text) {\n      dispatch(actions.unset('viewer/targetDocReferences'));\n      return connectionsActions.saveConnection(_objectSpread(_objectSpread({},\n      connection), {}, { targetRange, targetFile }),\n      onCreate)(\n      dispatch, getState);\n    }\n    return undefined;\n  };\n}\n\nexport function deleteReference(reference) {\n  const { _id } = reference.associatedRelationship;\n  return (dispatch, getState) =>\n  referencesAPI.delete(new RequestParams({ _id })).then(() => {\n    dispatch(reloadRelationships(getState().relationships.list.sharedId));\n    dispatch({ type: types.REMOVE_REFERENCE, reference });\n    dispatch(notificationActions.notify('Connection deleted', 'success'));\n  });\n}","import * as types from \"./actionTypes\";\n\nexport function setSelection(sourceRange, sourceFile) {\n  return {\n    type: types.SET_SELECTION,\n    sourceRange,\n    sourceFile };\n\n}\n\nexport function setTargetSelection(targetRange, targetFile) {\n  return {\n    type: types.SET_TARGET_SELECTION,\n    targetRange,\n    targetFile };\n\n}\n\nexport function unsetSelection() {\n  return {\n    type: types.UNSET_SELECTION };\n\n}\n\nexport function unsetTargetSelection() {\n  return {\n    type: types.UNSET_TARGET_SELECTION };\n\n}","import { actions } from \"../../BasicReducer\";\nimport { events } from \"../../utils\";\nimport { setTargetSelection } from \"./selectionActions\";\nimport Marker from \"../utils/Marker.js\";\nimport scroller from \"../utils/Scroller\";\nimport * as types from \"./actionTypes\";\n\nexport function closePanel() {\n  return {\n    type: types.CLOSE_PANEL };\n\n}\n\nexport function openPanel(panel) {\n  return {\n    type: types.OPEN_PANEL,\n    panel };\n\n}\n\nexport function resetReferenceCreation() {\n  return function (dispatch) {\n    dispatch({ type: types.RESET_REFERENCE_CREATION });\n    dispatch(actions.unset('viewer/targetDoc'));\n    dispatch(actions.unset('viewer/targetDocHTML'));\n    dispatch(actions.unset('viewer/targetDocReferences'));\n  };\n}\n\nexport function selectTargetDocument(id) {\n  return {\n    type: types.SELECT_TARGET_DOCUMENT,\n    id };\n\n}\n\nexport function highlightReference(reference) {\n  return {\n    type: types.HIGHLIGHT_REFERENCE,\n    reference };\n\n}\n\nexport function deactivateReference() {\n  return {\n    type: types.DEACTIVATE_REFERENCE };\n\n}\n\nexport function goToActive(value = true) {\n  return {\n    type: types.GO_TO_ACTIVE,\n    value };\n\n}\n\nexport function highlightSnippet(snippet) {\n  Marker.init('.document-viewer');\n  Marker.unmark();\n  const text = snippet.get('text');\n  if (!text) {\n    return;\n  }\n\n  const textToMatcherRegExp = (_text) =>\n  _text.\n  replace(//g, '...').\n  replace(/[-[\\]{}()*+?.,\\\\^$|#]/g, '\\\\$&').\n  replace(/<[^>]*>/g, '').\n  replace(/\\s+/g, '\\\\s*').\n  replace(/\\n/g, '\\\\s*');\n\n  const rawMatches = text.match(/<b>(.|\\n)*?<\\/b>/g);\n  const matches = rawMatches ? rawMatches.map((m) => m.replace(/<.*?>/g, '')) : [];\n  const highlight = textToMatcherRegExp(text);\n\n  const markSearchTerm = () => {\n    Marker.init('mark');\n    Marker.mark(matches, {\n      className: 'searchTerm',\n      diacritics: false,\n      acrossElements: false,\n      separateWordSearch: true,\n      accuracy: 'exactly' });\n\n  };\n\n  const tryFuzziMark = (chunkLenght = 20) => {\n    if (!chunkLenght) {\n      return;\n    }\n    const startOfText = textToMatcherRegExp(text.substring(0, chunkLenght));\n    const endOfText = textToMatcherRegExp(\n    text.substring(text.length - chunkLenght - 1, text.length - 1));\n\n    const fuzziText = `${startOfText}.{1,200}${endOfText}`;\n    const regexp = new RegExp(fuzziText);\n    Marker.markRegExp(regexp, {\n      separateWordSearch: false,\n      acrossElements: true,\n      done: markSearchTerm,\n      noMatch: tryFuzziMark.bind(this, chunkLenght - 5) });\n\n  };\n\n  const regexp = new RegExp(highlight);\n  Marker.markRegExp(regexp, {\n    separateWordSearch: false,\n    acrossElements: true,\n    done: markSearchTerm,\n    noMatch: tryFuzziMark.bind(this, 20) });\n\n}\n\nexport function scrollToPage(page, duration = 50) {\n  scroller.to(`.document-viewer div#page-${page}`, '.document-viewer', {\n    duration,\n    dividerOffset: 1,\n    offset: 50 });\n\n}\n\nexport function scrollTomark() {\n  scroller.to('.document-viewer mark', '.document-viewer', { duration: 0 });\n}\n\nexport async function scrollToToc(toc) {\n  const { page, top: offset } = toc.selectionRectangles[0];\n  await scroller.to(`.document-viewer div#page-${page}`, '.document-viewer', {\n    duration: 1,\n    dividerOffset: 1,\n    offset,\n    force: true });\n\n}\n\nexport async function scrollTo(connection) {\n  const { page } = connection.reference.selectionRectangles[0];\n  const offset = -30;\n\n  await scroller.to(`.document-viewer div#page-${page}`, '.document-viewer', {\n    duration: 1,\n    dividerOffset: 1 });\n\n\n  await scroller.to(\n  `.document-viewer [data-id=\"${connection._id}\"] .highlight-rectangle`,\n  '.document-viewer',\n  {\n    duration: 50,\n    dividerOffset: 1,\n    offset });\n\n\n\n  await scroller.to(\n  `.metadata-sidepanel .item-${connection._id}`,\n  '.metadata-sidepanel .sidepanel-body',\n  {\n    duration: 50 });\n\n\n}\n\nexport function selectSnippet(page, snippet) {\n  scrollToPage(page);\n  setTimeout(() => {\n    scrollTomark();\n  }, 500);\n  return (dispatch) => {\n    dispatch({ type: types.SELECT_SNIPPET, snippet });\n  };\n}\n\nexport function activateReference(connection, tab, delayActivation = false) {\n  const tabName = tab && !Array.isArray(tab) ? tab : 'references';\n  events.removeAllListeners('referenceRendered');\n\n  return (dispatch) => {\n    dispatch({ type: types.ACTIVE_REFERENCE, reference: connection._id });\n    if (delayActivation) {\n      dispatch(goToActive());\n    }\n    dispatch({ type: types.OPEN_PANEL, panel: 'viewMetadataPanel' });\n    dispatch(actions.set('viewer.sidepanel.tab', tabName));\n    if (!delayActivation) {\n      setTimeout(() => {\n        scrollTo(connection);\n      });\n    }\n  };\n}\n\nexport function scrollToActive(reference, tab, doScroll) {\n  return (dispatch) => {\n    if (doScroll) {\n      dispatch(goToActive(false));\n      dispatch(activateReference(reference, tab));\n    }\n  };\n}\n\nexport function selectReference(connection) {\n  return (dispatch) => {\n    dispatch(activateReference(connection));\n    dispatch(setTargetSelection(connection.reference));\n  };\n}","import api from \"../utils/api\";\n\nexport default {\n  get(requestParams) {\n    return api.get('references/by_document', requestParams).then((response) => response.json);\n  },\n\n  getGroupedByConnection(requestParams) {\n    return api.get('references/group_by_connection', requestParams).then((response) => response.json);\n  },\n\n  getInbound(requestParams) {\n    return api.get('references/by_target/', requestParams).then((response) => response.json.rows);\n  },\n\n  search(requestParams) {\n    return api.get('references/search', requestParams).then((response) => response.json);\n  },\n\n  save(requestParams) {\n    return api.post('references', requestParams).then((response) => response.json);\n  },\n\n  delete(requestParams) {\n    return api.delete('references', requestParams).then((response) => response.json);\n  },\n\n  countByRelationType(requestParams) {\n    return api.\n    get('references/count_by_relationtype', requestParams).\n    then((response) => response.json);\n  } };","import { createSelector } from 'reselect';\nimport { Set as ImmutableSet, List as ImmutableList } from 'immutable';\n\nconst documentViewer = (s) => s.documentViewer;\n\nfunction isRelationshipAReference(doc, reference) {\n  return (\n    reference.get('entity') === doc.get('sharedId') &&\n    typeof reference.getIn(['reference', 'text']) !== 'undefined');\n\n}\n\nconst parseReferences = (doc, refs) => {\n  const textReferences = ImmutableSet(refs.filter((r) => isRelationshipAReference(doc, r)));\n  //select basereferences\n  const hubIdToBaseReference = new Map();\n  textReferences.forEach((tr) => {\n    const hubId = tr.get('hub');\n    if (!hubIdToBaseReference.has(hubId)) {\n      hubIdToBaseReference.set(hubId, tr);\n    }\n  });\n  // collect baseref copies with associatedRelationships\n  const hubIdToRelationships = new Map();\n  Array.from(hubIdToBaseReference.keys()).forEach((hubId) => {\n    hubIdToRelationships.set(hubId, []);\n  });\n  refs.forEach((r) => {\n    const hubId = r.get('hub');\n    const baseRef = hubIdToBaseReference.get(hubId);\n    if (!textReferences.has(r) && baseRef) {\n      hubIdToRelationships.get(hubId).push(baseRef.set('associatedRelationship', r));\n    }\n  });\n  // flatten to immutable list\n  const result = ImmutableList(Array.from(hubIdToRelationships.values())).flatMap((v) => v);\n  return result;\n};\n\nconst selectDoc = createSelector(\n(s) => documentViewer(s).doc,\n(doc) => doc);\n\nconst selectRefs = createSelector(\n(s) => documentViewer(s).references,\n(references) => references);\n\n\nconst selectReferences = createSelector(selectDoc, selectRefs, parseReferences);\n\nconst selectTargetDoc = createSelector(\n(s) => documentViewer(s).targetDoc,\n(doc) => doc);\n\n\nconst selectTargetRefs = createSelector(\n(s) => documentViewer(s).targetDocReferences,\n(references) => references);\n\n\nconst selectTargetReferences = createSelector(selectTargetDoc, selectTargetRefs, parseReferences);\n\nexport { selectDoc, selectReferences, selectTargetDoc, selectTargetReferences, parseReferences };","import { isClient } from \"../../utils\";\n\nlet Mark;\nif (isClient) {\n  Mark = require('mark.js');\n  window.Marker = Mark;\n}\n\nlet marker;\nexport default {\n  init(selector) {\n    marker = new Mark(selector);\n    if (isClient) {\n      window.Marker = marker;\n    }\n  },\n\n  markRegExp(regexp, options) {\n    marker.markRegExp(regexp, options);\n  },\n\n  mark(text, options) {\n    marker.mark(text, options);\n  },\n\n  unmark() {\n    marker.unmark();\n  } };","export default {\n  getElement(selector) {\n    return document.querySelector(selector);\n  },\n\n  isVisible(selector, parentSelector) {\n    const element = this.getElement(selector);\n    const parent = this.getElement(parentSelector);\n\n    if (!parent || !element) {\n      return false;\n    }\n\n    const elementBounds = element.getBoundingClientRect();\n    const parentBounds = parent.getBoundingClientRect();\n    return (\n      elementBounds.top < parentBounds.top && elementBounds.bottom > parentBounds.top ||\n      elementBounds.top > parentBounds.top && elementBounds.top < parentBounds.bottom);\n\n  },\n\n  to(selector, parentSelector, opt = {}) {\n    const options = this.getOptions(opt);\n    if (this.isVisible(selector, parentSelector) && !options.force) {\n      return Promise.resolve();\n    }\n\n    const element = this.getElement(selector);\n    const parent = this.getElement(parentSelector);\n\n    if (!parent || !element) {\n      return Promise.resolve();\n    }\n    const scrollTop = this.getTargetScrollTop(element, parent, options);\n    return this.animateScroll(parent, scrollTop, options);\n  },\n\n  getTargetScrollTop(element, parent, options) {\n    const elementOffsetToParent =\n    element.getBoundingClientRect().top - parent.getBoundingClientRect().top + parent.scrollTop;\n    const parentVisibleScroll = parent.scrollHeight - parent.offsetHeight;\n    const elementPositionInParent = parent.scrollHeight - elementOffsetToParent;\n    return (\n      parentVisibleScroll -\n      elementPositionInParent +\n      options.offset +\n      element.scrollHeight +\n      (parent.offsetHeight - element.offsetHeight) / options.dividerOffset);\n\n  },\n\n  animateScroll(_parent, scrollTop, options) {\n    const parent = _parent;\n    const start = Date.now();\n    return new Promise((resolve) => {\n      const timeout = window.setInterval(() => {\n        const t = (Date.now() - start) / options.duration;\n        const multiplier = this[options.animation](t);\n        parent.scrollTop += multiplier * (scrollTop - parent.scrollTop);\n        if (multiplier >= 0.9) {\n          parent.scrollTop = scrollTop;\n          window.clearInterval(timeout);\n          resolve();\n        }\n      }, 25);\n\n      resolve(timeout);\n    });\n  },\n\n  getOptions(options) {\n    const defaultOptions = {\n      duration: 400,\n      offset: 0,\n      animation: 'easeIn',\n      dividerOffset: 2,\n      force: false };\n\n    return Object.assign(defaultOptions, options);\n  },\n\n  easeIn(t) {\n    return t * t;\n  },\n\n  easeOut(t) {\n    return t * (2 - t);\n  } };","export const sortTextSelections = (a, b) =>\na.selectionRectangles[0].page === b.selectionRectangles[0].page ?\na.selectionRectangles[0].top - b.selectionRectangles[0].top :\na.selectionRectangles[0].page - b.selectionRectangles[0].page;","import React from 'react';\nimport { connect } from 'react-redux';\n\n\n\n\n\n\n\n\n\n\nconst FeatureToggle = ({\n  featureActivated,\n  children }) =>\nfeatureActivated ? /*#__PURE__*/React.createElement(React.Fragment, null, children) : null;\n\nFeatureToggle.defaultProps = {\n  featureActivated: false };\n\n\nfunction mapStateToProps({ settings }, ownProps) {\n  const features = settings.collection.get('features');\n\n  return {\n    featureActivated: features ? Boolean(features.getIn(ownProps.feature.split('.'))) : false };\n\n}\n\nconst container = connect(mapStateToProps)(FeatureToggle);\n\nexport { container as FeatureToggle };","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import React, { Component } from 'react';\nimport \"./scss/loader.scss\";\n\nclass Loader extends Component {\n  render() {\n    return /*#__PURE__*/(\n      _jsx(\"div\", { className: \"cs-loader\" }, void 0, /*#__PURE__*/\n      _jsx(\"div\", { className: \"cs-loader-inner\" }, void 0, /*#__PURE__*/\n      _jsx(\"label\", {}, void 0, \" \\u25CF\"), /*#__PURE__*/\n      _jsx(\"label\", {}, void 0, \" \\u25CF\"), /*#__PURE__*/\n      _jsx(\"label\", {}, void 0, \" \\u25CF\"))));\n\n\n\n  }}\n\n\nexport default Loader;","const APIURL = process.env.API_URL || '/api/';\nexport default { APIURL };\nexport { APIURL };","import { Component, Children } from 'react';\nimport PropTypes from 'prop-types';\n\nimport { isClient } from \"../utils\";\n\nclass CustomProvider extends Component {\n  constructor(props) {\n    super(props);\n    this.data = isClient && window.__reduxData__ ? window.__reduxData__ : props.initialData;\n    this.renderedFromServer = true;\n    this.user = isClient && window.__user__ ? window.__user__ : props.user;\n  }\n\n  getChildContext() {\n    return {\n      getInitialData: this.getInitialData.bind(this),\n      isRenderedFromServer: this.isRenderedFromServer.bind(this),\n      getUser: this.getUser.bind(this),\n      language: this.props.language };\n\n  }\n\n  getUser() {\n    return this.user;\n  }\n\n  isRenderedFromServer() {\n    const { renderedFromServer } = this;\n    this.renderedFromServer = false;\n    return renderedFromServer;\n  }\n\n  getInitialData() {\n    const { data } = this;\n    delete this.data;\n    return data;\n  }\n\n  render() {\n    const { children } = this.props;\n    return Children.only(children);\n  }}\n\n\n\n\n\n\n\n\n\nCustomProvider.childContextTypes = {\n  getInitialData: PropTypes.func,\n  isRenderedFromServer: PropTypes.func,\n  getUser: PropTypes.func,\n  language: PropTypes.string };\n\n\nexport default CustomProvider;","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import * as Cookie from 'tiny-cookie';\nimport PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { isClient } from \"../utils\";\nimport { Translate } from \"../I18N\";\n\nimport { Notification } from \"../Notifications/components/Notification\";\n\nexport class Cookiepopup extends Component {\n  constructor(props) {\n    super(props);\n    this.state = { cookieExists: !isClient || isClient && Boolean(Cookie.get('cookiepolicy')) };\n    this.close = this.close.bind(this);\n  }\n\n  close() {\n    Cookie.set('cookiepolicy', 1, { expires: 365 * 10 });\n    this.setState({ cookieExists: true });\n  }\n\n  render() {\n    const { cookiepolicy } = this.props;\n    const { cookieExists } = this.state;\n    if (!cookiepolicy || cookieExists) {\n      return /*#__PURE__*/_jsx(\"div\", { className: \"alert-wrapper\" });\n    }\n\n    const message = /*#__PURE__*/\n    _jsx(Translate, {}, void 0, \"To bring you a better experience, this site uses cookies.\");\n\n    return /*#__PURE__*/(\n      _jsx(\"div\", { className: \"alert-wrapper\" }, void 0, /*#__PURE__*/\n      _jsx(Notification, { id: \"cookiepolicy\", removeNotification: this.close, message: message })));\n\n\n  }}\n\n\n\n\n\n\nconst mapStateToProps = (state) => ({\n  cookiepolicy: Boolean(state.settings.collection.get('cookiepolicy')) });\n\n\nexport default connect(mapStateToProps)(Cookiepopup);","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import { I18NLink, Translate } from \"../I18N\";\nimport { Icon } from \"../UI\";\nimport React, { useRef, useState, useCallback } from 'react';\nimport { useOnClickOutsideElement } from \"../utils/useOnClickOutsideElementHook\";\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nexport const DropdownMenu = ({ link, position }) => {\n  const [showing, setShowing] = useState(false);\n  const dropdownRef = useRef(null);\n  const onClickOutside = useCallback(() => {\n    setShowing(false);\n  }, []);\n\n  const toggleShowingWithoutPropagation = (e) => {\n    setShowing(!showing);\n    e.stopPropagation();\n  };\n  const toggleShowing = () => {\n    setShowing(!showing);\n  };\n\n  useOnClickOutsideElement(dropdownRef, onClickOutside);\n\n  return /*#__PURE__*/(\n    React.createElement(\"li\", { className: \"menuNav-item\", key: position, ref: dropdownRef }, /*#__PURE__*/\n    _jsx(\"button\", {\n      type: \"button\",\n      className: `btn menuNav-btn menuNav-link dropdown-toggle ${showing ? 'expanded' : ''} `,\n      id: \"navbarDropdownMenuLink\",\n      onClick: toggleShowingWithoutPropagation }, void 0, /*#__PURE__*/\n\n    _jsx(Translate, { context: \"Menu\" }, void 0, link.get('title')), \"\\xA0 \", /*#__PURE__*/\n    _jsx(Icon, { icon: \"caret-down\" })), /*#__PURE__*/\n\n    _jsx(\"ul\", { className: `dropdown-menu ${showing ? 'expanded' : ''} ` }, void 0,\n    link.get('sublinks').map((sublink, index) => {\n      const url = (sublink === null || sublink === void 0 ? void 0 : sublink.get('url')) || '/';\n      if (url.startsWith('http')) {\n        return /*#__PURE__*/(\n          _jsx(\"li\", {}, index, /*#__PURE__*/\n          _jsx(\"a\", {\n            href: url,\n            className: \"btn dropdown-item\",\n            target: \"_blank\",\n            rel: \"noreferrer\",\n            onClick: toggleShowing }, void 0, /*#__PURE__*/\n\n          _jsx(Translate, { context: \"Menu\" }, void 0, sublink === null || sublink === void 0 ? void 0 : sublink.get('title')))));\n\n\n\n      }\n      return /*#__PURE__*/(\n        _jsx(\"li\", {}, index, /*#__PURE__*/\n        _jsx(I18NLink, { to: url, className: \"btn dropdown-item\", onClick: toggleShowing }, void 0, /*#__PURE__*/\n        _jsx(Translate, { context: \"Menu\" }, void 0, sublink === null || sublink === void 0 ? void 0 : sublink.get('title')))));\n\n\n\n    }))));\n\n\n\n};","import { useEffect } from 'react';\n\nexport function useOnClickOutsideElement(\nref,\ncb)\n{\n  useEffect(() => {\n    const onClickHandler = (event) => {\n      if (!ref.current || ref.current.contains(event.target)) {\n        return;\n      }\n\n      cb(event);\n    };\n\n    document.addEventListener('click', onClickHandler);\n    return () => {\n      document.removeEventListener('click', onClickHandler);\n    };\n  }, [ref, cb]);\n}","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\nimport { wrapDispatch } from \"../Multireducer\";\nimport { NeedAuthorization } from \"../Auth\";\nimport { I18NLink, I18NMenu, t } from \"../I18N\";\nimport { processFilters, encodeSearch } from \"../Library/actions/libraryActions\";\nimport { showSemanticSearch } from \"../SemanticSearch/actions/actions\";\nimport { FeatureToggleSemanticSearch } from \"../SemanticSearch/components/FeatureToggleSemanticSearch\";\nimport { Icon } from \"../UI\";\nimport { libraryViewInfo } from \"./libraryViewInfo\";\nimport { DropdownMenu } from \"./DropdownMenu\";\n\nclass Menu extends Component {\n  libraryUrl() {\n    const { location, librarySearch, libraryFilters, defaultLibraryView } = this.props;\n    const { searchTerm } = location.query;\n    const params = processFilters(librarySearch, libraryFilters.toJS());\n    params.searchTerm = searchTerm;\n\n    return `/${libraryViewInfo[defaultLibraryView].url}/${encodeSearch(params)}`;\n  }\n\n  render() {\n    const { links, defaultLibraryView } = this.props;\n    const user = this.props.user.toJS();\n\n    const navLinks = links.map((link, index) => {\n      const type = link.get('type') || 'link';\n\n      if (type === 'link') {\n        const url = link.get('url') || '/';\n        if (url.startsWith('http')) {\n          return /*#__PURE__*/(\n            _jsx(\"li\", { className: \"menuNav-item\" }, link.get('_id'), /*#__PURE__*/\n            _jsx(\"a\", {\n              href: url,\n              className: \"btn menuNav-btn\",\n              activeClassName: \"active-link\",\n              target: \"_blank\",\n              rel: \"noreferrer\" }, void 0,\n\n            t('Menu', link.get('title')))));\n\n\n\n        }\n        return /*#__PURE__*/(\n          _jsx(\"li\", { className: \"menuNav-item\" }, link.get('_id'), /*#__PURE__*/\n          _jsx(I18NLink, { to: url, className: \"btn menuNav-btn\", activeClassName: \"active-link\" }, void 0,\n          t('Menu', link.get('title')))));\n\n\n\n      }\n\n      return /*#__PURE__*/_jsx(DropdownMenu, { link: link, position: index }, index);\n    });\n\n    return /*#__PURE__*/(\n      _jsx(\"ul\", { className: this.props.className }, void 0, /*#__PURE__*/\n      _jsx(\"li\", { className: \"menuItems\", onClick: this.props.onClick }, void 0, /*#__PURE__*/\n      _jsx(\"ul\", { className: \"menuNav-list\" }, void 0, navLinks)), /*#__PURE__*/\n\n      _jsx(I18NMenu, {}), /*#__PURE__*/\n      _jsx(\"li\", { className: \"menuActions mobile-menuActions\", onClick: this.props.onClick }, void 0, /*#__PURE__*/\n      _jsx(\"ul\", { className: \"menuNav-list\" }, void 0, /*#__PURE__*/\n      _jsx(FeatureToggleSemanticSearch, {}, void 0, /*#__PURE__*/\n      _jsx(\"li\", { className: \"menuNav-item semantic-search\" }, void 0, /*#__PURE__*/\n      _jsx(\"button\", {\n        type: \"button\",\n        onClick: this.props.showSemanticSearch,\n        className: \"menuNav-btn btn btn-default\",\n        \"aria-label\": t('System', 'Semantic search', null, false) }, void 0, /*#__PURE__*/\n\n      _jsx(Icon, { icon: \"flask\" }), /*#__PURE__*/\n      _jsx(\"span\", { className: \"tab-link-tooltip\" }, void 0, t('System', 'Semantic search'))))), /*#__PURE__*/\n\n\n\n      _jsx(\"li\", { className: \"menuNav-item\" }, void 0, /*#__PURE__*/\n      _jsx(I18NLink, {\n        to: this.libraryUrl(),\n        className: \"menuNav-btn btn btn-default public-documents\",\n        activeClassName: \"active-link\",\n        \"aria-label\": t('System', 'Library', null, false) }, void 0, /*#__PURE__*/\n\n      _jsx(Icon, { icon: libraryViewInfo[defaultLibraryView].icon }), /*#__PURE__*/\n      _jsx(\"span\", { className: \"tab-link-label\" }, void 0, t('System', 'Library')))), /*#__PURE__*/\n\n\n      _jsx(NeedAuthorization, { roles: ['admin', 'editor', 'collaborator'] }, void 0, /*#__PURE__*/\n      _jsx(\"li\", { className: \"menuNav-item\" }, void 0, /*#__PURE__*/\n      _jsx(I18NLink, {\n        to: \"/settings/account\",\n        className: \"menuNav-btn btn btn-default settings-section\",\n        activeClassName: \"active-link\",\n        \"aria-label\": t('System', 'Settings', null, false) }, void 0, /*#__PURE__*/\n\n      _jsx(Icon, { icon: \"cog\" }), /*#__PURE__*/\n      _jsx(\"span\", { className: \"tab-link-label\" }, void 0, t('System', 'Settings'))))), /*#__PURE__*/\n\n\n\n      _jsx(NeedAuthorization, { roles: ['admin', 'editor', 'collaborator'] }, void 0, /*#__PURE__*/\n      _jsx(\"li\", { className: \"menuNav-item only-mobile\" }, void 0, /*#__PURE__*/\n      _jsx(\"a\", { href: \"/logout\", className: \"menuNav-btn btn btn-default\" }, void 0, /*#__PURE__*/\n      _jsx(Icon, { icon: \"power-off\" }), /*#__PURE__*/\n      _jsx(\"span\", { className: \"tab-link-label\" }, void 0, t('System', 'Logout'))))),\n\n\n\n      (() => {\n        if (!user._id) {\n          return /*#__PURE__*/(\n            _jsx(\"li\", { className: \"menuNav-item\" }, void 0, /*#__PURE__*/\n            _jsx(I18NLink, {\n              to: \"/login\",\n              className: \"menuNav-btn btn btn-default\",\n              \"aria-label\": t('System', 'Sign in', null, false) }, void 0, /*#__PURE__*/\n\n            _jsx(Icon, { icon: \"power-off\" }), /*#__PURE__*/\n            _jsx(\"span\", { className: \"tab-link-label\" }, void 0, t('System', 'Sign in')))));\n\n\n\n        }\n\n        return null;\n      })()))));\n\n\n\n\n  }}\n\n\nMenu.defaultProps = {\n  showSemanticSearch: () => {},\n  defaultLibraryView: 'cards' };\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nfunction mapStateToProps({ user, settings, library, uploads }) {\n  return {\n    user,\n    librarySearch: library.search,\n    libraryFilters: library.filters,\n    uploadsSearch: uploads.search,\n    uploadsFilters: uploads.filters,\n    uploadsSelectedSorting: uploads.selectedSorting,\n    links: settings.collection.get('links'),\n    defaultLibraryView: settings.collection.get('defaultLibraryView') };\n\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return bindActionCreators(\n  {\n    showSemanticSearch },\n\n  wrapDispatch(dispatch, 'library'));\n\n}\n\nexport { Menu, mapStateToProps, mapDispatchToProps };\nexport default connect(mapStateToProps, mapDispatchToProps)(Menu);","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { Helmet } from 'react-helmet';\nimport { I18NLink } from \"../I18N\";\n\nexport class SiteName extends Component {\n  render() {\n    return /*#__PURE__*/(\n      _jsx(\"div\", {}, void 0, /*#__PURE__*/\n      _jsx(Helmet, {\n        titleTemplate: `%s  ${this.props.siteName}`,\n        meta: [{ 'char-set': 'utf-8' }, { name: 'description', content: 'Uwazi docs' }] }), /*#__PURE__*/\n\n      _jsx(I18NLink, { to: \"/\" }, void 0, this.props.siteName)));\n\n\n  }}\n\n\n\n\n\n\nexport function mapStateToProps(state) {\n  return { siteName: state.settings.collection.get('site_name') };\n}\n\nexport default connect(mapStateToProps)(SiteName);","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport { Translate } from \"../I18N\";\n\nimport Modal from \"../Layout/Modal\";\nimport Loader from \"../components/Elements/Loader\";\n\nclass Confirm extends Component {\n  static getDerivedStateFromProps(newProps, state) {\n    if (newProps.accept !== state.accept) {\n      return { isOpen: true, accept: newProps.accept };\n    }\n\n    return null;\n  }\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpen: props.isOpen,\n      isLoading: props.isLoading,\n      confirmInputValue: '' };\n\n\n    this.accept = this.accept.bind(this);\n    this.cancel = this.cancel.bind(this);\n    this.close = this.close.bind(this);\n    this.handleInput = this.handleInput.bind(this);\n  }\n\n  close() {\n    this.setState({ isOpen: false, confirmInputValue: '', isLoading: false });\n  }\n\n  accept() {\n    if (this.props.accept) {\n      const actionResponse = this.props.accept();\n      if (actionResponse && actionResponse instanceof Promise) {\n        this.setState({ isLoading: true });\n        actionResponse.then(this.close);\n        actionResponse.catch(this.close);\n        return;\n      }\n    }\n    this.close();\n  }\n\n  cancel() {\n    if (this.props.cancel) {\n      this.props.cancel();\n    }\n    this.close();\n  }\n\n  handleInput(e) {\n    this.setState({ confirmInputValue: e.target.value });\n  }\n\n  renderExtraConfirm() {\n    return /*#__PURE__*/(\n      React.createElement(React.Fragment, null, /*#__PURE__*/\n      _jsx(\"p\", {}, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"If you want to continue, please type\"), \" '\",\n      this.props.extraConfirmWord, \"'\", ' '), /*#__PURE__*/\n\n      _jsx(\"input\", { type: \"text\", onChange: this.handleInput, value: this.state.confirmInputValue })));\n\n\n  }\n\n  render() {\n    const { type, acceptLabel, zIndex, message, title, messageKey } = this.props;\n    return /*#__PURE__*/(\n      _jsx(Modal, { isOpen: this.state.isOpen, type: type, zIndex: zIndex }, void 0, /*#__PURE__*/\n      _jsx(Modal.Body, {}, void 0, /*#__PURE__*/\n      _jsx(\"h4\", {}, void 0,\n      typeof title !== 'string' && title,\n      typeof title === 'string' && /*#__PURE__*/_jsx(Translate, {}, void 0, title)), /*#__PURE__*/\n\n      _jsx(\"p\", {}, void 0,\n      typeof message !== 'string' && message,\n      typeof message === 'string' && /*#__PURE__*/\n      _jsx(Translate, { translationKey: messageKey }, void 0, message)),\n\n\n      this.props.extraConfirm && !this.state.isLoading && this.renderExtraConfirm(),\n      this.state.isLoading && /*#__PURE__*/_jsx(Loader, {})),\n\n\n      !this.state.isLoading && /*#__PURE__*/\n      _jsx(Modal.Footer, {}, void 0,\n      !this.props.noCancel && /*#__PURE__*/\n      _jsx(\"button\", { type: \"button\", className: \"btn btn-default cancel-button\", onClick: this.cancel }, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Cancel\")), /*#__PURE__*/\n\n\n      _jsx(\"button\", {\n        type: \"button\",\n        disabled:\n        this.props.extraConfirm &&\n        this.state.confirmInputValue !== this.props.extraConfirmWord,\n\n        className: `btn confirm-button btn-${type}`,\n        onClick: this.accept }, void 0, /*#__PURE__*/\n\n      _jsx(Translate, {}, void 0, acceptLabel)))));\n\n\n\n\n\n  }}\n\n\nConfirm.defaultProps = {\n  isLoading: false,\n  extraConfirm: false,\n  isOpen: false,\n  noCancel: false,\n  type: 'danger',\n  title: 'Confirm action',\n  messageKey: '',\n  message: 'Are you sure you want to continue?',\n  extraConfirmWord: 'CONFIRM',\n  acceptLabel: 'Accept',\n  zIndex: 99 };\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nexport { Confirm };\nexport default Confirm;","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport React, { Component } from 'react';\n\nimport { isClient } from \"../utils\";\n\nexport function trackPage() {\n  if (isClient && window.gtag) {\n    window.gtag('send', 'pageview');\n  }\n\n  if (isClient && window._paq) {\n    window._paq.push(['setCustomUrl', window.location.href]);\n    window._paq.push(['deleteCustomVariables', 'page']);\n    window._paq.push(['setGenerationTimeMs', 0]);\n    window._paq.push(['trackPageView']);\n  }\n}\n\nexport class GoogleAnalytics extends Component {\n  constructor(props) {\n    super(props);\n    if (!props.analyticsTrackingId || !isClient) {\n      return;\n    }\n    /*eslint-disable */\n    window.dataLayer = window.dataLayer || [];\n    window.gtag = function () {\n      window.dataLayer.push(arguments);\n    };\n    window.gtag('js', new Date());\n    window.gtag('config', props.analyticsTrackingId);\n    trackPage();\n    /*eslint-enable */\n  }\n\n  render() {\n    if (!this.props.analyticsTrackingId) {\n      return false;\n    }\n    return /*#__PURE__*/(\n      _jsx(\"script\", {\n        async: true,\n        src: `https://www.googletagmanager.com/gtag/js?id=${this.props.analyticsTrackingId}` }));\n\n\n  }}\n\n\nGoogleAnalytics.defaultProps = {\n  analyticsTrackingId: '' };\n\n\n\n\n\n\nexport function mapStateToProps({ settings }) {\n  return {\n    analyticsTrackingId: settings.collection.get('analyticsTrackingId') };\n\n}\n\nexport default connect(mapStateToProps)(GoogleAnalytics);","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport React, { Component } from 'react';\n\nexport class Matomo extends Component {\n  render() {\n    if (!this.props.id && !this.props.url) {\n      return false;\n    }\n\n    const url = this.props.url.replace(/\\/?$/, '/');\n\n    return /*#__PURE__*/(\n      _jsx(\"script\", {\n        type: \"text/javascript\",\n        dangerouslySetInnerHTML: {\n          __html: `\n              var _paq = _paq || [];\n              _paq.push(['trackPageView']);\n              _paq.push(['enableLinkTracking']);\n              (function() {\n                var u=\"${url}\";\n                _paq.push(['setTrackerUrl', u+'piwik.php']);\n                _paq.push(['setSiteId', '${this.props.id}']);\n                var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];\n                g.type='text/javascript'; g.async=true; g.defer=true; g.src=u+'piwik.js'; s.parentNode.insertBefore(g,s);\n              })();\n        ` } }));\n\n\n\n  }}\n\n\nMatomo.defaultProps = {\n  id: '',\n  url: '' };\n\n\n\n\n\n\n\nexport function mapStateToProps({ settings }) {\n  try {\n    const { id, url } = JSON.parse(settings.collection.get('matomoConfig'));\n    return { id, url };\n  } catch (e) {\n    return {};\n  }\n}\n\nexport default connect(mapStateToProps)(Matomo);","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import PropTypes from 'prop-types';\nimport React, { Component } from 'react';\n\nimport 'bootstrap/dist/css/bootstrap.css';\nimport 'react-widgets/lib/scss/react-widgets.scss';\nimport 'nprogress/nprogress.css';\nimport 'flag-icon-css/sass/flag-icon.scss';\nimport Notifications from \"../Notifications\";\nimport Cookiepopup from \"./Cookiepopup\";\nimport { TranslateForm, t } from \"../I18N\";\n\nimport { Icon } from \"../UI\";\n\nimport \"./scss/styles.scss\";\n\nimport Menu from \"./Menu\";\nimport SiteName from \"./SiteName\";\nimport Confirm from \"./Confirm\";\nimport GoogleAnalytics from \"./GoogleAnalytics\";\nimport Matomo from \"./Matomo\";\n\nclass App extends Component {\n  constructor(props, context) {\n    super(props, context);\n    this.state = { showmenu: false, confirmOptions: {} };\n\n    this.toggleMenu = this.toggleMenu.bind(this);\n  }\n\n  getChildContext() {\n    return {\n      confirm: this.confirm.bind(this) };\n\n  }\n\n  toggleMenu() {\n    this.setState({ showmenu: !this.state.showmenu });\n  }\n\n  confirm(options) {\n    this.setState({ confirmOptions: options });\n  }\n\n  renderTools() {\n    return React.Children.map(this.props.children, (child) => {\n      //condition not tested\n      if (child.type.renderTools) {\n        return child.type.renderTools();\n      }\n\n      return undefined;\n    });\n  }\n\n  render() {\n    const { routes, location, params } = this.props;\n    let MenuButtonIcon = 'bars';\n    let navClass = 'menuNav';\n\n    if (this.state.showmenu) {\n      MenuButtonIcon = 'times';\n      navClass += ' is-active';\n    }\n\n    const customHomePageId = routes.reduce((memo, route) => {\n      if (Object.keys(route).includes('customHomePageId')) {\n        return route.customHomePageId;\n      }\n      return memo;\n    }, '');\n\n    const pageId = location.pathname.match('page/') && params.sharedId ? params.sharedId : '';\n\n    const appClassName = customHomePageId || pageId ? `pageId_${customHomePageId || pageId}` : '';\n\n    return /*#__PURE__*/(\n      _jsx(\"div\", { id: \"app\", className: appClassName }, void 0, /*#__PURE__*/\n      _jsx(Notifications, {}), /*#__PURE__*/\n      _jsx(Cookiepopup, {}), /*#__PURE__*/\n      _jsx(\"div\", { className: \"content\" }, void 0, /*#__PURE__*/\n      _jsx(\"nav\", {}, void 0, /*#__PURE__*/\n      _jsx(\"h1\", {}, void 0, /*#__PURE__*/\n      _jsx(SiteName, {}))), /*#__PURE__*/\n\n\n      _jsx(\"header\", {}, void 0, /*#__PURE__*/\n      _jsx(\"button\", {\n        className: \"menu-button\",\n        onClick: this.toggleMenu,\n        \"aria-label\": t('System', 'Menu', null, false) }, void 0, /*#__PURE__*/\n\n      _jsx(Icon, { icon: MenuButtonIcon })), /*#__PURE__*/\n\n      _jsx(\"h1\", { className: \"logotype\" }, void 0, /*#__PURE__*/\n      _jsx(SiteName, {})),\n\n      this.renderTools(), /*#__PURE__*/\n      _jsx(Menu, { location: location, onClick: this.toggleMenu, className: navClass })), /*#__PURE__*/\n\n      _jsx(\"div\", { className: \"app-content container-fluid\" }, void 0, /*#__PURE__*/\n      React.createElement(Confirm, this.state.confirmOptions), /*#__PURE__*/\n      _jsx(TranslateForm, {}),\n      this.props.children, /*#__PURE__*/\n      _jsx(GoogleAnalytics, {}), /*#__PURE__*/\n      _jsx(Matomo, {})))));\n\n\n\n\n  }}\n\n\nApp.defaultProps = {\n  params: {},\n  routes: [] };\n\n\n\n\n\n\n\n\n\n\nApp.childContextTypes = {\n  confirm: PropTypes.func,\n  locale: PropTypes.string };\n\n\nApp.contextTypes = {\n  getUser: PropTypes.func,\n  router: PropTypes.object };\n\n\nexport default App;","function ownKeys(object, enumerableOnly) {var keys = Object.keys(object);if (Object.getOwnPropertySymbols) {var symbols = Object.getOwnPropertySymbols(object);enumerableOnly && (symbols = symbols.filter(function (sym) {return Object.getOwnPropertyDescriptor(object, sym).enumerable;})), keys.push.apply(keys, symbols);}return keys;}function _objectSpread(target) {for (var i = 1; i < arguments.length; i++) {var source = null != arguments[i] ? arguments[i] : {};i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {_defineProperty(target, key, source[key]);}) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));});}return target;}function _defineProperty(obj, key, value) {if (key in obj) {Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });} else {obj[key] = value;}return obj;}export default {\n  parseNested(object) {\n    if (typeof object !== 'object') {\n      return object;\n    }\n    const result = _objectSpread({}, object);\n    Object.keys(object).forEach((index) => {\n      try {\n        result[index] = JSON.parse(object[index]);\n      } catch (e) {\n        result[index] = object[index];\n      }\n    });\n    return result;\n  } };","const _excluded = [\"lang\"];var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}function ownKeys(object, enumerableOnly) {var keys = Object.keys(object);if (Object.getOwnPropertySymbols) {var symbols = Object.getOwnPropertySymbols(object);enumerableOnly && (symbols = symbols.filter(function (sym) {return Object.getOwnPropertyDescriptor(object, sym).enumerable;})), keys.push.apply(keys, symbols);}return keys;}function _objectSpread(target) {for (var i = 1; i < arguments.length; i++) {var source = null != arguments[i] ? arguments[i] : {};i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {_defineProperty(target, key, source[key]);}) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));});}return target;}function _defineProperty(obj, key, value) {if (key in obj) {Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });} else {obj[key] = value;}return obj;}function _objectWithoutProperties(source, excluded) {if (source == null) return {};var target = _objectWithoutPropertiesLoose(source, excluded);var key, i;if (Object.getOwnPropertySymbols) {var sourceSymbolKeys = Object.getOwnPropertySymbols(source);for (i = 0; i < sourceSymbolKeys.length; i++) {key = sourceSymbolKeys[i];if (excluded.indexOf(key) >= 0) continue;if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;target[key] = source[key];}}return target;}function _objectWithoutPropertiesLoose(source, excluded) {if (source == null) return {};var target = {};var sourceKeys = Object.keys(source);var key, i;for (i = 0; i < sourceKeys.length; i++) {key = sourceKeys[i];if (excluded.indexOf(key) >= 0) continue;target[key] = source[key];}return target;} /** @format */\n\nimport { I18NUtils } from \"../I18N\";\nimport { isClient } from \"../utils\";\nimport api from \"../utils/api\";\nimport { RequestParams } from \"../utils/RequestParams\";\nimport moment from 'moment';\nimport PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport JSONUtils from \"../../shared/JSONUtils\";\n\nconst getLocale = ({ store }) => store.getState().locale;\n\nconst setLocale = (locale) => {\n  moment.locale(locale);\n  api.locale(locale);\n  I18NUtils.saveLocale(locale);\n};\n\nclass RouteHandler extends Component {\n  static async requestState(_requestParams, _state) {\n    return new Promise((resolve, _reject) => {\n      resolve([]);\n    });\n  }\n\n  emptyState() {} //eslint-disable-line\n\n  static renderTools() {}\n\n  //eslint-disable-next-line\n  isRenderedFromServer() {\n    const result = RouteHandler.renderedFromServer;\n    RouteHandler.renderedFromServer = false;\n    return result;\n  }\n\n  constructor(props, context) {\n    super(props, context);\n    setLocale(getLocale(context));\n    if (!this.isRenderedFromServer() && isClient) {\n      this.getClientState(this.props);\n    }\n  }\n\n  componentDidUpdate(prevProps) {\n    if (this.urlHasChanged(prevProps)) {\n      this.emptyState();\n      this.getClientState(this.props);\n    }\n  }\n\n  async getClientState(props) {\n    let query;\n    if (props.location) {\n      query = JSONUtils.parseNested(props.location.query);\n    }\n\n    const { store = { getState: () => {} } } = this.context;\n\n    const headers = {};\n    const _props$params = props.params,{ lang } = _props$params,params = _objectWithoutProperties(_props$params, _excluded);\n    const requestParams = new RequestParams(_objectSpread(_objectSpread({}, query), params), headers);\n    const actions = await this.constructor.requestState(requestParams, store.getState());\n\n    actions.forEach((action) => {\n      store.dispatch(action);\n    });\n  }\n\n  urlHasChanged(prevProps) {\n    const { params: nextParams = {}, routes: nextRoutes = [] } = prevProps;\n    const { params, routes } = this.props;\n\n    const sameParams = Object.keys(nextParams).reduce(\n    (memo, key) => memo && prevProps.params[key] === params[key],\n    true);\n\n    const sameAmountOfparams = Object.keys(nextParams).length === Object.keys(params).length;\n    const currentPath = routes.reduce((path, r) => path + r.path, '');\n    const newPath = nextRoutes.reduce((path, r) => path + r.path, '');\n    const samePath = currentPath === newPath;\n    return !sameParams || !sameAmountOfparams || !samePath;\n  }\n\n  render() {\n    return /*#__PURE__*/_jsx(\"div\", {}, void 0, false);\n  }}\n\n\nRouteHandler.renderedFromServer = true;\n\nRouteHandler.defaultProps = {\n  params: {} };\n\n\nRouteHandler.contextTypes = {\n  getInitialData: PropTypes.func,\n  isRenderedFromServer: PropTypes.func,\n  router: PropTypes.object,\n  store: PropTypes.object };\n\n\n\n\n\n\n\n\nexport default RouteHandler;","import { actions } from \"../../BasicReducer\";\nimport { RequestParams } from \"../../utils/RequestParams\";\nimport api from \"../../utils/api\";\n\nconst activitylogSearchBase = (query, append = false) => {\n  const method = append ? 'concat' : 'set';\n\n  return (dispatch) =>\n  api.get('activitylog', new RequestParams(query)).then((response) => {\n    dispatch(actions.set('activitylog/search', response.json));\n    dispatch(actions[method]('activitylog/list', response.json.rows));\n  });\n};\n\nexport function activitylogSearch(query) {\n  return activitylogSearchBase(query);\n}\n\nexport function activitylogSearchMore(query) {\n  return activitylogSearchBase(query, true);\n}","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}function ownKeys(object, enumerableOnly) {var keys = Object.keys(object);if (Object.getOwnPropertySymbols) {var symbols = Object.getOwnPropertySymbols(object);enumerableOnly && (symbols = symbols.filter(function (sym) {return Object.getOwnPropertyDescriptor(object, sym).enumerable;})), keys.push.apply(keys, symbols);}return keys;}function _objectSpread(target) {for (var i = 1; i < arguments.length; i++) {var source = null != arguments[i] ? arguments[i] : {};i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {_defineProperty(target, key, source[key]);}) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));});}return target;}function _defineProperty(obj, key, value) {if (key in obj) {Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });} else {obj[key] = value;}return obj;}import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport { LocalForm, Control } from 'react-redux-form';\nimport { bindActionCreators } from 'redux';\nimport { Map } from 'immutable';\nimport { DateRange } from \"../../ReactReduxForms\";\nimport { t, Translate } from \"../../I18N\";\nimport * as actions from \"../actions/activitylogActions\";\n\nclass ActivitylogForm extends Component {\n  constructor(props) {\n    super(props);\n    this.state = { query: {} };\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.loadMore = this.loadMore.bind(this);\n  }\n\n  handleSubmit(values) {\n    const { submit } = this.props;\n    const query = Object.keys(values).reduce((_query, key) => {\n      if (values[key]) {\n        return Object.assign(_query, { [key]: values[key] });\n      }\n      return _query;\n    }, {});\n\n    this.setState({ query });\n    submit(query);\n  }\n\n  loadMore() {\n    const { searchResults, searchMore } = this.props;\n\n    if (searchResults.get('remainingRows')) {\n      const { query } = this.state;\n      const lastResultTime = parseInt(searchResults.getIn(['rows', -1, 'time']), 10);\n      searchMore(_objectSpread(_objectSpread({}, query), {}, { before: lastResultTime }));\n    }\n  }\n\n  render() {\n    const { children, searchResults } = this.props;\n\n    return /*#__PURE__*/(\n      _jsx(\"div\", {}, void 0, /*#__PURE__*/\n      _jsx(\"div\", { className: \"activity-log-form\" }, void 0, /*#__PURE__*/\n      _jsx(LocalForm, { onSubmit: this.handleSubmit }, void 0, /*#__PURE__*/\n      _jsx(\"div\", { className: \"form-group col-sm-12 col-md-6 col-lg-2\" }, void 0, /*#__PURE__*/\n      _jsx(\"label\", { htmlFor: \"find\" }, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"User\")), /*#__PURE__*/\n\n      _jsx(Control.text, { className: \"form-control\", model: \".username\", id: \"username\" })), /*#__PURE__*/\n\n      _jsx(\"div\", { className: \"form-group col-sm-12 col-md-6 col-lg-4\" }, void 0, /*#__PURE__*/\n      _jsx(\"label\", { htmlFor: \"find\" }, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Find\")), /*#__PURE__*/\n\n      _jsx(Control.text, {\n        className: \"form-control\",\n        model: \".find\",\n        id: \"find\",\n        placeholder: \"by ids, methods, keywords, etc.\" })), /*#__PURE__*/\n\n\n      _jsx(\"div\", { className: \"form-group col-sm-12 col-lg-6\" }, void 0, /*#__PURE__*/\n      _jsx(\"label\", { htmlFor: \"time\" }, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Time\")), /*#__PURE__*/\n\n      _jsx(DateRange, {\n        className: \"form-control\",\n        model: \".time\",\n        id: \"time\",\n        format: \"yyyy-MM-dd\",\n        useTimezone: true })), /*#__PURE__*/\n\n\n      _jsx(\"div\", { className: \"form-group col-sm-12\" }, void 0, /*#__PURE__*/\n      _jsx(\"button\", { type: \"submit\", className: \"btn btn-success\" }, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Search\"))))),\n\n\n\n\n\n      children, /*#__PURE__*/\n\n      _jsx(\"div\", { className: \"text-center\" }, void 0, /*#__PURE__*/\n      _jsx(\"button\", {\n        type: \"button\",\n        className: `btn btn-default btn-load-more ${\n        searchResults.get('remainingRows') ? '' : 'disabled'\n        }`,\n        onClick: () => {\n          this.loadMore();\n        } }, void 0,\n\n      t('System', 'x more')))));\n\n\n\n\n  }}\n\n\nActivitylogForm.defaultProps = {\n  children: null };\n\n\n\n\n\n\n\n\n\nexport const mapStateToProps = ({ activitylog }) => ({ searchResults: activitylog.search });\n\nexport const mapDispatchToProps = (dispatch) =>\nbindActionCreators(\n{ submit: actions.activitylogSearch, searchMore: actions.activitylogSearchMore },\ndispatch);\n\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ActivitylogForm);","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Map } from 'immutable';\nimport { Translate } from \"../../I18N\";\n\nconst DescriptionWrapper = (props) => {\n  const { entry, toggleExpand, expanded, children } = props;\n\n  return /*#__PURE__*/(\n    _jsx(\"div\", {}, void 0, /*#__PURE__*/\n    _jsx(\"div\", {}, void 0, /*#__PURE__*/\n    _jsx(\"span\", {\n      className: \"expand\",\n      onClick: () => {\n        toggleExpand();\n      } }, void 0,\n\n    children)),\n\n\n    expanded && /*#__PURE__*/\n    _jsx(\"div\", { className: \"expanded-content\" }, void 0, /*#__PURE__*/\n    _jsx(\"table\", {}, void 0, /*#__PURE__*/\n    _jsx(\"tbody\", {}, void 0,\n    entry.getIn(['semantic', 'beautified']) && /*#__PURE__*/\n    _jsx(\"tr\", {}, void 0, /*#__PURE__*/\n    _jsx(\"td\", {}, void 0, /*#__PURE__*/\n    _jsx(Translate, {}, void 0, \"Route\")), /*#__PURE__*/\n\n    _jsx(\"td\", {}, void 0,\n    entry.get('method'), \" : \", entry.get('url'))), /*#__PURE__*/\n\n\n\n    _jsx(\"tr\", {}, void 0, /*#__PURE__*/\n    _jsx(\"td\", {}, void 0, /*#__PURE__*/\n    _jsx(Translate, {}, void 0, \"Query\")), /*#__PURE__*/\n\n    _jsx(\"td\", { className: \"tdquery\" }, void 0, entry.get('query'))), /*#__PURE__*/\n\n    _jsx(\"tr\", {}, void 0, /*#__PURE__*/\n    _jsx(\"td\", {}, void 0, /*#__PURE__*/\n    _jsx(Translate, {}, void 0, \"Body\")), /*#__PURE__*/\n\n    _jsx(\"td\", { className: \"tdbody\" }, void 0, entry.get('body'))),\n\n    entry.getIn(['semantic', 'errorStack']) && /*#__PURE__*/\n    _jsx(\"tr\", {}, void 0, /*#__PURE__*/\n    _jsx(\"td\", {}, void 0, /*#__PURE__*/\n    _jsx(Translate, {}, void 0, \"Error\")), /*#__PURE__*/\n\n    _jsx(\"td\", { className: \"tdbody\" }, void 0, entry.getIn(['semantic', 'errorStack']))))))));\n\n\n\n\n\n\n\n\n};\n\nDescriptionWrapper.defaultProps = {\n  children: /*#__PURE__*/_jsx(\"span\", {}),\n  expanded: false };\n\n\n\n\n\n\n\n\n\nexport default DescriptionWrapper;","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { Map } from 'immutable';\n\nimport { Icon } from \"../../UI\";\nimport DescriptionWrapper from \"./DescriptionWrapper\";\n\nconst label = (method) => {\n  switch (method) {\n    case 'CREATE':\n      return /*#__PURE__*/_jsx(\"span\", { className: \"badge btn-color-9\" }, void 0, method);\n    case 'UPDATE':\n      return /*#__PURE__*/_jsx(\"span\", { className: \"badge btn-color-6\" }, void 0, method);\n    case 'DELETE':\n      return /*#__PURE__*/_jsx(\"span\", { className: \"badge btn-color-2\" }, void 0, method);\n    case 'RAW':\n      return /*#__PURE__*/_jsx(\"span\", { className: \"badge btn-color-17\" }, void 0, method);\n    case 'MIGRATE':\n      return /*#__PURE__*/_jsx(\"span\", { className: \"badge btn-color-12\" }, void 0, method);\n    case 'WARNING':\n      return /*#__PURE__*/(\n        _jsx(\"span\", { className: \"badge btn-color-13\" }, void 0,\n        method, \" \", /*#__PURE__*/_jsx(Icon, { icon: \"exclamation-triangle\" })));\n\n\n    default:\n      return /*#__PURE__*/_jsx(\"span\", { className: \"badge btn-color-17\" }, void 0, method);}\n\n};\n\nclass ActivitylogRow extends Component {\n  constructor(props) {\n    super(props);\n    this.state = { expanded: false };\n    this.toggleExpand = this.toggleExpand.bind(this);\n  }\n\n  toggleExpand() {\n    const { expanded } = this.state;\n    this.setState({ expanded: !expanded });\n  }\n\n  render() {\n    const { entry } = this.props;\n    const { expanded } = this.state;\n\n    const time = `${moment(entry.get('time')).format('L')} ${moment(entry.get('time')).\n    locale('en').\n    format('LTS')}`;\n    const semanticData = entry.get('semantic').toJS();\n    const description = /*#__PURE__*/\n    _jsx(DescriptionWrapper, { entry: entry, toggleExpand: this.toggleExpand, expanded: expanded }, void 0, /*#__PURE__*/\n    _jsx(\"span\", {}, void 0,\n    semanticData.description && /*#__PURE__*/\n    _jsx(\"span\", { className: \"activitylog-prefix\" }, void 0, semanticData.description),\n\n    semanticData.name && /*#__PURE__*/_jsx(\"span\", { className: \"activitylog-name\" }, void 0, \" \", semanticData.name),\n    semanticData.extra && /*#__PURE__*/_jsx(\"span\", { className: \"activitylog-extra\" }, void 0, \" \", semanticData.extra)));\n\n\n\n\n    return /*#__PURE__*/(\n      _jsx(\"tr\", {\n        className: semanticData.action === 'RAW' ? 'activitylog-raw' : 'activitylog-beautified' },\n      entry.get('_id'), /*#__PURE__*/\n\n      _jsx(\"td\", {}, void 0, label(semanticData.action)), /*#__PURE__*/\n      _jsx(\"td\", { className: !entry.get('username') ? 'color-0' : '' }, void 0,\n      entry.get('username') || 'anonymous'), /*#__PURE__*/\n\n      _jsx(\"td\", {}, void 0, description), /*#__PURE__*/\n      _jsx(\"td\", { className: \"activitylog-time\" }, void 0, time)));\n\n\n  }}\n\n\nActivitylogRow.defaultProps = {\n  entry: Map() };\n\n\n\n\n\n\nexport default ActivitylogRow;","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport { List } from 'immutable';\nimport { Translate } from \"../../I18N\";\nimport ActivitylogRow from \"./ActivitylogRow\";\n\nclass ActivityLogList extends Component {\n  render() {\n    const { list } = this.props;\n    return /*#__PURE__*/(\n      _jsx(\"div\", { className: \"activity-log-list\" }, void 0, /*#__PURE__*/\n      _jsx(\"table\", { className: \"table\" }, void 0, /*#__PURE__*/\n      _jsx(\"thead\", {}, void 0, /*#__PURE__*/\n      _jsx(\"tr\", {}, void 0, /*#__PURE__*/\n      _jsx(\"th\", {}, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Action\")), /*#__PURE__*/\n\n      _jsx(\"th\", {}, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"User\")), /*#__PURE__*/\n\n      _jsx(\"th\", { className: \"activitylog-description\" }, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Description\")), /*#__PURE__*/\n\n      _jsx(\"th\", { className: \"activitylog-time\" }, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Time\")))), /*#__PURE__*/\n\n\n\n      _jsx(\"tbody\", {}, void 0,\n      list.map((entry) => /*#__PURE__*/\n      _jsx(ActivitylogRow, { entry: entry }, entry.get('_id')))))));\n\n\n\n\n\n  }}\n\n\n\n\n\n\nexport function mapStateToProps({ activitylog }) {\n  return { list: activitylog.list };\n}\n\nexport default connect(mapStateToProps, null)(ActivityLogList);","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import React from 'react';\n\nimport RouteHandler from \"../App/RouteHandler\";\nimport { actions } from \"../BasicReducer\";\nimport api from \"../utils/api\";\n\nimport ActivitylogForm from \"./components/ActivitylogForm\";\nimport ActivitylogList from \"./components/ActivitylogList\";\n\nexport class ActivityLog extends RouteHandler {\n  static async requestState(requestParams) {\n    const logs = await api.get('activitylog', requestParams);\n    return [\n    actions.set('activitylog/search', logs.json),\n    actions.set('activitylog/list', logs.json.rows)];\n\n  }\n\n  render() {\n    return /*#__PURE__*/(\n      _jsx(\"div\", { className: \"settings-content without-footer\" }, void 0, /*#__PURE__*/\n      _jsx(\"div\", { className: \"activity-log\" }, void 0, /*#__PURE__*/\n      _jsx(ActivitylogForm, {}, void 0, /*#__PURE__*/\n      _jsx(ActivitylogList, {})))));\n\n\n\n\n  }}\n\n\nexport default ActivityLog;","/** @format */\n\nimport api from \"../utils/api\";\n\n\n\n\n\n\n\n\n\n\n\nexport default {\n  async setSecret(requestParams) {\n    const response = await api.post('auth2fa-secret', requestParams);\n    return response.json;\n  },\n\n  async enable(requestParams) {\n    const response = await api.post('auth2fa-enable', requestParams);\n    return response.json;\n  },\n\n  async reset2fa(requestParams) {\n    const response = await api.post('auth2fa-reset', requestParams);\n    return response.json;\n  } };","function ownKeys(object, enumerableOnly) {var keys = Object.keys(object);if (Object.getOwnPropertySymbols) {var symbols = Object.getOwnPropertySymbols(object);enumerableOnly && (symbols = symbols.filter(function (sym) {return Object.getOwnPropertyDescriptor(object, sym).enumerable;})), keys.push.apply(keys, symbols);}return keys;}function _objectSpread(target) {for (var i = 1; i < arguments.length; i++) {var source = null != arguments[i] ? arguments[i] : {};i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {_defineProperty(target, key, source[key]);}) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));});}return target;}function _defineProperty(obj, key, value) {if (key in obj) {Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });} else {obj[key] = value;}return obj;}\n\nimport { actions } from \"../../BasicReducer\";\nimport { notificationActions } from \"../../Notifications\";\nimport { RequestParams } from \"../../utils/RequestParams\";\n\n\nimport Auth2faAPI from \"../Auth2faAPI\";\n\n\n\n\n\n\n\nexport function enable2fa() {\n  return actions.setIn('auth/user', 'using2fa', true);\n}\n\nexport function reset2fa(user) {\n  return async (dispatch) => {\n    await Auth2faAPI.reset2fa(new RequestParams({ _id: user._id }));\n    dispatch(actions.update('users', _objectSpread(_objectSpread({}, user), {}, { using2fa: false })));\n    dispatch(notificationActions.notify('Deleted successfully.', 'success'));\n  };\n}","function _defineProperty(obj, key, value) {if (key in obj) {Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });} else {obj[key] = value;}return obj;}var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import React, { Component } from 'react';\nimport { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\nimport { LocalForm, Control } from 'react-redux-form';\nimport loadable from '@loadable/component';\n\nimport { Icon } from \"../UI\";\nimport { RequestParams } from \"../utils/RequestParams\";\nimport { t, I18NLink, Translate } from \"../I18N\";\nimport { enable2fa as enable2faAction } from \"./actions/actions\";\nimport Auth2faAPI from \"./Auth2faAPI\";\n\nconst QRCodeSVG = loadable(\nasync () => import( /* webpackChunkName: \"qrcode.react\" */'qrcode.react'),\n{\n  resolveComponent: (components) => components.QRCodeSVG });\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst goToAccount = (type, label) => /*#__PURE__*/\n_jsx(I18NLink, { to: \"/settings/account\", className: `btn btn-${type}` }, void 0,\nt('System', label));\n\n\n\nclass Configure2fa extends Component {\n\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      conflict: false,\n      otpauth: '',\n      secret: '' };\n\n    this.setSecret = this.setSecret.bind(this);\n    this.enable2fa = this.enable2fa.bind(this);\n  }\n\n  async componentDidMount() {\n    const { userUsing2fa } = this.props;\n    if (!userUsing2fa) {\n      await this.setSecret();\n    }\n  }\n\n  async setSecret() {\n    const { otpauth, secret } = await Auth2faAPI.setSecret(new RequestParams());\n    this.setState({ otpauth, secret });\n  }\n\n  async enable2fa(values) {\n    const { token } = values;\n    const { enable2fa } = this.props;\n    try {\n      const { success } = await Auth2faAPI.enable(new RequestParams({ token }));\n      if (success) {\n        enable2fa();\n      }\n    } catch (err) {\n      if (err.status === 409) {\n        this.setState({ conflict: true });\n      }\n    }\n  }\n\n  render() {\n    const { otpauth, secret, conflict } = this.state;\n    const { userUsing2fa } = this.props;\n\n    return /*#__PURE__*/(\n      _jsx(\"div\", { className: \"settings-content\" }, void 0, /*#__PURE__*/\n      _jsx(\"div\", { className: \"configure2fa-settings\" }, void 0, /*#__PURE__*/\n      _jsx(\"div\", { className: \"panel panel-default\" }, void 0, /*#__PURE__*/\n      _jsx(\"div\", { className: \"panel-heading\" }, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Two-step verification\")), /*#__PURE__*/\n\n      _jsx(\"div\", { className: \"panel-body\" }, void 0,\n      userUsing2fa && /*#__PURE__*/\n      React.createElement(React.Fragment, null, /*#__PURE__*/\n      _jsx(\"div\", { className: \"alert alert-success\" }, void 0, /*#__PURE__*/\n      _jsx(Icon, { icon: \"check\" }), /*#__PURE__*/\n      _jsx(\"div\", { className: \"force-ltr\" }, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Congratulations!\"), /*#__PURE__*/\n      _jsx(\"br\", {}), /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"You have successfully configured two-step verification.\"))),\n\n\n      goToAccount('success', 'OK')),\n\n\n      !userUsing2fa && /*#__PURE__*/\n      _jsx(\"div\", {}, void 0, /*#__PURE__*/\n      _jsx(\"p\", {}, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Activate this feature for enhanced account security\")), /*#__PURE__*/\n\n      _jsx(\"h3\", {}, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Using Google Authenticator\")), /*#__PURE__*/\n\n      _jsx(LocalForm, { model: \"2fa\", onSubmit: this.enable2fa }, void 0, /*#__PURE__*/\n      _jsx(\"ol\", {}, void 0, /*#__PURE__*/\n      _jsx(\"li\", {}, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Install the Google Authenticator app on your mobile device\")), /*#__PURE__*/\n\n\n\n      _jsx(\"li\", {}, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Open the app and select \\\"Add Account\\\" (usually a plus symbol)\")), /*#__PURE__*/\n\n\n\n      _jsx(\"li\", {}, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Scan the following QR code selecting the \\\"scan barcode\\\" option:\"), /*#__PURE__*/\n\n\n      _jsx(\"div\", { className: \"qr-code\" }, void 0,\n      otpauth && /*#__PURE__*/\n      _jsx(QRCodeSVG, {\n        value: otpauth,\n        level: \"Q\",\n        includeMargin: false,\n        size: 200,\n        bgColor: \"white\",\n        fgColor: \"black\" })), /*#__PURE__*/\n\n\n\n      _jsx(Translate, {}, void 0, \"Or enter this secret key into your Authenticator app\"), /*#__PURE__*/\n      _jsx(\"br\", {}), /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"(please keep this key secret and don't share it):\"), /*#__PURE__*/\n      _jsx(\"div\", { className: \"secret-key\" }, void 0, /*#__PURE__*/\n      _jsx(\"span\", {}, void 0, secret))), /*#__PURE__*/\n\n\n      _jsx(\"li\", {}, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Enter the 6-digit verification code generated by your Authenticator app:\"), /*#__PURE__*/\n\n\n      _jsx(\"br\", {}), /*#__PURE__*/\n      _jsx(\"div\", { className: \"row\" }, void 0, /*#__PURE__*/\n      _jsx(\"div\", { className: `col-8 col-md-4 col-lg-2 ${conflict ? 'has-error' : ''}` }, void 0, /*#__PURE__*/\n      _jsx(Control.text, { className: \"form-control\", model: \".token\", id: \"token\" }))))), /*#__PURE__*/\n\n\n\n\n      _jsx(\"p\", {}, void 0,\n      goToAccount('default', 'Cancel'), /*#__PURE__*/\n      _jsx(\"button\", { type: \"submit\", className: \"btn btn-success\" }, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Confirm\"))))))))));\n\n\n\n\n\n\n\n\n\n\n  }}_defineProperty(Configure2fa, \"defaultProps\", void 0);\n\n\nConfigure2fa.defaultProps = {\n  userUsing2fa: false,\n  enable2fa: () => {} };\n\n\nexport const mapStateToProps = (state) => ({\n  userUsing2fa: state.user.toJS().using2fa });\n\n\nexport const mapDispatchToProps = (dispatch) =>\nbindActionCreators({ enable2fa: enable2faAction }, dispatch);\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Configure2fa);","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import React, { useRef } from 'react';\n\n\n\n\n\n\nexport const SelectFileButton = ({ onFileImported, children }) => {\n  // @ts-ignore\n  const fileInputRef = useRef();\n\n  const show = () => {\n    if (fileInputRef.current !== null) {var _fileInputRef$current;\n      (_fileInputRef$current = fileInputRef.current) === null || _fileInputRef$current === void 0 ? void 0 : _fileInputRef$current.click();\n    }\n  };\n\n  const select = (e) => {\n    const file = e.target.files[0];\n    if (file) {\n      onFileImported(file);\n    }\n  };\n\n  return /*#__PURE__*/(\n    _jsx(\"div\", { onClick: show, style: { display: 'inline' } }, void 0,\n    children, /*#__PURE__*/\n    React.createElement(\"input\", {\n      ref: fileInputRef,\n      type: \"file\",\n      accept: \"text/csv\",\n      style: { display: 'none' },\n      onChange: select })));\n\n\n\n};","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}function ownKeys(object, enumerableOnly) {var keys = Object.keys(object);if (Object.getOwnPropertySymbols) {var symbols = Object.getOwnPropertySymbols(object);enumerableOnly && (symbols = symbols.filter(function (sym) {return Object.getOwnPropertyDescriptor(object, sym).enumerable;})), keys.push.apply(keys, symbols);}return keys;}function _objectSpread(target) {for (var i = 1; i < arguments.length; i++) {var source = null != arguments[i] ? arguments[i] : {};i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {_defineProperty(target, key, source[key]);}) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));});}return target;}function _defineProperty(obj, key, value) {if (key in obj) {Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });} else {obj[key] = value;}return obj;}import PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport { bindActionCreators } from 'redux';\nimport { Field, Form } from 'react-redux-form';\nimport { connect } from 'react-redux';\nimport { t, actions, Translate, I18NLink } from \"./..\";\nimport { BackButton } from \"../../Layout\";\nimport { Icon } from \"../../UI\";\n\nimport FormGroup from \"../../DocumentForm/components/FormGroup\";\nimport { SelectFileButton } from \"../../App/SelectFileButton\";\n\nclass EditTranslationForm extends Component {\n  static getDefaultTranslation(translations, languages) {\n    const defaultLocale = languages.find((lang) => lang.default).key;\n    return translations.find((tr) => tr.locale === defaultLocale);\n  }\n\n  static translationExists(translations, locale) {\n    return translations.find((tr) => tr.locale === locale);\n  }\n\n  constructor(props) {\n    super(props);\n    this.save = this.save.bind(this);\n    this.importTranslationsFile = this.importTranslationsFile.bind(this);\n  }\n\n  shouldComponentUpdate(nextProps) {\n    return this.props.translationsForm.length !== nextProps.translationsForm.length;\n  }\n\n  componentWillUnmount() {\n    this.props.resetForm();\n  }\n\n  importTranslationsFile(file) {\n    this.props.importTranslations(this.props.context, file);\n  }\n\n  prepareTranslations() {\n    const { translationsForm, settings } = this.props;\n\n    if (translationsForm.length) {\n      const { languages } = settings.collection.toJS();\n      languages.forEach((lang) => {\n        if (!EditTranslationForm.translationExists(translationsForm, lang.key)) {\n          const defaultTranslation = EditTranslationForm.getDefaultTranslation(\n          translationsForm,\n          languages);\n\n          const translation = {\n            locale: lang.key,\n            values: _objectSpread({}, defaultTranslation.values) };\n\n\n          translationsForm.push(translation);\n        }\n      });\n    }\n\n    return translationsForm;\n  }\n\n  save(_translations) {\n    const translations = _translations.map((translationLanguage) => _objectSpread(_objectSpread({},\n    translationLanguage), {}, {\n      contexts: translationLanguage.contexts.filter((ctx) => ctx.id === this.props.context) }));\n\n    this.props.saveTranslations(translations);\n  }\n\n  render() {\n    const contextId = this.props.context;\n    let defaultTranslationContext = { values: [] };\n\n    const translations = this.prepareTranslations.call(this);\n    if (translations.length) {\n      defaultTranslationContext =\n      translations[0].contexts.find((ctx) => ctx.id === contextId) || defaultTranslationContext;\n    }\n\n    const importButton =\n    contextId === 'System' ? /*#__PURE__*/\n    _jsx(SelectFileButton, { onFileImported: this.importTranslationsFile }, void 0, /*#__PURE__*/\n    _jsx(\"button\", { type: \"button\", className: \"btn btn-default import-template\" }, void 0, /*#__PURE__*/\n    _jsx(Icon, { icon: \"upload\" }), /*#__PURE__*/\n    _jsx(\"span\", { className: \"btn-label\" }, void 0, /*#__PURE__*/\n    _jsx(Translate, {}, void 0, \"Import\")))) :\n\n\n\n\n    false;\n\n\n    const contextKeys = Object.keys(defaultTranslationContext.values);\n\n    const contextName = defaultTranslationContext.label;\n    return /*#__PURE__*/(\n      _jsx(\"div\", { className: \"EditTranslationForm\" }, void 0, /*#__PURE__*/\n      _jsx(Form, { model: \"translationsForm\", onSubmit: this.save }, void 0, /*#__PURE__*/\n      _jsx(\"div\", { className: \"panel panel-default\" }, void 0, /*#__PURE__*/\n      _jsx(\"div\", { className: \"panel-heading\" }, void 0,\n      t('System', 'Translations'), \" \", /*#__PURE__*/_jsx(Icon, { icon: \"angle-right\" }), \" \", contextName), /*#__PURE__*/\n\n      _jsx(\"ul\", { className: \"list-group\" }, void 0,\n      (() => {\n        if (translations.length) {\n          return contextKeys.sort().map((value) => /*#__PURE__*/\n          _jsx(\"li\", { className: \"list-group-item\" }, value, /*#__PURE__*/\n          _jsx(\"h5\", {}, void 0, value),\n          translations.map((translation, i) => {\n            const context = translation.contexts.find((ctx) => ctx.id === contextId);\n            const index = translation.contexts.indexOf(context);\n            return /*#__PURE__*/(\n              _jsx(FormGroup, {}, `${translation.locale}-${value}-${i}`, /*#__PURE__*/\n              _jsx(\"div\", { className: \"input-group\" }, void 0, /*#__PURE__*/\n              _jsx(\"span\", { className: \"input-group-addon\" }, void 0, translation.locale), /*#__PURE__*/\n              _jsx(Field, {\n                model: ['translationsForm', i, 'contexts', index, 'values', value] }, void 0, /*#__PURE__*/\n\n              _jsx(\"input\", { className: \"form-control\", type: \"text\" })))));\n\n\n\n\n          })));\n\n\n        }\n      })())), /*#__PURE__*/\n\n\n      _jsx(\"div\", { className: \"settings-footer\" }, void 0, /*#__PURE__*/\n      _jsx(\"div\", { className: \"btn-cluster\" }, void 0, /*#__PURE__*/\n      _jsx(BackButton, { to: \"/settings/translations\", className: \"btn-plain\" }),\n      importButton), /*#__PURE__*/\n\n      _jsx(\"div\", { className: \"btn-cluster content-right\" }, void 0, /*#__PURE__*/\n      _jsx(I18NLink, { to: \"/settings/translations\", className: \"btn btn-extra-padding btn-default\" }, void 0, /*#__PURE__*/\n      _jsx(\"span\", { className: \"btn-label\" }, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Cancel\"))), /*#__PURE__*/\n\n\n      _jsx(\"button\", { type: \"submit\", className: \"btn btn-extra-padding btn-success save-template\" }, void 0, /*#__PURE__*/\n      _jsx(\"span\", { className: \"btn-label\" }, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Save\"))))))));\n\n\n\n\n\n\n\n  }}\n\n\n\n\n\n\n\n\n\n\n\n\nfunction mapStateToProps({ translationsForm, translationsFormState, settings }) {\n  return {\n    translationsForm,\n    settings,\n    formState: translationsFormState };\n\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return bindActionCreators(\n  {\n    saveTranslations: actions.saveTranslations,\n    resetForm: actions.resetForm,\n    importTranslations: actions.importTranslations },\n\n  dispatch);\n\n}\n\nexport { EditTranslationForm, mapStateToProps };\n\nexport default connect(mapStateToProps, mapDispatchToProps)(EditTranslationForm);","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import React from 'react';\n\nimport RouteHandler from \"../App/RouteHandler\";\nimport EditTranslationForm from \"./components/EditTranslationForm\";\nimport { actions } from \"./\";\nimport { I18NApi } from \"./\";\n\nexport default class EditTranslations extends RouteHandler {\n  static async requestState(requestParams) {\n    const translations = await I18NApi.get(requestParams);\n    return [actions.editTranslations(translations)];\n  }\n\n  render() {\n    return /*#__PURE__*/(\n      _jsx(\"div\", { className: \"settings-content\" }, void 0, /*#__PURE__*/\n      _jsx(EditTranslationForm, { context: this.props.params.context })));\n\n\n  }}","import { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport { wrapDispatch } from \"../../Multireducer\";\nimport { actions as actionCreators } from \"../../BasicReducer\";\n\nimport {\nsearchDocuments,\nloadMoreDocuments,\nselectDocument,\nunselectDocument,\nunselectAllDocuments,\nselectDocuments } from \"../actions/libraryActions\";\n\nimport DocumentsList from \"../../Layout/DocumentsList\";\n\nexport function clickOnDocument(e, doc, active) {\n  const specialkeyPressed = e.metaKey || e.ctrlKey || e.shiftKey;\n\n  if (!specialkeyPressed) {\n    this.props.unselectAllDocuments();\n  }\n\n  if (active && !specialkeyPressed) {\n    return this.props.selectDocument(doc);\n  }\n\n  if (active) {\n    return this.props.unselectDocument(doc.get('_id'));\n  }\n\n  if (!active && e.shiftKey) {\n    const lastSelectedDocument = this.props.selectedDocuments.last();\n    const docs = this.props.documents.get('rows');\n    const startIndex = docs.reduce((result, _doc, index) => {\n      if (_doc.get('_id') === lastSelectedDocument.get('_id')) {\n        return index;\n      }\n      return result;\n    }, -1);\n\n    const endIndex = docs.reduce((result, _doc, index) => {\n      if (_doc.get('_id') === doc.get('_id')) {\n        return index;\n      }\n      return result;\n    }, -1);\n\n    let docsToSelect = docs.slice(startIndex, endIndex + 1);\n    if (endIndex < startIndex) {\n      docsToSelect = docs.slice(endIndex, startIndex + 1);\n    }\n    return this.props.selectDocuments(docsToSelect.toJS());\n  }\n\n  return this.props.selectDocument(doc);\n}\n\nexport function selectAllDocuments() {\n  const docs = this.props.documents.get('rows');\n  return this.props.selectDocuments(docs.toJS());\n}\n\nexport function mapStateToProps(state, props) {\n  return {\n    documents: state[props.storeKey].documents,\n    filters: state[props.storeKey].filters,\n    filtersPanel: state[props.storeKey].ui.get('filtersPanel'),\n    search: state[props.storeKey].search,\n    selectedDocuments: state[props.storeKey].ui.get('selectedDocuments'),\n    multipleSelected: state[props.storeKey].ui.get('selectedDocuments').size > 1,\n    rowListZoomLevel: state[props.storeKey].ui.get('zoomLevel'),\n    clickOnDocument,\n    selectAllDocuments };\n\n}\n\nfunction mapDispatchToProps(dispatch, props) {\n  return bindActionCreators(\n  {\n    loadMoreDocuments,\n    searchDocuments,\n    selectDocument,\n    selectDocuments,\n    unselectDocument,\n    unselectAllDocuments,\n    onSnippetClick: () => actionCreators.set(`${props.storeKey}.sidepanel.tab`, 'text-search') },\n\n  wrapDispatch(dispatch, props.storeKey));\n\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(DocumentsList);","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import React from 'react';\nimport { Icon } from \"../../UI\";\n\n\nimport { Translate } from \"../../I18N\";\n\n\n\n\n\n\nconst updateIndeterminate = (item) => (elem) => {\n  if (item.selectAll && elem && item.indeterminate !== undefined) {\n    // eslint-disable-next-line no-param-reassign\n    elem.indeterminate = item.indeterminate;\n  }\n};\n\nconst ColumnItem = ({ item }) => /*#__PURE__*/\nReact.createElement(React.Fragment, null, /*#__PURE__*/\nReact.createElement(\"input\", {\n  ref: updateIndeterminate(item),\n  type: \"checkbox\",\n  checked: !item.hidden,\n  onChange: () => {} }), /*#__PURE__*/\n\n_jsx(Translate, { context: item.translationContext }, void 0, item.label));\n\n\n\nconst ValueItem =\n(hiddenColumns, isOpen, closeFunction) => () => /*#__PURE__*/\n\n_jsx(\"span\", { className: \"columns-hint\", onClick: closeFunction }, void 0,\nisOpen ? /*#__PURE__*/_jsx(Icon, { icon: \"times\" }) : /*#__PURE__*/_jsx(Icon, { icon: \"bars\", rotation: 90 }),\nhiddenColumns.length ? `${hiddenColumns.length} ` : '', /*#__PURE__*/\n_jsx(Translate, {}, void 0, hiddenColumns.length ? 'columns hidden' : 'Hide columns'));\n\n\n\n\nexport { ColumnItem, ValueItem };","function ownKeys(object, enumerableOnly) {var keys = Object.keys(object);if (Object.getOwnPropertySymbols) {var symbols = Object.getOwnPropertySymbols(object);enumerableOnly && (symbols = symbols.filter(function (sym) {return Object.getOwnPropertyDescriptor(object, sym).enumerable;})), keys.push.apply(keys, symbols);}return keys;}function _objectSpread(target) {for (var i = 1; i < arguments.length; i++) {var source = null != arguments[i] ? arguments[i] : {};i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {_defineProperty(target, key, source[key]);}) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));});}return target;}function _defineProperty(obj, key, value) {if (key in obj) {Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });} else {obj[key] = value;}return obj;}import React, { useCallback, useRef, useState } from 'react';\nimport { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\n\nimport { DropdownList } from \"../../Forms\";\n\nimport { wrapDispatch } from \"../../Multireducer\";\nimport {\nColumnItem,\nValueItem } from \"./HiddenColumnsDropdownItem\";\n\n\nimport {\nsetTableViewColumnHidden,\nsetTableViewAllColumnsHidden } from \"../actions/libraryActions\";\n\n\nimport { useOnClickOutsideElement } from \"../../utils/useOnClickOutsideElementHook\";\n\n\n\n\n\n\nconst mapStateToProps = (state) => ({\n  columns: state.library.ui.get('tableViewColumns') });\n\nconst mapDispatchToProps = (dispatch) =>\nbindActionCreators(\n{ setTableViewColumnHidden, setTableViewAllColumnsHidden },\nwrapDispatch(dispatch, 'library'));\n\nconst connector = connect(mapStateToProps, mapDispatchToProps);\n\nconst processColumns = (\ncolumnsMap) =>\n\n\n\n\n{\n  const columns = columnsMap.toJS().slice(1);\n  const hiddenColumns = columns.filter((c) => c.hidden);\n  const shownColumns = columns.filter((c) => !c.hidden);\n  const selectAllColumn = {\n    label: 'Show all',\n    selectAll: true,\n    indeterminate: hiddenColumns.length !== 0 && shownColumns.length !== 0,\n    hidden: shownColumns.length === 0,\n    type: 'text' };\n\n  const sortedColumns = [selectAllColumn].concat(\n  shownColumns.concat(hiddenColumns).map((c) => _objectSpread(_objectSpread({}, c), {}, { selectAll: false })));\n\n  return { sortedColumns, hiddenColumns };\n};\n\nexport const HideColumnsComponent = ({\n  setTableViewAllColumnsHidden: setAllColumnsHidden,\n  setTableViewColumnHidden: setColumnHidden,\n  columns: columnsMap }) =>\n{\n  const [open, setOpen] = useState(false);\n  const [clickedOutside, setClickedOutside] = useState(false);\n\n  const { sortedColumns, hiddenColumns } = processColumns(columnsMap);\n  const dropdownContainerRef = useRef(null);\n  const dropdownRef = useRef(null);\n\n  const onClickOutside = useCallback((event) => {\n    if (\n    event.target.className !== 'columns-hint' && (\n    !event.target.parentElement || event.target.parentElement.className !== 'columns-hint'))\n    {var _dropdownRef$current;\n      setClickedOutside(true);\n      (_dropdownRef$current = dropdownRef.current) === null || _dropdownRef$current === void 0 ? void 0 : _dropdownRef$current.props.onToggle();\n    }\n  }, []);\n\n  const handleClick = () => {\n    if (open) {\n      setOpen(false);\n    }\n  };\n\n  useOnClickOutsideElement(dropdownContainerRef, onClickOutside);\n\n  const onSelect = (item) =>\n  item.selectAll ?\n  setAllColumnsHidden(item.indeterminate ? false : !item.hidden) :\n  setColumnHidden(item.name, !item.hidden);\n\n  return /*#__PURE__*/(\n    React.createElement(\"div\", { className: \"hidden-columns-dropdown\", ref: dropdownContainerRef }, /*#__PURE__*/\n\n\n    React.createElement(DropdownList, {\n      ref: dropdownRef,\n      open: open,\n      data: sortedColumns,\n      filter: (item, searchTerm) =>\n      item.label.toLowerCase().includes(searchTerm.toLowerCase()),\n\n      itemComponent: ColumnItem,\n      valueComponent: ValueItem(hiddenColumns, open, handleClick),\n      onSelect: (selected) => {\n        onSelect(selected);\n      },\n      onToggle: () => {\n        if (clickedOutside) {var _dropdownRef$current2;\n          setOpen(false);\n          setClickedOutside(false);\n          (_dropdownRef$current2 = dropdownRef.current) === null || _dropdownRef$current2 === void 0 ? void 0 : _dropdownRef$current2.forceUpdate();\n          return;\n        }\n        if (!open) {\n          setOpen(true);\n        }\n      } })));\n\n\n\n};\nexport const HiddenColumnsDropdown = connector(HideColumnsComponent);","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { I18NLink, t, Translate } from \"../../I18N\";\nimport { Icon } from \"../../UI\";\nimport { processFilters, encodeSearch } from \"../actions/libraryActions\";\nimport { showFilters } from \"../../Entities/actions/uiActions\";\nimport { bindActionCreators } from 'redux';\nimport { wrapDispatch } from \"../../Multireducer\";\nimport { createSelector } from 'reselect';\nimport { HiddenColumnsDropdown } from \"./HiddenColumnsDropdown\";\n\nexport class LibraryModeToggleButtons extends Component {\n  render() {\n    const {\n      zoomLevel,\n      zoomOut,\n      zoomIn,\n      showGeolocation,\n      searchUrl,\n      storeKey,\n      tableViewMode,\n      mapViewMode } =\n    this.props;\n    return /*#__PURE__*/(\n      _jsx(\"div\", { className: \"list-view-mode\" }, void 0,\n      tableViewMode && /*#__PURE__*/\n      _jsx(HiddenColumnsDropdown, { className: \"table-view-column-selector\", storeKey: storeKey }),\n\n      !mapViewMode && /*#__PURE__*/\n      _jsx(\"div\", {\n        className: `list-view-mode-zoom list-view-buttons-zoom-${zoomLevel} buttons-group ${\n        tableViewMode ? 'unpinned-mode' : ''\n        }` }, void 0, /*#__PURE__*/\n\n      _jsx(\"button\", {\n        className: \"btn btn-default zoom-out\",\n        onClick: zoomOut,\n        type: \"button\",\n        \"aria-label\": t('System', 'Zoom out library view', null, false) }, void 0, /*#__PURE__*/\n\n      _jsx(Icon, { icon: \"search-minus\" }), /*#__PURE__*/\n      _jsx(\"span\", { className: \"tab-link-tooltip\" }, void 0, t('System', 'Zoom out'))), /*#__PURE__*/\n\n      _jsx(\"button\", {\n        className: \"btn btn-default zoom-in\",\n        onClick: zoomIn,\n        type: \"button\",\n        \"aria-label\": t('System', 'Zoom in library view', null, false) }, void 0, /*#__PURE__*/\n\n      _jsx(Icon, { icon: \"search-plus\" }), /*#__PURE__*/\n      _jsx(\"span\", { className: \"tab-link-tooltip\" }, void 0, t('System', 'Zoom in')))), /*#__PURE__*/\n\n\n\n\n      _jsx(\"div\", { className: \"list-view-mode-map buttons-group\" }, void 0, /*#__PURE__*/\n      _jsx(I18NLink, {\n        to: `library${searchUrl}`,\n        className: \"btn btn-default\",\n        activeClassName: \"is-active\",\n        \"aria-label\": t('System', 'library list view', null, false) }, void 0, /*#__PURE__*/\n\n      _jsx(Icon, { icon: \"th\" }), /*#__PURE__*/\n      _jsx(\"span\", { className: \"tab-link-tooltip\" }, void 0, t('System', 'Cards view'))), /*#__PURE__*/\n\n      _jsx(I18NLink, {\n        to: `library/table${searchUrl}`,\n        className: \"btn btn-default\",\n        activeClassName: \"is-active\",\n        \"aria-label\": t('System', 'library table view', null, false) }, void 0, /*#__PURE__*/\n\n      _jsx(Icon, { icon: \"align-justify\" }), /*#__PURE__*/\n      _jsx(\"span\", { className: \"tab-link-tooltip\" }, void 0, t('System', 'Table view'))),\n\n      showGeolocation && /*#__PURE__*/\n      _jsx(I18NLink, {\n        to: `library/map${searchUrl}`,\n        className: \"btn btn-default\",\n        activeClassName: \"is-active\",\n        \"aria-label\": t('System', 'library map view', null, false) }, void 0, /*#__PURE__*/\n\n      _jsx(Icon, { icon: \"map-marker\" }), /*#__PURE__*/\n      _jsx(\"span\", { className: \"tab-link-tooltip\" }, void 0, t('System', 'Map view')))), /*#__PURE__*/\n\n\n\n      _jsx(\"div\", {\n        className: `buttons-group toggle-button ${!tableViewMode ? 'only-mobile' : 'unpinned'}` }, void 0, /*#__PURE__*/\n\n      _jsx(\"button\", { type: \"button\", className: \"btn btn-default\", onClick: this.props.showFilters }, void 0, /*#__PURE__*/\n      _jsx(Icon, { icon: \"funnel-filter\" }), /*#__PURE__*/\n      _jsx(\"span\", { className: \"filters-label\" }, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Show filters\")), /*#__PURE__*/\n\n      _jsx(\"span\", { className: \"tab-link-tooltip\" }, void 0, t('System', 'Show filters'))))));\n\n\n\n\n  }}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nLibraryModeToggleButtons.defaultProps = {\n  tableViewMode: false,\n  mapViewMode: false,\n  zoomIn: null,\n  zoomOut: null,\n  showFilters: () => {} };\n\n\nexport const encodedSearch = createSelector(\n(state) => state.search,\n(state) => state.filters,\n(search, filters) => {\n  const params = processFilters(search, filters.toJS());\n  return encodeSearch(params);\n});\n\n\nexport function mapStateToProps(state, props) {\n  const { templates } = state;\n  const showGeolocation = Boolean(\n  templates.find((_t) => _t.get('properties').find((p) => p.get('type') === 'geolocation')));\n\n\n  return {\n    searchUrl: encodedSearch(state[props.storeKey]),\n    showGeolocation,\n    zoomLevel:\n    Object.keys(props).indexOf('zoomLevel') !== -1 ?\n    props.zoomLevel :\n    state[props.storeKey].ui.get('zoomLevel') };\n\n}\n\nfunction mapDispatchToProps(dispatch, props) {\n  return bindActionCreators(\n  {\n    showFilters },\n\n  wrapDispatch(dispatch, props.storeKey));\n\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(LibraryModeToggleButtons);","import { objectIdSchema } from \"./commonSchemas\";\n\nexport const emitSchemaTypes = true;\n\nexport let UserRole;(function (UserRole) {UserRole[\"ADMIN\"] = \"admin\";UserRole[\"EDITOR\"] = \"editor\";UserRole[\"COLLABORATOR\"] = \"collaborator\";})(UserRole || (UserRole = {}));\n\n\n\n\n\nexport const userSchema = {\n  type: 'object',\n  additionalProperties: false,\n  definitions: { objectIdSchema },\n  properties: {\n    _id: objectIdSchema,\n    __v: { type: 'number' },\n    username: { type: 'string', minLength: 1 },\n    role: { type: 'string', enum: Object.values(UserRole) },\n    email: { type: 'string', minLength: 1 },\n    password: { type: 'string', minLength: 1 },\n    using2fa: { type: 'boolean' },\n    groups: {\n      type: 'array',\n      items: {\n        type: 'object',\n        additionalProperties: false,\n        properties: {\n          _id: objectIdSchema,\n          name: { type: 'string' } },\n\n        required: ['_id', 'name'] } } },\n\n\n\n  required: ['username', 'role', 'email'] };","function ownKeys(object, enumerableOnly) {var keys = Object.keys(object);if (Object.getOwnPropertySymbols) {var symbols = Object.getOwnPropertySymbols(object);enumerableOnly && (symbols = symbols.filter(function (sym) {return Object.getOwnPropertyDescriptor(object, sym).enumerable;})), keys.push.apply(keys, symbols);}return keys;}function _objectSpread(target) {for (var i = 1; i < arguments.length; i++) {var source = null != arguments[i] ? arguments[i] : {};i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {_defineProperty(target, key, source[key]);}) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));});}return target;}function _defineProperty(obj, key, value) {if (key in obj) {Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });} else {obj[key] = value;}return obj;}\n\nimport { ensure } from \"../../../shared/tsUtils\";\n\n\n\n\n\nfunction columnsFromTemplates(templates) {\n  return templates.reduce((properties, template) => {\n    const propsToAdd = [];\n    (template.properties || []).forEach((property) => {\n      if (\n      !['image', 'preview', 'media', 'nested'].includes(property.type) &&\n      !properties.find((columnProperty) => property.name === columnProperty.name))\n      {\n        propsToAdd.push(_objectSpread(_objectSpread({}, property), {}, { translationContext: ensure(template._id) }));\n      }\n    });\n    return properties.concat(propsToAdd);\n  }, []);\n}\n\nconst getTemplatesToProcess = (\ndocuments,\ntemplates,\nuseTemplates) =>\n{\n  const queriedTemplates = documents.aggregations.all._types.buckets;\n  if (useTemplates.length || queriedTemplates) {\n    const templateIds = useTemplates.length ?\n    useTemplates :\n    queriedTemplates.\n    filter((template) => template.filtered.doc_count > 0).\n    map((template) => template.key);\n\n    return templates.filter((t) =>\n    templateIds.find((id) => t._id === id));\n\n  }\n  return [];\n};\n\nexport function getTableColumns(\ndocuments,\ntemplates,\nuseTemplates = [])\n{\n  let columns = [];\n  const templatesToProcess = getTemplatesToProcess(\n  documents,\n  templates,\n  useTemplates);\n\n  if (templatesToProcess.length > 0) {\n    const commonColumns = [\n    ...(templatesToProcess[0].commonProperties || []),\n    {\n      label: 'Template',\n      name: 'templateName',\n      type: 'text',\n      isCommonProperty: true }];\n\n\n\n    columns = commonColumns.\n    map((c) => _objectSpread(_objectSpread({}, c), {}, { showInCard: true })).\n    concat(columnsFromTemplates(templatesToProcess));\n  }\n  return columns;\n}","import { wrapDispatch } from \"../../Multireducer\";\nimport {\naddDocuments,\nsetDocuments,\ninitializeFiltersForm } from \"../actions/libraryActions\";\n\nimport { actions as formActions } from 'react-redux-form';\nimport { actions } from \"../../BasicReducer\";\n\nexport default function setReduxState(state, key, addinsteadOfSet) {\n  return (_dispatch) => {\n    const dispatch = wrapDispatch(_dispatch, key);\n    dispatch(formActions.load(`${key}.search`, state[key].search));\n\n    dispatch(\n    initializeFiltersForm({\n      documentTypes: state[key].filters.documentTypes,\n      libraryFilters: state[key].filters.properties,\n      aggregations: state[key].aggregations }));\n\n\n\n    dispatch(\n    addinsteadOfSet ? addDocuments(state[key].documents) : setDocuments(state[key].documents));\n\n\n    if (key === 'library') {\n      dispatch(actions.set('library.markers', state[key].markers));\n    }\n  };\n}","const _excluded = [\"userSelectedSorting\"];function ownKeys(object, enumerableOnly) {var keys = Object.keys(object);if (Object.getOwnPropertySymbols) {var symbols = Object.getOwnPropertySymbols(object);enumerableOnly && (symbols = symbols.filter(function (sym) {return Object.getOwnPropertyDescriptor(object, sym).enumerable;})), keys.push.apply(keys, symbols);}return keys;}function _objectSpread(target) {for (var i = 1; i < arguments.length; i++) {var source = null != arguments[i] ? arguments[i] : {};i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {_defineProperty(target, key, source[key]);}) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));});}return target;}function _defineProperty(obj, key, value) {if (key in obj) {Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });} else {obj[key] = value;}return obj;}function _objectWithoutProperties(source, excluded) {if (source == null) return {};var target = _objectWithoutPropertiesLoose(source, excluded);var key, i;if (Object.getOwnPropertySymbols) {var sourceSymbolKeys = Object.getOwnPropertySymbols(source);for (i = 0; i < sourceSymbolKeys.length; i++) {key = sourceSymbolKeys[i];if (excluded.indexOf(key) >= 0) continue;if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;target[key] = source[key];}}return target;}function _objectWithoutPropertiesLoose(source, excluded) {if (source == null) return {};var target = {};var sourceKeys = Object.keys(source);var key, i;for (i = 0; i < sourceKeys.length; i++) {key = sourceKeys[i];if (excluded.indexOf(key) >= 0) continue;target[key] = source[key];}return target;}import { actions } from \"../../BasicReducer\";\nimport libraryHelpers from \"./libraryFilters\";\nimport api from \"../../Search/SearchAPI\";\nimport prioritySortingCriteria from \"../../utils/prioritySortingCriteria\";\nimport rison from 'rison-node';\nimport { getThesaurusPropertyNames } from \"../../../shared/commonTopicClassification\";\nimport { setTableViewColumns } from \"../actions/libraryActions\";\nimport { tocGenerationUtils } from \"../../ToggledFeatures/tocGeneration\";\nimport { wrapDispatch } from \"../../Multireducer\";\nimport { UserRole } from \"../../../shared/types/userSchema\";\nimport { getTableColumns } from \"./tableColumns\";\nimport setReduxState from \"./setReduxState.js\";\n\nconst decodeQuery = (params) => {\n  try {\n    return rison.decode(params.q || '()');\n  } catch (error) {\n    error.status = 404;\n    throw error;\n  }\n};\n\nconst processQuery = (params, globalResources, key) => {\n  const defaultSearch = prioritySortingCriteria.get({ templates: globalResources.templates });\n\n  let query = decodeQuery(params);\n\n  query = Object.assign(query, {\n    order: query.order || defaultSearch.order,\n    sort: query.sort || defaultSearch.sort,\n    view: params.view });\n\n\n  const noDocuments = !globalResources[key] || !globalResources[key].documents.get('rows').size;\n\n  if (noDocuments && query.limit) {\n    query = Object.assign(query, { limit: query.limit + (query.from || 0), from: 0 });\n  }\n\n  const { userSelectedSorting } = query,sanitizedQuery = _objectWithoutProperties(query, _excluded);\n\n  const loggedIn = globalResources.user && globalResources.user.has('role');\n  const isAdmin = loggedIn && globalResources.user.get('role') === UserRole.ADMIN;\n\n  return _objectSpread(_objectSpread(_objectSpread(_objectSpread({},\n  tocGenerationUtils.aggregations(sanitizedQuery, globalResources.settings.collection.toJS())),\n  loggedIn ? { aggregatePublishingStatus: true } : {}),\n  loggedIn && !isAdmin ? { aggregatePermissionsByLevel: true } : {}),\n  isAdmin ? { aggregatePermissionsByUsers: true } : {});\n\n};\n\nconst requestState = (\nrequest,\nglobalResources,\noptions = { calculateTableColumns: false, geolocation: false }) =>\n{\n  const docsQuery = processQuery(request.data, globalResources, 'library');\n\n  const documentsRequest = request.set(\n  tocGenerationUtils.aggregations(docsQuery, globalResources.settings.collection.toJS()));\n\n\n  const markersRequest = options.geolocation ?\n  api.search(\n  request.set(_objectSpread(_objectSpread({},\n  docsQuery), {}, {\n    geolocation: true }))) :\n\n\n  { rows: [] };\n\n  return Promise.all([api.search(documentsRequest), markersRequest]).then(\n  ([documents, markers]) => {\n    const templates = globalResources.templates.toJS();\n    const filterState = libraryHelpers.URLQueryToState(\n    documentsRequest.data,\n    templates,\n    globalResources.thesauris.toJS(),\n    globalResources.relationTypes.toJS(),\n    request.data.quickLabelThesaurus ?\n    getThesaurusPropertyNames(request.data.quickLabelThesaurus, templates) :\n    []);\n\n\n    const state = {\n      library: {\n        filters: {\n          documentTypes: documentsRequest.data.types || [],\n          properties: filterState.properties },\n\n        aggregations: documents.aggregations,\n        search: filterState.search,\n        documents,\n        markers } };\n\n\n\n    const addinsteadOfSet = Boolean(docsQuery.from);\n\n    const dispatchedActions = [\n    setReduxState(state, 'library', addinsteadOfSet),\n    actions.set('library.sidepanel.quickLabelState', {\n      thesaurus: request.data.quickLabelThesaurus,\n      autoSave: false })];\n\n\n    if (options.calculateTableColumns) {\n      const tableViewColumns = getTableColumns(documents, templates, documentsRequest.data.types);\n      dispatchedActions.push((dispatch) =>\n      wrapDispatch(dispatch, 'library')(setTableViewColumns(tableViewColumns)));\n\n    }\n    return dispatchedActions;\n  });\n\n};\n\nexport { decodeQuery, processQuery, requestState };","function ownKeys(object, enumerableOnly) {var keys = Object.keys(object);if (Object.getOwnPropertySymbols) {var symbols = Object.getOwnPropertySymbols(object);enumerableOnly && (symbols = symbols.filter(function (sym) {return Object.getOwnPropertyDescriptor(object, sym).enumerable;})), keys.push.apply(keys, symbols);}return keys;}function _objectSpread(target) {for (var i = 1; i < arguments.length; i++) {var source = null != arguments[i] ? arguments[i] : {};i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {_defineProperty(target, key, source[key]);}) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));});}return target;}function _defineProperty(obj, key, value) {if (key in obj) {Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });} else {obj[key] = value;}return obj;}import * as types from \"./actionTypes\";\nimport libraryHelper from \"../helpers/libraryFilters\";\nimport comonPropertiesHelper from \"../../../shared/comonProperties\";\nimport * as libraryActions from \"./libraryActions\";\nimport prioritySortingCriteria from \"../../utils/prioritySortingCriteria\";\nimport { actions as formActions } from 'react-redux-form';\n\nexport function filterDocumentTypes(documentTypes, storeKey = 'library') {\n  return (dispatch, getState) => {\n    const state = getState();\n\n    const templates = state.templates.toJS();\n    const thesauris = state.thesauris.toJS();\n\n    let libraryFilters = comonPropertiesHelper.\n    comonProperties(templates, documentTypes).\n    filter((prop) => prop.filter);\n    libraryFilters = libraryHelper.populateOptions(libraryFilters, thesauris);\n\n    const usefulTemplates = documentTypes.length ?\n    templates.filter((t) => documentTypes.includes(t._id)) :\n    templates;\n\n    const { sort, order } = prioritySortingCriteria.get({\n      currentCriteria: { sort: state[storeKey].search.sort, order: state[storeKey].search.order },\n      filteredTemplates: usefulTemplates.map((t) => t._id),\n      templates: state.templates,\n      selectedSorting: state[storeKey].selectedSorting });\n\n\n    const search = _objectSpread(_objectSpread({\n      types: documentTypes },\n    state[storeKey].search), {}, {\n      sort,\n      order });\n\n\n    const filters = { documentTypes, properties: libraryFilters };\n    dispatch(libraryActions.searchDocuments({ filters, search }, storeKey));\n  };\n}\n\nexport function resetFilters(storeKey) {\n  return (dispatch, getState) => {\n    dispatch({ type: types.SET_LIBRARY_FILTERS, documentTypes: [], libraryFilters: [] });\n    dispatch(\n    formActions.load(`${storeKey}.search`, {\n      searchTerm: '',\n      filters: {},\n      order: 'desc',\n      sort: 'creationDate' }));\n\n\n    libraryActions.searchDocuments({ search: getState()[storeKey].search }, storeKey)(\n    dispatch,\n    getState);\n\n  };\n}\n\nexport function toggleFilter(propertyName, properties) {\n  return (dispatch) => {\n    const updatedProperties = properties.map((property) => {\n      if (property.name === propertyName) {\n        property.active = !property.active;\n      }\n      return property;\n    });\n    dispatch({ type: types.UPDATE_LIBRARY_FILTERS, libraryFilters: updatedProperties });\n  };\n}","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport Immutable, { is } from 'immutable';\nimport ShowIf from \"../../App/ShowIf\";\nimport { t, Translate } from \"../../I18N\";\nimport { Icon } from \"../../UI\";\n\nimport { filterDocumentTypes } from \"../actions/filterActions\";\n\nconst getItemsToShow = (fromFilters, templates, settings) => {var _items;\n  let items = fromFilters ? settings.collection.toJS().filters : [];\n  if (!((_items = items) !== null && _items !== void 0 && _items.length)) {\n    items = templates.toJS().map((tpl) => ({\n      id: tpl._id,\n      name: tpl.name }));\n\n  }\n  return items;\n};\n\nexport class DocumentTypesList extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      ui: {} };\n\n  }\n\n  shouldComponentUpdate(nextProps, nextState) {\n    return (\n      !is(this.props.selectedTemplates, nextProps.selectedTemplates) ||\n      !is(this.props.settings, nextProps.settings) ||\n      !is(this.props.aggregations, nextProps.aggregations) ||\n      this.stateChanged(nextState));\n\n  }\n\n  changeAll(item, e) {\n    const { selectedTemplates: selectedItems } = this.props;\n    if (e.target.checked) {\n      item.items.forEach((_item) => {\n        if (!this.checked(_item)) {\n          selectedItems.push(_item.id);\n        }\n      });\n    }\n\n    if (!e.target.checked) {\n      item.items.forEach((_item) => {\n        if (this.checked(_item)) {\n          const index = selectedItems.indexOf(_item.id);\n          selectedItems.splice(index, 1);\n        }\n      });\n    }\n\n    this.props.filterDocumentTypes(selectedItems);\n  }\n\n  change(item) {\n    const { selectedTemplates: selectedItems } = this.props;\n\n    if (selectedItems.includes(item.id)) {\n      const index = selectedItems.indexOf(item.id);\n      selectedItems.splice(index, 1);\n    } else {\n      selectedItems.push(item.id);\n    }\n\n    this.props.filterDocumentTypes(selectedItems);\n  }\n\n  toggleOptions(item, e) {\n    e.preventDefault();\n    if (!this.checked(item) && item.items.find((itm) => this.checked(itm))) {\n      return;\n    }\n    const { ui } = this.state;\n    ui[item.id] = !ui[item.id];\n    this.setState({ ui });\n  }\n\n  aggregations(item) {\n    const aggregations = this.aggs;\n    const buckets =\n    aggregations.all && aggregations.all._types ? aggregations.all._types.buckets : [];\n    const found = buckets.find((agg) => agg.key === item.id);\n    if (found) {\n      return found.filtered.doc_count;\n    }\n\n    if (item.items) {\n      return item.items.reduce((result, _item) => result + this.aggregations(_item), 0);\n    }\n\n    return 0;\n  }\n\n  showSubOptions(parent) {\n    const toggled = this.state.ui[parent.id];\n    return !!(toggled || !!(!this.checked(parent) && parent.items.find((itm) => this.checked(itm))));\n  }\n\n  checked(item) {\n    if (item.items) {\n      return item.items.reduce(\n      (result, _item) => result && this.checked(_item),\n      item.items.length > 0);\n\n    }\n\n    return this.props.selectedTemplates.includes(item.id);\n  }\n\n  stateChanged(nextState) {\n    return (\n      Object.keys(nextState.ui).length === Object.keys(this.state.ui).length ||\n      Object.keys(nextState.ui).reduce(\n      (result, key) => result || nextState.ui[key] === this.state.ui[key],\n      false));\n\n\n  }\n\n  renderSingleType(item, index) {\n    const context = item.id === 'missing' ? 'System' : item.id;\n    return /*#__PURE__*/(\n      _jsx(\"li\", { className: \"multiselectItem\", title: item.name }, index, /*#__PURE__*/\n      _jsx(\"input\", {\n        type: \"checkbox\",\n        className: \"multiselectItem-input\",\n        value: item.id,\n        id: item.id,\n        onChange: this.change.bind(this, item),\n        checked: this.checked(item) }), /*#__PURE__*/\n\n      _jsx(\"label\", { className: \"multiselectItem-label\", htmlFor: item.id }, void 0, /*#__PURE__*/\n      _jsx(\"span\", { className: \"multiselectItem-icon\" }, void 0, /*#__PURE__*/\n      _jsx(Icon, { icon: ['far', 'square'], className: \"checkbox-empty\" }), /*#__PURE__*/\n      _jsx(Icon, { icon: \"check\", className: \"checkbox-checked\" })), /*#__PURE__*/\n\n      _jsx(\"span\", { className: \"multiselectItem-name\" }, void 0, /*#__PURE__*/\n      _jsx(Translate, { context: context }, void 0, item.name))), /*#__PURE__*/\n\n\n      _jsx(\"span\", { className: \"multiselectItem-results\" }, void 0, this.aggregations(item))));\n\n\n  }\n\n  renderGroupType(item, index) {\n    return /*#__PURE__*/(\n      _jsx(\"li\", {}, index, /*#__PURE__*/\n      _jsx(\"div\", { className: \"multiselectItem\" }, void 0, /*#__PURE__*/\n      _jsx(\"input\", {\n        type: \"checkbox\",\n        className: \"form-control multiselectItem-input\",\n        id: item.id,\n        onChange: this.changeAll.bind(this, item),\n        checked: this.checked(item) }), /*#__PURE__*/\n\n      _jsx(\"label\", { htmlFor: item.id, className: \"multiselectItem-label\" }, void 0, /*#__PURE__*/\n      _jsx(\"span\", { className: \"multiselectItem-icon\" }, void 0, /*#__PURE__*/\n      _jsx(Icon, { icon: ['far', 'square'], className: \"checkbox-empty\" }), /*#__PURE__*/\n      _jsx(Icon, { icon: \"check\", className: \"checkbox-checked\" })), /*#__PURE__*/\n\n      _jsx(\"span\", { className: \"multiselectItem-name\" }, void 0, /*#__PURE__*/\n      _jsx(\"b\", {}, void 0, t('Filters', item.name)))), /*#__PURE__*/\n\n\n      _jsx(\"span\", { className: \"multiselectItem-results\" }, void 0, /*#__PURE__*/\n      _jsx(\"span\", {}, void 0, this.aggregations(item)), /*#__PURE__*/\n      _jsx(\"span\", { className: \"multiselectItem-action\", onClick: this.toggleOptions.bind(this, item) }, void 0, /*#__PURE__*/\n      _jsx(Icon, { icon: this.state.ui[item.id] ? 'caret-up' : 'caret-down' })))), /*#__PURE__*/\n\n\n\n      _jsx(ShowIf, { if: this.showSubOptions(item) }, void 0, /*#__PURE__*/\n      _jsx(\"ul\", { className: \"multiselectChild is-active\" }, void 0,\n      item.items.map((_item, i) => this.renderSingleType(_item, i))))));\n\n\n\n\n  }\n\n  render() {\n    const { fromFilters, templates, settings } = this.props;\n    const items = getItemsToShow(fromFilters, templates, settings);\n    this.aggs = this.props.aggregations.toJS();\n    return /*#__PURE__*/(\n      _jsx(\"ul\", { className: \"multiselect is-active\" }, void 0,\n      items.map((item, index) => {\n        if (item.items) {\n          return this.renderGroupType(item, index);\n        }\n        return this.renderSingleType(item, index);\n      })));\n\n\n  }}\n\n\nDocumentTypesList.defaultProps = {\n  fromFilters: true,\n  templates: Immutable.fromJS([]),\n  settings: {},\n  aggregations: Immutable.fromJS({}),\n  selectedTemplates: [],\n  filterDocumentTypes: {} };\n\n\n\n\n\n\n\n\n\n\n\nexport function mapStateToProps(state) {\n  return {\n    settings: state.settings,\n    templates: state.templates,\n    aggregations: state.library.aggregations };\n\n}\n\n//parent ts component requires ownProps to inferring types\nfunction mapDispatchToProps(dispatch, _ownProps) {\n  return bindActionCreators({ filterDocumentTypes }, dispatch);\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(DocumentTypesList);","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import React from 'react';\nimport _ from 'lodash';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport { Switcher } from \"../../ReactReduxForms\";\nimport { Translate } from \"../../I18N\";\n\nimport { filterDocumentTypes } from \"../actions/filterActions\";\nimport DocumentTypesList from \"./DocumentTypesList\";\nimport { NeedAuthorization } from \"../../Auth\";\n\n\n\n\n\n\n\n\nconst mapStateToProps = (state) => ({\n  collection: state.settings.collection,\n  libraryFilters: state.library.filters });\n\n\nfunction mapDispatchToProps(dispatch) {\n  return bindActionCreators({ filterDocumentTypes }, dispatch);\n}\n\nconst connector = connect(mapStateToProps, mapDispatchToProps);\n\n\n\nconst filterValidSelectedTemplates = (configuredFilters, selectedTemplates) =>\nconfiguredFilters.length ?\nselectedTemplates.filter((t) => configuredFilters.includes(t)) :\nselectedTemplates;\n\nconst flattenConfiguredFilters = (configuredFilters) =>\nconfiguredFilters.reduce((result, filter) => {\n  if (filter.items && filter.items.length) {\n    const items = filter.items.map((item) => item.id);\n    result.push(...items);\n  }\n  result.push(filter.id);\n  return result;\n}, []);\n\nexport class TemplatesFilterComponent extends React.Component\n\n\n{\n  constructor(props) {\n    super(props);\n    const configuredFilters = flattenConfiguredFilters(\n    props.collection.toJS().filters || []);\n\n    const currentSelection = props.libraryFilters.toJS().documentTypes || [];\n    const newSelection = filterValidSelectedTemplates(configuredFilters, currentSelection);\n    const documentTypeFromFilters = _.isEqual(currentSelection, newSelection);\n\n    this.state = {\n      documentTypeFromFilters,\n      selectedTemplates: newSelection,\n      configuredFilters };\n\n  }\n\n  static getDerivedStateFromProps(props, state) {\n    const currentSelection = props.libraryFilters.toJS().documentTypes || [];\n    const newSelection = state.documentTypeFromFilters ?\n    filterValidSelectedTemplates(state.configuredFilters, currentSelection) :\n    currentSelection;\n    return { selectedTemplates: newSelection };\n  }\n\n  toggleTemplateFilter(\n  checked,\n  configuredFilters,\n  selectedTemplates)\n  {\n    if (checked) {\n      const newSelectedItems = filterValidSelectedTemplates(configuredFilters, selectedTemplates);\n      this.setState({ selectedTemplates: newSelectedItems });\n      this.props.filterDocumentTypes(newSelectedItems);\n    }\n    this.setState({ documentTypeFromFilters: checked });\n  }\n\n  render() {\n    return /*#__PURE__*/(\n      _jsx(\"div\", { className: \"form-group\" }, void 0, /*#__PURE__*/\n      _jsx(\"ul\", { className: \"search__filter\" }, void 0,\n      this.state.configuredFilters.length > 0 && /*#__PURE__*/\n      _jsx(NeedAuthorization, { roles: ['admin', 'editor', 'collaborator'] }, void 0, /*#__PURE__*/\n      _jsx(\"li\", {}, void 0, \"\\xA0\", /*#__PURE__*/\n\n      _jsx(Switcher, {\n        className: \"template-filter-switcher\",\n        model: \"\",\n        value: this.state.documentTypeFromFilters,\n        onChange: (checked) =>\n        this.toggleTemplateFilter(\n        checked,\n        this.state.configuredFilters,\n        this.state.selectedTemplates),\n\n\n        leftLabel: /*#__PURE__*/_jsx(Translate, {}, void 0, \"FEATURED\"),\n        rightLabel: /*#__PURE__*/_jsx(Translate, {}, void 0, \"ALL\") }))), /*#__PURE__*/\n\n\n\n\n      _jsx(\"li\", { className: \"wide documentTypes-selector\" }, void 0, /*#__PURE__*/\n      _jsx(DocumentTypesList, {\n        fromFilters:\n        this.state.documentTypeFromFilters && this.state.configuredFilters.length > 0,\n\n        selectedTemplates: this.state.selectedTemplates })))));\n\n\n\n\n\n  }}\n\n\nexport const TemplatesFilter = connector(TemplatesFilterComponent);","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}function ownKeys(object, enumerableOnly) {var keys = Object.keys(object);if (Object.getOwnPropertySymbols) {var symbols = Object.getOwnPropertySymbols(object);enumerableOnly && (symbols = symbols.filter(function (sym) {return Object.getOwnPropertyDescriptor(object, sym).enumerable;})), keys.push.apply(keys, symbols);}return keys;}function _objectSpread(target) {for (var i = 1; i < arguments.length; i++) {var source = null != arguments[i] ? arguments[i] : {};i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {_defineProperty(target, key, source[key]);}) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));});}return target;}function _defineProperty(obj, key, value) {if (key in obj) {Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });} else {obj[key] = value;}return obj;}import React, { useCallback, useMemo } from 'react';\nimport FormGroup from \"../../DocumentForm/components/FormGroup\";\n\nimport { NeedAuthorization } from \"../../Auth\";\nimport { Translate } from \"../../I18N\";\nimport { MultiSelect } from \"../../Forms\";\nimport { Control } from 'react-redux-form';\nimport { Switcher } from \"../../ReactReduxForms\";\n\n\n\n\n\n\n\n\n\n\n\n\nconst generateOptions = (aggregations, level) => {var _aggregations$all, _aggregations$all2;return (\n    (aggregations === null || aggregations === void 0 ? void 0 : (_aggregations$all = aggregations.all) === null || _aggregations$all === void 0 ? void 0 : (_aggregations$all2 = _aggregations$all[`_permissions.${level}`]) === null || _aggregations$all2 === void 0 ? void 0 : _aggregations$all2.buckets.\n    filter((aggregation) => aggregation.key !== 'any').\n    map((aggregation) => _objectSpread({\n      label: aggregation.label,\n      title: aggregation.label,\n      value: aggregation.key,\n      results: aggregation.filtered.doc_count },\n    aggregation.icon ? { icon: { type: 'Icons', _id: aggregation.icon } } : {}))) ||\n    []);};\n\nexport const AssigneeFilterSelectUncontrolled = ({\n  onChange,\n  aggregations,\n  value = [] }) =>\n{\n  const readOptions = useMemo(() => generateOptions(aggregations, 'read'), [aggregations]);\n  const writeOptions = useMemo(() => generateOptions(aggregations, 'write'), [aggregations]);\n\n  const getChangeHandler = (level) => (values) => {\n    const newSelected = value.\n    filter((v) => v.level !== level).\n    concat(values.map((v) => ({ refId: v, level })));\n\n    onChange(newSelected);\n  };\n\n  const onReadChangeHandler = useCallback(getChangeHandler('read'), [value, onChange]);\n  const onWriteChangeHandler = useCallback(getChangeHandler('write'), [value, onChange]);\n\n  const readValues = value.filter((v) => v.level === 'read').map((v) => v.refId);\n  const writeValues = value.filter((v) => v.level === 'write').map((v) => v.refId);\n\n  return /*#__PURE__*/(\n    React.createElement(React.Fragment, null, /*#__PURE__*/\n    _jsx(\"li\", {}, void 0, /*#__PURE__*/\n    _jsx(Translate, {}, void 0, \"Shared as viewer\")), /*#__PURE__*/\n\n    _jsx(\"li\", { className: \"wide\" }, void 0, /*#__PURE__*/\n    _jsx(MultiSelect, {\n      prefix: \"permissions.read\",\n      onChange: onReadChangeHandler,\n      options: readOptions,\n      value: readValues })), /*#__PURE__*/\n\n\n    _jsx(\"li\", { className: \"spaced\" }, void 0, /*#__PURE__*/\n    _jsx(Translate, {}, void 0, \"Shared as editor\")), /*#__PURE__*/\n\n    _jsx(\"li\", { className: \"wide\" }, void 0, /*#__PURE__*/\n    _jsx(MultiSelect, {\n      prefix: \"permissions.write\",\n      onChange: onWriteChangeHandler,\n      options: writeOptions,\n      value: writeValues }))));\n\n\n\n\n};\n\n// eslint-disable-next-line react/no-multi-comp\nconst AssigneeFilterSelect = ({\n  model,\n  prefix,\n  onChange,\n  aggregations }) => /*#__PURE__*/\n\n// eslint-disable-next-line react/jsx-pascal-case\n_jsx(Control.select, {\n  component: AssigneeFilterSelectUncontrolled,\n  model: model,\n  prefix: prefix,\n  onChange: onChange\n  // @ts-ignore\n  , aggregations: aggregations });\n\n\n\n// eslint-disable-next-line react/no-multi-comp\nexport const AssigneeFilter = ({ onChange, aggregations }) => /*#__PURE__*/\n_jsx(NeedAuthorization, {}, void 0, /*#__PURE__*/\n_jsx(FormGroup, { className: \"admin-filter\" }, \"permissions\", /*#__PURE__*/\n_jsx(\"ul\", { className: \"search__filter is-active\" }, void 0, /*#__PURE__*/\n_jsx(\"li\", {}, void 0, /*#__PURE__*/\n_jsx(Translate, {}, void 0, \"Permissions\"), /*#__PURE__*/\n_jsx(Switcher, {\n  model: \".customFilters['permissions'].and\",\n  prefix: \"permissions\",\n  onChange: onChange })), /*#__PURE__*/\n\n\n_jsx(AssigneeFilterSelect, {\n  model: \".customFilters['permissions'].values\",\n  prefix: \"permissions\",\n  onChange: onChange,\n  aggregations: aggregations }))));","export const filtrableLevels = ['read', 'write'];","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import React, { useMemo } from 'react';\nimport FormGroup from \"../../DocumentForm/components/FormGroup\";\nimport { MultiSelect } from \"../../Forms\";\n\nimport { NeedAuthorization } from \"../../Auth\";\nimport { Translate } from \"../../I18N\";\nimport { Control } from 'react-redux-form';\nimport { connect } from 'react-redux';\n\n\nimport Immutable from 'immutable';\nimport { filtrableLevels } from \"./FiltrablePermissionsLevels\";\n\n\n\n\n\n\n\n\n\n\n\nconst filteredAggregation = (aggregations, key) => {var _aggregations$all, _aggregations$all$_pe;\n  const bucket = ((aggregations === null || aggregations === void 0 ? void 0 : (_aggregations$all = aggregations.all) === null || _aggregations$all === void 0 ? void 0 : (_aggregations$all$_pe = _aggregations$all['_permissions.self']) === null || _aggregations$all$_pe === void 0 ? void 0 : _aggregations$all$_pe.buckets) || []).find(\n  (a) => a.key === key) ||\n  {\n    filtered: { doc_count: 0 } };\n\n  return bucket.filtered.doc_count;\n};\n\nconst generateOptions = (aggregations) => [\n{\n  label: /*#__PURE__*/_jsx(Translate, {}, void 0, \"Can edit\"),\n  title: 'Can edit',\n  value: 'write',\n  icon: { type: 'Icons', _id: 'pencil-alt' },\n  results: filteredAggregation(aggregations, 'write') },\n\n{\n  label: /*#__PURE__*/_jsx(Translate, {}, void 0, \"Can view\"),\n  title: 'Can view',\n  value: 'read',\n  icon: { type: 'Icons', _id: 'file' },\n  results: filteredAggregation(aggregations, 'read') }];\n\n\n\nexport const PermissionsFilterUncontrolled = connect(\n({ user }) => ({\n  user }))(\n\n\n({\n  value = Immutable.fromJS([]),\n  onChange,\n  aggregations,\n  user }) =>\n{\n  const refIds = useMemo(\n  () => {var _user$toJS$groups;return [user.get('_id'), ...(((_user$toJS$groups = user.toJS().groups) === null || _user$toJS$groups === void 0 ? void 0 : _user$toJS$groups.map((g) => g._id)) || [])];},\n  [user]);\n\n\n  const onChangeHandler = (newValues) => {\n    onChange(\n    newValues.reduce(\n    (filters, level) =>\n    filters.concat(\n    refIds.map((refId) => ({\n      refId,\n      level }))),\n\n\n    []));\n\n\n  };\n\n  const mappedValue = useMemo(\n  () =>\n  filtrableLevels.filter((level) =>\n  refIds.every((id) => value.find((v) => v.refId === id && v.level === level))),\n\n  [refIds, value]);\n\n\n  const options = generateOptions(aggregations);\n\n  return /*#__PURE__*/(\n    _jsx(FormGroup, { className: \"admin-filter\" }, \"permissions.level\", /*#__PURE__*/\n    _jsx(MultiSelect, {\n      prefix: \"permissions.level\",\n      onChange: onChangeHandler,\n      options: options,\n      value: mappedValue })));\n\n\n\n});\n\n\n// eslint-disable-next-line react/no-multi-comp\nconst PermissionsFilterMultiselect = ({\n  model,\n  prefix,\n  onChange,\n  aggregations }) => /*#__PURE__*/\n\n// eslint-disable-next-line react/jsx-pascal-case\n_jsx(Control.select, {\n  component: PermissionsFilterUncontrolled,\n  model: `${model}.values`,\n  prefix: prefix,\n  onChange: onChange\n  // @ts-ignore\n  , aggregations: aggregations });\n\n\n\n// eslint-disable-next-line react/no-multi-comp\nexport const PermissionsFilter = ({ onChange, aggregations }) => {\n  const options = generateOptions(aggregations);\n  const totalAggs = options.reduce((total, o) => total + o.results, 0);\n  if (totalAggs === 0) {\n    return null;\n  }\n  return /*#__PURE__*/(\n    _jsx(NeedAuthorization, { roles: ['editor', 'collaborator'] }, void 0, /*#__PURE__*/\n    _jsx(FormGroup, { className: \"admin-filter\" }, \"permissions.level\", /*#__PURE__*/\n    _jsx(\"ul\", { className: \"search__filter is-active\" }, void 0, /*#__PURE__*/\n    _jsx(\"li\", { className: \"wide\" }, void 0, /*#__PURE__*/\n    _jsx(PermissionsFilterMultiselect, {\n      model: \".customFilters['permissions']\",\n      prefix: \"permissions\",\n      onChange: onChange,\n      aggregations: aggregations }))))));\n\n\n\n\n\n\n};","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import React from 'react';\nimport SelectFilter from \"./SelectFilter\";\nimport FormGroup from \"../../DocumentForm/components/FormGroup\";\n\nimport { NeedAuthorization } from \"../../Auth\";\nimport { Translate } from \"../../I18N\";\nimport { Icon } from \"../../UI\";\n\n\n\n\n\n\nconst filteredAggregation = (aggregations, key) => {var _aggregations$all, _aggregations$all$_pu;return (\n    (\n    ((aggregations === null || aggregations === void 0 ? void 0 : (_aggregations$all = aggregations.all) === null || _aggregations$all === void 0 ? void 0 : (_aggregations$all$_pu = _aggregations$all._published) === null || _aggregations$all$_pu === void 0 ? void 0 : _aggregations$all$_pu.buckets) || []).find((a) => a.key === key) || {\n      filtered: { doc_count: 0 } }).\n\n    filtered.doc_count || 0);};\n\nconst generateOptions = (aggregations) => [\n{\n  label: /*#__PURE__*/\n  React.createElement(React.Fragment, null, /*#__PURE__*/\n  _jsx(Icon, { icon: \"globe-africa\" }), \"\\xA0\", /*#__PURE__*/\n\n  _jsx(Translate, {}, void 0, \"Published\")),\n\n\n  title: 'Published',\n  value: 'published',\n  results: filteredAggregation(aggregations, 'true') },\n\n{\n  label: /*#__PURE__*/\n  React.createElement(React.Fragment, null, /*#__PURE__*/\n  _jsx(Icon, { icon: \"lock\" }), \"\\xA0\", /*#__PURE__*/\n\n  _jsx(Translate, {}, void 0, \"Restricted\")),\n\n\n  title: 'Restricted',\n  value: 'restricted',\n  results: filteredAggregation(aggregations, 'false') }];\n\n\n\nexport const PublishedFilters = ({ onChange, aggregations }) => {\n  const options = generateOptions(aggregations);\n  const totalAggs = options.reduce((total, o) => total + o.results, 0);\n  if (totalAggs === 0) {\n    return null;\n  }\n  return /*#__PURE__*/(\n    _jsx(NeedAuthorization, { roles: ['admin', 'editor', 'collaborator'] }, void 0, /*#__PURE__*/\n    _jsx(FormGroup, { className: \"admin-filter\" }, \"publishedStatus\", /*#__PURE__*/\n    _jsx(SelectFilter, {\n      model: \".publishedStatus\",\n      prefix: \"publishedStatus\",\n      onChange: onChange,\n      options: options,\n      showBoolSwitch: false }))));\n\n\n\n\n};","import { createSelector } from 'reselect';\n\nexport const selectTemplates = createSelector(\n(s) => s.templates,\n(t) => t.toJS());","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import { DateRange } from \"../../ReactReduxForms\";\nimport PropTypes from 'prop-types';\nimport React from 'react';\n\nconst DateFilter = ({ onChange, model, label, format }) => /*#__PURE__*/\n_jsx(\"ul\", { className: \"search__filter is-active\" }, void 0, /*#__PURE__*/\n_jsx(\"li\", {}, void 0, /*#__PURE__*/\n_jsx(\"label\", {}, void 0, label)), /*#__PURE__*/\n\n_jsx(\"li\", { className: \"wide\" }, void 0, /*#__PURE__*/\n_jsx(DateRange, { model: model, onChange: onChange, format: format })));\n\n\n\n\nDateFilter.defaultProps = {\n  onChange: () => {},\n  label: '',\n  format: '' };\n\n\n\n\n\n\n\n\n\nexport default DateFilter;","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import { Field } from 'react-redux-form';\nimport Immutable from 'immutable';\nimport PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport { Translate } from \"../../I18N\";\nimport { NestedMultiselect } from \"../../ReactReduxForms\";\n\nclass NestedFilter extends Component {\n  render() {\n    const { onChange, model, label, property, aggregations } = this.props;\n    return /*#__PURE__*/(\n      _jsx(\"ul\", { className: \"search__filter is-active\" }, void 0, /*#__PURE__*/\n      _jsx(\"li\", {}, void 0, /*#__PURE__*/\n      _jsx(\"label\", {}, void 0, label), /*#__PURE__*/\n      _jsx(\"div\", { className: \"nested-strict\" }, void 0, /*#__PURE__*/\n      _jsx(Field, { model: `${model}.strict` }, void 0, /*#__PURE__*/\n      _jsx(\"input\", { id: `${model}strict`, type: \"checkbox\", onChange: onChange })), /*#__PURE__*/\n\n      _jsx(\"label\", { htmlFor: `${model}strict` }, void 0, /*#__PURE__*/\n      _jsx(\"span\", {}, void 0, \"\\xA0\", /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Strict mode\"))))), /*#__PURE__*/\n\n\n\n\n      _jsx(\"li\", { className: \"wide\" }, void 0, /*#__PURE__*/\n      _jsx(NestedMultiselect, { aggregations: aggregations, property: property, onChange: onChange }))));\n\n\n\n  }}\n\n\nNestedFilter.defaultProps = {\n  onChange: () => {},\n  label: '',\n  aggregations: Immutable.Map() };\n\n\n\n\n\n\n\n\n\n\nexport default NestedFilter;","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import PropTypes from 'prop-types';\nimport React from 'react';\nimport { NumericRange } from \"../../ReactReduxForms\";\n\nconst NumberRangeFilter = ({ onChange, model, label }) => /*#__PURE__*/\n_jsx(\"ul\", { className: \"search__filter is-active\" }, void 0, /*#__PURE__*/\n_jsx(\"li\", {}, void 0, /*#__PURE__*/\n_jsx(\"label\", {}, void 0, label)), /*#__PURE__*/\n\n_jsx(\"li\", { className: \"wide\" }, void 0, /*#__PURE__*/\n_jsx(NumericRange, { model: model, onChange: onChange })));\n\n\n\n\nNumberRangeFilter.defaultProps = {\n  onChange: () => {},\n  label: '' };\n\n\n\n\n\n\n\n\nexport default NumberRangeFilter;","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import { Field } from 'react-redux-form';\nimport PropTypes from 'prop-types';\nimport React from 'react';\n\nconst TextFilter = ({ onChange, model, label }) => /*#__PURE__*/\n_jsx(Field, { model: model }, void 0, /*#__PURE__*/\n_jsx(\"ul\", { className: \"search__filter is-active\" }, void 0, /*#__PURE__*/\n_jsx(\"li\", {}, void 0, /*#__PURE__*/\n_jsx(\"label\", {}, void 0, label)), /*#__PURE__*/\n\n_jsx(\"li\", { className: \"wide\" }, void 0, /*#__PURE__*/\n_jsx(\"input\", { className: \"form-control\", onChange: onChange }))));\n\n\n\n\n\nTextFilter.defaultProps = {\n  onChange: () => {},\n  label: '' };\n\n\n\n\n\n\n\n\nexport default TextFilter;","const _excluded = [\"onChange\", \"properties\", \"translationContext\", \"modelPrefix\", \"storeKey\", \"templates\"];var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}function _extends() {_extends = Object.assign ? Object.assign.bind() : function (target) {for (var i = 1; i < arguments.length; i++) {var source = arguments[i];for (var key in source) {if (Object.prototype.hasOwnProperty.call(source, key)) {target[key] = source[key];}}}return target;};return _extends.apply(this, arguments);}function _objectWithoutProperties(source, excluded) {if (source == null) return {};var target = _objectWithoutPropertiesLoose(source, excluded);var key, i;if (Object.getOwnPropertySymbols) {var sourceSymbolKeys = Object.getOwnPropertySymbols(source);for (i = 0; i < sourceSymbolKeys.length; i++) {key = sourceSymbolKeys[i];if (excluded.indexOf(key) >= 0) continue;if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;target[key] = source[key];}}return target;}function _objectWithoutPropertiesLoose(source, excluded) {if (source == null) return {};var target = {};var sourceKeys = Object.keys(source);var key, i;for (i = 0; i < sourceKeys.length; i++) {key = sourceKeys[i];if (excluded.indexOf(key) >= 0) continue;target[key] = source[key];}return target;}function ownKeys(object, enumerableOnly) {var keys = Object.keys(object);if (Object.getOwnPropertySymbols) {var symbols = Object.getOwnPropertySymbols(object);enumerableOnly && (symbols = symbols.filter(function (sym) {return Object.getOwnPropertyDescriptor(object, sym).enumerable;})), keys.push.apply(keys, symbols);}return keys;}function _objectSpread(target) {for (var i = 1; i < arguments.length; i++) {var source = null != arguments[i] ? arguments[i] : {};i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {_defineProperty(target, key, source[key]);}) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));});}return target;}function _defineProperty(obj, key, value) {if (key in obj) {Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });} else {obj[key] = value;}return obj;}import { connect } from 'react-redux';\nimport Immutable from 'immutable';\nimport PropTypes from 'prop-types';\nimport React from 'react';\n\nimport { t } from \"../../I18N\";\nimport FormGroup from \"../../DocumentForm/components/FormGroup\";\nimport { getAggregationSuggestions } from \"../actions/libraryActions\";\nimport { selectTemplates } from \"../../utils/coreSelectors\";\nimport DateFilter from \"./DateFilter\";\nimport NestedFilter from \"./NestedFilter\";\nimport NumberRangeFilter from \"./NumberRangeFilter\";\nimport SelectFilter from \"./SelectFilter\";\nimport TextFilter from \"./TextFilter\";\n\nconst prepareOptions = (property) => {\n  const filteredProperty = _objectSpread(_objectSpread({},\n  property), {}, {\n    options: property.options.filter((option) => option.id !== 'any') });\n\n  return filteredProperty.options.map((option) => {\n    const finalTranslatedOption = _objectSpread(_objectSpread({},\n    option), {}, {\n      label: t(filteredProperty.content, option.label, undefined, false) });\n\n\n    if (option.options) {\n      const translatedSubOptions = option.options.map((subOption) => _objectSpread(_objectSpread({},\n      subOption), {}, {\n        label: t(filteredProperty.content, subOption.label, undefined, false) }));\n\n      finalTranslatedOption.options = translatedSubOptions;\n    }\n    return finalTranslatedOption;\n  });\n};\n\nexport const FiltersFromProperties = (_ref) => {let {\n    onChange,\n    properties,\n    translationContext,\n    modelPrefix = '',\n    storeKey,\n    templates } = _ref,\n  props = _objectWithoutProperties(_ref, _excluded);return /*#__PURE__*/(\n\n    React.createElement(React.Fragment, null,\n    properties.map((property) => {var _property$inherit;\n      const { type } = (_property$inherit = property.inherit) !== null && _property$inherit !== void 0 && _property$inherit.property ? property.inherit : property;\n\n      const commonProps = {\n        model: `.filters${modelPrefix}.${property.name}`,\n        label: t(translationContext, property.label),\n        onChange };\n\n\n      const propertyOptions = property.options ? prepareOptions(property) : [];\n\n      let filter = /*#__PURE__*/React.createElement(TextFilter, commonProps);\n\n      if (type === 'numeric') {\n        filter = /*#__PURE__*/React.createElement(NumberRangeFilter, commonProps);\n      }\n\n      if (['select', 'multiselect', 'relationship'].includes(type)) {\n        filter = /*#__PURE__*/\n        React.createElement(SelectFilter, _extends({},\n        commonProps, {\n          lookup: getAggregationSuggestions.bind(null, storeKey, property.name),\n          options: propertyOptions,\n          prefix: property.name,\n          showBoolSwitch: property.type === 'multiselect' || property.type === 'relationship',\n          sort: property.type === 'relationship',\n          totalPossibleOptions: property.totalPossibleOptions,\n          allowSelectGroup: true }));\n\n\n      }\n\n      if (type === 'nested') {\n        filter = /*#__PURE__*/\n        React.createElement(NestedFilter, _extends({}, commonProps, { property: property, aggregations: props.aggregations }));\n\n      }\n\n      if (\n      type === 'date' ||\n      type === 'multidate' ||\n      type === 'multidaterange' ||\n      type === 'daterange')\n      {\n        filter = /*#__PURE__*/React.createElement(DateFilter, _extends({}, commonProps, { format: props.dateFormat }));\n      }\n\n      return /*#__PURE__*/_jsx(FormGroup, {}, property.name, filter);\n    })));};\n\n\n\nFiltersFromProperties.defaultProps = {\n  onChange: () => {},\n  dateFormat: '',\n  modelPrefix: '',\n  translationContext: '' };\n\n\n\n\n\n\n\n\n\n\n\n\n\nexport function mapStateToProps(state, props) {\n  return {\n    dateFormat: state.settings.collection.get('dateFormat'),\n    aggregations: state[props.storeKey].aggregations,\n    storeKey: props.storeKey,\n    templates: selectTemplates(state) };\n\n}\n\nexport default connect(mapStateToProps)(FiltersFromProperties);","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import { Form } from 'react-redux-form';\nimport { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\nimport Immutable, { is, fromJS } from 'immutable';\nimport PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport { Icon } from \"../../UI\";\n\nimport debounce from \"../../utils/debounce\";\nimport libraryHelper from \"../helpers/libraryFilters\";\nimport { searchDocuments } from \"../actions/libraryActions\";\nimport { Translate } from \"../../I18N\";\nimport { wrapDispatch } from \"../../Multireducer\";\nimport { FilterTocGeneration } from \"../../ToggledFeatures/tocGeneration\";\nimport { TemplatesFilter } from \"./TemplatesFilter\";\nimport { AssigneeFilter } from \"./AssigneeFilter\";\nimport { PermissionsFilter } from \"./PermissionsFilter\";\nimport { PublishedFilters } from \"./PublishedFilters\";\n\nimport Filters from \"./FiltersFromProperties\";\n\nexport class FiltersForm extends Component {\n  constructor(props) {\n    super(props);\n    this.search = debounce((search) => {\n      this.props.searchDocuments({ search }, this.props.storeKey);\n    }, 300);\n\n    this.submit = this.submit.bind(this);\n    this.onChange = this.onChange.bind(this);\n    this.activateAutoSearch = () => {\n      this.autoSearch = true;\n    };\n\n    this.state = { documentTypeFromFilters: true };\n  }\n\n  shouldComponentUpdate(nextProps, nextState) {\n    return (\n      !is(this.props.fields, nextProps.fields) ||\n      !is(this.props.aggregations, nextProps.aggregations) ||\n      !is(this.props.documentTypes, nextProps.documentTypes) ||\n      !is(this.state.documentTypeFromFilters, nextState.documentTypeFromFilters));\n\n  }\n\n  onChange(search) {\n    if (this.autoSearch) {\n      this.autoSearch = false;\n      this.search(search, this.props.storeKey);\n    }\n  }\n\n  submit(search) {\n    this.props.searchDocuments({ search }, this.props.storeKey);\n  }\n\n  render() {\n    const { templates, documentTypes } = this.props;\n    const aggregations = this.props.aggregations.toJS();\n    const translationContext =\n    documentTypes.get(0) || (templates.get(0) || fromJS({})).get('_id') || 'System';\n    const allFields = this.props.fields.toJS();\n    const showNoValueOnFilters = allFields.size;\n    const fields = libraryHelper.\n    parseWithAggregations(allFields.slice(0), aggregations, showNoValueOnFilters).\n    filter((field) => !field.options || field.options.length);\n    const model = `${this.props.storeKey}.search`;\n\n    return /*#__PURE__*/(\n      _jsx(\"div\", { className: \"filters-box\" }, void 0, /*#__PURE__*/\n      _jsx(Form, { model: model, id: \"filtersForm\", onSubmit: this.submit, onChange: this.onChange }, void 0, /*#__PURE__*/\n      _jsx(PublishedFilters, { onChange: this.activateAutoSearch, aggregations: aggregations }), /*#__PURE__*/\n      _jsx(PermissionsFilter, { onChange: this.activateAutoSearch, aggregations: aggregations }), /*#__PURE__*/\n      _jsx(TemplatesFilter, {}), /*#__PURE__*/\n      _jsx(Filters, {\n        onChange: this.activateAutoSearch,\n        properties: fields,\n        translationContext: translationContext,\n        storeKey: this.props.storeKey }), /*#__PURE__*/\n\n\n      _jsx(FilterTocGeneration, { onChange: this.activateAutoSearch, aggregations: aggregations }), /*#__PURE__*/\n      _jsx(AssigneeFilter, { onChange: this.activateAutoSearch, aggregations: aggregations })),\n\n\n      (() => {\n        const activeTypes = templates.filter((template) =>\n        documentTypes.includes(template.get('_id')));\n\n        if (activeTypes.size > 0 && fields.length === 0) {\n          return /*#__PURE__*/(\n            _jsx(\"div\", { className: \"blank-state\" }, void 0, /*#__PURE__*/\n            _jsx(Icon, { icon: \"times\" }), /*#__PURE__*/\n            _jsx(\"h4\", {}, void 0, /*#__PURE__*/\n            _jsx(Translate, {}, void 0, \"No common filters\")), /*#__PURE__*/\n\n            _jsx(\"p\", {}, void 0, /*#__PURE__*/\n            _jsx(Translate, {}, void 0, \"The combination of entity types doesn't have any filters in common.\")), /*#__PURE__*/\n\n\n\n            _jsx(\"a\", {\n              href: \"https://github.com/huridocs/uwazi/wiki/Filter\",\n              target: \"_blank\",\n              rel: \"noopener noreferrer\" }, void 0, /*#__PURE__*/\n\n            _jsx(Translate, {}, void 0, \"Learn more\"))));\n\n\n\n        }\n\n        return null;\n      })()));\n\n\n  }}\n\n\n\n\n\n\n\n\n\n\n\n\nexport function mapStateToProps(state, props) {\n  return {\n    fields: state[props.storeKey].filters.get('properties'),\n    aggregations: state[props.storeKey].aggregations,\n    templates: state.templates,\n    documentTypes: state[props.storeKey].filters.get('documentTypes') };\n\n}\n\nfunction mapDispatchToProps(dispatch, props) {\n  return bindActionCreators({ searchDocuments }, wrapDispatch(dispatch, props.storeKey));\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(FiltersForm);","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import { t, Translate } from \"../../I18N\";\nimport SidePanel from \"../../Layout/SidePanel\";\nimport { resetFilters } from \"../actions/filterActions\";\nimport FiltersForm from \"./FiltersForm\";\nimport { wrapDispatch } from \"../../Multireducer\";\nimport PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport { Icon } from \"../../UI\";\nimport { hideFilters } from \"../../Entities/actions/uiActions\";\n\nclass LibraryFilters extends Component {\n  reset() {\n    this.props.resetFilters(this.props.storeKey);\n  }\n\n  render() {\n    return /*#__PURE__*/(\n      _jsx(SidePanel, { className: \"library-filters\", mode: this.props.sidePanelMode, open: this.props.open }, void 0, /*#__PURE__*/\n      _jsx(\"div\", { className: \"sidepanel-body\" }, void 0, /*#__PURE__*/\n      _jsx(\"div\", { className: \"sidepanel-title\" }, void 0, /*#__PURE__*/\n      _jsx(\"div\", {}, void 0, t('System', 'Filters configuration')), /*#__PURE__*/\n      _jsx(\"div\", { className: \"filter-buttons\" }, void 0, /*#__PURE__*/\n      _jsx(\"button\", {\n        type: \"button\",\n        className: `closeSidepanel ${\n        this.props.sidePanelMode === 'unpinned-mode' ? '' : 'only-mobile'\n        }`,\n        onClick: this.props.hideFilters,\n        \"aria-label\": \"Close side panel\" }, void 0, /*#__PURE__*/\n\n      _jsx(Icon, { icon: \"times\" })))), /*#__PURE__*/\n\n\n\n      _jsx(FiltersForm, { storeKey: this.props.storeKey })), /*#__PURE__*/\n\n      _jsx(\"div\", { className: \"sidepanel-footer\" }, void 0, /*#__PURE__*/\n      _jsx(\"button\", { type: \"button\", className: \"btn btn-default\", onClick: this.reset.bind(this) }, void 0, /*#__PURE__*/\n      _jsx(Icon, { icon: \"times\" }), /*#__PURE__*/\n      _jsx(\"span\", { className: \"btn-label\" }, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Clear Filters\"))))));\n\n\n\n\n\n  }}\n\n\nLibraryFilters.defaultProps = {\n  open: false,\n  storeKey: 'library',\n  sidePanelMode: '',\n  hideFilters: () => {} };\n\n\n\n\n\n\n\n\n\n\nfunction mapStateToProps(state, props) {\n  const noDocumentSelected = state[props.storeKey].ui.get('selectedDocuments').size === 0;\n  const isFilterShown = state[props.storeKey].ui.get('filtersPanel') !== false;\n  return {\n    open: noDocumentSelected && isFilterShown };\n\n}\n\nfunction mapDispatchToProps(dispatch, props) {\n  return bindActionCreators({ resetFilters, hideFilters }, wrapDispatch(dispatch, props.storeKey));\n}\n\nexport { LibraryFilters, mapStateToProps };\n\nexport default connect(mapStateToProps, mapDispatchToProps)(LibraryFilters);","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}function _defineProperty(obj, key, value) {if (key in obj) {Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });} else {obj[key] = value;}return obj;} /* eslint-disable max-len */\nimport React, { Component } from 'react';\n\n\n\n\n\n\n\n\n\n\n\nconst defaultProps = {\n  allowClose: true,\n  children: '' };\n\n\nexport class Notice extends Component {\n\n\n  static learnIconSvg() {\n    return /*#__PURE__*/(\n      _jsx(\"svg\", {\n        width: \"29\",\n        height: \"29\",\n        viewBox: \"0 0 29 29\",\n        fill: \"none\",\n        xmlns: \"http://www.w3.org/2000/svg\" }, void 0, /*#__PURE__*/\n\n      _jsx(\"circle\", { cx: \"14.5\", cy: \"14.5\", r: \"14.5\", fill: \"#2B56C1\" }), /*#__PURE__*/\n      _jsx(\"path\", {\n        d: \"M14.8971 16.9227C14.8314 16.9446 14.7657 16.9665 14.7 16.9665C14.6343 16.9665 14.5686 16.9446 14.503 16.9227L7.86842 14.3389V18.1927C7.86842 20.8202 12.6418 21.1048 14.7 21.1048C16.7583 21.1048 21.5316 20.8202 21.5316 18.1927V14.3389L14.8971 16.9227Z\",\n        fill: \"#FAFBFF\" }), /*#__PURE__*/\n\n      _jsx(\"path\", {\n        d: \"M24.1372 11.6238L14.8533 8.03284C14.7438 7.98905 14.6343 7.98905 14.5467 8.03284L5.28465 11.6238C5.10948 11.6895 5 11.8428 5 12.0398C5 12.2369 5.10948 12.3902 5.28465 12.4559L14.5467 16.0249C14.5905 16.0468 14.6562 16.0468 14.7 16.0468C14.7438 16.0468 14.8095 16.0468 14.8533 16.0249L24.1154 12.4559C24.2905 12.3902 24.4 12.2369 24.4 12.0398C24.4 11.8428 24.2905 11.6895 24.1372 11.6238Z\",\n        fill: \"#FAFBFF\" })));\n\n\n\n  }\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isHidden: false };\n\n\n    this.close = this.close.bind(this);\n  }\n\n  close() {\n    this.setState({ isHidden: true });\n  }\n\n  render() {\n    const { children, title, allowClose } = this.props;\n    const { isHidden } = this.state;\n\n    return /*#__PURE__*/(\n      _jsx(\"div\", { className: `notice ${isHidden ? 'is-hidden' : ''}` }, void 0, /*#__PURE__*/\n      _jsx(\"div\", { className: \"header\" }, void 0, /*#__PURE__*/\n      _jsx(\"span\", { className: \"icon\" }, void 0, Notice.learnIconSvg()), /*#__PURE__*/\n      _jsx(\"span\", { className: \"title\" }, void 0, title),\n      allowClose && /*#__PURE__*/\n      _jsx(\"button\", { className: \"close-notice\", onClick: this.close, type: \"button\", \"no-translate\": true }, void 0, \"X\")), /*#__PURE__*/\n\n\n\n\n      _jsx(\"div\", { className: \"main\" }, void 0, children)));\n\n\n  }}_defineProperty(Notice, \"defaultProps\", defaultProps);","function ownKeys(object, enumerableOnly) {var keys = Object.keys(object);if (Object.getOwnPropertySymbols) {var symbols = Object.getOwnPropertySymbols(object);enumerableOnly && (symbols = symbols.filter(function (sym) {return Object.getOwnPropertyDescriptor(object, sym).enumerable;})), keys.push.apply(keys, symbols);}return keys;}function _objectSpread(target) {for (var i = 1; i < arguments.length; i++) {var source = null != arguments[i] ? arguments[i] : {};i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {_defineProperty(target, key, source[key]);}) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));});}return target;}function _defineProperty(obj, key, value) {if (key in obj) {Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });} else {obj[key] = value;}return obj;} /** @format */\n\nimport { Component } from 'react';\nimport { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\n\n/*\nStateSelector allows making sub-components state-dependent without\nadding that state to the parent's props, thus reducing the re-rendering of\nthe parent.\n\nUsage:\nclass Parent extends Component {\n  render() {\n    return (\n      <div>\n        <Static Parts ... />\n        <StateSelector myVal={createSelector(state => state.path.to.obj, value => value)}>\n          {({ myVal }) => (<Dynamic Parts propVal={myVal} ... />)}\n        </StateSelector>\n        <More Static Parts ... />\n      </div>\n    );\n  }\n}\n*/\nexport class StateSelectorBase extends Component {\n  render() {\n    return this.props.children(this.props);\n  }}\n\n\n\n\n\n\nexport const StateSelector = connect((state, ownProps) =>\nObject.keys(ownProps).\nfilter((k) => !['children'].includes(k)).\nreduce((res, k) => _objectSpread(_objectSpread({}, res), {}, { [k]: ownProps[k](state) }), {}))(\nStateSelectorBase);","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}function _defineProperty(obj, key, value) {if (key in obj) {Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });} else {obj[key] = value;}return obj;}import { t, Translate } from \"../../I18N\";\nimport { Notice } from \"../../Thesauri/Notice\";\n\nimport SidePanel from \"../../Layout/SidePanel\";\nimport { unselectAllDocuments } from \"../actions/libraryActions\";\nimport * as metadataActions from \"../../Metadata/actions/actions\";\nimport { translateOptions } from \"../../Metadata/components/MetadataFormFields\";\nimport { wrapDispatch } from \"../../Multireducer\";\nimport { MultiSelectTristate } from \"../../ReactReduxForms\";\nimport { StateSelector } from \"../../Review/components/StateSelector\";\nimport Immutable from 'immutable';\nimport PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport { createSelector } from 'reselect';\n\n\n\n\nimport { Icon } from \"../../UI\";\nimport {\nmaybeSaveQuickLabels,\nselectedDocumentsChanged,\ntoggleQuickLabelAutoSave } from \"../actions/quickLabelActions\";\n\n\nconst defaultProps = {\n  formKey: 'library.sidepanel.quickLabelMetadata',\n  quickLabelMetadata: {},\n  quickLabelThesaurus: undefined,\n  opts: {},\n  selectedDocuments: Immutable.fromJS([]),\n  templates: Immutable.fromJS([]),\n  unselectAllDocuments: () => {},\n  toggleQuickLabelAutoSave: () => {},\n  selectedDocumentsChanged: () => {},\n  maybeSaveQuickLabels: (_force) => {},\n  multipleUpdate: (_o, _diff) => {} };\n\n\n\n\nexport const selectIsPristine = createSelector(\n(state) => state.library.sidepanel.quickLabelMetadataForm.$form.pristine,\n(value) => value);\n\n\nexport class QuickLabelPanelBase extends Component {\n\n\n\n\n\n\n  constructor(props) {\n    super(props);\n    this.publish = this.publish.bind(this);\n  }\n\n  publish() {\n    this.context.confirm({\n      accept: () => {\n        this.props.multipleUpdate(this.props.selectedDocuments, { published: true });\n      },\n      title: 'Confirm',\n      message: 'Confirm publish multiple items',\n      type: 'success' });\n\n  }\n\n  renderAutoSaveToggle() {\n    const { opts } = this.props;\n    return /*#__PURE__*/(\n      _jsx(\"button\", {\n        type: \"button\",\n        onClick: () => this.props.toggleQuickLabelAutoSave(),\n        className: `btn btn-default btn-header btn-toggle-${opts.autoSave ? 'on' : 'off'}` }, void 0, /*#__PURE__*/\n\n      _jsx(Icon, { icon: opts.autoSave ? 'toggle-on' : 'toggle-off' }), /*#__PURE__*/\n      _jsx(\"span\", { className: \"btn-label\" }, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Auto-save\"))));\n\n\n\n  }\n\n  renderButtons(canBePublished) {\n    return /*#__PURE__*/(\n      _jsx(StateSelector, { isPristine: selectIsPristine }, void 0,\n      ({ isPristine }) => {\n        const btnClass = isPristine ? 'btn btn-default btn-disabled' : 'btn btn-default';\n        return /*#__PURE__*/(\n          React.createElement(React.Fragment, null,\n          canBePublished && isPristine && /*#__PURE__*/\n          _jsx(\"button\", { type: \"button\", className: \"publish btn btn-success\", onClick: this.publish }, void 0, /*#__PURE__*/\n          _jsx(Icon, { icon: \"paper-plane\" }), /*#__PURE__*/\n          _jsx(\"span\", { className: \"btn-label\" }, void 0, /*#__PURE__*/\n          _jsx(Translate, {}, void 0, \"Publish\"))), /*#__PURE__*/\n\n\n\n          _jsx(\"button\", {\n            type: \"button\",\n            onClick: () => this.props.selectedDocumentsChanged(),\n            className: `cancel-edit-metadata ${!isPristine ? 'btn-danger' : ''} ${btnClass}` }, void 0, /*#__PURE__*/\n\n          _jsx(Icon, { icon: \"undo\" }), /*#__PURE__*/\n          _jsx(\"span\", { className: \"btn-label\" }, void 0, /*#__PURE__*/\n          _jsx(Translate, {}, void 0, \"Discard changes\"))), /*#__PURE__*/\n\n\n          _jsx(\"button\", {\n            type: \"button\",\n            onClick: () => this.props.maybeSaveQuickLabels(true),\n            className: `save-metadata ${btnClass}` }, void 0, /*#__PURE__*/\n\n          _jsx(Icon, { icon: \"save\" }), /*#__PURE__*/\n          _jsx(\"span\", { className: \"btn-label\" }, void 0, /*#__PURE__*/\n          _jsx(Translate, {}, void 0, \"Save document(s)\")))));\n\n\n\n\n      }));\n\n\n  }\n\n  renderProp(propName) {var _prop$get;\n    const { quickLabelThesaurus, templates } = this.props;\n    const prop = templates.\n    map((tmpl) => {var _tmpl$get;return tmpl === null || tmpl === void 0 ? void 0 : (_tmpl$get = tmpl.get('properties')) === null || _tmpl$get === void 0 ? void 0 : _tmpl$get.find((p) => (p === null || p === void 0 ? void 0 : p.get('name')) === propName);}).\n    filter((p) => !!p);\n    return /*#__PURE__*/(\n      _jsx(\"div\", { className: \"form-group\" }, propName, /*#__PURE__*/\n      _jsx(\"ul\", { className: \"search__filter is-active\" }, void 0, /*#__PURE__*/\n      _jsx(\"li\", { className: \"title\" }, void 0, /*#__PURE__*/\n      _jsx(\"label\", {}, void 0, t('System', prop.size ? (_prop$get = prop.get(0)) === null || _prop$get === void 0 ? void 0 : _prop$get.get('label') : propName))), /*#__PURE__*/\n\n      _jsx(\"li\", { className: \"wide\" }), /*#__PURE__*/\n      _jsx(MultiSelectTristate, {\n        model: `library.sidepanel.quickLabelMetadata.${propName}`,\n        optionsValue: \"id\",\n        options: translateOptions(quickLabelThesaurus),\n        prefix: `library.sidepanel.quickLabelMetadata.${propName}`,\n        sort: true,\n        placeholder: `${t('System', 'Search', null, false)} '${quickLabelThesaurus.get(\n        'name')\n        }'` }))));\n\n\n\n\n  }\n\n  static renderNotice() {\n    return /*#__PURE__*/(\n      _jsx(Notice, { title: \"Label your collection\" }, void 0, /*#__PURE__*/\n      _jsx(\"div\", {}, void 0, /*#__PURE__*/\n      _jsx(\"div\", {}, void 0, /*#__PURE__*/\n      _jsx(Translate, { translationKey: \"Label your collection note\" }, void 0, \"Note: Make the sample set of documents for each topic diverse and representative. For example, use various methods to find sample documents and don't just search for the term \\\"education\\\" to find documents for the topic \\\"Education\\\".\"), /*#__PURE__*/\n\n\n\n\n      _jsx(\"br\", {}), /*#__PURE__*/\n      _jsx(\"br\", {}), /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Return to the thesaurus page when you finished labeling to start learning.\")))));\n\n\n\n\n\n\n  }\n\n  renderSidePanelBody() {\n    const { quickLabelThesaurus, quickLabelMetadata } = this.props;\n    let content;\n    if (!quickLabelThesaurus) {\n      content = /*#__PURE__*/\n      _jsx(\"div\", {}, void 0,\n      QuickLabelPanelBase.renderNotice(), /*#__PURE__*/\n      _jsx(\"label\", { className: \"errormsg\" }, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Oops! We couldn't find the thesaurus you're trying to edit. Try navigating back to this page through Settings.\")));\n\n\n\n\n\n\n    } else if (!Object.keys(quickLabelMetadata).length) {\n      content = /*#__PURE__*/\n      _jsx(\"div\", {}, void 0,\n      QuickLabelPanelBase.renderNotice(), /*#__PURE__*/\n      _jsx(\"label\", { className: \"errormsg\" }, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Nothing to see here! The selected documents are not using the selected thesaurus\"), \"\\xA0\", /*#__PURE__*/\n\n\n\n      _jsx(\"b\", {}, void 0, quickLabelThesaurus.get('name')), \".\", ' ', /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Try selecting other documents.\")));\n\n\n\n    } else {\n      content = /*#__PURE__*/\n      _jsx(\"div\", {}, void 0,\n      QuickLabelPanelBase.renderNotice(),\n      Object.keys(quickLabelMetadata).\n      sort().\n      map((p) => this.renderProp(p)));\n\n\n    }\n\n    return content;\n  }\n\n  render() {\n    const { selectedDocuments } = this.props;\n    const canBePublished = this.props.selectedDocuments.reduce((previousCan, entity) => {\n      const isEntity = !entity.get('file');\n      return (\n        !!previousCan && (\n        !!entity.get('processed') || isEntity) &&\n        !entity.get('published') &&\n        !!entity.get('template'));\n\n    }, true);\n\n    return /*#__PURE__*/(\n      _jsx(SidePanel, { open: selectedDocuments.size > 0, className: \"quick-label\" }, void 0, /*#__PURE__*/\n      _jsx(\"div\", { className: \"sidepanel-header\" }, void 0, /*#__PURE__*/\n      _jsx(Icon, { icon: \"check\" }), ' ', /*#__PURE__*/\n      _jsx(\"span\", {}, void 0,\n      selectedDocuments.size, \" \", /*#__PURE__*/_jsx(Translate, {}, void 0, \"selected\")),\n\n      this.renderAutoSaveToggle(), /*#__PURE__*/\n      _jsx(\"button\", {\n        type: \"button\",\n        className: \"closeSidepanel close-modal\",\n        onClick: () => this.props.unselectAllDocuments() }, void 0, /*#__PURE__*/\n\n      _jsx(Icon, { icon: \"times\" }))), /*#__PURE__*/\n\n\n      _jsx(\"div\", { className: \"sidepanel-body\" }, void 0, this.renderSidePanelBody()), /*#__PURE__*/\n      _jsx(\"div\", { className: \"sidepanel-footer\" }, void 0, this.renderButtons(canBePublished))));\n\n\n  }}_defineProperty(QuickLabelPanelBase, \"defaultProps\", defaultProps);_defineProperty(QuickLabelPanelBase, \"contextTypes\", { confirm: PropTypes.func });\n\n\nexport const selectquickLabelThesaurus = createSelector(\n(state) =>\nstate.thesauris.find(\n(thes) => thes.get('_id') === state.library.sidepanel.quickLabelState.get('thesaurus')),\n\n(thes) => thes);\n\n\nexport const mapStateToProps = (state) => ({\n  selectedDocuments: state.library.ui.get('selectedDocuments'),\n  quickLabelMetadata: state.library.sidepanel.quickLabelMetadata,\n  quickLabelThesaurus: selectquickLabelThesaurus(state),\n  opts: state.library.sidepanel.quickLabelState.toJS(),\n  templates: createSelector(\n  (s) => s.templates,\n  (tmpls) => tmpls)(\n  state) });\n\n\nfunction mapDispatchToProps(dispatch) {\n  return bindActionCreators(\n  {\n    unselectAllDocuments,\n    toggleQuickLabelAutoSave,\n    selectedDocumentsChanged,\n    maybeSaveQuickLabels,\n    multipleUpdate: metadataActions.multipleUpdate },\n\n  wrapDispatch(dispatch, 'library'));\n\n}\n\nexport const QuickLabelPanel = connect(mapStateToProps, mapDispatchToProps)(QuickLabelPanelBase);","import * as types from \"./actionTypes\";\n\nexport function showModal(modal, data) {\n  return {\n    type: types.SHOW_MODAL,\n    modal,\n    data };\n\n}\n\nexport function hideModal(modal) {\n  return {\n    type: types.HIDE_MODAL,\n    modal };\n\n}","import * as actions from \"./actions/modalActions\";\n\nexport default { actions };","import { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport { wrapDispatch } from \"../../Multireducer\";\n\nimport { saveEntity } from \"../actions/libraryActions\";\nimport { actions, MetadataForm } from \"../../Metadata\";\n\nfunction mapStateToProps(state, props) {\n  const { templates } = state;\n  const { thesauris } = state;\n  return {\n    model: `${props.storeKey}.sidepanel.metadata`,\n    templateId: state[props.storeKey].sidepanel.metadata.template,\n    templates,\n    thesauris };\n\n}\n\nfunction mapDispatchToProps(dispatch, props) {\n  return bindActionCreators(\n  { changeTemplate: actions.changeTemplate, onSubmit: saveEntity },\n  wrapDispatch(dispatch, props.storeKey));\n\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(MetadataForm);","import { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\nimport { actions as formActions } from 'react-redux-form';\nimport Immutable from 'immutable';\n\nimport { DocumentSidePanel } from \"../../Documents\";\nimport { actions as actionCreators } from \"../../BasicReducer\";\nimport { actions } from \"../../Metadata\";\nimport { deleteDocument, searchSnippets } from \"../actions/libraryActions\";\nimport { deleteEntity } from \"../../Entities/actions/actions\";\nimport { wrapDispatch } from \"../../Multireducer\";\nimport { entityDefaultDocument } from \"../../../shared/entityDefaultDocument\";\nimport modals from \"../../Modals\";\n\nimport {\ngetDocumentReferences,\nunselectAllDocuments,\nsaveDocument } from \"../actions/libraryActions\";\n\nimport EntityForm from \"../containers/EntityForm\";\n\nconst getTemplates = (state) => state.templates;\n\nconst mapStateToProps = (state, props) => {\n  const library = state[props.storeKey];\n  const doc = library.ui.get('selectedDocuments').first() || Immutable.fromJS({ documents: [] });\n  const defaultLanguage = state.settings.collection.get('languages').find((l) => l.get('defautl'));\n  const file = entityDefaultDocument(\n  doc.get('documents') ? doc.get('documents').toJS() : [{}],\n  doc.get('language'),\n  defaultLanguage);\n\n\n  return {\n    open: library.ui.get('selectedDocuments').size === 1,\n    doc,\n    file,\n    references: library.sidepanel.references,\n    tab: library.sidepanel.tab,\n    docBeingEdited: !!Object.keys(library.sidepanel.metadata).length,\n    searchTerm: library.search.searchTerm,\n    formDirty: !library.sidepanel.metadataForm.$form.pristine,\n    templates: getTemplates(state),\n    formPath: `${props.storeKey}.sidepanel.metadata`,\n    readOnly: true,\n    EntityForm };\n\n};\n\nfunction mapDispatchToProps(dispatch, props) {\n  return bindActionCreators(\n  {\n    loadInReduxForm: actions.loadInReduxForm,\n    getDocumentReferences,\n    closePanel: unselectAllDocuments,\n    resetForm: () => (_dispatch) => {\n      _dispatch(formActions.setInitial(`${props.storeKey}.sidepanel.metadata`));\n      _dispatch(formActions.reset(`${props.storeKey}.sidepanel.metadata`));\n    },\n    saveDocument,\n    deleteDocument,\n    searchSnippets,\n    deleteEntity,\n    showModal: modals.actions.showModal,\n    showTab: (tab) => actionCreators.set(`${props.storeKey}.sidepanel.tab`, tab) },\n\n  wrapDispatch(dispatch, props.storeKey));\n\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(DocumentSidePanel);","import { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport { wrapDispatch } from \"../../Multireducer\";\n\nimport {\nunselectAllDocuments,\nupdateSelectedEntities,\nupdateEntities,\ngetAndSelectDocument } from \"../actions/libraryActions\";\n\nimport { SelectMultiplePanel } from \"../../Metadata\";\n\nfunction mapStateToProps(state, props) {\n  return {\n    formKey: `${props.storeKey}.sidepanel.multipleEdit`,\n    state: state[props.storeKey].sidepanel.multipleEdit,\n    formState: state[props.storeKey].sidepanel.multipleEditForm,\n    templates: state.templates,\n    entitiesSelected: state[props.storeKey].ui.get('selectedDocuments'),\n    thesauris: state.thesauris,\n    storeKey: props.storeKey };\n\n}\n\nfunction mapDispatchToProps(dispatch, props) {\n  return bindActionCreators(\n  {\n    unselectAllDocuments,\n    updateSelectedEntities,\n    updateEntities,\n    getAndSelectDocument },\n\n  wrapDispatch(dispatch, props.storeKey));\n\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SelectMultiplePanel);","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\n\nimport libraryHelpers from \"../helpers/libraryFilters\";\n\nfunction getPropertyText(prop, values) {\n  const options = values.map((value) => prop.options.find((o) => o.id === value));\n  const labels = options.map((o) => o && o.label).filter((l) => l);\n  return labels.join(', ');\n}\n\nfunction getPropertiesTexts(query, properties) {\n  return Object.keys(query.filters).reduce((descriptions, propName) => {\n    const { values } = query.filters[propName];\n    const property = properties.find((p) => p.name === propName);\n    if (!values || !property) {\n      return descriptions;\n    }\n    const propText = `${property.label}: ${getPropertyText(property, values)}`;\n    return [...descriptions, propText];\n  }, []);\n}\n\nexport class SearchDescription extends Component {\n  render() {\n    const { searchTerm, query, properties } = this.props;\n    const descriptions = query && query.filters ? getPropertiesTexts(query, properties) : [];\n    const descriptionText = descriptions.length ? ` ${descriptions.join(' - ')}` : '';\n    return /*#__PURE__*/(\n      _jsx(\"span\", {}, void 0,\n      searchTerm,\n      descriptionText));\n\n\n  }}\n\n\nSearchDescription.defaultProps = {\n  query: undefined };\n\n\n\n\n\n\n\n\nexport function mapStateToProps({ templates, relationTypes }, { query }) {\n  const properties =\n  query && query.filters ?\n  libraryHelpers.URLQueryToState(query, templates.toJS(), relationTypes.toJS()).properties :\n  [];\n  return {\n    properties };\n\n}\n\nexport default connect(mapStateToProps)(SearchDescription);","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\n\nimport { I18NLink } from \"../../I18N\";\nimport SearchDescription from \"../../Library/components/SearchDescription\";\nimport { Icon, ProgressBar } from \"../../UI\";\n\nimport { deleteSearch, resumeSearch, stopSearch } from \"../actions/actions\";\n\nexport class SearchItem extends Component {\n  constructor(props) {\n    super(props);\n    this.delete = this.delete.bind(this);\n    this.handleResumeClicked = this.handleResumeClicked.bind(this);\n    this.handleStopClicked = this.handleStopClicked.bind(this);\n  }\n\n  delete(e) {\n    const { confirm } = this.context;\n    const { onDeleteClicked, search } = this.props;\n    e.preventDefault();\n    confirm({\n      accept: onDeleteClicked.bind(this, search._id),\n      title: 'Confirm delete',\n      message: 'Are you sure you want to delete this search?' });\n\n  }\n\n  handleStopClicked(e) {\n    const { search, onStopClicked } = this.props;\n    onStopClicked(search._id);\n    e.preventDefault();\n  }\n\n  handleResumeClicked(e) {\n    const { search, onResumeClicked } = this.props;\n    onResumeClicked(search._id);\n    e.preventDefault();\n  }\n\n  renderButtons() {\n    const { search } = this.props;\n    const { status } = search;\n    return /*#__PURE__*/(\n      _jsx(\"div\", { className: \"buttons\" }, void 0, /*#__PURE__*/\n      _jsx(\"button\", { type: \"button\", className: \"btn btn-danger delete-search btn-xs\", onClick: this.delete }, void 0, /*#__PURE__*/\n      _jsx(Icon, { icon: \"trash-alt\", size: \"sm\" })),\n\n      ['inProgress', 'pending'].includes(status) && /*#__PURE__*/\n      _jsx(\"button\", {\n        type: \"button\",\n        className: \"btn btn-warning stop-search btn-xs\",\n        onClick: this.handleStopClicked }, void 0, /*#__PURE__*/\n\n      _jsx(Icon, { icon: \"stop\", size: \"sm\" })),\n\n\n      status === 'stopped' && /*#__PURE__*/\n      _jsx(\"button\", {\n        type: \"button\",\n        className: \"btn btn-success resume-search btn-xs\",\n        onClick: this.handleResumeClicked }, void 0, /*#__PURE__*/\n\n      _jsx(Icon, { icon: \"play\", size: \"sm\" }))));\n\n\n\n\n  }\n\n  render() {\n    const { search } = this.props;\n    const { status, documents } = search;\n    const completed = documents.filter((doc) => doc.status === 'completed').length;\n    const max = documents.length;\n    return /*#__PURE__*/(\n      _jsx(I18NLink, { className: \"semantic-search-list-item\", to: `semanticsearch/${search._id}` }, void 0, /*#__PURE__*/\n      _jsx(\"div\", { className: \"item-header\" }, void 0, /*#__PURE__*/\n      _jsx(\"div\", { className: \"title\" }, void 0, /*#__PURE__*/\n      _jsx(SearchDescription, { searchTerm: search.searchTerm, query: search.query })),\n\n      this.renderButtons()), /*#__PURE__*/\n\n      _jsx(\"div\", {}, void 0, status !== 'completed' && /*#__PURE__*/_jsx(ProgressBar, { value: completed, max: max }))));\n\n\n  }}\n\n\nSearchItem.contextTypes = {\n  confirm: PropTypes.func };\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nexport function mapDispatchToProps(dispatch) {\n  return bindActionCreators(\n  {\n    onDeleteClicked: deleteSearch,\n    onStopClicked: stopSearch,\n    onResumeClicked: resumeSearch },\n\n  dispatch);\n\n}\n\nexport default connect(null, mapDispatchToProps)(SearchItem);","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\n\nimport SearchItem from \"./SearchItem\";\n\nconst SearchList = ({ searches }) => /*#__PURE__*/\n_jsx(\"div\", { className: \"semantic-search-list\" }, void 0,\nsearches.map((search) => /*#__PURE__*/\n_jsx(SearchItem, { search: search }, search._id)));\n\n\n\n\nSearchList.defaultProps = {\n  searches: [] };\n\n\n\n\n\n\n\n\n\n\n\n\n\nexport { SearchList };\nexport default connect()(SearchList);","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport { List } from 'immutable';\nimport { socket } from \"../../socket\";\nimport { Icon } from \"../../UI\";\nimport ShowIf from \"../../App/ShowIf\";\n\nimport SidePanel from \"../../Layout/SidePanel\";\nimport {\nfetchSearches,\nsubmitNewSearch,\nregisterForUpdates,\nupdateSearch,\nhideSemanticSearch } from \"../actions/actions\";\n\n\nimport SearchList from \"./SearchList\";\n\nexport class SemanticSearchSidePanel extends Component {\n  constructor(props) {\n    super(props);\n\n    this.registeredForUpdates = false;\n    this.onSearchUpdated = this.onSearchUpdated.bind(this);\n\n    socket.on('semanticSearchUpdated', this.onSearchUpdated);\n  }\n\n  componentDidMount() {\n    if (!this.registeredForUpdates) {\n      this.props.registerForUpdates();\n      this.registeredForUpdates = true;\n    }\n    this.props.fetchSearches();\n  }\n\n  componentWillUnmount() {\n    socket.removeListener('semanticSearchUpdated', this.onSearchUpdated);\n  }\n\n  onSearchUpdated({ updatedSearch }) {\n    this.props.updateSearch(updatedSearch);\n  }\n\n  render() {\n    const searches = this.props.searches.toJS();\n    const { open } = this.props;\n    return /*#__PURE__*/(\n      _jsx(SidePanel, { open: open, className: \"metadata-sidepanel semantic-search\" }, void 0, /*#__PURE__*/\n      _jsx(\"div\", { className: \"sidepanel-header\" }, void 0, /*#__PURE__*/\n      _jsx(\"button\", {\n        type: \"button\",\n        className: \"closeSidepanel close-modal\",\n        onClick: this.props.hideSemanticSearch }, void 0, /*#__PURE__*/\n\n      _jsx(Icon, { icon: \"times\" }))), /*#__PURE__*/\n\n\n      _jsx(\"div\", { className: \"sidepanel-body\" }, void 0, /*#__PURE__*/\n      _jsx(ShowIf, { if: !!searches }, void 0, /*#__PURE__*/\n      _jsx(SearchList, { searches: searches })))));\n\n\n\n\n  }}\n\n\n\n\n\n\n\n\n\n\n\nexport function mapStateToProps(state) {\n  return {\n    searches: state.semanticSearch.searches,\n    search: state.semanticSearch.search,\n    open: state.semanticSearch.showSemanticSearchPanel };\n\n}\n\nexport function mapDispatchToProps(dispatch) {\n  return bindActionCreators(\n  {\n    fetchSearches,\n    submitNewSearch,\n    registerForUpdates,\n    updateSearch,\n    hideSemanticSearch },\n\n  dispatch);\n\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SemanticSearchSidePanel);","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };} /** @format */\n\nimport PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport { List } from 'immutable';\nimport \"./scss/stackTrace.scss\";\nimport { Icon } from \"../../UI\";\n\nconst conformValidations = (expand, validations) => {\n  if (!expand || !validations) {\n    return null;\n  }\n\n  return /*#__PURE__*/(\n    React.createElement(React.Fragment, null,\n    validations.reduce(\n    (memo, v, i) =>\n    memo.concat( /*#__PURE__*/\n    // eslint-disable-next-line react/no-array-index-key\n    _jsx(\"div\", {}, i,\n    v.get('message'), \": \", v.get('instancePath'))),\n\n\n    [])));\n\n\n\n};\n\nclass StackTrace extends Component {\n  constructor(props) {\n    super(props);\n    this.state = { expand: false };\n    this.toggle = this.toggle.bind(this);\n  }\n\n  toggle() {\n    const { expand } = this.state;\n    this.setState({ expand: !expand });\n  }\n\n  render() {\n    const { message, validations } = this.props;\n    const { expand } = this.state;\n    const formatedMessage = expand ? message : `${message.substr(0, 50)}...`;\n    return /*#__PURE__*/(\n      _jsx(\"div\", { className: \"stack-trace\", onClick: this.toggle }, void 0, /*#__PURE__*/\n      _jsx(Icon, { icon: \"sort\" }), \"\\xA0\", /*#__PURE__*/\n\n      _jsx(\"span\", {}, void 0, formatedMessage),\n      conformValidations(expand, validations)));\n\n\n  }}\n\n\nStackTrace.defaultProps = {\n  message: '',\n  validations: null };\n\n\n\n\n\n\n\nexport default StackTrace;","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };} /** @format */\n\nimport { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport { Translate } from \"../../I18N\";\nimport { Icon } from \"../../UI\";\nimport { bindActionCreators } from 'redux';\nimport { closeImportProgress } from \"../actions/uploadsActions\";\nimport Immutable from 'immutable';\nimport StackTrace from \"../../components/Elements/StackTrace\";\n\nexport class ImportProgress extends Component {\n  render() {\n    const {\n      close,\n      importState: { importStart, importProgress, importError, importEnd } } =\n    this.props;\n    if (!importStart && !importProgress) {\n      return false;\n    }\n    if (importEnd) {\n      return /*#__PURE__*/(\n        _jsx(\"div\", { className: \"alert alert-info\" }, void 0, /*#__PURE__*/\n        _jsx(Icon, { icon: \"check\", size: \"2x\" }), /*#__PURE__*/\n        _jsx(\"div\", { className: \"force-ltr\" }, void 0, /*#__PURE__*/\n        _jsx(Translate, {}, void 0, \"Import completed:\"), \"\\xA0\", importProgress, ' ', /*#__PURE__*/\n        _jsx(Translate, {}, void 0, \"created\"), /*#__PURE__*/\n        _jsx(\"br\", {}), /*#__PURE__*/\n        _jsx(Translate, {}, void 0, \"Indexing entities may take a few minutes\")), /*#__PURE__*/\n\n        _jsx(Icon, { style: { cursor: 'pointer' }, icon: \"times\", onClick: close })));\n\n\n    }\n\n    if (importError.get('prettyMessage')) {\n      return /*#__PURE__*/(\n        _jsx(\"div\", {}, void 0, /*#__PURE__*/\n        _jsx(\"div\", { className: \"alert alert-danger\" }, void 0, /*#__PURE__*/\n        _jsx(Icon, { icon: \"exclamation-triangle\", size: \"2x\" }), /*#__PURE__*/\n        _jsx(\"div\", { className: \"force-ltr\" }, void 0, /*#__PURE__*/\n        _jsx(Translate, {}, void 0, \"The import process threw an error:\")), /*#__PURE__*/\n\n        _jsx(Icon, { style: { cursor: 'pointer' }, icon: \"times\", onClick: close })), /*#__PURE__*/\n\n        _jsx(StackTrace, {\n          message: importError.get('prettyMessage'),\n          validations: importError.get('validations') })));\n\n\n\n    }\n\n    return /*#__PURE__*/(\n      _jsx(\"div\", { className: \"alert alert-info\" }, void 0, /*#__PURE__*/\n      _jsx(Icon, { icon: \"cog\", size: \"2x\" }), /*#__PURE__*/\n      _jsx(\"div\", { className: \"force-ltr\" }, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Importing data in progress\"), \": \", importProgress)));\n\n\n\n  }}\n\n\n\n\n\n\n\n\n\n\n\n\nexport const mapStateToProps = (state) => ({\n  importState: state.importEntities });\n\n\nfunction mapDispatchToProps(dispatch) {\n  return bindActionCreators({ close: closeImportProgress }, dispatch);\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ImportProgress);","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import { connect } from 'react-redux';\nimport Immutable from 'immutable';\nimport PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport { bindActionCreators } from 'redux';\n\nimport { Translate } from \"../../I18N\";\nimport SidePanel from \"../../Layout/SidePanel\";\nimport { Icon } from \"../../UI\";\nimport { LocalForm, Control } from 'react-redux-form';\nimport { closeImportPanel, importData } from \"../actions/uploadsActions\";\nimport ImportProgress from \"./ImportProgress\";\n\nexport class ImportPanel extends Component {\n  constructor(props) {\n    super(props);\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.close = this.close.bind(this);\n  }\n\n  handleSubmit(values) {\n    this.props.importData(values.file, values.template);\n  }\n\n  close() {\n    this.props.closeImportPanel();\n  }\n\n  renderForm() {\n    const { templates } = this.props;\n    const template = templates.find((templ) => templ.get('default')).get('_id');\n    return /*#__PURE__*/(\n      _jsx(\"div\", {}, void 0, /*#__PURE__*/\n      _jsx(\"div\", { className: \"alert alert-info\" }, void 0, /*#__PURE__*/\n      _jsx(Icon, { icon: \"info-circle\", size: \"2x\" }), /*#__PURE__*/\n      _jsx(\"div\", { className: \"force-ltr\" }, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Upload a ZIP or CSV file.\"), \"\\xA0\", /*#__PURE__*/\n      _jsx(\"a\", {\n        rel: \"noopener noreferrer\",\n        href: \"https://github.com/huridocs/uwazi/wiki/Import-CSV\",\n        target: \"_blank\" }, void 0, /*#__PURE__*/\n\n      _jsx(Translate, {}, void 0, \"Import instructions\")))), /*#__PURE__*/\n\n\n\n      _jsx(LocalForm, { onSubmit: this.handleSubmit, id: \"import\", initialState: { template } }, void 0, /*#__PURE__*/\n      _jsx(\"div\", { className: \"form-group\" }, void 0, /*#__PURE__*/\n      _jsx(\"ul\", { className: \"search__filter\" }, void 0, /*#__PURE__*/\n      _jsx(\"li\", {}, void 0, /*#__PURE__*/\n      _jsx(\"label\", { htmlFor: \"file\" }, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"File\"))), /*#__PURE__*/\n\n\n      _jsx(\"li\", { className: \"wide\" }, void 0, /*#__PURE__*/\n      _jsx(Control.file, { id: \"file\", model: \".file\", accept: \".zip,.csv\" })))), /*#__PURE__*/\n\n\n\n      _jsx(\"div\", { className: \"form-group\" }, void 0, /*#__PURE__*/\n      _jsx(\"ul\", { className: \"search__filter\" }, void 0, /*#__PURE__*/\n      _jsx(\"li\", {}, void 0, /*#__PURE__*/\n      _jsx(\"label\", { htmlFor: \"template\" }, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Template\"))), /*#__PURE__*/\n\n\n      _jsx(\"li\", { className: \"wide\" }, void 0, /*#__PURE__*/\n      _jsx(Control.select, { id: \"template\", model: \".template\" }, void 0,\n      templates.map((t) => /*#__PURE__*/\n      _jsx(\"option\", { value: t.get('_id') }, t.get('_id'),\n      t.get('name'))))))), /*#__PURE__*/\n\n\n\n\n\n\n      _jsx(\"div\", { className: \"form-group\" })), /*#__PURE__*/\n\n      _jsx(\"div\", { className: \"sidepanel-footer\" }, void 0, /*#__PURE__*/\n      _jsx(\"button\", { form: \"import\", type: \"submit\", className: \"btn btn-primary\", id: \"import-csv\" }, void 0, /*#__PURE__*/\n      _jsx(Icon, { icon: \"upload\" }), /*#__PURE__*/\n      _jsx(\"span\", { className: \"btn-label\" }, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Import\"))))));\n\n\n\n\n\n  }\n\n  renderUploadProgress() {\n    const { uploadProgress } = this.props;\n    return /*#__PURE__*/(\n      _jsx(\"div\", { className: \"alert alert-info\" }, void 0, /*#__PURE__*/\n      _jsx(Icon, { icon: \"info-circle\", size: \"2x\" }), /*#__PURE__*/\n      _jsx(\"div\", { className: \"force-ltr\" }, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Uploading file\"), \" \", uploadProgress, \"%\")));\n\n\n\n  }\n\n  renderContents() {\n    const { uploadProgress, importStart, importProgress } = this.props;\n    if (uploadProgress) {\n      return this.renderUploadProgress();\n    }\n\n    if (importStart || importProgress) {\n      return /*#__PURE__*/_jsx(ImportProgress, {});\n    }\n    return this.renderForm();\n  }\n\n  render() {\n    const { open } = this.props;\n    return /*#__PURE__*/(\n      _jsx(SidePanel, { open: open, className: \"metadata-sidepanel\" }, void 0, /*#__PURE__*/\n      _jsx(\"div\", { className: \"sidepanel-header\" }, void 0, /*#__PURE__*/\n      _jsx(\"button\", { type: \"button\", className: \"closeSidepanel close-modal\", onClick: this.close }, void 0, /*#__PURE__*/\n      _jsx(Icon, { icon: \"times\" }))),\n\n\n      this.renderContents()));\n\n\n  }}\n\n\nImportPanel.defaultProps = {\n  open: false,\n  uploadProgress: 0,\n  importStart: false,\n  importProgress: 0 };\n\n\n\n\n\n\n\n\n\n\n\n\nexport const mapStateToProps = (state) => ({\n  open: state.importEntities.showImportPanel,\n  templates: state.templates,\n  uploadProgress: state.importEntities.importUploadProgress,\n  importStart: state.importEntities.importStart,\n  importProgress: state.importEntities.importProgress });\n\n\nfunction mapDispatchToProps(dispatch) {\n  return bindActionCreators({ closeImportPanel, importData }, dispatch);\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ImportPanel);","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}function _defineProperty(obj, key, value) {if (key in obj) {Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });} else {obj[key] = value;}return obj;}import { t } from \"../../I18N\";\nimport I18NLink from \"../../I18N/components/I18NLink\";\n\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { createSelector } from 'reselect';\n\n\nimport { Icon } from \"../../UI\";\n\nconst defaultProps = {\n  quickLabelThesaurus: undefined };\n\n\n\n\nexport class QuickLabelHeaderBase extends Component {\n\n\n  render() {\n    const { quickLabelThesaurus } = this.props;\n    const thesaurusName = quickLabelThesaurus ? quickLabelThesaurus.get('name') : '';\n    return /*#__PURE__*/(\n      _jsx(\"div\", { className: \"content-header\" }, void 0,\n      !thesaurusName && /*#__PURE__*/\n      _jsx(\"div\", { className: \"content-header-title\" }, void 0, /*#__PURE__*/\n      _jsx(\"h1\", {}, void 0,\n      t('System', 'Ooops... please go'), \"\\xA0\", /*#__PURE__*/\n\n      _jsx(I18NLink, { className: \"btn btn-default\", to: \"/settings/dictionaries\" }, void 0, /*#__PURE__*/\n      _jsx(Icon, { icon: \"arrow-left\" }), \"\\xA0\", /*#__PURE__*/\n\n      _jsx(\"span\", { className: \"btn-label\" }, void 0, t('System', 'Back to thesauri'))))),\n\n\n\n\n      thesaurusName && /*#__PURE__*/\n      _jsx(\"div\", { className: \"content-header-title\" }, void 0, /*#__PURE__*/\n      _jsx(I18NLink, {\n        className: \"btn btn-default\",\n        to: `/settings/dictionaries/cockpit/${quickLabelThesaurus === null || quickLabelThesaurus === void 0 ? void 0 : quickLabelThesaurus.get('_id')}` }, void 0, /*#__PURE__*/\n\n      _jsx(Icon, { icon: \"arrow-left\" }), \"\\xA0\", /*#__PURE__*/\n\n      _jsx(\"span\", { className: \"btn-label\" }, void 0, t('System', 'Back to thesaurus'))), /*#__PURE__*/\n\n      _jsx(\"h1\", {}, void 0, /*#__PURE__*/\n      _jsx(\"span\", { className: \"large\" }, void 0,\n      t('System', 'Quick labeling for'), \"\\xA0\", /*#__PURE__*/_jsx(\"b\", {}, void 0, thesaurusName))))));\n\n\n\n\n\n\n  }}_defineProperty(QuickLabelHeaderBase, \"defaultProps\", defaultProps);\n\n\nexport const selectquickLabelThesaurus = createSelector(\n(state) =>\nstate.thesauris.find(\n(thes) => thes.get('_id') === state.library.sidepanel.quickLabelState.get('thesaurus')),\n\n(thes) => thes);\n\n\nexport const mapStateToProps = (state) => ({\n  quickLabelThesaurus: selectquickLabelThesaurus(state) });\n\n\nexport const QuickLabelHeader = connect(mapStateToProps)(QuickLabelHeaderBase);","import superagent from 'superagent';\nimport { toUrlParams } from \"../../../shared/JSONRequest\";\nimport { actions } from \"../../BasicReducer\";\nimport { notify } from \"../../Notifications/actions/notificationsActions\";\nimport { t } from \"../../I18N\";\n\n\n\n\nimport { processFilters } from \"./libraryActions\";\n\n\nexport function triggerLocalDownload(content, fileName) {\n  const url = window.URL.createObjectURL(new Blob([content]));\n  const link = document.createElement('a');\n  link.href = url;\n  link.download = fileName;\n  document.body.appendChild(link);\n  link.click();\n  document.body.removeChild(link);\n}\n\nfunction clearState(dispatch) {\n  dispatch(actions.set('exportSearchResultsProcessing', false));\n  dispatch(actions.set('exportSearchResultsContent', ''));\n  dispatch(actions.set('exportSearchResultsFileName', ''));\n}\n\nexport function exportEnd() {\n  return (dispatch, getState) => {\n    const { exportSearchResultsContent, exportSearchResultsFileName } =\n    getState().exportSearchResults;\n\n    triggerLocalDownload(exportSearchResultsContent, exportSearchResultsFileName);\n\n    clearState(dispatch);\n  };\n}\n\nfunction extractFileName(contentDisposition) {\n  const startIndex = contentDisposition.indexOf('filename=\"') + 10;\n  const endIndex = contentDisposition.length - 1;\n  return contentDisposition.substring(startIndex, endIndex);\n}\n\nconst requestHandler = (params, dispatch, captcha) => {\n  let request = superagent.\n  get(`/api/export${toUrlParams(params)}`).\n  set('Accept', 'text/csv').\n  set('X-Requested-With', 'XMLHttpRequest');\n\n  if (captcha) {\n    request = request.set('Captcha-text', captcha.text).set('Captcha-id', captcha.id);\n  }\n\n  request.\n  then((response) => {\n    const fileName = extractFileName(response.header['content-disposition']);\n    dispatch(actions.set('exportSearchResultsContent', response.text));\n    dispatch(actions.set('exportSearchResultsFileName', fileName));\n    dispatch(exportEnd());\n  }).\n  catch((err) => {\n    clearState(dispatch);\n    if (err.status === 403) {\n      dispatch(notify(t('System', 'Invalid captcha'), 'danger'));\n    } else {\n      dispatch(notify(t('System', 'An error has occured during data export'), 'danger'));\n    }\n    return err;\n  });\n};\n\nexport function exportDocuments(storeKey, captcha) {\n  return async (dispatch, getState) => {\n    const state = getState()[storeKey];\n    const { search, filters } = state;\n    const exportFilters = filters.toJS();\n\n    const finalSearchParams = processFilters(search, exportFilters, 10000);\n    finalSearchParams.searchTerm = state.search.searchTerm;\n\n    if (state.ui.get('selectedDocuments').size) {\n      finalSearchParams.ids = state.ui.\n      get('selectedDocuments').\n      map((entity) => entity.get('sharedId'));\n    }\n\n    if (storeKey === 'uploads') finalSearchParams.unpublished = true;\n\n    dispatch(actions.set('exportSearchResultsProcessing', true));\n\n    requestHandler(finalSearchParams, dispatch, captcha);\n  };\n}","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}function _defineProperty(obj, key, value) {if (key in obj) {Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });} else {obj[key] = value;}return obj;}import React, { Component } from 'react';\nimport { Icon } from \"../../UI\";\nimport { t, Translate } from \"../../I18N\";\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport { wrapDispatch } from \"../../Multireducer\";\nimport { exportDocuments } from \"../actions/exportActions\";\n\nimport Modal from \"../../Layout/Modal\";\nimport { LocalForm } from 'react-redux-form';\n\nimport { Captcha, FormGroup } from \"../../ReactReduxForms\";\n\n\n\n\n\n\n\n\n\n\n\nclass ExportButton extends Component {\n\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      modal: false };\n\n    this.export = this.export.bind(this);\n    this.showModal = this.showModal.bind(this);\n    this.exportWithCaptcha = this.exportWithCaptcha.bind(this);\n  }\n\n  export() {\n    if (!this.props.processing) {\n      this.props.exportDocuments(this.props.storeKey);\n    }\n  }\n\n  exportWithCaptcha(values) {\n    if (!this.props.processing) {\n      this.props.exportDocuments(this.props.storeKey, values.captcha);\n    }\n    this.setState({ modal: false });\n  }\n\n  showModal() {\n    this.setState({ modal: true });\n  }\n\n  render() {\n    let btnClassName = 'btn btn-default btn-export';\n    btnClassName += this.props.processing ? ' btn-disabled' : '';\n    btnClassName += ` ${this.props.className}`;\n    return /*#__PURE__*/(\n      React.createElement(React.Fragment, null, /*#__PURE__*/\n      _jsx(\"button\", {\n        type: \"button\",\n        onClick: this.props.user.get('_id') ? this.export : this.showModal,\n        className: btnClassName }, void 0,\n\n      !this.props.processing ? /*#__PURE__*/\n      _jsx(Icon, { icon: \"export-csv\", transform: \"up-0.1\" }) : /*#__PURE__*/\n\n      _jsx(Icon, { icon: \"spinner\", spin: true }), /*#__PURE__*/\n\n      _jsx(\"span\", { className: \"btn-label\" }, void 0, t('System', 'Export CSV'))),\n\n      this.state.modal && /*#__PURE__*/\n      _jsx(Modal, { isOpen: true, type: \"export\" }, void 0, /*#__PURE__*/\n      _jsx(LocalForm, {\n        onSubmit: this.exportWithCaptcha,\n        validators: { captcha: { required: (val) => val && val.text.length } } }, void 0, /*#__PURE__*/\n\n      _jsx(FormGroup, { model: \".captcha\" }, \"captcha\", /*#__PURE__*/\n      _jsx(\"h3\", {}, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Exporting entities to CSV\")), /*#__PURE__*/\n\n      _jsx(\"p\", {}, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Please type in letters and numbers from the image to start the export.\")), /*#__PURE__*/\n\n\n\n      _jsx(Captcha, { remote: false, model: \".captcha\" })), /*#__PURE__*/\n\n      _jsx(\"div\", { className: \"buttons\" }, void 0, /*#__PURE__*/\n      _jsx(\"input\", {\n        type: \"button\",\n        className: \"btn\",\n        onClick: () => {\n          this.setState({ modal: false });\n        },\n        value: \"Cancel\" }), /*#__PURE__*/\n\n      _jsx(\"input\", { type: \"submit\", className: \"btn btn-success\", value: \"Export\" }))))));\n\n\n\n\n\n\n  }}_defineProperty(ExportButton, \"defaultProps\", void 0);\n\n\nExportButton.defaultProps = {\n  className: '' };\n\n\nfunction mapDispatchToProps(dispatch, props) {\n  return bindActionCreators({ exportDocuments }, wrapDispatch(dispatch, props.storeKey));\n}\n\nfunction mapStateToProps(state) {\n  return {\n    processing: state.exportSearchResults.exportSearchResultsProcessing,\n    user: state.user };\n\n}\n\n\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ExportButton);","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import { Translate } from \"../../I18N\";\nimport { wrapDispatch } from \"../../Multireducer\";\nimport { Icon } from \"../../UI\";\nimport React, { useMemo } from 'react';\nimport { bindActionCreators } from 'redux';\n\n\nimport {\nuploadDocument as uploadDocumentAction,\ncreateDocument as createDocumentAction } from \"../../Uploads/actions/uploadsActions\";\n\n\nimport { unselectAllDocuments as unselectAllDocumentsAction } from \"../actions/libraryActions\";\nimport { connect } from 'react-redux';\n\nconst extractTitle = (file) => {\n  const title = file.name.\n  replace(/\\.[^/.]+$/, '').\n  replace(/_/g, ' ').\n  replace(/-/g, ' ').\n  replace(/ {2}/g, ' ');\n\n  return title.charAt(0).toUpperCase() + title.slice(1);\n};\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst onChangePDFs =\n({ createDocument, uploadDocument, unselectAllDocuments }) =>\n(e) => {\n  const { files } = e.target;\n  const count = (files === null || files === void 0 ? void 0 : files.length) || 0;\n\n  // eslint-disable-next-line no-plusplus\n  for (let index = 0; index < count; index++) {\n    const file = files[index];\n    const doc = { title: extractTitle(file) };\n    createDocument(doc).\n    then((newDoc) => {\n      uploadDocument(newDoc.sharedId, file);\n    }).\n    catch(() => {});\n  }\n\n  unselectAllDocuments();\n};\n\nconst PDFUploadButtonComponent = ({\n  createDocument,\n  uploadDocument,\n  unselectAllDocuments }) =>\n{\n  const onChangeHandler = useMemo(\n  () =>\n  onChangePDFs({\n    createDocument,\n    uploadDocument,\n    unselectAllDocuments }),\n\n  [createDocument, uploadDocument, unselectAllDocuments]);\n\n\n  return /*#__PURE__*/(\n    _jsx(\"label\", { htmlFor: \"pdf-upload-button\", className: \"btn btn-default\" }, void 0, /*#__PURE__*/\n    _jsx(Icon, { icon: \"cloud-upload-alt\" }), /*#__PURE__*/\n    _jsx(\"span\", { className: \"btn-label\" }, void 0, /*#__PURE__*/\n    _jsx(Translate, {}, void 0, \"Upload PDF(s) to create\")), /*#__PURE__*/\n\n    _jsx(\"input\", {\n      type: \"file\",\n      id: \"pdf-upload-button\",\n      style: { display: 'none' },\n      accept: \"application/pdf\",\n      multiple: true,\n      onChange: onChangeHandler })));\n\n\n\n};\n\nfunction mapDispatchToProps(dispatch, props) {\n  return bindActionCreators(\n  {\n    uploadDocument: uploadDocumentAction,\n    unselectAllDocuments: unselectAllDocumentsAction,\n    createDocument: createDocumentAction },\n\n  wrapDispatch(dispatch, props.storeKey));\n\n}\n\nexport const PDFUploadButton = connect(\nnull,\nmapDispatchToProps)(\nPDFUploadButtonComponent);","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import { Translate } from \"../../I18N\";\nimport { wrapDispatch } from \"../../Multireducer\";\nimport { Icon } from \"../../UI\";\nimport React from 'react';\nimport { bindActionCreators } from 'redux';\nimport {\nnewEntity as newEntityAction,\nshowImportPanel as showImportPanelAction } from \"../../Uploads/actions/uploadsActions\";\n\nimport { connect } from 'react-redux';\nimport { NeedAuthorization } from \"../../Auth\";\nimport Export from \"./ExportButton\";\nimport { PDFUploadButton } from \"./PDFUploadButton\";\n\n\n\n\n\n\n\n\n\n\n\n\nconst LibraryFooterComponent = ({ storeKey, newEntity, showImportPanel }) => /*#__PURE__*/\n_jsx(\"div\", { className: \"library-footer with-sidepanel remove-nesting\" }, void 0, /*#__PURE__*/\n_jsx(\"div\", { className: \"btn-cluster\" }, void 0, /*#__PURE__*/\n_jsx(NeedAuthorization, { roles: ['admin', 'editor', 'collaborator'] }, void 0, /*#__PURE__*/\n_jsx(\"button\", {\n  className: \"btn btn-default btn-footer-hover-success\",\n  type: \"button\",\n  onClick: () => newEntity(storeKey) }, void 0, /*#__PURE__*/\n\n_jsx(Icon, { icon: \"plus\" }), /*#__PURE__*/\n_jsx(\"span\", { className: \"btn-label\" }, void 0, /*#__PURE__*/\n_jsx(Translate, {}, void 0, \"Create entity\")))), /*#__PURE__*/\n\n\n\n_jsx(NeedAuthorization, { roles: ['admin', 'editor', 'collaborator'] }, void 0, /*#__PURE__*/\n_jsx(PDFUploadButton, { storeKey: storeKey })), /*#__PURE__*/\n\n_jsx(NeedAuthorization, { roles: ['admin', 'editor'] }, void 0, /*#__PURE__*/\n_jsx(\"button\", { className: \"btn btn-default sm-order-1\", type: \"button\", onClick: showImportPanel }, void 0, /*#__PURE__*/\n_jsx(Icon, { icon: \"import-csv\", transform: \"up-0.2\" }), /*#__PURE__*/\n_jsx(\"span\", { className: \"btn-label\" }, void 0, /*#__PURE__*/\n_jsx(Translate, {}, void 0, \"Import CSV\")))), /*#__PURE__*/\n\n\n\n_jsx(Export, { className: \"sm-order-1\", storeKey: storeKey })));\n\n\n\n\nfunction mapDispatchToProps(dispatch, props) {\n  return bindActionCreators(\n  { newEntity: newEntityAction, showImportPanel: showImportPanelAction },\n  wrapDispatch(dispatch, props.storeKey));\n\n}\n\nexport const LibraryFooter = connect(\nnull,\nmapDispatchToProps)(\nLibraryFooterComponent);","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport { Helmet } from 'react-helmet';\nimport { connect } from 'react-redux';\nimport { t } from \"../I18N\";\nimport LibraryFilters from \"./components/LibraryFilters\";\nimport { QuickLabelPanel } from \"./components/QuickLabelPanel\";\nimport ViewMetadataPanel from \"./components/ViewMetadataPanel\";\nimport SelectMultiplePanelContainer from \"./containers/SelectMultiplePanelContainer\";\nimport { FeatureToggleSemanticSearch } from \"../SemanticSearch/components/FeatureToggleSemanticSearch\";\nimport SemanticSearchPanel from \"../SemanticSearch/components/SemanticSearchPanel\";\nimport ImportPanel from \"../Uploads/components/ImportPanel\";\nimport { QuickLabelHeader } from \"./components/QuickLabelHeader\";\nimport { LibraryFooter } from \"./components/LibraryFooter\";\n\nclass LibraryLayoutBase extends Component {\n  render() {\n    const { className, children, quickLabelThesaurus, sidePanelMode, noScrollable } = this.props;\n    const contentDivClass = `${\n    quickLabelThesaurus ? 'with-header ' : ''\n    } content-holder library-viewer document-viewer with-footer with-panel ${sidePanelMode} ${\n    noScrollable ? 'no-scroll-layout' : ''\n    }`;\n\n    return /*#__PURE__*/(\n      _jsx(\"div\", { className: \"row panels-layout\" }, void 0, /*#__PURE__*/\n      _jsx(Helmet, {}, void 0, /*#__PURE__*/\n      _jsx(\"title\", {}, void 0, t('System', 'Library', null, false))),\n\n      quickLabelThesaurus && /*#__PURE__*/_jsx(QuickLabelHeader, {}), /*#__PURE__*/\n      _jsx(\"div\", { className: contentDivClass }, void 0, /*#__PURE__*/\n      _jsx(\"main\", { className: `${className}` }, void 0, children), /*#__PURE__*/\n      _jsx(LibraryFooter, { storeKey: \"library\" }), /*#__PURE__*/\n      _jsx(LibraryFilters, { storeKey: \"library\", sidePanelMode: sidePanelMode }),\n      !quickLabelThesaurus && /*#__PURE__*/_jsx(ViewMetadataPanel, { storeKey: \"library\" }),\n      !quickLabelThesaurus && /*#__PURE__*/_jsx(SelectMultiplePanelContainer, { storeKey: \"library\" }),\n      quickLabelThesaurus && /*#__PURE__*/_jsx(QuickLabelPanel, { storeKey: \"library\" }), /*#__PURE__*/\n      _jsx(FeatureToggleSemanticSearch, {}, void 0, /*#__PURE__*/\n      _jsx(SemanticSearchPanel, { storeKey: \"library\" })), /*#__PURE__*/\n\n      _jsx(ImportPanel, {}))));\n\n\n\n  }}\n\n\nLibraryLayoutBase.defaultProps = {\n  className: '',\n  quickLabelThesaurus: '',\n  sidePanelMode: '',\n  noScrollable: false };\n\n\n\n\n\n\n\n\n\n\nexport { LibraryLayoutBase };\n\nexport default connect((state) => ({\n  quickLabelThesaurus: state.library.sidepanel.quickLabelState.get('thesaurus') }))(\nLibraryLayoutBase);","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import React from 'react';\n\nimport { showByType } from \"../../Metadata/components/Metadata\";\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst formatProperty = (prop) => {\n  if (!(prop !== null && prop !== void 0 && prop.value)) {\n    return undefined;\n  }\n\n  const inheritedMedia =\n  prop.type === 'inherit' && (prop.inheritedType === 'image' || prop.inheritedType === 'media');\n  const typeMedia = prop.type === 'image' || prop.type === 'media';\n\n  if (inheritedMedia || typeMedia) {\n    return undefined;\n  }\n  return showByType(prop, true);\n};\n\nexport const TableCellComponent = (props) => {\n  const cellValue = formatProperty(props.content);\n  return /*#__PURE__*/(\n    _jsx(\"div\", { className: `table-view-cell table-view-row-zoom-${props.zoomLevel}` }, void 0, cellValue));\n\n};\n\nexport const TableCell = /*#__PURE__*/React.memo(TableCellComponent);","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}function _defineProperty(obj, key, value) {if (key in obj) {Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });} else {obj[key] = value;}return obj;}import React, { Component } from 'react';\nimport Immutable from 'immutable';\n\nimport { connect } from 'react-redux';\n\n\n\nimport formatter from \"../../Metadata/helpers/formater\";\nimport { TableCell } from \"./TableCell\";\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst defaultProps = {\n  templates: Immutable.fromJS([]),\n  thesauris: Immutable.fromJS([]),\n  zoomLevel: 2 };\n\n\nconst getColumnValue = (\nformattedEntity,\ncolumnValues,\ncolumn) =>\n{\n  let columnValue;\n  const columnName = column.name;\n  if (!column.isCommonProperty || columnName === 'creationDate' || columnName === 'editDate') {\n    columnValue = columnValues.get(columnName);\n  } else {\n    const commonPropValue =\n    columnName === 'templateName' ? formattedEntity.documentType : formattedEntity[columnName];\n    columnValue = column;\n    columnValue.value = commonPropValue;\n  }\n  return columnValue;\n};\n\nclass TableRowComponent extends Component {constructor(...args) {super(...args);_defineProperty(this, \"onRowClick\",\n\n\n    (e) => {\n      if (this.props.clickOnDocument) {\n        this.props.clickOnDocument(e, this.props.entity, this.props.selected);\n      }\n    });_defineProperty(this, \"renderCell\",\n\n    (\n    index,\n    selected,\n    columnValue) =>\n    {\n      if (!index) {\n        return /*#__PURE__*/(\n          _jsx(\"div\", {}, void 0,\n          !index && /*#__PURE__*/\n          _jsx(\"input\", {\n            type: \"checkbox\",\n            onChange: () => {},\n            checked: selected,\n            onClick: this.onRowClick }), /*#__PURE__*/\n\n\n          _jsx(TableCell, { content: columnValue, zoomLevel: this.props.zoomLevel })));\n\n\n      }\n\n      return /*#__PURE__*/_jsx(TableCell, { content: columnValue, zoomLevel: this.props.zoomLevel });\n    });}\n\n  render() {\n    const { entity, templates, thesauris, columns, selected } = this.props;\n    const formattedEntity = formatter.prepareMetadata(entity.toJS(), templates, thesauris, null, {\n      sortedProperties: ['editDate', 'creationDate'] });\n\n    const columnValues = new Map();\n    formattedEntity.metadata.forEach((prop) => {\n      columnValues.set(prop.name, prop);\n    });\n    return /*#__PURE__*/(\n      _jsx(\"tr\", { className: `template-${formattedEntity.template} ${selected ? 'selected' : ''}` }, void 0,\n      columns.map((column, index) => {\n        const columnValue = getColumnValue(formattedEntity, columnValues, column);\n        const columnKey = formattedEntity._id + column.name;\n        return /*#__PURE__*/(\n          _jsx(\"td\", { className: !index ? 'sticky-col' : '' }, `column_${columnKey}`,\n          this.renderCell(index, selected, columnValue)));\n\n\n      })));\n\n\n  }}_defineProperty(TableRowComponent, \"defaultProps\", defaultProps);\n\n\nfunction mapStateToProps(state, ownProps) {\n  const selected =\n  state[ownProps.storeKey].ui.\n  get('selectedDocuments').\n  find(\n  (doc) =>\n  (doc === null || doc === void 0 ? void 0 : doc.get('_id')) === ownProps.entity.get('_id')) !==\n  undefined;\n  return {\n    selected,\n    templates: state.templates,\n    thesauris: state.thesauris,\n    zoomLevel: state[ownProps.storeKey].ui.get('zoomLevel') };\n\n}\n\nexport const TableRow = connect(mapStateToProps)(TableRowComponent);","function _defineProperty(obj, key, value) {if (key in obj) {Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });} else {obj[key] = value;}return obj;}import React, { Component } from 'react';\n\nimport { connect } from 'react-redux';\nimport { TableRow } from \"../Library/components/TableRow\";\n\n\n\nimport Immutable from 'immutable';\n\n\n\n\n\n\n\n\nconst defaultProps = {\n  documents: Immutable.fromJS({ rows: [] }) };\n\n\nclass TableRowsComponent extends Component {\n\n\n  render() {\n    const { columns, clickOnDocument, storeKey } = this.props;\n\n    return /*#__PURE__*/(\n      React.createElement(React.Fragment, null,\n      this.props.documents.get('rows').map((entity) => /*#__PURE__*/\n      React.createElement(TableRow, {\n\n        entity,\n        columns,\n        clickOnDocument,\n        storeKey,\n        key: entity.get('_id') }))));\n\n\n\n\n\n  }}_defineProperty(TableRowsComponent, \"defaultProps\", defaultProps);\n\n\nconst mapStateToProps = (state, props) => ({\n  documents: state[props.storeKey].documents });\n\n\nexport const TableRows = connect(mapStateToProps)(TableRowsComponent);","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}function _defineProperty(obj, key, value) {if (key in obj) {Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });} else {obj[key] = value;}return obj;}import React, { Component } from 'react';\nimport { createSelector } from 'reselect';\n\nimport { connect } from 'react-redux';\n\nimport { Translate } from \"../I18N\";\nimport { TableRows } from \"./TableRows\";\n\n\n\n\n\n\nclass TableViewerComponent extends Component {constructor(...args) {super(...args);_defineProperty(this, \"handleScroll\",\n    (e) => {\n      const element = e.target;\n      if (element.scrollHeight - element.scrollTop === element.clientHeight) {\n        this.props.loadNextGroupOfEntities();\n      }\n    });}\n\n  render() {\n    const columns = this.props.columns.filter((c) => !c.hidden);\n    return /*#__PURE__*/(\n      _jsx(\"div\", { className: \"tableview-wrapper\", onScroll: this.handleScroll }, void 0, /*#__PURE__*/\n      _jsx(\"table\", {}, void 0, /*#__PURE__*/\n      _jsx(\"thead\", {}, void 0, /*#__PURE__*/\n      _jsx(\"tr\", {}, void 0,\n      columns.map((column, index) => /*#__PURE__*/\n      _jsx(\"th\", { className: !index ? 'sticky-col' : '' }, column.name, /*#__PURE__*/\n      _jsx(\"div\", { className: \"table-view-cell\" }, void 0, /*#__PURE__*/\n      _jsx(Translate, { context: column.translationContext }, void 0, column.label)))))), /*#__PURE__*/\n\n\n\n\n\n      _jsx(\"tbody\", {}, void 0, /*#__PURE__*/\n      _jsx(TableRows, {\n        columns: columns,\n        clickOnDocument: this.props.clickOnDocument,\n        storeKey: this.props.storeKey })))));\n\n\n\n\n\n  }}\n\n\nconst getTableViewColumnsSelector = (state) => state.ui.get('tableViewColumns');\nexport const selectTableViewColumns = createSelector(getTableViewColumnsSelector, (columns) =>\ncolumns === null || columns === void 0 ? void 0 : columns.toJS());\n\n\nconst mapStateToProps = (state, props) => ({\n  columns: selectTableViewColumns(state[props.storeKey]) });\n\n\nexport const TableViewer = connect(mapStateToProps)(TableViewerComponent);","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import RouteHandler from \"../App/RouteHandler\";\nimport { actions } from \"../BasicReducer\";\nimport { enterLibrary, unsetDocuments, zoomIn, zoomOut } from \"./actions/libraryActions\";\nimport DocumentsList from \"./components/DocumentsList\";\nimport LibraryModeToggleButtons from \"./components/LibraryModeToggleButtons\";\nimport { requestState } from \"./helpers/requestState\";\nimport LibraryLayout from \"./LibraryLayout\";\nimport { wrapDispatch } from \"../Multireducer\";\nimport React from 'react';\nimport { TableViewer } from \"../Layout/TableViewer\";\n\nexport default class Library extends RouteHandler {\n  constructor(props, context) {\n    super(props, context);\n    this.superComponentWillReceiveProps = super.componentWillReceiveProps;\n\n    const { dispatch } = context.store;\n    wrapDispatch(dispatch, 'library')(enterLibrary());\n    this.zoomIn = () => wrapDispatch(dispatch, 'library')(zoomIn());\n    this.zoomOut = () => wrapDispatch(dispatch, 'library')(zoomOut());\n  }\n\n  static renderTools() {}\n\n  static async requestState(requestParams, globalResources) {\n    return requestState(requestParams, globalResources);\n  }\n\n  urlHasChanged(nextProps) {\n    return nextProps.location.query.q !== this.props.location.query.q;\n  }\n\n  componentWillUnmount() {\n    this.emptyState();\n  }\n\n  componentDidUpdate(prevProps) {\n    if (this.urlHasChanged(prevProps)) {\n      this.getClientState(this.props);\n    }\n  }\n\n  emptyState() {\n    wrapDispatch(this.context.store.dispatch, 'library')(unsetDocuments());\n    actions.set('library.sidepanel.quickLabelState', {});\n  }\n\n  render() {\n    const tableViewMode = this.props.viewer === TableViewer;\n    return /*#__PURE__*/(\n      _jsx(LibraryLayout, {\n        sidePanelMode: this.props.sidePanelMode,\n        noScrollable: this.props.noScrollable }, void 0, /*#__PURE__*/\n\n      _jsx(LibraryModeToggleButtons, {\n        storeKey: \"library\",\n        zoomIn: this.zoomIn,\n        zoomOut: this.zoomOut,\n        tableViewMode: tableViewMode }), /*#__PURE__*/\n\n      _jsx(DocumentsList, { storeKey: \"library\", CollectionViewer: this.props.viewer })));\n\n\n  }}","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport Immutable from 'immutable';\nimport { Map, Markers } from \"../../Map\";\nimport { bindActionCreators } from 'redux';\nimport { wrapDispatch } from \"../../Multireducer\";\nimport {\ngetAndSelectDocument,\nselectDocuments,\nunselectAllDocuments } from \"../actions/libraryActions\";\n\nimport SearchBar from \"./SearchBar\";\nimport { t } from \"../../I18N\";\n\nclass MapViewComponent extends Component {\n  constructor(props) {\n    super(props);\n    this.clickOnMarker = this.clickOnMarker.bind(this);\n    this.clickOnCluster = this.clickOnCluster.bind(this);\n  }\n\n  clickOnMarker(marker) {\n    this.props.getAndSelectDocument(marker.properties.entity.sharedId);\n  }\n\n  clickOnCluster(cluster) {\n    this.props.unselectAllDocuments();\n    this.props.selectDocuments(cluster.map((m) => m.properties.entity));\n  }\n\n  render() {\n    const { storeKey, markers } = this.props;\n    return /*#__PURE__*/(\n      _jsx(\"div\", { className: \"library-map main-wrapper\", style: { width: '100%', height: '100%' } }, void 0, /*#__PURE__*/\n      _jsx(\"div\", { className: \"search-list\" }, void 0, /*#__PURE__*/\n      _jsx(SearchBar, { storeKey: storeKey })), /*#__PURE__*/\n\n      _jsx(\"div\", { className: \"documents-counter\" }, void 0, /*#__PURE__*/\n      _jsx(\"span\", {}, void 0, /*#__PURE__*/\n      _jsx(\"b\", {}, void 0, markers.get('totalRows')), \" \", t('System', 'documents'))), /*#__PURE__*/\n\n\n      _jsx(Markers, { entities: markers.get('rows') }, void 0,\n      (processedMarkers) => /*#__PURE__*/\n      React.createElement(Map, {\n        ref: (ref) => {\n          // eslint-disable-next-line react/no-unused-class-component-methods\n          this.map = ref;\n        },\n        markers: processedMarkers,\n        clickOnMarker: this.clickOnMarker,\n        clickOnCluster: this.clickOnCluster,\n        renderPopupInfo: true,\n        cluster: true }))));\n\n\n\n\n\n  }}\n\n\n\n\n\n\n\n\n\n\nfunction mapStateToProps(state, props) {\n  return {\n    markers: state[props.storeKey].markers };\n\n}\n\nfunction mapDispatchToProps(dispatch, props) {\n  return bindActionCreators(\n  { getAndSelectDocument, selectDocuments, unselectAllDocuments },\n  wrapDispatch(dispatch, props.storeKey));\n\n}\n\nconst MapView = connect(mapStateToProps, mapDispatchToProps, null, { withRef: true })(\nMapViewComponent);\n\n\nexport { MapViewComponent, MapView };","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import React from 'react';\nimport { requestState } from \"./helpers/requestState\";\nimport { MapView } from \"./components/MapView\";\nimport LibraryLayout from \"./LibraryLayout\";\nimport Library from \"./Library\";\nimport LibraryModeToggleButtons from \"./components/LibraryModeToggleButtons\";\n\nexport default class LibraryMap extends Library {\n  static async requestState(requestParams, globalResources) {\n    return requestState(requestParams, globalResources, { geolocation: true });\n  }\n\n  render() {\n    return /*#__PURE__*/(\n      _jsx(LibraryLayout, { className: \"library-map-layout\" }, void 0, /*#__PURE__*/\n      _jsx(LibraryModeToggleButtons, { storeKey: \"library\", mapViewMode: true }), /*#__PURE__*/\n      React.createElement(MapView, {\n        storeKey: \"library\",\n        ref: (ref) => {\n          this.mapView = ref;\n        } })));\n\n\n\n  }}","export default {\n  checkbox: 'check',\n  numeric: 'calculator',\n  relationship: 'exchange-alt',\n  relationshipfilter: 'filter',\n  select: 'sort',\n  multiselect: 'list',\n  date: 'calendar',\n  text: 'font',\n  markdown: 'file',\n  nested: 'cubes',\n  multidate: 'calendar',\n  multidaterange: 'calendar',\n  daterange: 'calendar',\n  image: 'image',\n  preview: 'passport',\n  media: 'video',\n  geolocation: 'map-marker',\n  link: 'link',\n  generatedid: 'fingerprint' };","\n\nimport { t } from \"../../I18N\";\nimport { notificationActions } from \"../../Notifications\";\n\nimport { RequestParams } from \"../../utils/RequestParams\";\nimport api from \"../../utils/api\";\nimport { acceptEntitySuggestion } from \"../SuggestionsAPI\";\nimport EntitiesAPI from \"../../Entities/EntitiesAPI\";\nimport scroller from \"../../Viewer/utils/Scroller\";\nimport { actions } from \"../../BasicReducer\";\nimport { saveConfigurations as saveConfigs } from \"../SuggestionsAPI\";\n\n\nconst saveConfigurations =\n(newSettingsConfigs) => async (dispatch) => {\n  const settings = await saveConfigs(new RequestParams(newSettingsConfigs));\n  dispatch(actions.set('settings/collection', settings));\n  dispatch(notificationActions.notify(t('System', 'Settings updated'), 'success'));\n};\n\nconst fetchEntity = async (entityId, language) => {\n  const entityRequest = new RequestParams({ _id: entityId });\n  return EntitiesAPI.get(entityRequest, language);\n};\n\nconst fetchFile = async (fileId) => {\n  const fileRequest = new RequestParams({ _id: fileId });\n  return api.get('files', fileRequest);\n};\n\nconst scrollToPage = async (pageNumber) =>\nscroller.to(`.document-viewer div#page-${pageNumber}`, '.document-viewer', {\n  duration: 0,\n  dividerOffset: 1,\n  offset: 50 });\n\n\nconst acceptSuggestion =\n(suggestion, allLanguages) =>\nasync (dispatch) => {\n  const params = new RequestParams({\n    allLanguages,\n    suggestion: {\n      _id: suggestion._id,\n      sharedId: suggestion.sharedId,\n      entityId: suggestion.entityId } });\n\n\n  const result = await acceptEntitySuggestion(params);\n  if (result.success) {\n    dispatch(notificationActions.notify('Saved successfully.', 'success'));\n  }\n};\n\nexport { acceptSuggestion, fetchEntity, fetchFile, scrollToPage, saveConfigurations };","\nimport api from \"../utils/api\";\n\n\n\nconst getSuggestions = async (requestParams) => {\n  const { json: response } = await api.get('suggestions', requestParams);\n  return {\n    suggestions: response.suggestions,\n    totalPages: response.totalPages };\n\n};\n\nconst getStats = async (requestParams) => {\n  const { json: response } = await api.get('suggestions/stats', requestParams);\n  return response;\n};\n\nconst trainModel = async (requestParams) => {\n  const { json: response } = await api.post('suggestions/train', requestParams);\n  return response;\n};\n\nconst cancelFindingSuggestions = async (requestParams) => {\n  const { json: response } = await api.post('suggestions/stop', requestParams);\n  return response;\n};\n\nconst ixStatus = async (requestParams) => {\n  const { json: response } = await api.post('suggestions/status', requestParams);\n  return response;\n};\n\nconst acceptEntitySuggestion = async (requestParams) => {\n  const { json: response } = await api.post('suggestions/accept', requestParams);\n  return response;\n};\nconst saveConfigurations = async (requestParams) => {\n  const { json: response } = await api.post('suggestions/configurations', requestParams);\n  return response;\n};\n\nexport {\ngetSuggestions,\ngetStats,\ntrainModel,\ncancelFindingSuggestions,\nixStatus,\nacceptEntitySuggestion,\nsaveConfigurations };","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import React, { useState } from 'react';\nimport Modal from \"../Layout/Modal\";\nimport { Translate } from \"../I18N\";\nimport { MultiSelect } from \"../Forms\";\n\n\nimport Icons from \"../Templates/components/Icons\";\n\nconst SUPPORTED_PROPERTIES = ['text', 'number', 'date'];\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nexport const PropertyConfigurationModal = ({\n  isOpen,\n  onClose,\n  onAccept,\n  templates,\n  currentProperties }) =>\n{\n  const currentValues = currentProperties.reduce((result, config) => {\n    const { template, properties } = config;\n    const props = properties.map((prop) => `${template}-${prop}`);\n    return result.concat(props);\n  }, []);\n\n  const [values, setValues] = useState(currentValues);\n  const options = templates.map((template) => {var _template$properties, _template$_id2;return {\n      label: template.name,\n      id: template._id,\n      value: template._id,\n      options: (_template$properties = template.properties) === null || _template$properties === void 0 ? void 0 : _template$properties.\n      map((prop) => {var _template$_id;return {\n          label: prop.label,\n          value: `${(_template$_id = template._id) === null || _template$_id === void 0 ? void 0 : _template$_id.toString()}-${prop.name}`,\n          type: prop.type,\n          icon: { type: 'Icons', _id: Icons[prop.type] } };}).\n\n      filter((p) => SUPPORTED_PROPERTIES.includes(p.type)).\n      concat([\n      {\n        label: 'Title',\n        value: `${(_template$_id2 = template._id) === null || _template$_id2 === void 0 ? void 0 : _template$_id2.toString()}-title`,\n        type: 'text',\n        icon: { type: 'Icons', _id: Icons.text } }]) };});\n\n\n\n\n  const handleSubmit = (submitedValues) => {\n    const processedValues = submitedValues.reduce((result, value) => {\n      const templateName = value.split('-')[0];\n      const propertyName = value.split('-')[1];\n      const template = templates.find((t) => t._id === templateName);\n\n      if (!template) {\n        return result;\n      }\n\n      const templateConfig = result.find((c) => c.template === template._id);\n      if (templateConfig) {\n        templateConfig.properties.push(propertyName);\n        return result;\n      }\n\n      return result.concat({ template: template._id.toString(), properties: [propertyName] });\n    }, []);\n\n    onAccept(processedValues);\n  };\n\n  return /*#__PURE__*/(\n    _jsx(Modal, { isOpen: isOpen, type: \"content\", className: \"suggestion-acceptance-modal\" }, void 0, /*#__PURE__*/\n    _jsx(Modal.Header, {}, void 0, /*#__PURE__*/\n    _jsx(\"h1\", {}, void 0, /*#__PURE__*/\n    _jsx(Translate, {}, void 0, \"Add properties\"), /*#__PURE__*/\n    _jsx(\"span\", {}, void 0, \"*\"))), /*#__PURE__*/\n\n\n    _jsx(Modal.Body, {}, void 0, /*#__PURE__*/\n    _jsx(MultiSelect, {\n      value: values,\n      onChange: setValues,\n      options: options,\n      optionsToShow: 20,\n      showSearch: true })), /*#__PURE__*/\n\n\n    _jsx(Modal.Footer, {}, void 0, /*#__PURE__*/\n    _jsx(\"span\", { className: \"left\" }, void 0, \"*\", /*#__PURE__*/\n    _jsx(Translate, {}, void 0, \"Only text, number and date properties are currently supported\")), /*#__PURE__*/\n\n    _jsx(\"button\", { type: \"button\", className: \"btn btn-default cancel-button\", onClick: onClose }, void 0, /*#__PURE__*/\n    _jsx(Translate, {}, void 0, \"Cancel\")), /*#__PURE__*/\n\n    _jsx(\"button\", {\n      type: \"button\",\n      className: \"btn confirm-button btn-success\",\n      onClick: () => handleSubmit(values) }, void 0, /*#__PURE__*/\n\n    _jsx(Translate, {}, void 0, \"Save\")))));\n\n\n\n\n};","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import React from 'react';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport { Icon } from \"../UI\";\n\nimport { Translate, I18NLink } from \"../I18N\";\nimport { notify } from \"../Notifications/actions/notificationsActions\";\nimport { store } from \"../store\";\nimport Icons from \"../Templates/components/Icons\";\n\n\n\n\nimport { saveConfigurations } from \"./actions/actions\";\nimport { PropertyConfigurationModal } from \"./PropertyConfigurationModal\";\n\nfunction mapStateToProps({ settings, templates }) {\n  return {\n    settings: settings.collection,\n    templates };\n\n}\n\nclass MetadataExtractionComponent extends React.Component\n\n\n{\n  constructor(props) {\n    super(props);\n    this.saveConfigs = this.saveConfigs.bind(this);\n    this.state = {\n      configurationModalIsOpen: false };\n\n  }\n\n  arrangeTemplatesAndProperties() {var _this$props$settings$, _this$props$settings$2;\n    const formatted = {};\n\n    const extractionSettings =\n    ((_this$props$settings$ = this.props.settings.get('features')) === null || _this$props$settings$ === void 0 ? void 0 : (_this$props$settings$2 = _this$props$settings$.get('metadataExtraction')) === null || _this$props$settings$2 === void 0 ? void 0 : _this$props$settings$2.get('templates')) || [];\n\n    extractionSettings.forEach((setting) => {\n      const template = setting.has('template') ?\n      this.props.templates.find((temp) => (temp === null || temp === void 0 ? void 0 : temp.get('_id')) === setting.get('template')) :\n      this.props.templates.find((temp) => (temp === null || temp === void 0 ? void 0 : temp.get('name')) === setting.get('name'));\n\n      if (!template) {\n        store === null || store === void 0 ? void 0 : store.dispatch(\n        notify(`Template \"${setting.get('_id') || setting.get('name')}\" not found.`, 'warning'));\n\n        return;\n      }\n\n      const rawProperties = setting.get('properties');\n      const properties =\n      typeof rawProperties === 'string' ? [rawProperties] : rawProperties;\n      properties === null || properties === void 0 ? void 0 : properties.forEach((propertyName) => {var _template$get;\n        let property = (_template$get = template.get('properties')) === null || _template$get === void 0 ? void 0 : _template$get.find((p) => (p === null || p === void 0 ? void 0 : p.get('name')) === propertyName);\n        let label;\n        if (!property) {var _template$get2;\n          property = (_template$get2 = template.get('commonProperties')) === null || _template$get2 === void 0 ? void 0 : _template$get2.find((p) => (p === null || p === void 0 ? void 0 : p.get('name')) === propertyName);\n          label = propertyName;\n        } else {\n          label = property.get('label');\n        }\n        if (!property) {\n          store === null || store === void 0 ? void 0 : store.dispatch(\n          notify(\n          `Property \"${label}\" not found on template \"${template.get('name')}\".`,\n          'warning'));\n\n\n          return;\n        }\n        if (!formatted.hasOwnProperty(propertyName)) {\n          formatted[propertyName] = {\n            properties: [property.toJS()],\n            templates: [template.toJS()] };\n\n        } else {\n          formatted[propertyName].properties.push(property.toJS());\n          formatted[propertyName].templates.push(template.toJS());\n        }\n      });\n    });\n\n    return formatted;\n  }\n\n  async saveConfigs(newSettingsConfigs) {\n    this.setState({ configurationModalIsOpen: false });\n    await this.props.saveConfigurations(newSettingsConfigs);\n  }\n\n  render() {\n    const formattedData = this.arrangeTemplatesAndProperties();\n    const extractionSettings =\n    this.props.settings.toJS().features.metadataExtraction.templates || [];\n\n    return /*#__PURE__*/(\n      _jsx(\"div\", { className: \"settings-content without-footer\" }, void 0, /*#__PURE__*/\n      _jsx(\"div\", { className: \"panel panel-default\" }, void 0, /*#__PURE__*/\n      _jsx(\"div\", { className: \"panel-heading\" }, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Metadata extraction dashboard\")), /*#__PURE__*/\n\n      _jsx(\"div\", { className: \"panel-subheading\" }, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Extract information from your documents\")), /*#__PURE__*/\n\n      _jsx(\"button\", {\n        className: \"btn btn-default\",\n        type: \"button\",\n        onClick: () => {\n          this.setState({ configurationModalIsOpen: true });\n        } }, void 0, /*#__PURE__*/\n\n      _jsx(Translate, {}, void 0, \"Configure properties\")), /*#__PURE__*/\n\n      _jsx(PropertyConfigurationModal, {\n        isOpen: this.state.configurationModalIsOpen,\n        onClose: () => this.setState({ configurationModalIsOpen: false }),\n        onAccept: this.saveConfigs,\n        templates: this.props.templates.toJS(),\n        currentProperties: extractionSettings }), /*#__PURE__*/\n\n      _jsx(\"div\", { className: \"metadata-extraction-table\" }, void 0, /*#__PURE__*/\n      _jsx(\"table\", { className: \"table\" }, void 0, /*#__PURE__*/\n      _jsx(\"thead\", {}, void 0, /*#__PURE__*/\n      _jsx(\"tr\", {}, void 0, /*#__PURE__*/\n      _jsx(\"th\", {}, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Metadata to extract\")), /*#__PURE__*/\n\n      _jsx(\"th\", {}, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Template\")))), /*#__PURE__*/\n\n\n\n      _jsx(\"tbody\", {}, void 0,\n      Object.entries(formattedData).map(([propIndex, data]) => /*#__PURE__*/\n      _jsx(\"tr\", {}, propIndex, /*#__PURE__*/\n      _jsx(\"td\", {}, void 0, /*#__PURE__*/\n      _jsx(Icon, { icon: Icons[data.properties[0].type], fixedWidth: true }),\n      data.properties[0].label), /*#__PURE__*/\n\n      _jsx(\"td\", { className: \"templateNameViewer\" }, void 0,\n      data.templates.map((template, index) => /*#__PURE__*/\n      _jsx(\"div\", {}, template.name,\n      template.name,\n      index !== data.templates.length - 1 ? ',' : ''))), /*#__PURE__*/\n\n\n\n      _jsx(\"td\", {}, void 0, /*#__PURE__*/\n      _jsx(I18NLink, {\n        to: `settings/metadata_extraction/suggestions/${data.properties[0].name}`,\n        className: \"btn btn-success btn-xs\" }, void 0, /*#__PURE__*/\n\n      _jsx(Icon, { icon: \"bars\" }), \"\\xA0\", /*#__PURE__*/\n\n      _jsx(Translate, {}, void 0, \"Review\")))))))))));\n\n\n\n\n\n\n\n\n\n\n  }}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nexport const mapDispatchToProps = (dispatch) =>\nbindActionCreators({ saveConfigurations }, dispatch);\n\nexport const MetadataExtractionDashboard = connect(\nmapStateToProps,\nmapDispatchToProps)(\nMetadataExtractionComponent);","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import React, { useEffect, useState } from 'react';\nimport _ from 'lodash';\nimport { t, Translate } from \"../../I18N\";\nimport { Icon } from \"./..\";\n\n\n\n\n\n\n\n\nconst computeVisiblePages = (activePage, totalPages) => {\n  if (totalPages < 6) {\n    return _.range(1, totalPages + 1);\n  }\n  if (activePage % 5 >= 0 && activePage > 4 && activePage + 2 < totalPages) {\n    return [1, activePage - 1, activePage, activePage + 1, totalPages];\n  }\n  if (activePage % 5 >= 0 && activePage > 4 && activePage + 2 >= totalPages) {\n    return [1, totalPages - 3, totalPages - 2, totalPages - 1, totalPages];\n  }\n  return [1, 2, 3, 4, 5, totalPages];\n};\n\nfunction pageLabel(array, index, pageNumber) {\n  return array[index - 1] + 2 < pageNumber ||\n  pageNumber > 1 && array[index - 1] !== pageNumber - 1 ?\n  `...${pageNumber}` :\n  pageNumber;\n}\n\nconst Pagination = ({\n  totalPages,\n  resetActivePage,\n  onPageChange,\n  onPageSizeChange }) =>\n{\n  const [activePage, setActivePage] = useState(1);\n  const [visiblePages, setVisiblePages] = useState(computeVisiblePages(1, totalPages));\n  const [pageSize, setPageSize] = useState(5);\n\n  useEffect(() => {\n    setVisiblePages(computeVisiblePages(activePage, totalPages));\n  }, [activePage, totalPages]);\n\n  useEffect(() => {\n    if (resetActivePage) {\n      setActivePage(1);\n    }\n  }, [resetActivePage]);\n\n  const changePage = (page) => {\n    if (page !== activePage) {\n      setActivePage(page);\n      onPageChange(page - 1);\n    }\n  };\n\n  function PageNumbers() {\n    return visiblePages.map((pageNumber, index, array) => /*#__PURE__*/\n    _jsx(\"button\", {\n      type: \"button\",\n\n      className: activePage === pageNumber ? 'page-button active' : 'page-button',\n      onClick: () => changePage(pageNumber) }, pageNumber,\n\n    pageLabel(array, index, pageNumber)));\n\n\n  }\n\n  return /*#__PURE__*/(\n    _jsx(\"div\", {}, void 0,\n    totalPages > 0 && /*#__PURE__*/\n    _jsx(\"div\", { className: \"table-pagination\" }, void 0, /*#__PURE__*/\n    _jsx(\"div\", { className: \"page-numbers\" }, void 0, /*#__PURE__*/\n    _jsx(\"div\", { className: \"prev-page\" }, void 0, /*#__PURE__*/\n    _jsx(\"button\", {\n      type: \"button\",\n      className: \"page-button\",\n      onClick: () => {\n        if (activePage !== 1) {\n          changePage(activePage - 1);\n        }\n      },\n      disabled: activePage === 1 }, void 0, /*#__PURE__*/\n\n    _jsx(Icon, { icon: \"angle-double-left\" }), \"\\xA0\", /*#__PURE__*/\n\n    _jsx(Translate, {}, void 0, \"Previous\"))), /*#__PURE__*/\n\n\n    _jsx(\"div\", { className: \"visible-pages\" }, void 0, PageNumbers()), /*#__PURE__*/\n    _jsx(\"div\", { className: \"next-page\" }, void 0, /*#__PURE__*/\n    _jsx(\"button\", {\n      type: \"button\",\n      className: \"page-button\",\n      onClick: () => {\n        if (activePage !== totalPages) {\n          changePage(activePage + 1);\n        }\n      },\n      disabled: activePage === totalPages }, void 0, /*#__PURE__*/\n\n    _jsx(Translate, {}, void 0, \"Next\"), \"\\xA0\", /*#__PURE__*/\n\n    _jsx(Icon, { icon: \"angle-double-right\" })))), /*#__PURE__*/\n\n\n\n    _jsx(\"div\", {}, void 0, /*#__PURE__*/\n    _jsx(\"select\", {\n      value: pageSize,\n      onChange: (e) => {\n        const newSize = Number(e.target.value);\n        setPageSize(newSize);\n        onPageSizeChange(newSize);\n      } }, void 0,\n\n    [100, 300, 500].map((size) => /*#__PURE__*/\n    _jsx(\"option\", { value: size }, size,\n    `${size} ${t('System', 'per page', null, false)}`)))))));\n\n\n\n\n\n\n\n\n};\n\nexport { Pagination };","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import React, { useState } from 'react';\nimport Modal from \"../Layout/Modal\";\nimport { Translate } from \"../I18N\";\n\n\n\n\n\n\n\n\nexport const SuggestionAcceptanceModal = ({\n  isOpen,\n  propertyType,\n  onClose,\n  onAccept }) =>\n{\n  const [allLanguages, setAllLanguages] = useState(true);\n  return /*#__PURE__*/(\n    _jsx(Modal, { isOpen: isOpen, type: \"content\", className: \"suggestion-acceptance-modal\" }, void 0, /*#__PURE__*/\n    _jsx(Modal.Header, {}, void 0, /*#__PURE__*/\n    _jsx(\"h1\", {}, void 0, /*#__PURE__*/\n    _jsx(Translate, {}, void 0, \"Confirm suggestion acceptance\"))), /*#__PURE__*/\n\n\n    _jsx(Modal.Body, {}, void 0, /*#__PURE__*/\n    _jsx(\"label\", { className: \"language-checkbox\" }, void 0,\n    propertyType !== 'date' ? /*#__PURE__*/\n    React.createElement(React.Fragment, null, /*#__PURE__*/\n    _jsx(\"input\", {\n      type: \"checkbox\",\n      checked: allLanguages,\n      onChange: (e) => setAllLanguages(e.target.checked) }), \"\\xA0\", /*#__PURE__*/\n\n\n    _jsx(Translate, {}, void 0, \"Apply to all languages\")) : /*#__PURE__*/\n\n\n    _jsx(Translate, {}, void 0, \"This will update the entity across all languages\"))), /*#__PURE__*/\n\n\n\n    _jsx(Modal.Footer, {}, void 0, /*#__PURE__*/\n    _jsx(\"button\", {\n      type: \"button\",\n      className: \"btn btn-default cancel-button\",\n      \"aria-label\": \"Close acceptance modal\",\n      onClick: onClose }, void 0, /*#__PURE__*/\n\n    _jsx(Translate, {}, void 0, \"Cancel\")), /*#__PURE__*/\n\n    _jsx(\"button\", {\n      type: \"button\",\n      className: \"btn confirm-button btn-success\",\n      onClick: () => onAccept(allLanguages) }, void 0, /*#__PURE__*/\n\n    _jsx(Translate, {}, void 0, \"Confirm\")))));\n\n\n\n\n};","import {\nobjectIdSchema,\npropertyValueSchema,\nselectionRectanglesSchema } from \"./commonSchemas\";\n\nimport { propertyTypes } from \"../propertyTypes\";\n\nexport const emitSchemaTypes = true;\n\nexport let SuggestionState;(function (SuggestionState) {SuggestionState[\"labelMatch\"] = \"Match / Label\";SuggestionState[\"labelMismatch\"] = \"Mismatch / Label\";SuggestionState[\"valueMatch\"] = \"Match / Value\";SuggestionState[\"valueMismatch\"] = \"Mismatch / Value\";SuggestionState[\"empty\"] = \"Empty / Empty\";SuggestionState[\"obsolete\"] = \"Obsolete\";SuggestionState[\"labelEmpty\"] = \"Empty / Label\";SuggestionState[\"valueEmpty\"] = \"Empty / Value\";SuggestionState[\"error\"] = \"Error\";SuggestionState[\"processing\"] = \"Processing\";SuggestionState[\"emptyMismatch\"] = \"Mismatch / Empty\";})(SuggestionState || (SuggestionState = {}));\n\n\n\n\n\n\n\n\n\n\n\n\n\nexport const IXSuggestionSchema = {\n  type: 'object',\n  additionalProperties: false,\n  title: 'IXSuggestionType',\n  definitions: { objectIdSchema, propertyTypes, propertyValueSchema },\n  properties: {\n    _id: objectIdSchema,\n    entityId: { type: 'string', minLength: 1 },\n    fileId: objectIdSchema,\n    propertyName: { type: 'string', minLength: 1 },\n    suggestedValue: propertyValueSchema,\n    suggestedText: { type: 'string' },\n    segment: { type: 'string', minLength: 1 },\n    language: { type: 'string', minLength: 1 },\n    page: { type: 'number', minimum: 1 },\n    status: { type: 'string', enum: ['processing', 'failed', 'ready'] },\n    state: { type: 'string', enum: Object.values(SuggestionState) },\n    date: { type: 'number' },\n    error: { type: 'string' },\n    selectionRectangles: selectionRectanglesSchema },\n\n  required: ['propertyName', 'entityId', 'suggestedValue', 'segment', 'language'] };\n\n\nexport const EntitySuggestionSchema = {\n  type: 'object',\n  additionalProperties: false,\n  title: 'EntitySuggestionType',\n  definitions: { objectIdSchema, propertyTypes, propertyValueSchema },\n  properties: {\n    _id: objectIdSchema,\n    entityId: { type: 'string', minLength: 1 },\n    sharedId: { type: 'string', minLength: 1 },\n    fileId: { type: 'string', minLength: 1 },\n    entityTitle: { type: 'string', minLength: 1 },\n    propertyName: { type: 'string', minLength: 1 },\n    suggestedValue: propertyValueSchema,\n    currentValue: propertyValueSchema,\n    labeledValue: propertyValueSchema,\n    selectionRectangles: selectionRectanglesSchema,\n    segment: { type: 'string', minLength: 1 },\n    language: { type: 'string', minLength: 1 },\n    state: { type: 'string', enum: Object.values(SuggestionState) },\n    page: { type: 'number', minimum: 1 },\n    status: { type: 'string', enum: ['processing', 'failed', 'ready'] },\n    date: { type: 'number' } },\n\n  required: [\n  'propertyName',\n  'entityTitle',\n  'entityId',\n  'sharedId',\n  'fileId',\n  'suggestedValue',\n  'segment',\n  'language',\n  'state',\n  'date'] };\n\n\n\nexport const SuggestionsQueryFilterSchema = {\n  type: 'object',\n  title: 'IXSuggestionsFilter',\n  additionalProperties: false,\n  properties: {\n    language: { type: 'string' },\n    propertyName: { type: 'string' },\n    state: { type: 'string', enum: Object.values(SuggestionState) } },\n\n  required: ['propertyName'] };\n\n\nexport const IXSuggestionsQuerySchema = {\n  type: 'object',\n  title: 'IXSuggestionsQuery',\n  additionalProperties: false,\n  definitions: { SuggestionsQueryFilterSchema },\n  properties: {\n    filter: SuggestionsQueryFilterSchema,\n    page: {\n      type: 'object',\n      additionalProperties: false,\n      properties: {\n        number: { type: 'number', minimum: 1 },\n        size: { type: 'number', minimum: 1, maximum: 500 } } } } };\n\n\n\n\n\nexport const IXSuggestionsStatsQuerySchema = {\n  title: 'IXSuggestionsStatsQuery',\n  additionalProperties: false,\n  definitions: { SuggestionsQueryFilterSchema },\n  properties: {\n    propertyName: { type: 'string' } },\n\n  required: ['propertyName'] };","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };} /* eslint-disable react/no-multi-comp */\nimport React from 'react';\nimport _ from 'lodash';\nimport {\n\n\n\nuseFilters,\nusePagination,\nuseRowSelect,\nuseRowState,\nuseTable } from\n'react-table';\nimport { useSticky } from 'react-table-sticky';\nimport { t, Translate } from \"../I18N\";\nimport { Icon } from \"../UI\";\nimport { propertyValueFormatter } from \"../Metadata/helpers/formater\";\n\n\nimport { SuggestionState } from \"../../shared/types/suggestionSchema\";\nimport ModalTips from \"../App/ModalTips\";\n\nconst suggestionsTable = (\nreviewedProperty,\nsuggestions,\ntotalPages,\nactionsCell,\nsegmentCell) =>\n{\n  const stateFilter = ({\n    column: { filterValue, setFilter } }) => /*#__PURE__*/\n\n  _jsx(\"select\", {\n    className: filterValue ? 'filtered' : '',\n    value: filterValue,\n    onChange: (e) => {\n      setFilter(e.target.value || undefined);\n    } }, void 0, /*#__PURE__*/\n\n  _jsx(\"option\", { value: \"\" }, void 0, t('System', 'All', 'All', false)),\n  Object.values(SuggestionState).\n  filter((state) => state !== SuggestionState.processing).\n  sort().\n  map((state) => /*#__PURE__*/\n  _jsx(\"option\", { value: state }, state,\n  t('System', state, state, false))));\n\n\n\n\n\n  const formatValue = (value) => {\n    if (!value) return '-';\n    if (reviewedProperty.type === 'date' && _.isNumber(value)) {\n      return propertyValueFormatter.date(value);\n    }\n    return value;\n  };\n\n  const currentValueCell = ({ row }) => {\n    const propertyValue = row.values.currentValue || row.original.currentValue;\n    const currentValue = formatValue(propertyValue);\n    return /*#__PURE__*/(\n      _jsx(\"div\", {}, void 0, /*#__PURE__*/\n      _jsx(\"p\", { className: \"current-value\" }, void 0, currentValue)));\n\n\n  };\n\n  const suggestionCell = ({ row }) => {\n    const suggestion = row.original;\n    const suggestedValue = formatValue(suggestion.suggestedValue);\n    return /*#__PURE__*/(\n      _jsx(\"div\", {}, void 0, /*#__PURE__*/\n      _jsx(\"p\", { className: \"suggested-value\" }, void 0, suggestedValue)));\n\n\n  };\n\n  const columns = React.useMemo(\n  () => [\n  {\n    accessor: 'segment',\n    Header: () => /*#__PURE__*/_jsx(Translate, {}, void 0, \"Context\"),\n    className: reviewedProperty.label === 'Title' ? 'long-segment' : 'segment',\n    Cell: segmentCell },\n\n  {\n    id: 'suggestion',\n    Header: () => /*#__PURE__*/_jsx(Translate, {}, void 0, \"Suggestion\"),\n    Cell: suggestionCell,\n    className: 'suggestion' },\n\n  {\n    id: 'action',\n    Header: () => '',\n    Cell: actionsCell,\n    className: 'action' },\n\n  {\n    id: 'currentValue',\n    Header: () => /*#__PURE__*/_jsx(Translate, {}, void 0, \"Current value\"),\n    Cell: currentValueCell,\n    className: 'current' },\n\n  {\n    id: 'entityTitle',\n    accessor: 'entityTitle',\n    Header: () => /*#__PURE__*/_jsx(Translate, {}, void 0, \"Title\"),\n    className: 'title' },\n\n  {\n    accessor: 'language',\n    Header: () => /*#__PURE__*/_jsx(Translate, {}, void 0, \"Language\"),\n    className: 'language',\n    Cell: ({ row }) => /*#__PURE__*/\n    _jsx(Translate, {}, void 0, row.original.language) },\n\n\n  {\n    accessor: 'state',\n    Header: () => /*#__PURE__*/\n    React.createElement(React.Fragment, null, /*#__PURE__*/\n    _jsx(ModalTips, {\n      label: /*#__PURE__*/_jsx(Icon, { icon: \"question-circle\" }),\n      title: t('System', 'State Legend', 'State Legend', false) }, void 0, /*#__PURE__*/\n\n    _jsx(\"h5\", {}, void 0, t('System', SuggestionState.labelMatch, SuggestionState.labelMatch, false)), /*#__PURE__*/\n    _jsx(\"div\", {}, void 0, /*#__PURE__*/\n    _jsx(Translate, { translationKey: \"labelMatchDesc\" }, void 0, \"It has a current value and a text selection matching with the modelsuggested value and selection. It will be used as a training sample.\")), /*#__PURE__*/\n\n\n\n\n    _jsx(\"h5\", {}, void 0,\n    t('System', SuggestionState.labelMismatch, SuggestionState.labelMismatch, false)), /*#__PURE__*/\n\n    _jsx(\"div\", {}, void 0, /*#__PURE__*/\n    _jsx(Translate, { translationKey: \"labelMismatchDesc\" }, void 0, \"It has a current value and text selection but they do not match the model prediction. Accepting the suggestion will replace the current value and text selection with the suggested ones becoming a \\\"match / labeled\\\". If the labeled data is correct and the suggestion is wrong no action is needed. It will be used as a training sample.\")), /*#__PURE__*/\n\n\n\n\n\n\n\n    _jsx(\"h5\", {}, void 0, t('System', SuggestionState.labelEmpty, SuggestionState.labelEmpty, false)), /*#__PURE__*/\n    _jsx(\"div\", {}, void 0, /*#__PURE__*/\n    _jsx(Translate, { translationKey: \"labelEmptyDesc\" }, void 0, \"Accepting is not available since there is no suggestion.If the value is correct and the suggestion is wrong no action is needed. It will be used as a training sample.\")), /*#__PURE__*/\n\n\n\n\n\n    _jsx(\"h5\", {}, void 0, t('System', SuggestionState.valueMatch, SuggestionState.valueMatch, false)), /*#__PURE__*/\n    _jsx(\"div\", {}, void 0, /*#__PURE__*/\n    _jsx(Translate, { translationKey: \"valueMatchDesc\" }, void 0, \"It has a current value that matches the suggestion, but it doesn't have a text selection. Accepting will keep the value as it is and enrich it with the suggested text selection becoming a \\\"match / label\\\" that can be used as a training sample.\")), /*#__PURE__*/\n\n\n\n\n\n    _jsx(\"h5\", {}, void 0,\n    t('System', SuggestionState.valueMismatch, SuggestionState.valueMismatch, false)), /*#__PURE__*/\n\n    _jsx(\"div\", {}, void 0, /*#__PURE__*/\n    _jsx(Translate, { translationKey: \"valueMismatchDesc\" }, void 0, \"Accepting the suggestion will replace the current value and text selection with the suggested ones becoming a \\\"match / label\\\" that will be used as a training sample. If the current value is correct, you can still click to fill the text selection so it becomes a \\\"mismatch / label\\\" that will be used as a training sample.\")), /*#__PURE__*/\n\n\n\n\n\n\n\n    _jsx(\"h5\", {}, void 0,\n    t('System', SuggestionState.emptyMismatch, SuggestionState.emptyMismatch, false)), /*#__PURE__*/\n\n    _jsx(\"div\", {}, void 0, /*#__PURE__*/\n    _jsx(Translate, { translationKey: \"emptyMismatchDesc\" }, void 0, \"There is no current value and the model is suggesting a value. Accepting the suggestion will replace the current (empty) value and text selection with the suggested ones becoming a \\\"match / label\\\" that will be used as a training sample. Alternatively you can ignore the suggestion and click to fill the text selection so it becomes a \\\"mismatch / label\\\" that will be used as a training sample.\")), /*#__PURE__*/\n\n\n\n\n\n\n\n    _jsx(\"h5\", {}, void 0, t('System', SuggestionState.valueEmpty, SuggestionState.valueEmpty, false)), /*#__PURE__*/\n    _jsx(\"div\", {}, void 0, /*#__PURE__*/\n    _jsx(Translate, { translationKey: \"valueEmptyDesc\" }, void 0, \"Accepting is not available since there is no suggestion. If the current value is correct, you can click to fill the text selection so it becomes a \\\"empty / label\\\" that will be used as a training sample.\")), /*#__PURE__*/\n\n\n\n\n\n    _jsx(\"h5\", {}, void 0, t('System', SuggestionState.empty, SuggestionState.empty, false)), /*#__PURE__*/\n    _jsx(\"div\", {}, void 0, /*#__PURE__*/\n    _jsx(Translate, { translationKey: \"emptyDesc\" }, void 0, \"Both the current value and the suggestion are empty. You can click to fill the value and text selection so it becomes a \\\"empty / label\\\" that will be used as a training sample.\")), /*#__PURE__*/\n\n\n\n\n\n    _jsx(\"h5\", {}, void 0, t('System', SuggestionState.obsolete, SuggestionState.obsolete, false)), /*#__PURE__*/\n    _jsx(\"div\", {}, void 0, /*#__PURE__*/\n    _jsx(Translate, { translationKey: \"obsoleteDesc\" }, void 0, \"A new model is training and processing suggestions. This suggestion was created by a previous model so no actions are possible until the new suggestion is received.\"))), /*#__PURE__*/\n\n\n\n\n\n    _jsx(Translate, {}, void 0, \"State\")),\n\n\n    Cell: ({ row }) => {\n      const dirtyState = row.original.state !== row.values.state;\n      return /*#__PURE__*/(\n        _jsx(\"div\", { className: dirtyState ? 'new-state' : '' }, void 0, /*#__PURE__*/\n        _jsx(Translate, {}, void 0, row.values.state)));\n\n\n    },\n    Filter: stateFilter,\n    className: 'state' }],\n\n\n  []);\n\n  const hiddenColumns = reviewedProperty.label === 'Title' ? ['entityTitle'] : [];\n\n  return useTable(\n  {\n    columns,\n    data: suggestions,\n    manualPagination: true,\n    manualFilters: true,\n    initialState: {\n      hiddenColumns,\n      pageIndex: 0,\n      pageSize: 100 },\n\n\n    pageCount: totalPages,\n    autoResetPage: false,\n    autoResetFilters: false },\n\n\n  useFilters,\n  usePagination,\n  useRowSelect,\n  useRowState,\n  useSticky);\n\n};\n\nexport { suggestionsTable };","import { isSameDate } from \"./isSameDate\";\n\nimport { SuggestionState } from \"./types/suggestionSchema\";\n\n\n\n\n\n\n\n\n\n\nconst equalsForType = (type) => (first, second) =>\ntype === 'date' ? isSameDate(first, second) : first === second;\n\nconst getLabelingState = ({ currentValue, labeledValue }) => {\n  if (labeledValue) {\n    return 'Label';\n  }\n\n  if (currentValue) {\n    return 'Value';\n  }\n\n  return 'Empty';\n};\n\nconst getMatchingState = (\n{ suggestedValue, currentValue },\npropertyType) =>\n{\n  const equals = equalsForType(propertyType);\n\n  if (suggestedValue === '') {\n    return 'Empty';\n  }\n\n  if (equals(suggestedValue, currentValue)) {\n    return 'Match';\n  }\n\n  return 'Mismatch';\n};\n\nconst getSuggestionState = (\nvalues,\npropertyType) =>\n{\n  const { modelCreationDate, error, date } = values;\n\n  if (!!error && error !== '') {\n    return SuggestionState.error;\n  }\n\n  if (date < modelCreationDate) {\n    return SuggestionState.obsolete;\n  }\n\n  const matchState = getMatchingState(values, propertyType);\n  const labelState = getLabelingState(values);\n\n  const state = {\n    Empty: {\n      Empty: SuggestionState.empty,\n      Label: SuggestionState.labelEmpty,\n      Value: SuggestionState.valueEmpty },\n\n    Match: {\n      Empty: null,\n      Label: SuggestionState.labelMatch,\n      Value: SuggestionState.valueMatch },\n\n    Mismatch: {\n      Empty: SuggestionState.emptyMismatch,\n      Label: SuggestionState.labelMismatch,\n      Value: SuggestionState.valueMismatch } }[\n\n  matchState][labelState];\n\n  if (state === null) throw new Error('Invalid suggestion state');\n\n  return state;\n};\n\nexport { getSuggestionState };","import moment from 'moment';\n\nconst isSameDate = (first, second) =>\nmoment.unix(first).utc().isSame(moment.unix(second).utc(), 'day');\n\nexport { isSameDate };","import {\nlanguage as francLanguages,\navailableLanguages as languagesList } from \"../../../shared/languagesList\";\n\n\nexport default (({ language }) => {\n  const languageKey = francLanguages(language, 'ISO639_1');\n  const laguageData = languagesList.find((l) => l.key === languageKey) || {};\n  return `force-${laguageData.rtl ? 'rtl' : 'ltr'}`;\n});","const _excluded = [\"regionId\"];var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}function ownKeys(object, enumerableOnly) {var keys = Object.keys(object);if (Object.getOwnPropertySymbols) {var symbols = Object.getOwnPropertySymbols(object);enumerableOnly && (symbols = symbols.filter(function (sym) {return Object.getOwnPropertyDescriptor(object, sym).enumerable;})), keys.push.apply(keys, symbols);}return keys;}function _objectSpread(target) {for (var i = 1; i < arguments.length; i++) {var source = null != arguments[i] ? arguments[i] : {};i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {_defineProperty(target, key, source[key]);}) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));});}return target;}function _defineProperty(obj, key, value) {if (key in obj) {Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });} else {obj[key] = value;}return obj;}function _objectWithoutProperties(source, excluded) {if (source == null) return {};var target = _objectWithoutPropertiesLoose(source, excluded);var key, i;if (Object.getOwnPropertySymbols) {var sourceSymbolKeys = Object.getOwnPropertySymbols(source);for (i = 0; i < sourceSymbolKeys.length; i++) {key = sourceSymbolKeys[i];if (excluded.indexOf(key) >= 0) continue;if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;target[key] = source[key];}}return target;}function _objectWithoutPropertiesLoose(source, excluded) {if (source == null) return {};var target = {};var sourceKeys = Object.keys(source);var key, i;for (i = 0; i < sourceKeys.length; i++) {key = sourceKeys[i];if (excluded.indexOf(key) >= 0) continue;target[key] = source[key];}return target;}import \"../scss/conversion_base.scss\";\nimport \"../scss/document.scss\";\n\nimport PropTypes from 'prop-types';\nimport React, { Component } from 'react';\n\nimport Loader from \"../../components/Elements/Loader\";\nimport { PDF } from \"../../PDF\";\nimport Immutable from 'immutable';\nimport { highlightSnippet } from \"../actions/uiActions\";\n\nimport determineDirection from \"../utils/determineDirection\";\n\nimport { APIURL } from \"../../config.js\";\n\nclass Document extends Component {\n  constructor(props) {\n    super(props);\n    //TODO: remove this if this is not needed anymore\n    // eslint-disable-next-line react/no-unused-class-component-methods\n    this.pages = { 1: 0 };\n    // eslint-disable-next-line react/no-unused-class-component-methods\n    this.previousMostVisible = props.page;\n    this.pdfLoaded = this.pdfLoaded.bind(this);\n    this.onDocumentReady = this.onDocumentReady.bind(this);\n    this.onTextDeselection = this.onTextDeselection.bind(this);\n    this.onTextSelected = this.onTextSelected.bind(this);\n    this.handleClick = this.handleClick.bind(this);\n    this.highlightReference = this.highlightReference.bind(this);\n  }\n\n  componentDidMount() {\n    this.props.unsetSelection();\n  }\n\n  componentDidUpdate(prevProps) {\n    if (prevProps && prevProps.doc.get('_id') !== this.props.doc.get('_id')) {\n      this.props.unsetSelection();\n    }\n    highlightSnippet(this.props.selectedSnippet, this.props.searchTerm);\n  }\n\n  onTextSelected(textSelection) {\n    if (this.props.disableTextSelection) {\n      return;\n    }\n    const selectionRectangles = textSelection.selectionRectangles.map(\n    (_ref) => {let { regionId } = _ref,otherProps = _objectWithoutProperties(_ref, _excluded);return _objectSpread(_objectSpread({}, otherProps), {}, { page: regionId });});\n\n    this.props.setSelection(_objectSpread(_objectSpread({}, textSelection), {}, { selectionRectangles }), this.props.file._id);\n    return this.props.deactivateReference();\n  }\n\n  onTextDeselection() {\n    this.props.unsetSelection();\n  }\n\n  onDocumentReady() {\n    this.props.onDocumentReady(this.props.doc);\n  }\n\n  handleClick() {\n    if (this.props.executeOnClickHandler) {\n      this.props.onClick();\n    }\n  }\n\n  highlightReference(connection) {\n    return this.props.activateReference(connection);\n  }\n\n  pdfLoaded() {\n    if (this.props.doScrollToActive) {\n      const references = this.props.references.toJS();\n      this.props.scrollToActive(\n      references.find((r) => r._id === this.props.activeReference),\n      references,\n      this.props.doScrollToActive);\n\n    }\n    this.props.onPDFLoaded();\n    this.componentDidUpdate();\n  }\n\n  handleOver() {}\n\n  renderPDF(file) {\n    if (!file._id) {\n      return /*#__PURE__*/_jsx(Loader, {});\n    }\n\n    return /*#__PURE__*/(\n      _jsx(PDF, {\n        onPageChange: this.props.onPageChange,\n        onPDFReady: this.onDocumentReady,\n        onPageLoaded: this.props.onPageLoaded,\n        onLoad: this.pdfLoaded,\n        file: `${APIURL}files/${file.filename}`,\n        filename: file.filename,\n        onTextSelection: this.onTextSelected,\n        onTextDeselection: this.onTextDeselection,\n        highlightReference: this.highlightReference,\n        activeReference: this.props.activeReference },\n      file.filename));\n\n\n  }\n\n  render() {\n    const { file } = this.props;\n\n    const Header = this.props.header;\n    return /*#__PURE__*/(\n      _jsx(\"div\", {}, void 0, /*#__PURE__*/\n      _jsx(\"div\", {\n        className: `_${this.props.doc.get('_id')} document ${\n        this.props.className\n        } ${determineDirection(file)}` }, void 0, /*#__PURE__*/\n\n      _jsx(Header, {}), /*#__PURE__*/\n      React.createElement(\"div\", {\n        className: \"pages\"\n        // eslint-disable-next-line react/no-unused-class-component-methods\n        , ref: (ref) => this.pagesContainer = ref,\n        onMouseOver: this.handleOver.bind(this),\n        onClick: this.handleClick },\n\n      this.renderPDF(file)))));\n\n\n\n\n  }}\n\n\nDocument.defaultProps = {\n  onPageLoaded: () => {},\n  onDocumentReady: () => {},\n  onPageChange: () => {},\n  onClick: () => {},\n  onPDFLoaded: () => {},\n  file: {},\n  searchTerm: '',\n  page: 1,\n  selectedSnippet: Immutable.fromJS({}),\n  deactivateReference: () => {},\n  header: () => false,\n  activateReference: () => {},\n  doScrollToActive: false,\n  scrollToActive: () => {},\n  activeReference: '',\n  className: '',\n  executeOnClickHandler: false };\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nexport { Document };\n\nexport default Document;","function ownKeys(object, enumerableOnly) {var keys = Object.keys(object);if (Object.getOwnPropertySymbols) {var symbols = Object.getOwnPropertySymbols(object);enumerableOnly && (symbols = symbols.filter(function (sym) {return Object.getOwnPropertyDescriptor(object, sym).enumerable;})), keys.push.apply(keys, symbols);}return keys;}function _objectSpread(target) {for (var i = 1; i < arguments.length; i++) {var source = null != arguments[i] ? arguments[i] : {};i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {_defineProperty(target, key, source[key]);}) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));});}return target;}function _defineProperty(obj, key, value) {if (key in obj) {Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });} else {obj[key] = value;}return obj;}import { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\n\nimport { setSelection, unsetSelection } from \"../actions/selectionActions\";\nimport {\nresetReferenceCreation,\nhighlightReference,\nactivateReference,\nscrollToActive,\ndeactivateReference } from \"../actions/uiActions\";\n\nimport Document from \"./Document\";\nimport { createSelector } from 'reselect';\nimport { selectDoc, selectReferences } from \"../selectors\";\n\nconst selectSourceRange = createSelector(\n(s) => s.uiState,\n(u) => u.toJS().reference.sourceRange);\n\nconst selectActiveRef = createSelector(\n(s) => s.uiState,\n(u) => u.toJS().activeReference);\n\n\nconst mapStateToProps = (state) => {\n  const { user, documentViewer } = state;\n  return {\n    selectedSnippet: documentViewer.uiState.get('snippet'),\n    selection: selectSourceRange(documentViewer),\n    doScrollToActive: documentViewer.uiState.get('goToActive'),\n    doc: selectDoc(state),\n    references: selectReferences(state),\n    className: 'sourceDocument',\n    activeReference: selectActiveRef(documentViewer),\n    executeOnClickHandler: !!documentViewer.targetDoc.get('_id'),\n    disableTextSelection: !user.get('_id'),\n    panelIsOpen: !!documentViewer.uiState.get('panel'),\n    forceSimulateSelection:\n    documentViewer.uiState.get('panel') === 'targetReferencePanel' ||\n    documentViewer.uiState.get('panel') === 'referencePanel' };\n\n};\n\nfunction mapDispatchToProps(dispatch) {\n  const actions = {\n    setSelection,\n    unsetSelection,\n    onClick: resetReferenceCreation,\n    highlightReference,\n    activateReference,\n    scrollToActive,\n    deactivateReference };\n\n  return bindActionCreators(actions, dispatch);\n}\n\nfunction mergeProps(stateProps, dispatchProps, ownProps) {\n  return _objectSpread(_objectSpread(_objectSpread(_objectSpread({},\n  stateProps),\n  dispatchProps),\n  ownProps), {}, {\n    unsetSelection: dispatchProps.unsetSelection });\n\n}\nexport default connect(mapStateToProps, mapDispatchToProps, mergeProps)(Document);","function ownKeys(object, enumerableOnly) {var keys = Object.keys(object);if (Object.getOwnPropertySymbols) {var symbols = Object.getOwnPropertySymbols(object);enumerableOnly && (symbols = symbols.filter(function (sym) {return Object.getOwnPropertyDescriptor(object, sym).enumerable;})), keys.push.apply(keys, symbols);}return keys;}function _objectSpread(target) {for (var i = 1; i < arguments.length; i++) {var source = null != arguments[i] ? arguments[i] : {};i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {_defineProperty(target, key, source[key]);}) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));});}return target;}function _defineProperty(obj, key, value) {if (key in obj) {Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });} else {obj[key] = value;}return obj;}import { omit } from 'lodash';\nimport api from \"../../utils/api\";\nimport referencesAPI from \"../referencesAPI\";\nimport * as types from \"./actionTypes\";\nimport * as connectionsTypes from \"../../Connections/actions/actionTypes\";\nimport { entityDefaultDocument } from \"../../../shared/entityDefaultDocument\";\n\nimport { actions } from \"../../BasicReducer\";\nimport { actions as formActions } from 'react-redux-form';\nimport { documentsApi } from \"../../Documents\";\nimport { notificationActions } from \"../../Notifications\";\nimport { removeDocument, unselectAllDocuments } from \"../../Library/actions/libraryActions\";\nimport { actions as relationshipActions } from \"../../Relationships\";\nimport { RequestParams } from \"../../utils/RequestParams\";\nimport { saveEntityWithFiles } from \"../../Library/actions/saveEntityWithFiles\";\nimport * as selectionActions from \"./selectionActions\";\nimport * as uiActions from \"./uiActions\";\nimport { sortTextSelections } from \"../utils/sortTextSelections\";\nimport EntitiesApi from \"../../Entities/EntitiesAPI\";\n\nfunction getEntityDoc(entity, filename, defaultLanguage) {\n  let docByFilename = entity.documents.find((d) => d.filename === filename);\n  docByFilename = docByFilename !== undefined ? docByFilename : {};\n\n  const defaultDoc = entityDefaultDocument(entity.documents, entity.language, defaultLanguage);\n\n  return filename ? docByFilename : defaultDoc;\n}\n\nconst dispatchUpdatedDocument = (dispatch, doc, updatedDoc, entityFileId) => {\n  dispatch(notificationActions.notify('Document updated', 'success'));\n  dispatch({ type: types.VIEWER_UPDATE_DOCUMENT, doc });\n  dispatch(formActions.reset('documentViewer.sidepanel.metadata'));\n  const defaultDoc = updatedDoc.entity.documents.find((document) => document._id === entityFileId);\n  dispatch(actions.update('viewer/doc', _objectSpread(_objectSpread({}, updatedDoc.entity), {}, { defaultDoc })));\n  dispatch(relationshipActions.reloadRelationships(updatedDoc.entity.sharedId));\n};\n\nexport function setDocument(document, html) {\n  return {\n    type: types.SET_DOCUMENT,\n    document,\n    html };\n\n}\n\nexport function resetDocumentViewer() {\n  return {\n    type: types.RESET_DOCUMENT_VIEWER };\n\n}\n\nexport function loadDefaultViewerMenu() {\n  return {\n    type: types.LOAD_DEFAULT_VIEWER_MENU };\n\n}\nexport function saveDocument(doc, fileID) {\n  const updateDoc = omit(doc, 'fullText', 'defaultDoc');\n  return async (dispatch, getState) => {\n    const extractredMetadata = getState().documentViewer.metadataExtraction.toJS();\n    const entityFileId = fileID || getState().documentViewer.doc.toJS().defaultDoc._id;\n    updateDoc.__extractedMetadata = _objectSpread({ fileID: entityFileId }, extractredMetadata);\n    const updatedDoc = await saveEntityWithFiles(updateDoc, dispatch);\n\n    dispatchUpdatedDocument(dispatch, doc, updatedDoc, entityFileId);\n    return updateDoc;\n  };\n}\n\nexport function saveToc(toc, fileId) {\n  return async (dispatch, getState) => {\n    const currentDoc = getState().documentViewer.doc.toJS();\n    dispatch(formActions.reset('documentViewer.sidepanel.metadata'));\n    dispatch(actions.set('documentViewer/tocBeingEdited', false));\n\n    const updatedFile = (await api.post('files', new RequestParams({ toc, _id: fileId }))).json;\n    const doc = _objectSpread(_objectSpread({},\n    currentDoc), {}, {\n      defaultDoc: updatedFile,\n      documents: currentDoc.documents.map((d) => {\n        if (d._id === updatedFile._id) {\n          return updatedFile;\n        }\n        return d;\n      }) });\n\n\n    dispatch(notificationActions.notify('Document updated', 'success'));\n    dispatch({ type: types.VIEWER_UPDATE_DOCUMENT, doc });\n    dispatch(formActions.reset('documentViewer.sidepanel.metadata'));\n    dispatch(actions.set('viewer/doc', doc));\n  };\n}\n\nexport function deleteDocument(doc) {\n  return async (dispatch) => {\n    await documentsApi.delete(new RequestParams({ sharedId: doc.sharedId }));\n    dispatch(notificationActions.notify('Document deleted', 'success'));\n    dispatch(resetDocumentViewer());\n    dispatch(removeDocument(doc));\n    await dispatch(unselectAllDocuments());\n  };\n}\n\nexport async function getDocument(requestParams, defaultLanguage, filename) {\n  const [entity] = await EntitiesApi.get(requestParams.add({ omitRelationships: true }));\n\n  entity.defaultDoc = getEntityDoc(entity, filename, defaultLanguage);\n  return entity;\n}\n\nexport function loadTargetDocument(sharedId) {\n  return (dispatch, getState) =>\n  getDocument(new RequestParams({ sharedId }), getState().locale).then((entity) => {\n    dispatch(actions.set('viewer/targetDoc', entity));\n    return referencesAPI.\n    get(new RequestParams({ sharedId, file: entity.defaultDoc._id, onlyTextReferences: true })).\n    then((references) => {\n      dispatch(actions.set('viewer/targetDocReferences', references));\n    });\n  });\n}\n\nexport function reloadDocument(sharedId) {\n  return (dispatch, getState) =>\n  Promise.all([\n  getDocument(new RequestParams({ sharedId }), getState().locale),\n  referencesAPI.get(new RequestParams({ sharedId }))]).\n  then(([targetDoc, references]) => {\n    dispatch(actions.set('viewer/doc', targetDoc));\n    dispatch(actions.set('viewer/references', references));\n  });\n}\n\nexport function cancelTargetDocument() {\n  return (dispatch) => {\n    dispatch({ type: connectionsTypes.CANCEL_RANGED_CONNECTION });\n    dispatch(actions.unset('viewer/targetDoc'));\n    dispatch(actions.unset('viewer/targetDocReferences'));\n    dispatch(selectionActions.unsetTargetSelection());\n    dispatch(uiActions.openPanel('viewMetadataPanel'));\n  };\n}\n\nexport function editToc(toc) {\n  return (dispatch) => {\n    dispatch(actions.set('documentViewer/tocBeingEdited', true));\n    dispatch(formActions.load('documentViewer.tocForm', toc));\n    dispatch(uiActions.openPanel('viewMetadataPanel'));\n    dispatch(actions.set('viewer.sidepanel.tab', 'toc'));\n  };\n}\n\nexport function leaveEditMode() {\n  return (dispatch) => {\n    dispatch(actions.set('documentViewer/tocBeingEdited', false));\n    dispatch(formActions.reset('documentViewer.sidepanel.metadata'));\n  };\n}\n\nexport function removeFromToc(tocElement) {\n  return (dispatch, getState) => {\n    const state = getState();\n    let toc = state.documentViewer.tocForm;\n\n    toc = toc.filter((entry) => entry !== tocElement);\n\n    dispatch(formActions.load('documentViewer.tocForm', toc));\n  };\n}\n\nexport function indentTocElement(tocElement, indentation) {\n  return (dispatch, getState) => {\n    const state = getState();\n    const toc = state.documentViewer.tocForm.map((entry) => _objectSpread(_objectSpread({},\n    entry),\n    entry === tocElement ? { indentation } : {}));\n\n\n    dispatch(formActions.load('documentViewer.tocForm', toc));\n  };\n}\n\nexport function addToToc(textSelectedObject, currentToc) {\n  return (dispatch, getState) => {\n    const state = getState();\n    let toc = state.documentViewer.tocForm.concat();\n    if (!toc.length) {\n      toc = currentToc;\n    }\n    const tocElement = {\n      selectionRectangles: textSelectedObject.sourceRange.selectionRectangles,\n      label: textSelectedObject.sourceRange.text,\n      indentation: 0 };\n\n\n    toc.push(tocElement);\n    toc = toc.sort(sortTextSelections);\n    dispatch(editToc(toc));\n  };\n}","import { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport { actions, MetadataForm } from \"../../Metadata\";\nimport { actions as relationshipActions } from \"../../Relationships\";\nimport { saveDocument } from \"../actions/documentActions\";\n\nfunction mapStateToProps({ documentViewer, templates, thesauris }) {\n  return {\n    model: 'documentViewer.sidepanel.metadata',\n    isEntity: !documentViewer.sidepanel.file,\n    templateId: documentViewer.sidepanel.metadata.template,\n    templates,\n    thesauris };\n\n}\n\nfunction mapDispatchToProps(dispatch, ownProps) {\n  const { fileID, onEntitySave = () => {} } = ownProps;\n  return bindActionCreators(\n  {\n    changeTemplate: actions.changeTemplate,\n    onSubmit: (doc) => async (disp, state) => {\n      const updateDoc = await saveDocument(doc, fileID)(disp, state);\n      disp(relationshipActions.reloadRelationships(doc.sharedId));\n      onEntitySave(updateDoc);\n    } },\n\n  dispatch);\n\n}\nconst connected = connect(mapStateToProps, mapDispatchToProps)(MetadataForm);\nexport { connected as DocumentForm, mapDispatchToProps };","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import React, { useEffect, useState } from 'react';\nimport { Icon } from \"../UI\";\nimport { store } from \"../store\";\nimport { SidePanel } from \"../Layout\";\nimport { Translate } from \"../I18N\";\n\n\n\nimport SourceDocument from \"../Viewer/components/SourceDocument\";\nimport { DocumentForm } from \"../Viewer/containers/DocumentForm\";\nimport { loadFetchedInReduxForm } from \"../Metadata/actions/actions\";\nimport { fetchEntity, fetchFile, scrollToPage } from \"./actions/actions\";\n\n\n\n\n\n\n\n\nconst PDFSidePanel = ({\n  open,\n  entitySuggestion,\n  closeSidePanel,\n  handleSave }) =>\n{\n  const [entity, setEntity] = useState({});\n  const [file, setFile] = useState({});\n  const templates = store === null || store === void 0 ? void 0 : store.getState().templates;\n\n  useEffect(() => {\n    fetchEntity(entitySuggestion.entityId, entitySuggestion.language).\n    then((response) => {\n      setEntity(response[0]);\n      loadFetchedInReduxForm(\n      'documentViewer.sidepanel.metadata',\n      response[0],\n      templates === null || templates === void 0 ? void 0 : templates.toJS()).\n      forEach((action) => store === null || store === void 0 ? void 0 : store.dispatch(action));\n    }).\n    catch((e) => e);\n  }, [entitySuggestion]);\n\n  useEffect(() => {\n    if (entitySuggestion.fileId) {\n      fetchFile(entitySuggestion.fileId).\n      then((response) => {\n        setFile(response.json[0]);\n      }).\n      catch((e) => e);\n    }\n  }, [entitySuggestion]);\n\n  return open ? /*#__PURE__*/\n  _jsx(SidePanel, { className: \"wide\", open: open }, void 0, /*#__PURE__*/\n  React.createElement(React.Fragment, null, /*#__PURE__*/\n  _jsx(\"div\", { className: \"sidepanel-header buttons-align-right\" }, void 0, /*#__PURE__*/\n  _jsx(\"button\", {\n    type: \"button\",\n    className: \"closeSidepanel close-modal\",\n    onClick: closeSidePanel,\n    \"aria-label\": \"Close side panel\" }, void 0, /*#__PURE__*/\n\n  _jsx(Icon, { icon: \"times\" })), /*#__PURE__*/\n\n  _jsx(\"div\", { className: \"button-list\" }, void 0, /*#__PURE__*/\n  _jsx(\"button\", { type: \"button\", className: \"btn btn-default\", onClick: closeSidePanel }, void 0, /*#__PURE__*/\n  _jsx(Translate, {}, void 0, \"Cancel\")), /*#__PURE__*/\n\n  _jsx(\"button\", { type: \"submit\", className: \"btn btn-success\", form: \"metadataForm\" }, void 0, /*#__PURE__*/\n  _jsx(Translate, {}, void 0, \"Save\")))),\n\n\n\n  entity.sharedId && file.filename && /*#__PURE__*/\n  React.createElement(React.Fragment, null, /*#__PURE__*/\n  _jsx(DocumentForm, {\n    sharedId: entity.sharedId,\n    showSubset: [entitySuggestion.propertyName],\n    storeKey: \"documentViewer\",\n    fileID: entitySuggestion.fileId,\n    onEntitySave: handleSave }), /*#__PURE__*/\n\n  _jsx(\"div\", { className: \"document-viewer\" }, void 0, /*#__PURE__*/\n  _jsx(SourceDocument, {\n    file: file,\n    onPageLoaded: async () => {\n      await scrollToPage(entitySuggestion.page || 1);\n    } }))))) : /*#__PURE__*/\n\n\n\n\n\n\n\n  // eslint-disable-next-line react/jsx-no-useless-fragment\n  React.createElement(React.Fragment, null);\n\n};\n\nexport { PDFSidePanel };","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import React, { useMemo, useRef } from 'react';\nimport { useContainerWidth } from \"./useContainerWidthHook\";\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst getTotalValue = (data) =>\ndata.reduce((subtotal, components) => subtotal + components.value, 0);\n\nconst buildMainBar = (data, ratio) => {\n  const results = [];\n  data.forEach((r) => {\n    const slotsForColor = Math.round(r.value / ratio);\n    for (let index = 0; index < slotsForColor; index += 1) {\n      results.push(r.color);\n    }\n  });\n  return results;\n};\n\nconst buildOverlayingBar = (\noverlapedData,\nmainChart,\nslots,\nratio) =>\n{\n  const results = [];\n  const slotsForColor = Math.round(overlapedData.value / ratio);\n  for (let index = 0; index < slotsForColor; index += 1) {\n    results.push(overlapedData.color);\n  }\n  for (let index = slotsForColor; index < slots; index += 1) {\n    results.push(mainChart[index]);\n  }\n  return results;\n};\n\nconst addPaddings = (chartData, slots) => {\n  const padding = [];\n\n  if (chartData.length > slots) {\n    return chartData.slice(0, slots);\n  }\n\n  for (let index = chartData.length; index < slots; index += 1) {\n    padding.push(chartData[chartData.length - 1]);\n  }\n  return chartData.concat(padding);\n};\n\nconst extractOverlying = (data) => {\n  const main = [...data];\n  const overlayingIndex = data.findIndex((c) => c.overlaying);\n\n  if (overlayingIndex >= 0) {\n    const [overlaying] = main.splice(overlayingIndex, 1);\n    return { main, overlaying };\n  }\n\n  return { main };\n};\n\nconst buildChartData = (columns, data) => {\n  const { main, overlaying } = extractOverlying(data);\n  const totalValue = getTotalValue(main);\n  const ratio = totalValue / columns;\n  const mainChart = buildMainBar(main, ratio);\n  const paddedMain = addPaddings(mainChart, columns);\n\n  if (!overlaying) {\n    return [paddedMain, paddedMain];\n  }\n\n  const overChart = buildOverlayingBar(overlaying, paddedMain, columns, ratio);\n  const paddedOver = addPaddings(overChart, columns);\n  return [paddedMain, paddedOver];\n};\n\nconst getColumnsQuantity = (width, squareSide, spaceBetweenSquares) =>\nwidth ? Math.floor((width - spaceBetweenSquares) / (squareSide + spaceBetweenSquares)) : 0;\n\nconst GridChart = ({ data, className, squareSide, spaceBetweenSquares }) => {\n  const side = squareSide || 14;\n  const space = spaceBetweenSquares || 2;\n\n  const ref = useRef(null);\n  const containerWidth = useContainerWidth(ref);\n  const columns = getColumnsQuantity(containerWidth, side, space);\n  const entries = useMemo(() => buildChartData(columns, data), [columns, data]);\n  const columnKeys = [...Array(columns).keys()];\n  const rowKeys = [0, 1];\n\n  return /*#__PURE__*/(\n    React.createElement(\"div\", { ref: ref, className: className, style: { width: '100%' } },\n    columns ? /*#__PURE__*/\n    _jsx(\"ul\", { className: \"grid-chart\", style: { height: 2 * side + 1 * space } }, void 0,\n    columnKeys.map((col) =>\n    rowKeys.map((row) => /*#__PURE__*/\n    _jsx(\"li\", { style: { backgroundColor: entries[row][col] } }, `${col}-${row}`)))) :\n\n\n\n    null));\n\n\n};\n\nexport { GridChart };","import { useState, useLayoutEffect } from 'react';\n\nfunction useContainerWidth(containerRef) {\n  const [containerWidth, setWidth] = useState(0);\n\n  useLayoutEffect(() => {\n    const readWidth = () => {var _containerRef$current;\n      setWidth(((_containerRef$current = containerRef.current) === null || _containerRef$current === void 0 ? void 0 : _containerRef$current.offsetWidth) || 0);\n    };\n\n    readWidth();\n\n    window.addEventListener('resize', readWidth);\n    return () => {\n      window.removeEventListener('resize', readWidth);\n    };\n  }, []);\n\n  return containerWidth;\n}\n\nexport { useContainerWidth };","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import { Translate } from \"../I18N\";\nimport React from 'react';\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst toPercentage = (value, total) => `${(value / total * 100).toFixed(2)}%`;\n\nexport const TrainingHealthLegend = ({ data, total, accuracy }) => /*#__PURE__*/\n_jsx(\"ul\", { className: \"legend\" }, void 0,\ndata.map((td) =>\ntd.label ? /*#__PURE__*/\n_jsx(\"li\", { style: { color: td.label.color || td.color } }, `${td.color}-${td.value}`,\ntd.label.text, ' ', /*#__PURE__*/\n_jsx(\"b\", {}, void 0,\ntd.value, \" (\", toPercentage(td.value, total), \")\")) :\n\n\nnull), /*#__PURE__*/\n\n_jsx(\"li\", { style: { color: '#6c6c7b' } }, void 0, /*#__PURE__*/\n_jsx(Translate, {}, void 0, \"Accuracy\"), \" \", (accuracy * 100).toFixed(2), \"%\"));","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import { Translate } from \"../I18N\";\nimport React from 'react';\n\nimport { GridChart } from \"./GridChart\";\nimport { TrainingHealthLegend } from \"./TrainingHealthLegend\";\n\n\n\n\n\nconst mapStats = (data) => [\n{\n  color: '#5073CF',\n  value: data.labeled,\n  label: { text: /*#__PURE__*/_jsx(Translate, {}, void 0, \"Training\") } },\n\n{\n  color: '#4CAE4C',\n  value: data.nonLabeledMatching,\n  label: { text: /*#__PURE__*/_jsx(Translate, {}, void 0, \"Matching\") } },\n\n{\n  color: '#ECA41A',\n  value: data.nonLabeledNotMatching,\n  label: { text: /*#__PURE__*/_jsx(Translate, {}, void 0, \"Non-matching\") } },\n\n{\n  color: '#E8E7EC',\n  value: data.emptyOrObsolete,\n  label: { text: /*#__PURE__*/_jsx(Translate, {}, void 0, \"Empty / Obsolete\"), color: 'black' } }];\n\n\n\nexport const TrainingHealthDashboard = ({ stats }) => {\n  if (!stats) return null;\n\n  const data = mapStats(stats.counts);\n\n  return /*#__PURE__*/(\n    _jsx(\"div\", { className: \"training-dashboard\" }, void 0, /*#__PURE__*/\n    _jsx(TrainingHealthLegend, { data: data, total: stats.counts.all, accuracy: stats.accuracy }), /*#__PURE__*/\n    _jsx(GridChart, { className: \"training-dashboard-chart\", data: data })));\n\n\n};","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import React from 'react';\nimport Modal from \"../Layout/Modal\";\nimport { Translate } from \"../I18N\";\n\n\n\n\n\n\n\nexport const CancelFindingSuggestionModal = ({\n  isOpen,\n  onClose,\n  onAccept }) =>\n{\n  return /*#__PURE__*/(\n    _jsx(Modal, { isOpen: isOpen, type: \"content\", className: \"suggestion-acceptance-modal\" }, void 0, /*#__PURE__*/\n    _jsx(Modal.Header, {}, void 0, /*#__PURE__*/\n    _jsx(\"h1\", {}, void 0, /*#__PURE__*/\n    _jsx(Translate, {}, void 0, \"Confirm\"))), /*#__PURE__*/\n\n\n    _jsx(Modal.Body, {}, void 0, /*#__PURE__*/\n    _jsx(Translate, {}, void 0, \"This will cancel the finding suggestion process\")), /*#__PURE__*/\n\n    _jsx(Modal.Footer, {}, void 0, /*#__PURE__*/\n    _jsx(\"button\", {\n      type: \"button\",\n      className: \"btn btn-default cancel-button\",\n      \"aria-label\": \"Close acceptance modal\",\n      onClick: onClose }, void 0, /*#__PURE__*/\n\n    _jsx(Translate, {}, void 0, \"Cancel\")), /*#__PURE__*/\n\n    _jsx(\"button\", { type: \"button\", className: \"btn confirm-button btn-success\", onClick: onAccept }, void 0, /*#__PURE__*/\n    _jsx(Translate, {}, void 0, \"Confirm\")))));\n\n\n\n\n};","function _extends() {_extends = Object.assign ? Object.assign.bind() : function (target) {for (var i = 1; i < arguments.length; i++) {var source = arguments[i];for (var key in source) {if (Object.prototype.hasOwnProperty.call(source, key)) {target[key] = source[key];}}}return target;};return _extends.apply(this, arguments);}function ownKeys(object, enumerableOnly) {var keys = Object.keys(object);if (Object.getOwnPropertySymbols) {var symbols = Object.getOwnPropertySymbols(object);enumerableOnly && (symbols = symbols.filter(function (sym) {return Object.getOwnPropertyDescriptor(object, sym).enumerable;})), keys.push.apply(keys, symbols);}return keys;}function _objectSpread(target) {for (var i = 1; i < arguments.length; i++) {var source = null != arguments[i] ? arguments[i] : {};i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {_defineProperty(target, key, source[key]);}) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));});}return target;}function _defineProperty(obj, key, value) {if (key in obj) {Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });} else {obj[key] = value;}return obj;}var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };} /* eslint-disable react/no-multi-comp */\nimport React, { useEffect, useRef, useState } from 'react';\n\nimport { Icon } from \"../UI\";\n\nimport { I18NLink, Translate } from \"../I18N\";\nimport { socket } from \"../socket\";\nimport { store } from \"../store\";\n\nimport { Pagination } from \"../UI/BasicTable/Pagination\";\nimport { RequestParams } from \"../utils/RequestParams\";\nimport { SuggestionAcceptanceModal } from \"./SuggestionAcceptanceModal\";\nimport { notify } from \"../Notifications/actions/notificationsActions\";\nimport { suggestionsTable } from \"./SuggestionsTable\";\n\n\nimport { SuggestionState } from \"../../shared/types/suggestionSchema\";\nimport { getSuggestionState } from \"../../shared/getIXSuggestionState\";\n\nimport {\ngetStats,\ngetSuggestions,\nixStatus,\ntrainModel,\ncancelFindingSuggestions } from \"./SuggestionsAPI\";\n\nimport { PDFSidePanel } from \"./PDFSidePanel\";\nimport { TrainingHealthDashboard } from \"./TrainingHealthDashboard\";\nimport { CancelFindingSuggestionModal } from \"./CancelFindingSuggestionsModal\";\n\n\n\n\n\n\nexport const EntitySuggestions = ({\n  property: reviewedProperty,\n  acceptIXSuggestion }) =>\n{\n  const isMounted = useRef(false);\n  const [suggestions, setSuggestions] = useState([]);\n  const [totalPages, setTotalPages] = useState(0);\n  const [resetActivePage, setResetActivePage] = useState(false);\n  const [status, setStatus] = useState({\n    key: 'ready' });\n\n  const [acceptingSuggestion, setAcceptingSuggestion] = useState(false);\n  const [openCancelFindingSuggestions, setOpenCancelFindingSuggestions] = useState(false);\n  const [sidePanelOpened, setSidePanelOpened] = useState(false);\n  const [stats, setStats] = useState(undefined);\n\n  const showConfirmationModal = (row) => {\n    row.toggleRowSelected();\n    setAcceptingSuggestion(true);\n  };\n\n  const actionsCellButtonClassNames = (state) => {\n    let className = 'btn ';\n    if (state === SuggestionState.labelMatch) {\n      className += 'btn-outline-success label-match';\n    }\n    if (state === SuggestionState.labelMismatch || state === SuggestionState.valueMismatch) {\n      className += 'btn-outline-warning label-value-mismatch';\n    }\n\n    if (state === SuggestionState.valueMatch) {\n      className += 'btn-outline-primary value-match';\n    }\n    if (\n    state === SuggestionState.labelEmpty ||\n    state === SuggestionState.valueEmpty ||\n    state === SuggestionState.obsolete ||\n    state === SuggestionState.empty ||\n    state === SuggestionState.error)\n    {\n      className += 'btn-outline-secondary disabled';\n    }\n\n    return className;\n  };\n\n  const isRequiredFieldWithoutSuggestion = (row) =>\n  row.propertyName === 'title' && row.suggestedValue === '' ||\n  reviewedProperty.required && row.suggestedValue === '';\n\n  const actionsCell = ({ row }) => {\n    const suggestion = row.values;\n    const { state } = suggestion;\n    return /*#__PURE__*/(\n      _jsx(\"div\", {}, void 0, /*#__PURE__*/\n      _jsx(\"button\", {\n        type: \"button\",\n        \"aria-label\": \"Accept suggestion\",\n        className: actionsCellButtonClassNames(state),\n        disabled:\n        state === SuggestionState.labelEmpty ||\n        state === SuggestionState.valueEmpty ||\n        state === SuggestionState.obsolete ||\n        state === SuggestionState.labelMatch ||\n        state === SuggestionState.error ||\n        isRequiredFieldWithoutSuggestion(row.original),\n\n        onClick: async () => showConfirmationModal(row) }, void 0, /*#__PURE__*/\n\n      _jsx(Icon, { icon: \"arrow-right\" }))));\n\n\n\n  };\n\n  const showPDF = (row) => {\n    // eslint-disable-next-line @typescript-eslint/no-use-before-define\n    toggleAllRowsSelected(false);\n    row.toggleRowSelected();\n    setSidePanelOpened(true);\n  };\n\n  const closePDFSidePanel = () => {\n    setSidePanelOpened(false);\n  };\n\n  const segmentCell = ({ row }) => /*#__PURE__*/\n  _jsx(\"div\", { onClick: () => showPDF(row) }, void 0, /*#__PURE__*/\n  _jsx(\"span\", { className: \"segment-pdf\" }, void 0, /*#__PURE__*/\n  _jsx(Translate, {}, void 0, \"Open PDF\")), /*#__PURE__*/\n\n  _jsx(\"span\", { className: \"segment-context\" }, void 0, row.original.segment));\n\n\n\n  const {\n    getTableProps,\n    getTableBodyProps,\n    headerGroups,\n    page,\n    prepareRow,\n    gotoPage,\n    setPageSize,\n    selectedFlatRows,\n    toggleAllRowsSelected,\n    state: { pageIndex, pageSize, filters } } =\n  suggestionsTable(reviewedProperty, suggestions, totalPages, actionsCell, segmentCell);\n\n  const retrieveSuggestions = (pageNumber = pageIndex + 1) => {\n    const queryFilter = filters.reduce(\n    (filteredValues, f) => _objectSpread(_objectSpread({}, filteredValues), {}, { [f.id]: f.value }),\n    {});\n\n    const params = new RequestParams({\n      page: { number: pageNumber, size: pageSize },\n      filter: _objectSpread(_objectSpread({}, queryFilter), {}, { propertyName: reviewedProperty.name }) });\n\n    getSuggestions(params).\n    then((response) => {\n      setSuggestions(response.suggestions);\n      setTotalPages(response.totalPages);\n    }).\n    catch(() => {});\n  };\n\n  const retriveStats = () => {\n    const params = new RequestParams({\n      propertyName: reviewedProperty.name });\n\n    getStats(params).\n    then((response) => {\n      setStats(response);\n    }).\n    catch(() => {});\n  };\n\n  const getWrappedSuggestionState = (\n  acceptedSuggestion,\n  newCurrentValue) =>\n\n  getSuggestionState(_objectSpread(_objectSpread({},\n  acceptedSuggestion), {}, { currentValue: newCurrentValue, modelCreationDate: 0 }),\n  reviewedProperty.type);\n\n\n  const acceptSuggestion = async (allLanguages) => {\n    if (selectedFlatRows.length > 0) {var _acceptedSuggestion$s;\n      const acceptedSuggestion = selectedFlatRows[0].original;\n      await acceptIXSuggestion(acceptedSuggestion, allLanguages);\n      let { labeledValue } = acceptedSuggestion;\n      if (!labeledValue && (_acceptedSuggestion$s = acceptedSuggestion.selectionRectangles) !== null && _acceptedSuggestion$s !== void 0 && _acceptedSuggestion$s.length) {\n        labeledValue = acceptedSuggestion.suggestedValue;\n      }\n      selectedFlatRows[0].toggleRowSelected();\n      selectedFlatRows[0].values.state = getWrappedSuggestionState(_objectSpread(_objectSpread({},\n      acceptedSuggestion), {}, { labeledValue }),\n      acceptedSuggestion.suggestedValue);\n\n      selectedFlatRows[0].values.currentValue = acceptedSuggestion.suggestedValue;\n      selectedFlatRows[0].setState({});\n    }\n\n    setAcceptingSuggestion(false);\n    toggleAllRowsSelected(false);\n    retriveStats();\n  };\n\n  const handlePDFSidePanelSave = (entity) => {var _entity$metadata;\n    setSidePanelOpened(false);\n    const changedPropertyValue = entity[reviewedProperty.name] || ((_entity$metadata =\n    entity.metadata) === null || _entity$metadata === void 0 ? void 0 : _entity$metadata[reviewedProperty.name]);\n    selectedFlatRows[0].values.currentValue = Array.isArray(changedPropertyValue) ?\n    changedPropertyValue[0].value || '-' :\n    changedPropertyValue;\n    selectedFlatRows[0].setState({});\n    selectedFlatRows[0].toggleRowSelected();\n    const acceptedSuggestion = selectedFlatRows[0].original;\n    selectedFlatRows[0].values.state = getWrappedSuggestionState(\n    acceptedSuggestion,\n    entity.title);\n\n    selectedFlatRows[0].setState({});\n    retriveStats();\n  };\n\n  const _trainModel = async () => {\n    setStatus({ key: 'sending_labeled_data' });\n    const params = new RequestParams({\n      property: reviewedProperty.name });\n\n\n    const response = await trainModel(params);\n    const type = response.status === 'error' ? 'danger' : 'success';\n    setStatus({ key: response.status, data: response.data });\n    store === null || store === void 0 ? void 0 : store.dispatch(notify(response.message, type));\n    if (status.key === 'ready') {\n      await retrieveSuggestions();\n    }\n  };\n\n  const _cancelFindingSuggestions = async () => {\n    setOpenCancelFindingSuggestions(false);\n    const params = new RequestParams({\n      property: reviewedProperty.name });\n\n\n    if (status.key !== 'ready') {\n      setStatus({ key: 'cancel' });\n      await cancelFindingSuggestions(params);\n    }\n  };\n\n  const onFindSuggestionButtonClicked = async () => {\n    if (status.key === 'ready') {\n      setStatus({ key: 'sending_labeled_data' });\n      await _trainModel();\n    } else {\n      setOpenCancelFindingSuggestions(true);\n    }\n  };\n\n  useEffect(retrieveSuggestions, [pageIndex, pageSize, filters]);\n  useEffect(() => {\n    if (isMounted.current) {\n      retrieveSuggestions(1);\n      gotoPage(0);\n      setResetActivePage(true);\n    } else {\n      isMounted.current = true;\n    }\n  }, [filters]);\n  useEffect(() => {\n    const params = new RequestParams({\n      property: reviewedProperty.name });\n\n    ixStatus(params).\n    then((response) => {\n      setStatus({ key: response.status, data: response.data });\n    }).\n    catch(() => {\n      setStatus({ key: 'error' });\n    });\n\n    socket.on(\n    'ix_model_status',\n    (propertyName, modelStatus, _, data) => {\n      if (propertyName === reviewedProperty.name) {\n        setStatus({ key: modelStatus, data });\n        if (data && data.total === data.processed || modelStatus === 'ready') {\n          setStatus({ key: 'ready' });\n          retrieveSuggestions();\n        }\n        retriveStats();\n      }\n    });\n\n\n    retriveStats();\n\n    return () => {\n      socket.off('ix_model_status');\n    };\n  }, []);\n\n  const ixmessages = {\n    ready: 'Find suggestions',\n    sending_labeled_data: 'Sending labeled data...',\n    processing_model: 'Training model...',\n    processing_suggestions: 'Finding suggestions',\n    cancel: 'Cancelling...',\n    error: 'Error' };\n\n\n  const formatData = (data) =>\n  data ? `${data.processed}/${data.total}` : '';\n\n  return /*#__PURE__*/(\n    React.createElement(React.Fragment, null, /*#__PURE__*/\n    _jsx(\"div\", { className: \"panel entity-suggestions\" }, void 0, /*#__PURE__*/\n    _jsx(\"div\", { className: \"dashboard-link\" }, void 0, /*#__PURE__*/\n    _jsx(I18NLink, { to: \"settings/metadata_extraction\" }, void 0, /*#__PURE__*/\n    _jsx(Icon, { icon: \"arrow-left\" }), /*#__PURE__*/\n    _jsx(Translate, {}, void 0, \"Back to dashboard\"))), /*#__PURE__*/\n\n\n    _jsx(\"div\", { className: \"panel-subheading\" }, void 0, /*#__PURE__*/\n    _jsx(\"div\", { className: \"property-info-container\" }, void 0, /*#__PURE__*/\n    _jsx(\"div\", {}, void 0, /*#__PURE__*/\n    _jsx(\"span\", { className: \"suggestion-header\" }, void 0, /*#__PURE__*/\n    _jsx(Translate, {}, void 0, \"Reviewing\"), \":\\xA0\"), /*#__PURE__*/\n\n    _jsx(\"span\", { className: \"suggestion-property\" }, void 0, /*#__PURE__*/\n    _jsx(Translate, {}, void 0, reviewedProperty.label))), /*#__PURE__*/\n\n\n    _jsx(\"div\", {}, void 0, /*#__PURE__*/\n    _jsx(\"button\", {\n      type: \"button\",\n      title: status.key !== 'ready' ? 'Cancel' : 'Train',\n      className: `btn service-request-button ${status.key}`,\n      onClick: onFindSuggestionButtonClicked }, void 0, /*#__PURE__*/\n\n    _jsx(Translate, {}, void 0, ixmessages[status.key]), \" \", formatData(status.data)))), /*#__PURE__*/\n\n\n\n    _jsx(TrainingHealthDashboard, { stats: stats })), /*#__PURE__*/\n\n    React.createElement(\"table\", _extends({}, getTableProps(), { className: \"table sticky\" }), /*#__PURE__*/\n    _jsx(\"thead\", { className: \"header\" }, void 0,\n    headerGroups.map((headerGroup) => /*#__PURE__*/\n    React.createElement(\"tr\", headerGroup.getHeaderGroupProps(),\n    headerGroup.headers.map((column) => {\n      const className =\n      column.className + (filters.find((f) => f.id === column.id) ? ' filtered' : '');\n      return /*#__PURE__*/(\n        React.createElement(\"th\", column.getHeaderProps({ className }),\n        column.render('Header'),\n        column.canFilter && column.Filter && column.render('Filter')));\n\n\n    })))), /*#__PURE__*/\n\n\n\n    React.createElement(\"tbody\", getTableBodyProps(),\n    page.map((row) => {\n      prepareRow(row);\n      return /*#__PURE__*/(\n        React.createElement(\"tr\", row.getRowProps(),\n        row.cells.map((cell) => /*#__PURE__*/\n        React.createElement(\"td\", cell.getCellProps({ className: cell.column.className }),\n        cell.render('Cell')))));\n\n\n\n\n    }))), /*#__PURE__*/\n\n\n    _jsx(Pagination, {\n      resetActivePage: resetActivePage,\n      onPageChange: gotoPage,\n      onPageSizeChange: setPageSize,\n      totalPages: totalPages }), /*#__PURE__*/\n\n    _jsx(SuggestionAcceptanceModal, {\n      isOpen: acceptingSuggestion,\n      propertyType: reviewedProperty.type,\n      onClose: () => setAcceptingSuggestion(false),\n      onAccept: async (allLanguages) => acceptSuggestion(allLanguages) }), /*#__PURE__*/\n\n    _jsx(CancelFindingSuggestionModal, {\n      isOpen: openCancelFindingSuggestions,\n      onClose: () => setOpenCancelFindingSuggestions(false),\n      onAccept: async () => _cancelFindingSuggestions() })),\n\n\n    Boolean(selectedFlatRows.length) && /*#__PURE__*/\n    _jsx(PDFSidePanel, {\n      open: sidePanelOpened,\n      closeSidePanel: closePDFSidePanel,\n      handleSave: handlePDFSidePanelSave,\n      entitySuggestion: selectedFlatRows[0].original })));\n\n\n\n\n};","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import React from 'react';\nimport RouteHandler from \"../RouteHandler\";\nimport { Helmet } from 'react-helmet';\nimport { ErrorFallback } from \"./ErrorFallback\";\n\nimport Footer from \"../Footer\";\n\nconst handledErrors = {\n  400: {\n    title: 'Bad Request',\n    summary: 'Bad Request',\n    name: 'The request could not be processed.',\n    message: '',\n    code: '400' },\n\n  404: {\n    title: 'Not Found',\n    summary: '',\n    name: 'We cant find the page youre looking for. ',\n    message: '',\n    code: '404' },\n\n  500: {\n    title: 'Unexpected error',\n    summary: 'Unexpected error',\n    name: '',\n    message: '',\n    code: '500' } };\n\n\n\nclass GeneralError extends RouteHandler {\n  render() {var _handledErrors$this$p;\n    const code = ((_handledErrors$this$p = handledErrors[this.props.params.errorCode]) === null || _handledErrors$this$p === void 0 ? void 0 : _handledErrors$this$p.code) || '404';\n    const { requestId } = this.props.location.query;\n    const safeRequestId = /^[0-9-]{4}$/.exec(requestId);\n    const error = handledErrors[code];\n    error.requestId = safeRequestId ? safeRequestId[0] : undefined;\n    return /*#__PURE__*/(\n      _jsx(\"div\", {}, void 0, /*#__PURE__*/\n      _jsx(Helmet, {}, void 0, /*#__PURE__*/\n      _jsx(\"title\", {}, void 0, error.title)), /*#__PURE__*/\n\n      _jsx(ErrorFallback, { error: error }), /*#__PURE__*/\n      _jsx(Footer, {})));\n\n\n  }}\n\n\nexport default GeneralError;","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import React from 'react';\nimport _ from 'lodash';\nimport { connect } from 'react-redux';\n\nimport { acceptSuggestion } from \"./actions/actions\";\nimport { EntitySuggestions } from \"./EntitySuggestions\";\n\nimport { ensure } from \"../../shared/tsUtils\";\nimport GeneralError from \"../App/ErrorHandling/GeneralError\";\n\nconst SuggestionComponent = ({\n  routeParams: { propertyName },\n  templates,\n  acceptSuggestion: acceptIXSuggestion }) =>\n{\n  const propertiesKey = propertyName === 'title' ? 'commonProperties' : 'properties';\n\n  const property = templates.\n  map((template) => {var _ensure$get;return (_ensure$get =\n    ensure(template).\n    get(propertiesKey)) === null || _ensure$get === void 0 ? void 0 : _ensure$get.\n    find((p) => (p === null || p === void 0 ? void 0 : p.get('name')) === propertyName);}).\n\n  filter((v) => !_.isUndefined(v));\n  if (property && property.size > 0) {\n    return /*#__PURE__*/(\n      _jsx(\"div\", { className: \"settings-content\" }, void 0, /*#__PURE__*/\n      _jsx(EntitySuggestions, {\n        property: property.get(0).toJS(),\n        acceptIXSuggestion: acceptIXSuggestion })));\n\n\n\n  }\n  return /*#__PURE__*/(\n    _jsx(\"div\", { className: \"settings-content\" }, void 0, /*#__PURE__*/\n    _jsx(GeneralError, {})));\n\n\n};\n\nconst mapStateToProps = (state) => ({\n  templates: state.templates });\n\n\nconst mapDispatchToProps = {\n  acceptSuggestion };\n\n\nconst connector = connect(mapStateToProps, mapDispatchToProps);\n\n\n\n\n\n\n\n\n\n\n\nexport const IXSuggestions = connect(mapStateToProps, mapDispatchToProps)(SuggestionComponent);","import api from \"../utils/api\";\n\nexport default {\n  get(requestParams) {\n    return api.get('pages', requestParams).then((response) => response.json);\n  },\n\n  getById(requestParams) {\n    return api.get('page', requestParams).then((response) => response.json);\n  },\n\n  save(requestParams) {\n    return api.post('pages', requestParams).then((response) => response.json);\n  },\n\n  delete(requestParams) {\n    return api.delete('pages', requestParams).then((response) => response.json);\n  } };","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import { Form, Field, Control } from 'react-redux-form';\nimport { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\nimport React, { Component } from 'react';\nimport _ from 'lodash';\n\nimport { Icon, ToggleButton } from \"../../UI\";\nimport { MarkDown } from \"../../ReactReduxForms\";\nimport {\nresetPage as resetPageAction,\nsavePage as savePageAction,\nupdateValue as updateValueAction } from \"../actions/pageActions\";\n\nimport ShowIf from \"../../App/ShowIf\";\nimport { BackButton } from \"../../Layout\";\nimport { Translate, I18NLink } from \"../../I18N\";\n\n\nimport validator from \"./ValidatePage\";\n\nconst mapStateToProps = ({ page }) => ({\n  page,\n  formState: page.formState,\n  savingPage: page.uiState.get('savingPage') });\n\n\nconst mapDispatchToProps = (dispatch) =>\nbindActionCreators(\n{ resetPage: resetPageAction, savePage: savePageAction, updateValue: updateValueAction },\ndispatch);\n\n\nconst connector = connect(mapStateToProps, mapDispatchToProps);\n\n\n\nclass PageCreator extends Component {\n  componentWillUnmount() {\n    const { resetPage } = this.props;\n    resetPage();\n  }\n\n  render() {\n    const { formState, page, savePage, updateValue, savingPage } = this.props;\n    const backUrl = '/settings/pages';\n    const pageUrl = `/page/${page.data.sharedId}/${_.kebabCase(page.data.title)}`;\n\n    let nameGroupClass = 'template-name form-group';\n    if (\n    formState.title &&\n    !formState.title.valid && (\n    formState.submitFailed || formState.title.touched))\n    {\n      nameGroupClass += ' has-error';\n    }\n\n    return /*#__PURE__*/(\n      _jsx(\"div\", { className: \"page-creator\" }, void 0, /*#__PURE__*/\n      _jsx(Form, { model: \"page.data\", onSubmit: savePage, validators: validator() }, void 0, /*#__PURE__*/\n      _jsx(\"div\", { className: \"panel panel-default\" }, void 0, /*#__PURE__*/\n      _jsx(\"div\", { className: \"metadataTemplate-heading panel-heading\" }, void 0, /*#__PURE__*/\n      _jsx(\"div\", { className: nameGroupClass }, void 0, /*#__PURE__*/\n      _jsx(Field, { model: \".title\" }, void 0, /*#__PURE__*/\n      _jsx(\"input\", { placeholder: \"Page name\", className: \"form-control\" })))), /*#__PURE__*/\n\n\n\n      _jsx(\"div\", { className: \"panel-body page-viewer document-viewer\" }, void 0, /*#__PURE__*/\n      _jsx(\"div\", { className: \"entity-view\" }, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Enable this page to be used as an entity view page:\"), /*#__PURE__*/\n      _jsx(Control, {\n        model: \".entityView\",\n        component: ToggleButton,\n        checked: Boolean(page.data.entityView),\n        onClick: () => {\n          updateValue('.entityView', !page.data.entityView);\n        } })), /*#__PURE__*/\n\n\n      _jsx(ShowIf, { if: Boolean(page.data._id) && !page.data.entityView }, void 0, /*#__PURE__*/\n      _jsx(\"div\", { className: \"alert alert-info\" }, void 0, /*#__PURE__*/\n      _jsx(Icon, { icon: \"angle-right\" }), \" \", pageUrl, \"\\xA0\", /*#__PURE__*/\n\n      _jsx(\"a\", {\n        target: \"_blank\",\n        rel: \"noopener noreferrer\",\n        href: pageUrl,\n        className: \"pull-right\" }, void 0, /*#__PURE__*/\n\n      _jsx(Translate, {}, void 0, \"(view page)\")))), /*#__PURE__*/\n\n\n\n      _jsx(MarkDown, {\n        htmlOnViewer: true,\n        model: \".metadata.content\",\n        rows: 18,\n        showPreview: !page.data.entityView }), /*#__PURE__*/\n\n      _jsx(\"div\", { className: \"alert alert-info\" }, void 0, /*#__PURE__*/\n      _jsx(Icon, { icon: \"info-circle\", size: \"2x\" }), /*#__PURE__*/\n      _jsx(\"div\", { className: \"force-ltr\" }, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Use\"), ' ', /*#__PURE__*/\n      _jsx(\"a\", {\n        target: \"_blank\",\n        rel: \"noopener noreferrer\",\n        href: \"https://guides.github.com/features/mastering-markdown/\" }, void 0, /*#__PURE__*/\n\n      _jsx(Translate, {}, void 0, \"Markdown\")),\n      ' ', /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"syntax to create page content\"), /*#__PURE__*/\n      _jsx(\"br\", {}), /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"You can also embed advanced components like maps, charts and entity lists in your page.\"), \"\\xA0\", /*#__PURE__*/\n\n\n\n\n      _jsx(\"a\", {\n        target: \"_blank\",\n        rel: \"noopener noreferrer\",\n        href: \"https://uwazi.readthedocs.io/en/latest/admin-docs/analysing-and-visualising-your-collection.html\" }, void 0, /*#__PURE__*/\n\n      _jsx(Translate, {}, void 0, \"Click here\")),\n      ' ', /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"to learn more about the components.\"))), /*#__PURE__*/\n\n\n      _jsx(\"div\", {}, void 0, /*#__PURE__*/\n      _jsx(\"div\", {}, void 0, /*#__PURE__*/\n      _jsx(\"span\", { className: \"form-group-label\" }, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Page Javascript\"))), /*#__PURE__*/\n\n\n      _jsx(\"div\", { className: \"alert alert-warning\" }, void 0, /*#__PURE__*/\n      _jsx(Icon, { icon: \"exclamation-triangle\", size: \"2x\" }), /*#__PURE__*/\n      _jsx(\"div\", { className: \"force-ltr\" }, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"With great power comes great responsibility!\"), /*#__PURE__*/\n      _jsx(\"br\", {}), /*#__PURE__*/\n      _jsx(\"br\", {}), /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"This area allows you to append custom Javascript to the page. This opens up a new universe of possibilities.\"), /*#__PURE__*/\n\n\n\n      _jsx(\"br\", {}), /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"It could also very easily break the app. Only write code here if you know exactly what you are doing.\"))), /*#__PURE__*/\n\n\n\n\n\n      _jsx(Field, { model: \".metadata.script\" }, void 0, /*#__PURE__*/\n      _jsx(\"textarea\", {\n        placeholder: \"// Javascript - With great power comes great responsibility!\",\n        className: \"form-control\",\n        rows: 12 }))))), /*#__PURE__*/\n\n\n\n\n\n      _jsx(\"div\", { className: \"settings-footer\" }, void 0, /*#__PURE__*/\n      _jsx(\"div\", { className: \"btn-cluster\" }, void 0, /*#__PURE__*/\n      _jsx(BackButton, { to: backUrl, className: \"btn-plain\" })), /*#__PURE__*/\n\n      _jsx(\"div\", { className: \"btn-cluster content-right\" }, void 0, /*#__PURE__*/\n      _jsx(I18NLink, { to: backUrl, className: \"btn btn-extra-padding btn-default\" }, void 0, /*#__PURE__*/\n      _jsx(\"span\", { className: \"btn-label\" }, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Cancel\"))), /*#__PURE__*/\n\n\n      _jsx(\"button\", {\n        type: \"submit\",\n        className: \"btn btn-extra-padding btn-success save-template\",\n        disabled: !!savingPage }, void 0, /*#__PURE__*/\n\n      _jsx(\"span\", { className: \"btn-label\" }, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Save\"))))))));\n\n\n\n\n\n\n\n  }}\n\n\nconst container = connector(PageCreator);\n\n\nexport { container as PageCreator };","import { browserHistory } from 'react-router';\n\nimport { actions as formActions } from 'react-redux-form';\n\nimport { actions } from \"../../BasicReducer\";\nimport { RequestParams } from \"../../utils/RequestParams\";\nimport { notificationActions } from \"../../Notifications\";\nimport api from \"../PagesAPI\";\nimport * as types from \"./actionTypes\";\n\n\n\nexport function loadPages() {\n  return async (dispatch) => {\n    const pages = await api.get(new RequestParams());\n    dispatch(actions.set('pages', pages));\n  };\n}\n\nexport function resetPage() {\n  return (dispatch) => {\n    dispatch(formActions.reset('page.data'));\n    dispatch(formActions.setInitial('page.data'));\n  };\n}\n\nexport function updateValue(model, value) {\n  return (dispatch) => {\n    dispatch(formActions.change(`page.data${model}`, value));\n  };\n}\n\nexport function savePage(data) {\n  return (dispatch) => {\n    dispatch({ type: types.SAVING_PAGE });\n    return api.\n    save(new RequestParams(data)).\n    then((response) => {\n      dispatch(notificationActions.notify('Saved successfully.', 'success'));\n      dispatch(\n      formActions.merge('page.data', {\n        _id: response._id,\n        sharedId: response.sharedId,\n        _rev: response._rev }));\n\n\n      dispatch({ type: types.PAGE_SAVED, data: response });\n      browserHistory.push(`/settings/pages/edit/${response.sharedId}`);\n    }).\n    catch(() => {\n      dispatch({ type: types.PAGE_SAVED, data: {} });\n    });\n  };\n}\n\nexport function deletePage(page) {\n  return (dispatch) =>\n  api.delete(new RequestParams({ sharedId: page.sharedId })).then(() => {\n    dispatch(actions.remove('pages', page));\n  });\n}","function validateTitle() {\n  return {\n    required: (val) => val && val.trim() !== '' };\n\n}\n\nexport default function () {\n  const validator = {\n    '': {},\n    title: validateTitle() };\n\n\n  return validator;\n}","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import React from 'react';\nimport { actions as formActions } from 'react-redux-form';\n\nimport RouteHandler from \"../App/RouteHandler\";\n\nimport { PageCreator } from \"./components/PageCreator\";\nimport pagesAPI from \"./PagesAPI\";\n\nexport default class EditPage extends RouteHandler {\n  static async requestState(requestParams) {\n    const page = await pagesAPI.getById(requestParams);\n\n    return [formActions.load('page.data', page)];\n  }\n\n  componentDidMount() {\n    this.context.store.dispatch(formActions.reset('page.data'));\n  }\n\n  render() {\n    return /*#__PURE__*/(\n      _jsx(\"div\", { className: \"settings-content\" }, void 0, /*#__PURE__*/\n      _jsx(PageCreator, {})));\n\n\n  }}","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import React from 'react';\nimport { PageCreator } from \"./components/PageCreator\";\nimport RouteHandler from \"../App/RouteHandler\";\n\nexport default class NewPage extends RouteHandler {\n  render() {\n    return /*#__PURE__*/(\n      _jsx(\"div\", { className: \"settings-content\" }, void 0, /*#__PURE__*/\n      _jsx(PageCreator, {})));\n\n\n  }}","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport React, { Component } from 'react';\n\nimport { I18NLink, t, Translate } from \"../../I18N\";\nimport { Icon } from \"../../UI\";\nimport { deletePage } from \"../actions/pageActions\";\n\nclass PagesList extends Component {\n  deletePage(page) {\n    return this.context.confirm({\n      accept: () => {\n        this.props.deletePage(page.toJS());\n      },\n      title: /*#__PURE__*/\n      React.createElement(React.Fragment, null, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Confirm delete page:\"), \"\\xA0\",\n      page.get('title')),\n\n\n      message: 'Are you sure you want to delete this page?' });\n\n  }\n\n  render() {\n    const { pages } = this.props;\n    return /*#__PURE__*/(\n      _jsx(\"div\", { className: \"panel panel-default\" }, void 0, /*#__PURE__*/\n      _jsx(\"div\", { className: \"panel-heading\" }, void 0, t('System', 'Pages')), /*#__PURE__*/\n      _jsx(\"ul\", { className: \"list-group pages\" }, void 0,\n      pages.map((page, index) => /*#__PURE__*/\n      _jsx(\"li\", { className: \"list-group-item\" }, index, /*#__PURE__*/\n      _jsx(I18NLink, { to: `/settings/pages/edit/${page.get('sharedId')}` }, void 0,\n      page.get('title')), /*#__PURE__*/\n\n      _jsx(\"div\", { className: \"list-group-item-actions\" }, void 0, /*#__PURE__*/\n      _jsx(I18NLink, {\n        to: `/settings/pages/edit/${page.get('sharedId')}`,\n        className: \"btn btn-default btn-xs\" }, void 0, /*#__PURE__*/\n\n      _jsx(Icon, { icon: \"pencil-alt\" }), \" \", /*#__PURE__*/_jsx(\"span\", {}, void 0, t('System', 'Edit'))), /*#__PURE__*/\n\n      _jsx(\"a\", {\n        onClick: this.deletePage.bind(this, page),\n        className: \"btn btn-danger btn-xs template-remove\" }, void 0, /*#__PURE__*/\n\n      _jsx(Icon, { icon: \"trash-alt\" }), \" \", /*#__PURE__*/_jsx(\"span\", {}, void 0, t('System', 'Delete'))))))), /*#__PURE__*/\n\n\n\n\n\n      _jsx(\"div\", { className: \"settings-footer\" }, void 0, /*#__PURE__*/\n      _jsx(I18NLink, { to: \"/settings/pages/new\", className: \"btn btn-default\" }, void 0, /*#__PURE__*/\n      _jsx(Icon, { icon: \"plus\" }), \" \", /*#__PURE__*/_jsx(\"span\", { className: \"btn-label\" }, void 0, t('System', 'Add page'))))));\n\n\n\n\n  }}\n\n\n\n\n\n\n\nPagesList.contextTypes = {\n  confirm: PropTypes.func };\n\n\nexport function mapStateToProps({ pages }) {\n  return { pages };\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return bindActionCreators({ deletePage }, dispatch);\n}\n\nexport { PagesList };\nexport default connect(mapStateToProps, mapDispatchToProps)(PagesList);","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import React from 'react';\n\nimport RouteHandler from \"../App/RouteHandler\";\nimport { actions } from \"../BasicReducer\";\nimport PagesAPI from \"./PagesAPI\";\n\nimport PagesList from \"./components/PagesList\";\n\nexport class Pages extends RouteHandler {\n  static async requestState(requestParams) {\n    const pages = await PagesAPI.get(requestParams);\n    return [actions.set('pages', pages)];\n  }\n\n  render() {\n    return /*#__PURE__*/(\n      _jsx(\"div\", { className: \"settings-content\" }, void 0, /*#__PURE__*/\n      _jsx(PagesList, {})));\n\n\n  }}\n\n\nexport default Pages;","import { actions } from \"../../BasicReducer\";\n\nimport { Component } from 'react';\nimport { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\n\nclass Script extends Component {\n  constructor(props) {\n    super(props);\n\n    this.scriptElement = null;\n  }\n\n  componentDidMount() {\n    this.appendScript();\n    window.addEventListener('error', this.props.onError);\n    window.addEventListener('unhandledrejection', this.props.onError);\n  }\n\n  componentDidUpdate(prevProps) {\n    const { children } = this.props;\n    if (children !== prevProps.children) {\n      this.removeScript();\n      window.removeEventListener('error', this.props.onError);\n      window.removeEventListener('unhandledrejection', this.props.onError);\n      this.appendScript();\n    } else if (this.scriptElement === null) {\n      this.appendScript();\n    }\n  }\n\n  componentWillUnmount() {\n    this.removeScript();\n    window.removeEventListener('error', this.props.onError);\n    window.removeEventListener('unhandledrejection', this.props.onError);\n  }\n\n  appendScript() {\n    const { children, scriptRendered } = this.props;\n    if (children && scriptRendered === false) {\n      const s = document.createElement('script');\n      s.src = `data:text/javascript,(function(){${encodeURIComponent(`\\n\\n${children}\\n\\n`)}})()`;\n      document.body.appendChild(s);\n      this.scriptElement = s;\n      this.props.dispatch(actions.setIn('page/pageView', 'scriptRendered', true));\n    }\n  }\n\n  removeScript() {\n    if (this.scriptElement) {\n      this.scriptElement.remove();\n      this.scriptElement = null;\n    }\n  }\n\n  render() {\n    return null;\n  }}\n\n\nScript.defaultProps = {\n  children: '',\n  scriptRendered: null,\n  onError: () => {} };\n\n\n\n\n\n\n\n\n\nconst container = connect()(Script);\n\nexport default container;","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import { connect } from 'react-redux';\nimport { Helmet } from 'react-helmet';\nimport Immutable from 'immutable';\nimport PropTypes from 'prop-types';\nimport React, { Component } from 'react';\n\nimport Footer from \"../../App/Footer\";\nimport MarkdownViewer from \"../../Markdown\";\nimport { Context } from \"../../Markdown/components\";\nimport { ErrorBoundary } from \"../../App/ErrorHandling/ErrorBoundary\";\nimport { Icon } from \"../../UI\";\nimport { Translate } from \"../../I18N\";\nimport { ErrorFallback } from \"../../App/ErrorHandling/ErrorFallback\";\nimport { parseRenderingError } from \"../../App/ErrorHandling/ErrorUtils\";\nimport Script from \"./Script\";\n\nconst parseSSRError = (error) => {\n  const SSRError = error instanceof Immutable.Map ? error.toJS() : error;\n  return SSRError !== null && SSRError !== void 0 && SSRError.json ? parseRenderingError(SSRError) : null;\n};\n\nclass PageViewer extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {};\n    this.warningPageError = this.warningPageError.bind(this);\n  }\n\n  componentDidUpdate(prevProps) {\n    if (prevProps.page.get('title') !== this.props.page.get('title')) {\n      this.removeCustomPageError();\n    }\n  }\n\n  componentWillUnmount() {\n    if (this.state.customPageError) {\n      this.removeCustomPageError();\n    }\n  }\n\n  warningPageError(error) {\n    this.setState({ customPageError: error });\n  }\n\n  removeCustomPageError() {\n    this.setState({ customPageError: null });\n  }\n\n  renderErrorWarning() {\n    return /*#__PURE__*/(\n      _jsx(\"div\", { className: \"alert alert-danger\" }, void 0, /*#__PURE__*/\n      _jsx(Icon, { icon: \"exclamation-triangle\" }), /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"There is an unexpected error on this custom page, it may not work properly. Please contact an admin for details.\"), /*#__PURE__*/\n\n\n\n      _jsx(Icon, { icon: \"times\", onClick: () => this.removeCustomPageError() })));\n\n\n  }\n\n  render() {\n    const { page, itemLists, datasets, error, setBrowserTitle } = this.props;\n    const lists = itemLists.toJS();\n    const originalText = page.getIn(['metadata', 'content']) || '';\n    const scriptRendered = page.getIn(['scriptRendered']);\n    let scriptCode = page.getIn(['metadata', 'script']) || '';\n    scriptCode = `var datasets = window.store.getState().page.datasets.toJS();\n    ${scriptCode}`;\n    const parsedPageError = parseSSRError(error);\n    return /*#__PURE__*/(\n      _jsx(\"div\", { className: \"row\" }, void 0,\n      !parsedPageError && /*#__PURE__*/\n      React.createElement(React.Fragment, null,\n      setBrowserTitle && /*#__PURE__*/\n      _jsx(Helmet, {}, void 0, /*#__PURE__*/\n      _jsx(\"title\", {}, void 0, page.get('title') ? page.get('title') : 'Page')), /*#__PURE__*/\n\n\n      _jsx(\"main\", { className: \"page-viewer document-viewer\" }, void 0, /*#__PURE__*/\n      _jsx(\"div\", { className: \"main-wrapper\" }, void 0,\n      this.state.customPageError && this.renderErrorWarning(), /*#__PURE__*/\n      _jsx(Context.Provider, { value: datasets }, void 0, /*#__PURE__*/\n      _jsx(ErrorBoundary, {}, void 0, /*#__PURE__*/\n      _jsx(MarkdownViewer, { html: true, markdown: originalText, lists: lists }))), /*#__PURE__*/\n\n\n      _jsx(Footer, {}))), /*#__PURE__*/\n\n\n      _jsx(Script, { scriptRendered: scriptRendered, onError: (e) => this.warningPageError(e) }, void 0,\n      scriptCode)),\n\n\n\n      parsedPageError && /*#__PURE__*/\n      _jsx(\"div\", { className: \"main-wrapper\" }, void 0, /*#__PURE__*/\n      _jsx(ErrorFallback, { error: parsedPageError }), /*#__PURE__*/\n      _jsx(Footer, {}))));\n\n\n\n\n  }}\n\n\nPageViewer.defaultProps = {\n  page: Immutable.fromJS({}),\n  itemLists: Immutable.fromJS([]),\n  datasets: Immutable.fromJS({}),\n  error: Immutable.fromJS({}),\n  setBrowserTitle: true };\n\n\n\n\n\n\n\n\n\n\nconst mapStateToProps = ({ page }) => ({\n  page: page.pageView,\n  datasets: page.datasets,\n  itemLists: page.itemLists,\n  error: page.error });\n\n\nconst container = connect(mapStateToProps)(PageViewer);\n\nexport { container as PageViewer };","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nexport const parseRenderingError = (apiResponse) =>\napiResponse ?\n{\n  name: apiResponse.json.error || 'Unexpected error',\n  message: apiResponse.json.prettyMessage,\n  requestId: apiResponse.json.requestId,\n  code: apiResponse.status } :\n\nnull;","/* eslint-disable max-depth */\n\n// Adapted from http://blog.stevenlevithan.com/archives/javascript-match-nested\nexport default (function () {\n  const formatParts = /^([\\S\\s]+?)\\.\\.\\.([\\S\\s]+)/;\n  const metaChar = /[-[\\]{}()*+?.\\\\^$|,]/g;\n  const escape = function (str) {\n    return str.replace(metaChar, '\\\\$&');\n  };\n\n  return function (str, format, escapeCode = '') {\n    const p = formatParts.exec(format);\n    if (!p) {\n      throw new Error('format must include start and end tokens separated by \"...\"');\n    }\n\n    if (p[1] === p[2]) {\n      throw new Error('start and end format tokens cannot be identical');\n    }\n\n    const opener = p[1];\n    const closer = p[2];\n    const iterator = new RegExp(\n    format.length === 5 ? `[${escape(opener + closer)}]` : `${escape(opener)}|${escape(closer)}`,\n    'g');\n\n    const results = [];\n    let openTokens;\n    let matchStartIndex;\n    let match;\n\n    do {\n      openTokens = 0;\n      while ((match = iterator.exec(str)) !== null) {\n        if (match[0] === opener) {\n          if (!openTokens) {\n            matchStartIndex = iterator.lastIndex;\n          }\n          openTokens += 1;\n        } else if (openTokens) {\n          openTokens -= 1;\n          if (!openTokens) {\n            if (\n            str.slice(\n            matchStartIndex - escapeCode.length - opener.length,\n            matchStartIndex - opener.length) ===\n            escapeCode)\n            {\n              results.push(str.slice(matchStartIndex, match.index));\n            }\n          }\n        }\n      }\n    } while (openTokens && (iterator.lastIndex = matchStartIndex));\n\n    return results;\n  };\n  // prettier-ignore\n})();\n// prettier-ignore","import rison from 'rison-node';\nimport markdownEscapedValues from \"../../utils/markdownEscapedValues\";\n\nconst listPlaceholder = '{---UWAZILIST---}';\nconst listEscape = '{list}';\n\nconst extractAdditionalOptions = (content, match) => {\n  const optionsMatch = markdownEscapedValues(content, '(...)', `${listEscape}(${match})`)[0];\n\n  let options = {};\n  let matchString = '';\n\n  if (optionsMatch) {\n    matchString = `(${optionsMatch})`;\n    try {\n      options = rison.decode(`(${optionsMatch})`);\n    } catch (err) {\n      options = {};\n    }\n  }\n\n  return { options, matchString };\n};\n\nexport default {\n  generate: (originalText) => {\n    const values = markdownEscapedValues(originalText, '(...)', listEscape);\n    const options = [];\n    let content = originalText || '';\n\n    const params = values.map((match) => {\n      const additionalOptions = extractAdditionalOptions(content, match);\n      options.push(additionalOptions.options);\n      content = content.replace(\n      `${listEscape}(${match})${additionalOptions.matchString}`,\n      listPlaceholder);\n\n      const urlParams = /\\?(.*)/g.exec(match);\n      return urlParams ? urlParams[0] : '';\n    });\n\n    return { params, content, options };\n  } };","function ownKeys(object, enumerableOnly) {var keys = Object.keys(object);if (Object.getOwnPropertySymbols) {var symbols = Object.getOwnPropertySymbols(object);enumerableOnly && (symbols = symbols.filter(function (sym) {return Object.getOwnPropertyDescriptor(object, sym).enumerable;})), keys.push.apply(keys, symbols);}return keys;}function _objectSpread(target) {for (var i = 1; i < arguments.length; i++) {var source = null != arguments[i] ? arguments[i] : {};i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {_defineProperty(target, key, source[key]);}) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));});}return target;}function _defineProperty(obj, key, value) {if (key in obj) {Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });} else {obj[key] = value;}return obj;}import rison from 'rison-node';\nimport { get, has, uniq } from 'lodash';\nimport api from \"../../Search/SearchAPI\";\nimport { markdownDatasets } from \"../../Markdown\";\n\nimport PagesAPI from \"../PagesAPI\";\nimport pageItemLists from \"./pageItemLists\";\n\n\n\n\n\n\n\n\n\n\nconst buildQuery = (sanitizedParams) => {\n  const queryDefault = { filters: {}, types: [] };\n  if (sanitizedParams) {\n    const query = rison.decode(sanitizedParams.replace('?q=', '') || '()');\n    if (typeof query !== 'object') {\n      return queryDefault;\n    }\n    return query;\n  }\n  return queryDefault;\n};\n\nconst prepareLists = (content, requestParams) => {\n  const listsData = pageItemLists.generate(content);\n\n  listsData.searchs = Promise.all(\n  listsData.params.map((params, index) => {\n    const sanitizedParams = params ? decodeURI(params) : '';\n\n    const query = buildQuery(sanitizedParams);\n\n    query.limit = listsData.options[index].limit ? String(listsData.options[index].limit) : '6';\n    return api.search(requestParams.set(query));\n  }));\n\n\n  return listsData;\n};\n\nconst replaceDynamicProperties = (pageContent, datasets) => {\n  if (!pageContent || !datasets || !datasets.entityData && !datasets.template) {\n    return { content: pageContent, errors: [] };\n  }\n\n  const parsableDatasets = {\n    entity: datasets.entityData,\n    template: datasets.template };\n\n\n  const errors = [];\n  const content = pageContent.replace(/\\$\\{((entity.|template.)[^}^\\s]*)\\}/g, (match, p) => {\n    switch (true) {\n      case /entity.metadata.\\w*$/.test(p):\n        return get(parsableDatasets, `${p}[0].value`);\n\n      case /entity.metadata.\\w*.(value|displayValue)$/.test(p):{\n          const path = p.split('.');\n          const pathEnd = path.pop();\n          return get(parsableDatasets, `${path.join('.')}[0].${pathEnd}`);\n        }\n\n      case /entity.metadata.\\w*\\[\\d+]$/.test(p):\n        return get(parsableDatasets, `${p}.value`);\n\n      case has(parsableDatasets, p):\n        return get(parsableDatasets, p);\n\n      default:\n        errors.push(match);\n        return match;}\n\n  });\n  return { content, errors };\n};\n\nconst getPageAssets = async (\nrequestParams,\nadditionalDatasets,\nlocalDatasets) =>\n{var _page$metadata;\n  const page = await PagesAPI.getById(requestParams);\n\n  const { content, errors } = replaceDynamicProperties((_page$metadata = page.metadata) === null || _page$metadata === void 0 ? void 0 : _page$metadata.content, localDatasets);\n  page.metadata.content = content;\n\n  const listsData = prepareLists(page.metadata.content, requestParams);\n\n  const dataSets = markdownDatasets.fetch(page.metadata.content, requestParams.onlyHeaders(), {\n    additionalDatasets });\n\n\n  const [pageView, searchParams, searchOptions, datasets, listSearchs] = await Promise.all([\n  page,\n  listsData.params,\n  listsData.options,\n  dataSets,\n  listsData.searchs]);\n\n  pageView.scriptRendered = false;\n\n  const itemLists = searchParams.map((p, index) => ({\n    params: p,\n    items: listSearchs[index].rows,\n    options: searchOptions[index] }));\n\n\n  const failedExpressions = uniq(errors).join('\\n');\n  return _objectSpread({\n    pageView,\n    itemLists,\n    datasets: _objectSpread(_objectSpread({}, datasets), localDatasets) },\n  failedExpressions.length && {\n    errors: `The following expressions are not valid properties:\\n ${failedExpressions}` });\n\n\n};\n\nexport { getPageAssets };","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import React from 'react';\n\nimport { actions } from \"../BasicReducer\";\nimport { unselectAllDocuments } from \"../Library/actions/libraryActions\";\nimport { wrapDispatch } from \"../Multireducer\";\nimport RouteHandler from \"../App/RouteHandler\";\nimport ViewMetadataPanel from \"../Library/components/ViewMetadataPanel\";\nimport SelectMultiplePanelContainer from \"../Library/containers/SelectMultiplePanelContainer\";\n\nimport { ErrorBoundary } from \"../App/ErrorHandling/ErrorBoundary\";\nimport { PageViewer } from \"./components/PageViewer\";\nimport { getPageAssets } from \"./utils/getPageAssets\";\n\nclass PageView extends RouteHandler {\n  static async requestState(requestParams) {\n    try {\n      const { pageView, itemLists, datasets } = await getPageAssets(requestParams);\n      return [\n      actions.set('page/pageView', pageView),\n      actions.set('page/itemLists', itemLists),\n      actions.set('page/datasets', datasets)];\n\n    } catch (e) {\n      return [actions.set('page/error', e)];\n    }\n  }\n\n  closeSidePanel() {\n    wrapDispatch(this.context.store.dispatch, 'library')(unselectAllDocuments());\n  }\n\n  componentDidMount() {\n    this.closeSidePanel();\n  }\n\n  componentWillUnmount() {\n    this.emptyState();\n  }\n\n  emptyState() {\n    this.closeSidePanel();\n    this.context.store.dispatch(actions.unset('page/pageView'));\n    this.context.store.dispatch(actions.unset('page/itemLists'));\n    this.context.store.dispatch(actions.unset('page/datasets'));\n    this.context.store.dispatch(actions.unset('page/error'));\n  }\n\n  setReduxState(state) {\n    this.context.store.dispatch(actions.set('page/pageView', state.page.pageView));\n    this.context.store.dispatch(actions.set('page/itemLists', state.page.itemLists));\n    this.context.store.dispatch(actions.set('page/datasets', state.page.datasets));\n    this.context.store.dispatch(actions.set('page/error', state.page.error));\n  }\n\n  render() {\n    return /*#__PURE__*/(\n      _jsx(ErrorBoundary, {}, void 0, /*#__PURE__*/\n      _jsx(PageViewer, {}), /*#__PURE__*/\n      _jsx(ViewMetadataPanel, { storeKey: \"library\" }), /*#__PURE__*/\n      _jsx(SelectMultiplePanelContainer, { storeKey: \"library\" })));\n\n\n  }}\n\n\nexport default PageView;","import api from \"../utils/api\";\n\nexport default {\n  get(request) {\n    return api.get('relationtypes', request).then((response) => response.json.rows);\n  },\n\n  save(request) {\n    return api.post('relationtypes', request).then((response) => response.json);\n  },\n\n  delete(request) {\n    return api.delete('relationtypes', request).then((response) => response.json);\n  } };","import api from \"../RelationTypesAPI\";\nimport { actions as formActions } from 'react-redux-form';\nimport referencesAPI from \"../../Viewer/referencesAPI\";\nimport { actions } from \"../../BasicReducer\";\nimport { RequestParams } from \"../../utils/RequestParams\";\n\nexport function editRelationType(relationType) {\n  return formActions.load('template.data', relationType);\n}\n\nexport function deleteRelationType(relationType) {\n  return function (dispatch) {\n    return api.delete(new RequestParams({ _id: relationType._id })).then(() => {\n      dispatch(actions.remove('relationTypes', relationType));\n    });\n  };\n}\n\nexport function checkRelationTypeCanBeDeleted(relationType) {\n  return function () {\n    return referencesAPI.\n    countByRelationType(new RequestParams({ relationtypeId: relationType._id })).\n    then((count) => {\n      if (count) {\n        return Promise.reject();\n      }\n    });\n  };\n}","import api from \"../utils/api\";\n\nexport default {\n  get(request) {\n    const url = 'templates';\n    return api.get(url, request).then((response) => response.json.rows);\n  },\n\n  save(request) {\n    return api.post('templates', request).then((response) => response.json);\n  },\n\n  setAsDefault(request) {\n    return api.post('templates/setasdefault', request).then((response) => response.json);\n  },\n\n  countByThesauri(request) {\n    return api.get('templates/count_by_thesauri', request).then((response) => response.json);\n  },\n\n  delete(request) {\n    return api.delete('templates', request).then((response) => response.json);\n  } };","const _excluded = [\"localID\"],_excluded2 = [\"localID\", \"inserting\"];function _objectWithoutProperties(source, excluded) {if (source == null) return {};var target = _objectWithoutPropertiesLoose(source, excluded);var key, i;if (Object.getOwnPropertySymbols) {var sourceSymbolKeys = Object.getOwnPropertySymbols(source);for (i = 0; i < sourceSymbolKeys.length; i++) {key = sourceSymbolKeys[i];if (excluded.indexOf(key) >= 0) continue;if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;target[key] = source[key];}}return target;}function _objectWithoutPropertiesLoose(source, excluded) {if (source == null) return {};var target = {};var sourceKeys = Object.keys(source);var key, i;for (i = 0; i < sourceKeys.length; i++) {key = sourceKeys[i];if (excluded.indexOf(key) >= 0) continue;target[key] = source[key];}return target;}function ownKeys(object, enumerableOnly) {var keys = Object.keys(object);if (Object.getOwnPropertySymbols) {var symbols = Object.getOwnPropertySymbols(object);enumerableOnly && (symbols = symbols.filter(function (sym) {return Object.getOwnPropertyDescriptor(object, sym).enumerable;})), keys.push.apply(keys, symbols);}return keys;}function _objectSpread(target) {for (var i = 1; i < arguments.length; i++) {var source = null != arguments[i] ? arguments[i] : {};i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {_defineProperty(target, key, source[key]);}) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));});}return target;}function _defineProperty(obj, key, value) {if (key in obj) {Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });} else {obj[key] = value;}return obj;}import { actions as formActions } from 'react-redux-form';\nimport { RequestParams } from \"../../utils/RequestParams\";\n\nimport * as types from \"./actionTypes\";\nimport { notificationActions } from \"../../Notifications\";\nimport api from \"../TemplatesAPI\";\nimport ID from \"../../../shared/uniqueID\";\nimport { actions } from \"../../BasicReducer\";\nimport entitiesApi from \"../../Entities/EntitiesAPI\";\nimport templateCommonProperties from \"../utils/templateCommonProperties\";\n\nexport const prepareTemplate = (template) => {\n  const commonPropertiesExists = template.commonProperties && template.commonProperties.length;\n\n  const commonProperties = commonPropertiesExists ?\n  template.commonProperties :\n  templateCommonProperties.get();\n\n  return _objectSpread(_objectSpread({},\n  template), {}, {\n    commonProperties: commonProperties.map((p) => _objectSpread(_objectSpread({}, p), {}, { localID: ID() })),\n    properties: template.properties.map((p) => _objectSpread(_objectSpread({}, p), {}, { localID: ID() })) });\n\n};\n\nexport function resetTemplate() {\n  return (dispatch) => {\n    dispatch(formActions.reset('template.data'));\n    dispatch(formActions.setInitial('template.data'));\n  };\n}\n\nexport function setPropertyDefaults(getState, property) {\n  const propertyWithDefaults = property;\n  propertyWithDefaults.localID = ID();\n  if (property.type === 'select' || property.type === 'multiselect') {\n    propertyWithDefaults.content = getState().thesauris.get(0).get('_id');\n  }\n\n  if (property.type === 'relationship') {\n    propertyWithDefaults.inherit = false;\n    propertyWithDefaults.content = '';\n  }\n\n  if (property.type === 'nested') {\n    propertyWithDefaults.nestedProperties = [{ key: '', label: '' }];\n  }\n  return propertyWithDefaults;\n}\n\nexport function addProperty(property = {}, _index = undefined) {\n  return (dispatch, getState) => {\n    const properties = getState().template.data.properties.slice(0);\n    const index = _index !== undefined ? _index : properties.length;\n    const propertyWithDefaults = setPropertyDefaults(getState, property);\n    properties.splice(index, 0, propertyWithDefaults);\n    dispatch(formActions.change('template.data.properties', properties));\n  };\n}\n\nexport function setNestedProperties(propertyIndex, properties) {\n  return (dispatch) => {\n    dispatch(\n    formActions.load(`template.data.properties[${propertyIndex}].nestedProperties`, properties));\n\n  };\n}\n\nexport function updateProperty(property, index) {\n  return (dispatch, getState) => {\n    const properties = getState().template.data.properties.slice(0);\n    properties.splice(index, 1, property);\n    dispatch(formActions.change('template.data.properties', properties));\n  };\n}\n\nexport function inserted(index) {\n  return (dispatch) => {\n    dispatch(formActions.change(`template.data.properties[${index}].inserting`, null));\n  };\n}\n\nexport function selectProperty(index) {\n  return {\n    type: types.SELECT_PROPERTY,\n    index };\n\n}\n\nexport function removeProperty(index) {\n  return (dispatch) => {\n    dispatch(formActions.remove('template.data.properties', index));\n    dispatch(formActions.resetErrors('template.data'));\n  };\n}\n\nexport function reorderProperty(originIndex, targetIndex) {\n  return (dispatch) => {\n    dispatch(formActions.move('template.data.properties', originIndex, targetIndex));\n  };\n}\n\nexport const sanitize = (data) => {\n  const commonProperties = data.commonProperties.map((prop) => {\n    const { localID } = prop,sanitizedProp = _objectWithoutProperties(prop, _excluded);\n    return sanitizedProp;\n  });\n  const properties = data.properties.map((prop) => {\n    const { localID, inserting } = prop,sanitizedProp = _objectWithoutProperties(prop, _excluded2);\n    if (sanitizedProp.inherit && !sanitizedProp.content) {\n      sanitizedProp.inherit = false;\n    }\n    return sanitizedProp;\n  });\n  return _objectSpread(_objectSpread({}, data), {}, { properties, commonProperties });\n};\n\nexport function validateMapping(template) {\n  return api.validateMapping(new RequestParams(template));\n}\n\nexport function saveTemplate(data) {\n  let template = sanitize(data);\n  return (dispatch) => {\n    dispatch({ type: types.SAVING_TEMPLATE });\n    return api.\n    save(new RequestParams(template)).\n    then((response) => {\n      template = prepareTemplate(response);\n      dispatch({ type: types.TEMPLATE_SAVED, data: template });\n      dispatch(actions.update('templates', template));\n      dispatch(formActions.merge('template.data', template));\n      dispatch(notificationActions.notify('Saved successfully.', 'success'));\n    }).\n    catch((e) => {\n      dispatch({ type: types.TEMPLATE_SAVED, data });\n      throw e;\n    });\n  };\n}\n\nexport function updateValue(model, value) {\n  return (dispatch) => {\n    dispatch(formActions.change(`template.data${model}`, value));\n  };\n}\n\nexport function countByTemplate(template) {\n  return entitiesApi.countByTemplate(new RequestParams({ templateId: template._id }));\n}","import * as types from \"./actionTypes\";\nimport api from \"../RelationTypesAPI\";\nimport { actions } from \"../../BasicReducer\";\nimport { notificationActions } from \"../../Notifications\";\nimport { t } from \"../../I18N\";\nimport { RequestParams } from \"../../utils/RequestParams\";\n\nexport function saveRelationType(relationType) {\n  return (dispatch) =>\n  api.save(new RequestParams(relationType)).then((response) => {\n    dispatch({ type: types.RELATION_TYPE_SAVED });\n    dispatch(actions.push('relationTypes', response));\n    dispatch(\n    notificationActions.notify(t('System', 'RelationType saved', null, false), 'success'));\n\n  });\n}\n\nexport function resetRelationType() {\n  return { type: types.RESET_RELATION_TYPE };\n}","//DATA\nexport const RELATION_TYPE_SAVED = 'RELATION_TYPE_SAVED';\nexport const EDIT_RELATION_TYPE = 'EDIT_RELATION_TYPE';\nexport const RELATION_TYPE_DELETED = 'RELATION_TYPE_DELETED';\nexport const SET_RELATION_TYPES = 'SET_RELATION_TYPES';\nexport const RESET_RELATION_TYPE = 'RESET_RELATION_TYPE';","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { TwitterPicker } from 'react-color';\n\nimport { COLORS } from \"../../utils/colors\";\n\nclass ColorPicker extends Component {\n  constructor(props) {\n    super(props);\n    this.state = { active: false };\n    this.onButtonClick = this.onButtonClick.bind(this);\n    this.onBlur = this.onBlur.bind(this);\n    this.onColorChange = this.onColorChange.bind(this);\n  }\n\n  onColorChange({ hex }) {\n    const { onChange } = this.props;\n    onChange(hex);\n  }\n\n  onButtonClick() {\n    this.setState((oldState) => ({ active: !oldState.active }));\n  }\n\n  onBlur() {\n    this.setState({ active: false });\n  }\n\n  render() {\n    const { active } = this.state;\n    const { value, defaultValue } = this.props;\n    return /*#__PURE__*/(\n      _jsx(\"div\", { className: \"ColorPicker\" }, void 0, /*#__PURE__*/\n      _jsx(\"div\", {\n        className: \"ColorPicker__button\",\n        style: { backgroundColor: value || defaultValue },\n        onClick: this.props.disabled ? () => {} : this.onButtonClick }),\n\n      active && /*#__PURE__*/\n      _jsx(\"div\", { className: \"ColorPicker__popover\" }, void 0, /*#__PURE__*/\n      _jsx(\"div\", { className: \"ColorPicker__cover\", onClick: this.onBlur }), /*#__PURE__*/\n      _jsx(TwitterPicker, {\n        color: value || defaultValue,\n        colors: COLORS,\n        onChangeComplete: this.onColorChange }))));\n\n\n\n\n\n  }}\n\n\nColorPicker.defaultProps = {\n  value: '',\n  defaultValue: '',\n  disabled: false };\n\n\n\n\n\n\n\n\n\nexport default ColorPicker;","import * as types from \"./actionTypes\";\n\nexport function editProperty(id) {\n  return {\n    type: types.EDIT_PROPERTY,\n    id };\n\n}\n\nexport function setThesauris(thesauris) {\n  return {\n    type: types.SET_THESAURIS,\n    thesauris };\n\n}","import { createSelector } from 'reselect';\n\nconst checkErrorsOnLabel = createSelector(\n(state, props) =>\nstate.template.formState.$form.errors[`properties.${props.index}.label.required`],\n(state, props) =>\nstate.template.formState.$form.errors[`properties.${props.index}.label.duplicated`],\n(required, duplicated) => required || duplicated);\n\n\nexport { checkErrorsOnLabel };","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import React, { Component } from 'react';\nimport { Icon } from \"../../UI\";\n\nimport Icons from \"./Icons\";\n\nconst titles = {\n  defaultTitle:\n  'This property has the same configuration as others with the same label and will be used together.',\n  contentConflict:\n  'Properties with the same label but different thesauri as content are not allowed.',\n  relationConflict:\n  'Relationship properties with the same label but different relationship types are not allowed.',\n  typeConflict: 'Properties with the same label but incompatible types are not allowed.',\n  inheritConflict:\n  'Properties with the same label but incompatible inherited types are not allowed.' };\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst inheritTypeToShow = (prop) =>\nprop.inheritType ? prop.inheritType[0].toUpperCase() + prop.inheritType.slice(1) : '';\n\nconst invalidType = (prop) =>\nprop.typeConflict || prop.relationConflict || prop.inheritConflict;\n\nconst typeToShow = (prop) => prop.type[0].toUpperCase() + prop.type.slice(1);\n\nconst title = (prop) => {\n  if (prop.inheritConflict) {\n    return titles.inheritConflict;\n  }\n  if (prop.relationConflict) {\n    return titles.relationConflict;\n  }\n  if (prop.typeConflict) {\n    return titles.typeConflict;\n  }\n  return '';\n};\n\nconst contentTitle = (prop) =>\nprop.contentConflict ? titles.contentConflict : '';\n\nexport class SimilarProperty extends Component {\n  render() {\n    const { templateProperty } = this.props;\n    const typeIcon = templateProperty.type;\n    const invalidThesauri = templateProperty.contentConflict && templateProperty.thesaurusName;\n    return /*#__PURE__*/(\n      _jsx(\"tr\", { className: \"property-atributes is-active\" }, void 0, /*#__PURE__*/\n      _jsx(\"td\", {}, void 0, /*#__PURE__*/\n      _jsx(Icon, { icon: \"file\" }), \" \", templateProperty.template), /*#__PURE__*/\n\n      _jsx(\"td\", {\n        className: invalidType(templateProperty) ? 'conflict' : '',\n        title: title(templateProperty) }, void 0,\n\n      invalidType(templateProperty) && /*#__PURE__*/_jsx(Icon, { icon: \"exclamation-triangle\" }), \"\\xA0\", /*#__PURE__*/\n\n      _jsx(Icon, { icon: Icons[typeIcon] || 'fa fa-font' }), \"\\xA0\",\n\n      typeToShow(templateProperty),\n      templateProperty.relationTypeName && ` (${templateProperty.relationTypeName})`,\n      inheritTypeToShow(templateProperty) &&\n      ` (Inherit: ${inheritTypeToShow(templateProperty)})`), /*#__PURE__*/\n\n      _jsx(\"td\", {\n        className: templateProperty.contentConflict ? 'conflict' : '',\n        title: contentTitle(templateProperty) }, void 0,\n\n      invalidThesauri && /*#__PURE__*/_jsx(Icon, { icon: \"exclamation-triangle\" }),\n      templateProperty.thesaurusName && /*#__PURE__*/_jsx(Icon, { icon: \"book\" }),\n      templateProperty.thesaurusName)));\n\n\n\n  }}","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}function ownKeys(object, enumerableOnly) {var keys = Object.keys(object);if (Object.getOwnPropertySymbols) {var symbols = Object.getOwnPropertySymbols(object);enumerableOnly && (symbols = symbols.filter(function (sym) {return Object.getOwnPropertyDescriptor(object, sym).enumerable;})), keys.push.apply(keys, symbols);}return keys;}function _objectSpread(target) {for (var i = 1; i < arguments.length; i++) {var source = null != arguments[i] ? arguments[i] : {};i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {_defineProperty(target, key, source[key]);}) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));});}return target;}function _defineProperty(obj, key, value) {if (key in obj) {Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });} else {obj[key] = value;}return obj;}import { connect } from 'react-redux';\nimport React, { Component } from 'react';\n\nimport { Translate } from \"../../I18N\";\n\n\n\nimport { getCompatibleTypes } from \"../../../shared/propertyTypes\";\nimport { SimilarProperty } from \"./SimilarProperty\";\n\n\n\n\n\n\nclass SharedProperties extends Component {\n  static findProperty(id, templates) {\n    return templates.reduce(\n    (found, template) => {var _template$properties;return (\n        found || ((_template$properties = template.properties) === null || _template$properties === void 0 ? void 0 : _template$properties.find((p) => p._id === id)));},\n    undefined);\n\n  }\n\n  getRelationTypeName(relationTypeId) {\n    const relationType = relationTypeId ?\n    this.props.relationTypes.toJS().find((r) => r._id === relationTypeId) :\n    undefined;\n    return relationType ? relationType.name : undefined;\n  }\n\n  getThesauriName(thesauriId) {\n    const thesaurus = thesauriId ?\n    this.props.thesauris.toJS().find((thesauri) => thesauri._id === thesauriId) :\n    undefined;\n    return thesaurus ? thesaurus.name : undefined;\n  }\n\n  findSameLabelProperties(label, templates) {\n    return templates.\n    filter((template) => template._id !== this.props.templateId && template.properties).\n    map((template) => {\n      const property = (template.properties || []).find(\n      (prop) => prop.label.trim().toLowerCase() === label.trim().toLowerCase());\n\n      return (\n        property ? { template: template.name, property } : { template: undefined });\n\n    }).\n    filter((prop) => prop.template !== undefined);\n  }\n\n  render() {\n    const { type, content, relationType, inherit, label, templates } = this.props;\n    const _templates = templates.toJS();\n    const inheritedProperty = SharedProperties.findProperty(inherit === null || inherit === void 0 ? void 0 : inherit.property, _templates);\n    const similarProperties = this.findSameLabelProperties(\n    label,\n    _templates).\n    map((propertyMatch) => {var _property$inherit;\n      const { property } = propertyMatch;\n\n      const otherInheritedProperty = SharedProperties.findProperty((_property$inherit =\n      property.inherit) === null || _property$inherit === void 0 ? void 0 : _property$inherit.property,\n      _templates);\n\n\n      return _objectSpread(_objectSpread({},\n      propertyMatch), {}, {\n        typeConflict: !getCompatibleTypes(type).includes(property.type),\n        relationConflict: relationType && property.relationType !== relationType,\n        contentConflict: property.content !== content,\n        type: property.type,\n        relationTypeName: this.getRelationTypeName(property.relationType),\n        thesaurusName: this.getThesauriName(property.content),\n        inheritConflict: (inheritedProperty === null || inheritedProperty === void 0 ? void 0 : inheritedProperty.type) !== (otherInheritedProperty === null || otherInheritedProperty === void 0 ? void 0 : otherInheritedProperty.type),\n        inheritType: otherInheritedProperty === null || otherInheritedProperty === void 0 ? void 0 : otherInheritedProperty.type });\n\n    });\n\n    const thisProperty = {\n      template: `${this.props.templateName} (this template)`,\n      type,\n      relationTypeName: this.getRelationTypeName(relationType),\n      thesaurusName: this.getThesauriName(content),\n      typeConflict: false,\n      contentConflict: false,\n      relationConflict: false,\n      inheritConflict: false,\n      inheritType: inheritedProperty === null || inheritedProperty === void 0 ? void 0 : inheritedProperty.type };\n\n\n    const templatesWithSameLabelProperties = [thisProperty, ...similarProperties];\n    const hasContent = templatesWithSameLabelProperties.find((prop) => prop.thesaurusName);\n    return /*#__PURE__*/(\n      React.createElement(React.Fragment, null, /*#__PURE__*/\n      _jsx(\"label\", { className: \"suggestions-label\" }, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Properties from other templates in the collection using the same label\")), /*#__PURE__*/\n\n\n\n      _jsx(\"table\", { className: \"table\" }, void 0, /*#__PURE__*/\n      _jsx(\"thead\", {}, void 0, /*#__PURE__*/\n      _jsx(\"tr\", {}, void 0, /*#__PURE__*/\n      _jsx(\"th\", {}, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Template\")), /*#__PURE__*/\n\n      _jsx(\"th\", {}, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Type\")),\n\n      hasContent && /*#__PURE__*/\n      _jsx(\"th\", {}, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Thesauri\"), \"/\", /*#__PURE__*/_jsx(Translate, {}, void 0, \"Entity\")))), /*#__PURE__*/\n\n\n\n\n      _jsx(\"tbody\", {}, void 0,\n      templatesWithSameLabelProperties.map((templateProperty, index) => /*#__PURE__*/\n      _jsx(SimilarProperty, { templateProperty: templateProperty }, index))))));\n\n\n\n\n\n  }}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nexport function mapStateToProps(state, props) {\n  const propertySchemaElement = state.template.data.properties[props.index];\n  const { relationTypes } = state;\n  return {\n    templates: state.templates,\n    thesauris: state.thesauris,\n    relationTypes,\n    templateName: state.template.data.name,\n    templateId: state.template.data._id,\n    type: propertySchemaElement.type,\n    filter: propertySchemaElement.filter,\n    label: propertySchemaElement.label,\n    content: propertySchemaElement.content,\n    relationType: propertySchemaElement.relationType,\n    inherit: propertySchemaElement.inherit };\n\n}\n\nexport const FilterSuggestions = connect(mapStateToProps)(SharedProperties);","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import { Field } from 'react-redux-form';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { Translate } from \"../../I18N\";\n\nconst PropertyConfigOption = ({ children, model, label }) => /*#__PURE__*/\n_jsx(Field, { model: model }, void 0, /*#__PURE__*/\n_jsx(\"label\", { className: \"property-label\", htmlFor: `test${model}` }, void 0, /*#__PURE__*/\n_jsx(\"input\", { id: `test${model}`, type: \"checkbox\" }), ' ', /*#__PURE__*/\n_jsx(Translate, { translationKey: label }, void 0, label)),\n\nchildren);\n\n\n\nPropertyConfigOption.defaultProps = {\n  children: '' };\n\n\n\n\n\n\n\n\nexport default PropertyConfigOption;","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport { FilterSuggestions } from \"./FilterSuggestions\";\nimport { connect } from 'react-redux';\nimport { Translate } from \"../../I18N\";\nimport PropertyConfigOption from \"./PropertyConfigOption\";\nimport Tip from \"../../Layout/Tip\";\n\nclass PropertyConfigOptions extends Component {\n  render() {\n    const { index, filter, type, canBeFilter } = this.props;\n    return /*#__PURE__*/(\n      _jsx(\"div\", {}, void 0, /*#__PURE__*/\n      _jsx(PropertyConfigOption, {\n        label: \"Hide label\",\n        model: `template.data.properties[${index}].noLabel` }, void 0, /*#__PURE__*/\n\n      _jsx(Tip, {}, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"This property will be shown without the label.\"))), /*#__PURE__*/\n\n\n      _jsx(PropertyConfigOption, {\n        label: \"Required property\",\n        model: `template.data.properties[${index}].required` }, void 0, /*#__PURE__*/\n\n      _jsx(Tip, {}, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"You won't be able to save an entity if this property is empty.\"))), /*#__PURE__*/\n\n\n\n\n      _jsx(PropertyConfigOption, {\n        label: \"Show in cards\",\n        model: `template.data.properties[${index}].showInCard` }, void 0, /*#__PURE__*/\n\n      _jsx(Tip, {}, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"This property will appear in the library cards as part of the basic info.\"))),\n\n\n\n\n\n      canBeFilter && /*#__PURE__*/\n      _jsx(\"div\", { className: \"inline-group\" }, void 0, /*#__PURE__*/\n      _jsx(PropertyConfigOption, {\n        label: \"Use as filter\",\n        model: `template.data.properties[${index}].filter` }, void 0, /*#__PURE__*/\n\n      _jsx(Tip, {}, void 0, /*#__PURE__*/\n      _jsx(Translate, { translationKey: \"Property as filter description\" }, void 0, \"This property will be used for filtering the library results. When properties match in equal name and field type with other entity types, they will be combined for filtering.\"))),\n\n\n\n\n\n\n      filter && /*#__PURE__*/\n      React.createElement(React.Fragment, null, /*#__PURE__*/\n      _jsx(PropertyConfigOption, {\n        label: \"Default filter\",\n        model: `template.data.properties[${index}].defaultfilter` }, void 0, /*#__PURE__*/\n\n      _jsx(Tip, {}, void 0, /*#__PURE__*/\n      _jsx(Translate, { translationKey: \"Property as default filter description\" }, void 0, \"Use this property as a default filter in the library. When there are no entity types selected, this property will show as a default filter for your collection.\"))),\n\n\n\n\n\n\n      ['text', 'date', 'numeric', 'select'].includes(type) && /*#__PURE__*/\n      _jsx(PropertyConfigOption, {\n        label: \"Priority sorting\",\n        model: `template.data.properties[${index}].prioritySorting` }, void 0, /*#__PURE__*/\n\n      _jsx(Tip, {}, void 0, /*#__PURE__*/\n      _jsx(Translate, { translationKey: \"Priority sorting description\" }, void 0, \"Properties marked as priority sorting will be used as default sorting criteria. If more than one property is marked as priority sorting the system will try to pick-up the best fit. When listing mixed template types, the system will pick-up the best combined priority sorting.\"))))), /*#__PURE__*/\n\n\n\n\n\n\n\n\n\n\n\n\n      _jsx(FilterSuggestions, { index: index })));\n\n\n  }}\n\n\nPropertyConfigOptions.defaultProps = {\n  canBeFilter: true,\n  filter: false };\n\n\n\n\n\n\n\n\n\nexport function mapStateToProps({ template }, props) {\n  return {\n    filter: template.data.properties[props.index].filter };\n\n}\n\nexport default connect(mapStateToProps)(PropertyConfigOptions);","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport { Field } from 'react-redux-form';\nimport { connect } from 'react-redux';\nimport { Icon } from \"../../UI\";\nimport { Translate } from \"../../I18N\";\nimport { checkErrorsOnLabel } from \"../utils/checkErrorsOnLabel\";\n\nimport PropertyConfigOptions from \"./PropertyConfigOptions\";\n\nexport class FormConfigInput extends Component {\n  render() {\n    const { index, labelHasError, type, canBeFilter } = this.props;\n\n    return /*#__PURE__*/(\n      _jsx(\"div\", {}, void 0, /*#__PURE__*/\n      _jsx(\"div\", { className: `form-group${labelHasError ? ' has-error' : ''}` }, void 0, /*#__PURE__*/\n      _jsx(\"label\", {}, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Name\")), /*#__PURE__*/\n\n      _jsx(Field, { model: `template.data.properties[${index}].label` }, void 0, /*#__PURE__*/\n      _jsx(\"input\", { className: \"form-control\" }))),\n\n\n      type === 'geolocation' && /*#__PURE__*/\n      _jsx(\"div\", { className: \"geolocation-grouping-alert\" }, void 0, /*#__PURE__*/\n      _jsx(Icon, { icon: \"info-circle\" }), /*#__PURE__*/\n      _jsx(\"p\", {}, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Adjacent geolocation properties will render on the same map\"), \".\")), /*#__PURE__*/\n\n\n\n      _jsx(PropertyConfigOptions, { index: index, type: type, canBeFilter: canBeFilter })));\n\n\n  }}\n\n\nFormConfigInput.defaultProps = {\n  canBeFilter: true,\n  labelHasError: false };\n\n\n\n\n\n\n\n\n\nexport function mapStateToProps(state, props) {\n  return {\n    labelHasError: checkErrorsOnLabel(state, props) };\n\n}\n\nexport default connect(mapStateToProps)(FormConfigInput);","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}function ownKeys(object, enumerableOnly) {var keys = Object.keys(object);if (Object.getOwnPropertySymbols) {var symbols = Object.getOwnPropertySymbols(object);enumerableOnly && (symbols = symbols.filter(function (sym) {return Object.getOwnPropertyDescriptor(object, sym).enumerable;})), keys.push.apply(keys, symbols);}return keys;}function _objectSpread(target) {for (var i = 1; i < arguments.length; i++) {var source = null != arguments[i] ? arguments[i] : {};i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {_defineProperty(target, key, source[key]);}) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));});}return target;}function _defineProperty(obj, key, value) {if (key in obj) {Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });} else {obj[key] = value;}return obj;}import { Field } from 'react-redux-form';\nimport { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport { orderBy } from 'lodash';\n\nimport { Select } from \"../../ReactReduxForms\";\nimport { Translate, t } from \"../../I18N\";\nimport { Warning } from \"../../Layout\";\nimport PropertyConfigOptions from \"./PropertyConfigOptions\";\nimport { checkErrorsOnLabel } from \"../utils/checkErrorsOnLabel\";\n\nclass FormConfigSelect extends Component {\n  static getDerivedStateFromProps(props, state) {\n    return { warning: Boolean(state.initialContent !== props.content) };\n  }\n\n  static contentValidation() {\n    return { required: (val) => val.trim() !== '' };\n  }\n\n  constructor(props) {\n    super(props);\n    this.state = { warning: false, initialContent: props.content };\n  }\n\n  render() {\n    const { index, type, labelHasError, contentRequiredError, templateId } = this.props;\n    const thesauris = this.props.thesauris.toJS();\n\n    const options = orderBy(\n    thesauris.\n    filter((thesaurus) => thesaurus._id !== templateId && thesaurus.type !== 'template').\n    map((thesaurus) => _objectSpread(_objectSpread({},\n    thesaurus), {}, {\n      name: t(thesaurus._id, thesaurus.name, null, false) })),\n\n    'name');\n\n\n    return /*#__PURE__*/(\n      _jsx(\"div\", {}, void 0, /*#__PURE__*/\n      _jsx(\"div\", { className: `form-group${labelHasError ? ' has-error' : ''}` }, void 0, /*#__PURE__*/\n      _jsx(\"label\", {}, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Label\")), /*#__PURE__*/\n\n      _jsx(Field, { model: `template.data.properties[${index}].label` }, void 0, /*#__PURE__*/\n      _jsx(\"input\", { className: \"form-control\" }))), /*#__PURE__*/\n\n\n\n      _jsx(\"div\", { className: contentRequiredError ? 'form-group has-error' : 'form-group' }, void 0, /*#__PURE__*/\n      _jsx(\"label\", {}, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Select list\"), /*#__PURE__*/\n      _jsx(\"span\", { className: \"required\" }, void 0, \"*\")),\n\n      this.state.warning && /*#__PURE__*/\n      _jsx(Warning, { inline: true }, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"All entities and documents that have already this property assigned will loose its current value\")), /*#__PURE__*/\n\n\n\n\n\n      _jsx(Select, {\n        model: `template.data.properties[${index}].content`,\n        options: options,\n        optionsLabel: \"name\",\n        optionsValue: \"_id\" })), /*#__PURE__*/\n\n\n\n      _jsx(PropertyConfigOptions, { index: index, type: type })));\n\n\n  }}\n\n\nFormConfigSelect.defaultProps = {\n  labelHasError: false,\n  contentRequiredError: false,\n  templateId: '',\n  content: '' };\n\n\n\n\n\n\n\n\n\n\n\n\n\nexport function mapStateToProps(state, props) {\n  const { template, thesauris } = state;\n  return {\n    labelHasError: checkErrorsOnLabel(state, props),\n    contentRequiredError:\n    template.formState.$form.errors[`properties.${props.index}.content.required`] &&\n    template.formState.$form.submitFailed,\n    templateId: template.data._id,\n    thesauris,\n    content: template.data.properties[props.index].content };\n\n}\n\nexport default connect(mapStateToProps)(FormConfigSelect);","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import { Field, actions as formActions } from 'react-redux-form';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport Immutable from 'immutable';\nimport PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport { createSelector } from 'reselect';\n\nimport { Select } from \"../../ReactReduxForms\";\nimport { Translate } from \"../../I18N\";\nimport { Icon } from \"../../UI\";\nimport PropertyConfigOptions from \"./PropertyConfigOptions\";\nimport Tip from \"../../Layout/Tip\";\n\nexport class FormConfigRelationship extends Component {\n  static contentValidation() {\n    return { required: (val) => val && val.trim() !== '' };\n  }\n\n  constructor(props) {\n    super(props);\n    this.state = { inherit: props.showInheritSelect };\n    this.onInheritChange = this.onInheritChange.bind(this);\n    this.onInheritTypeChange = this.onInheritTypeChange.bind(this);\n  }\n\n  onInheritChange() {\n    const { index } = this.props;\n    if (this.state.inherit) {\n      this.props.resetFormValue(`template.data.properties[${index}].inherit.property`);\n    }\n    this.props.resetFormValue(`template.data.properties[${index}].filter`);\n    this.setState((prevState) => ({ inherit: !prevState.inherit }));\n  }\n\n  onInheritTypeChange() {\n    const { index } = this.props;\n    this.props.resetFormValue(`template.data.properties[${index}].filter`);\n  }\n\n  render() {\n    const {\n      index,\n      type,\n      labelError,\n      relationTypeError,\n      templates,\n      relationTypes,\n      templateId,\n      showInheritOption,\n      templateProperties,\n      inheritSelectPropertyType } =\n    this.props;\n\n    const options = templates.toJS().filter((template) => template._id !== templateId);\n\n    const labelClass = labelError ? 'form-group has-error' : 'form-group';\n    const canBeFilter =\n    !this.state.inherit ||\n    this.state.inherit &&\n    !['image', 'geolocation', 'preview', 'media', 'link'].includes(inheritSelectPropertyType);\n    return /*#__PURE__*/(\n      _jsx(\"div\", {}, void 0, /*#__PURE__*/\n      _jsx(\"div\", { className: labelClass }, void 0, /*#__PURE__*/\n      _jsx(\"label\", { htmlFor: \"label\" }, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Label\")), /*#__PURE__*/\n\n      _jsx(Field, { model: `template.data.properties[${index}].label` }, void 0, /*#__PURE__*/\n      _jsx(\"input\", { id: \"label\", className: \"form-control\" }))), /*#__PURE__*/\n\n\n      _jsx(\"div\", { className: relationTypeError ? 'form-group has-error' : 'form-group' }, void 0, /*#__PURE__*/\n      _jsx(\"label\", {}, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Relationship\"), /*#__PURE__*/\n      _jsx(\"span\", { className: \"required\" }, void 0, \"*\")), /*#__PURE__*/\n\n      _jsx(Select, {\n        model: `template.data.properties[${index}].relationType`,\n        options: relationTypes.toJS(),\n        optionsLabel: \"name\",\n        validators: FormConfigRelationship.contentValidation(),\n        optionsValue: \"_id\" })), /*#__PURE__*/\n\n\n      _jsx(\"div\", { className: \"form-group\" }, void 0, /*#__PURE__*/\n      _jsx(\"label\", {}, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Entities\")), /*#__PURE__*/\n\n      _jsx(Select, {\n        model: `template.data.properties[${index}].content`,\n        options: options,\n        optionsLabel: \"name\",\n        placeholder: \"Any entity or document\",\n        optionsValue: \"_id\" })),\n\n\n      showInheritOption && /*#__PURE__*/\n      _jsx(\"div\", {}, void 0, /*#__PURE__*/\n      _jsx(\"label\", { className: \"property-label\", htmlFor: `inherit${index}` }, void 0, /*#__PURE__*/\n      _jsx(\"input\", {\n        id: `inherit${index}`,\n        type: \"checkbox\",\n        checked: this.state.inherit,\n        onChange: this.onInheritChange }),\n      ' ', /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Inherit property\")), /*#__PURE__*/\n\n      _jsx(Tip, {}, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"This property will be inherited from the related entities and shown as metadata of this type of entities.\"))),\n\n\n\n\n\n\n      this.state.inherit && /*#__PURE__*/\n      _jsx(\"div\", { className: \"form-group\" }, void 0, /*#__PURE__*/\n      _jsx(Select, {\n        model: `template.data.properties[${index}].inherit.property`,\n        options: templateProperties,\n        onChange: this.onInheritTypeChange,\n        optionsLabel: \"label\",\n        optionsValue: \"_id\" })),\n\n\n\n      this.state.inherit && inheritSelectPropertyType === 'geolocation' && /*#__PURE__*/\n      _jsx(\"div\", { className: \"geolocation-grouping-alert\" }, void 0, /*#__PURE__*/\n      _jsx(Icon, { icon: \"info-circle\" }), /*#__PURE__*/\n      _jsx(\"p\", {}, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Adjacent geolocation properties will render on the same map\"), \".\")), /*#__PURE__*/\n\n\n\n      _jsx(PropertyConfigOptions, { canBeFilter: canBeFilter, index: index, type: type })));\n\n\n  }}\n\n\nFormConfigRelationship.defaultProps = {\n  labelError: false,\n  relationTypeError: false,\n  showInheritOption: false,\n  showInheritSelect: false,\n  templateId: null,\n  inheritSelectPropertyType: null };\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst getTemplateProperties = createSelector(\n(state) => state.templates,\n(state, props) =>\nstate.template.formState.properties[props.index].content ?\nstate.template.formState.properties[props.index].content.value :\nnull,\n(templates, content) => {\n  const targetTemplate = templates.find((t) => t.get('_id') === content);\n  return targetTemplate ? targetTemplate.get('properties').toJS() : [];\n});\n\n\nconst getInheritSelectPropertyType = createSelector(\ngetTemplateProperties,\n(state, props) => {var _state$template$data$;return (_state$template$data$ = state.template.data.properties[props.index].inherit) === null || _state$template$data$ === void 0 ? void 0 : _state$template$data$.property;},\n(templateProperties, inheritedPropertyId) => {\n  const inheritedProperty = templateProperties.find((p) => p._id === inheritedPropertyId);\n  return inheritedProperty && inheritedProperty.type;\n});\n\n\nexport function mapStateToProps(state, props) {var _template$formState$p, _template$formState$p2;\n  const { template, templates, relationTypes } = state;\n\n  const templateProperties = getTemplateProperties(state, props);\n\n  return {\n    labelError:\n    template.formState.$form.errors[`properties.${props.index}.label.required`] ||\n    template.formState.$form.errors[`properties.${props.index}.label.duplicated`],\n\n    relationTypeError:\n    template.formState.$form.errors[`properties.${props.index}.relationType.required`] &&\n    template.formState.$form.submitFailed,\n\n    showInheritOption: Boolean(\n    template.formState.properties[props.index].content && templateProperties.length),\n\n\n    showInheritSelect: Boolean(\n    ((_template$formState$p = template.formState.properties[props.index].inherit) === null || _template$formState$p === void 0 ? void 0 : (_template$formState$p2 = _template$formState$p.property) === null || _template$formState$p2 === void 0 ? void 0 : _template$formState$p2.value) &&\n    templateProperties.length),\n\n    inheritSelectPropertyType: getInheritSelectPropertyType(state, props),\n    templateProperties,\n    templateId: template.data._id,\n    templates,\n    relationTypes };\n\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return bindActionCreators(\n  {\n    resetFormValue: (model) => formActions.reset(model) },\n\n  dispatch);\n\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(FormConfigRelationship);","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport { setNestedProperties } from \"../actions/templateActions\";\nimport { Field } from 'react-redux-form';\nimport { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\nimport { Icon } from \"../../UI\";\nimport { Translate } from \"../../I18N\";\nimport ViolatedArticlesNestedProperties from \"./ViolatedArticlesNestedProperties\";\nimport PropertyConfigOptions from \"./PropertyConfigOptions\";\nimport { checkErrorsOnLabel } from \"../utils/checkErrorsOnLabel\";\n\nclass FormConfigNested extends Component {\n  constructor(props) {\n    super(props);\n    props.setNestedProperties(props.index, Object.keys(ViolatedArticlesNestedProperties));\n  }\n\n  render() {\n    const { index, type, labelHasError } = this.props;\n\n    return /*#__PURE__*/(\n      _jsx(\"div\", {}, void 0, /*#__PURE__*/\n      _jsx(\"div\", { className: `form-group${labelHasError ? ' has-error' : ''}` }, void 0, /*#__PURE__*/\n      _jsx(\"label\", {}, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Label\")), /*#__PURE__*/\n\n      _jsx(Field, { model: `template.data.properties[${index}].label` }, void 0, /*#__PURE__*/\n      _jsx(\"input\", { className: \"form-control\" }))), /*#__PURE__*/\n\n\n\n      _jsx(Field, { model: `template.data.properties[${index}].required` }, void 0, /*#__PURE__*/\n      _jsx(\"input\", { id: `required${this.props.index}`, type: \"checkbox\" }), \"\\xA0\", /*#__PURE__*/\n\n      _jsx(\"label\", { className: \"property-label\", htmlFor: `required${this.props.index}` }, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Required property\"), /*#__PURE__*/\n      _jsx(\"span\", { className: \"property-help\" }, void 0, /*#__PURE__*/\n      _jsx(Icon, { icon: \"question-circle\" }), /*#__PURE__*/\n      _jsx(\"div\", { className: \"property-description\" }, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"You won't be able to save an entity if this property is empty.\"))))), /*#__PURE__*/\n\n\n\n\n\n\n      _jsx(PropertyConfigOptions, { index: index, type: type })));\n\n\n  }}\n\n\nFormConfigNested.defaultProps = {\n  labelHasError: false };\n\n\n\n\n\n\n\n\n\n\n\nfunction mapStateToProps(state, props) {\n  return {\n    labelHasError: checkErrorsOnLabel(state, props) };\n\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return bindActionCreators({ setNestedProperties }, dispatch);\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(FormConfigNested);","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { Icon } from \"../../UI\";\nimport { Translate } from \"../../I18N\";\n\nexport class PrioritySortingLabel extends Component {\n  render() {\n    return /*#__PURE__*/(\n      _jsx(\"label\", { className: \"property-label\", htmlFor: this.props.htmlFor }, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Priority sorting\"), /*#__PURE__*/\n      _jsx(\"span\", { className: \"property-help\" }, void 0, /*#__PURE__*/\n      _jsx(Icon, { icon: \"question-circle\" }), /*#__PURE__*/\n      _jsx(\"div\", { className: \"property-description\" }, void 0, /*#__PURE__*/\n      _jsx(Translate, { translationKey: \"Priority sorting description\" }, void 0, \"Properties marked as priority sorting will be used as default sorting criteria. If more than one property is marked as priority sorting the system will try to pick-up the best fit. When listing mixed template types, the system will pick-up the best combined priority sorting.\")))));\n\n\n\n\n\n\n\n\n\n  }}\n\n\n\n\n\n\nexport default connect()(PrioritySortingLabel);","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport { Field } from 'react-redux-form';\nimport { connect } from 'react-redux';\n\nimport Tip from \"../../Layout/Tip\";\nimport PropertyConfigOption from \"./PropertyConfigOption\";\nimport { Translate } from \"../../I18N\";\nimport PrioritySortingLabel from \"./PrioritySortingLabel\";\n\nexport class FormConfigCommon extends Component {\n  getZeroIndex() {\n    const { index, data } = this.props;\n    const baseZeroIndex = index + data.commonProperties.length;\n    return baseZeroIndex;\n  }\n\n  renderTitleField() {\n    const { index, formState } = this.props;\n    let labelClass = 'form-group';\n    const labelKey = `commonProperties.${this.getZeroIndex()}.label`;\n    const requiredLabel = formState.$form.errors[`${labelKey}.required`];\n    const duplicatedLabel = formState.$form.errors[`${labelKey}.duplicated`];\n    if (requiredLabel || duplicatedLabel) {\n      labelClass += ' has-error';\n    }\n\n    return /*#__PURE__*/(\n      _jsx(\"div\", { className: labelClass }, void 0, /*#__PURE__*/\n      _jsx(\"label\", { htmlFor: `label${index}` }, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Name\")), /*#__PURE__*/\n\n      _jsx(Field, { model: `template.data.commonProperties[${this.getZeroIndex()}].label` }, void 0, /*#__PURE__*/\n      _jsx(\"input\", { id: `label${index}`, className: \"form-control\" }))));\n\n\n\n  }\n\n  render() {\n    const { index, data } = this.props;\n    const property = data.commonProperties[this.getZeroIndex()];\n\n    return /*#__PURE__*/(\n      _jsx(\"div\", {}, void 0,\n      property.name === 'title' && this.renderTitleField(), /*#__PURE__*/\n      _jsx(Field, { model: `template.data.commonProperties[${this.getZeroIndex()}].prioritySorting` }, void 0, /*#__PURE__*/\n      _jsx(\"input\", { id: `prioritySorting${index}`, type: \"checkbox\" }), \"\\xA0\", /*#__PURE__*/\n\n      _jsx(PrioritySortingLabel, { htmlFor: `prioritySorting${index}` })),\n\n      property.name === 'title' && /*#__PURE__*/\n      _jsx(PropertyConfigOption, {\n        label: \"Generated ID\",\n        model: `template.data.commonProperties[${this.getZeroIndex()}].generatedId` }, void 0, /*#__PURE__*/\n\n      _jsx(Tip, {}, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"A generated ID will be the default title.\")))));\n\n\n\n\n\n  }}\n\n\n\n\n\n\n\n\nexport function mapStateToProps({ template }) {\n  return {\n    data: template.data,\n    formState: template.formState };\n\n}\n\nexport default connect(mapStateToProps)(FormConfigCommon);","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport { Field } from 'react-redux-form';\nimport { connect } from 'react-redux';\nimport { Icon } from \"../../UI\";\n\nimport { Translate } from \"../../I18N\";\nimport { Select } from \"../../ReactReduxForms\";\nimport Tip from \"../../Layout/Tip\";\n\nimport { FilterSuggestions } from \"./FilterSuggestions\";\nimport PropertyConfigOption from \"./PropertyConfigOption\";\nimport { checkErrorsOnLabel } from \"../utils/checkErrorsOnLabel\";\n\nconst style = (index) => /*#__PURE__*/\n_jsx(\"div\", {}, void 0, /*#__PURE__*/\n_jsx(\"div\", { className: \"form-group\" }, void 0, /*#__PURE__*/\n_jsx(\"label\", {}, void 0, /*#__PURE__*/\n_jsx(Translate, {}, void 0, \"Style\")), /*#__PURE__*/\n\n_jsx(Select, {\n  model: `template.data.properties[${index}].style`,\n  options: [\n  { _id: 'contain', name: 'Fit' },\n  { _id: 'cover', name: 'Fill' }],\n\n  optionsLabel: \"name\",\n  optionsValue: \"_id\" })), /*#__PURE__*/\n\n\n_jsx(\"div\", { className: \"protip\" }, void 0, /*#__PURE__*/\n_jsx(\"p\", {}, void 0, /*#__PURE__*/\n_jsx(\"b\", {}, void 0, /*#__PURE__*/\n_jsx(Translate, {}, void 0, \"Fit\")), \"\\xA0\", /*#__PURE__*/\n\n\n_jsx(Translate, { translationKey: \"Multimedia fit description\" }, void 0, \"will show the entire media inside the container.\"), /*#__PURE__*/\n\n\n_jsx(\"br\", {}), /*#__PURE__*/\n_jsx(\"b\", {}, void 0, /*#__PURE__*/\n_jsx(Translate, {}, void 0, \"Fill\")), \"\\xA0\", /*#__PURE__*/\n\n\n_jsx(Translate, { translationKey: \"Multimedia fill description\" }, void 0, \"will attempt to fill the container, using it's entire width. In cards, cropping is likely to occur.\"))));\n\n\n\n\n\n\n\n\nclass FormConfigMultimedia extends Component {\n  render() {\n    const { index, canShowInCard, helpText, canSetStyle, canBeRequired, labelHasError } =\n    this.props;\n\n    return /*#__PURE__*/(\n      _jsx(\"div\", {}, void 0, /*#__PURE__*/\n      _jsx(\"div\", { className: `form-group${labelHasError ? ' has-error' : ''}` }, void 0, /*#__PURE__*/\n      _jsx(\"label\", {}, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Name\")), /*#__PURE__*/\n\n      _jsx(Field, { model: `template.data.properties[${index}].label` }, void 0, /*#__PURE__*/\n      _jsx(\"input\", { className: \"form-control\" }))),\n\n\n\n      helpText && /*#__PURE__*/\n      _jsx(\"div\", { className: \"protip\" }, void 0, /*#__PURE__*/\n      _jsx(Icon, { icon: \"lightbulb\" }), /*#__PURE__*/\n      _jsx(\"span\", {}, void 0, helpText)), /*#__PURE__*/\n\n\n\n      _jsx(PropertyConfigOption, {\n        label: \"Hide label\",\n        model: `template.data.properties[${index}].noLabel` }, void 0, /*#__PURE__*/\n\n      _jsx(Tip, {}, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"This property will be shown without the label.\"))), /*#__PURE__*/\n\n\n      _jsx(PropertyConfigOption, {\n        label: \"Full width\",\n        model: `template.data.properties[${index}].fullWidth` }, void 0, /*#__PURE__*/\n\n      _jsx(Tip, {}, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"This property will be shown using all the width available.\"))),\n\n\n      canBeRequired && /*#__PURE__*/\n      _jsx(PropertyConfigOption, {\n        label: \"Required property\",\n        model: `template.data.properties[${index}].required` }, void 0, /*#__PURE__*/\n\n      _jsx(Tip, {}, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"You won't be able to save an entity if this property is empty.\"))),\n\n\n\n\n\n      canShowInCard && /*#__PURE__*/\n      _jsx(PropertyConfigOption, {\n        label: \"Show in cards\",\n        model: `template.data.properties[${index}].showInCard` }, void 0, /*#__PURE__*/\n\n      _jsx(Tip, {}, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"This property will appear in the library cards as part of the basic info.\"))),\n\n\n\n\n\n\n      canSetStyle && style(index), /*#__PURE__*/\n      _jsx(FilterSuggestions, { index: index })));\n\n\n  }}\n\n\nFormConfigMultimedia.defaultProps = {\n  canShowInCard: true,\n  canSetStyle: true,\n  canBeRequired: true,\n  labelHasError: false,\n  helpText: '' };\n\n\n\n\n\n\n\n\n\n\n\nexport function mapStateToProps(state, props) {\n  return {\n    labelHasError: checkErrorsOnLabel(state, props) };\n\n}\n\nexport default connect(mapStateToProps)(FormConfigMultimedia);","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport { DragSource, DropTarget } from 'react-dnd';\nimport { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\nimport { editProperty } from \"../actions/uiActions\";\nimport { showModal } from \"../../Modals/actions/modalActions\";\nimport { reorderProperty, addProperty } from \"../actions/templateActions\";\nimport ShowIf from \"../../App/ShowIf\";\nimport { Icon } from \"../../UI\";\nimport { StateSelector } from \"../../Review/components/StateSelector\";\nimport { createSelector } from 'reselect';\nimport { Translate } from \"../../I18N\";\n\nimport FormConfigInput from \"./FormConfigInput\";\nimport FormConfigSelect from \"./FormConfigSelect\";\nimport FormConfigRelationship from \"./FormConfigRelationship\";\nimport FormConfigNested from \"./FormConfigNested\";\nimport FormConfigCommon from \"./FormConfigCommon\";\nimport FormConfigMultimedia from \"./FormConfigMultimedia\";\nimport Icons from \"./Icons\";\n\nconst isLabelDuplicated = (index, template, formState) => {\n  const commonPropIndex = index + template.commonProperties.length;\n  return (\n    Boolean(formState.$form.errors[`properties.${index}.label.duplicated`]) ||\n    Boolean(formState.$form.errors[`commonProperties.${commonPropIndex}.label.duplicated`]));\n\n};\n\nconst isErrorOnThisField = (error, index, isCommonProperty, template) => {\n  const commonPropIndex = index + template.commonProperties.length;\n  const [errorRoot, errorIndex] = error.split('.');\n  return errorRoot === 'commonProperties' ?\n  errorIndex === commonPropIndex.toString() && isCommonProperty :\n  errorIndex === index.toString() && !isCommonProperty;\n};\n\nclass MetadataProperty extends Component {\n  renderForm() {\n    const { type, index } = this.props;\n    let defaultInput = /*#__PURE__*/_jsx(FormConfigInput, { type: type, index: index });\n\n    if (this.props.isCommonProperty) {\n      return /*#__PURE__*/_jsx(FormConfigCommon, { index: index, type: type });\n    }\n    if (type === 'relationship') {\n      defaultInput = /*#__PURE__*/_jsx(FormConfigRelationship, { index: index, type: type });\n    }\n    if (type === 'select' || type === 'multiselect') {\n      defaultInput = /*#__PURE__*/_jsx(FormConfigSelect, { index: index, type: type });\n    }\n    if (type === 'nested') {\n      defaultInput = /*#__PURE__*/_jsx(FormConfigNested, { index: index, type: type });\n    }\n    if (type === 'media' || type === 'image' || type === 'preview') {\n      defaultInput = /*#__PURE__*/\n      _jsx(FormConfigMultimedia, {\n        type: type,\n        index: index,\n        canSetStyle: type === 'image' || type === 'preview',\n        canBeRequired: type !== 'preview' });\n\n\n    }\n    if (type === 'geolocation' || type === 'link') {\n      defaultInput = /*#__PURE__*/_jsx(FormConfigInput, { type: type, index: index, canBeFilter: false });\n    }\n    return defaultInput;\n  }\n\n  render() {\n    const {\n      label,\n      connectDragSource,\n      isDragging,\n      connectDropTarget,\n      uiState,\n      index,\n      localID,\n      inserting,\n      hasErrors,\n      submitFailed } =\n    this.props;\n    const { editingProperty } = uiState.toJS();\n\n    let propertyClass = 'list-group-item';\n    if (isDragging || inserting) {\n      propertyClass += ' dragging';\n    }\n\n    if (hasErrors && submitFailed) {\n      propertyClass += ' error';\n    }\n\n    const iconClass = Icons[this.props.type] || 'font';\n    const beingEdited = editingProperty === localID;\n\n    const property = /*#__PURE__*/\n    _jsx(\"div\", { className: propertyClass }, void 0, /*#__PURE__*/\n    _jsx(\"span\", { className: \"property-name\" }, void 0, /*#__PURE__*/\n    _jsx(Icon, { icon: this.props.isCommonProperty ? 'lock' : 'bars', fixedWidth: true }), /*#__PURE__*/\n    _jsx(Icon, { icon: iconClass, fixedWidth: true }),\n    label !== null ?\n    label : /*#__PURE__*/\n\n    _jsx(StateSelector, {\n      propertyLabel: createSelector(\n      (state) =>\n      state.template.data.properties[this.props.index] ?\n      state.template.data.properties[this.props.index].label :\n      '',\n      (value) => value) }, void 0,\n\n\n    ({ propertyLabel }) => propertyLabel)), /*#__PURE__*/\n\n\n\n    _jsx(\"div\", { className: \"list-group-item-actions\" }, void 0,\n    this.props.isLabelDuplicated && /*#__PURE__*/\n    _jsx(\"span\", { className: \"validation-error\" }, void 0, /*#__PURE__*/\n    _jsx(Icon, { icon: \"exclamation-triangle\" }), \" \", /*#__PURE__*/_jsx(Translate, {}, void 0, \"Duplicated label\")),\n\n\n    this.props.isRelationDuplicated && /*#__PURE__*/\n    _jsx(\"span\", { className: \"validation-error\" }, void 0, /*#__PURE__*/\n    _jsx(Icon, { icon: \"exclamation-triangle\" }), /*#__PURE__*/\n    _jsx(Translate, {}, void 0, \"Cannot use 'any entity or document' if another relationship of the same type is already with a specific entity.\")),\n\n\n\n\n\n    !this.props.syncedTemplate && /*#__PURE__*/\n    React.createElement(React.Fragment, null, /*#__PURE__*/\n    _jsx(\"button\", {\n      type: \"button\",\n      className: \"btn btn-default btn-xs property-edit\",\n      onClick: () => this.props.editProperty(beingEdited ? null : localID) }, void 0, /*#__PURE__*/\n\n    _jsx(Icon, { icon: \"pencil-alt\" }), \" \", /*#__PURE__*/_jsx(Translate, {}, void 0, \"Edit\")),\n\n    !this.props.isCommonProperty && /*#__PURE__*/\n    _jsx(\"button\", {\n      type: \"button\",\n      className: \"btn btn-danger btn-xs property-remove\",\n      onClick: () => this.props.removeProperty('RemovePropertyModal', index) }, void 0, /*#__PURE__*/\n\n    _jsx(Icon, { icon: \"trash-alt\" }), \" \", /*#__PURE__*/_jsx(Translate, {}, void 0, \"Delete\")))));\n\n\n\n\n\n\n\n\n    if (this.props.isCommonProperty) {\n      return /*#__PURE__*/(\n        _jsx(\"li\", {}, void 0,\n        property, /*#__PURE__*/\n        _jsx(ShowIf, { if: beingEdited && !isDragging }, void 0, /*#__PURE__*/\n        _jsx(\"div\", { className: `propery-form${editingProperty === localID ? ' expand' : ''}` }, void 0,\n        this.renderForm()))));\n\n\n\n\n    }\n\n    return connectDropTarget( /*#__PURE__*/\n    _jsx(\"li\", {}, void 0,\n    connectDragSource(property), /*#__PURE__*/\n    _jsx(ShowIf, { if: beingEdited && !isDragging }, void 0, /*#__PURE__*/\n    _jsx(\"div\", { className: `propery-form${editingProperty === localID ? ' expand' : ''}` }, void 0,\n    this.renderForm()))));\n\n\n\n\n  }}\n\n\nMetadataProperty.defaultProps = {\n  label: null,\n  submitFailed: false,\n  hasErrors: false,\n  isLabelDuplicated: false,\n  isRelationDuplicated: false,\n  syncedTemplate: false };\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst target = {\n  hover(props, monitor) {\n    const dragIndex = monitor.getItem().index;\n    const hoverIndex = props.index;\n    const item = monitor.getItem();\n    if (props.localID === item.editingProperty) {\n      props.editProperty(null);\n    }\n    if (typeof dragIndex === 'undefined') {\n      item.inserting = true;\n      item.index = 0;\n      props.addProperty({ label: item.label, type: item.type, inserting: true }, 0);\n      return;\n    }\n\n    if (dragIndex === hoverIndex) {\n      return;\n    }\n\n    if (item.alreadyReordered) {\n      item.alreadyReordered = false;\n      return;\n    }\n\n    props.reorderProperty(dragIndex, hoverIndex);\n    item.index = hoverIndex;\n    item.alreadyReordered = true;\n  } };\n\n\nconst dropTarget = DropTarget(['METADATA_PROPERTY', 'METADATA_OPTION'], target, (connector) => ({\n  connectDropTarget: connector.dropTarget() }))(\nMetadataProperty);\n\nconst source = {\n  beginDrag(props) {\n    return {\n      index: props.index,\n      label: props.label,\n      type: props.type,\n      editingProperty: props.uiState.get('editingProperty') };\n\n  },\n  endDrag(props, monitor) {\n    const item = monitor.getItem();\n    props.editProperty(item.editingProperty);\n  } };\n\n\nconst dragSource = DragSource('METADATA_PROPERTY', source, (connector, monitor) => ({\n  connectDragSource: connector.dragSource(),\n  isDragging: monitor.isDragging() }))(\ndropTarget);\n\nfunction mapDispatchToProps(dispatch) {\n  return bindActionCreators(\n  { removeProperty: showModal, reorderProperty, addProperty, editProperty },\n  dispatch);\n\n}\n\nconst mapStateToProps = ({ template }, ownProps) => ({\n  uiState: template.uiState,\n  hasErrors: Object.keys(template.formState.$form.errors || {}).reduce(\n  (result, error) =>\n  result ||\n  isErrorOnThisField(error, ownProps.index, ownProps.isCommonProperty, template.data) &&\n  template.formState.$form.errors[error],\n  false),\n\n  isLabelDuplicated: isLabelDuplicated(ownProps.index, template.data, template.formState),\n  isRelationDuplicated: Boolean(\n  template.formState.$form.errors[`properties.${ownProps.index}.relationType.duplicated`]),\n\n  submitFailed: template.formState.$form.submitFailed });\n\n\nexport { dragSource, dropTarget, MetadataProperty };\n\nexport default connect(mapStateToProps, mapDispatchToProps)(dragSource);","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport Modal from \"../../Layout/Modal\";\nimport { Translate } from \"../../I18N\";\nimport { removeProperty } from \"../actions/templateActions\";\nimport { hideModal } from \"../../Modals/actions/modalActions\";\n\nexport class RemovePropertyConfirm extends Component {\n  confirm() {\n    this.props.hideModal('RemovePropertyModal');\n    this.props.removeProperty(this.props.propertyBeingDeleted);\n  }\n\n  render() {\n    return /*#__PURE__*/(\n      _jsx(Modal, { isOpen: this.props.isOpen || false, type: \"danger\", zIndex: 99 }, void 0, /*#__PURE__*/\n      _jsx(Modal.Body, {}, void 0, /*#__PURE__*/\n      _jsx(\"h4\", {}, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Confirm deletion\")), /*#__PURE__*/\n\n      _jsx(\"p\", {}, void 0, /*#__PURE__*/\n      _jsx(Translate, { translationKey: \"Property delete warning\" }, void 0, \"Deleting a template property will delete this metadata information on all documents using this template.\")), /*#__PURE__*/\n\n\n\n\n      _jsx(\"p\", {}, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Change will take effect after saving the template\"))), /*#__PURE__*/\n\n\n\n      _jsx(Modal.Footer, {}, void 0, /*#__PURE__*/\n      _jsx(\"button\", {\n        type: \"button\",\n        className: \"btn btn-default cancel-button\",\n        onClick: () => this.props.hideModal('RemovePropertyModal') }, void 0, /*#__PURE__*/\n\n      _jsx(Translate, {}, void 0, \"Cancel\")), /*#__PURE__*/\n\n      _jsx(\"button\", {\n        type: \"button\",\n        className: \"btn btn-danger confirm-button\",\n        onClick: () => this.confirm() }, void 0, /*#__PURE__*/\n\n      _jsx(Translate, {}, void 0, \"Delete Property\")))));\n\n\n\n\n  }}\n\n\n\n\n\n\n\n\n\nconst mapStateToProps = (state) => {\n  const propertyBeingDeleted = state.modals.toJS().RemovePropertyModal;\n  return {\n    propertyBeingDeleted,\n    isOpen: typeof propertyBeingDeleted === 'number' };\n\n};\n\nfunction mapDispatchToProps(dispatch) {\n  return bindActionCreators({ hideModal, removeProperty }, dispatch);\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(RemovePropertyConfirm);","//DATA\nexport const THESAURI_SAVED = 'THESAURI_SAVED';\nexport const EDIT_THESAURI = 'EDIT_THESAURI';\nexport const THESAURI_DELETED = 'THESAURI_DELETED';\nexport const SET_THESAURIS = 'SET_THESAURIS';\nexport const RESET_THESAURI = 'RESET_THESAURI';","import api from \"../utils/api\";\n\nexport default {\n  get(requestParams) {\n    const url = 'thesauris';\n    return api.get(url, requestParams).then((response) => response.json.rows);\n  },\n\n  getThesauri(requestParams) {\n    const url = 'dictionaries';\n    return api.get(url, requestParams).then((response) => response.json.rows);\n  },\n\n  getModelStatus(requestParams) {\n    return api.get('models', requestParams).then((response) => response.json);\n  },\n\n  getModelTrainStatus(requestParams) {\n    return api.get('models/train', requestParams).then((response) => response.json);\n  },\n\n  trainModel(requestParams) {\n    return api.post('models/train', requestParams).then((response) => response.json);\n  },\n\n  save(requestParams) {\n    return api.post('thesauris', requestParams).then((response) => response.json);\n  },\n\n  delete(requestParams) {\n    return api.delete('thesauris', requestParams).then((response) => response.json);\n  } };","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import React, { useState } from 'react';\nimport { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\nimport { useForm } from 'react-hook-form';\nimport { Translate } from \"../../I18N\";\nimport Modal from \"../../Layout/Modal\";\n\nimport { Icon } from \"../../UI\";\nimport { saveThesaurus } from \"../actions/thesauriActions\";\n\nconst mapStateToProps = (state) => ({\n  thesauri: state.thesauris });\n\n\nconst mapDispatchToProps = (dispatch) =>\nbindActionCreators(\n{\n  thesaurusSave: saveThesaurus },\n\ndispatch);\n\n\nconst connector = connect(mapStateToProps, mapDispatchToProps);\n\n\n\nconst AddThesaurusButton = ({ thesaurusSave, thesauri }) => {var _errors$thesaurus, _errors$thesaurus2;\n  const [open, setOpen] = useState(false);\n\n  const { register, handleSubmit, errors } = useForm({\n    mode: 'onSubmit' });\n\n\n  const onSave = (data) => {\n    const thesaurus = {\n      name: data.thesaurus,\n      values: [] };\n\n    thesaurusSave(thesaurus);\n    setOpen(false);\n  };\n\n  const isNotDuplicated = (value) =>\n  !(thesauri !== null && thesauri !== void 0 && thesauri.find(\n  (thesaurus) => (thesaurus === null || thesaurus === void 0 ? void 0 : thesaurus.get('type')) !== 'template' && (thesaurus === null || thesaurus === void 0 ? void 0 : thesaurus.get('name')) === value));\n\n\n  return /*#__PURE__*/(\n    React.createElement(React.Fragment, null, /*#__PURE__*/\n    _jsx(\"button\", { type: \"button\", className: \"btn btn-default\", onClick: () => setOpen(true) }, void 0, /*#__PURE__*/\n    _jsx(Icon, { icon: \"book\" }), /*#__PURE__*/\n    _jsx(\"span\", { className: \"btn-label\" }, void 0, /*#__PURE__*/\n    _jsx(Translate, { translationKey: \"Add thesaurus\" }, void 0, \"Add thesaurus\"))), /*#__PURE__*/\n\n\n\n    _jsx(Modal, { isOpen: open, type: \"content\", className: \"new-thesaurus-modal\" }, void 0, /*#__PURE__*/\n    _jsx(Modal.Header, {}, void 0, /*#__PURE__*/\n    _jsx(\"h3\", {}, void 0, /*#__PURE__*/\n    _jsx(Translate, { translationKey: \"Add thesaurus\" }, void 0, \"Add thesaurus\")), /*#__PURE__*/\n\n    _jsx(\"p\", { className: \"description\" }, void 0, /*#__PURE__*/\n    _jsx(Translate, { translationKey: \"Add thesaurus modal description\" }, void 0, \"After creation you can go into Settings -> Thesauri to add items\"))), /*#__PURE__*/\n\n\n\n\n\n    _jsx(\"form\", {}, void 0, /*#__PURE__*/\n    _jsx(Modal.Body, {}, void 0, /*#__PURE__*/\n    _jsx(\"label\", { htmlFor: \"thesaurusInput\" }, void 0, /*#__PURE__*/\n    _jsx(Translate, { translationKey: \"Thesaurus\" }, void 0, \"Thesaurus\")), /*#__PURE__*/\n\n    React.createElement(\"input\", {\n      type: \"text\",\n      name: \"thesaurus\",\n      id: \"thesaurusInput\",\n      ref: register({\n        required: true,\n        validate: {\n          duplicated: (value) => isNotDuplicated(value) } }),\n\n\n      autoComplete: \"off\" }),\n\n\n    ((_errors$thesaurus = errors.thesaurus) === null || _errors$thesaurus === void 0 ? void 0 : _errors$thesaurus.type) === 'required' && /*#__PURE__*/\n    _jsx(\"p\", { className: \"error\", role: \"alert\" }, void 0, /*#__PURE__*/\n    _jsx(Translate, { translationKey: \"This field is required\" }, void 0, \"This field is required\")),\n\n\n\n\n\n    ((_errors$thesaurus2 = errors.thesaurus) === null || _errors$thesaurus2 === void 0 ? void 0 : _errors$thesaurus2.type) === 'duplicated' && /*#__PURE__*/\n    _jsx(\"p\", { className: \"error\", role: \"alert\" }, void 0, /*#__PURE__*/\n    _jsx(Translate, { translationKey: \"Duplicated name\" }, void 0, \"Duplicated name\"))), /*#__PURE__*/\n\n\n\n\n    _jsx(Modal.Footer, {}, void 0, /*#__PURE__*/\n    _jsx(\"button\", { type: \"button\", className: \"btn\", onClick: () => setOpen(false) }, void 0, /*#__PURE__*/\n    _jsx(Translate, { translationKey: \"Cancel\" }, void 0, \"Cancel\")), /*#__PURE__*/\n\n    _jsx(\"button\", { type: \"button\", className: \"btn btn-success\", onClick: handleSubmit(onSave) }, void 0, /*#__PURE__*/\n    _jsx(Translate, { translationKey: \"Save\" }, void 0, \"Save\")))))));\n\n\n\n\n\n\n};\n\nconst container = connector(AddThesaurusButton);\nexport { container as AddThesaurusButton };","function ownKeys(object, enumerableOnly) {var keys = Object.keys(object);if (Object.getOwnPropertySymbols) {var symbols = Object.getOwnPropertySymbols(object);enumerableOnly && (symbols = symbols.filter(function (sym) {return Object.getOwnPropertyDescriptor(object, sym).enumerable;})), keys.push.apply(keys, symbols);}return keys;}function _objectSpread(target) {for (var i = 1; i < arguments.length; i++) {var source = null != arguments[i] ? arguments[i] : {};i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {_defineProperty(target, key, source[key]);}) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));});}return target;}function _defineProperty(obj, key, value) {if (key in obj) {Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });} else {obj[key] = value;}return obj;}import { actions as formActions } from 'react-redux-form';\nimport { t } from \"../../I18N\";\nimport ID from \"../../../shared/uniqueID\";\nimport * as types from \"./actionTypes\";\nimport api from \"../ThesauriAPI\";\nimport * as notifications from \"../../Notifications/actions/notificationsActions\";\nimport { advancedSort } from \"../../utils/advancedSort\";\nimport { RequestParams } from \"../../utils/RequestParams\";\nimport { httpRequest } from \"../../../shared/superagent\";\n\nexport function saveThesaurus(thesaurus) {\n  return (dispatch) =>\n  api.save(new RequestParams(thesaurus)).then((_thesauri) => {\n    dispatch({ type: types.THESAURI_SAVED });\n    notifications.notify(t('System', 'Thesaurus saved', null, false), 'success')(dispatch);\n    dispatch(formActions.change('thesauri.data', _thesauri));\n  });\n}\n\nexport function importThesaurus(thesaurus, file) {\n  return async (dispatch) => {\n    try {\n      const headers = {\n        Accept: 'application/json',\n        'X-Requested-With': 'XMLHttpRequest' };\n\n      const fields = {\n        thesauri: JSON.stringify(thesaurus) };\n\n\n      const data = await httpRequest('thesauris', fields, headers, file);\n      dispatch({ type: types.THESAURI_SAVED });\n      notifications.notify(t('System', 'Data imported', null, false), 'success')(dispatch);\n      dispatch(formActions.change('thesauri.data', data));\n    } catch (e) {\n      notifications.notify(t('System', e.error, null, false), 'danger')(dispatch);\n    }\n  };\n}\n\nexport function sortValues() {\n  return (dispatch, getState) => {\n    let values = getState().thesauri.data.values.slice(0);\n    values = advancedSort(values, { property: 'label' });\n    values = values.map((value) => _objectSpread(_objectSpread({},\n    value),\n    value.values ?\n    { values: advancedSort(value.values.slice(0), { property: 'label' }) } :\n    {}));\n\n    dispatch(formActions.change('thesauri.data.values', values));\n  };\n}\n\nfunction moveEmptyItemToBottom(values) {\n  const _values = [...values];\n  const emptyIdx = _values.reduce((found, value, index) => {\n    if (!value.label && index < _values.length) {\n      return found.concat([index]);\n    }\n    return found;\n  }, []);\n  if (emptyIdx.length > 1) {\n    return null;\n  }\n  if (emptyIdx.length === 1) {\n    const index = emptyIdx[0];\n    const emptyValue = _values[index];\n    _values.splice(index, 1);\n    _values.push(emptyValue);\n  }\n  return _values;\n}\n\nfunction areGroupsRemovedFromList(newValues, oldValues) {\n  return oldValues.some((item) => {\n    if (!item.values) {\n      return false;\n    }\n    return !newValues.some((oldItem) => oldItem.id === item.id);\n  });\n}\n\nfunction listContainsGroups(values) {\n  return values.some((value) => value.values);\n}\n\nexport function updateValues(updatedValues, groupIndex) {\n  return (dispatch, getState) => {\n    const values = getState().thesauri.data.values.slice(0);\n    const _updatedValues = moveEmptyItemToBottom(updatedValues);\n    if (!_updatedValues) {\n      return;\n    }\n    if (groupIndex !== undefined) {\n      if (listContainsGroups(_updatedValues)) {\n        return;\n      }\n      values[groupIndex] = _objectSpread(_objectSpread({}, values[groupIndex]), {}, { values: _updatedValues });\n      dispatch(formActions.change('thesauri.data.values', values));\n      return;\n    }\n    if (areGroupsRemovedFromList(updatedValues, values)) {\n      return;\n    }\n    dispatch(formActions.change('thesauri.data.values', _updatedValues));\n  };\n}\n\nexport function addValue(group) {\n  return (dispatch, getState) => {\n    const values = getState().thesauri.data.values.slice(0);\n    if (group !== undefined) {\n      values[group] = _objectSpread({}, values[group]);\n      values[group].values = values[group].values.slice(0);\n      values[group].values.push({ label: '', id: ID() });\n    } else {\n      values.push({ label: '', id: ID() });\n    }\n\n    dispatch(formActions.change('thesauri.data.values', values));\n  };\n}\n\nexport function addGroup() {\n  return (dispatch, getState) => {\n    const values = getState().thesauri.data.values.slice(0);\n    const lastIndex = values.length - 1;\n    const newGroup = { label: '', id: ID(), values: [{ label: '', id: ID() }] };\n    if (!values[lastIndex].values) {\n      values[lastIndex] = newGroup;\n    } else {\n      values.push(newGroup);\n    }\n    dispatch(formActions.change('thesauri.data.values', values));\n  };\n}\n\nexport function removeValue(index, groupIndex) {\n  return (dispatch, getState) => {\n    const values = getState().thesauri.data.values.slice(0);\n    if (typeof groupIndex === 'number') {\n      values[groupIndex] = _objectSpread({}, values[groupIndex]);\n      values[groupIndex].values = values[groupIndex].values.slice(0);\n      values[groupIndex].values.splice(index, 1);\n    } else {\n      values.splice(index, 1);\n    }\n    dispatch(formActions.change('thesauri.data.values', values));\n  };\n}","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import React, { useState } from 'react';\nimport { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\nimport { useForm } from 'react-hook-form';\nimport { Translate } from \"../../I18N\";\n\nimport Modal from \"../../Layout/Modal\";\nimport { Icon } from \"../../UI\";\nimport { saveRelationType } from \"../actions/relationTypeActions\";\n\nconst mapDispatchToProps = (dispatch) =>\nbindActionCreators(\n{\n  relationshipTypeSave: saveRelationType },\n\ndispatch);\n\n\nconst mapStateToProps = (state) => ({\n  relationshipTypes: state.relationTypes });\n\n\nconst connector = connect(mapStateToProps, mapDispatchToProps);\n\n\n\nconst AddRelationshipTypeButton = ({ relationshipTypeSave, relationshipTypes }) => {var _errors$relationshipT, _errors$relationshipT2;\n  const [open, setOpen] = useState(false);\n\n  const { register, handleSubmit, errors } = useForm({\n    mode: 'onSubmit' });\n\n\n  const onSave = (data) => {\n    const relationship = {\n      name: data.relationshipType,\n      properties: [] };\n\n    relationshipTypeSave(relationship);\n    setOpen(false);\n  };\n\n  const isNotDuplicated = (value) =>\n  !(relationshipTypes !== null && relationshipTypes !== void 0 && relationshipTypes.find((type) => (type === null || type === void 0 ? void 0 : type.get('name')) === value));\n\n  return /*#__PURE__*/(\n    React.createElement(React.Fragment, null, /*#__PURE__*/\n    _jsx(\"button\", { type: \"button\", className: \"btn btn-default\", onClick: () => setOpen(true) }, void 0, /*#__PURE__*/\n    _jsx(Icon, { icon: \"exchange-alt\" }), /*#__PURE__*/\n    _jsx(\"span\", { className: \"btn-label\" }, void 0, /*#__PURE__*/\n    _jsx(Translate, { translationKey: \"Add relationship type\" }, void 0, \"Add relationship type\"))), /*#__PURE__*/\n\n\n\n    _jsx(Modal, { isOpen: open, type: \"content\", className: \"new-relationshipType-modal\" }, void 0, /*#__PURE__*/\n    _jsx(Modal.Header, {}, void 0, /*#__PURE__*/\n    _jsx(\"h3\", {}, void 0, /*#__PURE__*/\n    _jsx(Translate, { translationKey: \"Add relationship type\" }, void 0, \"Add relationship type\"))), /*#__PURE__*/\n\n\n\n    _jsx(\"form\", {}, void 0, /*#__PURE__*/\n    _jsx(Modal.Body, {}, void 0, /*#__PURE__*/\n    _jsx(\"label\", { htmlFor: \"relationshipTypeInput\" }, void 0, /*#__PURE__*/\n    _jsx(Translate, { translationKey: \"Relationship\" }, void 0, \"Relationship\")), /*#__PURE__*/\n\n    React.createElement(\"input\", {\n      type: \"text\",\n      name: \"relationshipType\",\n      id: \"relationshipTypeInput\",\n      ref: register({\n        required: true,\n        validate: {\n          duplicated: (value) => isNotDuplicated(value) } }),\n\n\n      autoComplete: \"off\" }),\n\n\n    ((_errors$relationshipT = errors.relationshipType) === null || _errors$relationshipT === void 0 ? void 0 : _errors$relationshipT.type) === 'required' && /*#__PURE__*/\n    _jsx(\"p\", { className: \"error\", role: \"alert\" }, void 0, /*#__PURE__*/\n    _jsx(Translate, { translationKey: \"This field is required\" }, void 0, \"This field is required\")),\n\n\n\n\n\n    ((_errors$relationshipT2 = errors.relationshipType) === null || _errors$relationshipT2 === void 0 ? void 0 : _errors$relationshipT2.type) === 'duplicated' && /*#__PURE__*/\n    _jsx(\"p\", { className: \"error\", role: \"alert\" }, void 0, /*#__PURE__*/\n    _jsx(Translate, { translationKey: \"Duplicated name\" }, void 0, \"Duplicated name\"))), /*#__PURE__*/\n\n\n\n\n    _jsx(Modal.Footer, {}, void 0, /*#__PURE__*/\n    _jsx(\"button\", { type: \"button\", className: \"btn\", onClick: () => setOpen(false) }, void 0, /*#__PURE__*/\n    _jsx(Translate, { translationKey: \"Cancel\" }, void 0, \"Cancel\")), /*#__PURE__*/\n\n    _jsx(\"button\", { type: \"button\", className: \"btn btn-success\", onClick: handleSubmit(onSave) }, void 0, /*#__PURE__*/\n    _jsx(Translate, { translationKey: \"Save\" }, void 0, \"Save\")))))));\n\n\n\n\n\n\n};\n\nconst container = connector(AddRelationshipTypeButton);\nexport { container as AddRelationshipTypeButton };","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import React, { useState } from 'react';\nimport { ToggleButton } from \"../../UI\";\n\n\n\n\n\n\n\n\n\nexport const ToggleChildren = ({\n  children,\n  toggled = false,\n  onToggleOff = () => {},\n  onToggleOn = () => {} }) =>\n{\n  const [isToggled, setToggled] = useState(toggled);\n\n  const handleClick = () => {\n    if (isToggled) {\n      onToggleOff();\n    } else {\n      onToggleOn();\n    }\n    setToggled(!isToggled);\n  };\n\n  return /*#__PURE__*/(\n    React.createElement(React.Fragment, null, /*#__PURE__*/\n    _jsx(\"div\", { className: \"toggle-children-button\" }, void 0, /*#__PURE__*/\n    _jsx(ToggleButton, { onClick: handleClick, checked: isToggled })), /*#__PURE__*/\n\n    _jsx(\"div\", { className: \"toggle-children-children\", style: { display: isToggled ? 'block' : 'none' } }, void 0,\n    children)));\n\n\n\n};","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import React, { useEffect } from 'react';\nimport { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\n\n\nimport { Tip } from \"../../Layout\";\nimport { ToggleChildren } from \"../../Settings/components/ToggleChildren\";\nimport { Select } from \"../../ReactReduxForms\";\nimport { t } from \"../../I18N\";\nimport { loadPages as loadPagesAction } from \"../../Pages/actions/pageActions\";\nimport { updateValue as updateValueAction } from \"../actions/templateActions\";\n\nconst mapStateToProps = ({ pages }, ownProps) => ({\n  pages: (pages === null || pages === void 0 ? void 0 : pages.filter((p) => p.get('entityView'))) || [],\n  selectedPage: ownProps.selectedPage });\n\n\nconst mapDispatchToProps = (dispatch) =>\nbindActionCreators({ loadPages: loadPagesAction, updateValue: updateValueAction }, dispatch);\n\nconst connector = connect(mapStateToProps, mapDispatchToProps);\n\n\n\nconst TemplateAsPageControl = ({ pages, loadPages, selectedPage, updateValue }) => {\n  useEffect(() => {\n    loadPages();\n  }, []);\n\n  return /*#__PURE__*/(\n    _jsx(\"div\", {}, void 0, /*#__PURE__*/\n    _jsx(\"label\", {}, void 0,\n    pages.size > 0 ?\n    t('System', 'Display entity view from page') :\n    t('System', 'There are no pages enabled for entity view'), /*#__PURE__*/\n    _jsx(Tip, { icon: \"info-circle\", position: \"right\" }, void 0,\n    t(\n    'System',\n    'Entities can be displayed in a custom page. For that, a custom page needs to be created in Pages, and then selected here.'))),\n\n\n\n    pages.size > 0 && /*#__PURE__*/\n    _jsx(ToggleChildren, {\n      toggled: Boolean(selectedPage),\n      onToggleOff: () => updateValue('.entityViewPage', '') }, void 0, /*#__PURE__*/\n\n    _jsx(Select, {\n      model: \".entityViewPage\",\n      optionsValue: \"sharedId\",\n      optionsLabel: \"title\",\n      options: pages.toJS() }))));\n\n\n\n\n\n};\n\nconst container = connector(TemplateAsPageControl);\nexport { container as TemplateAsPageControl };","function validateName(templates, id) {\n  return {\n    required: (val) => val && val.trim() !== '',\n    duplicated: (val) =>\n    !templates.find(\n    (template) =>\n    template._id !== id && template.name.trim().toLowerCase() === val.trim().toLowerCase()) };\n\n\n}\n\nexport function validateDuplicatedLabel(property, { properties, commonProperties }) {\n  const titleProperty = commonProperties.find((p) => p.name === 'title');\n  const allProperties = titleProperty ? [titleProperty, ...properties] : properties || [];\n  return allProperties.reduce((validity, prop) => {\n    const sameProperty = (prop._id || prop.localID) === (property._id || property.localID);\n    const differentLabel = prop.label.trim().toLowerCase() !== property.label.trim().toLowerCase();\n\n    return validity && (sameProperty || differentLabel);\n  }, true);\n}\n\nexport function validateDuplicatedRelationship(property, properties) {\n  return (properties || []).reduce((validity, prop) => {\n    const sameProperty = (prop._id || prop.localID) === (property._id || property.localID);\n    const differentRelationtype = !prop.relationType || prop.relationType !== property.relationType;\n    const sameContent = prop.content === property.content;\n    const isNotAnyTemplate = Boolean(property.content && property.content.trim() !== '');\n    return (\n      validity && (\n      sameProperty || differentRelationtype || sameContent || !sameContent && isNotAnyTemplate));\n\n  }, true);\n}\n\nfunction getLabelRequiredValidator(propertiesArrayKey, propIndex) {\n  return (template) => {\n    if (!template[propertiesArrayKey][propIndex]) {\n      return true;\n    }\n    const { label } = template[propertiesArrayKey][propIndex];\n    return label && label.trim() !== '';\n  };\n}\n\nfunction getLabelDuplicatedValidator(propertiesArrayKey, propIndex) {\n  return (template) => {\n    if (!template[propertiesArrayKey][propIndex]) {\n      return true;\n    }\n    const prop = template[propertiesArrayKey][propIndex];\n    return validateDuplicatedLabel(prop, template);\n  };\n}\n\nexport default function (properties, commonProperties, templates, id) {\n  const validator = {\n    '': {},\n    name: validateName(templates, id) };\n\n\n  const titleIndex = commonProperties.findIndex((p) => p.name === 'title');\n  if (titleIndex >= 0) {\n    validator[''][`commonProperties.${titleIndex}.label.required`] = getLabelRequiredValidator(\n    'commonProperties',\n    titleIndex);\n\n    validator[''][`commonProperties.${titleIndex}.label.duplicated`] = getLabelDuplicatedValidator(\n    'commonProperties',\n    titleIndex);\n\n  }\n\n  properties.forEach((_property, index) => {\n    validator[''][`properties.${index}.label.required`] = getLabelRequiredValidator(\n    'properties',\n    index);\n\n    validator[''][`properties.${index}.label.duplicated`] = getLabelDuplicatedValidator(\n    'properties',\n    index);\n\n\n    validator[''][`properties.${index}.content.required`] = (template) => {\n      if (\n      !template.properties[index] ||\n      template.properties[index].type !== 'select' ||\n      template.properties[index].type !== 'multiselect')\n      {\n        return true;\n      }\n      const { content } = template.properties[index];\n      return content && content.trim() !== '';\n    };\n\n    validator[''][`properties.${index}.relationType.required`] = (template) => {\n      if (!template.properties[index] || template.properties[index].type !== 'relationship') {\n        return true;\n      }\n      const { relationType } = template.properties[index];\n      return relationType && relationType.trim() !== '';\n    };\n\n    validator[''][`properties.${index}.relationType.duplicated`] = (template) => {\n      if (!template.properties[index] || template.properties[index].type !== 'relationship') {\n        return true;\n      }\n      const prop = template.properties[index];\n      return validateDuplicatedRelationship(prop, template.properties);\n    };\n  });\n\n  return validator;\n}","function _extends() {_extends = Object.assign ? Object.assign.bind() : function (target) {for (var i = 1; i < arguments.length; i++) {var source = arguments[i];for (var key in source) {if (Object.prototype.hasOwnProperty.call(source, key)) {target[key] = source[key];}}}return target;};return _extends.apply(this, arguments);}var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}function ownKeys(object, enumerableOnly) {var keys = Object.keys(object);if (Object.getOwnPropertySymbols) {var symbols = Object.getOwnPropertySymbols(object);enumerableOnly && (symbols = symbols.filter(function (sym) {return Object.getOwnPropertyDescriptor(object, sym).enumerable;})), keys.push.apply(keys, symbols);}return keys;}function _objectSpread(target) {for (var i = 1; i < arguments.length; i++) {var source = null != arguments[i] ? arguments[i] : {};i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {_defineProperty(target, key, source[key]);}) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));});}return target;}function _defineProperty(obj, key, value) {if (key in obj) {Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });} else {obj[key] = value;}return obj;} /* eslint-disable max-lines */\nimport React, { Component } from 'react';\nimport { DropTarget } from 'react-dnd';\n\nimport PropTypes from 'prop-types';\nimport { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\nimport { actions as formActions, Control, Field, Form } from 'react-redux-form';\nimport { Icon } from \"../../UI\";\n\n\n\n\nimport { FormGroup } from \"../../Forms\";\nimport ColorPicker from \"../../Forms/components/ColorPicker\";\nimport { I18NLink, t, Translate } from \"../../I18N\";\nimport { notificationActions } from \"../../Notifications\";\nimport { notify } from \"../../Notifications/actions/notificationsActions\";\nimport {\naddProperty,\ninserted,\nsaveTemplate,\ncountByTemplate } from \"../actions/templateActions\";\n\nimport MetadataProperty from \"./MetadataProperty\";\nimport RemovePropertyConfirm from \"./RemovePropertyConfirm\";\nimport { AddThesaurusButton } from \"../../Thesauri/components/AddThesaurusButton\";\nimport { AddRelationshipTypeButton } from \"../../RelationTypes/components/AddRelationshipTypeButton\";\nimport { COLORS } from \"../../utils/colors\";\n\n\nimport { TemplateAsPageControl } from \"./TemplateAsPageControl\";\nimport validator from \"./ValidateTemplate\";\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst getTemplateDefaultColor = (allTemplates, template) =>\ntemplate.data.color ? template.data.color : COLORS[allTemplates.size % COLORS.length];\n\nclass MetadataTemplate extends Component {\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n  constructor(props) {\n    super(props);_defineProperty(this, \"confirmation\", { templateConflict: { title: 'Template conflict', key: 'Mapping conflict error', text: `A reindex of your collection is necessary. The reason may vary\n       -- from certain changes made to a template's property to new fields\n       that need to be populated across entities.\n       This process will not negatively affect the data in your collection.\n       It can last a few minutes and some parts of your collection might take\n       some time to reappear in the Library, but this is temporary. Do you want to continue?` }, largeNumberOfEntities: { title: 'Lengthy reindex process', key: 'Template with a long number of entities', text: `The template has changed and the associated entities will be re-indexed,\n      this process may take several minutes, do you want to continue?` } });_defineProperty(this, \"onSubmit\", async (_template) => {var _template$properties;const template = _objectSpread({}, _template);\n      if (this.props.environment === 'relationType') {\n        template.commonProperties = undefined;\n      }\n      template.properties = (_template$properties = template.properties) === null || _template$properties === void 0 ? void 0 : _template$properties.map((_prop) => {\n        const prop = _objectSpread({}, _prop);\n        prop.label = _prop.label.trim();\n        return prop;\n      });\n      if (template._id) {\n        const entitiesCountOfTemplate = await countByTemplate(template);\n        const lengthyReindexFloorCount = 30000;\n        if (entitiesCountOfTemplate >= lengthyReindexFloorCount) {\n          return this.confirmAndSaveTemplate(template, 'largeNumberOfEntities');\n        }\n      }\n      try {\n        await this.props.saveTemplate(template);\n      } catch (e) {\n        if (e.status === 409) return this.confirmAndSaveTemplate(template, 'templateConflict');\n      }\n    });this.onSubmit = this.onSubmit.bind(this);this.onSubmitFailed = this.onSubmitFailed.bind(this);}\n\n  onSubmitFailed() {\n    this.props.notify(t('System', 'The template contains errors', null, false), 'danger');\n  }\n\n  confirmAndSaveTemplate(\n  template,\n  confirmationKey)\n  {\n    return this.context.confirm({\n      accept: () => {\n        try {\n          this.props.saveTemplate(_objectSpread(_objectSpread({}, template), {}, { reindex: confirmationKey === 'templateConflict' }));\n        } catch (e) {\n          if (e.status === 409) return this.confirmAndSaveTemplate(template, 'templateConflict');\n        }\n      },\n\n      cancel: () => {},\n      title: this.confirmation[confirmationKey].title,\n      messageKey: this.confirmation[confirmationKey].key,\n      message: this.confirmation[confirmationKey].text,\n      type: 'success',\n      acceptLabel: 'Confirm',\n      zIndex: 99 });\n\n  }\n\n  render() {\n    const { connectDropTarget, defaultColor, environment, syncedTemplate } = this.props;\n    const commonProperties = this.props.commonProperties || [];\n    return /*#__PURE__*/(\n      _jsx(\"div\", {}, void 0, /*#__PURE__*/\n      _jsx(RemovePropertyConfirm, {}), /*#__PURE__*/\n      _jsx(Form, {\n        model: \"template.data\",\n        onSubmit: this.onSubmit,\n        onSubmitFailed: this.onSubmitFailed,\n        className: \"metadataTemplate\",\n        validators: validator(\n        this.props.properties,\n        commonProperties,\n        this.props.templates.toJS(),\n        this.props._id) }, void 0,\n\n\n      environment === 'template' && syncedTemplate && /*#__PURE__*/\n      _jsx(\"div\", { className: \"metadataTemplate-sync\" }, void 0, /*#__PURE__*/\n      _jsx(Icon, { icon: \"exclamation-triangle\" }), \" \\xA0\", /*#__PURE__*/\n      _jsx(Translate, { translationKey: \"syncedTemplateEditorMessage\" }, void 0, \"This template is synced from another instance. Only entity view page can be enabled.\")), /*#__PURE__*/\n\n\n\n\n\n      _jsx(\"div\", { className: \"metadataTemplate-heading\" }, void 0, /*#__PURE__*/\n      _jsx(FormGroup, { model: \".name\" }, void 0, /*#__PURE__*/\n      _jsx(Field, { model: \".name\" }, void 0, /*#__PURE__*/\n      _jsx(\"input\", {\n        placeholder: \"Template name\",\n        className: \"form-control\",\n        disabled: syncedTemplate }))),\n\n\n\n      defaultColor && !(environment === 'relationType') && /*#__PURE__*/\n      _jsx(Control, {\n        model: \".color\",\n        component: ColorPicker,\n        defaultValue: defaultColor,\n        mapProps: {\n          defaultValue: (props) => props.defaultValue },\n\n        disabled: syncedTemplate })),\n\n\n\n\n      environment === 'template' && /*#__PURE__*/\n      React.createElement(React.Fragment, null, /*#__PURE__*/\n      _jsx(\"div\", { className: \"metadataTemplate-pageview\" }, void 0, /*#__PURE__*/\n      _jsx(FormGroup, { model: \".entityViewPage\" }, void 0, /*#__PURE__*/\n      _jsx(TemplateAsPageControl, { selectedPage: this.props.entityViewPage || '' }))),\n\n\n      connectDropTarget( /*#__PURE__*/\n      _jsx(\"ul\", { className: \"metadataTemplate-list list-group\" }, void 0,\n      commonProperties.map((property, index) => /*#__PURE__*/\n      React.createElement(MetadataProperty, _extends({},\n      property, {\n        key: property.localID,\n        localID: property.localID,\n        index: index - commonProperties.length,\n        syncedTemplate: syncedTemplate }))),\n\n\n      this.props.properties.map((property, index) => /*#__PURE__*/\n      _jsx(MetadataProperty, {\n        _id: property._id,\n        type: property.type,\n        inserting: property.inserting,\n\n        localID: property.localID,\n        index: index,\n        syncedTemplate: syncedTemplate }, property.localID)),\n\n\n      !syncedTemplate && /*#__PURE__*/\n      _jsx(\"div\", { className: \"no-properties\" }, void 0, /*#__PURE__*/\n      _jsx(\"span\", { className: \"no-properties-wrap\" }, void 0, /*#__PURE__*/\n      _jsx(Icon, { icon: \"clone\" }), /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Drag properties here\")))))), /*#__PURE__*/\n\n\n\n\n\n\n\n\n      _jsx(\"div\", { className: \"settings-footer remove-extra-nesting\" }, void 0, /*#__PURE__*/\n      _jsx(\"div\", { className: \"btn-cluster\" }, void 0, /*#__PURE__*/\n      _jsx(I18NLink, { to: this.props.backUrl, className: \"btn btn-default btn-plain\" }, void 0, /*#__PURE__*/\n      _jsx(Icon, { icon: \"arrow-left\", directionAware: true }), /*#__PURE__*/\n      _jsx(\"span\", { className: \"btn-label\" }, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Back\")))),\n\n\n\n      environment === 'template' && /*#__PURE__*/\n      _jsx(\"div\", { className: \"btn-cluster lg-margin-left-12 sm-order-1 sm-footer-extra-row\" }, void 0, /*#__PURE__*/\n      _jsx(AddThesaurusButton, {}), /*#__PURE__*/\n      _jsx(AddRelationshipTypeButton, {})), /*#__PURE__*/\n\n\n      _jsx(\"div\", { className: \"btn-cluster content-right\" }, void 0, /*#__PURE__*/\n      _jsx(I18NLink, { to: this.props.backUrl, className: \"btn btn-default btn-extra-padding\" }, void 0, /*#__PURE__*/\n      _jsx(\"span\", { className: \"btn-label\" }, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Cancel\"))), /*#__PURE__*/\n\n\n      _jsx(\"button\", {\n        type: \"submit\",\n        className: \"btn btn-success save-template btn-extra-padding\",\n        disabled: !!this.props.savingTemplate }, void 0, /*#__PURE__*/\n\n      _jsx(\"span\", { className: \"btn-label\" }, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Save\"))))))));\n\n\n\n\n\n\n\n  }}\n\n\n/* eslint-disable react/forbid-prop-types, react/require-default-props */_defineProperty(MetadataTemplate, \"contextTypes\", { confirm: PropTypes.func });_defineProperty(MetadataTemplate, \"defaultProps\", { notify, /* eslint-disable react/default-props-match-prop-types */saveTemplate, environment: 'template', /* eslint-enable react/default-props-match-prop-types */savingTemplate: false, defaultColor: null, properties: [] });\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/* eslint-enable react/forbid-prop-types, react/require-default-props */\n\nconst target = {\n  canDrop() {\n    return true;\n  },\n\n  drop(props, monitor) {\n    const item = monitor.getItem();\n\n    const propertyAlreadyAdded = props.properties[item.index];\n\n    if (propertyAlreadyAdded) {\n      props.inserted(item.index);\n      return {};\n    }\n\n    props.addProperty({ label: item.label, type: item.type }, props.properties.length);\n    return { name: 'container' };\n  } };\n\n\nconst dropTarget = DropTarget('METADATA_OPTION', target, (connector) => ({\n  connectDropTarget: connector.dropTarget() }))(\nMetadataTemplate);\n\nconst mapStateToProps = (\n{\n  template,\n  templates,\n  relationTypes },\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nprops) =>\n{\n  const environment = props.relationType ? 'relationType' : 'template';\n  const _templates = environment === 'relationType' ? relationTypes : templates;\n  return {\n    _id: template.data._id,\n    commonProperties: template.data.commonProperties,\n    properties: template.data.properties,\n    entityViewPage: template.data.entityViewPage,\n    syncedTemplate: template.data.synced,\n    templates: _templates,\n    savingTemplate: template.uiState.get('savingTemplate'),\n    defaultColor: getTemplateDefaultColor(templates, template),\n    environment };\n\n};\n\nfunction mapDispatchToProps(dispatch) {\n  return bindActionCreators(\n  { inserted, addProperty, setErrors: formActions.setErrors, notify: notificationActions.notify },\n  dispatch);\n\n}\n\nexport { dropTarget, MetadataTemplate, mapStateToProps };\n\nexport default connect(mapStateToProps, mapDispatchToProps, null, { withRef: true })(dropTarget);","function ownKeys(object, enumerableOnly) {var keys = Object.keys(object);if (Object.getOwnPropertySymbols) {var symbols = Object.getOwnPropertySymbols(object);enumerableOnly && (symbols = symbols.filter(function (sym) {return Object.getOwnPropertyDescriptor(object, sym).enumerable;})), keys.push.apply(keys, symbols);}return keys;}function _objectSpread(target) {for (var i = 1; i < arguments.length; i++) {var source = null != arguments[i] ? arguments[i] : {};i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {_defineProperty(target, key, source[key]);}) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));});}return target;}function _defineProperty(obj, key, value) {if (key in obj) {Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });} else {obj[key] = value;}return obj;}function _extends() {_extends = Object.assign ? Object.assign.bind() : function (target) {for (var i = 1; i < arguments.length; i++) {var source = arguments[i];for (var key in source) {if (Object.prototype.hasOwnProperty.call(source, key)) {target[key] = source[key];}}}return target;};return _extends.apply(this, arguments);}var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport { DragSource } from 'react-dnd';\nimport { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\nimport { Icon } from \"../../UI\";\nimport { Translate, t } from \"../../I18N\";\nimport { removeProperty, addProperty } from \"../actions/templateActions\";\nimport Icons from \"./Icons\";\n\nclass PropertyOption extends Component {\n  constructor(props) {\n    super(props);\n    this.addProperty = this.addProperty.bind(this);\n  }\n\n  addProperty() {\n    const { disabled, label, type, addProperty: addPropertyAction } = this.props;\n    if (!disabled) {\n      addPropertyAction({ label: t('System', `property ${type}`, label, false), type });\n    }\n  }\n\n  render() {\n    const { connectDragSource, label, disabled, type } = this.props;\n    const iconClass = Icons[type] || 'font';\n    const liClass = `list-group-item${disabled ? ' disabled' : ''}`;\n    return connectDragSource( /*#__PURE__*/\n    _jsx(\"li\", { className: liClass }, void 0, /*#__PURE__*/\n    _jsx(\"button\", { type: \"button\", onClick: this.addProperty }, void 0, /*#__PURE__*/\n    _jsx(Icon, { icon: \"plus\" })), /*#__PURE__*/\n\n    _jsx(\"span\", {}, void 0, /*#__PURE__*/\n    _jsx(Icon, { icon: iconClass }), \"\\xA0\", /*#__PURE__*/\n\n    _jsx(Translate, { translationKey: `property ${type}` }, void 0, label))));\n\n\n\n  }}\n\n\n\n\n\n\n\n\n\n\nconst optionSource = {\n  beginDrag(_ref) {let props = _extends({}, _ref);\n    return _objectSpread(_objectSpread({}, props), {}, { label: t('System', `property ${props.type}`, props.label, false) });\n  },\n\n  canDrag(props) {\n    return !props.disabled;\n  },\n\n  endDrag(props, monitor) {\n    const item = monitor.getItem();\n    const dropResult = monitor.getDropResult();\n    if (!dropResult && item.index) {\n      props.removeProperty(item.index);\n    }\n  } };\n\n\nconst dragSource = DragSource('METADATA_OPTION', optionSource, (connector) => ({\n  connectDragSource: connector.dragSource() }))(\nPropertyOption);\n\nfunction mapDispatchToProps(dispatch) {\n  return bindActionCreators({ removeProperty, addProperty }, dispatch);\n}\n\nexport { dragSource };\nexport { PropertyOption };\nexport default connect(null, mapDispatchToProps, null, { withRef: true })(dragSource);","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import \"../scss/templates.scss\";\n\nimport React, { Component } from 'react';\nimport { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\nimport { DragDropContext } from 'react-dnd';\nimport { HTML5Backend } from 'react-dnd-html5-backend';\nimport PropTypes from 'prop-types';\nimport { resetTemplate, saveTemplate } from \"../actions/templateActions\";\nimport { saveRelationType } from \"../../RelationTypes/actions/relationTypeActions\";\nimport MetadataTemplate from \"./MetadataTemplate\";\nimport PropertyOption from \"./PropertyOption\";\nimport { Translate } from \"../../I18N\";\n\nexport class TemplateCreator extends Component {\n  componentWillUnmount() {\n    this.props.resetTemplate();\n  }\n\n  render() {\n    let save = this.props.saveTemplate;\n    let backUrl = '/settings/templates';\n    let environment = 'document';\n\n    if (this.props.relationType) {\n      save = this.props.saveRelationType;\n      backUrl = '/settings/connections';\n      environment = 'relationship';\n    }\n\n    return /*#__PURE__*/(\n      _jsx(\"div\", { className: \"metadata\" }, void 0, /*#__PURE__*/\n      _jsx(\"div\", { className: \"panel panel-default\" }, void 0, /*#__PURE__*/\n      _jsx(\"div\", { className: \"panel-heading\" }, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Metadata creator\")), /*#__PURE__*/\n\n      _jsx(\"div\", { className: \"panel-body\" }, void 0, /*#__PURE__*/\n      _jsx(\"div\", { className: \"row\" }, void 0, /*#__PURE__*/\n      _jsx(\"main\", { className: \"col-xs-12 col-sm-9\" }, void 0, /*#__PURE__*/\n      _jsx(MetadataTemplate, {\n        saveTemplate: save,\n        backUrl: backUrl,\n        relationType: this.props.relationType })),\n\n\n      environment !== 'relationship' && !this.props.syncedTemplate && /*#__PURE__*/\n      _jsx(\"aside\", { className: \"col-xs-12 col-sm-3\" }, void 0, /*#__PURE__*/\n      _jsx(\"div\", { className: \"metadataTemplate-constructor\" }, void 0, /*#__PURE__*/\n      _jsx(\"div\", {}, void 0, /*#__PURE__*/\n      _jsx(\"i\", {}, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Properties\"))), /*#__PURE__*/\n\n\n      _jsx(\"ul\", { className: \"list-group property-options-list\" }, void 0, /*#__PURE__*/\n      _jsx(PropertyOption, { label: \"Text\", type: \"text\" }), /*#__PURE__*/\n      _jsx(PropertyOption, { label: \"Numeric\", type: \"numeric\" }), /*#__PURE__*/\n      _jsx(PropertyOption, {\n        label: \"Select\",\n        type: \"select\",\n        disabled: this.props.noDictionaries }), /*#__PURE__*/\n\n      _jsx(PropertyOption, {\n        label: \"Multi Select\",\n        type: \"multiselect\",\n        disabled: this.props.noDictionaries }),\n\n      environment !== 'relationship' && /*#__PURE__*/\n      _jsx(PropertyOption, {\n        label: \"Relationship\",\n        type: \"relationship\",\n        disabled: this.props.noRelationtypes }), /*#__PURE__*/\n\n\n      _jsx(PropertyOption, { label: \"Date\", type: \"date\" }), /*#__PURE__*/\n      _jsx(PropertyOption, { label: \"Date Range\", type: \"daterange\" }), /*#__PURE__*/\n      _jsx(PropertyOption, { label: \"Multi Date\", type: \"multidate\" }), /*#__PURE__*/\n      _jsx(PropertyOption, { label: \"Multi Date Range\", type: \"multidaterange\" }), /*#__PURE__*/\n      _jsx(PropertyOption, { label: \"Rich Text\", type: \"markdown\" }), /*#__PURE__*/\n      _jsx(PropertyOption, { label: \"Link\", type: \"link\" }), /*#__PURE__*/\n      _jsx(PropertyOption, { label: \"Image\", type: \"image\" }),\n      environment === 'document' && /*#__PURE__*/\n      _jsx(PropertyOption, { label: \"Preview\", type: \"preview\" }), /*#__PURE__*/\n\n      _jsx(PropertyOption, { label: \"Media\", type: \"media\" }), /*#__PURE__*/\n      _jsx(PropertyOption, { label: \"Geolocation\", type: \"geolocation\" }),\n      this.props.project === 'cejil' && /*#__PURE__*/\n      _jsx(PropertyOption, { label: \"Violated articles\", type: \"nested\" }), /*#__PURE__*/\n\n      _jsx(PropertyOption, { label: \"Generated ID\", type: \"generatedid\" })),\n\n      this.props.noRelationtypes && /*#__PURE__*/\n      _jsx(\"div\", { className: \"alert alert-warning\" }, void 0, /*#__PURE__*/\n      _jsx(Translate, { translationKey: \"No relationship types warning\" }, void 0, \"Relationship fields can not be added untill you have at least one relationship type to select.\")))))))));\n\n\n\n\n\n\n\n\n\n\n\n\n\n  }}\n\n\nTemplateCreator.defaultProps = {\n  relationType: false,\n  noRelationtypes: true,\n  noDictionaries: true,\n  project: '',\n  syncedTemplate: false };\n\n\n\n\n\n\n\n\n\n\n\n\n\nTemplateCreator.contextTypes = {\n  router: PropTypes.object };\n\n\nfunction mapDispatchToProps(dispatch) {\n  return bindActionCreators({ resetTemplate, saveTemplate, saveRelationType }, dispatch);\n}\n\nconst mapStateToProps = ({ settings, relationTypes, thesauris, template }, props) => ({\n  project: settings.collection.toJS().project,\n  noRelationtypes: !relationTypes.size,\n  noDictionaries: !thesauris.size,\n  syncedTemplate: !props.relationType && template.data.synced });\n\n\nexport default DragDropContext(HTML5Backend)(\nconnect(mapStateToProps, mapDispatchToProps)(TemplateCreator));","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import React from 'react';\n\nimport RouteHandler from \"../App/RouteHandler\";\nimport { editRelationType } from \"./actions/relationTypesActions\";\nimport relationTypesAPI from \"./RelationTypesAPI\";\nimport TemplateCreator from \"../Templates/components/TemplateCreator\";\n\nexport default class EditRelationType extends RouteHandler {\n  static async requestState(requestParams) {\n    const [relationType] = await relationTypesAPI.get(requestParams);\n    relationType.properties = relationType.properties || [];\n\n    return [editRelationType(relationType)];\n  }\n\n  render() {\n    return /*#__PURE__*/(\n      _jsx(\"div\", { className: \"settings-content\" }, void 0, /*#__PURE__*/\n      _jsx(TemplateCreator, { relationType: true })));\n\n\n  }}","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import React from 'react';\n\nimport RouteHandler from \"../App/RouteHandler\";\nimport TemplateCreator from \"../Templates/components/TemplateCreator\";\n\nexport default class NewRelationType extends RouteHandler {\n  render() {\n    return /*#__PURE__*/(\n      _jsx(\"div\", { className: \"settings-content\" }, void 0, /*#__PURE__*/\n      _jsx(TemplateCreator, { relationType: true })));\n\n\n  }}","function ownKeys(object, enumerableOnly) {var keys = Object.keys(object);if (Object.getOwnPropertySymbols) {var symbols = Object.getOwnPropertySymbols(object);enumerableOnly && (symbols = symbols.filter(function (sym) {return Object.getOwnPropertyDescriptor(object, sym).enumerable;})), keys.push.apply(keys, symbols);}return keys;}function _objectSpread(target) {for (var i = 1; i < arguments.length; i++) {var source = null != arguments[i] ? arguments[i] : {};i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {_defineProperty(target, key, source[key]);}) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));});}return target;}function _defineProperty(obj, key, value) {if (key in obj) {Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });} else {obj[key] = value;}return obj;}import { actions } from \"../../BasicReducer\";\nimport api from \"../../Entities/EntitiesAPI\";\nimport entitiesUtil from \"../../Entities/utils/filterBaseProperties\";\nimport { wrapEntityMetadata } from \"../../Metadata\";\nimport { loadFetchedInReduxForm } from \"../../Metadata/actions/actions\";\nimport * as relationships from \"../../Relationships/utils/routeUtils\";\nimport { RequestParams } from \"../../utils/RequestParams\";\nimport Immutable from 'immutable';\n\n\n\n\nexport async function getAndLoadEntity(\nrequestParams,\ntemplates,\nstate,\nloadConnections)\n{\n  const [[entity], [connectionsGroups, searchResults, sort, filters]] = await Promise.all([\n  api.get(requestParams),\n  loadConnections ?\n  relationships.requestState(requestParams, state) :\n  [[], { rows: [] }, {}, Immutable.fromJS({})]]);\n\n\n  return [\n  actions.set('entityView/entity', entity),\n  relationships.setReduxState({\n    relationships: {\n      list: {\n        sharedId: entity.sharedId,\n        entity,\n        connectionsGroups,\n        searchResults,\n        sort,\n        filters,\n        view: 'graph' } } }),\n\n\n\n  ...loadFetchedInReduxForm('entityView.entityForm', entity, templates)];\n\n}\n\nexport function toggleOneUpFullEdit() {\n  return async (dispatch, getState) => {var _state$oneUpReview$st;\n    const state = getState();\n    const oneUpState = (_state$oneUpReview$st = state.oneUpReview.state) === null || _state$oneUpReview$st === void 0 ? void 0 : _state$oneUpReview$st.toJS();\n    if (oneUpState && oneUpState.fullEdit && !state.entityView.entityFormState.$form.pristine) {\n      const entity = await api.denormalize(\n      new RequestParams(\n      wrapEntityMetadata(entitiesUtil.filterBaseProperties(state.entityView.entityForm))));\n\n\n      dispatch(actions.set('entityView/entity', entity));\n    }\n    dispatch(\n    actions.set('oneUpReview.state', _objectSpread(_objectSpread({},\n    oneUpState), {}, {\n      fullEdit: oneUpState ? !oneUpState.fullEdit : false })));\n\n\n  };\n}\n\nasync function switchToEntity(\ndispatch,\nindex,\nstate,\noneUpState)\n{\n  const sharedId =\n  index < oneUpState.totalDocs ?\n  state.library.documents.get('rows').get(index).get('sharedId') :\n  '';\n\n  [\n  ...(sharedId ?\n  await getAndLoadEntity(\n  new RequestParams({ sharedId }, oneUpState.requestHeaders),\n  state.templates.toJS(),\n  state,\n  oneUpState.loadConnections) :\n\n  []),\n  actions.set('oneUpReview.state', _objectSpread(_objectSpread({},\n  oneUpState), {}, {\n    indexInDocs: index }))].\n\n  forEach((action) => {\n    dispatch(action);\n  });\n}\n\nexport function switchOneUpEntity(delta, save) {\n  return async (dispatch, getState) => {var _state$oneUpReview$st2;\n    const state = getState();\n    const oneUpState = (_state$oneUpReview$st2 = state.oneUpReview.state) === null || _state$oneUpReview$st2 === void 0 ? void 0 : _state$oneUpReview$st2.toJS();\n    if (!oneUpState) {\n      return;\n    }\n    if (save) {\n      const entity = wrapEntityMetadata(\n      entitiesUtil.filterBaseProperties(state.entityView.entityForm));\n\n      await api.save(new RequestParams(entity, oneUpState.requestHeaders));\n    }\n    const current = state.entityView.entity.get('sharedId');\n    const index = Math.max(\n    0,\n    Math.min(\n    state.library.documents.get('rows').findIndex((e) => e.get('sharedId') === current) + delta,\n    oneUpState.totalDocs - 1));\n\n\n    await switchToEntity(dispatch, index, state, oneUpState);\n  };\n}\n\nexport function toggleOneUpLoadConnections() {\n  return async (dispatch, getState) => {var _state$oneUpReview$st3;\n    const state = getState();\n    const oneUpState = (_state$oneUpReview$st3 = state.oneUpReview.state) === null || _state$oneUpReview$st3 === void 0 ? void 0 : _state$oneUpReview$st3.toJS();\n    if (!oneUpState) {\n      return;\n    }\n    dispatch(\n    actions.set('oneUpReview.state', _objectSpread(_objectSpread({},\n    oneUpState), {}, {\n      loadConnections: !oneUpState.loadConnections })));\n\n\n    await dispatch(switchOneUpEntity(0, false));\n  };\n}","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\n\nimport { openMenu, closeMenu } from \"../actions/contextMenuActions\";\n\nexport class ContextMenu extends Component {\n  render() {\n    const children = React.Children.map(this.props.children, (child) => child) || [];\n    let SubMenu = children.filter((child) => {\n      const forceShow = this.props.overrideShow && this.props.show;\n      const matchesType = child.type.name === this.props.type;\n      const matchesWrap =\n      child.type.WrappedComponent && child.type.WrappedComponent.name === this.props.type;\n      return forceShow || matchesType || matchesWrap;\n    });\n\n    const position = `ContextMenu-${this.props.align || 'bottom'}`;\n\n    SubMenu = React.Children.map(SubMenu, (child) => /*#__PURE__*/\n    React.cloneElement(child, { active: this.props.open }));\n\n\n    return /*#__PURE__*/(\n      _jsx(\"div\", {\n        className: `ContextMenu ${position}`,\n        onMouseEnter: this.props.openMenu,\n        onMouseLeave: this.props.closeMenu,\n        onClick: this.props.closeMenu }, void 0,\n\n      SubMenu));\n\n\n  }}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst mapStateToProps = (state) => state.contextMenu.toJS();\n\nfunction mapDispatchToProps(dispatch) {\n  return bindActionCreators({ openMenu, closeMenu }, dispatch);\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ContextMenu);","import * as types from \"./actionTypes\";\n\nexport function openMenu() {\n  return {\n    type: types.OPEN_MENU };\n\n}\n\nexport function closeMenu() {\n  return {\n    type: types.CLOSE_MENU };\n\n}","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import PropTypes from 'prop-types';\nimport React from 'react';\n\nconst Main = ({ children, onClick, disabled }) => /*#__PURE__*/\n_jsx(\"div\", { className: `float-btn__main ${disabled ? 'disabled' : 'cta'}`, onClick: onClick }, void 0,\nchildren);\n\n\n\n\n\n\n\nexport { Main };","import ContextMenu from \"./components/ContextMenu\";\nimport * as MenuButtons from \"./components/Buttons\";\n\nexport default ContextMenu;\nexport { MenuButtons };","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };} /** @format */\n\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\n\nimport ShowIf from \"../../App/ShowIf\";\nimport { Icon } from \"../../UI\";\n\nexport class ShowSidepanelMenu extends Component {\n  render() {\n    const { panelIsOpen, openPanel, active } = this.props;\n    return /*#__PURE__*/(\n      _jsx(\"div\", { className: active ? 'active' : '' }, void 0, /*#__PURE__*/\n      _jsx(ShowIf, { if: !panelIsOpen }, void 0, /*#__PURE__*/\n      _jsx(\"div\", { className: \"btn btn-primary\", onClick: (e) => openPanel(e) }, void 0, /*#__PURE__*/\n      _jsx(Icon, { icon: \"columns\" })))));\n\n\n\n\n  }}\n\n\nShowSidepanelMenu.defaultProps = {\n  active: false };","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport SearchInput from \"../../Layout/SearchInput\";\n\nimport { search } from \"../actions/actions\";\n\nexport class SearchEntitiesForm extends Component {\n  constructor(props) {\n    super(props);\n    this.search = this.search.bind(this);\n  }\n\n  search(e) {\n    this.props.search(e.target.value);\n  }\n\n  render() {\n    return /*#__PURE__*/_jsx(SearchInput, { value: this.props.searchTerm, onChange: this.search });\n  }}\n\n\n\n\n\n\n\n\nfunction mapStateToProps({ relationships }) {\n  return {\n    searchTerm: relationships.searchTerm };\n\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return bindActionCreators({ search }, dispatch);\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SearchEntitiesForm);","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport Immuable from 'immutable';\n\nimport SidePanel from \"../../Layout/SidePanel\";\nimport SearchResults from \"../../Connections/components/SearchResults\";\nimport { loadInReduxForm } from \"../../Metadata/actions/actions\";\nimport { Icon } from \"../../UI\";\nimport { Translate } from \"../../I18N\";\nimport { closePanel } from \"../actions/uiActions\";\nimport SearchForm from \"./SearchEntitiesForm\";\nimport * as actions from \"../actions/actions\";\n\nclass AddEntities extends Component {\n  constructor(props) {\n    super(props);\n    this.addEntity = this.addEntity.bind(this);\n    this.newEntity = this.newEntity.bind(this);\n  }\n\n  addEntity(_sharedId, entity) {\n    this.props.addEntity(this.props.hubIndex, this.props.rightRelationshipIndex, entity);\n  }\n\n  newEntity() {\n    this.props.selectConnection({ metadata: {} });\n    this.props.loadInReduxForm(\n    'relationships.metadata',\n    { metadata: {} },\n    this.props.templates.toJS());\n\n    this.props.closePanel();\n  }\n\n  render() {\n    const { uiState, searchResults } = this.props;\n    const open = Boolean(this.props.uiState.get('open'));\n\n    return /*#__PURE__*/(\n      _jsx(SidePanel, { open: open, className: \"create-reference\" }, void 0, /*#__PURE__*/\n      _jsx(\"div\", { className: \"sidepanel-header\" }, void 0, /*#__PURE__*/\n      _jsx(\"h1\", {}, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Add entities / documents\")), /*#__PURE__*/\n\n      _jsx(\"button\", {\n        type: \"button\",\n        className: \"closeSidepanel close-modal\",\n        onClick: this.props.closePanel }, void 0, /*#__PURE__*/\n\n      _jsx(Icon, { icon: \"times\" }))), /*#__PURE__*/\n\n\n\n      _jsx(\"div\", { className: \"sidepanel-body\" }, void 0, /*#__PURE__*/\n      _jsx(\"div\", { className: \"search-box\" }, void 0, /*#__PURE__*/\n      _jsx(SearchForm, {})), /*#__PURE__*/\n\n      _jsx(SearchResults, {\n        results: searchResults,\n        searching: uiState.get('searching'),\n        onClick: this.addEntity })), /*#__PURE__*/\n\n\n      _jsx(\"div\", { className: \"sidepanel-footer\" }, void 0, /*#__PURE__*/\n      _jsx(\"button\", { type: \"button\", className: \"btn btn-success\", onClick: this.newEntity }, void 0, /*#__PURE__*/\n      _jsx(Icon, { icon: \"plus\" }), /*#__PURE__*/\n      _jsx(\"span\", { className: \"btn-label\" }, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Create Entity\"))))));\n\n\n\n\n\n  }}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst mapStateToProps = ({ relationships, templates }) => ({\n  uiState: relationships.uiState,\n  searchResults: relationships.searchResults,\n  hubIndex: relationships.hubActions.getIn(['addTo', 'hubIndex']),\n  rightRelationshipIndex: relationships.hubActions.getIn(['addTo', 'rightRelationshipIndex']),\n  templates });\n\n\nfunction mapDispatchToProps(dispatch) {\n  return bindActionCreators(\n  {\n    addEntity: actions.addEntity,\n    closePanel,\n    loadInReduxForm,\n    selectConnection: actions.selectConnection },\n\n  dispatch);\n\n}\n\nexport { AddEntities, mapStateToProps };\n\nexport default connect(mapStateToProps, mapDispatchToProps)(AddEntities);","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport { actions as formActions } from 'react-redux-form';\nimport Immutable from 'immutable';\nimport { createSelector } from 'reselect';\nimport { Icon } from \"../../UI\";\n\nimport { ShowMetadata, MetadataFormButtons, MetadataForm, actions } from \"../../Metadata\";\nimport SidePanel from \"../../Layout/SidePanel\";\nimport { CopyFromEntity } from \"../../Metadata/components/CopyFromEntity\";\nimport { api as entitiesAPI } from \"../../Entities\";\nimport { RequestParams } from \"../../utils/RequestParams\";\nimport { saveEntityWithFiles } from \"../../Library/actions/saveEntityWithFiles\";\nimport {\nunselectConnection,\nupdateRelationshipEntityData,\naddEntity,\nsetAddToData,\nreloadRelationships } from \"../actions/actions\";\n\n\nclass RelationshipMetadata extends Component {\n  constructor(props) {\n    super(props);\n    this.state = { copyFrom: false, copyFromProps: [] };\n\n    this.toggleCopyFrom = this.toggleCopyFrom.bind(this);\n    this.onCopyFromSelect = this.onCopyFromSelect.bind(this);\n    this.deleteDocument = this.deleteDocument.bind(this);\n    this.saveEntity = this.saveEntity.bind(this);\n    this.closeSidePanel = this.closeSidePanel.bind(this);\n  }\n\n  onCopyFromSelect(copyFromProps) {\n    this.setState({ copyFromProps });\n  }\n\n  async deleteDocument() {\n    this.context.confirm({\n      accept: async () => {\n        this.props.unselectConnection();\n        await entitiesAPI.delete(new RequestParams({ sharedId: this.props.entity.sharedId }));\n        await this.props.reloadRelationships(this.props.parentSharedId);\n      },\n      title: 'Confirm delete entity',\n      message: 'Are you sure you want to delete this entity?' });\n\n  }\n\n  async saveEntity(entity, formModel) {\n    this.props.resetForm(formModel);\n    this.props.unselectConnection();\n    const { entity: savedEntity, errors } = await saveEntityWithFiles(entity);\n    this.props.updateRelationshipEntityData(savedEntity);\n\n    if (Number.isInteger(this.props.hubIndex)) {\n      this.props.addEntity(\n      this.props.hubIndex,\n      this.props.rightRelationshipIndex,\n      savedEntity,\n      errors);\n\n      this.props.setAddToData(null, null);\n    }\n  }\n\n  toggleCopyFrom() {\n    this.setState((currentState) => ({\n      copyFrom: !currentState.copyFrom }));\n\n  }\n\n  closeSidePanel() {\n    return this.props.entityBeingEdited ?\n    this.props.resetForm('relationships.metadata') :\n    this.props.unselectConnection();\n  }\n\n  renderForm() {\n    const form = /*#__PURE__*/\n    _jsx(MetadataForm, {\n      model: \"relationships.metadata\",\n      initialTemplateId: this.props.entity.template,\n      templateId: this.props.formState.template,\n      onSubmit: this.saveEntity,\n      changeTemplate: this.props.changeTemplate,\n      highlightedProps: this.state.copyFromProps });\n\n\n\n    return this.state.copyFrom ? /*#__PURE__*/\n    _jsx(\"div\", { className: \"tab-content tab-content-visible\" }, void 0,\n    form, /*#__PURE__*/\n    _jsx(CopyFromEntity, {\n      originalEntity: this.props.formState,\n      templates: this.props.templates,\n      onSelect: this.onCopyFromSelect,\n      formModel: \"relationships.metadata\",\n      onCancel: this.toggleCopyFrom })) :\n\n\n\n    form;\n\n  }\n\n  renderBody() {\n    return this.props.entityBeingEdited ?\n    this.renderForm() : /*#__PURE__*/\n\n    _jsx(ShowMetadata, { entity: this.props.entity, showTitle: true, showType: true });\n\n  }\n\n  render() {\n    const twoColumns = this.state.copyFrom ? 'two-columns' : '';\n    return /*#__PURE__*/(\n      _jsx(SidePanel, {\n        open: this.props.selectedConnection,\n        className: `connections-metadata ${twoColumns}` }, void 0,\n\n      !this.state.copyFrom && /*#__PURE__*/\n      _jsx(\"button\", {\n        type: \"button\",\n        className: \"closeSidepanel close-modal\",\n        onClick: this.closeSidePanel }, void 0, /*#__PURE__*/\n\n      _jsx(Icon, { icon: \"times\" })), /*#__PURE__*/\n\n\n      _jsx(\"div\", { className: \"sidepanel-body\" }, void 0, this.renderBody()), /*#__PURE__*/\n      _jsx(\"div\", { className: \"sidepanel-footer\" }, void 0,\n      !this.state.copyFrom && /*#__PURE__*/\n      _jsx(MetadataFormButtons, {\n        data: Immutable.fromJS(this.props.entity),\n        delete: this.deleteDocument,\n        formStatePath: \"relationships.metadata\",\n        entityBeingEdited: this.props.entityBeingEdited,\n        copyFrom: this.toggleCopyFrom,\n        hideDelete: this.props.hubsBeingEdited,\n        includeViewButton: false }))));\n\n\n\n\n\n  }}\n\n\nRelationshipMetadata.contextTypes = {\n  confirm: PropTypes.func };\n\n\nRelationshipMetadata.defaultProps = {\n  selectedConnection: false,\n  entityBeingEdited: false,\n  hubsBeingEdited: false,\n  hubIndex: null,\n  rightRelationshipIndex: null };\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst connectionSelector = createSelector(\n(state) => state.relationships.connection,\n(entity) => entity && entity.toJS ? entity.toJS() : { metadata: {} });\n\n\nconst mapStateToProps = (state) => {\n  const entityBeingEdited = Boolean(state.relationships.metadata.metadata);\n\n  return {\n    selectedConnection: Boolean(\n    state.relationships.connection && state.relationships.connection.get('_id') ||\n    entityBeingEdited),\n\n    entity: connectionSelector(state),\n    entityBeingEdited,\n    hubsBeingEdited: Boolean(state.relationships.hubActions.get('editing')),\n    templates: state.templates,\n    formState: state.relationships.metadata,\n    hubIndex: state.relationships.hubActions.getIn(['addTo', 'hubIndex']),\n    rightRelationshipIndex: state.relationships.hubActions.getIn([\n    'addTo',\n    'rightRelationshipIndex']),\n\n    parentSharedId: state.relationships.list.sharedId };\n\n};\n\nfunction mapDispatchToProps(dispatch) {\n  return bindActionCreators(\n  {\n    unselectConnection,\n    updateRelationshipEntityData,\n    changeTemplate: actions.changeTemplate,\n    addEntity,\n    setAddToData,\n    resetForm: formActions.reset,\n    reloadRelationships },\n\n  dispatch);\n\n}\n\nexport { RelationshipMetadata, mapStateToProps };\n\nexport default connect(mapStateToProps, mapDispatchToProps)(RelationshipMetadata);","import { createSelector } from 'reselect';\n\n\nexport const selectEntity = createSelector(\n(state) => state.entityView.entity,\n(entity) => entity === null || entity === void 0 ? void 0 : entity.toJS());\n\n\nexport const selectOneUpState = createSelector(\n(state) => state.oneUpReview.state,\n(state) => state === null || state === void 0 ? void 0 : state.toJS());\n\n\nexport const selectMlThesauri = createSelector(\n(state) => state.thesauris,\n(thesauri) =>\nthesauri.\nfilter((thes) => !!thes.get('enable_classification')).\nmap((thes) => {var _get$toString, _get;return (_get$toString = (_get = thes.get('_id')) === null || _get === void 0 ? void 0 : _get.toString()) !== null && _get$toString !== void 0 ? _get$toString : '';}).\ntoJS());\n\n\nexport const selectIsPristine = createSelector(\n(state) => state.entityView.entityFormState.$form.pristine,\n(value) => value);","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}function _defineProperty(obj, key, value) {if (key in obj) {Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });} else {obj[key] = value;}return obj;}import { t } from \"../../I18N\";\nimport { switchOneUpEntity } from \"../actions/actions\";\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { Icon } from \"../../UI\";\n\nimport { selectIsPristine } from \"../common\";\n\nconst defaultProps = {\n  isPristine: true,\n  isLast: false,\n  thesaurusName: '',\n  switchOneUpEntity: (_delta, _save) => {} };\n\n\n\n\nexport class OneUpEntityButtonsBase extends Component {\n\n\n  renderNextButton(isPristine, btnClass) {\n    return /*#__PURE__*/(\n      _jsx(\"button\", {\n        type: \"button\",\n        onClick: () => this.props.switchOneUpEntity(+1, true),\n        className: `save-and-next ${!isPristine ? 'btn-success' : ''} ${btnClass}` }, void 0, /*#__PURE__*/\n\n      _jsx(Icon, { icon: \"save-and-next\" }), /*#__PURE__*/\n      _jsx(\"span\", { className: \"btn-label\" }, void 0, t('System', 'Save and go to next'))));\n\n\n  }\n\n  render() {\n    const { isPristine } = this.props;\n    const btnClass = isPristine ? 'btn btn-default btn-disabled' : 'btn btn-default';\n    return /*#__PURE__*/(\n      _jsx(\"div\", { className: \"content-footer\" }, void 0, /*#__PURE__*/\n      _jsx(\"button\", {\n        type: \"button\",\n        onClick: () => this.props.switchOneUpEntity(0, false),\n        className: `cancel-edit-metadata ${!isPristine ? 'btn-danger' : ''} ${btnClass}` }, void 0, /*#__PURE__*/\n\n      _jsx(Icon, { icon: \"undo\" }), /*#__PURE__*/\n      _jsx(\"span\", { className: \"btn-label\" }, void 0, t('System', 'Discard changes'))), /*#__PURE__*/\n\n      _jsx(\"button\", {\n        type: \"button\",\n        onClick: () => this.props.switchOneUpEntity(0, true),\n        className: `save-metadata ${btnClass}` }, void 0, /*#__PURE__*/\n\n      _jsx(Icon, { icon: \"save\" }), /*#__PURE__*/\n      _jsx(\"span\", { className: \"btn-label\" }, void 0, t('System', 'Save document'))),\n\n      this.renderNextButton(isPristine, btnClass)));\n\n\n  }}_defineProperty(OneUpEntityButtonsBase, \"defaultProps\", defaultProps);\n\n\nconst mapStateToProps = (state) => ({\n  isPristine: selectIsPristine(state) });\n\n\nexport const OneUpEntityButtons = connect(mapStateToProps, { switchOneUpEntity })(\nOneUpEntityButtonsBase);","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}function _defineProperty(obj, key, value) {if (key in obj) {Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });} else {obj[key] = value;}return obj;} // eslint-disable-line max-lines\n\n\nimport ShowIf from \"../../App/ShowIf\";\nimport { ConnectionsGroups } from \"../../ConnectionsList\";\nimport { connectionsChanged, deleteConnection } from \"../../ConnectionsList/actions/actions\";\nimport { showTab } from \"../../Entities/actions/uiActions\";\nimport { t } from \"../../I18N\";\n\nimport SidePanel from \"../../Layout/SidePanel\";\nimport { MetadataForm } from \"../../Metadata\";\nimport { toggleOneUpLoadConnections } from \"../actions/actions\";\nimport { StateSelector } from \"./StateSelector\";\nimport Immutable from 'immutable';\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { TabContent, TabLink, Tabs } from 'react-tabs-redux';\nimport { bindActionCreators } from 'redux';\n\n\n\nimport { Icon } from \"../../UI\";\nimport { selectEntity, selectIsPristine, selectMlThesauri, selectOneUpState } from \"../common\";\n\nconst defaultProps = {\n  entity: {},\n  connectionsGroups: Immutable.fromJS([]),\n  templates: Immutable.fromJS([]),\n  mlThesauri: [],\n  oneUpState: {},\n  tab: 'info',\n  panelOpen: true,\n  selectedConnection: false,\n  closePanel: () => {},\n  showTab: (_tab) => ({}),\n  connectionsChanged: () => {},\n  deleteConnection: (_reference) => {},\n  toggleOneUpLoadConnections: () => {} };\n\n\n\n\nexport class OneUpSidePanelBase extends Component {\n\n\n  mlProps() {var _templates$find, _template$get;\n    const { entity, mlThesauri, templates } = this.props;\n    const template = (_templates$find =\n    templates.find((tmpl) => tmpl.get('_id') === entity.template)) !== null && _templates$find !== void 0 ? _templates$find : Immutable.fromJS({});\n    const properties = (_template$get =\n    template.get('properties')) !== null && _template$get !== void 0 ? _template$get : Immutable.fromJS([]);\n    return properties.\n    filter((p) => {var _get;return mlThesauri.includes((_get = p.get('content')) !== null && _get !== void 0 ? _get : '');}).\n    map((p) => p.get('name')).\n    toJS();\n  }\n\n  render() {var _entity$template$toSt, _entity$template;\n    const { entity, tab, selectedConnection, connectionsGroups, oneUpState, panelOpen } =\n    this.props;\n    const selectedTab = tab !== null && tab !== void 0 ? tab : 'info';\n\n    const summary = connectionsGroups.reduce(\n    (summaryData, g) => {\n      g.get('templates').forEach((tmpl) => {\n        summaryData.totalConnections += tmpl.get('count'); // eslint-disable-line no-param-reassign\n      });\n      return summaryData;\n    },\n    { totalConnections: 0 });\n\n\n    return /*#__PURE__*/(\n      _jsx(SidePanel, {\n        className: `entity-connections entity-${this.props.tab}`,\n        open: panelOpen && !selectedConnection }, void 0, /*#__PURE__*/\n\n      _jsx(\"div\", { className: \"sidepanel-header content-header-tabs\" }, void 0, /*#__PURE__*/\n      _jsx(\"div\", { className: \"blank\" }), /*#__PURE__*/\n      _jsx(Tabs, {\n        selectedTab: selectedTab,\n        handleSelect: (tabName) => {\n          this.props.showTab(tabName);\n        } }, void 0, /*#__PURE__*/\n\n      _jsx(\"ul\", { className: \"nav nav-tabs\" }, void 0, /*#__PURE__*/\n      _jsx(\"li\", {}, void 0, /*#__PURE__*/\n      _jsx(TabLink, { to: \"info\", component: \"div\" }, void 0, /*#__PURE__*/\n      _jsx(Icon, { icon: \"info-circle\" }), /*#__PURE__*/\n      _jsx(\"span\", { className: \"tab-link-tooltip\" }, void 0, t('System', 'Info')))), /*#__PURE__*/\n\n\n      _jsx(\"li\", {}, void 0, /*#__PURE__*/\n      _jsx(TabLink, { to: \"connections\", component: \"div\" }, void 0, /*#__PURE__*/\n      _jsx(Icon, { icon: \"exchange-alt\" }), /*#__PURE__*/\n      _jsx(\"span\", { className: \"connectionsNumber\" }, void 0, summary.totalConnections), /*#__PURE__*/\n      _jsx(\"span\", { className: \"tab-link-tooltip\" }, void 0, t('System', 'Connections')))))), /*#__PURE__*/\n\n\n\n\n      _jsx(\"button\", {\n        type: \"button\",\n        className: \"closeSidepanel close-modal\",\n        onClick: this.props.closePanel }, void 0, /*#__PURE__*/\n\n      _jsx(Icon, { icon: \"times\" }))), /*#__PURE__*/\n\n\n      _jsx(\"div\", { className: \"sidepanel-body\" }, void 0, /*#__PURE__*/\n      _jsx(Tabs, { selectedTab: selectedTab }, void 0, /*#__PURE__*/\n      _jsx(TabContent, { for: selectedTab === 'connections' ? selectedTab : 'none' }, void 0, /*#__PURE__*/\n      _jsx(ConnectionsGroups, { connectionsGroups: connectionsGroups })), /*#__PURE__*/\n\n      _jsx(TabContent, { for: selectedTab === 'info' ? selectedTab : 'none' }, void 0, /*#__PURE__*/\n      _jsx(MetadataForm, {\n        id: \"sidePanelMetadataForm\",\n        model: \"entityView.entityForm\",\n        templateId: (_entity$template$toSt = (_entity$template = entity.template) === null || _entity$template === void 0 ? void 0 : _entity$template.toString()) !== null && _entity$template$toSt !== void 0 ? _entity$template$toSt : '',\n        showSubset: this.mlProps(),\n        version: \"OneUp\" })))), /*#__PURE__*/\n\n\n\n\n      _jsx(ShowIf, { if: selectedTab === 'connections' }, void 0, /*#__PURE__*/\n      _jsx(StateSelector, { isPristine: selectIsPristine }, void 0,\n      ({ isPristine }) => /*#__PURE__*/\n      _jsx(\"div\", { className: \"sidepanel-footer\" }, void 0, /*#__PURE__*/\n      _jsx(\"button\", {\n        type: \"button\",\n        onClick: () => this.props.toggleOneUpLoadConnections(),\n        className: isPristine ? 'btn btn-default' : 'btn btn-default btn-disabled' }, void 0, /*#__PURE__*/\n\n      _jsx(Icon, { icon: oneUpState.loadConnections ? 'times' : 'undo' }), /*#__PURE__*/\n      _jsx(\"span\", { className: \"btn-label\" }, void 0,\n      t(\n      'System',\n      oneUpState.loadConnections ? 'Hide Connections' : 'Load Connections'))))))));\n\n\n\n\n\n\n\n\n\n  }}_defineProperty(OneUpSidePanelBase, \"defaultProps\", defaultProps);\n\n\nconst mapStateToProps = (state) => {var _selectOneUpState;return {\n    entity: selectEntity(state),\n    connectionsGroups: state.relationships.list.connectionsGroups,\n    selectedConnection: Boolean(\n    state.relationships.connection && state.relationships.connection.get('_id')),\n\n    tab: state.entityView.uiState.get('tab'),\n    oneUpState: (_selectOneUpState = selectOneUpState(state)) !== null && _selectOneUpState !== void 0 ? _selectOneUpState : {},\n    templates: state.templates,\n    mlThesauri: selectMlThesauri(state) };};\n\n\nfunction mapDispatchToProps(dispatch) {\n  return bindActionCreators(\n  {\n    connectionsChanged,\n    deleteConnection,\n    showTab,\n    toggleOneUpLoadConnections },\n\n  dispatch);\n\n}\n\nexport const OneUpSidePanel = connect(mapStateToProps, mapDispatchToProps)(OneUpSidePanelBase);","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}function _defineProperty(obj, key, value) {if (key in obj) {Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });} else {obj[key] = value;}return obj;}import { I18NLink, t } from \"../../I18N\";\n\nimport { switchOneUpEntity, toggleOneUpFullEdit } from \"../actions/actions\";\nimport PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport { Icon } from \"../../UI\";\nimport { selectIsPristine, selectOneUpState } from \"../common\";\n\nconst defaultProps = {\n  isPristine: true,\n  oneUpState: {},\n  switchOneUpEntity: (_delta, _save) => {} };\n\n\n\n\nexport class OneUpTitleBarBase extends Component {\n\n\n\n\n\n\n  backToThesaurus() {\n    const { oneUpState, isPristine } = this.props;\n    if (oneUpState.reviewThesaurusName) {\n      return /*#__PURE__*/(\n        _jsx(I18NLink, {\n          to: `/settings/dictionaries/cockpit/${oneUpState.reviewThesaurusId}`,\n          className: \"btn btn-default\",\n          confirmTitle: isPristine ? '' : 'Confirm discard changes',\n          confirmMessage:\n          isPristine ?\n          '' :\n          'There are unsaved changes. Are you sure you want to discard them and navigate away?' }, void 0, /*#__PURE__*/\n\n\n        _jsx(Icon, { icon: \"arrow-left\" }), /*#__PURE__*/\n        _jsx(\"span\", { className: \"btn-label\" }, void 0,\n        t('System', 'Back to'), \" \", /*#__PURE__*/_jsx(\"span\", {}, void 0, `'${oneUpState.reviewThesaurusName}'`))));\n\n\n\n    }\n    return null;\n  }\n\n  navButtons() {\n    const { oneUpState, isPristine } = this.props;\n    const prevClass = oneUpState.indexInDocs > 0 ? '' : ' btn-disabled';\n    const nextClass = oneUpState.indexInDocs < oneUpState.totalDocs - 1 ? '' : ' btn-disabled';\n    const navAction = isPristine ?\n    (delta) => () => this.props.switchOneUpEntity(delta, false) :\n    (delta) => () =>\n    this.context.confirm({\n      accept: () => this.props.switchOneUpEntity(delta, false),\n      title: 'Confirm discard changes',\n      message:\n      'There are unsaved changes. Are you sure you want to discard them and switch to a different document?' });\n\n    return /*#__PURE__*/(\n      _jsx(\"span\", {}, void 0, /*#__PURE__*/\n      _jsx(\"button\", { type: \"button\", onClick: navAction(-1), className: `btn btn-default${prevClass}` }, void 0, /*#__PURE__*/\n      _jsx(Icon, { icon: \"arrow-left\" })), /*#__PURE__*/\n\n      _jsx(\"button\", { type: \"button\", onClick: navAction(+1), className: `btn btn-default${nextClass}` }, void 0, /*#__PURE__*/\n      _jsx(Icon, { icon: \"arrow-right\" }))));\n\n\n\n  }\n\n  render() {\n    const { oneUpState } = this.props;\n\n    return /*#__PURE__*/(\n      _jsx(\"div\", { className: \"content-header-title\" }, void 0,\n      this.backToThesaurus(),\n      oneUpState.reviewThesaurusValues && oneUpState.reviewThesaurusValues.length === 1 ? /*#__PURE__*/\n      _jsx(\"span\", { className: \"large\" }, void 0, /*#__PURE__*/\n      _jsx(\"span\", { className: \"space8\" }),\n      t('System', 'Documents including suggestion:'), ' ', /*#__PURE__*/\n      _jsx(\"b\", {}, void 0, `'${oneUpState.reviewThesaurusValues[0]}'`), /*#__PURE__*/\n      _jsx(\"span\", { className: \"separator\" })) : /*#__PURE__*/\n\n\n      _jsx(\"span\", { className: \"large\" }, void 0, /*#__PURE__*/\n      _jsx(\"span\", { className: \"space8\" }),\n      t('System', 'Documents for custom filter'), /*#__PURE__*/\n      _jsx(\"span\", { className: \"separator\" })),\n\n\n      oneUpState.totalDocs ? /*#__PURE__*/\n      _jsx(\"div\", {}, void 0,\n      t('System', 'Document'), \" \", /*#__PURE__*/_jsx(\"span\", {}, void 0, oneUpState.indexInDocs + 1), \" \", t('System', 'of'), ' ', /*#__PURE__*/\n      _jsx(\"span\", {}, void 0,\n      oneUpState.totalDocs >= oneUpState.maxTotalDocs ?\n      `>${oneUpState.totalDocs - 1}` :\n      `${oneUpState.totalDocs}`), /*#__PURE__*/\n\n      _jsx(\"span\", { className: \"space8\" })) :\n\n\n      t('System', 'No Documents found'),\n\n      this.navButtons()));\n\n\n  }}_defineProperty(OneUpTitleBarBase, \"defaultProps\", defaultProps);_defineProperty(OneUpTitleBarBase, \"contextTypes\", { confirm: PropTypes.func });\n\n\nconst mapStateToProps = (state) => {var _selectOneUpState;return {\n    isPristine: selectIsPristine(state),\n    oneUpState: (_selectOneUpState = selectOneUpState(state)) !== null && _selectOneUpState !== void 0 ? _selectOneUpState : {} };};\n\n\nfunction mapDispatchToProps(dispatch) {\n  return bindActionCreators(\n  {\n    switchOneUpEntity,\n    toggleOneUpFullEdit },\n\n  dispatch);\n\n}\n\nexport const OneUpTitleBar = connect(mapStateToProps, mapDispatchToProps)(OneUpTitleBarBase);","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}function _defineProperty(obj, key, value) {if (key in obj) {Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });} else {obj[key] = value;}return obj;} // eslint-disable-line max-lines\n\nimport Footer from \"../../App/Footer\";\nimport ShowIf from \"../../App/ShowIf\";\nimport { AttachmentsList } from \"../../Attachments\";\nimport { FileList } from \"../../Attachments/components/FileList\";\nimport { CreateConnectionPanel } from \"../../Connections\";\nimport { ConnectionsList } from \"../../ConnectionsList\";\nimport { connectionsChanged, deleteConnection } from \"../../ConnectionsList/actions/actions\";\nimport ContextMenu from \"../../ContextMenu\";\nimport { ShowSidepanelMenu } from \"../../Entities/components/ShowSidepanelMenu\";\nimport { Translate } from \"../../I18N\";\n\nimport { Icon as PropertyIcon, TemplateLabel } from \"../../Layout\";\nimport Tip from \"../../Layout/Tip\";\nimport { MetadataForm, ShowMetadata } from \"../../Metadata\";\nimport { RelationshipsFormButtons } from \"../../Relationships\";\nimport AddEntitiesPanel from \"../../Relationships/components/AddEntities\";\nimport RelationshipMetadata from \"../../Relationships/components/RelationshipMetadata\";\nimport { toggleOneUpFullEdit } from \"../actions/actions\";\nimport { OneUpEntityButtons } from \"./OneUpEntityButtons\";\nimport { OneUpSidePanel } from \"./OneUpSidePanel\";\nimport { OneUpTitleBar } from \"./OneUpTitleBar\";\nimport Immutable from 'immutable';\nimport PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport { Helmet } from 'react-helmet';\nimport { connect } from 'react-redux';\nimport { TabContent, Tabs } from 'react-tabs-redux';\nimport { bindActionCreators } from 'redux';\n\n\n\nimport { Icon } from \"../../UI\";\nimport { selectEntity, selectMlThesauri, selectOneUpState } from \"../common\";\n\nconst defaultProps = {\n  entity: {},\n  relationships: Immutable.fromJS([]),\n  templates: Immutable.fromJS([]),\n  mlThesauri: [],\n  oneUpState: {},\n  tab: 'info',\n  connectionsChanged: () => {},\n  deleteConnection: (_reference) => {},\n  toggleOneUpFullEdit: () => {} };\n\n\n\n\n\n\n\n\nexport class OneUpEntityViewerBase extends Component\n\n\n{\n\n\n\n\n\n\n  constructor(props, context) {\n    super(props, context);\n    this.state = {\n      panelOpen: true };\n\n    this.closePanel = this.closePanel.bind(this);\n    this.openPanel = this.openPanel.bind(this);\n    this.deleteConnection = this.deleteConnection.bind(this);\n  }\n\n  deleteConnection(reference) {\n    if (reference.sourceType !== 'metadata') {\n      this.context.confirm({\n        accept: () => {\n          this.props.deleteConnection(reference);\n        },\n        title: 'Confirm delete connection',\n        message: 'Are you sure you want to delete this connection?' });\n\n    }\n  }\n\n  closePanel() {\n    this.setState({ panelOpen: false });\n  }\n\n  openPanel() {\n    this.setState({ panelOpen: true });\n  }\n\n  nonMlProps() {var _templates$find, _template$get;\n    const { entity, mlThesauri, templates } = this.props;\n    const template = (_templates$find =\n    templates.find((tmpl) => tmpl.get('_id') === entity.template)) !== null && _templates$find !== void 0 ? _templates$find : Immutable.fromJS({});\n    const properties = (_template$get =\n    template.get('properties')) !== null && _template$get !== void 0 ? _template$get : Immutable.fromJS([]);\n    return properties.\n    filter((p) => {var _get;return !mlThesauri.includes((_get = p.get('content')) !== null && _get !== void 0 ? _get : '');}).\n    map((p) => p.get('name')).\n    toJS();\n  }\n\n  renderFullEditToggle() {\n    const { oneUpState } = this.props;\n    let onClick = () => this.props.toggleOneUpFullEdit();\n    if (!oneUpState.fullEdit) {\n      onClick = () =>\n      this.context.confirm({\n        accept: () => this.props.toggleOneUpFullEdit(),\n        title: 'Keep this in mind if you want to edit:',\n        message:\n        \"Changes can't be undone after saving. Changing text fields may invalidate the suggestions.\" });\n\n    }\n    return /*#__PURE__*/(\n      _jsx(\"button\", {\n        type: \"button\",\n        onClick: onClick,\n        className:\n        oneUpState.fullEdit ? 'btn btn-default btn-toggle-on' : 'btn btn-default btn-toggle-off' }, void 0, /*#__PURE__*/\n\n\n      _jsx(Icon, { icon: oneUpState.fullEdit ? 'toggle-on' : 'toggle-off' }), /*#__PURE__*/\n      _jsx(\"span\", { className: \"btn-label\" }, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Full edit mode\"))));\n\n\n\n  }\n\n  render() {var _entity$template$toSt, _entity$template, _entity$template$toSt2, _entity$template2;\n    const { entity, tab, relationships, oneUpState } = this.props;\n    const { panelOpen } = this.state;\n    const selectedTab = tab !== null && tab !== void 0 ? tab : 'info';\n\n    return /*#__PURE__*/(\n      _jsx(\"div\", { className: \"row flex\" }, void 0, /*#__PURE__*/\n      _jsx(Helmet, {}, void 0, /*#__PURE__*/\n      _jsx(\"title\", {}, void 0, entity.title ? entity.title : 'Entity')), /*#__PURE__*/\n\n      _jsx(\"div\", { className: \"content-holder\" }, void 0, /*#__PURE__*/\n      _jsx(\"main\", { className: \"content-main\" }, void 0, /*#__PURE__*/\n      _jsx(\"div\", { className: \"content-header content-header-entity\" }, void 0, /*#__PURE__*/\n      _jsx(OneUpTitleBar, {}),\n      this.renderFullEditToggle()), /*#__PURE__*/\n\n      _jsx(\"div\", { className: \"entity-viewer\" }, void 0, /*#__PURE__*/\n      _jsx(Tabs, { selectedTab: selectedTab }, void 0, /*#__PURE__*/\n      _jsx(TabContent, {\n        for:\n        selectedTab === 'info' || selectedTab === 'attachments' ? selectedTab : 'none' }, void 0, /*#__PURE__*/\n\n\n      _jsx(\"div\", { className: \"entity-metadata\" }, void 0, /*#__PURE__*/\n      _jsx(ShowIf, { if: oneUpState.fullEdit }, void 0, /*#__PURE__*/\n      _jsx(MetadataForm, {\n        id: \"fullEditMetadataForm\",\n        model: \"entityView.entityForm\",\n        templateId: (_entity$template$toSt = (_entity$template = entity.template) === null || _entity$template === void 0 ? void 0 : _entity$template.toString()) !== null && _entity$template$toSt !== void 0 ? _entity$template$toSt : '',\n        showSubset: [...this.nonMlProps(), 'title'],\n        version: \"OneUp\" })), /*#__PURE__*/\n\n\n      _jsx(ShowIf, { if: !oneUpState.fullEdit }, void 0, /*#__PURE__*/\n      _jsx(\"div\", {}, void 0, /*#__PURE__*/\n      _jsx(\"div\", { className: \"content-header-title\" }, void 0, /*#__PURE__*/\n      _jsx(PropertyIcon, {\n        className: \"item-icon item-icon-center\",\n        data: entity.icon,\n        size: \"sm\" }), /*#__PURE__*/\n\n      _jsx(\"h1\", { className: \"item-name\" }, void 0, entity.title), /*#__PURE__*/\n      _jsx(TemplateLabel, { template: (_entity$template$toSt2 = (_entity$template2 = entity.template) === null || _entity$template2 === void 0 ? void 0 : _entity$template2.toString()) !== null && _entity$template$toSt2 !== void 0 ? _entity$template$toSt2 : '' }),\n      entity.published ?\n      '' : /*#__PURE__*/\n\n      _jsx(Tip, { icon: \"eye-slash\" }, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"This entity is not public.\"))), /*#__PURE__*/\n\n\n\n      _jsx(ShowMetadata, {\n        relationships: relationships,\n        entity: entity,\n        showTitle: false,\n        showType: false,\n        showSubset: this.nonMlProps() }), /*#__PURE__*/\n\n      _jsx(FileList, { files: entity.documents, entity: entity }), /*#__PURE__*/\n      _jsx(AttachmentsList, {\n        attachments: entity.attachments,\n        parentId: entity._id,\n        parentSharedId: entity.sharedId,\n        isDocumentAttachments: Boolean(entity.file),\n        entityView: true,\n        processed: entity.processed }))))), /*#__PURE__*/\n\n\n\n\n\n      _jsx(TabContent, { for: \"connections\" }, void 0, /*#__PURE__*/\n      _jsx(ConnectionsList, {\n        deleteConnection: this.deleteConnection,\n        searchCentered: true,\n        hideFooter: true })))), /*#__PURE__*/\n\n\n\n\n      _jsx(ShowIf, { if: selectedTab === 'connections' }, void 0, /*#__PURE__*/\n      _jsx(\"div\", { className: \"content-footer\" }, void 0, /*#__PURE__*/\n      _jsx(RelationshipsFormButtons, {}))), /*#__PURE__*/\n\n\n      _jsx(ShowIf, { if: selectedTab !== 'connections' }, void 0, /*#__PURE__*/\n      _jsx(OneUpEntityButtons, {\n        isLast: oneUpState.indexInDocs === oneUpState.totalDocs - 1,\n        thesaurusName: oneUpState.reviewThesaurusValues[0] })), /*#__PURE__*/\n\n\n      _jsx(ContextMenu, {\n        align: \"bottom\",\n        overrideShow: true,\n        show: !panelOpen,\n        className: \"show-info-sidepanel-context-menu\" }, void 0, /*#__PURE__*/\n\n      _jsx(ShowSidepanelMenu, {\n        className: \"show-info-sidepanel-menu\",\n        panelIsOpen: panelOpen,\n        openPanel: this.openPanel }))), /*#__PURE__*/\n\n\n\n      _jsx(OneUpSidePanel, { panelOpen: panelOpen, closePanel: this.closePanel }), /*#__PURE__*/\n      _jsx(CreateConnectionPanel, {\n        className: \"entity-create-connection-panel\",\n        containerId: entity.sharedId,\n        onCreate: this.props.connectionsChanged }), /*#__PURE__*/\n\n      _jsx(AddEntitiesPanel, {}), /*#__PURE__*/\n      _jsx(RelationshipMetadata, {})), /*#__PURE__*/\n\n      _jsx(Footer, {})));\n\n\n  }}_defineProperty(OneUpEntityViewerBase, \"defaultProps\", defaultProps);_defineProperty(OneUpEntityViewerBase, \"contextTypes\", { confirm: PropTypes.func });\n\n\nconst mapStateToProps = (state) => {var _selectOneUpState;return {\n    entity: selectEntity(state),\n    relationships: state.entityView.entity.get('relationships'),\n    tab: state.entityView.uiState.get('tab'),\n    oneUpState: (_selectOneUpState = selectOneUpState(state)) !== null && _selectOneUpState !== void 0 ? _selectOneUpState : {},\n    templates: state.templates,\n    mlThesauri: selectMlThesauri(state) };};\n\n\nfunction mapDispatchToProps(dispatch) {\n  return bindActionCreators(\n  {\n    connectionsChanged,\n    deleteConnection,\n    toggleOneUpFullEdit },\n\n  dispatch);\n\n}\n\nexport const OneUpEntityViewer = connect(\nmapStateToProps,\nmapDispatchToProps)(\nOneUpEntityViewerBase);","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}function ownKeys(object, enumerableOnly) {var keys = Object.keys(object);if (Object.getOwnPropertySymbols) {var symbols = Object.getOwnPropertySymbols(object);enumerableOnly && (symbols = symbols.filter(function (sym) {return Object.getOwnPropertyDescriptor(object, sym).enumerable;})), keys.push.apply(keys, symbols);}return keys;}function _objectSpread(target) {for (var i = 1; i < arguments.length; i++) {var source = null != arguments[i] ? arguments[i] : {};i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {_defineProperty(target, key, source[key]);}) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));});}return target;}function _defineProperty(obj, key, value) {if (key in obj) {Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });} else {obj[key] = value;}return obj;}import RouteHandler from \"../App/RouteHandler\";\nimport { actions } from \"../BasicReducer\";\nimport Loader from \"../components/Elements/Loader\";\nimport * as uiActions from \"../Entities/actions/uiActions\";\n\nimport { setDocuments, unsetDocuments } from \"../Library/actions/libraryActions\";\nimport { processQuery } from \"../Library/helpers/requestState\";\nimport { wrapDispatch } from \"../Multireducer\";\nimport * as relationships from \"../Relationships/utils/routeUtils\";\nimport relationTypesAPI from \"../RelationTypes/RelationTypesAPI\";\nimport * as reviewActions from \"./actions/actions\";\nimport { OneUpEntityViewer } from \"./components/OneUpEntityViewer\";\nimport api from \"../Search/SearchAPI\";\nimport TemplatesAPI from \"../Templates/TemplatesAPI\";\nimport ThesauriAPI from \"../Thesauri/ThesauriAPI\";\n\nimport { setReferences } from \"../Viewer/actions/referencesActions\";\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { actions as formActions } from 'react-redux-form';\nimport { propertyTypes } from \"../../shared/propertyTypes\";\n\n\n\n\n\n\n\n\n\n\n\nfunction buildInitialOneUpState(\ndocumentsRequest,\nnumDocuments,\nthesauri,\ntemplates)\n{var _documentsRequest$dat, _documentsRequest$dat2;\n  const thesaurusValues = [];\n  const thesauriKeys = Object.keys((_documentsRequest$dat = (_documentsRequest$dat2 = documentsRequest.data) === null || _documentsRequest$dat2 === void 0 ? void 0 : _documentsRequest$dat2.filters) !== null && _documentsRequest$dat !== void 0 ? _documentsRequest$dat : {}).reduce((res, k) => {\n    const propName = k.startsWith('__') ? k.substring(2) : k;\n    if (k.startsWith('__')) {\n      thesaurusValues.push(\n      ...documentsRequest.data.filters[k].values.filter(\n      (v) => v && !['any', 'missing'].includes(v)));\n\n\n    }\n    return _objectSpread(_objectSpread({},\n    res),\n    templates.reduce((res2, tmpl) => {\n      const prop = (tmpl.properties || []).find((p) => p.name === propName);\n      if (\n      !prop ||\n      !prop.content ||\n      prop.type !== propertyTypes.select && prop.type !== propertyTypes.multiselect)\n      {\n        return res2;\n      }\n      return _objectSpread(_objectSpread({}, res2), {}, { [prop.content]: true });\n    }, {}));\n\n  }, {});\n  const thesaurus =\n  Object.keys(thesauriKeys).length === 1 ?\n  thesauri.find((t) => t._id.toString() === Object.keys(thesauriKeys)[0]) :\n  null;\n  thesauri.forEach((t) => {\n    (t.values || []).forEach((tv) => {\n      const i = thesaurusValues.findIndex((v) => v === tv.id);\n      if (i >= 0) {\n        thesaurusValues[i] = tv.label;\n      }\n    });\n  });\n  return {\n    loaded: true,\n    fullEdit: false,\n    loadConnections: false,\n    indexInDocs: 0,\n    totalDocs: numDocuments,\n    maxTotalDocs: 5001,\n    requestHeaders: documentsRequest.headers,\n    reviewThesaurusName: thesaurus ? thesaurus.name : '',\n    reviewThesaurusId: thesaurus ? thesaurus._id.toString() : '',\n    reviewThesaurusValues: thesaurusValues };\n\n}\n\nexport class OneUpReviewBase extends RouteHandler {\n  static async requestState(requestParams, state) {\n    const documentsRequest = requestParams.set(_objectSpread(_objectSpread({},\n    processQuery(requestParams.data, state)), {}, {\n      limit: 5001,\n      select: ['sharedId'],\n      unpublished: !!requestParams.data.unpublished,\n      includeUnpublished: !!requestParams.data.includeUnpublished,\n      includeReviewAggregations: true }));\n\n\n    const [templates, thesauri, relationTypes, documents] = await Promise.all([\n    TemplatesAPI.get(requestParams.onlyHeaders()),\n    ThesauriAPI.getThesauri(requestParams.onlyHeaders()),\n    relationTypesAPI.get(requestParams.onlyHeaders()),\n    api.search(documentsRequest)]);\n\n\n    const firstSharedId = documents.rows.length ? documents.rows[0].sharedId : '';\n\n    return [\n    actions.set('relationTypes', relationTypes),\n    (dispatch) => wrapDispatch(dispatch, 'library')(unsetDocuments()),\n    (dispatch) => wrapDispatch(dispatch, 'library')(setDocuments(documents)),\n    actions.set(\n    'oneUpReview.state',\n    buildInitialOneUpState(documentsRequest, documents.rows.length, thesauri, templates)),\n\n    ...(firstSharedId ?\n    await reviewActions.getAndLoadEntity(\n    requestParams.set({ sharedId: firstSharedId }),\n    templates,\n    state,\n    false) :\n\n    [])];\n\n  }\n\n  urlHasChanged(nextProps) {\n    return nextProps.location.query.q !== this.props.location.query.q;\n  }\n\n  componentWillUnmount() {\n    this.emptyState();\n  }\n\n  componentDidMount() {\n    this.context.store.dispatch(uiActions.showTab('info'));\n  }\n\n  emptyState() {\n    wrapDispatch(this.context.store.dispatch, 'library')(unsetDocuments());\n    this.context.store.dispatch(setReferences([]));\n    this.context.store.dispatch(actions.unset('entityView/entity'));\n    this.context.store.dispatch(formActions.reset('entityView.entityForm'));\n    this.context.store.dispatch(relationships.emptyState());\n    actions.set('oneUpReview.state', {});\n  }\n\n  render() {\n    const { entity, oneUpState } = this.props;\n    if (\n    !oneUpState ||\n    !oneUpState.get('loaded') ||\n    oneUpState.get('totalDocs') && (!entity || !entity.get('_id')))\n    {\n      return /*#__PURE__*/_jsx(Loader, {});\n    }\n    return /*#__PURE__*/_jsx(OneUpEntityViewer, {});\n  }}\n\n\n\n\n\n\n\n\n\n\n\nexport default connect(\n(state) => (\n{\n  entity: state.entityView.entity,\n  oneUpState: state.oneUpReview.state }))(\n\nOneUpReviewBase);","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\nimport { t } from \"../../I18N\";\n\nimport { showFilters, hideFilters } from \"../actions/libraryActions\";\nimport { wrapDispatch } from \"../../Multireducer\";\nimport { Icon } from \"../../UI\";\nimport { unselectAllDocuments } from \"../actions/libraryActions\";\n\nexport class SearchButton extends Component {\n  render() {\n    let toggle = this.props.open ? this.props.hideFilters : this.props.showFilters;\n    let activeClass = this.props.open ? ' is-active' : '';\n\n    if (this.props.open && this.props.metadataPanelIsOpen) {\n      toggle = this.props.unselectAllDocuments;\n      activeClass = '';\n    }\n\n    if (!this.props.open && this.props.metadataPanelIsOpen) {\n      toggle = () => {\n        this.props.showFilters();\n        this.props.unselectAllDocuments();\n      };\n    }\n\n    return /*#__PURE__*/(\n      _jsx(\"a\", { href: \"#\", className: `search-button btn ${activeClass}`, onClick: toggle }, void 0, /*#__PURE__*/\n      _jsx(\"div\", { className: \"searchButton-open\" }, void 0, /*#__PURE__*/\n      _jsx(Icon, { icon: \"funnel-filter\" }), /*#__PURE__*/\n      _jsx(\"span\", {}, void 0, t('System', 'Search'), \"...\"))));\n\n\n\n  }}\n\n\n\n\n\n\n\n\n\n\nSearchButton.contextTypes = {\n  storeKey: PropTypes.string };\n\n\nexport function mapStateToProps(state, props) {\n  return {\n    open: state[props.storeKey].ui.get('filtersPanel') !== false,\n    metadataPanelIsOpen: state[props.storeKey].ui.get('selectedDocuments').size > 0 };\n\n}\n\nfunction mapDispatchToProps(dispatch, props) {\n  return bindActionCreators(\n  {\n    showFilters,\n    hideFilters,\n    unselectAllDocuments },\n\n  wrapDispatch(dispatch, props.storeKey));\n\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SearchButton);","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { Form } from 'react-redux-form';\nimport { NumericRangeSlide } from \"../../ReactReduxForms\";\nimport { Icon } from \"../../UI\";\n\nimport SidePanel from \"../../Layout/SidePanel\";\nimport { t, Translate } from \"../../I18N\";\n\nconst filters = [\n{\n  label: 'Threshold',\n  model: 'threshold',\n  min: 0.3,\n  max: 1,\n  step: 0.01,\n  minLabel: 'Exploration',\n  maxLabel: 'Precision' },\n\n{\n  label: 'Minimum relevant sentences per document',\n  model: 'minRelevantSentences',\n  min: 1,\n  max: 50,\n  step: 1,\n  minLabel: '',\n  maxLabel: '' }];\n\n\n\nconst filterValue = (filter, filtersValues) =>\nfilter.model === 'threshold' ?\n`${(filtersValues[filter.model] * 100).toFixed(2)}%` :\nfiltersValues[filter.model];\n\nexport const ResultsFiltersPanel = ({ open, filtersValues }) => {\n  return /*#__PURE__*/(\n    _jsx(SidePanel, { open: open }, void 0, /*#__PURE__*/\n    _jsx(\"div\", { className: \"sidepanel-body\" }, void 0, /*#__PURE__*/\n    _jsx(\"div\", { className: \"sidepanel-title\" }, void 0, t('System', 'Fine tune')), /*#__PURE__*/\n    _jsx(Form, { model: \"semanticSearch.resultsFilters\" }, void 0, /*#__PURE__*/\n    _jsx(\"div\", { className: \"view\" }, void 0,\n    filters.map((filter) => /*#__PURE__*/\n    _jsx(\"dl\", { className: \"metadata-type-text\" }, filter.label, /*#__PURE__*/\n    _jsx(\"dt\", {}, void 0,\n    t('System', filter.label), \" \", filterValue(filter, filtersValues)), /*#__PURE__*/\n\n    _jsx(\"dd\", {}, void 0, /*#__PURE__*/\n    _jsx(NumericRangeSlide, {\n      delay: 200,\n      model: `.${filter.model}`,\n      prefix: filter.model,\n      min: filter.min,\n      max: filter.max,\n      step: filter.step,\n      minLabel: t('System', filter.minLabel),\n      maxLabel: t('System', filter.maxLabel) })))))), /*#__PURE__*/\n\n\n\n\n\n\n    _jsx(\"div\", { className: \"semantic-search-help\" }, void 0, /*#__PURE__*/\n    _jsx(\"div\", { className: \"alert alert-info alert-vertical\" }, void 0, /*#__PURE__*/\n    _jsx(Icon, { icon: \"info-circle\", size: \"2x\" }), /*#__PURE__*/\n    _jsx(\"p\", {}, void 0, /*#__PURE__*/\n    _jsx(Translate, { translationKey: \"Semantic search overview\" }, void 0, \"Semantic search is a technique to provide contextual results. Its ability to capture concepts and word associations in human language enables the retrieval of related information such as synonyms, connected categories or entities, etc. .\")), /*#__PURE__*/\n\n\n\n\n\n    _jsx(\"p\", {}, void 0, /*#__PURE__*/\n    _jsx(Translate, { translationKey: \"Semantic search threshold help\" }, void 0, \"The threshold determines how close the results match the search concept. Move the slider to the right to narrow down the concept of the search query. The obtained results will be more precise. Move the slider to the left to more broaden the concept and explore related content.\")), /*#__PURE__*/\n\n\n\n\n\n\n    _jsx(\"p\", {}, void 0, /*#__PURE__*/\n    _jsx(Translate, { translationKey: \"Semantic search minimum sentences help\" }, void 0, \"Semantic search is applied to each sentence in a document. Filter the documents by the minimum number of sentences that exceed the threshold.\")))))));\n\n\n\n\n\n\n\n\n\n};\n\n\n\n\n\n\n\n\nfunction mapStateToProps({ semanticSearch }) {\n  return {\n    open: semanticSearch.selectedDocument.isEmpty(),\n    filtersValues: semanticSearch.resultsFilters };\n\n}\n\nexport default connect(mapStateToProps)(ResultsFiltersPanel);","import {\nfetchSearches,\nsetEditSearchEntities,\neditSearchEntities,\nselectSemanticSearchDocument,\nunselectSemanticSearchDocument,\nsubmitNewSearch,\nshowSemanticSearch,\nhideSemanticSearch,\ndeleteSearch,\nstopSearch,\nresumeSearch,\nregisterForUpdates,\nupdateSearch,\naddSearchResults,\ngetSearch,\ngetMoreSearchResults } from \"./actions\";\n\n\nexport default {\n  fetchSearches,\n  setEditSearchEntities,\n  editSearchEntities,\n  selectSemanticSearchDocument,\n  unselectSemanticSearchDocument,\n  submitNewSearch,\n  showSemanticSearch,\n  hideSemanticSearch,\n  deleteSearch,\n  stopSearch,\n  resumeSearch,\n  registerForUpdates,\n  updateSearch,\n  addSearchResults,\n  getSearch,\n  getMoreSearchResults };","import { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\nimport { actions as formActions } from 'react-redux-form';\n\nimport { DocumentSidePanel } from \"../../Documents\";\nimport { actions as actionCreators } from \"../../BasicReducer\";\nimport { actions } from \"../../Metadata\";\nimport { deleteDocument, searchSnippets } from \"../../Library/actions/libraryActions\";\nimport { deleteEntity } from \"../../Entities/actions/actions\";\nimport multiReducer from \"../../Multireducer\";\nimport modals from \"../../Modals\";\n\nimport EntityForm from \"../../Library/containers/EntityForm\";\n\nimport { getDocumentReferences, saveDocument } from \"../../Library/actions/libraryActions\";\nimport semanticSearchActions from \"../actions\";\n\nexport const mapStateToProps = ({ semanticSearch, library, templates }) => ({\n  open: !semanticSearch.selectedDocument.isEmpty(),\n  doc: semanticSearch.selectedDocument,\n  references: library.sidepanel.references,\n  tab: library.sidepanel.tab,\n  docBeingEdited: !!Object.keys(library.sidepanel.metadata).length,\n  searchTerm: library.search.searchTerm,\n  formDirty: !library.sidepanel.metadataForm.$form.pristine,\n  templates,\n  formPath: 'library.sidepanel.metadata',\n  readOnly: true,\n  EntityForm,\n  storeKey: 'library' });\n\n\nexport function mapDispatchToProps(dispatch, props) {\n  return bindActionCreators(\n  {\n    loadInReduxForm: actions.loadInReduxForm,\n    getDocumentReferences,\n    closePanel: semanticSearchActions.unselectSemanticSearchDocument,\n    resetForm: () => (_dispatch) => {\n      _dispatch(formActions.setInitial(`${props.storeKey}.sidepanel.metadata`));\n      _dispatch(formActions.reset(`${props.storeKey}.sidepanel.metadata`));\n    },\n    saveDocument,\n    deleteDocument,\n    searchSnippets,\n    deleteEntity,\n    showModal: modals.actions.showModal,\n    showTab: (tab) => actionCreators.set('library.sidepanel.tab', tab) },\n\n  multiReducer.wrapDispatch(dispatch, props.storeKey));\n\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(DocumentSidePanel);","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import React from 'react';\nimport { connect } from 'react-redux';\nimport ResultsFiltersPanel from \"./ResultsFiltersPanel\";\nimport DocumentResultsPanel from \"./DocumentResultsPanel\";\n\nexport const ResultsSidePanel = () => /*#__PURE__*/\nReact.createElement(React.Fragment, null, /*#__PURE__*/\n_jsx(ResultsFiltersPanel, { storeKey: \"library\" }), /*#__PURE__*/\n_jsx(DocumentResultsPanel, {}));\n\n\n\nexport default connect()(ResultsSidePanel);","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport { t, Translate } from \"../../I18N\";\nimport * as metadataActions from \"../../Metadata/actions/actions\";\nimport { wrapDispatch } from \"../../Multireducer\";\nimport SidePanel from \"../../Layout/SidePanel\";\nimport Immutable from 'immutable';\nimport { Icon } from \"../../UI\";\nimport commonTemplate from \"../../Metadata/helpers/comonTemplate\";\nimport MetadataForm from \"../../Metadata/components/MetadataForm\";\nimport { setEditSearchEntities, getSearch } from \"../actions/actions\";\nimport { createSelector } from 'reselect';\n\nconst getTemplates = createSelector(\n(s) => s.templates,\n(templates) => templates.toJS());\n\n\nconst commonTemplateSelector = createSelector(\ngetTemplates,\n(s) => s.semanticSearch.multiedit,\ncommonTemplate);\n\n\nexport class SemanticSearchMultieditPanel extends Component {\n  constructor(props) {\n    super(props);\n    this.close = this.close.bind(this);\n    this.cancel = this.cancel.bind(this);\n    this.save = this.save.bind(this);\n    this.changeTemplate = this.changeTemplate.bind(this);\n  }\n\n  close() {\n    this.props.resetForm(this.props.formKey);\n    this.props.setEntities([]);\n  }\n\n  metadataFieldModified(key) {\n    return (\n      !this.props.formState.metadata[key].pristine && (\n      !this.props.formState.metadata[key].$form ||\n      !this.props.formState.metadata[key].$form.pristine));\n\n  }\n\n  save(formValues) {\n    const { entities, template, formState, searchId } = this.props;\n    const modifiedValues = { metadata: {} };\n    Object.keys(formValues.metadata).forEach((key) => {\n      if (this.metadataFieldModified(key)) {\n        modifiedValues.metadata[key] = formValues.metadata[key];\n      }\n    });\n\n    if (template.get('_id')) {\n      modifiedValues.template = template.get('_id');\n    }\n\n    if (formState.icon && !formState.icon.pristine) {\n      modifiedValues.icon = formValues.icon;\n    }\n    return this.props.multipleUpdate(entities, modifiedValues).then(() => {\n      this.close();\n      this.props.getSearch(searchId);\n    });\n  }\n\n  changeTemplate(_formModel, template) {\n    const updatedEntities = this.props.entities.map((entity) => entity.set('template', template));\n    this.props.setEntities(updatedEntities);\n  }\n\n  cancel() {\n    const { confirm } = this.context;\n    confirm({\n      accept: () => {\n        this.close();\n      },\n      title: 'Confirm',\n      message: 'Discard changes' });\n\n  }\n\n  renderEditingForm() {\n    const { formKey, thesauris } = this.props;\n\n    return /*#__PURE__*/(\n      React.createElement(React.Fragment, null, /*#__PURE__*/\n      _jsx(\"div\", { className: \"alert alert-warning\" }, void 0, /*#__PURE__*/\n      _jsx(Icon, { icon: \"exclamation-triangle\", size: \"2x\" }), /*#__PURE__*/\n      _jsx(\"p\", {}, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Warning: you are editing multiple entities. Fields marked with a\"), ' ', /*#__PURE__*/\n      _jsx(Icon, { icon: \"exclamation-triangle\" }), ' ', /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"will be updated with the same value.\"))), /*#__PURE__*/\n\n\n      _jsx(MetadataForm, {\n        id: \"multiEdit\",\n        model: formKey,\n        onSubmit: this.save,\n        thesauris: thesauris,\n        template: this.props.template,\n        changeTemplate: this.changeTemplate,\n        multipleEdition: true })));\n\n\n\n  }\n\n  renderEditingButtons() {\n    return /*#__PURE__*/(\n      React.createElement(React.Fragment, null, /*#__PURE__*/\n      _jsx(\"button\", {\n        type: \"button\",\n        onClick: this.cancel,\n        className: \"cancel-edit-metadata btn btn-primary\" }, void 0, /*#__PURE__*/\n\n      _jsx(Icon, { icon: \"times\" }), /*#__PURE__*/\n      _jsx(\"span\", { className: \"btn-label\" }, void 0, t('System', 'Cancel'))), /*#__PURE__*/\n\n      _jsx(\"button\", { type: \"submit\", form: \"multiEdit\", className: \"btn btn-success\" }, void 0, /*#__PURE__*/\n      _jsx(Icon, { icon: \"save\" }), /*#__PURE__*/\n      _jsx(\"span\", { className: \"btn-label\" }, void 0, t('System', 'Save')))));\n\n\n\n  }\n\n  render() {\n    const { open } = this.props;\n    return /*#__PURE__*/(\n      _jsx(SidePanel, { open: open, className: \"multi-edit\" }, void 0, /*#__PURE__*/\n      _jsx(\"div\", { className: \"sidepanel-header\" }, void 0, /*#__PURE__*/\n      _jsx(\"button\", { type: \"button\", className: \"closeSidepanel close-modal\", onClick: this.close }, void 0, /*#__PURE__*/\n      _jsx(Icon, { icon: \"times\" }))), /*#__PURE__*/\n\n\n      _jsx(\"div\", { className: \"sidepanel-body\" }, void 0, this.renderEditingForm()), /*#__PURE__*/\n      _jsx(\"div\", { className: \"sidepanel-footer\" }, void 0, this.renderEditingButtons())));\n\n\n  }}\n\n\nSemanticSearchMultieditPanel.defaultProps = {\n  template: null,\n  open: false };\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nSemanticSearchMultieditPanel.contextTypes = {\n  confirm: PropTypes.func };\n\n\nexport const mapStateToProps = (state) => {\n  const entities = state.semanticSearch.multiedit;\n  return {\n    template: commonTemplateSelector(state),\n    thesauris: state.thesauris,\n    entities,\n    open: Boolean(entities.size),\n    formState: state.semanticSearch.multipleEditForm };\n\n};\n\nexport function mapDispatchToProps(dispatch, props) {\n  return bindActionCreators(\n  {\n    loadForm: metadataActions.loadTemplate,\n    resetForm: metadataActions.resetReduxForm,\n    setEntities: setEditSearchEntities,\n    getSearch,\n    multipleUpdate: metadataActions.multipleUpdate },\n\n  wrapDispatch(dispatch, props.storeKey));\n\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SemanticSearchMultieditPanel);","function ownKeys(object, enumerableOnly) {var keys = Object.keys(object);if (Object.getOwnPropertySymbols) {var symbols = Object.getOwnPropertySymbols(object);enumerableOnly && (symbols = symbols.filter(function (sym) {return Object.getOwnPropertyDescriptor(object, sym).enumerable;})), keys.push.apply(keys, symbols);}return keys;}function _objectSpread(target) {for (var i = 1; i < arguments.length; i++) {var source = null != arguments[i] ? arguments[i] : {};i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {_defineProperty(target, key, source[key]);}) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));});}return target;}function _defineProperty(obj, key, value) {if (key in obj) {Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });} else {obj[key] = value;}return obj;}var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport { Helmet } from 'react-helmet';\nimport { RowList } from \"../../Layout/Lists\";\nimport Doc from \"../../Library/components/Doc\";\nimport * as semanticSearchActions from \"../actions/actions\";\nimport Immutable from 'immutable';\nimport { Translate, t } from \"../../I18N\";\nimport SearchDescription from \"../../Library/components/SearchDescription\";\nimport { Icon } from \"../../UI\";\nimport ResultsSidePanel from \"./ResultsSidePanel\";\nimport SemanticSearchMultieditPanel from \"./SemanticSearchMultieditPanel\";\n\nfunction renderAditionalText(doc) {\n  const resultsSize = doc.getIn(['semanticSearch', 'totalResults']);\n  const aboveThreshold = doc.getIn(['semanticSearch', 'numRelevant']);\n  const percentage = doc.getIn(['semanticSearch', 'relevantRate']) * 100;\n\n  return /*#__PURE__*/(\n    _jsx(\"div\", { className: \"item-metadata\" }, void 0, /*#__PURE__*/\n    _jsx(\"div\", { className: \"metadata-type-text\" }, void 0, /*#__PURE__*/\n    _jsx(\"div\", {}, void 0, /*#__PURE__*/\n    _jsx(Translate, {}, void 0, \"Sentences above threshold\")), /*#__PURE__*/\n\n    _jsx(\"div\", {}, void 0,\n    aboveThreshold, \" \", /*#__PURE__*/_jsx(Translate, {}, void 0, \"out of\"), \" \", resultsSize, \" (\", percentage.toFixed(2), \"%)\"))));\n\n\n\n\n}\n\nexport class SemanticSearchResults extends Component {\n  constructor(props) {\n    super(props);\n    this.state = { page: 1 };\n    this.onClick = this.onClick.bind(this);\n    this.onLoadMoreClick = this.onLoadMoreClick.bind(this);\n    this.multiEdit = this.multiEdit.bind(this);\n  }\n\n  shouldComponentUpdate(nextProps) {\n    const { items, filters, isEmpty, searchTerm } = this.props;\n    return (\n      !Immutable.is(nextProps.items, items) ||\n      Boolean(nextProps.filters.threshold !== filters.threshold) ||\n      Boolean(nextProps.filters.minRelevantSentences !== filters.minRelevantSentences) ||\n      Boolean(nextProps.isEmpty !== isEmpty) ||\n      Boolean(nextProps.searchTerm !== searchTerm));\n\n  }\n\n  componentDidUpdate(prevProps) {\n    const { filters, searchId } = this.props;\n    if (\n    filters.minRelevantSentences !== prevProps.filters.minRelevantSentences ||\n    filters.threshold !== prevProps.filters.threshold)\n    {\n      this.props.getSearch(searchId, filters);\n    }\n  }\n\n  onClick(_e, doc) {\n    this.props.selectSemanticSearchDocument(doc);\n  }\n\n  onLoadMoreClick() {\n    const { searchId, filters } = this.props;\n    const { page } = this.state;\n    const limit = 30;\n    const skip = page * limit;\n    const args = _objectSpread(_objectSpread({}, filters), {}, { skip, limit });\n    this.setState({ page: page + 1 });\n    this.props.getMoreSearchResults(searchId, args);\n  }\n\n  multiEdit() {\n    const { editSearchEntities: edit, filters, searchId } = this.props;\n    edit(searchId, filters);\n  }\n\n  render() {\n    const { items, isEmpty, searchTerm, totalCount, query, searchId } = this.props;\n    return /*#__PURE__*/(\n      _jsx(\"div\", { className: \"row panels-layout\" }, void 0,\n      isEmpty && /*#__PURE__*/\n      React.createElement(React.Fragment, null, /*#__PURE__*/\n      _jsx(\"p\", {}, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Search not found\")), /*#__PURE__*/\n\n      _jsx(Helmet, {}, void 0, /*#__PURE__*/\n      _jsx(\"title\", {}, void 0, t('System', 'Search not found', null, false)))),\n\n\n\n      !isEmpty && /*#__PURE__*/\n      React.createElement(React.Fragment, null, /*#__PURE__*/\n      _jsx(Helmet, {}, void 0, /*#__PURE__*/\n      _jsx(\"title\", {}, void 0, `${searchTerm} - Semantic search results`)), /*#__PURE__*/\n\n      _jsx(\"main\", { className: \"semantic-search-results-viewer document-viewer with-panel\" }, void 0, /*#__PURE__*/\n      _jsx(\"div\", {}, void 0, /*#__PURE__*/\n      _jsx(\"h3\", {}, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Semantic search\"), \":\", ' ', /*#__PURE__*/\n      _jsx(SearchDescription, { searchTerm: searchTerm, query: query })), /*#__PURE__*/\n\n      _jsx(\"button\", {\n        type: \"button\",\n        onClick: this.multiEdit,\n        className: \"btn btn-success edit-semantic-search\" }, void 0, /*#__PURE__*/\n\n      _jsx(Icon, { icon: \"pencil-alt\" }), \"\\xA0\", /*#__PURE__*/\n\n      _jsx(Translate, {}, void 0, \"Edit all documents matching this criteria\"))), /*#__PURE__*/\n\n\n      _jsx(\"div\", { className: \"documents-counter\" }, void 0, /*#__PURE__*/\n      _jsx(\"span\", { className: \"documents-counter-label\" }, void 0, /*#__PURE__*/\n      _jsx(\"b\", {}, void 0, totalCount), \" \", /*#__PURE__*/_jsx(Translate, {}, void 0, \"documents\"))), /*#__PURE__*/\n\n\n      _jsx(RowList, {}, void 0,\n      items.map((doc) => /*#__PURE__*/\n      _jsx(Doc, {\n        doc: doc,\n\n        onClick: this.onClick,\n        additionalText: renderAditionalText(doc) }, doc.get('sharedId')))), /*#__PURE__*/\n\n\n\n      _jsx(\"p\", { className: \"col-sm-12 text-center documents-counter\" }, void 0, /*#__PURE__*/\n      _jsx(\"b\", {}, void 0, \" \", items.size, \" \"), \" \", /*#__PURE__*/_jsx(Translate, {}, void 0, \"of\"), /*#__PURE__*/\n      _jsx(\"b\", {}, void 0, \" \", totalCount, \" \"), \" \", /*#__PURE__*/_jsx(Translate, {}, void 0, \"documents\")), /*#__PURE__*/\n\n      _jsx(\"div\", { className: \"col-sm-12 text-center documents-counter\" }, void 0, /*#__PURE__*/\n      _jsx(\"button\", {\n        onClick: this.onLoadMoreClick,\n        type: \"button\",\n        className: \"btn btn-default btn-load-more\" }, void 0, /*#__PURE__*/\n\n      _jsx(\"span\", { \"no-translate\": true }, void 0, \"30\"), \" \", /*#__PURE__*/_jsx(Translate, {}, void 0, \"x more\")))), /*#__PURE__*/\n\n\n\n      _jsx(ResultsSidePanel, {}), /*#__PURE__*/\n      _jsx(SemanticSearchMultieditPanel, {\n        searchId: searchId,\n        formKey: \"semanticSearch.multipleEdit\" }))));\n\n\n\n\n\n  }}\n\n\nSemanticSearchResults.defaultProps = {\n  searchTerm: '',\n  items: Immutable.fromJS([]),\n  query: { searchTerm: '' },\n  searchId: '' };\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nexport const mapStateToProps = (state) => {\n  const { search } = state.semanticSearch;\n  const searchTerm = search.get('searchTerm');\n  const items = search.get('results');\n  const filters = state.semanticSearch.resultsFilters;\n  const isEmpty = search.size === 0;\n  const { _id, query } = search.toJS();\n\n  return {\n    searchId: _id,\n    query: query || { searchTerm: '' },\n    totalCount: isEmpty ? 0 : search.get('documents').size,\n    searchTerm,\n    filters,\n    items,\n    isEmpty };\n\n};\n\nexport function mapDispatchToProps(dispatch) {\n  return bindActionCreators(semanticSearchActions, dispatch);\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SemanticSearchResults);","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import React from 'react';\n\nimport { actions } from \"../BasicReducer\";\nimport RouteHandler from \"../App/RouteHandler\";\nimport SearchButton from \"../Library/components/SearchButton\";\n\nimport ResultsViewer from \"./components/SemanticSearchResults\";\nimport semanticSearchAPI from \"./SemanticSearchAPI\";\n\nexport default class SemanticSearchResultsView extends RouteHandler {\n  static async requestState(requestParams, state) {\n    const filters = state.semanticSearch ?\n    state.semanticSearch.resultsFilters :\n    { threshold: 0.4, minRelevantSentences: 5 };\n    const args = requestParams.add(filters);\n    const search = await semanticSearchAPI.getSearch(args);\n    return [actions.set('semanticSearch/search', search)];\n  }\n\n  static renderTools() {\n    return /*#__PURE__*/(\n      _jsx(\"div\", { className: \"searchBox\" }, void 0, /*#__PURE__*/\n      _jsx(SearchButton, { storeKey: \"library\" })));\n\n\n  }\n\n  render() {\n    return /*#__PURE__*/_jsx(ResultsViewer, {});\n  }}","import api from \"../utils/api\";\n\nexport default {\n  save(requestParams) {\n    return api.post('users', requestParams).then((response) => response.json);\n  },\n\n  new(requestParams) {\n    return api.post('users/new', requestParams).then((response) => response.json);\n  },\n\n  currentUser(requestParams) {\n    return api.get('user', requestParams).then((response) => response.json);\n  },\n\n  get(requestParams) {\n    return api.get('users', requestParams).then((response) => response.json);\n  },\n\n  getById(requestParams) {\n    return api.get('users', requestParams).then((response) => response.json[0]);\n  },\n\n  delete(requestParams) {\n    return api.delete('users', requestParams).then((response) => response.json);\n  } };","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import React, { useState } from 'react';\nimport { Icon } from \"../../../UI\";\n\nimport { Translate } from \"../../../I18N\";\nimport { Pill } from \"../../../Metadata/components/Pill\";\n\n\n\n\n\n\n\n\nexport const UserGroupList = ({\n  userGroups,\n  handleSelect,\n  handleAddGroup,\n  className }) =>\n{\n  const [selectedId, setSelectedId] = useState('');\n  const addGroup = () => {\n    setSelectedId(undefined);\n    handleAddGroup();\n  };\n  const selectRow = (userGroup) => {var _userGroup$_id;\n    setSelectedId((_userGroup$_id = userGroup._id) === null || _userGroup$_id === void 0 ? void 0 : _userGroup$_id.toString());\n    handleSelect(userGroup);\n  };\n  return /*#__PURE__*/(\n    _jsx(\"div\", { className: \"group-list\" }, void 0, /*#__PURE__*/\n    _jsx(\"table\", { className: className }, void 0, /*#__PURE__*/\n    _jsx(\"thead\", {}, void 0, /*#__PURE__*/\n    _jsx(\"tr\", {}, void 0, /*#__PURE__*/\n    _jsx(\"th\", {}, void 0, /*#__PURE__*/\n    _jsx(Translate, {}, void 0, \"Groups\")), /*#__PURE__*/\n\n    _jsx(\"th\", { align: \"center\" }, void 0, /*#__PURE__*/\n    _jsx(Translate, {}, void 0, \"Members\")))), /*#__PURE__*/\n\n\n\n    _jsx(\"tbody\", {}, void 0,\n    userGroups.map((userGroup) => /*#__PURE__*/\n    _jsx(\"tr\", {\n      className: selectedId === userGroup._id ? 'selected' : '',\n\n      onClick: () => selectRow(userGroup) }, userGroup._id, /*#__PURE__*/\n\n    _jsx(\"td\", {}, void 0, userGroup.name), /*#__PURE__*/\n    _jsx(\"td\", { align: \"center\" }, void 0, /*#__PURE__*/\n    _jsx(Pill, { color: \"white\" }, void 0, /*#__PURE__*/\n    React.createElement(React.Fragment, null, /*#__PURE__*/\n    _jsx(Icon, { icon: \"users\" }),\n    ` ${userGroup.members.length}`))))))), /*#__PURE__*/\n\n\n\n\n\n\n\n    _jsx(\"div\", { className: `settings-footer ${className}` }, void 0, /*#__PURE__*/\n    _jsx(\"button\", { type: \"button\", className: \"btn btn-default\", onClick: addGroup }, void 0, /*#__PURE__*/\n    _jsx(Icon, { icon: \"plus\" }), /*#__PURE__*/\n    _jsx(\"span\", { className: \"btn-label\" }, void 0, /*#__PURE__*/\n    _jsx(Translate, {}, void 0, \"Add group\"))))));\n\n\n\n\n\n};","function ownKeys(object, enumerableOnly) {var keys = Object.keys(object);if (Object.getOwnPropertySymbols) {var symbols = Object.getOwnPropertySymbols(object);enumerableOnly && (symbols = symbols.filter(function (sym) {return Object.getOwnPropertyDescriptor(object, sym).enumerable;})), keys.push.apply(keys, symbols);}return keys;}function _objectSpread(target) {for (var i = 1; i < arguments.length; i++) {var source = null != arguments[i] ? arguments[i] : {};i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {_defineProperty(target, key, source[key]);}) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));});}return target;}function _defineProperty(obj, key, value) {if (key in obj) {Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });} else {obj[key] = value;}return obj;}\n\n\nimport { actions } from \"../../../../BasicReducer\";\nimport { RequestParams } from \"../../../../utils/RequestParams\";\nimport { notificationActions } from \"../../../../Notifications\";\nimport { ensure } from \"../../../../../shared/tsUtils\";\nimport { deleteGroup, getGroups, saveGroup } from \"../UserGroupsAPI\";\n\nexport function loadUserGroups() {\n  return async (dispatch) => {\n    const userGroups = await getGroups(new RequestParams());\n    dispatch(actions.set('userGroups', userGroups));\n  };\n}\n\nexport function saveUserGroup(userGroup) {\n  return async (dispatch) => {\n    const savedUserGroup = await saveGroup(new RequestParams(userGroup));\n    const userGroupToDispatch = _objectSpread(_objectSpread({}, savedUserGroup), {}, { members: userGroup.members });\n    if (userGroup._id) {\n      dispatch(actions.update('userGroups', userGroupToDispatch));\n      dispatch(notificationActions.notify('Group updated', 'success'));\n    } else {\n      dispatch(actions.push('userGroups', userGroupToDispatch));\n      dispatch(notificationActions.notify('Group created', 'success'));\n    }\n  };\n}\n\nexport function deleteUserGroup(userGroup) {\n  return async (dispatch) => {\n    await deleteGroup(new RequestParams({ _id: ensure(userGroup._id) }));\n    dispatch(actions.remove('userGroups', userGroup));\n    dispatch(notificationActions.notify('Group deleted', 'success'));\n  };\n}","import api from \"../../../utils/api\";\n\n\n\n\nconst getGroups = async (requestParams) => {\n  const response = await api.get('usergroups', requestParams);\n  return response.json;\n};\nconst saveGroup = async (requestParams) => {\n  const response = await api.post('usergroups', requestParams);\n  return response.json;\n};\nconst deleteGroup = async (requestParams) => {\n  const response = await api.delete('usergroups', requestParams);\n  return response.json;\n};\n\nexport { getGroups, saveGroup, deleteGroup };","function ownKeys(object, enumerableOnly) {var keys = Object.keys(object);if (Object.getOwnPropertySymbols) {var symbols = Object.getOwnPropertySymbols(object);enumerableOnly && (symbols = symbols.filter(function (sym) {return Object.getOwnPropertyDescriptor(object, sym).enumerable;})), keys.push.apply(keys, symbols);}return keys;}function _objectSpread(target) {for (var i = 1; i < arguments.length; i++) {var source = null != arguments[i] ? arguments[i] : {};i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {_defineProperty(target, key, source[key]);}) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));});}return target;}function _defineProperty(obj, key, value) {if (key in obj) {Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });} else {obj[key] = value;}return obj;}import { actions as basicActions } from \"../../BasicReducer\";\nimport { notificationActions } from \"../../Notifications\";\nimport { RequestParams } from \"../../utils/RequestParams\";\n\n\n\n\nimport UsersAPI from \"../UsersAPI\";\n\nexport function deleteUser(user) {\n  return (dispatch) =>\n  UsersAPI.delete(new RequestParams(user)).then(() => {\n    dispatch(basicActions.remove('users', user));\n    dispatch(notificationActions.notify('Deleted successfully.', 'success'));\n  });\n}\n\nexport function saveUser(user) {\n  return async (dispatch) => {\n    await UsersAPI.save(new RequestParams(user));\n    const userToNotify = _objectSpread({}, user);\n    delete userToNotify.password;\n    dispatch(basicActions.update('users', userToNotify));\n    dispatch(notificationActions.notify('Saved successfully.', 'success'));\n  };\n}\n\nexport function newUser(user) {\n  return async (dispatch) => {\n    const createdUser = await UsersAPI.new(new RequestParams(user));\n    const userToNotify = _objectSpread(_objectSpread({}, user), createdUser);\n    delete userToNotify.password;\n    dispatch(basicActions.push('users', userToNotify));\n    dispatch(notificationActions.notify('Created successfully.', 'success'));\n  };\n}\n\nexport function loadUsers() {\n  return async (dispatch) => {\n    const users = await UsersAPI.get(new RequestParams());\n    dispatch(basicActions.set('users', users));\n  };\n}","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}function ownKeys(object, enumerableOnly) {var keys = Object.keys(object);if (Object.getOwnPropertySymbols) {var symbols = Object.getOwnPropertySymbols(object);enumerableOnly && (symbols = symbols.filter(function (sym) {return Object.getOwnPropertyDescriptor(object, sym).enumerable;})), keys.push.apply(keys, symbols);}return keys;}function _objectSpread(target) {for (var i = 1; i < arguments.length; i++) {var source = null != arguments[i] ? arguments[i] : {};i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {_defineProperty(target, key, source[key]);}) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));});}return target;}function _defineProperty(obj, key, value) {if (key in obj) {Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });} else {obj[key] = value;}return obj;}import React, { useState } from 'react';\nimport { Icon } from \"../../../UI\";\nimport { useForm } from 'react-hook-form';\n\nimport { t, Translate } from \"../../../I18N\";\nimport { ConfirmButton, SidePanel } from \"../../../Layout\";\nimport { MultiSelect } from \"../../../Forms/components/MultiSelect\";\n\n\n\n\n\n\n\n\n\n\n\n\nconst sortByName = (members) =>\nmembers.sort((m1, m2) => (m1.username || '').localeCompare(m2.username || ''));\n\nconst mapUserIds = (members) =>\nmembers.map((member) => member.refId ? member.refId.toString() : '');\n\nexport const UserGroupSidePanel = ({\n  userGroup,\n  users,\n  userGroups,\n  opened,\n  closePanel,\n  onSave,\n  onDelete }) =>\n{\n  const [selectedUsers, setSelectedUsers] = useState(mapUserIds(userGroup.members));\n  const { register, handleSubmit, errors } = useForm({ defaultValues: userGroup });\n  const availableUsers = sortByName(users);\n\n  const saveGroup = (groupToSave) => {\n    const updatedMembers = users.\n    filter((user) => selectedUsers.includes(user._id)).\n    map((user) => ({\n      refId: user._id }));\n\n    onSave(_objectSpread(_objectSpread({}, groupToSave), {}, { members: [...updatedMembers] }));\n  };\n\n  const isUnique = (nameVal) =>\n  !userGroups.find(\n  (existingGroup) =>\n  existingGroup._id !== userGroup._id &&\n  existingGroup.name.trim().toLowerCase() === nameVal.trim().toLowerCase());\n\n\n  return /*#__PURE__*/(\n    _jsx(SidePanel, { open: opened }, void 0, /*#__PURE__*/\n    _jsx(\"div\", { className: \"sidepanel-header\" }, void 0, /*#__PURE__*/\n    _jsx(Translate, {}, void 0, `${userGroup._id ? 'Edit' : 'Add'} Group`)), /*#__PURE__*/\n\n    _jsx(\"div\", { className: \"sidepanel-body\" }, void 0, /*#__PURE__*/\n    _jsx(\"form\", { id: \"userGroupFrom\", className: \"user-group-form\", onSubmit: handleSubmit(saveGroup) }, void 0, /*#__PURE__*/\n    React.createElement(\"input\", { type: \"hidden\", name: \"_id\", ref: register }), /*#__PURE__*/\n    _jsx(\"div\", { id: \"name_field\", className: \"form-group nested-selector\" }, void 0, /*#__PURE__*/\n    _jsx(\"label\", {}, void 0, /*#__PURE__*/\n    _jsx(Translate, {}, void 0, \"Name of the group\")), /*#__PURE__*/\n\n    React.createElement(\"input\", {\n      type: \"text\",\n      className: \"form-control\",\n      autoComplete: \"off\",\n      name: \"name\",\n      ref: register({\n        required: true,\n        validate: isUnique,\n        maxLength: 50,\n        minLength: 3 }) }),\n\n\n    errors.name && /*#__PURE__*/\n    _jsx(\"div\", { className: \"validation-error\" }, void 0, /*#__PURE__*/\n    _jsx(Icon, { icon: \"exclamation-triangle\", size: \"xs\" }),\n    errors.name.type === 'required' && /*#__PURE__*/_jsx(Translate, {}, void 0, \"Name is required\"),\n    errors.name.type === 'validate' && /*#__PURE__*/_jsx(Translate, {}, void 0, \"Duplicated name\"),\n    errors.name.type === 'maxLength' && /*#__PURE__*/_jsx(Translate, {}, void 0, \"Name is too long\"),\n    errors.name.type === 'minLength' && /*#__PURE__*/_jsx(Translate, {}, void 0, \"Name is too short\"))), /*#__PURE__*/\n\n\n\n    _jsx(\"div\", { className: \"search-user\" }, void 0, /*#__PURE__*/\n    _jsx(MultiSelect, {\n      placeholder: t('System', 'Add users', null, false),\n      options: availableUsers,\n      optionsLabel: \"username\",\n      optionsValue: \"_id\",\n      value: selectedUsers,\n      onChange: (usersIds) => {\n        setSelectedUsers(usersIds);\n      },\n      optionsToShow: 8,\n      sortbyLabel: true })))), /*#__PURE__*/\n\n\n\n\n    _jsx(\"div\", { className: \"sidepanel-footer\" }, void 0,\n    userGroup._id && /*#__PURE__*/\n    _jsx(\"div\", { className: \"btn-cluster\" }, void 0, /*#__PURE__*/\n    _jsx(ConfirmButton, {\n      id: \"deleteBtn\",\n      className: \"btn btn-danger\",\n      action: () => onDelete(userGroup) }, void 0, /*#__PURE__*/\n\n    _jsx(Icon, { icon: \"trash-alt\" }), /*#__PURE__*/\n    _jsx(\"span\", { className: \"btn-label\" }, void 0, /*#__PURE__*/\n    _jsx(Translate, {}, void 0, \"Delete\")))), /*#__PURE__*/\n\n\n\n\n    _jsx(\"div\", { className: \"btn-cluster content-right\" }, void 0, /*#__PURE__*/\n    _jsx(\"button\", {\n      id: \"discardChangesBtn\",\n      type: \"button\",\n      className: \"btn btn-default\",\n      onClick: closePanel,\n      \"aria-label\": \"Close side panel\" }, void 0, /*#__PURE__*/\n\n    _jsx(\"span\", { className: \"btn-label\" }, void 0, /*#__PURE__*/\n    _jsx(Translate, {}, void 0, \"Cancel\"))), /*#__PURE__*/\n\n\n    _jsx(\"button\", {\n      id: \"saveChangesBtn\",\n      type: \"submit\",\n      form: \"userGroupFrom\",\n      className: \"btn btn-success\" }, void 0, /*#__PURE__*/\n\n    _jsx(\"span\", { id: \"submitLabel\", className: \"btn-label\" }, void 0, /*#__PURE__*/\n    _jsx(Translate, {}, void 0, \"Save\")))))));\n\n\n\n\n\n\n};","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import React, { useEffect, useState } from 'react';\nimport { connect } from 'react-redux';\n\n\n\nimport { UserGroupList } from \"./UserGroupList\";\nimport {\ndeleteUserGroup,\nloadUserGroups,\nsaveUserGroup } from \"./actions/actions\";\n\nimport { loadUsers } from \"../../actions/actions\";\nimport { UserGroupSidePanel } from \"./UserGroupSidePanel\";\n\n\n\n\n\n\n\n\n\n\nconst UserGroupsComponent = ({\n  userGroups,\n  users,\n  loadUserGroups: loadGroups,\n  saveUserGroup: saveGroup,\n  deleteUserGroup: deleteGroup,\n  loadUsers: loadAllUsers }) =>\n{\n  const [sidePanelOpened, setSidePanelOpened] = useState(false);\n  const [selectedGroup, setSelectedGroup] = useState();\n  const groupList = userGroups ? userGroups.toJS() : [];\n  const userList = users ? users.toJS() : [];\n\n  useEffect(() => {\n    if (groupList.length === 0) {\n      loadGroups().then();\n    }\n  }, []);\n\n  function closeSidePanel() {\n    setSelectedGroup(undefined);\n    setSidePanelOpened(false);\n  }\n\n  const handlers = {\n    handleSelect: (userGroup) => {\n      setSelectedGroup(userGroup);\n      setSidePanelOpened(true);\n    },\n    handleAddGroup: () => {\n      setSelectedGroup({ name: '', members: [] });\n      setSidePanelOpened(true);\n    },\n    handleSave: async (userGroup) => {\n      if (!userGroup._id) {\n        delete userGroup._id;\n      }\n      await saveGroup(userGroup);\n      await loadAllUsers();\n      closeSidePanel();\n    },\n    handleDelete: async (userGroup) => {\n      await deleteGroup(userGroup);\n      await loadAllUsers();\n      closeSidePanel();\n    } };\n\n\n  return /*#__PURE__*/(\n    React.createElement(React.Fragment, null, /*#__PURE__*/\n    _jsx(UserGroupList, {\n      userGroups: groupList,\n      handleSelect: handlers.handleSelect,\n      handleAddGroup: handlers.handleAddGroup,\n      className: sidePanelOpened ? 'with-sidepanel' : '' }),\n\n    selectedGroup && /*#__PURE__*/\n    _jsx(UserGroupSidePanel, {\n\n      userGroup: selectedGroup,\n      users: userList,\n      userGroups: groupList,\n      opened: sidePanelOpened,\n      closePanel: closeSidePanel,\n      onSave: handlers.handleSave,\n      onDelete: handlers.handleDelete }, selectedGroup._id ? selectedGroup._id.toString() : '')));\n\n\n\n\n};\n\nconst mapStateToProps = (state) => ({\n  userGroups: state.userGroups,\n  users: state.users });\n\n\nconst mapDispatchToProps = {\n  loadUsers,\n  loadUserGroups,\n  saveUserGroup,\n  deleteUserGroup };\n\n\nexport const UserGroups = connect(mapStateToProps, mapDispatchToProps)(UserGroupsComponent);","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import React, { useState } from 'react';\nimport { Translate } from \"../../I18N\";\nimport { Icon } from \"../../UI\";\nimport { Pill } from \"../../Metadata/components/Pill\";\n\nimport { roleTranslationKey } from \"../UserManagement\";\n\n\n\n\n\n\n\n\nexport const UserList = ({ users, handleSelect, handleAddUser, className }) => {\n  const [selectedId, setSelectedId] = useState();\n  const selectRow = (user) => {var _user$_id;\n    handleSelect(user);\n    setSelectedId((_user$_id = user._id) === null || _user$_id === void 0 ? void 0 : _user$_id.toString());\n  };\n  const addUser = () => {\n    setSelectedId(undefined);\n    handleAddUser();\n  };\n  const sortedUsers = users.sort((a, b) => a.username.localeCompare(b.username));\n  return /*#__PURE__*/(\n    _jsx(\"div\", { className: \"user-list\" }, void 0, /*#__PURE__*/\n    _jsx(\"table\", { className: className }, void 0, /*#__PURE__*/\n    _jsx(\"thead\", {}, void 0, /*#__PURE__*/\n    _jsx(\"tr\", {}, void 0, /*#__PURE__*/\n    _jsx(\"th\", {}, void 0, /*#__PURE__*/\n    _jsx(Translate, {}, void 0, \"Name\")), /*#__PURE__*/\n\n    _jsx(\"th\", {}, void 0, /*#__PURE__*/\n    _jsx(Translate, {}, void 0, \"Protection\")), /*#__PURE__*/\n\n    _jsx(\"th\", {}, void 0, /*#__PURE__*/\n    _jsx(Translate, {}, void 0, \"Role\")), /*#__PURE__*/\n\n    _jsx(\"th\", {}, void 0, /*#__PURE__*/\n    _jsx(Translate, {}, void 0, \"Groups\")))), /*#__PURE__*/\n\n\n\n    _jsx(\"tbody\", {}, void 0,\n    sortedUsers.map((user) => {var _user$_id2, _user$groups;return /*#__PURE__*/(\n        _jsx(\"tr\", {\n          className: selectedId === user._id ? 'selected' : '',\n\n          onClick: () => selectRow(user) }, (_user$_id2 = user._id) === null || _user$_id2 === void 0 ? void 0 : _user$_id2.toString(), /*#__PURE__*/\n\n        _jsx(\"td\", {}, void 0, user.username), /*#__PURE__*/\n        _jsx(\"td\", {}, void 0, /*#__PURE__*/\n        _jsx(Pill, { color: user.using2fa ? 'palegreen' : 'lightgray' }, void 0, /*#__PURE__*/\n        _jsx(Translate, { translationKey: \"Password\" }, void 0, \"Password\"),\n        user.using2fa && ' + 2FA')), /*#__PURE__*/\n\n\n        _jsx(\"td\", {}, void 0, /*#__PURE__*/\n        _jsx(Pill, { color: \"white\" }, void 0, /*#__PURE__*/\n        _jsx(Translate, { translationKey: roleTranslationKey[user.role] }, void 0, user.role))), /*#__PURE__*/\n\n\n        _jsx(\"td\", {}, void 0, (_user$groups =\n        user.groups) === null || _user$groups === void 0 ? void 0 : _user$groups.map((group) => {var _group$_id;return /*#__PURE__*/(\n            _jsx(Pill, { color: \"white\" }, (_group$_id = group._id) === null || _group$_id === void 0 ? void 0 : _group$_id.toString(), /*#__PURE__*/\n            React.createElement(React.Fragment, null, /*#__PURE__*/\n            _jsx(Icon, { icon: \"users\" }),\n            ` ${group.name}`)));}))));}))), /*#__PURE__*/\n\n\n\n\n\n\n\n\n    _jsx(\"div\", { className: `settings-footer ${className}` }, void 0, /*#__PURE__*/\n    _jsx(\"button\", { type: \"button\", className: \"btn btn-default\", onClick: addUser }, void 0, /*#__PURE__*/\n    _jsx(Icon, { icon: \"plus\" }), /*#__PURE__*/\n    _jsx(\"span\", { className: \"btn-label\" }, void 0, /*#__PURE__*/\n    _jsx(Translate, {}, void 0, \"Add user\"))))));\n\n\n\n\n\n};","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import React from 'react';\nimport { Icon } from \"../../UI\";\nimport { Translate } from \"../../I18N\";\nimport Modal from \"../../Layout/Modal\";\n\n\n\n\n\n\n\n\n\nconst permissionsByRole = [\n{\n  label: 'Create new entities and upload documents',\n  roles: { admin: 'full', editor: 'full', collaborator: 'full' } },\n\n{\n  label: 'Create table of contents',\n  roles: { admin: 'full', editor: 'full', collaborator: 'full' } },\n\n{\n  label: 'View entities',\n  roles: { admin: 'full', editor: 'full', collaborator: 'partial' } },\n\n{\n  label: 'Edit metadata of entities',\n  roles: { admin: 'full', editor: 'full', collaborator: 'partial' } },\n\n{\n  label: 'Delete entities and documents',\n  roles: { admin: 'full', editor: 'full', collaborator: 'partial' } },\n\n{\n  label: 'Share edit access with other users',\n  roles: { admin: 'full', editor: 'full', collaborator: 'partial' } },\n\n{\n  label: 'Create connections and references',\n  roles: { admin: 'full', editor: 'full', collaborator: 'partial' } },\n\n{\n  label: 'Share entities with the public',\n  roles: { admin: 'full', editor: 'full', collaborator: 'none' } },\n\n{\n  label: 'Manage site settings and configuration',\n  roles: { admin: 'full', editor: 'none', collaborator: 'none' } },\n\n{\n  label: 'Add/delete users and assign roles',\n  roles: { admin: 'full', editor: 'none', collaborator: 'none' } },\n\n{\n  label: 'Configure filters',\n  roles: { admin: 'full', editor: 'none', collaborator: 'none' } },\n\n{\n  label: 'Add/edit translations',\n  roles: { admin: 'full', editor: 'none', collaborator: 'none' } },\n\n{\n  label: 'Configure templates ',\n  roles: { admin: 'full', editor: 'none', collaborator: 'none' } },\n\n{\n  label: 'Create and edit thesauri',\n  roles: { admin: 'full', editor: 'none', collaborator: 'none' } },\n\n{\n  label: 'Create connection types',\n  roles: { admin: 'full', editor: 'none', collaborator: 'none' } }];\n\n\n\nconst permissionIcons = {\n  full: { icon: 'check', className: 'label-success' },\n  partial: { icon: 'user-check', className: 'label-info' },\n  none: { icon: 'times', className: 'label-warning' } };\n\n\n\n\n\n\n\n\n\n\n\nexport const PermissionsList = ({\n  isOpen,\n  onClose,\n  rolePermissions = permissionsByRole }) => /*#__PURE__*/\n\n_jsx(Modal, { isOpen: isOpen, type: \"content\", className: \"permissions-modal\" }, void 0, /*#__PURE__*/\n_jsx(Modal.Body, {}, void 0, /*#__PURE__*/\n_jsx(\"table\", { className: \"permissions-list\" }, void 0, /*#__PURE__*/\n_jsx(\"thead\", {}, void 0, /*#__PURE__*/\n_jsx(\"tr\", {}, void 0, /*#__PURE__*/\n_jsx(\"th\", {}, void 0, /*#__PURE__*/\n_jsx(Translate, {}, void 0, \"Permission\")), /*#__PURE__*/\n\n_jsx(\"th\", {}, void 0, /*#__PURE__*/\n_jsx(Translate, {}, void 0, \"Collaborator\")), /*#__PURE__*/\n\n_jsx(\"th\", {}, void 0, /*#__PURE__*/\n_jsx(Translate, {}, void 0, \"Editor\")), /*#__PURE__*/\n\n_jsx(\"th\", {}, void 0, /*#__PURE__*/\n_jsx(Translate, {}, void 0, \"Admin\")))), /*#__PURE__*/\n\n\n\n_jsx(\"tbody\", {}, void 0,\nrolePermissions.map((permission) => /*#__PURE__*/\n_jsx(\"tr\", {}, permission.label, /*#__PURE__*/\n_jsx(\"td\", {}, void 0, /*#__PURE__*/\n_jsx(Translate, {}, void 0, permission.label)),\n\n['collaborator', 'editor', 'admin'].map((role) => {\n  const roleIcon =\n  permissionIcons[permission.roles[role]];\n  return /*#__PURE__*/(\n    _jsx(\"td\", {}, role, /*#__PURE__*/\n    _jsx(Icon, { icon: roleIcon.icon, className: roleIcon.className })));\n\n\n}))))), /*#__PURE__*/\n\n\n\n\n_jsx(\"div\", { className: \"legend\" }, void 0, /*#__PURE__*/\n_jsx(Translate, {}, void 0, \"Legend\"), /*#__PURE__*/\n_jsx(\"div\", { className: \"legend-item\" }, void 0, /*#__PURE__*/\n_jsx(Icon, { icon: \"user-check\", className: \"label-info\" }),\n'  ', /*#__PURE__*/\n_jsx(Translate, {}, void 0, \"Permission on entities explicitly shared with the user\")))), /*#__PURE__*/\n\n\n\n_jsx(Modal.Footer, {}, void 0, /*#__PURE__*/\n_jsx(\"button\", { type: \"button\", className: \"btn btn-default pristine\", onClick: onClose }, void 0, /*#__PURE__*/\n_jsx(Translate, {}, void 0, \"Close\"))));","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}function ownKeys(object, enumerableOnly) {var keys = Object.keys(object);if (Object.getOwnPropertySymbols) {var symbols = Object.getOwnPropertySymbols(object);enumerableOnly && (symbols = symbols.filter(function (sym) {return Object.getOwnPropertyDescriptor(object, sym).enumerable;})), keys.push.apply(keys, symbols);}return keys;}function _objectSpread(target) {for (var i = 1; i < arguments.length; i++) {var source = null != arguments[i] ? arguments[i] : {};i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {_defineProperty(target, key, source[key]);}) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));});}return target;}function _defineProperty(obj, key, value) {if (key in obj) {Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });} else {obj[key] = value;}return obj;}import React, { useState } from 'react';\nimport { useForm } from 'react-hook-form';\nimport { Icon } from \"../../UI\";\nimport { t, Translate } from \"../../I18N\";\nimport { ConfirmButton, SidePanel } from \"../../Layout\";\nimport { UserRole } from \"../../../shared/types/userSchema\";\n\nimport { MultiSelect } from \"../../Forms/components/MultiSelect\";\n\nimport { PermissionsList } from \"./PermissionsList\";\nimport { roleTranslationKey } from \"../UserManagement\";\n\n\n\n\n\n\n\n\n\n\n\n\n\nexport const UserSidePanel = ({\n  user,\n  users,\n  groups,\n  opened,\n  closePanel,\n  onSave,\n  onDelete,\n  onReset2fa,\n  onResetPassword }) =>\n{\n  const [permissionsModalOpened, setPermissionsModalOpened] = useState(false);\n  const [selectedGroups, setSelectedGroups] = useState(\n  user.groups ? user.groups.map((group) => group._id.toString()) : []);\n\n  const { register, handleSubmit, errors } = useForm({ defaultValues: user });\n  const availableGroups = groups;\n  const userRoles = Object.values(UserRole).map((role) => t('System', role, null, false));\n\n  const saveUser = (userToSave) => {\n    const updatedGroups = groups.\n    filter((group) => selectedGroups.includes(group._id)).\n    map((group) => ({\n      _id: group._id,\n      name: group.name }));\n\n    onSave(_objectSpread(_objectSpread({}, userToSave), {}, { groups: updatedGroups }));\n  };\n  const isUnique = (nameVal) =>\n  !users.find(\n  (existingUser) => {var _existingUser$usernam, _existingUser$email;return (\n      existingUser._id !== user._id && (\n      ((_existingUser$usernam = existingUser.username) === null || _existingUser$usernam === void 0 ? void 0 : _existingUser$usernam.trim().toLowerCase()) === nameVal.trim().toLowerCase() ||\n      ((_existingUser$email = existingUser.email) === null || _existingUser$email === void 0 ? void 0 : _existingUser$email.trim().toLowerCase()) === nameVal.trim().toLowerCase()));});\n\n  const togglePermissionList = () => {\n    setPermissionsModalOpened(!permissionsModalOpened);\n  };\n\n  return /*#__PURE__*/(\n    _jsx(SidePanel, { open: opened }, void 0, /*#__PURE__*/\n    _jsx(\"div\", { className: \"sidepanel-header\" }, void 0, /*#__PURE__*/\n    _jsx(Translate, {}, void 0, `${user._id ? 'Edit' : 'Add'} User`)), /*#__PURE__*/\n\n    _jsx(\"div\", { className: `sidepanel-body ${user._id ? 'footer-extra-row' : ''}` }, void 0, /*#__PURE__*/\n    _jsx(\"form\", { id: \"userFrom\", className: \"user-form\", onSubmit: handleSubmit(saveUser) }, void 0, /*#__PURE__*/\n    React.createElement(\"input\", { type: \"hidden\", name: \"_id\", ref: register }), /*#__PURE__*/\n    React.createElement(\"input\", { type: \"hidden\", name: \"using2fa\", ref: register }), /*#__PURE__*/\n\n    _jsx(\"div\", { id: \"email_field\", className: \"form-group nested-selector\" }, void 0, /*#__PURE__*/\n    _jsx(\"label\", {}, void 0, /*#__PURE__*/\n    _jsx(Translate, {}, void 0, \"Email\")), /*#__PURE__*/\n\n    React.createElement(\"input\", {\n      type: \"email\",\n      className: \"form-control\",\n      autoComplete: \"off\",\n      name: \"email\",\n      ref: register({\n        required: true,\n        validate: isUnique,\n        maxLength: 256 }) }),\n\n\n    errors.email && /*#__PURE__*/\n    _jsx(\"div\", { className: \"validation-error\" }, void 0, /*#__PURE__*/\n    _jsx(Icon, { icon: \"exclamation-triangle\", size: \"xs\" }),\n    errors.email.type === 'required' && /*#__PURE__*/_jsx(Translate, {}, void 0, \"Email is required\"),\n    errors.email.type === 'validate' && /*#__PURE__*/_jsx(Translate, {}, void 0, \"Duplicated email\"),\n    errors.email.type === 'pattern' && /*#__PURE__*/_jsx(Translate, {}, void 0, \"Invalid email\"))), /*#__PURE__*/\n\n\n\n    _jsx(\"div\", { id: \"role_field\", className: \"form-group nested-selector\" }, void 0, /*#__PURE__*/\n    _jsx(\"div\", {}, void 0, /*#__PURE__*/\n    _jsx(\"label\", {}, void 0, /*#__PURE__*/\n    _jsx(Translate, {}, void 0, \"Role\")), /*#__PURE__*/\n\n    _jsx(\"button\", {\n      id: \"role-info\",\n      className: \"role-info\",\n      type: \"button\",\n      onClick: togglePermissionList }, void 0, /*#__PURE__*/\n\n    _jsx(Icon, { icon: \"info-circle\" }))), /*#__PURE__*/\n\n\n    React.createElement(\"select\", { name: \"role\", className: \"form-control\", ref: register },\n    userRoles.map((role) => /*#__PURE__*/\n    _jsx(\"option\", { value: role }, role,\n    t('System', roleTranslationKey[role], null, false))))), /*#__PURE__*/\n\n\n\n\n    _jsx(\"div\", { id: \"username_field\", className: \"form-group nested-selector\" }, void 0, /*#__PURE__*/\n    _jsx(\"label\", {}, void 0, /*#__PURE__*/\n    _jsx(Translate, {}, void 0, \"Username\")), /*#__PURE__*/\n\n    React.createElement(\"input\", {\n      type: \"text\",\n      className: \"form-control\",\n      autoComplete: \"off\",\n      name: \"username\",\n      ref: register({\n        required: true,\n        validate: isUnique,\n        maxLength: 50,\n        minLength: 3 }) }),\n\n\n    errors.username && /*#__PURE__*/\n    _jsx(\"div\", { className: \"validation-error\" }, void 0, /*#__PURE__*/\n    _jsx(Icon, { icon: \"exclamation-triangle\", size: \"xs\" }),\n    errors.username.type === 'required' && /*#__PURE__*/_jsx(Translate, {}, void 0, \"Username is required\"),\n    errors.username.type === 'validate' && /*#__PURE__*/_jsx(Translate, {}, void 0, \"Duplicated username\"),\n    errors.username.type === 'maxLength' && /*#__PURE__*/\n    _jsx(Translate, {}, void 0, \"Username is too long\"),\n\n    errors.username.type === 'minLength' && /*#__PURE__*/\n    _jsx(Translate, {}, void 0, \"Username is too short\"))), /*#__PURE__*/\n\n\n\n\n    _jsx(\"div\", { id: \"password_field\", className: \"form-group nested-selector\" }, void 0, /*#__PURE__*/\n    _jsx(\"label\", {}, void 0, /*#__PURE__*/\n    _jsx(Translate, {}, void 0, \"Password\")), /*#__PURE__*/\n\n    React.createElement(\"input\", {\n      type: \"password\",\n      className: \"form-control\",\n      autoComplete: \"off\",\n      name: \"password\",\n      ref: register({ maxLength: 50 }) }),\n\n    errors.password && /*#__PURE__*/\n    _jsx(\"div\", { className: \"validation-error\" }, void 0, /*#__PURE__*/\n    _jsx(Icon, { icon: \"exclamation-triangle\", size: \"xs\" }),\n    errors.password.type === 'maxLength' && /*#__PURE__*/\n    _jsx(Translate, {}, void 0, \"Password is too long\"))), /*#__PURE__*/\n\n\n\n\n    _jsx(\"div\", { className: \"user-memberships\" }, void 0, /*#__PURE__*/\n    _jsx(\"label\", {}, void 0, /*#__PURE__*/\n    _jsx(Translate, {}, void 0, \"Groups\")), /*#__PURE__*/\n\n    _jsx(MultiSelect, {\n      options: availableGroups,\n      optionsLabel: \"name\",\n      optionsValue: \"_id\",\n      value: selectedGroups,\n      onChange: (groupIds) => {\n        setSelectedGroups(groupIds);\n      },\n      optionsToShow: 8,\n      sortbyLabel: true }))), /*#__PURE__*/\n\n\n\n    _jsx(PermissionsList, { isOpen: permissionsModalOpened, onClose: togglePermissionList })), /*#__PURE__*/\n\n    _jsx(\"div\", { className: \"sidepanel-footer\" }, void 0,\n    user._id && /*#__PURE__*/\n    React.createElement(React.Fragment, null, /*#__PURE__*/\n    _jsx(\"div\", { className: \"footer-extra-row\" }, void 0, /*#__PURE__*/\n    _jsx(\"div\", { className: \"btn-cluster\" }, void 0, /*#__PURE__*/\n    _jsx(ConfirmButton, {\n      id: \"resetPasswordBtn\",\n      className: \"btn btn-outline-warning\",\n      action: () => onResetPassword(user) }, void 0, /*#__PURE__*/\n\n    _jsx(Icon, { icon: \"key\" }), /*#__PURE__*/\n    _jsx(\"span\", { className: \"btn-label\" }, void 0, /*#__PURE__*/\n    _jsx(Translate, {}, void 0, \"Reset Password\"))),\n\n\n    user.using2fa && /*#__PURE__*/\n    _jsx(ConfirmButton, {\n      id: \"reset2faBtn\",\n      className: \"btn btn-outline-danger\",\n      action: () => onReset2fa(user) }, void 0, /*#__PURE__*/\n\n    _jsx(Icon, { icon: \"two-factor-auth\" }), /*#__PURE__*/\n    _jsx(\"span\", { className: \"btn-label\" }, void 0,\n    ' ', /*#__PURE__*/\n    _jsx(Translate, {}, void 0, \"Reset 2FA\"))))), /*#__PURE__*/\n\n\n\n\n\n    _jsx(\"div\", { className: \"btn-cluster\" }, void 0, /*#__PURE__*/\n    _jsx(ConfirmButton, {\n      id: \"deleteBtn\",\n      className: \"btn btn-danger\",\n      action: () => onDelete(user) }, void 0, /*#__PURE__*/\n\n    _jsx(Icon, { icon: \"trash-alt\" }), /*#__PURE__*/\n    _jsx(\"span\", { className: \"btn-label\" }, void 0, /*#__PURE__*/\n    _jsx(Translate, {}, void 0, \"Delete\"))))), /*#__PURE__*/\n\n\n\n\n\n    _jsx(\"div\", { className: \"btn-cluster content-right\" }, void 0, /*#__PURE__*/\n    _jsx(\"button\", {\n      id: \"discardChangesBtn\",\n      type: \"button\",\n      className: \"btn btn-default\",\n      onClick: closePanel,\n      \"aria-label\": \"Cancel\" }, void 0, /*#__PURE__*/\n\n    _jsx(\"span\", { className: \"btn-label\" }, void 0, /*#__PURE__*/\n    _jsx(Translate, {}, void 0, \"Cancel\"))), /*#__PURE__*/\n\n\n    _jsx(\"button\", { id: \"saveChangesBtn\", type: \"submit\", form: \"userFrom\", className: \"btn btn-success\" }, void 0, /*#__PURE__*/\n    _jsx(\"span\", { id: \"submitLabel\", className: \"btn-label\" }, void 0, /*#__PURE__*/\n    _jsx(Translate, {}, void 0, \"Save\")))))));\n\n\n\n\n\n\n};","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import React, { useEffect, useState } from 'react';\nimport { connect } from 'react-redux';\n\n\nimport { UserRole } from \"../../../shared/types/userSchema\";\n\n\nimport { UserList } from \"./UserList\";\nimport { loadUsers, saveUser, deleteUser, newUser } from \"../actions/actions\";\nimport { loadUserGroups } from \"./usergroups/actions/actions\";\nimport { UserSidePanel } from \"./UserSidePanel\";\n\nimport { reset2fa } from \"../../Auth2fa/actions/actions\";\nimport { recoverPassword } from \"../../Auth/actions\";\nimport { t } from \"../../I18N\";\n\n\n\n\n\n\n\n\n\n\n\n\nconst UsersComponent = ({\n  users,\n  userGroups,\n  loadUsers: loadAllUsers,\n  loadUserGroups: loadAllGroups,\n  newUser: createUser,\n  saveUser: saveUserData,\n  deleteUser: deleteUserData,\n  reset2fa: resetTwoFactorAuth,\n  recoverPassword: resetUserPassword }) =>\n{var _selectedUser$_id;\n  const userList = users ? users.toJS() : [];\n  const userGroupList = userGroups ? userGroups.toJS() : [];\n  const [selectedUser, setSelectedUser] = useState();\n  const [sidePanelOpened, setSidePanelOpened] = useState(false);\n\n  useEffect(() => {\n    if (userList.length === 0) {\n      loadAllUsers().\n      then().\n      catch(() => {});\n    }\n    if (loadAllGroups.length === 0) {\n      loadAllGroups().\n      then().\n      catch(() => {});\n    }\n  }, []);\n\n  const closeSidePanel = () => {\n    setSelectedUser(undefined);\n    setSidePanelOpened(false);\n  };\n\n  const handlers = {\n    handleSelect: (user) => {\n      setSelectedUser(user);\n      setSidePanelOpened(true);\n    },\n\n    handleSave: async (user) => {\n      if (!user.password) {\n        delete user.password;\n      }\n      delete user.using2fa;\n      if (user._id) {\n        await saveUserData(user);\n      } else {\n        delete user._id;\n        await createUser(user);\n      }\n      await loadAllGroups();\n      closeSidePanel();\n    },\n\n    handleDelete: async (user) => {\n      await deleteUserData({ _id: user._id });\n      closeSidePanel();\n    },\n\n    handleAddUser: () => {\n      setSelectedUser({ role: UserRole.COLLABORATOR, username: '', email: '' });\n      setSidePanelOpened(true);\n    },\n\n    handleResetPassword: async (user) => {\n      await resetUserPassword(\n      user.email,\n      t('System', 'Instructions to reset user password have been sent', null, false));\n\n    } };\n\n\n  return /*#__PURE__*/(\n    React.createElement(React.Fragment, null, /*#__PURE__*/\n    _jsx(UserList, {\n      users: userList,\n      handleSelect: handlers.handleSelect,\n      handleAddUser: handlers.handleAddUser,\n      className: sidePanelOpened ? 'with-sidepanel' : '' }),\n\n    selectedUser && /*#__PURE__*/\n    _jsx(UserSidePanel, {\n\n      opened: sidePanelOpened,\n      user: selectedUser,\n      users: userList,\n      groups: userGroupList,\n      onSave: handlers.handleSave,\n      onDelete: handlers.handleDelete,\n      onReset2fa: resetTwoFactorAuth,\n      closePanel: closeSidePanel,\n      onResetPassword: handlers.handleResetPassword }, (_selectedUser$_id = selectedUser._id) === null || _selectedUser$_id === void 0 ? void 0 : _selectedUser$_id.toString())));\n\n\n\n\n};\n\nconst mapStateToProps = (state) => ({\n  users: state.users,\n  userGroups: state.userGroups });\n\n\nconst mapDispatchToProps = {\n  loadUsers,\n  newUser,\n  saveUser,\n  deleteUser,\n  loadUserGroups,\n  reset2fa,\n  recoverPassword };\n\n\n\nexport const Users = connect(mapStateToProps, mapDispatchToProps)(UsersComponent);","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import React, { useState } from 'react';\nimport { TabContent, TabLink, Tabs } from 'react-tabs-redux';\nimport { Translate } from \"../I18N\";\nimport { UserGroups } from \"./components/usergroups/UserGroups\";\nimport { Users } from \"./components/Users\";\n\nexport const roleTranslationKey = {\n  admin: 'Admin',\n  editor: 'Editor',\n  collaborator: 'Collaborator' };\n\n\nexport const UserManagement = () => {\n  const [selectedTab, setSelectedTab] = useState('users');\n  return /*#__PURE__*/(\n    _jsx(\"div\", { className: \"settings-content\" }, void 0, /*#__PURE__*/\n    _jsx(\"div\", { className: \"userManagementTabs\" }, void 0, /*#__PURE__*/\n    _jsx(Tabs, { selectedTab: selectedTab, renderActiveTabContentOnly: true, handleSelect: setSelectedTab }, void 0, /*#__PURE__*/\n    _jsx(\"div\", {}, void 0, /*#__PURE__*/\n    _jsx(\"ul\", { className: \"nav\" }, void 0, /*#__PURE__*/\n    _jsx(\"li\", {}, void 0, /*#__PURE__*/\n    _jsx(TabLink, { to: \"users\", component: \"div\" }, void 0, /*#__PURE__*/\n    _jsx(Translate, {}, void 0, \"Users\"))), /*#__PURE__*/\n\n\n    _jsx(\"li\", {}, void 0, /*#__PURE__*/\n    _jsx(TabLink, { to: \"usergroups\", component: \"div\" }, void 0, /*#__PURE__*/\n    _jsx(Translate, {}, void 0, \"Groups\"))))), /*#__PURE__*/\n\n\n\n\n    _jsx(TabContent, { for: \"users\" }, void 0, /*#__PURE__*/\n    _jsx(Users, {})), /*#__PURE__*/\n\n    _jsx(TabContent, { for: \"usergroups\" }, void 0, /*#__PURE__*/\n    _jsx(UserGroups, {}))))));\n\n\n\n\n\n};","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}function ownKeys(object, enumerableOnly) {var keys = Object.keys(object);if (Object.getOwnPropertySymbols) {var symbols = Object.getOwnPropertySymbols(object);enumerableOnly && (symbols = symbols.filter(function (sym) {return Object.getOwnPropertyDescriptor(object, sym).enumerable;})), keys.push.apply(keys, symbols);}return keys;}function _objectSpread(target) {for (var i = 1; i < arguments.length; i++) {var source = null != arguments[i] ? arguments[i] : {};i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {_defineProperty(target, key, source[key]);}) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));});}return target;}function _defineProperty(obj, key, value) {if (key in obj) {Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });} else {obj[key] = value;}return obj;}import PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\n\nimport { actions } from \"../../BasicReducer\";\nimport UsersAPI from \"../../Users/UsersAPI\";\nimport { notify as notifyAction } from \"../../Notifications/actions/notificationsActions\";\nimport { RequestParams } from \"../../utils/RequestParams\";\nimport { t, I18NLink, Translate } from \"../../I18N\";\nimport { Icon } from \"../../UI\";\nimport { createSelector } from 'reselect';\nimport { Pill } from \"../../Metadata/components/Pill\";\nimport { roleTranslationKey } from \"../../Users/UserManagement\";\n\nclass AccountSettings extends Component {\n  constructor(props, context) {\n    super(props, context);\n    this.state = {\n      email: props.user.email || '',\n      password: '',\n      repeatPassword: '',\n      using2fa: props.user.using2fa };\n\n    this.passwordChange = this.passwordChange.bind(this);\n    this.repeatPasswordChange = this.repeatPasswordChange.bind(this);\n    this.updatePassword = this.updatePassword.bind(this);\n    this.updateEmail = this.updateEmail.bind(this);\n    this.emailChange = this.emailChange.bind(this);\n  }\n\n  passwordChange(e) {\n    this.setState({ password: e.target.value });\n    this.setState({ passwordError: false });\n  }\n\n  repeatPasswordChange(e) {\n    this.setState({ repeatPassword: e.target.value });\n    this.setState({ passwordError: false });\n  }\n\n  updateEmail(e) {\n    const { email } = this.state;\n    const { user, notify, setUser } = this.props;\n\n    e.preventDefault();\n    const userData = _objectSpread(_objectSpread({}, user), {}, { email });\n    UsersAPI.save(new RequestParams(userData)).then((result) => {\n      notify(t('System', 'Email updated', null, false), 'success');\n      setUser(Object.assign(userData, { _rev: result.rev }));\n    });\n  }\n\n  updatePassword(e) {\n    e.preventDefault();\n\n    const { password, repeatPassword } = this.state;\n    const { user, notify, setUser } = this.props;\n\n    const passwordsDontMatch = password !== repeatPassword;\n    const emptyPassword = password.trim() === '';\n    if (emptyPassword || passwordsDontMatch) {\n      this.setState({ passwordError: true });\n      return;\n    }\n\n    UsersAPI.save(new RequestParams(_objectSpread(_objectSpread({}, user), {}, { password }))).then((result) => {\n      notify(t('System', 'Password updated', null, false), 'success');\n      setUser(Object.assign(user, { _rev: result.rev }));\n    });\n    this.setState({ password: '', repeatPassword: '' });\n  }\n\n  emailChange(e) {\n    this.setState({ email: e.target.value });\n  }\n\n  renderPasswordField(id, value, label, passwordError) {\n    return /*#__PURE__*/(\n      _jsx(\"div\", { className: `form-group${passwordError ? ' has-error' : ''}` }, void 0, /*#__PURE__*/\n      _jsx(\"label\", { className: \"form-group-label\", htmlFor: id }, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, label)), /*#__PURE__*/\n\n      _jsx(\"input\", {\n        type: \"password\",\n        onChange: this[`${id}Change`],\n        value: value,\n        id: id,\n        className: \"form-control\" })));\n\n\n\n  }\n\n  render() {\n    const { email, password, repeatPassword, passwordError, using2fa } = this.state;\n    const { username, groups = [], role } = this.props.user;\n    return /*#__PURE__*/(\n      _jsx(\"div\", { className: \"settings-content\" }, void 0, /*#__PURE__*/\n      _jsx(\"div\", { className: \"account-settings\" }, void 0, /*#__PURE__*/\n      _jsx(\"div\", { className: \"panel panel-default\" }, void 0, /*#__PURE__*/\n      _jsx(\"div\", { className: \"panel-heading\" }, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Account\")), /*#__PURE__*/\n\n      _jsx(\"div\", { className: \"panel-body\" }, void 0, /*#__PURE__*/\n      _jsx(\"div\", { className: \"user-details\" }, void 0, /*#__PURE__*/\n      _jsx(\"div\", {}, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Username\"), \":\\xA0\\xA0\", /*#__PURE__*/\n      _jsx(\"strong\", {}, void 0, username)), /*#__PURE__*/\n\n      _jsx(\"div\", { className: \"user-details-role\" }, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Role\"), \":\\xA0\\xA0\", /*#__PURE__*/\n      _jsx(Pill, {}, void 0, /*#__PURE__*/\n      _jsx(Translate, { translationKey: roleTranslationKey[role] }, void 0, role))),\n\n\n      groups.length > 0 && /*#__PURE__*/\n      _jsx(\"div\", {}, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Groups\"), \":\\xA0\\xA0\",\n      groups.map((g) => /*#__PURE__*/\n      _jsx(Pill, {}, void 0, g.name)))), /*#__PURE__*/\n\n\n\n\n      _jsx(\"hr\", {}), /*#__PURE__*/\n      _jsx(\"h5\", {}, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Email address\")), /*#__PURE__*/\n\n      _jsx(\"form\", { onSubmit: this.updateEmail }, void 0, /*#__PURE__*/\n      _jsx(\"div\", { className: \"form-group\" }, void 0, /*#__PURE__*/\n      _jsx(\"label\", { className: \"form-group-label\", htmlFor: \"collection_name\" }, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Email\")), /*#__PURE__*/\n\n      _jsx(\"input\", {\n        type: \"email\",\n        onChange: this.emailChange,\n        value: email,\n        className: \"form-control\" })), /*#__PURE__*/\n\n\n      _jsx(\"button\", { type: \"submit\", className: \"btn btn-success\" }, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Update\"))), /*#__PURE__*/\n\n\n      _jsx(\"hr\", {}), /*#__PURE__*/\n      _jsx(\"h5\", {}, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Change password\")), /*#__PURE__*/\n\n      _jsx(\"form\", { onSubmit: this.updatePassword }, void 0,\n      this.renderPasswordField('password', password, 'New password', passwordError),\n      this.renderPasswordField(\n      'repeatPassword',\n      repeatPassword,\n      'Confirm new password',\n      passwordError),\n\n      passwordError && /*#__PURE__*/\n      _jsx(\"div\", { className: \"validation-error validation-error-centered\" }, void 0, /*#__PURE__*/\n      _jsx(Icon, { icon: \"exclamation-triangle\" }), \"\\xA0\", /*#__PURE__*/\n\n      _jsx(Translate, {}, void 0, \"Password Error\")), /*#__PURE__*/\n\n\n      _jsx(\"button\", { type: \"submit\", className: \"btn btn-success\" }, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Update\"))), /*#__PURE__*/\n\n\n      _jsx(\"hr\", {}), /*#__PURE__*/\n      _jsx(\"h5\", {}, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Two-step verification\")),\n\n      using2fa && /*#__PURE__*/\n      _jsx(\"div\", { className: \"alert alert-info\" }, void 0, /*#__PURE__*/\n      _jsx(Icon, { icon: \"check\", size: \"2x\" }), /*#__PURE__*/\n      _jsx(\"div\", { className: \"force-ltr\" }, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Your account is protected by 2fa.\"))),\n\n\n\n      !using2fa && /*#__PURE__*/\n      _jsx(\"div\", {}, void 0, /*#__PURE__*/\n      _jsx(\"div\", { className: \"alert alert-warning\" }, void 0, /*#__PURE__*/\n      _jsx(Icon, { icon: \"exclamation-triangle\", size: \"2x\" }), /*#__PURE__*/\n      _jsx(\"div\", { className: \"force-ltr\" }, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"You should activate this feature for enhanced account security\"))), /*#__PURE__*/\n\n\n\n\n      _jsx(\"div\", {}, void 0, /*#__PURE__*/\n      _jsx(I18NLink, { to: \"/settings/2fa\", className: \"btn btn-success\" }, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Protect your account\")))))), /*#__PURE__*/\n\n\n\n\n\n\n      _jsx(\"div\", { className: \"settings-footer\" }, void 0, /*#__PURE__*/\n      _jsx(\"a\", { href: \"/logout\", className: \"btn btn-danger\" }, void 0, /*#__PURE__*/\n      _jsx(Icon, { icon: \"power-off\" }), /*#__PURE__*/\n      _jsx(\"span\", { className: \"btn-label\" }, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Logout\")))))));\n\n\n\n\n\n\n  }}\n\n\nAccountSettings.defaultProps = {\n  user: {} };\n\n\n\n\n\n\n\n\nconst selectUser = createSelector(\n(state) => state.user,\n(user) => user.toJS());\n\n\nfunction mapStateToProps(state) {\n  return { user: selectUser(state) };\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return bindActionCreators(\n  { setUser: actions.set.bind(null, 'auth/user'), notify: notifyAction },\n  dispatch);\n\n}\n\nexport { AccountSettings, mapStateToProps, createSelector };\nexport default connect(mapStateToProps, mapDispatchToProps)(AccountSettings);","const _excluded = [\"localID\"];function _objectWithoutProperties(source, excluded) {if (source == null) return {};var target = _objectWithoutPropertiesLoose(source, excluded);var key, i;if (Object.getOwnPropertySymbols) {var sourceSymbolKeys = Object.getOwnPropertySymbols(source);for (i = 0; i < sourceSymbolKeys.length; i++) {key = sourceSymbolKeys[i];if (excluded.indexOf(key) >= 0) continue;if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;target[key] = source[key];}}return target;}function _objectWithoutPropertiesLoose(source, excluded) {if (source == null) return {};var target = {};var sourceKeys = Object.keys(source);var key, i;for (i = 0; i < sourceKeys.length; i++) {key = sourceKeys[i];if (excluded.indexOf(key) >= 0) continue;target[key] = source[key];}return target;}function ownKeys(object, enumerableOnly) {var keys = Object.keys(object);if (Object.getOwnPropertySymbols) {var symbols = Object.getOwnPropertySymbols(object);enumerableOnly && (symbols = symbols.filter(function (sym) {return Object.getOwnPropertyDescriptor(object, sym).enumerable;})), keys.push.apply(keys, symbols);}return keys;}function _objectSpread(target) {for (var i = 1; i < arguments.length; i++) {var source = null != arguments[i] ? arguments[i] : {};i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {_defineProperty(target, key, source[key]);}) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));});}return target;}function _defineProperty(obj, key, value) {if (key in obj) {Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });} else {obj[key] = value;}return obj;}import api from \"../utils/api\";\nimport { RequestParams } from \"../utils/RequestParams\";\n\n\n\n\n\n\n\n\n\n\nexport default {\n  async save(settings) {var _settings$data, _settings$data$links;\n    const processedSettings = settings.set(_objectSpread(_objectSpread({},\n    settings.data), {}, {\n      links: (_settings$data = settings.data) === null || _settings$data === void 0 ? void 0 : (_settings$data$links = _settings$data.links) === null || _settings$data$links === void 0 ? void 0 : _settings$data$links.map((link) => {\n        const { localID } = link,linkWithoutLocalID = _objectWithoutProperties(link, _excluded);\n        return linkWithoutLocalID;\n      }) }));\n\n    return api.post('settings', processedSettings).then((response) => response.json);\n  },\n\n  async get(query = new RequestParams()) {\n    return api.get('settings', query).then((response) => response.json);\n  } };","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import React from 'react';\nimport { Translate } from \"../../I18N\";\n\nexport const landingPageTip = /*#__PURE__*/\nReact.createElement(React.Fragment, null, /*#__PURE__*/\n_jsx(Translate, {}, void 0, \"Configure the default landing page for your site.\"), /*#__PURE__*/\n_jsx(\"hr\", {}), /*#__PURE__*/\n_jsx(Translate, {}, void 0, \"Examples\"), \":\", /*#__PURE__*/\n_jsx(\"br\", {}), /*#__PURE__*/\n_jsx(Translate, {}, void 0, \"- Site page:\"), /*#__PURE__*/\n_jsx(\"i\", { \"no-translate\": true }, void 0, \"/page/dicxg0oagy3xgr7ixef80k9\"), /*#__PURE__*/\n_jsx(\"br\", {}), /*#__PURE__*/\n_jsx(Translate, {}, void 0, \"- Library search:\"), /*#__PURE__*/\n_jsx(\"i\", { \"no-translate\": true }, void 0, \"/library/?searchTerm=testAn \"), /*#__PURE__*/\n_jsx(\"br\", {}), /*#__PURE__*/\n_jsx(Translate, {}, void 0, \"- Entity:\"), /*#__PURE__*/\n_jsx(\"i\", { \"no-translate\": true }, void 0, \"/entity/9htbkgpkyy7j5rk9A\"), /*#__PURE__*/\n_jsx(\"br\", {}), /*#__PURE__*/\n_jsx(Translate, {}, void 0, \"Always use URLs relative to your site, starting with / and skipping the domain name. Example:\"), /*#__PURE__*/\n\n\n_jsx(\"i\", {}, void 0, /*#__PURE__*/\n_jsx(Translate, {}, void 0, \"https://yoursite.com/\")));\n\n\n\n\nexport const customFavIcon = /*#__PURE__*/\nReact.createElement(React.Fragment, null, /*#__PURE__*/\n_jsx(Translate, {}, void 0, \"Favicon is an icon that appears in the browser tab and bookmarks.\"), /*#__PURE__*/\n_jsx(\"br\", {}), /*#__PURE__*/\n_jsx(\"br\", {}), /*#__PURE__*/\n_jsx(Translate, {}, void 0, \"You will need to reload the page after updating your Favicon.\"));\n\n\n\nexport const publicSharing = /*#__PURE__*/\n_jsx(Translate, {}, void 0, \"Check to make this instance private (only logged-in users can access the data)\");\n\n\n\n\nexport const cookiePolicy = /*#__PURE__*/\n_jsx(Translate, {}, void 0, \"This option will show a notification about the use of cookies in your instance.\");\n\n\n\n\nexport const emails = [/*#__PURE__*/\n_jsx(Translate, {}, void 0, \"Here you can set up the contact email and the email that appears when Uwazi sends a notification to a user\"), /*#__PURE__*/\n\n\n\n_jsx(Translate, {}, void 0, \"If you have added a contact form on one of your pages, this is the email address that receives the information from that form.\"), /*#__PURE__*/\n\n\n\n_jsx(Translate, {}, void 0, \"You can configure the email that will appear as the sender when any email is sent to the user. If this email is not set, \\u201Cno-reply@uwazi.io\\u201D will be used instead.\")];\n\n\n\n\n\nexport const characterSupport = /*#__PURE__*/\nReact.createElement(React.Fragment, null, /*#__PURE__*/\n_jsx(Translate, { translationKey: \"Character support description\" }, void 0, \"Toggling this button enhances support for non-latin languages as default languages. This will update all template properties automatically.\"), /*#__PURE__*/\n\n\n\n_jsx(\"br\", {}), /*#__PURE__*/\n_jsx(\"b\", {}, void 0, /*#__PURE__*/\n_jsx(Translate, { translationKey: \"Character support process warning\" }, void 0, \"This process could take several minutes and will likely change URLs to library filters. If you have menus or links using such URLs, they will probably stop working after the update. You will need to update them manually.\")), /*#__PURE__*/\n\n\n\n\n\n_jsx(\"br\", {}), /*#__PURE__*/\n_jsx(Translate, { translationKey: \"Character support revert warning\" }, void 0, \"After selecting this option, you will not be able to revert back to using legacy property naming. If you are not facing issues with your template property names, we recommend leaving this unchecked.\"));\n\n\n\n\n\n\n\nexport const analytics = /*#__PURE__*/\n_jsx(Translate, { translationKey: \"Analytics description\" }, void 0, \"If you want to track analytics related to your collection visits, Uwazi supports both Google Analytics and Matomo.\");\n\n\n\n\n\nexport const mapAxis = /*#__PURE__*/\n_jsx(Translate, {}, void 0, \"Set the default starting point for your geolocation properties.\");\n\n\nexport const publicForm = [/*#__PURE__*/\n_jsx(Translate, { translationKey: \"Public form settings description\" }, void 0, \"Here you can configure the public form destination and the whitelisted templates\"), /*#__PURE__*/\n\n\n_jsx(Translate, { translationKey: \"Public form URL description\" }, void 0, \"You can configure the URL of a different Uwazi to receive the submits from your Public Form\"), /*#__PURE__*/\n\n\n_jsx(Translate, { translationKey: \"Public form whitelist description\" }, void 0, \"If you wish to include a public form on your page, you must white-list the template by selecting it from the list.\")];\n\n\n\n\n\nexport const openPublicForm = /*#__PURE__*/\n_jsx(Translate, { translationKey: \"Captcha bypass\" }, void 0, \"By toggling this on you can allow users to submit to your whitelisted templates without having to fill a CAPTCHA. The form will still present the captcha to end users, but API end-point will allow submissions without CAPTCHA validation if a header `\\u201CBypass-Captcha: true`\\u201C is sent along. This option is insecure and can be leveraged to flood your instance with spam or malicious content.\");\n\n\n\n\n\n\n\n\nexport const mapApiKey = /*#__PURE__*/\n_jsx(Translate, { translationKey: \"Map api key tooltip\" }, void 0, \"An API key is required to use Mapbox or Google Maps.\");\n\n\n\n\nexport const ocrTrigger = /*#__PURE__*/\nReact.createElement(React.Fragment, null, /*#__PURE__*/\n_jsx(Translate, { translationKey: \"OCR description tip 1\" }, void 0, \"This will enable the Optical Character Recognition (OCR) functionality for PDF documents. This service will recognize text inside images, such as scanned documents and photos, and convert it into machine-readable text data.\"), /*#__PURE__*/\n\n\n\n\n_jsx(\"br\", {}), /*#__PURE__*/\n_jsx(Translate, { translationKey: \"OCR description tip 2\" }, void 0, \"When activated, this will enable administrator and editor users to send PDF documents to the OCR service.\"));","export function validateHomePageRoute(route) {\n  const queryParams = '(\\\\?.*)?)';\n  const languageMatch = '(/[a-zA-Z]{2,3})?';\n  const library = `(library(/map)?(/table)?/?${queryParams}`;\n  const entity = '(entity/.+)';\n  const page = '(page/.+)';\n  const matcher = new RegExp(`${languageMatch}/(${library}|${page}|${entity})$`);\n  return route.match(matcher) !== null;\n}","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import React from 'react';\n\n\n\n\n\n\nexport const SettingsLabel = ({ children, className }) => /*#__PURE__*/\n_jsx(\"label\", { className: `inline-form-label ${className}` }, void 0, children);","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import React from 'react';\nimport { Translate } from \"../../I18N\";\nimport { Tip } from \"../../Layout\";\n\nimport { SettingsLabel } from \"./SettingsLabel\";\n\n\n\n\n\n\n\n\n\nconst SettingsFormElement = ({\n  label,\n  tip,\n  labelClassName = 'col-xs-12 col-lg-2',\n  inputsClassName = 'col-xs-12 col-lg-10',\n  children }) => /*#__PURE__*/\n\n_jsx(\"div\", { className: \"form-element row\" }, void 0, /*#__PURE__*/\n_jsx(SettingsLabel, { className: labelClassName }, void 0, /*#__PURE__*/\n_jsx(Translate, {}, void 0, label),\ntip && /*#__PURE__*/_jsx(Tip, { icon: \"info-circle\" }, void 0, tip)), /*#__PURE__*/\n\n_jsx(\"div\", { className: `form-element-inputs ${inputsClassName}` }, void 0, children));\n\n\n\nexport { SettingsFormElement };","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}function ownKeys(object, enumerableOnly) {var keys = Object.keys(object);if (Object.getOwnPropertySymbols) {var symbols = Object.getOwnPropertySymbols(object);enumerableOnly && (symbols = symbols.filter(function (sym) {return Object.getOwnPropertyDescriptor(object, sym).enumerable;})), keys.push.apply(keys, symbols);}return keys;}function _objectSpread(target) {for (var i = 1; i < arguments.length; i++) {var source = null != arguments[i] ? arguments[i] : {};i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {_defineProperty(target, key, source[key]);}) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));});}return target;}function _defineProperty(obj, key, value) {if (key in obj) {Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });} else {obj[key] = value;}return obj;} /* eslint-disable max-statements */\n/* eslint-disable max-lines */\nimport React from 'react';\nimport { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\n\nimport { Translate, t } from \"../../I18N\";\n\nimport { useForm } from 'react-hook-form';\nimport { actions } from \"../../BasicReducer\";\nimport { notificationActions } from \"../../Notifications\";\nimport { ToggleButton } from \"../../UI\";\nimport { MultiSelect, Geolocation } from \"../../Forms\";\nimport { RequestParams } from \"../../utils/RequestParams\";\nimport SettingsAPI from \"../SettingsAPI\";\nimport { FeatureToggle } from \"../../components/Elements/FeatureToggle\";\nimport { validateHomePageRoute } from \"../../utils/routeHelpers\";\nimport { ToggleChildren } from \"./ToggleChildren\";\nimport * as tips from \"./collectionSettingsTips\";\nimport { SettingsFormElement } from \"./SettingsFormElement\";\n\nconst mapStateToProps = ({ settings, templates }) => ({\n  collectionSettings: settings.collection,\n  templates });\n\n\nconst mapDispatchToProps = (dispatch) =>\nbindActionCreators(\n{\n  setSettings: actions.set.bind(null, 'settings/collection'),\n  notify: notificationActions.notify },\n\ndispatch);\n\n\nconst connector = connect(mapStateToProps, mapDispatchToProps);\n\n\n\nconst CollectionSettings = ({\n  collectionSettings,\n  templates,\n  setSettings,\n  notify }) =>\n{\n  const collectionSettingsObject = collectionSettings.toJS();\n  const templatesObject = templates.toJS();\n\n  const {\n    register,\n    handleSubmit,\n    watch,\n    setValue,\n    getValues,\n    formState: { errors } } =\n  useForm({\n    defaultValues: collectionSettingsObject,\n    mode: 'onSubmit' });\n\n\n  register('private');\n  register('openPublicEndpoint');\n  register('allowedPublicTemplates');\n  register('mapStartingPoint');\n  register('cookiepolicy');\n  register('newNameGeneration');\n  register('ocrServiceEnabled');\n  register('home_page', {\n    validate: (val) => validateHomePageRoute(val) || val === '' });\n\n  register('tilesProvider');\n  register('mapApiKey', {\n    pattern: /^[a-zA-Z0-9._]+$/ });\n\n\n  const save = async (newCollectionSettings) => {var _newCollectionSetting;\n    const saveParameters = new RequestParams(_objectSpread(_objectSpread(_objectSpread({},\n    collectionSettingsObject),\n    newCollectionSettings), {}, {\n      mapApiKey: (_newCollectionSetting = newCollectionSettings.mapApiKey) === null || _newCollectionSetting === void 0 ? void 0 : _newCollectionSetting.replace(/\\s+/g, ' ').trim() }));\n\n    const result = await SettingsAPI.save(saveParameters);\n    setSettings(result);\n    notify(t('System', 'Settings updated', null, false), 'success');\n  };\n  const year = t('System', 'Year', null, false);\n  const month = t('System', 'Month', null, false);\n  const day = t('System', 'Day', null, false);\n\n  return /*#__PURE__*/(\n    _jsx(\"div\", { className: \"settings-content\" }, void 0, /*#__PURE__*/\n    _jsx(\"div\", { className: \"panel panel-default collection-settings\" }, void 0, /*#__PURE__*/\n    _jsx(\"form\", { id: \"collectionSettings\", className: \"\", onSubmit: handleSubmit(save) }, void 0, /*#__PURE__*/\n    _jsx(\"div\", { className: \"panel-heading\" }, void 0, /*#__PURE__*/\n    _jsx(Translate, {}, void 0, \"Collection\")), /*#__PURE__*/\n\n    _jsx(\"h2\", {}, void 0, /*#__PURE__*/\n    _jsx(Translate, {}, void 0, \"General\")), /*#__PURE__*/\n\n\n    _jsx(SettingsFormElement, { label: \"Collection name\" }, void 0, /*#__PURE__*/\n    React.createElement(\"input\", { type: \"text\", name: \"site_name\", ref: register, className: \"form-control\" })), /*#__PURE__*/\n\n\n    _jsx(SettingsFormElement, { label: \"Custom favicon\", tip: tips.customFavIcon }, void 0, /*#__PURE__*/\n    _jsx(ToggleChildren, {\n      toggled: Boolean(watch('favicon')),\n      onToggleOff: () => {\n        setValue('favicon', '');\n      } }, void 0, /*#__PURE__*/\n\n    React.createElement(\"input\", { type: \"text\", name: \"favicon\", ref: register, className: \"form-control\" }))), /*#__PURE__*/\n\n\n\n    _jsx(SettingsFormElement, { label: \"Use custom landing page\", tip: tips.landingPageTip }, void 0, /*#__PURE__*/\n    _jsx(ToggleChildren, {\n      toggled: Boolean(watch('home_page')),\n      onToggleOff: () => {\n        setValue('home_page', '');\n      } }, void 0, /*#__PURE__*/\n\n    _jsx(\"div\", { className: `input-group ${errors.home_page ? 'has-error' : ''}` }, void 0, /*#__PURE__*/\n    _jsx(\"span\", { className: \"input-group-addon\", id: \"basic-addon1\" }, void 0, /*#__PURE__*/\n    _jsx(Translate, {}, void 0, \"https://yourdomain\")), /*#__PURE__*/\n\n    React.createElement(\"input\", { type: \"text\", className: \"form-control\", name: \"home_page\", ref: register })), /*#__PURE__*/\n\n    _jsx(\"div\", { className: \"has-error\" }, void 0,\n    errors.home_page && /*#__PURE__*/\n    _jsx(\"div\", { className: \"error-message\" }, void 0, /*#__PURE__*/\n    _jsx(Translate, {}, void 0, \"Invalid home page url\"))))), /*#__PURE__*/\n\n\n\n\n\n    _jsx(SettingsFormElement, { label: \"Default view\" }, void 0, /*#__PURE__*/\n    _jsx(\"div\", { className: \"col-xs-12 col-lg-3 col-no-gutters\" }, void 0, /*#__PURE__*/\n    React.createElement(\"select\", { name: \"defaultLibraryView\", className: \"form-control\", ref: register }, /*#__PURE__*/\n    _jsx(\"option\", { value: \"cards\" }, void 0, t('System', 'Cards', null, false)), /*#__PURE__*/\n    _jsx(\"option\", { value: \"table\" }, void 0, t('System', 'Table', null, false)), /*#__PURE__*/\n    _jsx(\"option\", { value: \"map\" }, void 0, t('System', 'Map', null, false))))), /*#__PURE__*/\n\n\n\n\n    _jsx(SettingsFormElement, { label: \"Date format\" }, void 0, /*#__PURE__*/\n    _jsx(\"div\", { className: \"col-xs-12 col-lg-3 col-no-gutters\" }, void 0, /*#__PURE__*/\n    React.createElement(\"select\", { name: \"dateFormat\", className: \"form-control\", ref: register }, /*#__PURE__*/\n    _jsx(\"option\", { value: \"yyyy/MM/dd\" }, void 0, \"2021/02/26 (\",\n    year, \", \", month, \", \", day, \")\"), /*#__PURE__*/\n\n    _jsx(\"option\", { value: \"dd/MM/yyyy\" }, void 0, \"26/02/2021 (\",\n    day, \", \", month, \", \", year, \")\"), /*#__PURE__*/\n\n    _jsx(\"option\", { value: \"MM/dd/yyyy\" }, void 0, \"02/26/2021 (\",\n    month, \", \", day, \", \", year, \")\"), /*#__PURE__*/\n\n    _jsx(\"option\", { value: \"yyyy-MM-dd\" }, void 0, \"2021-02-26 (\",\n    year, \", \", month, \", \", day, \")\"), /*#__PURE__*/\n\n    _jsx(\"option\", { value: \"dd-MM-yyyy\" }, void 0, \"26-02-2021 (\",\n    day, \", \", month, \", \", year, \")\"), /*#__PURE__*/\n\n    _jsx(\"option\", { value: \"MM-dd-yyyy\" }, void 0, \"02-26-2021 (\",\n    month, \", \", day, \", \", year, \")\")))), /*#__PURE__*/\n\n\n\n\n\n    _jsx(SettingsFormElement, { label: \"Private instance\", tip: tips.publicSharing }, void 0, /*#__PURE__*/\n    _jsx(ToggleButton, {\n      checked: Boolean(watch('private')),\n      onClick: () => {\n        setValue('private', !getValues('private'));\n      } })), /*#__PURE__*/\n\n\n\n    _jsx(SettingsFormElement, { label: \"Show cookie policy\", tip: tips.cookiePolicy }, void 0, /*#__PURE__*/\n    _jsx(ToggleButton, {\n      checked: Boolean(watch('cookiepolicy')),\n      onClick: () => {\n        setValue('cookiepolicy', !getValues('cookiepolicy'));\n      } })),\n\n\n\n    !collectionSettingsObject.newNameGeneration && /*#__PURE__*/\n    _jsx(SettingsFormElement, { label: \"Non-latin characters support\", tip: tips.characterSupport }, void 0, /*#__PURE__*/\n    _jsx(ToggleButton, {\n      checked: Boolean(watch('newNameGeneration')),\n      onClick: () => {\n        setValue('newNameGeneration', !getValues('newNameGeneration'));\n      } })), /*#__PURE__*/\n\n\n\n\n    _jsx(\"h2\", {}, void 0, /*#__PURE__*/\n    _jsx(Translate, {}, void 0, \"Website analytics\")), /*#__PURE__*/\n\n\n    _jsx(SettingsFormElement, { label: \"Google Analytics\", tip: tips.analytics }, void 0, /*#__PURE__*/\n    _jsx(ToggleChildren, {\n      toggled: Boolean(watch('analyticsTrackingId')),\n      onToggleOff: () => {\n        setValue('analyticsTrackingId', '');\n      } }, void 0, /*#__PURE__*/\n\n    React.createElement(\"input\", {\n      type: \"text\",\n      name: \"analyticsTrackingId\",\n      ref: register,\n      className: \"form-control\" }))), /*#__PURE__*/\n\n\n\n\n    _jsx(SettingsFormElement, { label: \"Matomo Analytics\", tip: tips.analytics }, void 0, /*#__PURE__*/\n    _jsx(ToggleChildren, {\n      toggled: Boolean(watch('matomoConfig')),\n      onToggleOff: () => {\n        setValue('matomoConfig', '');\n      } }, void 0, /*#__PURE__*/\n\n    React.createElement(\"input\", { type: \"text\", name: \"matomoConfig\", ref: register, className: \"form-control\" }))), /*#__PURE__*/\n\n\n\n    _jsx(FeatureToggle, { feature: \"ocr.url\" }, void 0, /*#__PURE__*/\n    _jsx(\"h2\", {}, void 0, /*#__PURE__*/\n    _jsx(Translate, {}, void 0, \"Services\")), /*#__PURE__*/\n\n\n    _jsx(SettingsFormElement, { label: \"Document OCR trigger\", tip: tips.ocrTrigger }, void 0, /*#__PURE__*/\n    _jsx(ToggleButton, {\n      checked: Boolean(watch('ocrServiceEnabled')),\n      onClick: () => {\n        setValue('ocrServiceEnabled', !getValues('ocrServiceEnabled'));\n      } }))), /*#__PURE__*/\n\n\n\n\n    _jsx(\"h2\", {}, void 0, /*#__PURE__*/\n    _jsx(Translate, {}, void 0, \"Forms and email configuration\")), /*#__PURE__*/\n\n\n    _jsx(SettingsFormElement, { label: \"Contact Form\", tip: tips.emails[0] }, void 0, /*#__PURE__*/\n    _jsx(ToggleChildren, {\n      toggled: Boolean(watch('contactEmail') || watch('senderEmail')),\n      onToggleOff: () => {\n        setValue('contactEmail', '');\n        setValue('senderEmail', '');\n      } }, void 0, /*#__PURE__*/\n\n    _jsx(SettingsFormElement, { label: \"Receiving email\", tip: tips.emails[1] }, void 0, /*#__PURE__*/\n    React.createElement(\"input\", { type: \"text\", ref: register, name: \"contactEmail\", className: \"form-control\" })), /*#__PURE__*/\n\n\n    _jsx(SettingsFormElement, { label: \"Sending email\", tip: tips.emails[2] }, void 0, /*#__PURE__*/\n    React.createElement(\"input\", {\n      type: \"text\",\n      ref: register,\n      name: \"senderEmail\",\n      placeholder: \"no-reply@uwazi.io\",\n      className: \"form-control\" })))), /*#__PURE__*/\n\n\n\n\n\n    _jsx(SettingsFormElement, { label: \"Public Endpoints\", tip: tips.publicForm[0] }, void 0, /*#__PURE__*/\n    _jsx(ToggleChildren, {\n      toggled: Boolean(\n      (watch('allowedPublicTemplates') || []).length || watch('publicFormDestination')),\n\n      onToggleOff: () => {\n        setValue('publicFormDestination', '');\n        setValue('allowedPublicTemplates', []);\n      } }, void 0, /*#__PURE__*/\n\n    _jsx(SettingsFormElement, {\n      label: \"Public Form submit URL\",\n      tip: tips.publicForm[1],\n      labelClassName: \"larger-label\",\n      inputsClassName: \"smaller-inputs\" }, void 0, /*#__PURE__*/\n\n    React.createElement(\"input\", {\n      type: \"text\",\n      name: \"publicFormDestination\",\n      ref: register,\n      className: \"form-control\" })), /*#__PURE__*/\n\n\n\n    _jsx(SettingsFormElement, {\n      label: \"Whitelisted Templates\",\n      tip: tips.publicForm[2],\n      labelClassName: \"larger-label\",\n      inputsClassName: \"smaller-inputs\" }, void 0, /*#__PURE__*/\n\n    _jsx(MultiSelect, {\n      value: watch('allowedPublicTemplates'),\n      options: templatesObject.map((template) => ({\n        label: template.name,\n        value: template._id })),\n\n      onChange: (newValues) => {\n        setValue('allowedPublicTemplates', newValues);\n      } })))), /*#__PURE__*/\n\n\n\n\n\n    _jsx(SettingsFormElement, { label: \"Allow captcha bypass\", tip: tips.openPublicForm }, void 0, /*#__PURE__*/\n    _jsx(ToggleButton, {\n      checked: Boolean(watch('openPublicEndpoint')),\n      onClick: () => {\n        setValue('openPublicEndpoint', !getValues('openPublicEndpoint'));\n      } })), /*#__PURE__*/\n\n\n\n    _jsx(\"h2\", {}, void 0, /*#__PURE__*/\n    _jsx(Translate, {}, void 0, \"Maps\")), /*#__PURE__*/\n\n    _jsx(SettingsFormElement, { label: \"Map provider\" }, void 0, /*#__PURE__*/\n    _jsx(\"div\", { className: \"col-xs-12 col-lg-3 col-no-gutters\" }, void 0, /*#__PURE__*/\n    React.createElement(\"select\", { name: \"tilesProvider\", className: \"form-control\", ref: register }, /*#__PURE__*/\n    _jsx(\"option\", { value: \"mapbox\" }, void 0, t('System', 'MapBox', null, false)), /*#__PURE__*/\n    _jsx(\"option\", { value: \"google\" }, void 0, t('System', 'Google Maps', null, false))))), /*#__PURE__*/\n\n\n\n    _jsx(\"div\", { className: `${errors.mapApiKey ? 'has-error' : ''}` }, void 0, /*#__PURE__*/\n    _jsx(SettingsFormElement, { label: \"Map api key\", tip: tips.mapApiKey }, void 0, /*#__PURE__*/\n    React.createElement(\"input\", { type: \"text\", name: \"mapApiKey\", ref: register, className: \"form-control\" }))), /*#__PURE__*/\n\n\n    _jsx(SettingsFormElement, { label: \"Custom starting location\", tip: tips.mapAxis }, void 0, /*#__PURE__*/\n    _jsx(\"div\", { className: \"settings-map\" }, void 0, /*#__PURE__*/\n    _jsx(Geolocation, {\n      value: watch('mapStartingPoint'),\n      onChange: (values) => {\n        setValue('mapStartingPoint', values);\n      } })))), /*#__PURE__*/\n\n\n\n\n\n    _jsx(\"div\", { className: \"settings-footer\" }, void 0, /*#__PURE__*/\n    _jsx(\"div\", { className: \"btn-cluster content-right\" }, void 0, /*#__PURE__*/\n    _jsx(\"button\", {\n      type: \"submit\",\n      form: \"collectionSettings\",\n      className: \"btn btn-success btn-extra-padding\" }, void 0, /*#__PURE__*/\n\n    _jsx(\"span\", { className: \"btn-label\" }, void 0, /*#__PURE__*/\n    _jsx(Translate, {}, void 0, \"Save\"))))))));\n\n\n\n\n\n\n\n};\n\nconst container = connector(CollectionSettings);\nexport { container as CollectionSettings };","import { notificationActions } from \"../../Notifications\";\nimport { t } from \"../../I18N\";\nimport { RequestParams } from \"../../utils/RequestParams\";\nimport SettingsAPI from \"../SettingsAPI\";\nimport { actions } from \"../../BasicReducer\";\n\nconst saveSettings = (data) => (dispatch) =>\nSettingsAPI.save(new RequestParams(data)).then((newSettings) => {\n  dispatch(actions.set('settings/collection', newSettings));\n  dispatch(notificationActions.notify(t('System', 'Settings updated'), 'success'));\n});\n\nexport default saveSettings;","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import { Field, Form, actions as formActions } from 'react-redux-form';\nimport { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\nimport Immutable from 'immutable';\nimport PropTypes from 'prop-types';\nimport React, { Component } from 'react';\n\nimport { Translate, t } from \"../../I18N\";\n\nimport saveSettings from \"../actions/settingsActions\";\n\nclass Customisation extends Component {\n  componentDidMount() {\n    this.props.loadForm('settings.settings', { customCSS: this.props.settings.get('customCSS') });\n  }\n\n  render() {\n    return /*#__PURE__*/(\n      _jsx(\"div\", { className: \"settings-content\" }, void 0, /*#__PURE__*/\n      _jsx(\"div\", { className: \"panel panel-default settings-custom-css\" }, void 0, /*#__PURE__*/\n      _jsx(\"div\", { className: \"panel-heading\" }, void 0, t('System', 'Custom styles')), /*#__PURE__*/\n      _jsx(\"div\", { className: \"panel-body\" }, void 0, /*#__PURE__*/\n      _jsx(Form, { model: \"settings.settings\", onSubmit: this.props.saveSettings }, void 0, /*#__PURE__*/\n      _jsx(Field, { model: \".customCSS\", className: \"test\" }, void 0, /*#__PURE__*/\n      _jsx(\"label\", { className: \"form-group-label\", htmlFor: \"custom_css\" }, void 0,\n      t('System', 'Custom CSS'), /*#__PURE__*/\n      _jsx(\"textarea\", { className: \"form-control\", id: \"custom_css\" }))), /*#__PURE__*/\n\n\n      _jsx(\"div\", { className: \"settings-footer remove-extra-nesting\" }, void 0, /*#__PURE__*/\n      _jsx(\"div\", { className: \"btn-cluster content-right\" }, void 0, /*#__PURE__*/\n      _jsx(\"button\", { type: \"submit\", className: \"btn btn-success btn-extra-padding\" }, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Save\")))))))));\n\n\n\n\n\n\n\n\n  }}\n\n\n\n\n\n\n\n\nconst mapStateToProps = (state) => ({ settings: state.settings.collection });\nconst mapDispatchToProps = (dispatch) =>\nbindActionCreators(\n{\n  loadForm: formActions.load,\n  saveSettings },\n\ndispatch);\n\n\nexport { Customisation };\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Customisation);","function ownKeys(object, enumerableOnly) {var keys = Object.keys(object);if (Object.getOwnPropertySymbols) {var symbols = Object.getOwnPropertySymbols(object);enumerableOnly && (symbols = symbols.filter(function (sym) {return Object.getOwnPropertyDescriptor(object, sym).enumerable;})), keys.push.apply(keys, symbols);}return keys;}function _objectSpread(target) {for (var i = 1; i < arguments.length; i++) {var source = null != arguments[i] ? arguments[i] : {};i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {_defineProperty(target, key, source[key]);}) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));});}return target;}function _defineProperty(obj, key, value) {if (key in obj) {Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });} else {obj[key] = value;}return obj;}var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport { Link } from 'react-router';\nimport {\ndeleteTemplate,\ncheckTemplateCanBeDeleted,\nsetAsDefault } from \"../../Templates/actions/templatesActions\";\n\nimport { Translate } from \"../../I18N\";\nimport { Icon } from \"../../UI\";\nimport { notificationActions } from \"../../Notifications\";\nimport Tip from \"../../Layout/Tip\";\n\nclass EntityTypesList extends Component {\n  setAsDefaultButton(template) {\n    return /*#__PURE__*/(\n      React.createElement(React.Fragment, null,\n      !template.synced && /*#__PURE__*/\n      _jsx(\"button\", {\n        type: \"button\",\n        onClick: this.props.setAsDefault.bind(null, template),\n        className: \"btn btn-success btn-xs\" }, void 0, /*#__PURE__*/\n\n      _jsx(Translate, {}, void 0, \"Set as default\"))));\n\n\n\n\n  }\n\n  deleteTemplate(template) {\n    return this.props.\n    checkTemplateCanBeDeleted(template).\n    then(() => {\n      this.context.confirm({\n        accept: () => {\n          this.props.deleteTemplate(template);\n        },\n        title: /*#__PURE__*/\n        React.createElement(React.Fragment, null, /*#__PURE__*/\n        _jsx(Translate, {}, void 0, \"Confirm delete of template:\"), \"\\xA0\", template.name),\n\n\n        messageKey: 'confirm delete template',\n        message: `Are you sure you want to delete this entity type?\n        This will delete the template and all relationship properties from other templates pointing to this one.` });\n\n    }).\n    catch(() => {\n      this.context.confirm({\n        accept: () => {},\n        noCancel: true,\n        title: /*#__PURE__*/\n        React.createElement(React.Fragment, null, /*#__PURE__*/\n        _jsx(Translate, {}, void 0, \"Can not delete template:\"), \"\\xA0\", template.name),\n\n\n        message: 'This template has associated entities' });\n\n    });\n  }\n\n  defaultTemplateMessage() {\n    return /*#__PURE__*/(\n      _jsx(\"span\", {}, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Default template\"), /*#__PURE__*/\n      _jsx(Tip, {}, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"This template will be used as default for new entities.\"))));\n\n\n\n  }\n\n  syncedTemplateMessage() {\n    return /*#__PURE__*/(\n      _jsx(\"span\", {}, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Synced template\"), /*#__PURE__*/\n      _jsx(Tip, {}, void 0, /*#__PURE__*/\n      _jsx(Translate, { translationKey: \"syncedTemplateListMessage\" }, void 0, \"The source of this template is a sync. All editing options will be disabled.\"))));\n\n\n\n\n\n  }\n\n  deleteTemplateButton(template) {\n    return /*#__PURE__*/(\n      React.createElement(React.Fragment, null,\n      !template.synced && /*#__PURE__*/\n      _jsx(\"button\", {\n        type: \"button\",\n        onClick: this.deleteTemplate.bind(this, template),\n        className: \"btn btn-danger btn-xs template-remove\" }, void 0, /*#__PURE__*/\n\n      _jsx(Icon, { icon: \"trash-alt\" }), \"\\xA0\", /*#__PURE__*/\n\n      _jsx(Translate, {}, void 0, \"Delete\"))));\n\n\n\n\n  }\n\n  sortTemplates() {\n    return this.props.templates.toJS().sort((a, b) => a.name > b.name ? 1 : -1);\n  }\n\n  render() {\n    return /*#__PURE__*/(\n      _jsx(\"div\", { className: \"settings-content\" }, void 0, /*#__PURE__*/\n      _jsx(\"div\", { className: \"panel panel-default\" }, void 0, /*#__PURE__*/\n      _jsx(\"div\", { className: \"panel-heading\" }, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Templates\")), /*#__PURE__*/\n\n      _jsx(\"ul\", { className: \"list-group document-types\" }, void 0,\n      this.sortTemplates().map((template, index) => /*#__PURE__*/\n      _jsx(\"li\", { className: \"list-group-item\" }, index, /*#__PURE__*/\n      _jsx(Link, { to: `/settings/templates/edit/${template._id}` }, void 0, template.name),\n      template.default ? this.defaultTemplateMessage() : '',\n      template.synced ? this.syncedTemplateMessage() : '', /*#__PURE__*/\n      _jsx(\"div\", { className: \"list-group-item-actions\" }, void 0,\n      !template.default ? this.setAsDefaultButton(template) : '', /*#__PURE__*/\n      _jsx(Link, {\n        to: `/settings/templates/edit/${template._id}`,\n        className: \"btn btn-default btn-xs\" }, void 0, /*#__PURE__*/\n\n      _jsx(Icon, { icon: \"pencil-alt\" }), \"\\xA0\", /*#__PURE__*/\n\n      _jsx(Translate, {}, void 0, \"Edit\")),\n\n      !template.default ? this.deleteTemplateButton(template) : '')))), /*#__PURE__*/\n\n\n\n\n      _jsx(\"div\", { className: \"settings-footer\" }, void 0, /*#__PURE__*/\n      _jsx(Link, { to: \"/settings/templates/new\", className: \"btn btn-default\" }, void 0, /*#__PURE__*/\n      _jsx(Icon, { icon: \"plus\" }), /*#__PURE__*/\n      _jsx(\"span\", { className: \"btn-label\" }, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Add template\")))))));\n\n\n\n\n\n\n  }}\n\n\n\n\n\n\n\n\n\n\nEntityTypesList.contextTypes = {\n  confirm: PropTypes.func };\n\n\nexport function mapStateToProps(state) {\n  return { templates: state.templates };\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return bindActionCreators(_objectSpread(_objectSpread({},\n  notificationActions), {}, { deleteTemplate, checkTemplateCanBeDeleted, setAsDefault }),\n  dispatch);\n\n}\n\nexport { EntityTypesList };\nexport default connect(mapStateToProps, mapDispatchToProps)(EntityTypesList);","import api from \"../TemplatesAPI\";\nimport documentsAPI from \"../../Documents/DocumentsAPI\";\nimport { actions } from \"../../BasicReducer\";\nimport { RequestParams } from \"../../utils/RequestParams\";\n\nexport function deleteTemplate(template) {\n  return (dispatch) =>\n  api.delete(new RequestParams({ _id: template._id })).then(() => {\n    dispatch(actions.remove('templates', template));\n  });\n}\n\nexport function checkTemplateCanBeDeleted(template) {\n  return () =>\n  documentsAPI.\n  countByTemplate(new RequestParams({ templateId: template._id })).\n  then((usedForDocuments) => {\n    if (usedForDocuments) {\n      return Promise.reject();\n    }\n    return Promise.resolve();\n  });\n}\n\nexport function setAsDefault(template) {\n  return () => api.setAsDefault(new RequestParams({ _id: template._id }));\n}","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import { DragSource, DropTarget } from 'react-dnd';\nimport { findDOMNode } from 'react-dom';\nimport PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\n\nimport { Icon } from \"../../UI\";\n\nexport const itemSource = {\n  beginDrag(props) {\n    return {\n      id: props.id,\n      name: props.name,\n      items: props.items,\n      container: props.container,\n      index: props.index,\n      originalItem: props.originalItem };\n\n  },\n\n  endDrag(props, monitor) {\n    const container = monitor.getDropResult();\n    if (container && container.id !== props.container.id) {\n      props.removeItem(props.id);\n    }\n  } };\n\n\nexport const itemTarget = {\n  hover(props, monitor, component) {\n    const item = monitor.getItem();\n    const dragIndex = item.index;\n    const hoverIndex = props.index;\n\n    if (props.id === item.id) {\n      return;\n    }\n\n    if (props.container.id !== item.container.id) {\n      return;\n    }\n\n    // Don't replace items with themselves\n    if (dragIndex === hoverIndex) {\n      return;\n    }\n\n    // Determine rectangle on screen\n    const hoverBoundingRect = findDOMNode(component).getBoundingClientRect(); // eslint-disable-line react/no-find-dom-node\n\n    // Get vertical middle\n    const hoverMiddleY = (hoverBoundingRect.bottom - hoverBoundingRect.top) / 2;\n\n    // Determine mouse position\n    const clientOffset = monitor.getClientOffset();\n\n    // Get pixels to the top\n    const hoverClientY = clientOffset.y - hoverBoundingRect.top;\n\n    // Only perform the move when the mouse has crossed half of the items height\n    // When dragging downwards, only move when the cursor is below 50%\n    // When dragging upwards, only move when the cursor is above 50%\n\n    // Dragging downwards\n    if (dragIndex < hoverIndex && hoverClientY < hoverMiddleY) {\n      return;\n    }\n\n    // Dragging upwards\n    if (dragIndex > hoverIndex && hoverClientY > hoverMiddleY) {\n      return;\n    }\n\n    // Time to actually perform the action\n    props.moveItem(dragIndex, hoverIndex, item);\n\n    // Note: we're mutating the monitor item here!\n    // Generally it's better to avoid mutations,\n    // but it's good here for the sake of performance\n    // to avoid expensive index searches.\n    item.index = hoverIndex;\n    return null;\n  } };\n\n\nexport class DragAndDropItem extends Component {\n  render() {\n    const { iconHandle, isDragging, connectDragPreview, connectDragSource, connectDropTarget } =\n    this.props;\n    let propertyClass = 'list-group-item';\n    if (isDragging) {\n      propertyClass += ' dragging';\n    }\n\n    if (!iconHandle) {\n      propertyClass += ' draggable';\n    }\n\n    const result = connectDropTarget( /*#__PURE__*/\n    _jsx(\"div\", { className: propertyClass }, void 0,\n    iconHandle ?\n    connectDragSource( /*#__PURE__*/\n    _jsx(\"span\", { className: \"draggable\" }, void 0, /*#__PURE__*/\n    _jsx(Icon, { icon: \"bars\" }))) : /*#__PURE__*/\n\n\n\n    _jsx(Icon, { icon: \"bars\" }),\n\n    this.props.children(this.props.originalItem, this.props.index)));\n\n\n\n    if (!iconHandle) {\n      return connectDragSource(result);\n    }\n\n    return connectDragPreview(result);\n  }}\n\n\nDragAndDropItem.defaultProps = {\n  iconHandle: false,\n  children: () => {} };\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nlet dragAndDropItem = DropTarget('DRAG_AND_DROP_ITEM', itemTarget, (connector) => ({\n  connectDropTarget: connector.dropTarget() }))(\nDragAndDropItem);\n\ndragAndDropItem = DragSource('DRAG_AND_DROP_ITEM', itemSource, (connector, monitor) => ({\n  connectDragSource: connector.dragSource(),\n  connectDragPreview: connector.dragPreview(),\n  isDragging: monitor.isDragging() }))(\ndragAndDropItem);\n\nexport default connect()(dragAndDropItem);","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport { DragDropContext, DropTarget } from 'react-dnd';\nimport { HTML5Backend } from 'react-dnd-html5-backend';\nimport ID from \"../../../shared/uniqueID\";\nimport { Translate } from \"../../I18N\";\nimport DragAndDropItem from \"./DragAndDropItem\";\n\nexport class DragAndDropContainer extends Component {\n  constructor(props) {\n    super(props);\n    this.state = { id: props.id || ID() };\n    this.container = { id: this.state.id };\n    this.moveItem = this.moveItem.bind(this);\n    this.removeItem = this.removeItem.bind(this);\n    this.renderItem = this.renderItem.bind(this);\n  }\n\n  moveItem(_dragIndex, hoverIndex, item) {\n    const dragIndex = _dragIndex;\n    const items = this.props.items.concat();\n    if (!items.find((_item) => _item.id === item.id)) {\n      return;\n    }\n    items.splice(dragIndex, 1);\n    items.splice(hoverIndex, 0, item.originalItem || item);\n    this.props.onChange(items);\n  }\n\n  removeItem(id) {\n    let items = this.props.items.concat();\n    items = items.filter((item) => item.id !== id);\n    this.props.onChange(items);\n  }\n\n  renderItem(item, index) {\n    if (this.props.renderItem) {\n      return this.props.renderItem(item, index);\n    }\n\n    return item.content;\n  }\n\n  render() {\n    const { connectDropTarget, items, iconHandle } = this.props;\n    return /*#__PURE__*/(\n      _jsx(\"div\", {}, void 0,\n      connectDropTarget( /*#__PURE__*/\n      _jsx(\"ul\", { className: \"list-group\" }, void 0,\n      items.map((item, index) => /*#__PURE__*/\n      _jsx(DragAndDropItem, {\n        moveItem: this.moveItem,\n        removeItem: this.removeItem,\n        index: index,\n        iconHandle: iconHandle || !!item.items,\n\n        name: item.name,\n        container: this.container,\n        items: item.items,\n        id: item.id,\n        originalItem: item }, item.id,\n\n      this.renderItem)), /*#__PURE__*/\n\n\n      _jsx(\"div\", { className: \"no-properties\" }, void 0, /*#__PURE__*/\n      _jsx(\"div\", { className: \"no-properties-wrap\" }, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Drag items here\")))))));\n\n\n\n\n\n\n  }}\n\n\nDragAndDropContainer.defaultProps = {\n  iconHandle: false };\n\n\n\n\n\n\n\n\n\n\n\n\nexport const containerTarget = {\n  drop(props, monitor, component) {\n    const item = monitor.getItem();\n    if (item.id === component.state.id) {\n      return;\n    }\n    if (!monitor.getDropResult() || !monitor.getDropResult().id) {\n      const items = props.items.concat();\n      if (!items.find((_item) => _item.id === item.id)) {\n        items.push(item.originalItem || item);\n        props.onChange(items);\n      }\n      return { id: component.state.id };\n    }\n  } };\n\n\nconst dragAndDropContainer = DropTarget('DRAG_AND_DROP_ITEM', containerTarget, (connect) => ({\n  connectDropTarget: connect.dropTarget() }))(\nDragAndDropContainer);\n\nexport default DragDropContext(HTML5Backend)(dragAndDropContainer);","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}function ownKeys(object, enumerableOnly) {var keys = Object.keys(object);if (Object.getOwnPropertySymbols) {var symbols = Object.getOwnPropertySymbols(object);enumerableOnly && (symbols = symbols.filter(function (sym) {return Object.getOwnPropertyDescriptor(object, sym).enumerable;})), keys.push.apply(keys, symbols);}return keys;}function _objectSpread(target) {for (var i = 1; i < arguments.length; i++) {var source = null != arguments[i] ? arguments[i] : {};i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {_defineProperty(target, key, source[key]);}) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));});}return target;}function _defineProperty(obj, key, value) {if (key in obj) {Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });} else {obj[key] = value;}return obj;}import PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport { List } from 'immutable';\n\nimport { RequestParams } from \"../../utils/RequestParams\";\nimport { DragAndDropContainer } from \"../../Layout/DragAndDrop\";\nimport ID from \"../../../shared/uniqueID\";\nimport { actions } from \"../../BasicReducer\";\nimport SettingsAPI from \"../SettingsAPI\";\nimport { notify as notifyAction } from \"../../Notifications/actions/notificationsActions\";\nimport { t, Translate } from \"../../I18N\";\nimport { Icon } from \"../../UI\";\n\nconst removeItem = (itemId) => {\n  const removeItemIterator = (items) =>\n  items.\n  filter((item) => item.id !== itemId).\n  map((_item) => {\n    const item = _objectSpread({}, _item);\n    if (item.items) {\n      item.items = removeItemIterator(item.items);\n    }\n    return item;\n  });\n\n  return removeItemIterator;\n};\n\nclass FiltersForm extends Component {\n  constructor(props) {\n    super(props);\n    const activeFilters = props.settings.collection.toJS().filters || [];\n    const inactiveFilters = props.templates.\n    toJS().\n    filter(\n    (tpl) =>\n    !activeFilters.find((filt) => {\n      const matchId = filt.id === tpl._id;\n      let insideGroup = false;\n      if (filt.items) {\n        insideGroup = filt.items.find((_filt) => _filt.id === tpl._id);\n      }\n\n      return matchId || insideGroup;\n    })).\n\n    map((tpl) => ({ id: tpl._id, name: tpl.name }));\n\n    this.state = { activeFilters, inactiveFilters };\n    this.activesChange = this.activesChange.bind(this);\n    this.unactivesChange = this.unactivesChange.bind(this);\n    this.renderActiveItems = this.renderActiveItems.bind(this);\n    this.renderInactiveItems = this.renderInactiveItems.bind(this);\n  }\n\n  activesChange(items) {\n    items.forEach((item) => {\n      if (!item.items) {\n        return;\n      }\n      // eslint-disable-next-line\n      item.items = item.items.filter((subitem) => {\n        if (subitem.items) {\n          items.push(subitem);\n          return false;\n        }\n        return true;\n      });\n    });\n    this.setState({ activeFilters: items });\n  }\n\n  unactivesChange(items) {\n    this.setState({ inactiveFilters: items });\n  }\n\n  sanitizeFilterForSave(_filter) {\n    const filter = _objectSpread({}, _filter);\n    delete filter.container;\n    delete filter.index;\n    if (filter.items) {\n      filter.items = filter.items.map((item) => this.sanitizeFilterForSave(item));\n    } else {\n      delete filter._id;\n    }\n\n    return filter;\n  }\n\n  save() {\n    const { activeFilters } = this.state;\n    const { settings: propSettings, notify, setSettings } = this.props;\n\n    const settings = propSettings.collection.toJS();\n    const filters = activeFilters.map((filter) => this.sanitizeFilterForSave(filter));\n    settings.filters = filters;\n    SettingsAPI.save(new RequestParams(settings)).then((result) => {\n      notify(t('System', 'Settings updated', null, false), 'success');\n      setSettings(Object.assign(settings, result));\n    });\n  }\n\n  addGroup() {\n    const { activeFilters } = this.state;\n    const newGroup = { id: ID(), name: 'New group', items: [] };\n    this.setState({ activeFilters: activeFilters.concat([newGroup]) });\n  }\n\n  removeGroup(group) {\n    const { activeFilters: activeFiltersState } = this.state;\n    const activeFilters = activeFiltersState.filter((item) => item.id !== group.id);\n    this.setState({ activeFilters });\n  }\n\n  removeItem(item) {\n    const { activeFilters: activeFiltersState, inactiveFilters } = this.state;\n    const activeFilters = removeItem(item.id)(activeFiltersState);\n    this.setState({ activeFilters, inactiveFilters: inactiveFilters.concat([item]) });\n  }\n\n  renderGroup(group) {\n    const onChange = (items) => {\n      group.items = items;\n      this.setState(this.state);\n    };\n\n    const nameChange = (e) => {\n      const name = e.target.value;\n      group.name = name;\n      this.setState(this.state);\n    };\n\n    return /*#__PURE__*/(\n      _jsx(\"div\", {}, void 0, /*#__PURE__*/\n      _jsx(\"div\", { className: \"input-group\" }, void 0, /*#__PURE__*/\n      _jsx(\"input\", {\n        type: \"text\",\n        className: \"form-control\",\n        value: group.name,\n        onChange: nameChange.bind(this) }), /*#__PURE__*/\n\n      _jsx(\"span\", { className: \"input-group-btn\" }, void 0, /*#__PURE__*/\n      _jsx(\"button\", {\n        type: \"button\",\n        className: \"btn btn-danger\",\n        onClick: this.removeGroup.bind(this, group),\n        disabled: group.items.length }, void 0, /*#__PURE__*/\n\n      _jsx(Icon, { icon: \"trash-alt\" })))), /*#__PURE__*/\n\n\n\n      _jsx(DragAndDropContainer, {\n        id: group.id,\n        onChange: onChange.bind(this),\n        renderItem: this.renderActiveItems,\n        items: group.items })));\n\n\n\n  }\n\n  renderActiveItems(item) {\n    if (item.items) {\n      return this.renderGroup(item);\n    }\n    return /*#__PURE__*/(\n      _jsx(\"div\", {}, void 0, /*#__PURE__*/\n      _jsx(\"span\", {}, void 0, item.name), /*#__PURE__*/\n      _jsx(\"button\", {\n        type: \"button\",\n        className: \"btn btn-xs btn-danger\",\n        onClick: this.removeItem.bind(this, item) }, void 0, /*#__PURE__*/\n\n      _jsx(Icon, { icon: \"trash-alt\" }))));\n\n\n\n  }\n\n  renderInactiveItems(item) {\n    if (item.items) {\n      return this.renderGroup(item);\n    }\n    return /*#__PURE__*/(\n      _jsx(\"div\", {}, void 0, /*#__PURE__*/\n      _jsx(\"span\", {}, void 0, item.name)));\n\n\n  }\n\n  render() {\n    const { activeFilters, inactiveFilters } = this.state;\n    return /*#__PURE__*/(\n      _jsx(\"div\", { className: \"settings-content\" }, void 0, /*#__PURE__*/\n      _jsx(\"div\", { className: \"FiltersForm\" }, void 0, /*#__PURE__*/\n      _jsx(\"div\", { className: \"FiltersForm-list\" }, void 0, /*#__PURE__*/\n      _jsx(\"div\", { className: \"panel panel-default\" }, void 0, /*#__PURE__*/\n      _jsx(\"div\", { className: \"panel-heading\" }, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Filters configuration\")), /*#__PURE__*/\n\n      _jsx(\"div\", { className: \"panel-body\" }, void 0, /*#__PURE__*/\n      _jsx(\"div\", { className: \"row\" }, void 0, /*#__PURE__*/\n      _jsx(\"div\", { className: \"col-sm-9\" }, void 0, /*#__PURE__*/\n      _jsx(\"div\", { className: \"alert alert-info\" }, void 0, /*#__PURE__*/\n      _jsx(Icon, { icon: \"info-circle\", size: \"2x\" }), /*#__PURE__*/\n      _jsx(\"div\", { className: \"force-ltr\" }, void 0, /*#__PURE__*/\n      _jsx(\"p\", {}, void 0, /*#__PURE__*/\n      _jsx(Translate, { translationKey: \"Filters configuration description\" }, void 0, \"By default, users can filter the entities in the library based on the types you have defined. However, you can configure how these entity types will be displayed:\")), /*#__PURE__*/\n\n\n\n\n\n      _jsx(\"ul\", {}, void 0, /*#__PURE__*/\n      _jsx(\"li\", {}, void 0, /*#__PURE__*/\n      _jsx(Translate, { translationKey: \"Filters configuration\" }, void 0, \"drag and drop each entity type into the window in order to configure their order\")), /*#__PURE__*/\n\n\n\n\n      _jsx(\"li\", {}, void 0, /*#__PURE__*/\n      _jsx(Translate, { translationKey: \"Filters configuration example\" }, void 0, \"select \\\"Create group\\\" below to group filters under a label e.g (\\\"Documents \\\"or \\\"People\\\")\"))))), /*#__PURE__*/\n\n\n\n\n\n\n\n      _jsx(DragAndDropContainer, {\n        id: \"active\",\n        onChange: this.activesChange,\n        renderItem: this.renderActiveItems,\n        items: activeFilters })), /*#__PURE__*/\n\n\n      _jsx(\"div\", { className: \"col-sm-3\" }, void 0, /*#__PURE__*/\n      _jsx(\"div\", { className: \"FiltersForm-constructor\" }, void 0, /*#__PURE__*/\n      _jsx(\"div\", {}, void 0, /*#__PURE__*/\n      _jsx(\"i\", {}, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Entity types\"))), /*#__PURE__*/\n\n\n      _jsx(DragAndDropContainer, {\n        id: \"inactive\",\n        onChange: this.unactivesChange,\n        renderItem: this.renderInactiveItems,\n        items: inactiveFilters }))))))), /*#__PURE__*/\n\n\n\n\n\n\n\n      _jsx(\"div\", { className: \"settings-footer\" }, void 0, /*#__PURE__*/\n      _jsx(\"div\", { className: \"btn-cluster\" }, void 0, /*#__PURE__*/\n      _jsx(\"button\", { type: \"button\", onClick: this.addGroup.bind(this), className: \"btn btn-default\" }, void 0, /*#__PURE__*/\n      _jsx(Icon, { icon: \"plus\" }), /*#__PURE__*/\n      _jsx(\"span\", { className: \"btn-label\" }, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Create group\")))), /*#__PURE__*/\n\n\n\n      _jsx(\"div\", { className: \"btn-cluster content-right\" }, void 0, /*#__PURE__*/\n      _jsx(\"button\", {\n        type: \"button\",\n        onClick: this.save.bind(this),\n        className: \"btn btn-success btn-extra-padding\" }, void 0, /*#__PURE__*/\n\n      _jsx(\"span\", { className: \"btn-label\" }, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Save\"))))))));\n\n\n\n\n\n\n\n  }}\n\n\n\n\n\n\n\n\n\nconst mapStateToProps = (state) => ({\n  templates: state.templates,\n  settings: state.settings });\n\n\nfunction mapDispatchToProps(dispatch) {\n  return bindActionCreators(\n  { setSettings: actions.set.bind(null, 'settings/collection'), notify: notifyAction },\n  dispatch);\n\n}\n\nexport { FiltersForm };\n\nexport default connect(mapStateToProps, mapDispatchToProps)(FiltersForm);","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\n\nimport { actions, Translate } from \"../../I18N\";\nimport { Icon } from \"../../UI\";\nimport { elasticLanguages, availableLanguages as languagesList } from \"../../../shared/languagesList\";\nimport Warning from \"../../Layout/Warning\";\nimport Tip from \"../../Layout/Tip\";\n\nclass Languages extends Component {\n  static defaultLanguage() {\n    return /*#__PURE__*/(\n      _jsx(\"span\", {}, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Default language\"), /*#__PURE__*/\n      _jsx(Tip, { position: \"right\" }, void 0, /*#__PURE__*/\n      _jsx(Translate, { translationKey: \"Default language description\" }, void 0, \"This language will be used as default translation when adding new languages, and the default language for the site when no other language has been selected.\"))));\n\n\n\n\n\n\n  }\n\n  static notSupportedLanguage() {\n    return /*#__PURE__*/(\n      _jsx(Warning, {}, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Some adavanced search features may not be available for this language.\")));\n\n\n\n\n  }\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      languageToDelete: {},\n      languageToAdd: {} };\n\n  }\n\n  setAsDeafultButton(language) {\n    return /*#__PURE__*/(\n      _jsx(\"button\", {\n        type: \"button\",\n        onClick: this.setDefault.bind(this, language),\n        className: \"btn btn-success btn-xs template-remove\" }, void 0, /*#__PURE__*/\n\n      _jsx(Icon, { prefix: \"far\", icon: \"star\" }), \"\\xA0\", /*#__PURE__*/\n\n      _jsx(\"span\", {}, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Set as default\"))));\n\n\n\n  }\n\n  setDefault(language) {\n    this.props.setDefaultLanguage(language.key);\n  }\n\n  deleteButton(language) {\n    return /*#__PURE__*/(\n      _jsx(\"button\", {\n        disabled: language.key === this.props.locale,\n        className: \"btn btn-danger btn-xs template-remove\",\n        onClick: this.deleteLanguage.bind(this, language),\n        type: \"button\" }, void 0, /*#__PURE__*/\n\n      _jsx(Icon, { icon: \"trash-alt\" }), \"\\xA0\", /*#__PURE__*/\n\n      _jsx(\"span\", {}, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Delete language\"))));\n\n\n\n  }\n\n  deleteLanguage(language) {\n    this.context.confirm({\n      accept: () => this.props.deleteLanguage(language.key),\n      title: /*#__PURE__*/\n      React.createElement(React.Fragment, null, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Confirm delete \"), \" \", language.label),\n\n\n      message: /*#__PURE__*/\n      React.createElement(React.Fragment, null, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Are you sure you want to delete\"), \"\\xA0\",\n      language.label, \" \", /*#__PURE__*/_jsx(Translate, {}, void 0, \" language? \"), /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"This action may take some time, can not be undone and will delete all the information in that language.\")),\n\n\n\n\n\n      extraConfirm: true });\n\n  }\n\n  addLanguage({ key, label, localized_label: localizedLabel, rtl }) {\n    this.context.confirm({\n      accept: () => this.props.addLanguage({ key, label, localized_label: localizedLabel, rtl }),\n      title: /*#__PURE__*/\n      React.createElement(React.Fragment, null, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Confirm add\"), \"\\xA0\", label),\n\n\n      message:\n      'This action may take some time while we add the extra language to the entire collection.',\n      extraConfirm: true,\n      type: 'success' });\n\n  }\n\n  render() {\n    const currentLanguages = this.props.languages.toJS();\n    const currentLanguagesIsos = currentLanguages.map((l) => l.key);\n    const elasticSupportedIsos = Object.keys(elasticLanguages).map(\n    (k) => elasticLanguages[k].ISO639_1);\n\n    const filteredLanguagesList = languagesList.filter((l) => !currentLanguagesIsos.includes(l.key));\n    return /*#__PURE__*/(\n      _jsx(\"div\", { className: \"settings-content without-footer\" }, void 0, /*#__PURE__*/\n      _jsx(\"div\", { className: \"panel panel-default\" }, void 0, /*#__PURE__*/\n      _jsx(\"div\", { className: \"panel-heading\" }, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Active Languages\")), /*#__PURE__*/\n\n      _jsx(\"ul\", { className: \"list-group document-types\" }, void 0,\n      currentLanguages.map((language, index) => /*#__PURE__*/\n      _jsx(\"li\", { className: \"list-group-item\" }, index, /*#__PURE__*/\n      _jsx(\"span\", { className: \"force-ltr\" }, void 0, `${language.label} (${language.key})`),\n      language.default ? Languages.defaultLanguage() : '', /*#__PURE__*/\n      _jsx(\"div\", { className: \"list-group-item-actions\" }, void 0,\n      !language.default ? this.setAsDeafultButton(language) : '',\n      !language.default ? this.deleteButton(language) : '')))), /*#__PURE__*/\n\n\n\n\n      _jsx(\"div\", { className: \"panel-heading\" }, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Available Languages\")), /*#__PURE__*/\n\n      _jsx(\"ul\", { className: \"list-group document-types\" }, void 0,\n      filteredLanguagesList.map((language, index) => {\n        const notSupported = !elasticSupportedIsos.includes(language.key);\n        return /*#__PURE__*/(\n          _jsx(\"li\", { className: \"list-group-item\" }, index, /*#__PURE__*/\n          _jsx(\"span\", { className: \"force-ltr\" }, void 0,\n          `${language.label} (${language.key}) `,\n          notSupported ? Languages.notSupportedLanguage() : ''), /*#__PURE__*/\n\n          _jsx(\"div\", { className: \"list-group-item-actions\" }, void 0, \"\\xA0\", /*#__PURE__*/\n\n          _jsx(\"button\", {\n            type: \"button\",\n            onClick: this.addLanguage.bind(this, language),\n            className: \"btn btn-success btn-xs template-remove\" }, void 0, /*#__PURE__*/\n\n          _jsx(Icon, { icon: \"plus\" }), \"\\xA0\", /*#__PURE__*/\n\n          _jsx(\"span\", {}, void 0, /*#__PURE__*/\n          _jsx(Translate, {}, void 0, \"Add language\"))))));\n\n\n\n\n\n      })))));\n\n\n\n\n  }}\n\n\nLanguages.contextTypes = {\n  confirm: PropTypes.func };\n\n\n\n\n\n\n\n\n\n\nexport function mapStateToProps(state) {\n  const { settings, locale } = state;\n  return { languages: settings.collection.get('languages'), locale };\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return bindActionCreators(\n  {\n    addLanguage: actions.addLanguage,\n    deleteLanguage: actions.deleteLanguage,\n    setDefaultLanguage: actions.setDefaultLanguage },\n\n  dispatch);\n\n}\n\nexport { Languages };\nexport default connect(mapStateToProps, mapDispatchToProps)(Languages);","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import { DragSource, DropTarget } from 'react-dnd';\nimport { Field } from 'react-redux-form';\nimport { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\nimport { findDOMNode } from 'react-dom';\nimport PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport { removeLink, addGroupLink, removeGroupLink } from \"../actions/navlinksActions\";\nimport { Icon } from \"../../UI\";\nimport { Translate } from \"../../I18N\";\n\nconst groupStyles = {\n  paddingRight: '0px',\n  display: 'flex' };\n\n\nconst linkStyles = {\n  display: 'flex' };\n\n\nconst LinkSource = {\n  beginDrag(props) {\n    return {\n      id: props.localID,\n      index: props.index };\n\n  } };\n\n\nconst LinkTarget = {\n  hover(props, monitor, component) {\n    const dragIndex = monitor.getItem().index;\n    const hoverIndex = props.index;\n\n    // Don't replace items with themselves\n    if (dragIndex === hoverIndex) {\n      return;\n    }\n\n    // Determine rectangle on screen\n    const hoverBoundingRect = findDOMNode(component).getBoundingClientRect(); // eslint-disable-line react/no-find-dom-node\n\n    // Get vertical middle\n    const hoverMiddleY = (hoverBoundingRect.bottom - hoverBoundingRect.top) / 2;\n\n    // Determine mouse position\n    const clientOffset = monitor.getClientOffset();\n\n    // Get pixels to the top\n    const hoverClientY = clientOffset.y - hoverBoundingRect.top;\n\n    // Only perform the move when the mouse has crossed half of the items height\n    // When dragging downwards, only move when the cursor is below 50%\n    // When dragging upwards, only move when the cursor is above 50%\n\n    // Dragging downwards\n    if (dragIndex < hoverIndex && hoverClientY < hoverMiddleY) {\n      return;\n    }\n\n    // Dragging upwards\n    if (dragIndex > hoverIndex && hoverClientY > hoverMiddleY) {\n      return;\n    }\n\n    // Time to actually perform the action\n    props.sortLink(dragIndex, hoverIndex);\n\n    // Note: we're mutating the monitor item here!\n    // Generally it's better to avoid mutations,\n    // but it's good here for the sake of performance\n    // to avoid expensive index searches.\n    monitor.getItem().index = hoverIndex;\n  } };\n\n\nclass NavlinkForm extends Component {\n  constructor(props) {\n    super(props);\n    this.firstLoad = true;\n    // eslint-disable-next-line react/no-unused-class-component-methods\n    this.focus = () => {\n      this.focusableInput.focus();\n    };\n  }\n\n  componentDidMount() {\n    this.props.blockReferences.push(this);\n  }\n\n  componentDidUpdate(previousProps) {\n    if (this.firstLoad) {\n      this.firstLoad = false;\n      return;\n    }\n\n    this.focusOnNewElement(previousProps);\n  }\n\n  focusOnNewElement(previousProps) {\n    if (this.props.link.type === 'group') {\n      const links = this.props.links[this.props.index].sublinks;\n      const previousLinks = previousProps.links[this.props.index].sublinks;\n      const hasNewItem = (links === null || links === void 0 ? void 0 : links.length) > (previousLinks === null || previousLinks === void 0 ? void 0 : previousLinks.length);\n      if (hasNewItem) {\n        this.items[this.items.length - 1].focus();\n      }\n    }\n  }\n\n  render() {var _links$index$sublinks;\n    const {\n      link,\n      links,\n      index,\n      isDragging,\n      connectDragPreview,\n      connectDragSource,\n      connectDropTarget,\n      formState } =\n    this.props;\n    let className = `list-group-item${isDragging ? ' dragging' : ''}`;\n    let titleClass = 'input-group';\n\n    if (formState.$form.errors[`links.${index}.title.required`]) {\n      className += ' error';\n      titleClass += ' has-error';\n    }\n\n    this.items = [];\n\n    return connectDragPreview(\n    connectDropTarget( /*#__PURE__*/\n    _jsx(\"li\", { className: className }, void 0, /*#__PURE__*/\n    _jsx(\"div\", { className: \"propery-form expand\" }, void 0, /*#__PURE__*/\n    _jsx(\"div\", {}, void 0, /*#__PURE__*/\n    _jsx(\"div\", { className: \"row\" }, void 0, /*#__PURE__*/\n    _jsx(\"div\", { className: \"col-sm-12\" }, void 0, /*#__PURE__*/\n    _jsx(\"div\", { className: \"row\" }, void 0, /*#__PURE__*/\n    _jsx(\"div\", {\n      className: link.type === 'group' ? 'col-sm-11' : 'col-sm-3',\n      style: link.type === 'group' ? groupStyles : linkStyles }, void 0,\n\n    connectDragSource( /*#__PURE__*/\n    _jsx(\"span\", {\n      className: \"property-name\",\n      style: { paddingRight: '10px', width: '70px' } }, void 0, /*#__PURE__*/\n\n    _jsx(Icon, { icon: \"bars\", className: \"reorder\" }), \"\\xA0\", /*#__PURE__*/\n\n    _jsx(Icon, { icon: link.type === 'group' ? 'caret-square-down' : 'link' }))), /*#__PURE__*/\n\n\n    _jsx(\"div\", { className: `${titleClass} input-group-width` }, void 0, /*#__PURE__*/\n    _jsx(\"span\", { className: \"input-group-addon\" }, void 0, /*#__PURE__*/\n    _jsx(Translate, {}, void 0, \"Title\")), /*#__PURE__*/\n\n    _jsx(Field, { model: `settings.navlinksData.links[${index}].title` }, void 0, /*#__PURE__*/\n    React.createElement(\"input\", {\n      className: \"form-control\",\n      style: { width: 'calc(100% + 5px)' },\n      ref: (f) => {\n        this.focusableInput = f;\n      } })))),\n\n\n\n\n    link.type !== 'group' && /*#__PURE__*/\n    _jsx(\"div\", { className: \"col-sm-8\", style: { paddingRight: '0px' } }, void 0, /*#__PURE__*/\n    _jsx(\"div\", { className: \"input-group\" }, void 0, /*#__PURE__*/\n    _jsx(\"span\", { className: \"input-group-addon\" }, void 0, /*#__PURE__*/\n    _jsx(Translate, {}, void 0, \"URL\")), /*#__PURE__*/\n\n    _jsx(Field, { model: `settings.navlinksData.links[${index}].url` }, void 0, /*#__PURE__*/\n    _jsx(\"input\", { className: \"form-control\", style: { width: 'calc(100% + 5px)' } })))), /*#__PURE__*/\n\n\n\n\n    _jsx(\"div\", { className: \"col-sm-1\" }, void 0, /*#__PURE__*/\n    _jsx(\"button\", {\n      type: \"button\",\n      className: \"btn btn-danger btn-xs property-remove, menu-delete-button\",\n      style: { marginLeft: '4px' },\n      onClick: () => this.props.removeLink(index) }, void 0, /*#__PURE__*/\n\n    _jsx(Icon, { icon: \"trash-alt\" }), \" \", /*#__PURE__*/_jsx(Translate, {}, void 0, \"Delete\")))), /*#__PURE__*/\n\n\n\n    _jsx(\"div\", { className: \"row\" }, void 0,\n    link.type === 'group' && /*#__PURE__*/\n    _jsx(\"div\", { style: { paddingLeft: '80px' } }, void 0, /*#__PURE__*/\n    _jsx(\"div\", { className: \"row\" }, void 0, /*#__PURE__*/\n    _jsx(\"div\", { className: \"col-sm-12\" }, void 0, (_links$index$sublinks =\n    links[index].sublinks) === null || _links$index$sublinks === void 0 ? void 0 : _links$index$sublinks.map((_, i) => /*#__PURE__*/\n    _jsx(\"div\", {\n      className: \"row\",\n      style: { paddingBottom: '5px', paddingTop: '5px' } },\n    i, /*#__PURE__*/\n\n    _jsx(\"div\", { className: \"col-sm-3\", style: { display: 'flex' } }, void 0, /*#__PURE__*/\n    _jsx(\"span\", { style: { padding: '5px 10px 0px 0px' } }, void 0, /*#__PURE__*/\n    _jsx(Icon, { icon: \"link\" })), /*#__PURE__*/\n\n    _jsx(\"div\", { className: `${titleClass} input-group-width` }, void 0, /*#__PURE__*/\n    _jsx(\"span\", { className: \"input-group-addon\" }, void 0, /*#__PURE__*/\n    _jsx(Translate, {}, void 0, \"Title\")), /*#__PURE__*/\n\n    _jsx(Field, {\n      model: `settings.navlinksData.links[${index}].sublinks[${i}].title` }, void 0, /*#__PURE__*/\n\n    React.createElement(\"input\", {\n      className: \"form-control\",\n      style: { width: '100%' },\n      ref: (f) => this.items.push(f) })))), /*#__PURE__*/\n\n\n\n\n    _jsx(\"div\", { className: \"col-sm-8\" }, void 0, /*#__PURE__*/\n    _jsx(\"div\", { className: \"input-group\" }, void 0, /*#__PURE__*/\n    _jsx(\"span\", { className: \"input-group-addon\" }, void 0, /*#__PURE__*/\n    _jsx(Translate, {}, void 0, \"URL\")), /*#__PURE__*/\n\n    _jsx(Field, {\n      model: `settings.navlinksData.links[${index}].sublinks[${i}].url` }, void 0, /*#__PURE__*/\n\n    _jsx(\"input\", { className: \"form-control\" })))), /*#__PURE__*/\n\n\n\n    _jsx(\"div\", { className: \"col-sm-1\", style: { paddingLeft: '0px' } }, void 0, /*#__PURE__*/\n    _jsx(\"button\", {\n      type: \"button\",\n      className: \"btn btn-danger btn-xs property-remove, menu-delete-button\",\n      onClick: () => this.props.removeGroupLink(index, i) }, void 0, /*#__PURE__*/\n\n    _jsx(Icon, { icon: \"trash-alt\" }), \" \", /*#__PURE__*/_jsx(Translate, {}, void 0, \"Delete\"))))), /*#__PURE__*/\n\n\n\n\n    _jsx(\"div\", { className: \"row\" }, void 0, /*#__PURE__*/\n    _jsx(\"div\", { className: \"col-sm-12\" }, void 0, /*#__PURE__*/\n    _jsx(\"button\", {\n      className: \"menu-link-group-button\",\n      type: \"button\",\n      onClick: this.props.addGroupLink.bind(this, links, index) }, void 0, /*#__PURE__*/\n\n    _jsx(Icon, { icon: \"link\" }), \"\\xA0\", /*#__PURE__*/\n    _jsx(Translate, {}, void 0, \"Add link\")))))))))))))));\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n  }}\n\n\nNavlinkForm.defaultProps = {\n  blockReferences: [] };\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst dropTarget = DropTarget('LINK', LinkTarget, (connectDND) => ({\n  connectDropTarget: connectDND.dropTarget() }))(\nNavlinkForm);\n\nconst dragSource = DragSource('LINK', LinkSource, (connectDND, monitor) => ({\n  connectDragSource: connectDND.dragSource(),\n  connectDragPreview: connectDND.dragPreview(),\n  isDragging: monitor.isDragging() }))(\ndropTarget);\n\nfunction mapStateToProps({ settings }) {\n  const { links } = settings.navlinksData;\n  return {\n    formState: settings.navlinksFormState,\n    links };\n\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return bindActionCreators({ removeLink, addGroupLink, removeGroupLink }, dispatch);\n}\n\nexport { NavlinkForm, mapStateToProps, LinkSource, LinkTarget };\n\nexport default connect(mapStateToProps, mapDispatchToProps)(dragSource);","import * as types from \"./actionTypes\";\n\nexport function editLink(id) {\n  return {\n    type: types.EDIT_LINK,\n    id };\n\n}","import { actions as formActions } from 'react-redux-form';\nimport { RequestParams } from \"../../utils/RequestParams\";\n\nimport { actions } from \"../../BasicReducer\";\nimport { editLink } from \"./uiActions\";\nimport { notificationActions } from \"../../Notifications\";\n\nimport ID from \"../../../shared/uniqueID\";\nimport api from \"../SettingsAPI\";\nimport * as types from \"./actionTypes\";\n\nexport function loadLinks(links) {\n  return formActions.load('settings.navlinksData', { links });\n}\n\nexport function addLink(links, type = 'link') {\n  const link = { title: `Item ${links.length + 1}`, localID: ID(), type, sublinks: [] };\n  return (dispatch) => {\n    dispatch(formActions.push('settings.navlinksData.links', link));\n    dispatch(editLink(link.localID));\n  };\n}\n\nexport function addGroupLink(links, index) {\n  const link = { title: `Item ${index + 1} - ${links[index].sublinks.length + 1}`, localID: ID() };\n  return (dispatch) => {\n    dispatch(formActions.push(`settings.navlinksData.links[${index}].sublinks`, link));\n    dispatch(editLink(link.localID));\n  };\n}\n\nexport function sortLink(originIndex, targetIndex) {\n  return formActions.move('settings.navlinksData.links', originIndex, targetIndex);\n}\n\nexport function removeLink(index) {\n  return formActions.remove('settings.navlinksData.links', index);\n}\n\nexport function removeGroupLink(groupLinkIndex, sublinkIndex) {\n  return formActions.remove(\n  `settings.navlinksData.links[${groupLinkIndex}].sublinks`,\n  sublinkIndex);\n\n}\n\nexport function saveLinks(data) {\n  return (dispatch) => {\n    dispatch({ type: types.SAVING_NAVLINKS });\n    return api.\n    save(new RequestParams(data)).\n    then((response) => {\n      dispatch({ type: types.NAVLINKS_SAVED, data: response });\n      dispatch(actions.set('settings/collection', response));\n      dispatch(notificationActions.notify('Saved successfully.', 'success'));\n    }).\n    catch(() => {\n      dispatch({ type: types.NAVLINKS_SAVED, data });\n    });\n  };\n}","export default function (links) {\n  const validator = {\n    '': {} };\n\n\n  links.forEach((_link, index) => {\n    validator[''][`links.${index}.title.required`] = (form) => {\n      if (!form.links[index]) {\n        return true;\n      }\n      const { title } = form.links[index];\n      return Boolean(title && String(title).trim().length);\n    };\n  });\n\n  return validator;\n}","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import { DragDropContext } from 'react-dnd';\nimport { HTML5Backend } from 'react-dnd-html5-backend';\nimport { Form } from 'react-redux-form';\nimport { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport React, { Component } from 'react';\n\nimport { Icon } from \"../../UI\";\nimport { isClient } from \"../../utils\";\nimport { loadLinks, addLink, sortLink, saveLinks } from \"../actions/navlinksActions\";\nimport { Translate } from \"../../I18N\";\nimport validator from \"../utils/ValidateNavlinks\";\n\nimport NavlinkForm from \"./NavlinkForm\";\nimport \"./styles/menu.scss\";\n\nclass NavlinksSettings extends Component {\n  componentDidMount() {\n    this.props.loadLinks(this.props.collection.get('links').toJS());\n    this.firstLoad = true;\n  }\n\n  // TEST!!!\n  componentDidUpdate(previousProps) {\n    if (this.firstLoad) {\n      this.firstLoad = false;\n      return;\n    }\n\n    this.focusOnNewElement(previousProps);\n  }\n\n  // TEST!!!\n  focusOnNewElement(previousProps) {\n    const { links } = this.props;\n    const previousLinks = previousProps.links;\n    const hasNewBlock = links.length > previousLinks.length;\n    if (hasNewBlock) {\n      this.blockReferences[this.blockReferences.length - 1].focus();\n    }\n  }\n\n  render() {\n    const { collection, links } = this.props;\n    const nameGroupClass = 'template-name';\n    const hostname = isClient ? window.location.origin : '';\n\n    const payload = { _id: collection.get('_id'), _rev: collection.get('_rev'), links };\n\n    this.blockReferences = [];\n\n    return /*#__PURE__*/(\n      _jsx(\"div\", { className: \"settings-content\" }, void 0, /*#__PURE__*/\n      _jsx(\"div\", { className: \"NavlinksSettings\" }, void 0, /*#__PURE__*/\n      _jsx(Form, {\n        model: \"settings.navlinksData\",\n        onSubmit: this.props.saveLinks.bind(this, payload),\n        className: \"navLinks\",\n        validators: validator(links) }, void 0, /*#__PURE__*/\n\n      _jsx(\"div\", { className: \"panel panel-default\" }, void 0, /*#__PURE__*/\n      _jsx(\"div\", { className: \"panel-heading\" }, void 0, /*#__PURE__*/\n      _jsx(\"div\", { className: nameGroupClass }, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Menu\"))), /*#__PURE__*/\n\n\n      _jsx(\"ul\", { className: \"list-group\" }, void 0, /*#__PURE__*/\n      _jsx(\"li\", { className: \"list-group-item\" }, void 0, /*#__PURE__*/\n      _jsx(\"div\", { className: \"alert alert-info\" }, void 0, /*#__PURE__*/\n      _jsx(Icon, { icon: \"info-circle\", size: \"2x\" }), /*#__PURE__*/\n      _jsx(\"div\", { className: \"force-ltr\" }, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"If it is an external URL, use a fully formed URL. Ie. http://www.uwazi.io.\"), /*#__PURE__*/\n\n\n      _jsx(\"br\", {}), /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"If it is an internal URL within this website, be sure to delete the first part\"),\n\n\n      ' ', \"(\",\n      hostname, \"),\", ' ', /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"leaving only a relative URL starting with a slash character. Ie. /some_url.\")))),\n\n\n\n\n\n      links.map((link, i) => /*#__PURE__*/\n      _jsx(NavlinkForm, {\n\n        index: i,\n        id: link.localID || link._id,\n        link: link,\n        sortLink: this.props.sortLink,\n        blockReferences: this.blockReferences }, link.localID || link._id))), /*#__PURE__*/\n\n\n\n      _jsx(\"div\", { className: \"settings-footer\" }, void 0, /*#__PURE__*/\n      _jsx(\"div\", { className: \"btn-cluster\" }, void 0, /*#__PURE__*/\n      _jsx(\"button\", {\n        type: \"button\",\n        className: \"btn btn-default\",\n        id: \"main-add-link-button\",\n        onClick: this.props.addLink.bind(this, links, 'link') }, void 0, /*#__PURE__*/\n\n      _jsx(Icon, { icon: \"link\" }), \"\\xA0\", /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Add link\")), /*#__PURE__*/\n\n      _jsx(\"button\", {\n        type: \"button\",\n        className: \"btn btn-default\",\n        onClick: this.props.addLink.bind(this, links, 'group') }, void 0, /*#__PURE__*/\n\n      _jsx(Icon, { icon: \"caret-square-down\" }), \"\\xA0\", /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Add group\"))), /*#__PURE__*/\n\n\n      _jsx(\"div\", { className: \"btn-cluster content-right\" }, void 0, /*#__PURE__*/\n      _jsx(\"button\", {\n        type: \"submit\",\n        className: \"btn btn-success btn-extra-padding\",\n        disabled: !!this.props.savingNavlinks }, void 0, /*#__PURE__*/\n\n      _jsx(\"span\", { className: \"btn-label\" }, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Save\"))))))))));\n\n\n\n\n\n\n\n\n\n  }}\n\n\n\n\n\n\n\n\n\n\n\n\nconst mapStateToProps = (state) => {\n  const { settings } = state;\n  const { collection } = settings;\n  const { links } = settings.navlinksData;\n  return { links, collection, savingNavlinks: settings.uiState.get('savingNavlinks') };\n};\n\nfunction mapDispatchToProps(dispatch) {\n  return bindActionCreators({ loadLinks, addLink, sortLink, saveLinks }, dispatch);\n}\n\nexport { NavlinksSettings, mapStateToProps };\n\nexport default DragDropContext(HTML5Backend)(\nconnect(mapStateToProps, mapDispatchToProps)(NavlinksSettings));","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import PropTypes from 'prop-types';\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport { I18NLink, t, Translate } from \"../../I18N\";\nimport {\ndeleteRelationType,\ncheckRelationTypeCanBeDeleted } from \"../../RelationTypes/actions/relationTypesActions\";\n\nimport relationTypesAPI from \"../../RelationTypes/RelationTypesAPI\";\nimport RouteHandler from \"../../App/RouteHandler\";\nimport { Icon } from \"../../UI\";\nimport { actions } from \"../../BasicReducer\";\nimport { notify } from \"../../Notifications/actions/notificationsActions\";\n\nclass RelationTypesList extends RouteHandler {\n  static async requestState(requestParams) {\n    const relationTypes = await relationTypesAPI.get(requestParams.onlyHeaders());\n    return [actions.set('relationTypes', relationTypes)];\n  }\n\n  deleteRelationType(relationType) {\n    return this.props.\n    checkRelationTypeCanBeDeleted(relationType).\n    then(() => {\n      this.context.confirm({\n        accept: () => {\n          this.props.deleteRelationType(relationType);\n        },\n        title: /*#__PURE__*/\n        React.createElement(React.Fragment, null, /*#__PURE__*/\n        _jsx(Translate, {}, void 0, \"Confirm delete connection type:\"), \"\\xA0\", relationType.name),\n\n\n        message: 'Are you sure you want to delete this connection type?' });\n\n    }).\n    catch(() => {\n      this.context.confirm({\n        accept: () => {},\n        noCancel: true,\n        title: /*#__PURE__*/\n        React.createElement(React.Fragment, null, /*#__PURE__*/\n        _jsx(Translate, {}, void 0, \"Cannot delete connection type:\"), \"\\xA0\", relationType.name),\n\n\n        message: 'This connection type is being used and cannot be deleted.' });\n\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/(\n      _jsx(\"div\", { className: \"settings-content\" }, void 0, /*#__PURE__*/\n      _jsx(\"div\", { className: \"panel panel-default\" }, void 0, /*#__PURE__*/\n      _jsx(\"div\", { className: \"panel-heading\" }, void 0, t('System', 'Relationship types')), /*#__PURE__*/\n      _jsx(\"ul\", { className: \"list-group relation-types\" }, void 0,\n      this.props.relationTypes.toJS().map((relationType, index) => /*#__PURE__*/\n      _jsx(\"li\", { className: \"list-group-item\" }, index, /*#__PURE__*/\n      _jsx(I18NLink, { to: `/settings/connections/edit/${relationType._id}` }, void 0,\n      relationType.name), /*#__PURE__*/\n\n      _jsx(\"div\", { className: \"list-group-item-actions\" }, void 0, /*#__PURE__*/\n      _jsx(I18NLink, {\n        to: `/settings/connections/edit/${relationType._id}`,\n        className: \"btn btn-default btn-xs\" }, void 0, /*#__PURE__*/\n\n      _jsx(Icon, { icon: \"pencil-alt\" }), \"\\xA0\", /*#__PURE__*/\n\n      _jsx(\"span\", {}, void 0, t('System', 'Edit'))), /*#__PURE__*/\n\n      _jsx(\"a\", {\n        onClick: this.deleteRelationType.bind(this, relationType),\n        className: \"btn btn-danger btn-xs template-remove\" }, void 0, /*#__PURE__*/\n\n      _jsx(Icon, { icon: \"trash-alt\" }), \"\\xA0\", /*#__PURE__*/\n\n      _jsx(\"span\", {}, void 0, t('System', 'Delete'))))))), /*#__PURE__*/\n\n\n\n\n\n      _jsx(\"div\", { className: \"settings-footer\" }, void 0, /*#__PURE__*/\n      _jsx(I18NLink, { to: \"/settings/connections/new\", className: \"btn btn-default\" }, void 0, /*#__PURE__*/\n      _jsx(Icon, { icon: \"plus\" }), /*#__PURE__*/\n      _jsx(\"span\", { className: \"btn-label\" }, void 0, t('System', 'Add connection')))))));\n\n\n\n\n\n  }}\n\n\nRelationTypesList.propTypes = {\n  relationTypes: PropTypes.object,\n  deleteRelationType: PropTypes.func,\n  notify: PropTypes.func,\n  checkRelationTypeCanBeDeleted: PropTypes.func };\n\n\nRelationTypesList.contextTypes = {\n  confirm: PropTypes.func,\n  store: PropTypes.object };\n\n\nfunction mapStateToProps(state) {\n  return { relationTypes: state.relationTypes };\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return bindActionCreators(\n  { notify, deleteRelationType, checkRelationTypeCanBeDeleted },\n  dispatch);\n\n}\n\nexport { RelationTypesList, mapStateToProps };\n\nexport default connect(mapStateToProps, mapDispatchToProps)(RelationTypesList);","import { actions } from \"../../BasicReducer\";\nimport TemplatesAPI from \"../../Templates/TemplatesAPI\";\nimport api from \"../ThesauriAPI\";\nimport { RequestParams } from \"../../utils/RequestParams\";\nimport { actions as formActions } from 'react-redux-form';\n\nexport function editThesaurus(thesaurus) {\n  return (dispatch) => {\n    dispatch(formActions.reset('thesauri.data'));\n    dispatch(formActions.load('thesauri.data', thesaurus));\n  };\n}\n\nexport function deleteThesaurus(thesaurus) {\n  return (dispatch) =>\n  api.delete(new RequestParams({ _id: thesaurus._id })).then(() => {\n    dispatch(actions.remove('dictionaries', thesaurus));\n  });\n}\n\nexport function checkThesaurusCanBeDeleted(thesaurus) {\n  return (dispatch) =>\n  TemplatesAPI.countByThesauri(new RequestParams({ _id: thesaurus._id })).then((count) =>\n  count ? Promise.reject() : dispatch);\n\n}\n\nexport function reloadThesauri() {\n  return (dispatch) =>\n  api.get().then((response) => {\n    dispatch(actions.set('thesauris', response));\n  });\n}","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import { I18NLink, t, Translate } from \"../../I18N\";\nimport { checkThesaurusCanBeDeleted, deleteThesaurus } from \"../../Thesauri/actions/thesaurisActions\";\nimport PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport { Icon } from \"../../UI\";\nimport sortThesauri from \"../utils/sortThesauri\";\n\nclass ThesauriList extends Component {\n  getThesaurusSuggestionActions(thesaurus) {\n    const showSuggestions =\n    this.props.topicClassificationEnabled || thesaurus.enable_classification;\n    return (\n      showSuggestions && /*#__PURE__*/\n      _jsx(\"div\", { className: \"vertical-line\" }, void 0,\n      thesaurus.enable_classification && /*#__PURE__*/\n      _jsx(\"span\", { className: \"thesaurus-suggestion-count\" }, void 0,\n      thesaurus.suggestions ? thesaurus.suggestions.toLocaleString() : 'No', \"\\xA0\",\n      t('System', 'documents to be reviewed')), /*#__PURE__*/\n\n\n      _jsx(I18NLink, {\n        to: `/settings/dictionaries/cockpit/${thesaurus._id}`,\n        className: \"btn btn-default btn-xs\" }, void 0, /*#__PURE__*/\n\n      _jsx(\"span\", {}, void 0, t('System', 'Configure suggestions')))));\n\n\n\n\n  }\n\n  getThesaurusModifyActions(thesaurus) {\n    return /*#__PURE__*/(\n      _jsx(\"div\", {}, void 0, /*#__PURE__*/\n      _jsx(I18NLink, {\n        to: `/settings/dictionaries/edit/${thesaurus._id}`,\n        className: \"btn btn-default btn-xs\",\n        confirmTitle:\n        thesaurus.enable_classification ? 'Confirm edit suggestion-enabled Thesaurus' : '',\n\n        confirmMessage:\n        thesaurus.enable_classification ?\n        'Uwazi suggests labels based on the current content of the document collection and its metadata. ' +\n        'Editing this thesaurus, the content of the documents or other metadata can affect Uwazis understanding of what to suggest.' :\n        '' }, void 0, /*#__PURE__*/\n\n\n      _jsx(Icon, { icon: \"pencil-alt\" }), \"\\xA0\", /*#__PURE__*/\n\n      _jsx(\"span\", {}, void 0, t('System', 'Edit'))),\n\n      '  ', /*#__PURE__*/\n      _jsx(\"button\", {\n        onClick: this.deleteThesaurus.bind(this, thesaurus),\n        className: \"btn btn-danger btn-xs template-remove\",\n        type: \"button\" }, void 0, /*#__PURE__*/\n\n      _jsx(Icon, { icon: \"trash-alt\" }), \"\\xA0\", /*#__PURE__*/\n\n      _jsx(\"span\", {}, void 0, t('System', 'Delete')))));\n\n\n\n  }\n\n  deleteThesaurus(thesaurus) {\n    return this.props.\n    checkThesaurusCanBeDeleted(thesaurus).\n    then(() => {\n      this.context.confirm({\n        accept: () => {\n          this.props.deleteThesaurus(thesaurus);\n        },\n        title: /*#__PURE__*/\n        React.createElement(React.Fragment, null, /*#__PURE__*/\n        _jsx(Translate, {}, void 0, \"Confirm delete thesaurus:\"), \"\\xA0\", thesaurus.name),\n\n\n        message: 'Are you sure you want to delete this thesaurus?' });\n\n    }).\n    catch(() => {\n      this.context.confirm({\n        accept: () => {},\n        noCancel: true,\n        title: /*#__PURE__*/\n        React.createElement(React.Fragment, null, /*#__PURE__*/\n        _jsx(Translate, {}, void 0, \"Cannot delete thesaurus:\\xA0\"), \"\\xA0\", thesaurus.name),\n\n\n        message: 'This thesaurus is being used in document types and cannot be deleted.' });\n\n    });\n  }\n\n  thesaurusNode(thesaurus) {\n    return /*#__PURE__*/(\n      _jsx(\"tr\", {}, thesaurus.name, /*#__PURE__*/\n      _jsx(\"th\", { scope: \"row\" }, void 0, thesaurus.name), /*#__PURE__*/\n      _jsx(\"td\", {}, void 0, this.getThesaurusSuggestionActions(thesaurus)), /*#__PURE__*/\n      _jsx(\"td\", {}, void 0, this.getThesaurusModifyActions(thesaurus))));\n\n\n  }\n\n  render() {\n    return /*#__PURE__*/(\n      _jsx(\"div\", { className: \"settings-content\" }, void 0, /*#__PURE__*/\n      _jsx(\"div\", { className: \"flex panel panel-default\" }, void 0, /*#__PURE__*/\n      _jsx(\"div\", { className: \"panel-heading\" }, void 0, t('System', 'Thesauri')), /*#__PURE__*/\n      _jsx(\"div\", { className: \"thesauri-list\" }, void 0, /*#__PURE__*/\n      _jsx(\"table\", {}, void 0, /*#__PURE__*/\n      _jsx(\"thead\", {}, void 0, /*#__PURE__*/\n      _jsx(\"tr\", {}, void 0, /*#__PURE__*/\n      _jsx(\"th\", { className: \"nameCol\", scope: \"col\" }), /*#__PURE__*/\n      _jsx(\"th\", { scope: \"col\" }), /*#__PURE__*/\n      _jsx(\"th\", { scope: \"col\" }))), /*#__PURE__*/\n\n\n      _jsx(\"tbody\", {}, void 0,\n      sortThesauri(this.props.dictionaries.toJS()).map((thesaurus) =>\n      this.thesaurusNode(thesaurus))))), /*#__PURE__*/\n\n\n\n\n      _jsx(\"div\", { className: \"settings-footer\" }, void 0, /*#__PURE__*/\n      _jsx(I18NLink, { to: \"/settings/dictionaries/new\", className: \"btn btn-default\" }, void 0, /*#__PURE__*/\n      _jsx(Icon, { icon: \"plus\" }), /*#__PURE__*/\n      _jsx(\"span\", { className: \"btn-label\" }, void 0, t('System', 'Add thesaurus')))))));\n\n\n\n\n\n  }}\n\n\n\n\n\n\n\n\n\nThesauriList.contextTypes = {\n  confirm: PropTypes.func };\n\n\nexport function mapStateToProps(state) {\n  return {\n    dictionaries: state.dictionaries,\n    topicClassificationEnabled: (state.settings.collection.toJS().features || {}).\n    topicClassification };\n\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return bindActionCreators(\n  {\n    deleteThesaurus,\n    checkThesaurusCanBeDeleted },\n\n  dispatch);\n\n}\n\nexport { ThesauriList };\nexport default connect(mapStateToProps, mapDispatchToProps)(ThesauriList);","export default function sortThesauri(list) {\n  list.sort((a, b) => a.name.toLowerCase().localeCompare(b.name.toLowerCase()));\n  return list;\n}","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport { I18NLink, t } from \"../../I18N\";\nimport { advancedSort } from \"../../utils/advancedSort\";\nimport { Icon } from \"../../UI\";\n\nimport { notify } from \"../../Notifications/actions/notificationsActions\";\n\nclass TranslationsList extends Component {\n  render() {\n    const { settings, translations } = this.props;\n    const defaultLanguage = settings.\n    get('languages').\n    find((lang) => lang.get('default')).\n    get('key');\n    const defaultTranslation = translations.find(\n    (translation) => translation.get('locale') === defaultLanguage);\n\n    const contexts = advancedSort(\n    defaultTranslation.\n    get('contexts').\n    toJS().\n    map((c) => {\n      c.sort = c.type + c.label;\n      return c;\n    }),\n    { property: 'sort' });\n\n    return /*#__PURE__*/(\n      _jsx(\"div\", { className: \"settings-content without-footer\" }, void 0, /*#__PURE__*/\n      _jsx(\"div\", { className: \"TranslationsList panel panel-default\" }, void 0, /*#__PURE__*/\n      _jsx(\"div\", { className: \"panel-heading\" }, void 0, t('System', 'Translations')), /*#__PURE__*/\n      _jsx(\"ul\", { className: \"list-group relation-types\" }, void 0,\n      contexts.map((context, index) => /*#__PURE__*/\n      _jsx(\"li\", { className: \"list-group-item\" }, index, /*#__PURE__*/\n      _jsx(\"div\", {}, void 0, /*#__PURE__*/\n      _jsx(\"span\", { className: \"item-type item-type-empty\" }, void 0, /*#__PURE__*/\n      _jsx(\"span\", { className: \"item-type__name\" }, void 0, context.type)), /*#__PURE__*/\n\n      _jsx(I18NLink, { to: `/settings/translations/edit/${encodeURIComponent(context.id)}` }, void 0,\n      context.label)), /*#__PURE__*/\n\n\n      _jsx(\"div\", { className: \"list-group-item-actions\" }, void 0, /*#__PURE__*/\n      _jsx(I18NLink, {\n        to: `/settings/translations/edit/${encodeURIComponent(context.id)}`,\n        className: \"btn btn-default btn-xs\" }, void 0, /*#__PURE__*/\n\n      _jsx(Icon, { icon: \"language\" }), \" \", t('System', 'Translate')))))))));\n\n\n\n\n\n\n\n\n  }}\n\n\n\n\n\n\n\n\nfunction mapStateToProps(state) {\n  return {\n    translations: state.translations,\n    settings: state.settings.collection };\n\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return bindActionCreators({ notify }, dispatch);\n}\n\nexport { TranslationsList, mapStateToProps };\n\nexport default connect(mapStateToProps, mapDispatchToProps)(TranslationsList);","/** @format */\n\n\n\n/**\n * A given template property may refer to an existing thesaurus to provide\n * multi-select values. This function resolves a template property name that\n * refers to a particular thesaurus.\n */\nexport function resolveTemplateProp(thesaurus, templates) {\n  let matchingProp;\n  for (let i = 0; i < templates.length; i += 1) {var _template$properties;\n    const template = templates[i];\n    const matchProp = (_template$properties = template.properties) === null || _template$properties === void 0 ? void 0 : _template$properties.find((prop) => prop.content === thesaurus._id);\n    if (matchProp !== undefined) {\n      matchingProp = matchProp;\n      // TODO: Consider supporting multiple fields referring to the same thesaurus.\n      break;\n    }\n  }\n  return matchingProp;\n}","function ownKeys(object, enumerableOnly) {var keys = Object.keys(object);if (Object.getOwnPropertySymbols) {var symbols = Object.getOwnPropertySymbols(object);enumerableOnly && (symbols = symbols.filter(function (sym) {return Object.getOwnPropertyDescriptor(object, sym).enumerable;})), keys.push.apply(keys, symbols);}return keys;}function _objectSpread(target) {for (var i = 1; i < arguments.length; i++) {var source = null != arguments[i] ? arguments[i] : {};i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {_defineProperty(target, key, source[key]);}) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));});}return target;}function _defineProperty(obj, key, value) {if (key in obj) {Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });} else {obj[key] = value;}return obj;}\n\nfunction baseQuery(templateID, includeUnpublished, unpublishedOnly) {\n  const query = {\n    select: ['sharedId'],\n    limit: 1,\n    filters: {},\n    includeUnpublished,\n    unpublished: unpublishedOnly,\n    allAggregations: true,\n    types: [templateID],\n    includeReviewAggregations: true };\n\n  return query;\n}\n\nexport function getReadyToReviewSuggestionsQuery(\ntemplateID,\ntemplateProperty)\n{\n  if (!templateProperty || !templateProperty.name) {\n    return null;\n  }\n  const { name } = templateProperty;\n  return _objectSpread(_objectSpread({},\n  baseQuery(templateID, true, false)), {}, {\n    filters: {\n      [name]: {\n        values: ['missing'] },\n\n      [`__${name}`]: {\n        values: ['any'] } } });\n\n\n\n}\n\nexport function getReadyToPublishSuggestionsQuery(\ntemplateID,\ntemplateProperty)\n{\n  if (!templateProperty || !templateProperty.name) {\n    return null;\n  }\n  const { name } = templateProperty;\n  return _objectSpread(_objectSpread({},\n  baseQuery(templateID, false, true)), {}, {\n    filters: {\n      [name]: {\n        values: ['any'] },\n\n      [`__${name}`]: {\n        values: ['any'] } } });\n\n\n\n}\n\nexport function getLabelsQuery(templateID, templateProperty) {\n  if (!templateProperty || !templateProperty.name) {\n    return null;\n  }\n  const { name } = templateProperty;\n  return _objectSpread(_objectSpread({},\n  baseQuery(templateID, true, false)), {}, {\n    filters: {\n      [name]: {\n        values: ['any'] } } });\n\n\n\n}","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import React from 'react';\nimport { I18NLink, Translate } from \"../../I18N\";\nimport { NeedAuthorization } from \"../../Auth\";\nimport { Icon } from \"../../UI\";\nimport { FeatureToggle } from \"../../components/Elements/FeatureToggle\";\n\nconst SettingsNavigation = () => /*#__PURE__*/\n_jsx(\"div\", {}, void 0, /*#__PURE__*/\n_jsx(\"div\", { className: \"panel panel-default\" }, void 0, /*#__PURE__*/\n_jsx(\"div\", { className: \"panel-heading\" }, void 0, /*#__PURE__*/\n_jsx(Translate, {}, void 0, \"Settings\")), /*#__PURE__*/\n\n_jsx(\"div\", { className: \"list-group\" }, void 0, /*#__PURE__*/\n_jsx(I18NLink, { to: \"settings/account\", activeClassName: \"active\", className: \"list-group-item\" }, void 0, /*#__PURE__*/\n_jsx(Translate, {}, void 0, \"Account\")), /*#__PURE__*/\n\n_jsx(NeedAuthorization, { roles: ['admin'] }, void 0, /*#__PURE__*/\n_jsx(I18NLink, { to: \"settings/users\", activeClassName: \"active\", className: \"list-group-item\" }, void 0, /*#__PURE__*/\n_jsx(Translate, {}, void 0, \"Users\"))), /*#__PURE__*/\n\n\n_jsx(NeedAuthorization, { roles: ['admin'] }, void 0, /*#__PURE__*/\n_jsx(I18NLink, { to: \"settings/collection\", activeClassName: \"active\", className: \"list-group-item\" }, void 0, /*#__PURE__*/\n_jsx(Translate, {}, void 0, \"Collection\"))), /*#__PURE__*/\n\n\n_jsx(NeedAuthorization, { roles: ['admin'] }, void 0, /*#__PURE__*/\n_jsx(I18NLink, { to: \"settings/navlinks\", activeClassName: \"active\", className: \"list-group-item\" }, void 0, /*#__PURE__*/\n_jsx(Translate, {}, void 0, \"Menu\"))), /*#__PURE__*/\n\n\n_jsx(NeedAuthorization, { roles: ['admin'] }, void 0, /*#__PURE__*/\n_jsx(I18NLink, { to: \"settings/pages\", activeClassName: \"active\", className: \"list-group-item\" }, void 0, /*#__PURE__*/\n_jsx(Translate, {}, void 0, \"Pages\"))), /*#__PURE__*/\n\n\n_jsx(NeedAuthorization, { roles: ['admin'] }, void 0, /*#__PURE__*/\n_jsx(I18NLink, { to: \"settings/languages\", activeClassName: \"active\", className: \"list-group-item\" }, void 0, /*#__PURE__*/\n_jsx(Translate, {}, void 0, \"Languages\"))), /*#__PURE__*/\n\n\n_jsx(NeedAuthorization, { roles: ['admin'] }, void 0, /*#__PURE__*/\n_jsx(I18NLink, { to: \"settings/translations\", activeClassName: \"active\", className: \"list-group-item\" }, void 0, /*#__PURE__*/\n_jsx(Translate, {}, void 0, \"Translations\"))), /*#__PURE__*/\n\n\n_jsx(NeedAuthorization, { roles: ['admin'] }, void 0, /*#__PURE__*/\n_jsx(I18NLink, { to: \"settings/filters\", activeClassName: \"active\", className: \"list-group-item\" }, void 0, /*#__PURE__*/\n_jsx(Translate, {}, void 0, \"Filters configuration\"))))), /*#__PURE__*/\n\n\n\n\n_jsx(\"div\", { className: \"panel panel-default\" }, void 0, /*#__PURE__*/\n_jsx(NeedAuthorization, { roles: ['admin'] }, void 0, /*#__PURE__*/\n_jsx(\"div\", { className: \"panel-heading\" }, void 0, /*#__PURE__*/\n_jsx(Translate, {}, void 0, \"Metadata\"))), /*#__PURE__*/\n\n\n_jsx(\"div\", { className: \"list-group\" }, void 0, /*#__PURE__*/\n_jsx(NeedAuthorization, { roles: ['admin'] }, void 0, /*#__PURE__*/\n_jsx(I18NLink, { to: \"settings/templates\", activeClassName: \"active\", className: \"list-group-item\" }, void 0, /*#__PURE__*/\n_jsx(Translate, {}, void 0, \"Templates\"))), /*#__PURE__*/\n\n\n_jsx(FeatureToggle, { feature: \"metadataExtraction.url\" }, void 0, /*#__PURE__*/\n_jsx(NeedAuthorization, { roles: ['admin'] }, void 0, /*#__PURE__*/\n_jsx(I18NLink, {\n  to: \"settings/metadata_extraction\",\n  activeClassName: \"active\",\n  className: \"list-group-item\" }, void 0, /*#__PURE__*/\n\n_jsx(Translate, {}, void 0, \"Metadata Extraction\")))), /*#__PURE__*/\n\n\n\n_jsx(NeedAuthorization, { roles: ['admin'] }, void 0, /*#__PURE__*/\n_jsx(I18NLink, { to: \"settings/dictionaries\", activeClassName: \"active\", className: \"list-group-item\" }, void 0, /*#__PURE__*/\n_jsx(Translate, {}, void 0, \"Thesauri\"))), /*#__PURE__*/\n\n\n_jsx(NeedAuthorization, { roles: ['admin'] }, void 0, /*#__PURE__*/\n_jsx(I18NLink, { to: \"settings/connections\", activeClassName: \"active\", className: \"list-group-item\" }, void 0, /*#__PURE__*/\n_jsx(Translate, {}, void 0, \"Relationship types\")))), /*#__PURE__*/\n\n\n\n\n_jsx(\"div\", { className: \"panel-heading\" }, void 0, /*#__PURE__*/\n_jsx(Translate, {}, void 0, \"Tools\")), /*#__PURE__*/\n\n_jsx(\"div\", { className: \"list-group\" }, void 0, /*#__PURE__*/\n_jsx(FeatureToggle, { feature: \"preserve.host\" }, void 0, /*#__PURE__*/\n_jsx(NeedAuthorization, { roles: ['admin'] }, void 0, /*#__PURE__*/\n_jsx(I18NLink, { to: \"/settings/preserve\", activeClassName: \"active\", className: \"list-group-item\" }, void 0, /*#__PURE__*/\n_jsx(Translate, {}, void 0, \"Preserve Extension\"), \" \", /*#__PURE__*/_jsx(Icon, { icon: \"square\" })))), /*#__PURE__*/\n\n\n\n_jsx(NeedAuthorization, { roles: ['admin'] }, void 0, /*#__PURE__*/\n_jsx(I18NLink, { to: \"settings/activitylog\", activeClassName: \"active\", className: \"list-group-item\" }, void 0, /*#__PURE__*/\n_jsx(Translate, {}, void 0, \"Activity log\")), /*#__PURE__*/\n\n_jsx(I18NLink, {\n  to: \"/settings/customisation\",\n  activeClassName: \"active\",\n  className: \"list-group-item\" }, void 0, /*#__PURE__*/\n\n_jsx(Translate, {}, void 0, \"Global CSS\")), /*#__PURE__*/\n\n_jsx(I18NLink, {\n  to: \"/settings/custom-uploads\",\n  activeClassName: \"active\",\n  className: \"list-group-item\" }, void 0, /*#__PURE__*/\n\n_jsx(Translate, {}, void 0, \"Uploads\"))), /*#__PURE__*/\n\n\n_jsx(\"a\", {\n  className: \"list-group-item\",\n  href: \"https://uwazi.readthedocs.io/en/latest/\",\n  target: \"_blank\",\n  rel: \"noopener noreferrer\" }, void 0, /*#__PURE__*/\n\n_jsx(\"span\", {}, void 0, /*#__PURE__*/\n_jsx(Translate, {}, void 0, \"Documentation\"), \" \", /*#__PURE__*/_jsx(Icon, { icon: \"external-link-alt\" }))))));\n\n\n\n\n\n\n\nexport { SettingsNavigation };","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import React from 'react';\nimport { Helmet } from 'react-helmet';\nimport RouteHandler from \"../App/RouteHandler\";\nimport { actions } from \"../BasicReducer\";\nimport { I18NApi, t } from \"../I18N\";\nimport api from \"../Search/SearchAPI\";\nimport TemplatesAPI from \"../Templates/TemplatesAPI\";\nimport ThesauriAPI from \"../Thesauri/ThesauriAPI\";\nimport UsersAPI from \"../Users/UsersAPI\";\nimport { resolveTemplateProp } from \"./utils/resolveProperty\";\nimport { getReadyToReviewSuggestionsQuery } from \"./utils/suggestions\";\n\nimport { SettingsNavigation } from \"./components/SettingsNavigation\";\nimport SettingsAPI from \"./SettingsAPI\";\n\nexport class Settings extends RouteHandler {\n  static async requestState(requestParams) {\n    const request = requestParams.onlyHeaders();\n    const [user, thesauri, translations, collection, templates] = await Promise.all([\n    UsersAPI.currentUser(request),\n    ThesauriAPI.getThesauri(request),\n    I18NApi.get(request),\n    SettingsAPI.get(request),\n    TemplatesAPI.get(requestParams.onlyHeaders())]);\n\n\n    // This builds and queries elasticsearch for suggestion counts per thesaurus\n    const props = thesauri.\n    filter((thesaurus) => thesaurus.enable_classification).\n    map((thesaurus) => resolveTemplateProp(thesaurus, templates));\n    const allDocsWithSuggestions = await Promise.all(\n    [].concat(\n    ...props.map((p) =>\n    templates.map((template) => {\n      const reqParams = requestParams.set(getReadyToReviewSuggestionsQuery(template._id, p));\n      return api.search(reqParams);\n    }))));\n\n\n\n\n    // This processes the search results per thesaurus and stores the aggregate  number of documents to review\n    const propToAgg = props.map((p) =>\n    templates.map((template) => [p, [template, allDocsWithSuggestions.shift()]]));\n\n    propToAgg.forEach((tup) => {\n      tup.forEach((perm) => {\n        const prop = perm[0];\n        const results = perm[1][1];\n        const uniqueDocs = results.totalRows;\n\n        const thesaurus = thesauri.find((th) => th._id === prop.content);\n        if (!thesaurus.hasOwnProperty('suggestions')) {\n          thesaurus.suggestions = 0;\n        }\n        thesaurus.suggestions += uniqueDocs;\n      });\n    });\n\n    return [\n    actions.set('auth/user', user),\n    actions.set('dictionaries', thesauri),\n    actions.set('translations', translations),\n    actions.set('settings/collection', collection)];\n\n  }\n\n  render() {\n    return /*#__PURE__*/(\n      _jsx(\"div\", { className: \"row settings\" }, void 0, /*#__PURE__*/\n      _jsx(Helmet, {}, void 0, /*#__PURE__*/\n      _jsx(\"title\", {}, void 0, t('System', 'Settings', null, false))), /*#__PURE__*/\n\n      _jsx(\"div\", { className: \"settings-navigation\" }, void 0, /*#__PURE__*/\n      _jsx(SettingsNavigation, {})),\n\n      this.props.children));\n\n\n  }}\n\n\nexport default Settings;","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import React, { useEffect, useState } from 'react';\nimport { connect } from 'react-redux';\nimport api from \"../../utils/api\";\nimport { Translate } from \"../../I18N\";\nimport { Icon } from \"../../UI\";\n\nimport \"./styles/preserve.scss\";\n\nfunction mapStateToProps({ settings, user }) {\n  return {\n    settings: settings.collection,\n    user };\n\n}\n\nconst connector = connect(mapStateToProps);\n\n\n\nconst PreserveSettingsComp = ({ settings, user }) => {\n  const [token, setToken] = useState('');\n  const requestToken = async (e) => {\n    e.preventDefault();\n    const result = await api.post('preserve');\n    setToken(result.json.token);\n  };\n\n  useEffect(() => {var _settings$get, _preserve$get;\n    const preserve = (_settings$get = settings.get('features')) === null || _settings$get === void 0 ? void 0 : _settings$get.get('preserve');\n    const userConfigs = preserve === null || preserve === void 0 ? void 0 : (_preserve$get = preserve.\n    get('config')) === null || _preserve$get === void 0 ? void 0 : _preserve$get.\n    find((conf) => {var _conf$get, _user$get;return (conf === null || conf === void 0 ? void 0 : (_conf$get = conf.get('user')) === null || _conf$get === void 0 ? void 0 : _conf$get.toString()) === ((_user$get = user.get('_id')) === null || _user$get === void 0 ? void 0 : _user$get.toString());});\n\n    if (userConfigs) {\n      const savedToken = userConfigs.get('token');\n      setToken(savedToken);\n    }\n  }, []);\n\n  return /*#__PURE__*/(\n    _jsx(\"div\", { className: \"settings-content\" }, void 0, /*#__PURE__*/\n    _jsx(\"div\", { className: \"panel panel-preserve\" }, void 0, /*#__PURE__*/\n    _jsx(\"div\", { className: \"panel-preserve-heading\" }, void 0, /*#__PURE__*/\n    _jsx(Icon, { icon: \"square\" }), \" \", /*#__PURE__*/_jsx(Translate, {}, void 0, \"Preserve Extension\")), /*#__PURE__*/\n\n    _jsx(\"div\", { className: \"panel-preserve-content\" }, void 0, /*#__PURE__*/\n    _jsx(\"div\", { className: \"status\" }, void 0, /*#__PURE__*/\n    _jsx(Translate, {}, void 0, \"You have not connected an Uwazi instance, yet\")), /*#__PURE__*/\n\n    _jsx(\"div\", { className: \"setup\" }, void 0, /*#__PURE__*/\n    _jsx(\"div\", { className: \"span\" }, void 0, /*#__PURE__*/\n    _jsx(Translate, {}, void 0, \"INSTALL the browser extension\")), /*#__PURE__*/\n\n    _jsx(\"br\", {}), /*#__PURE__*/\n    _jsx(\"div\", { className: \"span\" }, void 0, /*#__PURE__*/\n    _jsx(Translate, { translationKey: \"Preserve Setup Description\" }, void 0, \"If you know your Uwazi URL and TOKEN click the link below, and fill the required information.\")), /*#__PURE__*/\n\n\n\n\n    _jsx(\"div\", { className: \"install-buttons\" }, void 0, /*#__PURE__*/\n    _jsx(\"button\", { type: \"button\" }, void 0, /*#__PURE__*/\n    _jsx(Translate, {}, void 0, \"Install browser extension (dynamic link)\")), /*#__PURE__*/\n\n    _jsx(\"div\", {}, void 0, /*#__PURE__*/\n    _jsx(\"a\", {\n      href: \"https://uwazi.readthedocs.io/en/latest/\",\n      target: \"_blank\",\n      rel: \"noopener noreferrer\" }, void 0, /*#__PURE__*/\n\n    _jsx(Translate, {}, void 0, \"Chrome extension store link\"))), /*#__PURE__*/\n\n\n    _jsx(\"div\", {}, void 0, /*#__PURE__*/\n    _jsx(\"a\", {\n      href: \"https://uwazi.readthedocs.io/en/latest/\",\n      target: \"_blank\",\n      rel: \"noopener noreferrer\" }, void 0, /*#__PURE__*/\n\n    _jsx(Translate, {}, void 0, \"Firefox extension store link\")))), /*#__PURE__*/\n\n\n\n    _jsx(\"hr\", {}), /*#__PURE__*/\n    _jsx(\"div\", { className: \"preserve-token\" }, void 0, /*#__PURE__*/\n    _jsx(\"div\", {}, void 0, /*#__PURE__*/\n    _jsx(Translate, {}, void 0, \"Configuration\")), /*#__PURE__*/\n\n    _jsx(\"form\", { onSubmit: requestToken }, void 0, /*#__PURE__*/\n    _jsx(\"div\", { className: \"form-group\" }, void 0, /*#__PURE__*/\n    _jsx(\"label\", { className: \"form-group-label\", htmlFor: \"collection_name\" }, void 0, /*#__PURE__*/\n    _jsx(Translate, {}, void 0, \"Extension Token\")), /*#__PURE__*/\n\n    _jsx(\"input\", { value: token, className: \"form-control\", disabled: true })),\n\n    token && /*#__PURE__*/\n    _jsx(\"button\", {\n      className: \"btn btn-success\",\n      type: \"button\",\n      onClick: async () => {\n        await navigator.clipboard.writeText(token);\n      } }, void 0, /*#__PURE__*/\n\n    _jsx(Translate, {}, void 0, \"Copy token\")),\n\n\n    !token && /*#__PURE__*/\n    _jsx(\"button\", { type: \"submit\", className: \"btn btn-success\" }, void 0, /*#__PURE__*/\n    _jsx(Translate, {}, void 0, \"Request token\"))), /*#__PURE__*/\n\n\n\n    _jsx(\"div\", { className: \"info\" }, void 0, /*#__PURE__*/\n    _jsx(Translate, {}, void 0, \"Some information about the token\"))))))));\n\n\n\n\n\n\n\n};\nconst container = connector(PreserveSettingsComp);\nexport { container as PreserveSettings };","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\nimport Dropzone from 'react-dropzone';\nimport Immutable from 'immutable';\nimport PropTypes from 'prop-types';\nimport React from 'react';\n\nimport { Thumbnail, ConfirmButton } from \"../../Layout\";\nimport { actions } from \"../../BasicReducer\";\nimport { Translate } from \"../../I18N\";\nimport RouteHandler from \"../../App/RouteHandler\";\nimport api from \"../../utils/api\";\nimport { Icon } from \"../../UI\";\n\nimport { uploadCustom, deleteCustomUpload } from \"../../Uploads/actions/uploadsActions\";\n\nclass CustomUploads extends RouteHandler {\n  static async requestState(requestParams) {\n    const customUploads = await api.get('files', requestParams.add({ type: 'custom' }));\n    return [actions.set('customUploads', customUploads.json)];\n  }\n\n  constructor(props, context) {\n    super(props, context);\n    this.onDrop = this.onDrop.bind(this);\n  }\n\n  onDrop(files) {\n    files.forEach((file) => {\n      this.props.upload(file);\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/(\n      _jsx(\"div\", { className: \"settings-content without-footer\" }, void 0, /*#__PURE__*/\n      _jsx(\"div\", { className: \"panel panel-default\" }, void 0, /*#__PURE__*/\n      _jsx(\"div\", { className: \"panel-heading\" }, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Custom Uploads\")), /*#__PURE__*/\n\n      _jsx(\"div\", { className: \"panel-body custom-uploads\" }, void 0, /*#__PURE__*/\n      _jsx(Dropzone, { className: \"upload-box\", onDrop: this.onDrop }, void 0, /*#__PURE__*/\n      _jsx(\"div\", { className: \"upload-box_wrapper\" }, void 0, /*#__PURE__*/\n      _jsx(Icon, { icon: \"upload\" }), /*#__PURE__*/\n      _jsx(\"button\", { className: \"upload-box_link\", type: \"button\" }, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Browse files to upload\")), /*#__PURE__*/\n\n      _jsx(\"span\", {}, void 0, \"\\xA0\", /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"or drop your files here.\"))),\n\n\n      this.props.progress && /*#__PURE__*/\n      _jsx(\"div\", { className: \"uploading\" }, void 0, /*#__PURE__*/\n      _jsx(Icon, { icon: \"spinner\", spin: true }), /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Uploading ...\"))), /*#__PURE__*/\n\n\n\n      _jsx(\"ul\", {}, void 0,\n      this.props.customUploads.map((upload) => /*#__PURE__*/\n      _jsx(\"li\", {}, upload.get('filename'), /*#__PURE__*/\n      _jsx(Thumbnail, { file: `/assets/${upload.get('filename')}` }), /*#__PURE__*/\n      _jsx(\"div\", { className: \"info\" }, void 0, /*#__PURE__*/\n      _jsx(\"span\", { \"no-translate\": true }, void 0, \"URL:\"), /*#__PURE__*/\n      _jsx(\"span\", { className: \"thumbnail-url\" }, void 0, `/assets/${upload.get('filename')}`), /*#__PURE__*/\n      _jsx(ConfirmButton, { action: () => this.props.deleteCustomUpload(upload.get('_id')) }, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Delete\"))))))))));\n\n\n\n\n\n\n\n\n\n  }}\n\n\nCustomUploads.defaultProps = {\n  progress: false };\n\n\nCustomUploads.propTypes = {\n  progress: PropTypes.bool,\n  customUploads: PropTypes.instanceOf(Immutable.List).isRequired,\n  upload: PropTypes.func.isRequired,\n  deleteCustomUpload: PropTypes.func.isRequired };\n\n\nexport const mapStateToProps = ({ customUploads, progress }) => ({\n  customUploads,\n  progress: !!progress.filter((_v, key) => key.match(/customUpload/)).size });\n\n\nconst mapDispatchToProps = (dispatch) =>\nbindActionCreators({ upload: uploadCustom, deleteCustomUpload }, dispatch);\n\nexport { CustomUploads };\n\nexport default connect(mapStateToProps, mapDispatchToProps)(CustomUploads);","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import React from 'react';\nimport { createSelector } from 'reselect';\nimport { StateSelector } from \"../../Review/components/StateSelector\";\n\n\n\n\n\n\nconst OnTemplateLoaded = ({ children }) => /*#__PURE__*/\n_jsx(StateSelector, {\n  templateLoaded: createSelector(\n  (state) => state.template.data._id,\n  (templateId) => Boolean(templateId)) }, void 0,\n\n\n({ templateLoaded }) => templateLoaded ? children : false);\n\n\n\nexport { OnTemplateLoaded };","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import React from 'react';\nimport { actions as formActions } from 'react-redux-form';\n\nimport templatesAPI from \"./TemplatesAPI\";\nimport thesauriAPI from \"../Thesauri/ThesauriAPI\";\nimport relationTypesAPI from \"../RelationTypes/RelationTypesAPI\";\nimport TemplateCreator from \"./components/TemplateCreator\";\nimport { actions } from \"../BasicReducer\";\nimport RouteHandler from \"../App/RouteHandler\";\nimport { OnTemplateLoaded } from \"./components/OnTemplateLoaded\";\nimport { prepareTemplate } from \"./actions/templateActions\";\n\nexport default class EditTemplate extends RouteHandler {\n  static async requestState(requestParams) {\n    const { templateId } = requestParams.data;\n    const [templates, thesauris, relationTypes] = await Promise.all([\n    templatesAPI.get(requestParams.onlyHeaders()),\n    thesauriAPI.get(requestParams.onlyHeaders()),\n    relationTypesAPI.get(requestParams.onlyHeaders())]);\n\n\n    const template = templates.find((tmpl) => tmpl._id === templateId);\n\n    return [\n    formActions.load('template.data', prepareTemplate(template)),\n    actions.set('thesauris', thesauris),\n    actions.set('templates', templates),\n    actions.set('relationTypes', relationTypes)];\n\n  }\n\n  componentDidMount() {\n    this.context.store.dispatch(formActions.reset('template.data'));\n  }\n\n  render() {\n    return /*#__PURE__*/(\n      _jsx(\"div\", { className: \"settings-content sm-footer-extra-row\" }, void 0, /*#__PURE__*/\n      _jsx(OnTemplateLoaded, {}, void 0, /*#__PURE__*/\n      _jsx(TemplateCreator, {}))));\n\n\n\n  }}","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import React from 'react';\n\nimport thesauriAPI from \"../Thesauri/ThesauriAPI\";\nimport relationTypesAPI from \"../RelationTypes/RelationTypesAPI\";\nimport { actions } from \"../BasicReducer\";\nimport TemplateCreator from \"./components/TemplateCreator\";\nimport RouteHandler from \"../App/RouteHandler\";\n\nexport default class NewTemplate extends RouteHandler {\n  static async requestState(requestParams) {\n    const [thesauri, relationTypes] = await Promise.all([\n    thesauriAPI.get(requestParams.onlyHeaders()),\n    relationTypesAPI.get(requestParams.onlyHeaders())]);\n\n\n    return [actions.set('thesauris', thesauri), actions.set('relationTypes', relationTypes)];\n  }\n\n  render() {\n    return /*#__PURE__*/(\n      _jsx(\"div\", { className: \"settings-content sm-footer-extra-row\" }, void 0, /*#__PURE__*/\n      _jsx(TemplateCreator, {})));\n\n\n  }}","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport { Field } from 'react-redux-form';\nimport { Icon } from \"../../UI\";\nimport { Translate } from \"../../I18N\";\n\nexport class ThesauriFormField extends Component {\n  constructor(props) {\n    super(props);\n    // eslint-disable-next-line react/no-unused-class-component-methods\n    this.focus = () => {\n      this.groupInput.focus();\n    };\n  }\n\n  renderValue(_value, index, groupIndex) {\n    const { removeValue } = this.props;\n    let model = `thesauri.data.values[${index}].label`;\n    if (groupIndex !== undefined) {\n      model = `thesauri.data.values[${groupIndex}].values[${index}].label`;\n    }\n    return /*#__PURE__*/(\n      _jsx(\"div\", {}, `item-${groupIndex || ''}${index}`, /*#__PURE__*/\n      _jsx(Field, { model: model }, void 0, /*#__PURE__*/\n      _jsx(\"input\", { className: \"form-control\", type: \"text\", placeholder: \"Item name\" }), /*#__PURE__*/\n      _jsx(\"button\", {\n        tabIndex: index + 500,\n        type: \"button\",\n        className: \"btn btn-xs btn-danger\",\n        onClick: removeValue.bind(null, index, groupIndex) }, void 0, /*#__PURE__*/\n\n      _jsx(Icon, { icon: \"trash-alt\" }), \" \", /*#__PURE__*/_jsx(Translate, {}, void 0, \"Delete\")))));\n\n\n\n\n  }\n\n  render() {\n    const { value, index, groupIndex } = this.props;\n    return this.renderValue(value, index, groupIndex);\n  }}\n\n\nThesauriFormField.defaultProps = {\n  groupIndex: undefined };\n\n\n\n\n\n\n\n\n\n\n\n\nexport default ThesauriFormField;","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}function _extends() {_extends = Object.assign ? Object.assign.bind() : function (target) {for (var i = 1; i < arguments.length; i++) {var source = arguments[i];for (var key in source) {if (Object.prototype.hasOwnProperty.call(source, key)) {target[key] = source[key];}}}return target;};return _extends.apply(this, arguments);}import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { Field } from 'react-redux-form';\nimport { DragAndDropContainer } from \"../../Layout/DragAndDrop\";\nimport { Icon } from \"../../UI\";\nimport { Translate } from \"../../I18N\";\n\nimport FormGroup from \"../../DocumentForm/components/FormGroup\";\n\nimport ThesauriFormField from \"./ThesauriFormField\";\n\nexport class ThesauriFormGroup extends Component {\n  constructor(props) {\n    super(props);\n    // eslint-disable-next-line react/no-unused-class-component-methods\n    this.focus = () => {\n      this.groupInput.focus();\n    };\n    this.renderItem = this.renderItem.bind(this);\n    this.onChange = this.onChange.bind(this);\n    this.removeGroup = this.removeGroup.bind(this);\n  }\n\n  onChange(values) {\n    const { index, onChange: onGroupChanged } = this.props;\n    onGroupChanged(values, index);\n  }\n\n  removeGroup() {\n    const { index, removeValue } = this.props;\n    removeValue(index);\n  }\n\n  renderItem(item, index) {\n    const { index: groupIndex } = this.props;\n    return /*#__PURE__*/React.createElement(ThesauriFormField, _extends({}, this.props, { value: item, index: index, groupIndex: groupIndex }));\n  }\n\n  render() {\n    const { value, index: groupIndex } = this.props;\n    return /*#__PURE__*/(\n      _jsx(\"div\", { className: \"group\" }, `group-${groupIndex}`, /*#__PURE__*/\n      _jsx(FormGroup, {}, void 0, /*#__PURE__*/\n      _jsx(Field, { model: `thesauri.data.values[${groupIndex}].label` }, void 0, /*#__PURE__*/\n      React.createElement(\"input\", {\n        ref: (i) => {\n          this.groupInput = i;\n        },\n        className: \"form-control\",\n        type: \"text\",\n        placeholder: \"Group name\" }), /*#__PURE__*/\n\n      _jsx(\"button\", {\n        tabIndex: groupIndex + 500,\n        type: \"button\",\n        className: \"btn btn-xs btn-danger\",\n        onClick: this.removeGroup }, void 0, /*#__PURE__*/\n\n      _jsx(Icon, { icon: \"trash-alt\" }), \" \", /*#__PURE__*/_jsx(Translate, {}, void 0, \"Delete Group\")))), /*#__PURE__*/\n\n\n\n      _jsx(DragAndDropContainer, {\n        items: value.values,\n        iconHandle: true,\n        renderItem: this.renderItem,\n        onChange: this.onChange })));\n\n\n\n  }}\n\n\n\n\n\n\n\n\n\n\n\n\n\nexport default ThesauriFormGroup;","function _extends() {_extends = Object.assign ? Object.assign.bind() : function (target) {for (var i = 1; i < arguments.length; i++) {var source = arguments[i];for (var key in source) {if (Object.prototype.hasOwnProperty.call(source, key)) {target[key] = source[key];}}}return target;};return _extends.apply(this, arguments);}import PropTypes from 'prop-types';\nimport React, { Component } from 'react';\n\nimport ThesauriFormField from \"./ThesauriFormField\";\nimport ThesauriFormGroup from \"./ThesauriFormGroup\";\n\nexport class ThesauriFormItem extends Component {\n  constructor(props) {\n    super(props);\n    // eslint-disable-next-line react/no-unused-class-component-methods\n    this.focus = () => this.groupItem && this.groupItem.focus();\n  }\n\n  render() {\n    const { value } = this.props;\n    if (value.values) {\n      return /*#__PURE__*/(\n        React.createElement(ThesauriFormGroup, _extends({\n          ref: (f) => {\n            this.groupItem = f;\n          } },\n        this.props)));\n\n\n    }\n    return /*#__PURE__*/React.createElement(ThesauriFormField, this.props);\n  }}\n\n\n\n\n\n\n\n\n\n\n\nexport default ThesauriFormItem;","function _extends() {_extends = Object.assign ? Object.assign.bind() : function (target) {for (var i = 1; i < arguments.length; i++) {var source = arguments[i];for (var key in source) {if (Object.prototype.hasOwnProperty.call(source, key)) {target[key] = source[key];}}}return target;};return _extends.apply(this, arguments);}var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}function ownKeys(object, enumerableOnly) {var keys = Object.keys(object);if (Object.getOwnPropertySymbols) {var symbols = Object.getOwnPropertySymbols(object);enumerableOnly && (symbols = symbols.filter(function (sym) {return Object.getOwnPropertyDescriptor(object, sym).enumerable;})), keys.push.apply(keys, symbols);}return keys;}function _objectSpread(target) {for (var i = 1; i < arguments.length; i++) {var source = null != arguments[i] ? arguments[i] : {};i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {_defineProperty(target, key, source[key]);}) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));});}return target;}function _defineProperty(obj, key, value) {if (key in obj) {Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });} else {obj[key] = value;}return obj;} /* eslint-disable max-lines */\nimport ShowIf from \"../../App/ShowIf\";\nimport FormGroup from \"../../DocumentForm/components/FormGroup\";\nimport { BackButton } from \"../../Layout\";\nimport { DragAndDropContainer } from \"../../Layout/DragAndDrop\";\nimport { notEmpty } from \"../../Metadata/helpers/validator\";\nimport {\naddGroup,\naddValue,\nimportThesaurus,\nremoveValue,\nsaveThesaurus,\nsortValues,\nupdateValues } from \"../actions/thesauriActions\";\n\nimport PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { actions as formActions, Field, Form } from 'react-redux-form';\nimport { bindActionCreators } from 'redux';\nimport { Icon } from \"../../UI\";\nimport { I18NLink, Translate } from \"../../I18N\";\n\nimport { SelectFileButton } from \"../../App/SelectFileButton\";\nimport { ThesauriFormItem } from \"./ThesauriFormItem\";\n\nfunction sanitizeThesauri(thesaurus) {\n  const sanitizedThesauri = _objectSpread({}, thesaurus);\n  sanitizedThesauri.values = sanitizedThesauri.values.\n  filter((value) => value.label).\n  filter((value) => !value.values || value.values.length).\n  map((value) => {\n    const _value = _objectSpread({}, value);\n    if (_value.values) {\n      _value.values = _value.values.filter((_v) => _v.label);\n    }\n    return _value;\n  });\n  return sanitizedThesauri;\n}\n\nclass ThesauriForm extends Component {\n  static validation(thesauris, id) {\n    return {\n      name: {\n        duplicated: (val) =>\n        !thesauris.find(\n        (thesauri) =>\n        thesauri.type !== 'template' &&\n        thesauri._id !== id &&\n        thesauri.name.trim().toLowerCase() === val.trim().toLowerCase()),\n\n        required: notEmpty } };\n\n\n  }\n\n  constructor(props) {\n    super(props);\n    this.save = this.save.bind(this);\n    this.renderItem = this.renderItem.bind(this);\n    this.onChange = this.onChange.bind(this);\n    this.importThesaurusFile = this.importThesaurusFile.bind(this);\n  }\n\n  componentDidMount() {\n    this.firstLoad = true;\n  }\n\n  componentDidUpdate(previousProps) {\n    if (this.firstLoad) {\n      this.firstLoad = false;\n      return;\n    }\n\n    this.addEmptyValueAtTheEnd();\n\n    this.focusIfWasGroup(previousProps);\n  }\n\n  componentWillUnmount() {\n    this.props.resetForm('thesauri.data');\n    this.props.setInitial('thesauri.data');\n  }\n\n  onChange(values, groupIndex) {\n    this.props.updateValues(values, groupIndex);\n  }\n\n  importThesaurusFile(file) {\n    const thes = sanitizeThesauri(this.props.thesauri);\n    this.props.importThesaurus(thes, file);\n  }\n\n  focusIfWasGroup(previousProps) {\n    const { values } = this.props.thesauri;\n    const previousValues = previousProps.thesauri.values;\n    const addedValue = values.length > previousProps.thesauri.values.length;\n    const lastValueIsGroup = values.length && values[values.length - 1].values;\n    const previousLastValueWasGroup =\n    previousValues.length && previousValues[previousValues.length - 1].values;\n    if (lastValueIsGroup && (!previousLastValueWasGroup || addedValue)) {\n      this.groups[this.groups.length - 1].focus();\n    }\n  }\n\n  addEmptyValueAtTheEnd() {\n    this.props.thesauri.values.forEach((value, index) => {\n      if (\n      value.values && (\n      !value.values.length || value.values[value.values.length - 1].label !== ''))\n      {\n        this.props.addValue(index);\n      }\n    });\n\n    if (\n    !this.props.thesauri.values.length ||\n    this.props.thesauri.values[this.props.thesauri.values.length - 1].label !== '')\n    {\n      this.props.addValue();\n    }\n  }\n\n  save(thesauri) {\n    const sanitizedThesauri = sanitizeThesauri(thesauri);\n    this.props.saveThesaurus(sanitizedThesauri);\n  }\n\n  renderItem(value, index) {\n    return /*#__PURE__*/(\n      React.createElement(ThesauriFormItem, {\n        ref: (f) => this.groups.push(f),\n        value: value,\n        index: index,\n        removeValue: this.props.removeValue,\n        onChange: this.onChange }));\n\n\n  }\n\n  render() {\n    const isNew = this.props.new;\n    const id = this.props.thesauri._id;\n    const { values } = this.props.thesauri;\n    if (!isNew && !id) {\n      return false;\n    }\n\n    this.groups = [];\n    return /*#__PURE__*/(\n      _jsx(\"div\", { className: \"thesauri\" }, void 0, /*#__PURE__*/\n      _jsx(Form, {\n        model: \"thesauri.data\",\n        onSubmit: this.save,\n        validators: ThesauriForm.validation(this.props.thesauris.toJS(), this.props.thesauri._id) }, void 0, /*#__PURE__*/\n\n      _jsx(\"div\", { className: \"panel panel-default thesauri\" }, void 0, /*#__PURE__*/\n      _jsx(\"div\", { className: \"panel-heading\" }, void 0, /*#__PURE__*/\n      React.createElement(FormGroup, _extends({}, this.props.state.name, { submitFailed: this.props.state.submitFailed }), /*#__PURE__*/\n      _jsx(Field, { model: \".name\" }, void 0, /*#__PURE__*/\n      _jsx(\"input\", {\n        id: \"thesauriName\",\n        className: \"form-control\",\n        type: \"text\",\n        placeholder: \"Thesauri name\" }), /*#__PURE__*/\n\n      _jsx(ShowIf, {\n        if:\n        this.props.state.$form.touched &&\n        this.props.state.name &&\n        this.props.state.name.errors.duplicated }, void 0, /*#__PURE__*/\n\n\n      _jsx(\"div\", { className: \"validation-error\" }, void 0, /*#__PURE__*/\n      _jsx(Icon, { icon: \"exclamation-triangle\", size: \"xs\" }), \"\\xA0\", /*#__PURE__*/\n\n      _jsx(Translate, {}, void 0, \"Duplicated name\")))))), /*#__PURE__*/\n\n\n\n\n\n      _jsx(\"div\", { className: \"thesauri-values\" }, void 0, /*#__PURE__*/\n      _jsx(\"div\", { className: \"\" }, void 0, /*#__PURE__*/\n      _jsx(\"b\", {}, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Items:\"))), /*#__PURE__*/\n\n\n      _jsx(DragAndDropContainer, {\n        onChange: this.onChange,\n        renderItem: this.renderItem,\n        items: values,\n        iconHandle: true })), /*#__PURE__*/\n\n\n      _jsx(\"div\", { className: \"settings-footer\" }, void 0, /*#__PURE__*/\n      _jsx(\"div\", { className: \"btn-cluster\" }, void 0, /*#__PURE__*/\n      _jsx(BackButton, { to: \"/settings/dictionaries\", className: \"btn-plain\" })), /*#__PURE__*/\n\n      _jsx(\"div\", { className: \"btn-cluster lg-margin-left-12 sm-order-1 sm-footer-extra-row\" }, void 0, /*#__PURE__*/\n      _jsx(\"button\", { type: \"button\", className: \"btn btn-default\", onClick: this.props.addGroup }, void 0, /*#__PURE__*/\n      _jsx(Icon, { icon: \"plus\" }), /*#__PURE__*/\n      _jsx(\"span\", { className: \"btn-label\" }, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Add group\"))), /*#__PURE__*/\n\n\n      _jsx(\"button\", { type: \"button\", className: \"btn btn-default\", onClick: this.props.sortValues }, void 0, /*#__PURE__*/\n      _jsx(Icon, { icon: \"sort-alpha-down\" }), /*#__PURE__*/\n      _jsx(\"span\", { className: \"btn-label\" }, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Sort\"))), /*#__PURE__*/\n\n\n      _jsx(SelectFileButton, { onFileImported: this.importThesaurusFile }, void 0, /*#__PURE__*/\n      _jsx(\"button\", { type: \"button\", className: \"btn btn-default import-template\" }, void 0, /*#__PURE__*/\n      _jsx(Icon, { icon: \"upload\" }), /*#__PURE__*/\n      _jsx(\"span\", { className: \"btn-label\" }, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Import\"))))), /*#__PURE__*/\n\n\n\n\n      _jsx(\"div\", { className: \"btn-cluster content-right\" }, void 0, /*#__PURE__*/\n      _jsx(I18NLink, { to: \"/settings/dictionaries\", className: \"btn btn-default btn-extra-padding\" }, void 0, /*#__PURE__*/\n      _jsx(\"span\", { className: \"btn-label\" }, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Cancel\"))), /*#__PURE__*/\n\n\n      _jsx(\"button\", { type: \"submit\", className: \"btn btn-success btn-extra-padding save-template\" }, void 0, /*#__PURE__*/\n      _jsx(\"span\", { className: \"btn-label\" }, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Save\")))))))));\n\n\n\n\n\n\n\n\n  }}\n\n\nThesauriForm.defaultProps = {\n  new: false };\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nfunction mapStateToProps(state) {\n  return {\n    thesauri: state.thesauri.data,\n    thesauris: state.thesauris,\n    state: state.thesauri.formState };\n\n}\n\nfunction bindActions(dispatch) {\n  return bindActionCreators(\n  {\n    saveThesaurus,\n    importThesaurus,\n    addValue,\n    addGroup,\n    sortValues,\n    removeValue,\n    updateValues,\n    resetForm: formActions.reset,\n    setInitial: formActions.setInitial,\n    validate: formActions.validate },\n\n  dispatch);\n\n}\n\nexport { ThesauriForm, mapStateToProps };\n\nexport default connect(mapStateToProps, bindActions, null, { withRef: true })(ThesauriForm);","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };} /** @format */\n\nimport React from 'react';\n\nimport RouteHandler from \"../App/RouteHandler\";\nimport ThesauriForm from \"./components/ThesauriForm\";\nimport { editThesaurus } from \"./actions/thesaurisActions\";\nimport api from \"./ThesauriAPI\";\n\nexport default class EditThesauri extends RouteHandler {\n  static async requestState(requestParams) {\n    const thesauris = await api.get(requestParams);\n\n    return [editThesaurus(thesauris[0])];\n  }\n\n  render() {\n    return /*#__PURE__*/(\n      _jsx(\"div\", { className: \"settings-content sm-footer-extra-row\" }, void 0, /*#__PURE__*/\n      _jsx(ThesauriForm, {})));\n\n\n  }}","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };} /** @format */\n\nimport React from 'react';\n\nimport RouteHandler from \"../App/RouteHandler\";\nimport ThesauriForm from \"./components/ThesauriForm\";\nimport { actions } from \"../BasicReducer\";\nimport api from \"./ThesauriAPI\";\n\nexport default class NewThesauri extends RouteHandler {\n  static async requestState(requestParams) {\n    const thesauris = await api.get(requestParams);\n    return [actions.set('thesauris', thesauris)];\n  }\n\n  render() {\n    return /*#__PURE__*/(\n      _jsx(\"div\", { className: \"settings-content sm-footer-extra-row\" }, void 0, /*#__PURE__*/\n      _jsx(ThesauriForm, { new: true })));\n\n\n  }}","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}function _defineProperty(obj, key, value) {if (key in obj) {Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });} else {obj[key] = value;}return obj;} /* eslint-disable max-lines,camelcase */\nimport Footer from \"../App/Footer\";\nimport RouteHandler from \"../App/RouteHandler\";\nimport { actions } from \"../BasicReducer\";\nimport Loader from \"../components/Elements/Loader\";\nimport { I18NLink, t, Translate } from \"../I18N\";\n\nimport { resolveTemplateProp } from \"../Settings/utils/resolveProperty\";\nimport TemplatesAPI from \"../Templates/TemplatesAPI\";\nimport { Notice } from \"./Notice\";\nimport ThesauriAPI from \"./ThesauriAPI\";\n\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { createSelector } from 'reselect';\n\nimport { Icon } from \"../UI\";\nimport {\nstartTraining,\ntoggleEnableClassification,\nupdateCockpitData } from \"./actions/cockpitActions\";\n\nimport { getValuesSortedByName } from \"./utils/valuesSort\";\n\n\n\n\n\n\n\n\n\n\n\nclass ThesaurusCockpitBase extends RouteHandler {constructor(...args) {super(...args);_defineProperty(this, \"interval\",\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n    undefined);}static async requestState(requestParams) {// Thesauri should always have a length of 1, because a specific thesaurus ID is passed in the requestParams.\n    const [thesauri, templates] = await Promise.all([ThesauriAPI.getThesauri(requestParams), TemplatesAPI.get(requestParams.onlyHeaders())]);const thesaurus = thesauri[0];const assocProp = resolveTemplateProp(thesaurus, templates);return [actions.set('templates', templates), actions.set('thesauri.thesaurus', thesaurus), actions.set('thesauri.suggestInfo', { property: assocProp }), updateCockpitData(requestParams)];}topicNode(topic) {var _suggestInfo$docsWith, _suggestInfo$docsWith2, _suggestInfo$docsWith3, _suggestInfo$docsWith4, _suggestInfo$docsWith5, _suggestInfo$docsWith6, _label, _suggestInfo$model$to, _suggestInfo$model, _suggestInfo$model$to2, _suggestInfo$model2, _suggestInfo$property, _suggestInfo$property2, _suggestInfo$property3;const { thesaurus, suggestInfo } = this.props;const { label, id } = topic;const suggestionCount = (_suggestInfo$docsWith = (_suggestInfo$docsWith2 = suggestInfo.docsWithSuggestionsForReview) === null || _suggestInfo$docsWith2 === void 0 ? void 0 : (_suggestInfo$docsWith3 = _suggestInfo$docsWith2.thesaurus) === null || _suggestInfo$docsWith3 === void 0 ? void 0 : _suggestInfo$docsWith3.totalValues[`${id}`]) !== null && _suggestInfo$docsWith !== void 0 ? _suggestInfo$docsWith : 0;const labelCount = (_suggestInfo$docsWith4 = (_suggestInfo$docsWith5 = suggestInfo.docsWithLabels) === null || _suggestInfo$docsWith5 === void 0 ? void 0 : (_suggestInfo$docsWith6 = _suggestInfo$docsWith5.thesaurus) === null || _suggestInfo$docsWith6 === void 0 ? void 0 : _suggestInfo$docsWith6.totalValues[`${id}`]) !== null && _suggestInfo$docsWith4 !== void 0 ? _suggestInfo$docsWith4 : 0;const topicQuality = (_label = ((_suggestInfo$model$to = (_suggestInfo$model = suggestInfo.model) === null || _suggestInfo$model === void 0 ? void 0 : _suggestInfo$model.topics) !== null && _suggestInfo$model$to !== void 0 ? _suggestInfo$model$to : {})[label]) !== null && _label !== void 0 ? _label : ((_suggestInfo$model$to2 = (_suggestInfo$model2 = suggestInfo.model) === null || _suggestInfo$model2 === void 0 ? void 0 : _suggestInfo$model2.topics) !== null && _suggestInfo$model$to2 !== void 0 ? _suggestInfo$model$to2 : {})[id];return /*#__PURE__*/_jsx(\"tr\", {}, label, /*#__PURE__*/_jsx(\"th\", { scope: \"row\" }, void 0, label, topicQuality && !!topicQuality.quality && topicQuality.quality < 0.5 && /*#__PURE__*/_jsx(\"span\", { className: \"property-help confidence-bubble low\" }, void 0, /*#__PURE__*/_jsx(Translate, {}, void 0, \"low\"), /*#__PURE__*/_jsx(\"div\", { className: \"property-description\" }, void 0, /*#__PURE__*/_jsx(Translate, {}, void 0, \"Improve the quality of this topic's suggestions by finding more sample documents with this label.\")))), /*#__PURE__*/_jsx(\"td\", { title: \"sample-count\" }, void 0, labelCount ? labelCount.toLocaleString() : '-'), /*#__PURE__*/_jsx(\"td\", { title: \"suggestions-count\" }, void 0, suggestionCount ? suggestionCount.toLocaleString() : '-'), /*#__PURE__*/_jsx(\"td\", { title: \"review-button\" }, void 0, suggestionCount > 0 && thesaurus.enable_classification && (_suggestInfo$property = suggestInfo.property) !== null && _suggestInfo$property !== void 0 && _suggestInfo$property.name ? /*#__PURE__*/_jsx(I18NLink, { to: `/review?q=(filters:(__${(_suggestInfo$property2 = suggestInfo.property) === null || _suggestInfo$property2 === void 0 ? void 0 : _suggestInfo$property2.name}:(values:!('${id}')),` + `${(_suggestInfo$property3 = suggestInfo.property) === null || _suggestInfo$property3 === void 0 ? void 0 : _suggestInfo$property3.name}:(values:!(missing))))&includeUnpublished=1`, className: \"btn btn-default btn-xs\" }, void 0, /*#__PURE__*/_jsx(\"span\", { title: \"review-button-title\" }, void 0, t('System', 'View suggestions'))) : null));}learningNotice() {var _suggestInfo$model$co, _suggestInfo$model3, _suggestInfo$model3$c, _suggestInfo$model$co2, _suggestInfo$model4, _suggestInfo$model4$c, _suggestInfo$docsWith7, _suggestInfo$model5, _tasksState$TrainStat, _tasksState$TrainStat2;const { thesaurus, tasksState, suggestInfo } = this.props;const numTopics = getValuesSortedByName(thesaurus).length;const numTrained = ((_suggestInfo$model$co = (_suggestInfo$model3 = suggestInfo.model) === null || _suggestInfo$model3 === void 0 ? void 0 : (_suggestInfo$model3$c = _suggestInfo$model3.config) === null || _suggestInfo$model3$c === void 0 ? void 0 : _suggestInfo$model3$c.num_test) !== null && _suggestInfo$model$co !== void 0 ? _suggestInfo$model$co : 0) + ((_suggestInfo$model$co2 = (_suggestInfo$model4 = suggestInfo.model) === null || _suggestInfo$model4 === void 0 ? void 0 : (_suggestInfo$model4$c = _suggestInfo$model4.config) === null || _suggestInfo$model4$c === void 0 ? void 0 : _suggestInfo$model4$c.num_train) !== null && _suggestInfo$model$co2 !== void 0 ? _suggestInfo$model$co2 : 0);const numLabeled = (_suggestInfo$docsWith7 = suggestInfo.docsWithLabels) === null || _suggestInfo$docsWith7 === void 0 ? void 0 : _suggestInfo$docsWith7.totalRows;const modelTime = (_suggestInfo$model5 = suggestInfo.model) === null || _suggestInfo$model5 === void 0 ? void 0 : _suggestInfo$model5.preferred;const isLearning = ((_tasksState$TrainStat = tasksState.TrainState) === null || _tasksState$TrainStat === void 0 ? void 0 : _tasksState$TrainStat.state) === 'running';const modelDate = modelTime && +modelTime > 1000000000 && +modelTime < 2000000000 ? new Date(+modelTime * 1000) : null;let status;if (modelTime) {status = /*#__PURE__*/_jsx(\"div\", { className: \"block\" }, void 0, /*#__PURE__*/_jsx(\"div\", { className: \"stretch\" }, void 0, /*#__PURE__*/_jsx(Translate, { translationKey: \"Suggested labels description\" }, void 0, \"Uwazi has suggested labels for your collection. Review them using the \\\"View suggestions\\\" button next to each topic. Disable suggestions with the \\\"Show suggestions\\\" toggle.\"), /*#__PURE__*/_jsx(\"br\", {}), /*#__PURE__*/_jsx(\"br\", {}), /*#__PURE__*/_jsx(Translate, {}, void 0, \"You can also improve the model by providing more labeled documents.\")), /*#__PURE__*/_jsx(\"div\", { className: \"footer\" }, void 0, /*#__PURE__*/_jsx(I18NLink, { title: \"label-docs\", to: `/library/?quickLabelThesaurus=${thesaurus._id}&q=(allAggregations:!t,includeUnpublished:!t)`, className: \"btn btn-primary get-started\" }, void 0, /*#__PURE__*/_jsx(Translate, {}, void 0, \"Label more documents\"))));} else {status = /*#__PURE__*/_jsx(\"div\", { className: \"block\" }, void 0, /*#__PURE__*/_jsx(\"div\", { className: \"stretch\" }, void 0, /*#__PURE__*/_jsx(Translate, {}, void 0, \"The first step is to label a sample of your documents, so Uwazi can learn which topics to suggest when helping you label your collection.\")), /*#__PURE__*/_jsx(\"div\", { className: \"footer\" }, void 0, /*#__PURE__*/_jsx(I18NLink, { title: \"label-docs\", to: `/library/?quickLabelThesaurus=${thesaurus._id}&q=(allAggregations:!t,includeUnpublished:!t)`, className: \"btn btn-primary get-started\" }, void 0, /*#__PURE__*/_jsx(\"span\", {}, void 0, t('System', numLabeled === 0 ? 'Get started' : 'Label more documents')))));}const learning = /*#__PURE__*/_jsx(\"div\", { className: \"block\" }, void 0, /*#__PURE__*/_jsx(\"div\", { className: \"stretch\" }, void 0, modelDate && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/_jsx(Translate, {}, void 0, \"The current model was trained at\"), \"\\xA0\", modelDate.toLocaleString(), \" \", /*#__PURE__*/_jsx(Translate, {}, void 0, \"with\"), \" \", numTrained, \"\\xA0\", /*#__PURE__*/_jsx(Translate, {}, void 0, \"documents.\"), /*#__PURE__*/_jsx(\"br\", {}), /*#__PURE__*/_jsx(\"br\", {})), (numLabeled !== null && numLabeled !== void 0 ? numLabeled : 0) < numTopics * 30 && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/_jsx(Translate, {}, void 0, \"We recommend labeling\"), \" \", numTopics * 30, ' ', /*#__PURE__*/_jsx(Translate, {}, void 0, \"documents before training (30 per topic).\"), /*#__PURE__*/_jsx(\"br\", {}), /*#__PURE__*/_jsx(\"br\", {})), /*#__PURE__*/_jsx(Translate, {}, void 0, \"You have labeled\"), \" \", numLabeled, ' ', /*#__PURE__*/_jsx(Translate, {}, void 0, \"documents so far.\"), isLearning && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/_jsx(\"br\", {}), /*#__PURE__*/_jsx(\"br\", {}), /*#__PURE__*/_jsx(Translate, {}, void 0, \"Uwazi is learning using the labelled documents. This may take up to 2 hours, and once completed you can review suggestions made by Uwazi for your collection.\"))), /*#__PURE__*/_jsx(\"div\", { className: \"footer\" }, void 0, isLearning && /*#__PURE__*/_jsx(\"div\", { className: \"btn-label property-help\" }, void 0, /*#__PURE__*/_jsx(\"span\", {}, void 0, /*#__PURE__*/_jsx(Translate, {}, void 0, \"Learning...\"), \" \", /*#__PURE__*/_jsx(Icon, { icon: \"spinner\", spin: true })), /*#__PURE__*/_jsx(\"div\", { className: \"property-description\" }, void 0, (_tasksState$TrainStat2 = tasksState.TrainState) === null || _tasksState$TrainStat2 === void 0 ? void 0 : _tasksState$TrainStat2.message)), !isLearning && numLabeled && numLabeled > numTrained && numLabeled > numTopics * 20 && /*#__PURE__*/_jsx(\"button\", { type: \"button\", className: \"btn btn-default\", onClick: () => this.props.startTraining() }, void 0, /*#__PURE__*/_jsx(\"span\", { className: \"btn-label\" }, void 0, t('System', 'Train model')))));return /*#__PURE__*/_jsx(Notice, { title: \"Suggestion Status\" }, void 0, status, learning);}topicNodes() {const { thesaurus } = this.props;const values = getValuesSortedByName(thesaurus);return values.map((topic) => this.topicNode(topic));}\n  componentDidMount() {\n    this.interval = window.setInterval(() => this.props.updateCockpitData(), 10000);\n  }\n\n  componentWillUnmount() {\n    this.emptyState();\n    if (this.interval) {\n      clearInterval(this.interval);\n    }\n  }\n\n  emptyState() {\n    this.context.store.dispatch(actions.unset('thesauri.suggestInfo'));\n    this.context.store.dispatch(actions.unset('thesauri.thesaurus'));\n    this.context.store.dispatch(actions.unset('thesauri.tasksState'));\n  }\n\n  renderEnableSuggestionsToggle() {\n    const { thesaurus, suggestInfo } = this.props;\n    const modelAvailable = suggestInfo.model && suggestInfo.model.preferred;\n    return (\n      (modelAvailable || thesaurus.enable_classification) && /*#__PURE__*/\n      _jsx(\"button\", {\n        onClick: () => this.props.toggleEnableClassification(),\n        className:\n        thesaurus.enable_classification ?\n        'btn btn-default btn-xs btn-toggle-on' :\n        'btn btn-default btn-xs btn-toggle-off',\n\n        type: \"button\" }, void 0, /*#__PURE__*/\n\n      _jsx(Icon, { icon: thesaurus.enable_classification ? 'toggle-on' : 'toggle-off' }), \"\\xA0\", /*#__PURE__*/\n\n      _jsx(\"span\", {}, void 0, t('System', 'Show Suggestions'))));\n\n\n\n  }\n\n  publishButton() {var _suggestInfo$docsWith8;\n    const { thesaurus, suggestInfo } = this.props;\n\n    // Don't show the 'publish' button when there's nothing to be published\n    if (\n    !thesaurus ||\n    !suggestInfo.property ||\n    !((_suggestInfo$docsWith8 = suggestInfo.docsWithSuggestionsForPublish) !== null && _suggestInfo$docsWith8 !== void 0 && _suggestInfo$docsWith8.totalLabels))\n    {\n      return null;\n    }\n    const thesaurusPropertyRefName = suggestInfo.property.name;\n\n    return /*#__PURE__*/(\n      _jsx(I18NLink, {\n        title: \"publish-button\",\n        to:\n        `/library/?quickLabelThesaurus=${thesaurus._id}&` +\n        `q=(filters:(__${thesaurusPropertyRefName}:(values:!(any)),${thesaurusPropertyRefName}:(values:!(any))),` +\n        'limit:100,order:desc,sort:creationDate,unpublished:!t)',\n\n        className: \"btn btn-primary btn-xs\" }, void 0, /*#__PURE__*/\n\n      _jsx(Translate, {}, void 0, \"Review unpublished document\")));\n\n\n  }\n\n  render() {var _tasksState$SyncState;\n    const { thesaurus, tasksState, topicClassificationEnabled } = this.\n    props;\n    const { name } = thesaurus;\n    if (!name || !((_tasksState$SyncState = tasksState.SyncState) !== null && _tasksState$SyncState !== void 0 && _tasksState$SyncState.state)) {\n      return /*#__PURE__*/(\n        _jsx(\"div\", { className: \"settings-content\" }, void 0, /*#__PURE__*/\n        _jsx(Loader, {})));\n\n\n    }\n    return /*#__PURE__*/(\n      _jsx(\"div\", { className: \"settings-content\" }, void 0, /*#__PURE__*/\n      _jsx(\"div\", { className: \"flex thesaurus-cockpit panel panel-default\" }, void 0, /*#__PURE__*/\n      _jsx(\"div\", { className: \"panel-heading\" }, void 0,\n      t('System', `Thesauri > ${name}`),\n      this.renderEnableSuggestionsToggle(),\n      this.publishButton()), /*#__PURE__*/\n\n      _jsx(\"div\", { className: \"cockpit\" }, void 0,\n      topicClassificationEnabled && this.learningNotice(), /*#__PURE__*/\n      _jsx(\"table\", {}, void 0, /*#__PURE__*/\n      _jsx(\"thead\", {}, void 0, /*#__PURE__*/\n      _jsx(\"tr\", {}, void 0, /*#__PURE__*/\n      _jsx(\"th\", { scope: \"col\" }, void 0, name), /*#__PURE__*/\n      _jsx(\"th\", { scope: \"col\" }, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Sample\")), /*#__PURE__*/\n\n      _jsx(\"th\", { scope: \"col\" }, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Documents to be reviewed\")), /*#__PURE__*/\n\n      _jsx(\"th\", { scope: \"col\" }))), /*#__PURE__*/\n\n\n      _jsx(\"tbody\", {}, void 0, this.topicNodes())), /*#__PURE__*/\n\n      _jsx(\"div\", { className: \"sync-state\" }, void 0, tasksState.SyncState.message)), /*#__PURE__*/\n\n      _jsx(\"div\", { className: \"settings-footer\" }, void 0, /*#__PURE__*/\n      _jsx(I18NLink, { to: \"/settings/dictionaries\", className: \"btn btn-default\" }, void 0, /*#__PURE__*/\n      _jsx(Icon, { icon: \"arrow-left\" }), /*#__PURE__*/\n      _jsx(\"span\", { className: \"btn-label\" }, void 0, t('System', 'Back')))), /*#__PURE__*/\n\n\n      _jsx(Footer, {}))));\n\n\n\n  }}\n\n\nconst selectSuggestInfo = createSelector(\n(state) => state.thesauri.suggestInfo,\n(info) => info.toJS());\n\n\nconst selectThesaurus = createSelector(\n(state) => state.thesauri.thesaurus,\n(thesaurus) => thesaurus.toJS());\n\n\nconst selectTasksState = createSelector(\n(state) => state.thesauri.tasksState,\n(s) => s.toJS());\n\n\nfunction mapStateToProps(state) {\n  return {\n    suggestInfo: selectSuggestInfo(state),\n    thesaurus: selectThesaurus(state),\n    tasksState: selectTasksState(state),\n    topicClassificationEnabled: (state.settings.collection.toJS().features || {}).\n    topicClassification };\n\n}\n\nexport { ThesaurusCockpitBase };\n\n\nexport default connect(mapStateToProps, {\n  updateCockpitData,\n  startTraining,\n  toggleEnableClassification })(\nThesaurusCockpitBase);","import { actions } from \"../../BasicReducer\";\nimport { t } from \"../../I18N\";\n\nimport * as notifications from \"../../Notifications/actions/notificationsActions\";\nimport SearchAPI from \"../../Search/SearchAPI\";\nimport {\ngetLabelsQuery,\ngetReadyToPublishSuggestionsQuery,\ngetReadyToReviewSuggestionsQuery } from \"../../Settings/utils/suggestions\";\n\nimport ThesauriAPI from \"../ThesauriAPI\";\nimport api from \"../../utils/api\";\nimport { RequestParams } from \"../../utils/RequestParams\";\n\n\n\nimport { buildLabelCounts, flattenLabelCounts } from \"../utils/suggestionQuery\";\n\nexport function toggleEnableClassification() {\n  return async (dispatch, getState) => {\n    const thesaurus = getState().thesauri.thesaurus.toJS();\n    thesaurus.enable_classification = !thesaurus.enable_classification;\n    const _updatedThesaurus = await ThesauriAPI.save(new RequestParams(thesaurus));\n    dispatch(\n    notifications.notify(\n    t(\n    'System',\n    thesaurus.enable_classification ?\n    `You will now see suggestions for ${_updatedThesaurus.name}.` :\n    `You will no longer see suggestions for ${_updatedThesaurus.name}.`,\n    null,\n    false),\n\n    'success'));\n\n\n    dispatch(actions.set('thesauri.thesaurus', _updatedThesaurus));\n  };\n}\n\nasync function getAndPopulateLabelCounts(\ntemplates,\nqueryBuilderFunc,\nassocProp,\ncountSuggestions = true)\n{var _assocProp$name2;\n  if (!assocProp) {\n    return { totalRows: 0, totalLabels: 0, thesaurus: { propertyName: '', totalValues: {} } };\n  }\n  const docsWithSuggestions = await Promise.all(\n  templates.map((template) => {\n    const reqParams = new RequestParams(queryBuilderFunc(template._id, assocProp));\n    return SearchAPI.search(reqParams);\n  }));\n\n  const sanitizedSuggestionsTBPublished = docsWithSuggestions.map((s) => {var _assocProp$name;return (\n      buildLabelCounts(s, (_assocProp$name = assocProp === null || assocProp === void 0 ? void 0 : assocProp.name) !== null && _assocProp$name !== void 0 ? _assocProp$name : '', countSuggestions));});\n\n  return flattenLabelCounts(sanitizedSuggestionsTBPublished, (_assocProp$name2 = assocProp === null || assocProp === void 0 ? void 0 : assocProp.name) !== null && _assocProp$name2 !== void 0 ? _assocProp$name2 : '');\n}\n\nexport function updateCockpitData(_serverRequestParams) {\n  return async (dispatch, getState) => {var _state$thesauri$sugge;\n    const requestParams = _serverRequestParams !== null && _serverRequestParams !== void 0 ? _serverRequestParams : new RequestParams();\n    const state = getState();\n    const thesaurus = state.thesauri.thesaurus.toJS();\n    const templates = state.templates.toJS();\n    const assocProp = (_state$thesauri$sugge = state.thesauri.suggestInfo.get('property')) === null || _state$thesauri$sugge === void 0 ? void 0 : _state$thesauri$sugge.toJS();\n    const [\n    syncState,\n    trainState,\n    model,\n    docsWithSuggestionsForPublish,\n    docsWithSuggestionsForReview,\n    docsWithLabels] =\n    await Promise.all([\n    api.get('tasks', requestParams.set({ name: 'TopicClassificationSync' })),\n    ThesauriAPI.getModelTrainStatus(requestParams.set({ thesaurus: thesaurus.name })),\n    ThesauriAPI.getModelStatus(requestParams.set({ thesaurus: thesaurus.name })),\n    getAndPopulateLabelCounts(templates, getReadyToPublishSuggestionsQuery, assocProp),\n    getAndPopulateLabelCounts(templates, getReadyToReviewSuggestionsQuery, assocProp),\n    getAndPopulateLabelCounts(templates, getLabelsQuery, assocProp, false)]);\n\n    dispatch(\n    actions.set('thesauri.suggestInfo', {\n      model,\n      property: assocProp,\n      docsWithSuggestionsForPublish,\n      docsWithSuggestionsForReview,\n      docsWithLabels }));\n\n\n    dispatch(\n    actions.set('thesauri.tasksState', { SyncState: syncState.json, TrainState: trainState }));\n\n  };\n}\n\nexport function startTraining() {\n  return async (dispatch, getState) => {\n    const thesaurus = getState().thesauri.thesaurus.toJS();\n    await ThesauriAPI.trainModel(new RequestParams({ thesaurusId: thesaurus._id.toString() }));\n    await dispatch(updateCockpitData());\n  };\n}","\n\n/* An Un-sanitized Elastic Search Result\n.\n template results: []\n     result 1: {}\n     result 2: {}\n         rows: []\n         totalRows: number\n         aggregations: []\n             aggregation: {}\n                 all: {}\n                     meta\n                     doc_count: number\n                     thesaurus: {}\n                        buckets: []\n                     _thesaurus: {}\n                         buckets: []\n                             bucket: {}\n                                 key: string\n                                 doc_count: number\n                                 filtered: {}\n                                     meta\n                                     doc_count: number\n                                    */\n\n/* Takes an elastic query response and transforms it into a SuggestionResult.*/\nexport function buildLabelCounts(\nraw,\nthesaurusPropertyName,\ncountSuggestions = true)\n{\n  const suggestionFieldName = `${countSuggestions ? '__' : ''}${thesaurusPropertyName}`;\n  const result = {};\n  result.totalRows = raw.totalRows || 0;\n  result.totalLabels = 0;\n  if (\n  raw.aggregations !== undefined &&\n  raw.aggregations.all !== undefined &&\n  raw.aggregations.all.hasOwnProperty(suggestionFieldName))\n  {\n    const { buckets: rawValues } = raw.aggregations.all[suggestionFieldName];\n    const totalValues = {};\n    rawValues.forEach((rawResult) => {\n      totalValues[rawResult.key] = rawResult.filtered.doc_count;\n      result.totalLabels += rawResult.filtered.doc_count;\n    });\n    result.thesaurus = {\n      propertyName: thesaurusPropertyName,\n      totalValues };\n\n  }\n  return result;\n}\n\n/* Flattens SuggestionResult[] into a single SuggestionResult. */\nexport function flattenLabelCounts(\nperTemplate,\nthesaurusPropertyName)\n{\n  const result = {\n    totalRows: 0,\n    totalLabels: 0,\n    thesaurus: { propertyName: thesaurusPropertyName, totalValues: {} } };\n\n  perTemplate.forEach((templateResult) => {\n    result.totalRows += templateResult.totalRows;\n    result.totalLabels += templateResult.totalLabels;\n    if (\n    templateResult.hasOwnProperty('thesaurus') &&\n    templateResult.thesaurus.hasOwnProperty('totalValues'))\n    {\n      Object.entries(templateResult.thesaurus.totalValues).forEach(([key, value]) => {\n        if (!result.thesaurus.totalValues.hasOwnProperty(key)) {\n          result.thesaurus.totalValues[key] = 0;\n        }\n        result.thesaurus.totalValues[key] += value || 0;\n      });\n    }\n  });\n  return result;\n}","\n\n\n\n\n/* Get thesaurus values sorted by name. */\nexport function getValuesSortedByName(thesaurus) {\n  const { values = [] } = thesaurus;\n  // Ascending\n  return values.sort((a, b) => `${a.label}`.localeCompare(b.label));\n}\n\n/* Get thesaurus values sorted by classifier model quality for that value. */\nexport function getValuesSortedByConfidence(\nthesaurus,\nmodel)\n{\n  const { values: thesaurusValues = [] } = thesaurus;\n  const { topics: modelValues = {} } = model;\n  // Descending\n  return thesaurusValues.sort(\n  (a, b) => {var _modelValues$quality, _modelValues, _b$id, _modelValues$quality2, _modelValues2, _a$id;return ((_modelValues$quality = (_modelValues = modelValues[(_b$id = b.id) !== null && _b$id !== void 0 ? _b$id : '']) === null || _modelValues === void 0 ? void 0 : _modelValues.quality) !== null && _modelValues$quality !== void 0 ? _modelValues$quality : 0) - ((_modelValues$quality2 = (_modelValues2 = modelValues[(_a$id = a.id) !== null && _a$id !== void 0 ? _a$id : '']) === null || _modelValues2 === void 0 ? void 0 : _modelValues2.quality) !== null && _modelValues$quality2 !== void 0 ? _modelValues$quality2 : 0);});\n\n}\n\n/* Get thesaurus values sorted by number of documents with outstanding suggestions of that value. */\nexport function getValuesSortedByToBeReviewed(\nthesaurus,\nsuggestionResult)\n{\n  const { values: thesaurusValues = [] } = thesaurus;\n  const { values: suggestionValues = {} } = suggestionResult.thesaurus;\n  // Descending\n  return thesaurusValues.sort(\n  (a, b) => {var _suggestionValues, _b$id2, _suggestionValues2, _a$id2;return ((_suggestionValues = suggestionValues[(_b$id2 = b.id) !== null && _b$id2 !== void 0 ? _b$id2 : '']) !== null && _suggestionValues !== void 0 ? _suggestionValues : 0) - ((_suggestionValues2 = suggestionValues[(_a$id2 = a.id) !== null && _a$id2 !== void 0 ? _a$id2 : '']) !== null && _suggestionValues2 !== void 0 ? _suggestionValues2 : 0);});\n\n}","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\nimport Dropzone from 'react-dropzone';\nimport PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport { Translate } from \"../../I18N\";\n\nimport { Icon } from \"../../UI\";\nimport { unselectAllDocuments } from \"../../Library/actions/libraryActions\";\nimport { uploadDocument, createDocument } from \"../actions/uploadsActions\";\nimport { wrapDispatch } from \"../../Multireducer\";\n\nconst extractTitle = (file) => {\n  const title = file.name.\n  replace(/\\.[^/.]+$/, '').\n  replace(/_/g, ' ').\n  replace(/-/g, ' ').\n  replace(/ {2}/g, ' ');\n\n  return title.charAt(0).toUpperCase() + title.slice(1);\n};\n\nexport class UploadBox extends Component {\n  constructor(props) {\n    super(props);\n    this.onDrop = this.onDrop.bind(this);\n  }\n\n  onDrop(files) {\n    files.forEach((file) => {\n      const doc = { title: extractTitle(file) };\n      this.props.createDocument(doc).then((newDoc) => {\n        this.props.uploadDocument(newDoc.sharedId, file);\n      });\n    });\n    this.props.unselectAllDocuments();\n  }\n\n  render() {\n    return /*#__PURE__*/(\n      _jsx(Dropzone, {\n        className: \"upload-box force-ltr\",\n        style: {},\n        onDrop: this.onDrop,\n        accept: \"application/pdf\" }, void 0, /*#__PURE__*/\n\n      _jsx(\"div\", { className: \"upload-box_wrapper\" }, void 0, /*#__PURE__*/\n      _jsx(Icon, { icon: \"upload\" }), /*#__PURE__*/\n      _jsx(\"button\", { type: \"button\", className: \"upload-box_link\" }, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Browse your PDFs to upload\")), \"\\xA0\", /*#__PURE__*/\n\n      _jsx(Translate, {}, void 0, \"or drop your files here.\")), /*#__PURE__*/\n\n      _jsx(\"div\", { className: \"protip\" }, void 0, /*#__PURE__*/\n      _jsx(Icon, { icon: \"lightbulb\" }), /*#__PURE__*/\n      _jsx(\"b\", {}, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"ProTip!\")), /*#__PURE__*/\n\n      _jsx(\"span\", {}, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"For better performance, upload your files in batches of 50 or less.\")))));\n\n\n\n\n\n\n  }}\n\n\n\n\n\n\n\n\nexport function mapStateToProps() {\n  return {};\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return bindActionCreators(\n  {\n    uploadDocument,\n    unselectAllDocuments,\n    createDocument },\n\n  wrapDispatch(dispatch, 'uploads'));\n\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(UploadBox);","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport { newEntity, showImportPanel } from \"../actions/uploadsActions\";\nimport { t } from \"../../I18N\";\nimport { wrapDispatch } from \"../../Multireducer\";\nimport { Icon } from \"../../UI\";\n\nexport class UploadsHeader extends Component {\n  render() {\n    return /*#__PURE__*/(\n      _jsx(\"div\", { className: \"content-header\" }, void 0, /*#__PURE__*/\n      _jsx(\"div\", { className: \"content-header-title\" }, void 0, /*#__PURE__*/\n      _jsx(\"button\", {\n        type: \"button\",\n        className: \"btn btn-success btn-xs\",\n        onClick: () => this.props.newEntity('uploads') }, void 0, /*#__PURE__*/\n\n      _jsx(Icon, { icon: \"plus\" }), \" \", t('System', 'New entity')), /*#__PURE__*/\n\n      _jsx(\"button\", {\n        type: \"button\",\n        className: \"btn btn-success btn-xs\",\n        onClick: this.props.showImportPanel }, void 0, /*#__PURE__*/\n\n      _jsx(Icon, { icon: \"upload\" }), \" \", t('System', 'Import')))));\n\n\n\n\n  }}\n\n\n\n\n\n\n\nfunction mapDispatchToProps(dispatch) {\n  return bindActionCreators({ newEntity, showImportPanel }, wrapDispatch(dispatch, 'uploads'));\n}\n\nexport default connect(null, mapDispatchToProps)(UploadsHeader);","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import React from 'react';\nimport { Helmet } from 'react-helmet';\nimport RouteHandler from \"../App/RouteHandler\";\nimport LibraryCharts from \"../Charts/components/LibraryCharts\";\nimport { t } from \"../I18N\";\nimport { enterLibrary, unsetDocuments } from \"../Library/actions/libraryActions\";\nimport { processQuery } from \"../Library/helpers/requestState\";\nimport DocumentsList from \"../Library/components/DocumentsList\";\nimport LibraryFilters from \"../Library/components/LibraryFilters\";\nimport SearchBar from \"../Library/components/SearchBar\";\nimport SearchButton from \"../Library/components/SearchButton\";\nimport ViewMetadataPanel from \"../Library/components/ViewMetadataPanel\";\nimport SelectMultiplePanelContainer from \"../Library/containers/SelectMultiplePanelContainer\";\nimport libraryHelpers from \"../Library/helpers/libraryFilters\";\nimport { wrapDispatch } from \"../Multireducer\";\nimport api from \"../Search/SearchAPI\";\nimport ImportPanel from \"./components/ImportPanel\";\nimport UploadBox from \"./components/UploadBox\";\nimport UploadsHeader from \"./components/UploadsHeader\";\n\nimport setReduxState from \"../Library/helpers/setReduxState\";\nimport rison from 'rison-node';\nimport { socket } from \"../socket\";\n\nexport default class Uploads extends RouteHandler {\n  constructor(props, context) {\n    super(props, context);\n    this.refreshSearch = this.refreshSearch.bind(this);\n  }\n\n  static renderTools() {\n    return /*#__PURE__*/(\n      _jsx(\"div\", { className: \"searchBox\" }, void 0, /*#__PURE__*/\n      _jsx(SearchButton, { storeKey: \"uploads\" })));\n\n\n  }\n\n  urlHasChanged(nextProps) {\n    return nextProps.location.query.q !== this.props.location.query.q;\n  }\n\n  emptyState() {\n    wrapDispatch(this.context.store.dispatch, 'uploads')(unsetDocuments());\n  }\n\n  static async requestState(requestParams, globalResources) {\n    const query = processQuery(requestParams.data, globalResources, 'uploads');\n    query.unpublished = true;\n\n    const documents = await api.search(requestParams.set(query));\n    const filterState = libraryHelpers.URLQueryToState(\n    query,\n    globalResources.templates.toJS(),\n    globalResources.relationTypes.toJS());\n\n\n    const addinsteadOfSet = Boolean(query.from);\n\n    return [\n    setReduxState(\n    {\n      uploads: {\n        documents,\n        filters: {\n          documentTypes: query.types || [],\n          properties: filterState.properties },\n\n        aggregations: documents.aggregations,\n        search: filterState.search } },\n\n\n    'uploads',\n    addinsteadOfSet)];\n\n\n  }\n\n  refreshSearch() {\n    super.getClientState(this.props);\n  }\n\n  componentDidMount() {\n    const dispatch = wrapDispatch(this.context.store.dispatch, 'uploads');\n    socket.on('IMPORT_CSV_END', this.refreshSearch);\n    dispatch(enterLibrary());\n  }\n\n  componentWillUnmount() {\n    socket.removeListener('IMPORT_CSV_END', this.refreshSearch);\n    this.emptyState();\n  }\n\n  componentDidUpdate(prevProps) {\n    if (this.urlHasChanged(prevProps)) {\n      this.getClientState(this.props);\n    }\n  }\n\n  render() {\n    const query = rison.decode(this.props.location.query.q || '()');\n    const chartView = this.props.location.query.view === 'chart';\n    const mainView = !chartView ? /*#__PURE__*/\n    _jsx(DocumentsList, { storeKey: \"uploads\", SearchBar: SearchBar }) : /*#__PURE__*/\n\n    _jsx(LibraryCharts, { storeKey: \"uploads\" });\n\n\n    return /*#__PURE__*/(\n      _jsx(\"div\", { className: \"row panels-layout\" }, void 0, /*#__PURE__*/\n      _jsx(Helmet, {}, void 0, /*#__PURE__*/\n      _jsx(\"title\", {}, void 0, t('System', 'Uploads', null, false))), /*#__PURE__*/\n\n      _jsx(UploadsHeader, {}), /*#__PURE__*/\n      _jsx(\"div\", { className: \"content-holder uploads-viewer document-viewer with-panel with-header\" }, void 0, /*#__PURE__*/\n      _jsx(\"main\", {}, void 0, /*#__PURE__*/\n      _jsx(UploadBox, {}),\n\n      mainView), /*#__PURE__*/\n\n      _jsx(LibraryFilters, { uploadsSection: true, storeKey: \"uploads\" }), /*#__PURE__*/\n      _jsx(ViewMetadataPanel, { storeKey: \"uploads\", searchTerm: query.searchTerm }), /*#__PURE__*/\n      _jsx(SelectMultiplePanelContainer, { storeKey: \"uploads\" }), /*#__PURE__*/\n      _jsx(ImportPanel, {}))));\n\n\n\n  }}","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import PropTypes from 'prop-types';\nimport React from 'react';\nimport { browserHistory } from 'react-router';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport { Field, LocalForm, actions as formActions } from 'react-redux-form';\n\nimport { Icon } from \"../UI\";\n\nimport { t, Translate } from \"../I18N\";\nimport { isClient } from \"../utils\";\nimport { reconnectSocket } from \"../socket\";\nimport RouteHandler from \"../App/RouteHandler\";\nimport { reloadThesauri } from \"../Thesauri/actions/thesaurisActions\";\n\nimport auth from \"../Auth\";\n\nconst reloadHome = () => {\n  window.location.assign('/');\n};\n\nclass Login extends RouteHandler {\n  constructor(props, context) {\n    super(props, context);\n    this.state = { error: false, error2fa: false, recoverPassword: false, tokenRequired: false };\n    this.submit = this.submit.bind(this);\n    this.setLogin = this.setLogin.bind(this);\n    this.setRecoverPassword = this.setRecoverPassword.bind(this);\n  }\n\n  attachDispatch(dispatch) {\n    this.formDispatch = dispatch;\n  }\n\n  submit(credentials) {\n    if (this.state.recoverPassword) {\n      return this.recoverPassword(credentials.username);\n    }\n\n    return this.login(credentials);\n  }\n\n  recoverPassword(email) {\n    this.setState({ recoverPassword: false, error: false });\n    this.formDispatch(formActions.reset('loginForm'));\n    return this.props.recoverPassword(email);\n  }\n\n  resolveSuccessfulLogin() {\n    if (this.props.private) {\n      reloadHome();\n      return;\n    }\n    reconnectSocket();\n    this.props.reloadThesauris();\n    this.props.change('library.search.publishedStatus.values', ['published', 'restricted']);\n    browserHistory.push('/');\n  }\n\n  async login(credentials) {\n    try {\n      await this.props.login(credentials);\n      this.resolveSuccessfulLogin();\n    } catch (err) {\n      if (!this.state.tokenRequired && err.status === 409) {\n        this.setState({ tokenRequired: true });\n      } else {\n        const { tokenRequired } = this.state;\n        this.formDispatch(formActions.change('loginForm.token', undefined));\n        const error2fa = tokenRequired;\n        this.setState({ error: true, tokenRequired, error2fa });\n      }\n    }\n  }\n\n  setRecoverPassword() {\n    this.formDispatch(formActions.reset('loginForm'));\n    this.setState({ recoverPassword: true, error: false });\n  }\n\n  setLogin() {\n    this.formDispatch(formActions.reset('loginForm'));\n    this.setState({ recoverPassword: false, tokenRequired: false, error: false, error2fa: false });\n  }\n\n  render() {\n    let submitLabel = this.state.recoverPassword ? /*#__PURE__*/\n    _jsx(Translate, {}, void 0, \"Send recovery email\") : /*#__PURE__*/\n\n    _jsx(Translate, {}, void 0, \"Login\");\n\n\n    if (this.state.tokenRequired) {\n      submitLabel = /*#__PURE__*/_jsx(Translate, {}, void 0, \"Verify\");\n    }\n\n    return /*#__PURE__*/(\n      _jsx(\"div\", { className: \"content login-content\" }, void 0, /*#__PURE__*/\n      _jsx(\"div\", { className: \"row\" }, void 0, /*#__PURE__*/\n      _jsx(\"div\", { className: \"col-xs-12 col-sm-4 col-sm-offset-4\", suppressHydrationWarning: true }, void 0, /*#__PURE__*/\n      _jsx(\"h1\", { className: \"login-title\" }, void 0, /*#__PURE__*/\n      _jsx(\"img\", { src: \"/public/logo.svg\", title: \"uwazi\", alt: \"uwazi\" })),\n\n      isClient && /*#__PURE__*/\n      _jsx(LocalForm, {\n        onSubmit: this.submit,\n        model: \"loginForm\",\n        getDispatch: (dispatch) => {\n          this.formDispatch = dispatch;\n        } }, void 0,\n\n      !this.state.tokenRequired && /*#__PURE__*/\n      React.createElement(React.Fragment, null, /*#__PURE__*/\n      _jsx(\"div\", {\n        className: `form-group login-email${this.state.error ? ' has-error' : ''}` }, void 0, /*#__PURE__*/\n\n      _jsx(Field, { model: \".username\" }, void 0, /*#__PURE__*/\n      _jsx(\"label\", { className: \"form-group-label\", htmlFor: \"username\" }, void 0,\n      this.state.recoverPassword ? /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Email\") : /*#__PURE__*/\n\n      _jsx(Translate, {}, void 0, \"User\")), /*#__PURE__*/\n\n\n      _jsx(\"input\", { type: \"text\", name: \"username\", id: \"username\", className: \"form-control\" }))), /*#__PURE__*/\n\n\n      _jsx(\"div\", {\n        className: `form-group login-password ${this.state.error ? 'has-error' : ''}${\n        this.state.recoverPassword ? ' is-hidden' : ''\n        }` }, void 0, /*#__PURE__*/\n\n      _jsx(\"label\", { className: \"form-group-label\", htmlFor: \"password\" }, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Password\")), /*#__PURE__*/\n\n      _jsx(Field, { model: \".password\" }, void 0, /*#__PURE__*/\n      _jsx(\"input\", {\n        type: \"password\",\n        name: \"password\",\n        id: \"password\",\n        className: \"form-control\" })), /*#__PURE__*/\n\n\n      _jsx(\"div\", { className: \"form-text\" }, void 0,\n      this.state.error && /*#__PURE__*/_jsx(\"span\", {}, void 0, t('System', 'Login failed'), \" - \"), /*#__PURE__*/\n      _jsx(\"span\", {\n        title: t('System', 'Forgot Password?', null, false),\n        onClick: this.setRecoverPassword,\n        className: `button forgot-password ${\n        this.state.error ? 'label-danger' : ''\n        }` }, void 0, /*#__PURE__*/\n\n      _jsx(Translate, {}, void 0, \"Forgot Password?\"))))),\n\n\n\n\n\n      this.state.tokenRequired && /*#__PURE__*/\n      _jsx(\"div\", {\n        className: `form-group login-token${this.state.error2fa ? ' has-error' : ''}` }, void 0, /*#__PURE__*/\n\n      _jsx(\"h5\", {}, void 0, t('System', 'Two-step verification')), /*#__PURE__*/\n      _jsx(Field, { model: \".token\" }, void 0, /*#__PURE__*/\n      _jsx(\"label\", { className: \"form-group-label\", htmlFor: \"token\" }, void 0,\n      t('System', 'Authentication code')), /*#__PURE__*/\n\n      _jsx(\"input\", { type: \"text\", name: \"token\", id: \"token\", className: \"form-control\" }), /*#__PURE__*/\n      _jsx(\"div\", { className: \"form-text\" }, void 0, /*#__PURE__*/\n      _jsx(\"p\", {}, void 0,\n      this.state.error2fa && /*#__PURE__*/\n      React.createElement(React.Fragment, null, /*#__PURE__*/\n      _jsx(Icon, { icon: \"exclamation-triangle\" }), /*#__PURE__*/\n      _jsx(\"span\", {}, void 0, t('System', 'Two-factor verification failed')))), /*#__PURE__*/\n\n\n\n      _jsx(\"p\", {}, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Open the two-factor Authenticator app on your device\"),\n\n      ' ', /*#__PURE__*/\n      _jsx(\"br\", {}), /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"to view your authentication code and verify your identity.\")), /*#__PURE__*/\n\n\n\n      _jsx(\"p\", {}, void 0, /*#__PURE__*/\n      _jsx(\"span\", {\n        onClick: this.setLogin,\n        className: `button forgot-password ${\n        this.state.error2fa ? 'label-danger' : ''\n        }` }, void 0, /*#__PURE__*/\n\n      _jsx(Translate, {}, void 0, \"Return to login\")))))), /*#__PURE__*/\n\n\n\n\n\n\n      _jsx(\"p\", {}, void 0, /*#__PURE__*/\n      _jsx(\"button\", {\n        type: \"submit\",\n        className: `btn btn-block btn-lg ${\n        this.state.recoverPassword ? 'btn-success' : 'btn-primary'\n        }` }, void 0,\n\n      submitLabel)),\n\n\n      this.state.recoverPassword && /*#__PURE__*/\n      _jsx(\"div\", { className: \"form-text\" }, void 0, /*#__PURE__*/\n      _jsx(\"span\", {\n        title: t('System', 'Cancel', null, false),\n        onClick: this.setLogin,\n        className: \"button cancel\" }, void 0, /*#__PURE__*/\n\n      _jsx(Translate, {}, void 0, \"Cancel\"))))))));\n\n\n\n\n\n\n\n\n\n  }}\n\n\nLogin.propTypes = {\n  login: PropTypes.func,\n  recoverPassword: PropTypes.func,\n  reloadThesauris: PropTypes.func,\n  change: PropTypes.func };\n\n\nexport function mapStateToProps({ settings }) {\n  return {\n    private: settings.collection.get('private') };\n\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return bindActionCreators(\n  {\n    login: auth.actions.login,\n    recoverPassword: auth.actions.recoverPassword,\n    reloadThesauris: reloadThesauri,\n    change: formActions.change },\n\n  dispatch);\n\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Login);\n\nexport { Login };","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import PropTypes from 'prop-types';\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport { browserHistory } from 'react-router';\nimport RouteHandler from \"../App/RouteHandler\";\nimport qs from 'qs';\nimport { Icon } from \"../UI\";\nimport { Translate } from \"../I18N\";\n\nimport auth from \"../Auth\";\n\nclass ResetPassword extends RouteHandler {\n  constructor(props, context) {\n    super(props, context);\n    this.state = { error: false, password: '', repeatPassword: '' };\n    this.submit = this.submit.bind(this);\n    this.passwordChange = this.passwordChange.bind(this);\n    this.repeatPasswordChange = this.repeatPasswordChange.bind(this);\n  }\n\n  passwordChange(e) {\n    this.setState({ password: e.target.value });\n    this.setState({ passwordError: false });\n  }\n\n  repeatPasswordChange(e) {\n    this.setState({ repeatPassword: e.target.value });\n    this.setState({ passwordError: false });\n  }\n\n  submit(e) {\n    e.preventDefault();\n    const passwordsDontMatch = this.state.password !== this.state.repeatPassword;\n    const emptyPassword = this.state.password.trim() === '';\n    if (emptyPassword || passwordsDontMatch) {\n      this.setState({ error: true });\n      return;\n    }\n\n    this.props.resetPassword(this.state.password, this.props.params.key).then(() => {\n      browserHistory.push('/login');\n    });\n\n    this.setState({ password: '', repeatPassword: '' });\n  }\n\n  render() {\n    return /*#__PURE__*/(\n      _jsx(\"div\", { className: \"content login-content\" }, void 0, /*#__PURE__*/\n      _jsx(\"div\", { className: \"row\" }, void 0, /*#__PURE__*/\n      _jsx(\"div\", { className: \"col-xs-12 col-sm-4 col-sm-offset-4\" }, void 0,\n      qs.parse(this.context.router.location.search, { ignoreQueryPrefix: true }).\n      createAccount === 'true' && /*#__PURE__*/\n      _jsx(\"div\", { className: \"alert alert-info\" }, void 0, /*#__PURE__*/\n      _jsx(Icon, { icon: \"info-circle\" }), /*#__PURE__*/\n      _jsx(\"div\", {}, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"To complete the account creation process, please create a password for your account\"))), /*#__PURE__*/\n\n\n\n\n\n\n      _jsx(\"form\", { onSubmit: this.submit }, void 0, /*#__PURE__*/\n      _jsx(\"div\", { className: `form-group login-email ${this.state.error ? 'has-error' : ''}` }, void 0, /*#__PURE__*/\n      _jsx(\"label\", { className: \"form-group-label\", htmlFor: \"password\" }, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Password\")), /*#__PURE__*/\n\n      _jsx(\"input\", {\n        onChange: this.passwordChange,\n        value: this.state.password,\n        type: \"password\",\n        name: \"password\",\n        id: \"password\",\n        className: \"form-control\" })), /*#__PURE__*/\n\n\n      _jsx(\"div\", { className: `form-group login-password ${this.state.error ? 'has-error' : ''}` }, void 0, /*#__PURE__*/\n      _jsx(\"label\", { className: \"form-group-label\", htmlFor: \"repeat-password\" }, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Repeat Password\")), /*#__PURE__*/\n\n      _jsx(\"input\", {\n        value: this.state.repeatPassword,\n        onChange: this.repeatPasswordChange,\n        type: \"password\",\n        name: \"repeat-password\",\n        id: \"repeat-password\",\n        className: \"form-control\" }),\n\n      this.state.error && /*#__PURE__*/\n      _jsx(\"div\", { className: \"required\" }, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Passwords don\\u2019t match\"))), /*#__PURE__*/\n\n\n\n      _jsx(\"button\", { type: \"submit\", className: \"btn btn-block btn-lg btn-primary\" }, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Save password\")))))));\n\n\n\n\n\n\n  }}\n\n\nResetPassword.propTypes = {\n  resetPassword: PropTypes.func,\n  params: PropTypes.shape({\n    key: PropTypes.string }) };\n\n\n\nfunction mapDispatchToProps(dispatch) {\n  return bindActionCreators({ resetPassword: auth.actions.resetPassword }, dispatch);\n}\n\nexport default connect(null, mapDispatchToProps)(ResetPassword);","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport { browserHistory } from 'react-router';\nimport RouteHandler from \"../App/RouteHandler\";\nimport { Translate } from \"../I18N\";\n\nimport auth from \"../Auth\";\n\nexport class UnlockAccount extends RouteHandler {\n  unlockAccount() {\n    const { username, code } = this.props.params;\n    this.props.\n    unlockAccount({ username, code }).\n    then(() => {\n      browserHistory.push('/login');\n    }).\n    catch(() => {\n      browserHistory.push('/login');\n    });\n  }\n\n  componentDidMount() {\n    this.unlockAccount();\n  }\n\n  render() {\n    return /*#__PURE__*/(\n      _jsx(\"div\", { className: \"content login-content\" }, void 0, /*#__PURE__*/\n      _jsx(\"div\", { className: \"row\" }, void 0, /*#__PURE__*/\n      _jsx(\"div\", { className: \"col-xs-12 col-sm-4 col-sm-offset-4 text-center\" }, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Verifying...\")))));\n\n\n\n\n  }}\n\n\nUnlockAccount.propTypes = {\n  unlockAccount: PropTypes.func,\n  params: PropTypes.shape({\n    username: PropTypes.string,\n    code: PropTypes.string }) };\n\n\n\nfunction mapDispatchToProps(dispatch) {\n  return bindActionCreators(\n  {\n    unlockAccount: auth.actions.unlockAccount },\n\n  dispatch);\n\n}\n\nexport default connect(null, mapDispatchToProps)(UnlockAccount);","const _excluded = [\"location\"];function _objectWithoutProperties(source, excluded) {if (source == null) return {};var target = _objectWithoutPropertiesLoose(source, excluded);var key, i;if (Object.getOwnPropertySymbols) {var sourceSymbolKeys = Object.getOwnPropertySymbols(source);for (i = 0; i < sourceSymbolKeys.length; i++) {key = sourceSymbolKeys[i];if (excluded.indexOf(key) >= 0) continue;if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;target[key] = source[key];}}return target;}function _objectWithoutPropertiesLoose(source, excluded) {if (source == null) return {};var target = {};var sourceKeys = Object.keys(source);var key, i;for (i = 0; i < sourceKeys.length; i++) {key = sourceKeys[i];if (excluded.indexOf(key) >= 0) continue;target[key] = source[key];}return target;}function _extends() {_extends = Object.assign ? Object.assign.bind() : function (target) {for (var i = 1; i < arguments.length; i++) {var source = arguments[i];for (var key in source) {if (Object.prototype.hasOwnProperty.call(source, key)) {target[key] = source[key];}}}return target;};return _extends.apply(this, arguments);}var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import PropTypes from 'prop-types';\nimport React from 'react';\n\nimport { Translate } from \"../../I18N\";\nimport { withRouter } from 'react-router';\nimport { CurrentLocationLink } from \"../../Layout\";\n\nconst disableButton = (page, pageToDisable) => ({\n  className: page === pageToDisable ? 'btn disabled' : 'btn',\n  rel: page === pageToDisable ? 'nofollow' : undefined });\n\n\nconst Paginator = ({ page, totalPages, onPageChange }) => {\n  const prevPage = page - 1 || 1;\n  const nextPage = page + 1 > totalPages ? totalPages : page + 1;\n  return /*#__PURE__*/(\n    _jsx(\"div\", { className: \"paginator\" }, void 0, /*#__PURE__*/\n    React.createElement(CurrentLocationLink, _extends({\n      queryParams: { page: prevPage },\n      onClick: (e) => {\n        e.preventDefault();\n        onPageChange(prevPage);\n      } },\n    disableButton(page, 1)), /*#__PURE__*/\n\n    _jsx(Translate, {}, void 0, \"Previous\")), /*#__PURE__*/\n\n    _jsx(\"span\", {}, void 0, ` ${page} / ${totalPages} `), /*#__PURE__*/\n    React.createElement(CurrentLocationLink, _extends({\n      queryParams: { page: nextPage },\n      onClick: (e) => {\n        e.preventDefault();\n        onPageChange(nextPage);\n      } },\n    disableButton(page, totalPages)), /*#__PURE__*/\n\n    _jsx(Translate, {}, void 0, \"Next\"))));\n\n\n\n};\n\nPaginator.defaultProps = {\n  page: 1,\n  totalPages: 1,\n  onPageChange: () => {} };\n\n\n\n\n\n\n\n\nexport default Paginator;\n\nconst PaginatorWithPage = withRouter((props) => {\n  const { location } = props,restProps = _objectWithoutProperties(props, _excluded);\n  return /*#__PURE__*/React.createElement(Paginator, _extends({}, restProps, { page: Number(location.query.page || 1) }));\n});\n\nexport { PaginatorWithPage };","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport { actions as formActions } from 'react-redux-form';\nimport { Translate } from \"../../I18N\";\n\nimport { hideModal } from \"../../Modals/actions/modalActions\";\nimport Modal from \"../../Layout/Modal\";\nimport { Icon } from \"../../UI\";\nimport { closePanel } from \"../actions/uiActions\";\n\nexport class ConfirmCloseForm extends Component {\n  confirm() {\n    this.props.hideModal('ConfirmCloseForm');\n    this.props.closePanel();\n    this.props.resetForm('documentViewer.sidepanel.metadata');\n  }\n\n  render() {\n    if (!this.props.doc) {\n      return false;\n    }\n\n    const { doc } = this.props;\n\n    return /*#__PURE__*/(\n      _jsx(Modal, { isOpen: !!doc, type: \"danger\" }, void 0, /*#__PURE__*/\n      _jsx(Modal.Body, {}, void 0, /*#__PURE__*/\n      _jsx(\"h4\", {}, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Confirm\")), /*#__PURE__*/\n\n      _jsx(\"p\", {}, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"All changes will be lost, are you sure you want to proceed?\"))), /*#__PURE__*/\n\n\n\n      _jsx(Modal.Footer, {}, void 0, /*#__PURE__*/\n      _jsx(\"button\", {\n        type: \"button\",\n        className: \"btn btn-default cancel-button\",\n        onClick: () => this.props.hideModal('ConfirmCloseForm') }, void 0, /*#__PURE__*/\n\n      _jsx(Icon, { icon: \"times\" }), \" \", /*#__PURE__*/_jsx(Translate, {}, void 0, \"Cancel\")), /*#__PURE__*/\n\n      _jsx(\"button\", {\n        type: \"button\",\n        className: \"btn btn-danger confirm-button\",\n        onClick: () => this.confirm() }, void 0, /*#__PURE__*/\n\n      _jsx(Icon, { icon: \"trash-alt\" }), \" \", /*#__PURE__*/_jsx(Translate, {}, void 0, \"Ok\")))));\n\n\n\n\n  }}\n\n\n\n\n\n\n\n\n\nconst mapStateToProps = (state) => ({ doc: state.modals.get('ConfirmCloseForm') });\n\nfunction mapDispatchToProps(dispatch) {\n  return bindActionCreators({ closePanel, hideModal, resetForm: formActions.reset }, dispatch);\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ConfirmCloseForm);","import { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\nimport { actions as formActions } from 'react-redux-form';\n\nimport { DocumentSidePanel, TocForm as tocFormComponent } from \"../../Documents\";\nimport { actions as actionCreators } from \"../../BasicReducer\";\nimport { actions } from \"../../Metadata\";\nimport { actions as connectionsActions, uiActions as connectionsUiActions } from \"../../Connections\";\nimport { deleteDocument } from \"../actions/documentActions\";\nimport modals from \"../../Modals\";\n\nimport { closePanel } from \"../actions/uiActions\";\nimport {\nsaveToc,\neditToc,\nleaveEditMode,\nremoveFromToc,\nindentTocElement } from \"../actions/documentActions\";\n\nimport { DocumentForm } from \"../containers/DocumentForm\";\n\nexport const mapStateToProps = (state) => {\n  const { documentViewer } = state;\n  const { templates } = state;\n  let { doc } = documentViewer;\n\n  if (documentViewer.targetDoc.get('_id')) {\n    doc = documentViewer.targetDoc;\n  }\n  const semanticDoc = state.semanticSearch.selectedDocument;\n  if (!semanticDoc.isEmpty() && semanticDoc.get('sharedId') === doc.get('sharedId')) {\n    doc = doc.set('semanticSearch', semanticDoc.get('semanticSearch'));\n  }\n\n  const tocForm = documentViewer.tocForm || [];\n\n  return {\n    open: documentViewer.uiState.get('panel') === 'viewMetadataPanel',\n    doc,\n    templates,\n    rawDoc: documentViewer.doc,\n    docBeingEdited: !!documentViewer.sidepanel.metadata._id,\n    formDirty: !documentViewer.sidepanel.metadataForm.$form.pristine,\n    tab: documentViewer.sidepanel.tab || 'metadata',\n    tocFormComponent,\n    tocForm,\n    tocFormLength: tocForm.length,\n    tocBeingEdited: documentViewer.tocBeingEdited,\n    tocFormState: documentViewer.tocFormState,\n    isTargetDoc: !!documentViewer.targetDoc.get('_id'),\n    formPath: 'documentViewer.sidepanel.metadata',\n    EntityForm: DocumentForm };\n\n};\n\nfunction mapDispatchToProps(dispatch) {\n  return bindActionCreators(\n  {\n    loadInReduxForm: actions.loadInReduxForm,\n    showModal: modals.actions.showModal,\n    startNewConnection: connectionsActions.startNewConnection,\n    closeConnectionsPanel: connectionsUiActions.closePanel,\n    resetForm: formActions.reset,\n    closePanel,\n    deleteDocument,\n    saveToc,\n    editToc,\n    leaveEditMode,\n    removeFromToc,\n    indentTocElement,\n    showTab: (tab) => actionCreators.set('viewer.sidepanel.tab', tab) },\n\n  dispatch);\n\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(DocumentSidePanel);","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport ShowIf from \"../../App/ShowIf\";\nimport { Icon } from \"../../UI\";\n\nimport { openPanel } from \"../actions/uiActions\";\n\nexport class ViewerDefaultMenu extends Component {\n  render() {\n    return /*#__PURE__*/(\n      _jsx(\"div\", { className: this.props.active ? 'active' : '' }, void 0, /*#__PURE__*/\n      _jsx(ShowIf, { if: !this.props.panelIsOpen }, void 0, /*#__PURE__*/\n      _jsx(\"div\", {\n        className: \"btn btn-primary\",\n        onClick: this.props.openPanel.bind(null, 'viewMetadataPanel') }, void 0, /*#__PURE__*/\n\n      _jsx(Icon, { icon: \"columns\" })))));\n\n\n\n\n  }}\n\n\nconst mapStateToProps = ({ documentViewer }) => ({\n  panelIsOpen: !!documentViewer.uiState.get('panel'),\n  doc: documentViewer.doc,\n  targetDoc: !!documentViewer.targetDoc.get('_id') });\n\n\n\n\n\n\n\n\n\n\nViewerDefaultMenu.contextTypes = {\n  confirm: PropTypes.func };\n\n\nfunction mapDispatchToProps(dispatch) {\n  return bindActionCreators({ openPanel }, dispatch);\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ViewerDefaultMenu);","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\n\nimport { actions as connectionsActions } from \"../../Connections\";\nimport { openPanel } from \"../actions/uiActions\";\nimport ShowIf from \"../../App/ShowIf\";\nimport { Icon } from \"../../UI\";\nimport { Translate } from \"../../I18N\";\n\nimport { addToToc } from \"../actions/documentActions\";\n\nexport class ViewerTextSelectedMenu extends Component {\n  showPanel(type) {\n    this.props.openPanel('viewMetadataPanel');\n    this.props.startNewConnection(type, this.props.doc.get('sharedId'));\n  }\n\n  render() {\n    return /*#__PURE__*/(\n      _jsx(\"div\", { className: this.props.active ? 'active' : '' }, void 0, /*#__PURE__*/\n      _jsx(ShowIf, { if: this.props.hasRelationTypes }, void 0, /*#__PURE__*/\n      _jsx(\"div\", {\n        className: \"btn btn-primary connect-to-p\",\n        onClick: this.showPanel.bind(this, 'targetRanged') }, void 0, /*#__PURE__*/\n\n      _jsx(\"span\", { className: \"ContextMenu-tooltip\" }, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Connect to a paragraph\")), /*#__PURE__*/\n\n      _jsx(Icon, { icon: \"paragraph\" }))), /*#__PURE__*/\n\n\n      _jsx(ShowIf, { if: this.props.hasRelationTypes }, void 0, /*#__PURE__*/\n      _jsx(\"div\", {\n        className: \"btn btn-primary connect-to-d\",\n        onClick: this.showPanel.bind(this, 'ranged') }, void 0, /*#__PURE__*/\n\n      _jsx(\"span\", { className: \"ContextMenu-tooltip\" }, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Connect to a document\")), /*#__PURE__*/\n\n      _jsx(Icon, { icon: \"file\" }))), /*#__PURE__*/\n\n\n      _jsx(\"div\", {\n        className: \"btn btn-primary add-toc\",\n        onClick: this.props.addToToc.bind(null, this.props.reference.toJS(), this.props.file.toc) }, void 0, /*#__PURE__*/\n\n      _jsx(\"span\", { className: \"ContextMenu-tooltip\" }, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Add to table of contents\")), /*#__PURE__*/\n\n      _jsx(Icon, { icon: \"font\" }))));\n\n\n\n  }}\n\n\n\n\n\n\n\n\n\n\n\n\n\nfunction mapStateToProps({ documentViewer, relationTypes }) {\n  return {\n    doc: documentViewer.doc,\n    reference: documentViewer.uiState.get('reference'),\n    hasRelationTypes: !!relationTypes.size };\n\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return bindActionCreators(\n  {\n    startNewConnection: connectionsActions.startNewConnection,\n    openPanel,\n    addToToc },\n\n  dispatch);\n\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ViewerTextSelectedMenu);","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport { Translate } from \"../../I18N\";\n\nimport { Icon } from \"../../UI\";\nimport { addReference, saveTargetRangedReference } from \"../actions/referencesActions\";\nimport { cancelTargetDocument } from \"../actions/documentActions\";\n\nexport class TargetDocumentHeader extends Component {\n  constructor(props) {\n    super(props);\n    this.save = this.save.bind(this);\n  }\n\n  save() {\n    const { reference, connection } = this.props;\n    const { targetRange, targetFile } = reference;\n    return this.props.saveTargetRangedReference(connection.toJS(), targetRange, targetFile, (ref) => {\n      this.props.addReference(ref, true);\n    });\n  }\n\n  render() {\n    const { targetDocument, reference } = this.props;\n    const { targetRange } = reference;\n\n    let className = 'btn btn-default hidden';\n\n    if (targetDocument && targetRange) {\n      className = 'btn btn-success';\n    }\n\n    return /*#__PURE__*/(\n      _jsx(\"div\", {}, void 0, /*#__PURE__*/\n      _jsx(\"div\", { className: \"relationship-steps is-fixed\" }, void 0, /*#__PURE__*/\n      _jsx(\"button\", {\n        type: \"button\",\n        onClick: this.props.cancelTargetDocument,\n        className: \"btn btn-default\" }, void 0, /*#__PURE__*/\n\n      _jsx(Icon, { icon: \"arrow-left\" }), /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Back\")), /*#__PURE__*/\n\n      _jsx(\"h2\", {}, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Select target paragraph\"), /*#__PURE__*/\n      _jsx(\"small\", {}, void 0, \"3\"))), /*#__PURE__*/\n\n\n      _jsx(\"div\", { className: \"ContextMenu ContextMenu-center\" }, void 0, /*#__PURE__*/\n      _jsx(\"button\", { type: \"button\", onClick: this.save, className: className }, void 0, /*#__PURE__*/\n      _jsx(Icon, { icon: \"save\" }), /*#__PURE__*/\n      _jsx(\"span\", { className: \"ContextMenu-tooltip\" }, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Save\"))))));\n\n\n\n\n\n  }}\n\n\n\n\n\n\n\n\n\n\n\nfunction mapStateToProps({ documentViewer, connections }) {\n  return {\n    connection: connections.connection,\n    reference: documentViewer.uiState.toJS().reference,\n    targetDocument: documentViewer.targetDoc.get('_id') };\n\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return bindActionCreators(\n  {\n    saveTargetRangedReference,\n    cancelTargetDocument,\n    addReference },\n\n  dispatch);\n\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(TargetDocumentHeader);","import { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\n\nimport { setTargetSelection, unsetTargetSelection } from \"../actions/selectionActions\";\nimport Document from \"./Document\";\nimport {\nhighlightReference,\nselectReference,\ndeactivateReference } from \"../actions/uiActions\";\n\nimport { selectTargetDoc, selectTargetReferences } from \"../selectors\";\n\nimport TargetDocumentHeader from \"./TargetDocumentHeader\";\n\nconst mapStateToProps = (state) => {\n  const { documentViewer } = state;\n  const uiState = documentViewer.uiState.toJS();\n  const doc = selectTargetDoc(state);\n  const file = doc.get('defaultDoc') ? doc.get('defaultDoc').toJS() : {};\n\n  return {\n    doc,\n    file,\n    references: selectTargetReferences(state),\n    docHTML: documentViewer.targetDocHTML,\n    selection: uiState.reference.targetRange,\n    className: 'targetDocument',\n    activeReference: uiState.activeReference,\n    disableTextSelection: false,\n    header: TargetDocumentHeader };\n\n};\n\nfunction mapDispatchToProps(dispatch) {\n  return bindActionCreators(\n  {\n    setSelection: setTargetSelection,\n    unsetSelection: unsetTargetSelection,\n    highlightReference,\n    activateReference: selectReference,\n    deactivateReference },\n\n  dispatch);\n\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Document);","import { t } from \"../../I18N\";\n\nconst ocrStatusTips = {\n  noOcr: () => t('System', 'OCR button tip', null, false),\n  unsupportedLang: (language) => {\n    let tip = \"The document's language is not supported.\";\n    if (language === 'other') tip = 'Please select a language for this document';\n    return t('System', tip, null, false);\n  },\n  cantProcess: (time) => `${t('System', 'OCR error tip', null, false)}: ${time}`,\n  lastUpdated: (time) => `${t('System', 'Last updated', null, false)}: ${time}` };\n\n\nexport { ocrStatusTips };","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import React, { useEffect, useState } from 'react';\nimport { connect } from 'react-redux';\n\nimport { Translate } from \"../../I18N\";\nimport { socket } from \"../../socket\";\nimport { bindActionCreators } from 'redux';\nimport { postToOcr, getOcrStatus } from \"../actions/ocrActions\";\nimport { ocrStatusTips } from \"../utils/ocrStatusTips\";\nimport { reloadDocument } from \"../actions/documentActions\";\n\n\n\n\n\nconst formatDate = (time, locale) => {\n  const date = new Date(time);\n  return date.toLocaleString(locale);\n};\n\nconst mapStateToProps = ({ settings, locale }) => {\n  const toggleOCRButton = settings.collection.get('ocrServiceEnabled');\n  return {\n    ocrIsToggled: toggleOCRButton || false,\n    locale };\n\n};\n\nconst mapDispatchToProps = (dispatch) =>\nbindActionCreators({ loadDocument: reloadDocument }, dispatch);\n\nconst connector = connect(mapStateToProps, mapDispatchToProps);\n\n\n\n// eslint-disable-next-line max-statements\nconst OCRStatus = ({ file, ocrIsToggled, locale, loadDocument }) => {\n  if (!ocrIsToggled) return null;\n\n  const [ocrStatus, setOcrStatus] = useState({ status: 'loading', lastUpdated: Date.now() });\n\n  const listenOnSuccess = (_id) => {\n    if (file._id === _id) {\n      setOcrStatus({ status: 'ocrComplete', lastUpdated: Date.now() });\n      loadDocument(file.entity);\n    }\n  };\n\n  const listenOnError = (_id) => {\n    if (file._id === _id) setOcrStatus({ status: 'ocrError', lastUpdated: Date.now() });\n  };\n\n  useEffect(() => {\n    getOcrStatus(file.filename || '').\n    then(({ status, lastUpdated }) => {\n      setOcrStatus({ status, lastUpdated });\n      if (status === 'inQueue') {\n        socket.on('ocr:ready', listenOnSuccess);\n        socket.on('ocr:error', listenOnError);\n      }\n    }).\n    catch(() => {\n      setOcrStatus({ status: 'ocrError', lastUpdated: Date.now() });\n    });\n\n    return () => {\n      socket.off('ocr:ready', listenOnSuccess);\n      socket.off('ocr:error', listenOnError);\n    };\n  }, [file]);\n\n  const handleClick = () => {\n    setOcrStatus({ status: 'inQueue', lastUpdated: Date.now() });\n    postToOcr(file.filename || '').\n    then(() => {\n      socket.on('ocr:ready', listenOnSuccess);\n      socket.on('ocr:error', listenOnError);\n    }).\n    catch(() => {});\n  };\n\n  const lastUpdated = formatDate(ocrStatus.lastUpdated, locale);\n\n  let statusDisplay = /*#__PURE__*/_jsx(\"div\", {});\n  let tip;\n\n  switch (ocrStatus.status) {\n    case 'loading':\n      statusDisplay = /*#__PURE__*/\n      _jsx(\"div\", { className: \"status\" }, void 0, /*#__PURE__*/\n      _jsx(\"p\", {}, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Loading\"), \"\\xA0...\"));\n\n\n\n      break;\n\n    case 'noOCR':\n      statusDisplay = /*#__PURE__*/\n      _jsx(\"button\", { type: \"button\", className: \"btn btn-default\", onClick: () => handleClick() }, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"OCR PDF\"));\n\n\n      tip = ocrStatusTips.noOcr();\n      break;\n\n    case 'inQueue':\n      statusDisplay = /*#__PURE__*/\n      _jsx(\"div\", { className: \"status\" }, void 0, /*#__PURE__*/\n      _jsx(\"p\", {}, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"In OCR queue\")));\n\n\n\n      tip = ocrStatusTips.lastUpdated(lastUpdated);\n      break;\n\n    case 'unsupported_language':\n      statusDisplay = /*#__PURE__*/\n      _jsx(\"div\", { className: \"status\" }, void 0, /*#__PURE__*/\n      _jsx(\"p\", {}, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Unsupported OCR language\")));\n\n\n\n      tip = ocrStatusTips.unsupportedLang(file.language || 'other');\n      break;\n\n    case 'cannotProcess':\n      statusDisplay = /*#__PURE__*/\n      _jsx(\"div\", { className: \"status\" }, void 0, /*#__PURE__*/\n      _jsx(\"p\", {}, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"OCR error\")));\n\n\n\n      tip = ocrStatusTips.cantProcess(lastUpdated);\n      break;\n\n    case 'ocrError':\n      statusDisplay = /*#__PURE__*/\n      _jsx(\"div\", { className: \"ocr-error\" }, void 0, /*#__PURE__*/\n      _jsx(\"p\", {}, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Could not be processed\")));\n\n\n\n      tip = ocrStatusTips.cantProcess(lastUpdated);\n      break;\n\n    case 'withOCR':\n      statusDisplay = /*#__PURE__*/\n      _jsx(\"div\", { className: \"status\" }, void 0, /*#__PURE__*/\n      _jsx(\"p\", {}, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"OCR\"), \"\\xA0\\u2714\"));\n\n\n\n      tip = ocrStatusTips.lastUpdated(lastUpdated);\n      break;\n\n    case 'ocrComplete':\n      statusDisplay = /*#__PURE__*/\n      _jsx(\"div\", { className: \"complete\" }, void 0, /*#__PURE__*/\n      _jsx(\"p\", {}, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"OCR completed\"), \"\\xA0\\u2714\"));\n\n\n\n      break;\n\n    default:\n      break;}\n\n\n  return /*#__PURE__*/(\n    _jsx(\"div\", { className: \"ocr-service-display\" }, void 0,\n    statusDisplay,\n    tip && /*#__PURE__*/_jsx(\"div\", { className: \"ocr-tooltip\" }, void 0, tip)));\n\n\n};\n\nconst container = connector(OCRStatus);\nexport { container as OCRStatus };","import api from \"../../utils/api\";\n\nconst postToOcr = async (filename) => {\n  await api.post(`files/${filename}/ocr`);\n};\n\nconst getOcrStatus = async (filename) => {\n  const {\n    json: { status, lastUpdated } } =\n  await api.get(`files/${filename}/ocr`);\n\n  return { status, lastUpdated };\n};\n\nexport { postToOcr, getOcrStatus };","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\nimport { Helmet } from 'react-helmet';\nimport PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport { Map } from 'immutable';\nimport { ConnectionsList } from \"../../ConnectionsList\";\nimport { CreateConnectionPanel } from \"../../Connections\";\nimport { CurrentLocationLink, Icon } from \"../../Layout\";\nimport { RelationshipsFormButtons } from \"../../Relationships\";\nimport { Translate, I18NLink } from \"../../I18N\";\nimport { actions } from \"../../BasicReducer\";\nimport AddEntitiesPanel from \"../../Relationships/components/AddEntities\";\nimport ContextMenu from \"../../ContextMenu\";\nimport Footer from \"../../App/Footer\";\nimport Marker from \"../utils/Marker\";\nimport RelationshipMetadata from \"../../Relationships/components/RelationshipMetadata\";\nimport ShowIf from \"../../App/ShowIf\";\nimport { NeedAuthorization } from \"../../Auth\";\nimport { FeatureToggle } from \"../../components/Elements/FeatureToggle\";\nimport { PaginatorWithPage } from \"./Paginator\";\nimport { addReference as addReferenceAction } from \"../actions/referencesActions\";\nimport {\nloadDefaultViewerMenu,\nloadTargetDocument as loadTargetDocumentAction } from \"../actions/documentActions\";\n\nimport { openPanel } from \"../actions/uiActions\";\nimport { selectDoc } from \"../selectors\";\nimport ConfirmCloseForm from \"./ConfirmCloseForm\";\nimport ViewMetadataPanel from \"./ViewMetadataPanel\";\nimport ViewerDefaultMenu from \"./ViewerDefaultMenu\";\nimport ViewerTextSelectedMenu from \"./ViewerTextSelectedMenu\";\nimport SourceDocument from \"./SourceDocument\";\nimport TargetDocument from \"./TargetDocument.js\";\nimport determineDirection from \"../utils/determineDirection\";\nimport { OCRStatus } from \"./OCRStatus\";\n\nclass Viewer extends Component {\n  constructor(props) {\n    super(props);\n    this.state = { firstRender: true };\n    this.handlePlainTextClick = this.handlePlainTextClick.bind(this);\n  }\n\n  componentDidMount() {\n    const { store } = this.context;\n    const { sidepanelTab } = this.props;\n    store.dispatch(openPanel('viewMetadataPanel'));\n    if (sidepanelTab === 'connections') {\n      store.dispatch(actions.set('viewer.sidepanel.tab', ''));\n    }\n    store.dispatch(loadDefaultViewerMenu());\n    Marker.init('div.main-wrapper');\n    this.setState({ firstRender: false }); // eslint-disable-line react/no-did-mount-set-state\n  }\n\n  handlePlainTextClick() {\n    const { showTab } = this.props;\n    showTab('metadata');\n  }\n\n  prepareClassName(includeFooter) {\n    const { panelIsOpen, targetDoc, showConnections } = this.props;\n    let className = 'document-viewer with-header';\n    className += panelIsOpen ? ' with-panel is-active' : '';\n    className += targetDoc ? ' show-target-document' : '';\n    className += showConnections ? ' connections' : '';\n    className += includeFooter ? ' with-footer' : '';\n    return className;\n  }\n\n  renderNoDoc() {\n    const { doc } = this.props;\n    return /*#__PURE__*/(\n      _jsx(\"div\", { className: \"row\" }, void 0, /*#__PURE__*/\n      _jsx(\"div\", { className: \"content-header content-header-document\" }, void 0, /*#__PURE__*/\n      _jsx(\"div\", { className: \"content-header-title\" }, void 0, /*#__PURE__*/\n      _jsx(Icon, { icon: \"lightbulb\" }), /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"This entity has no document, you probably want to see the metadata\"), \"\\xA0\", /*#__PURE__*/\n\n\n\n      _jsx(I18NLink, { to: `/entity/${doc.get('sharedId')}` }, void 0, /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"view\"))))));\n\n\n\n\n\n  }\n\n  render() {\n    const {\n      doc,\n      sidepanelTab,\n      targetDoc,\n      changePage,\n      onPageChange,\n      onDocumentReady,\n      addReference,\n      loadTargetDocument,\n      panelIsOpen,\n      showTextSelectMenu,\n      file,\n      user } =\n    this.props;\n    const { firstRender } = this.state;\n    if (doc.get('_id') && !doc.get('documents').size) {\n      return this.renderNoDoc();\n    }\n    const includeFooter = user.get('_id') && sidepanelTab === 'connections';\n    const className = this.prepareClassName(includeFooter);\n    const { raw, searchTerm, pageText, page } = this.props;\n    const documentTitle = doc.get('title') ? doc.get('title') : '';\n\n    return /*#__PURE__*/(\n      _jsx(\"div\", { className: \"row\" }, void 0, /*#__PURE__*/\n      _jsx(Helmet, {}, void 0, /*#__PURE__*/\n      _jsx(\"title\", {}, void 0, `${documentTitle}  Page ${page}`)), /*#__PURE__*/\n\n      _jsx(ShowIf, { if: !targetDoc }, void 0, /*#__PURE__*/\n      _jsx(\"div\", { className: \"content-header content-header-document\" }, void 0, /*#__PURE__*/\n      _jsx(\"div\", { className: \"content-header-title\" }, void 0,\n      sidepanelTab !== 'connections' && /*#__PURE__*/\n      React.createElement(React.Fragment, null, /*#__PURE__*/\n      _jsx(PaginatorWithPage, { totalPages: file.totalPages, onPageChange: changePage }), /*#__PURE__*/\n      _jsx(NeedAuthorization, { roles: ['admin', 'editor'] }, void 0, /*#__PURE__*/\n      _jsx(FeatureToggle, { feature: \"ocr.url\" }, void 0, /*#__PURE__*/\n      _jsx(OCRStatus, { file: file }))), /*#__PURE__*/\n\n\n      _jsx(CurrentLocationLink, {\n        onClick: !raw ? this.handlePlainTextClick : () => {},\n        className: \"btn btn-default\",\n        queryParams: { raw: raw || firstRender ? '' : 'true' } }, void 0,\n\n      raw || firstRender ? /*#__PURE__*/\n      _jsx(Translate, {}, void 0, \"Normal view\") : /*#__PURE__*/\n\n      _jsx(Translate, {}, void 0, \"Plain text\")))))), /*#__PURE__*/\n\n\n\n\n\n\n\n      _jsx(\"main\", { className: className }, void 0, /*#__PURE__*/\n      _jsx(\"div\", { className: \"main-wrapper\" }, void 0, /*#__PURE__*/\n      _jsx(ShowIf, { if: sidepanelTab !== 'connections' && !targetDoc }, void 0,\n      raw || firstRender ? /*#__PURE__*/\n      _jsx(\"div\", { className: `${determineDirection(file)} raw-text` }, void 0, pageText) : /*#__PURE__*/\n\n      _jsx(SourceDocument, {\n        searchTerm: searchTerm,\n        onPageChange: onPageChange,\n        onDocumentReady: onDocumentReady,\n        file: file })), /*#__PURE__*/\n\n\n\n      _jsx(ShowIf, { if: sidepanelTab === 'connections' }, void 0, /*#__PURE__*/\n      _jsx(ConnectionsList, { hideFooter: true, searchCentered: true })), /*#__PURE__*/\n\n      _jsx(TargetDocument, {}), /*#__PURE__*/\n      _jsx(Footer, {})),\n\n      includeFooter && /*#__PURE__*/\n      _jsx(\"div\", { className: `entity-footer remove-nesting ${panelIsOpen ? 'with-sidepanel' : ''}` }, void 0, /*#__PURE__*/\n      _jsx(RelationshipsFormButtons, {}))), /*#__PURE__*/\n\n\n\n      _jsx(ConfirmCloseForm, {}), /*#__PURE__*/\n      _jsx(ViewMetadataPanel, {\n        raw: raw || firstRender,\n        storeKey: \"documentViewer\",\n        searchTerm: searchTerm,\n        file: file }), /*#__PURE__*/\n\n      _jsx(CreateConnectionPanel, {\n        containerId: targetDoc ? 'target' : doc.get('sharedId'),\n        onCreate: addReference,\n        onRangedConnect: loadTargetDocument,\n        file: file }),\n\n      sidepanelTab === 'connections' && /*#__PURE__*/\n      React.createElement(React.Fragment, null, /*#__PURE__*/\n      _jsx(RelationshipMetadata, {}), /*#__PURE__*/\n      _jsx(AddEntitiesPanel, {})), /*#__PURE__*/\n\n\n      _jsx(ContextMenu, {\n        align: `bottom${includeFooter ? '-with-footer' : ''}`,\n        overrideShow: true,\n        show: !panelIsOpen }, void 0, /*#__PURE__*/\n\n      _jsx(ViewerDefaultMenu, {})), /*#__PURE__*/\n\n      _jsx(ContextMenu, { align: \"center\", overrideShow: true, show: showTextSelectMenu }, void 0, /*#__PURE__*/\n      _jsx(ViewerTextSelectedMenu, { file: file }))));\n\n\n\n  }}\n\nViewer.defaultProps = {\n  searchTerm: '',\n  raw: false,\n  onPageChange: () => {},\n  changePage: () => {},\n  onDocumentReady: () => {},\n  page: 1,\n  doc: Map(),\n  file: {},\n  user: Map({}) };\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nViewer.contextTypes = {\n  store: PropTypes.object };\n\nconst mapStateToProps = (state) => {\n  const { documentViewer } = state;\n  const uiState = documentViewer.uiState.toJS();\n  return {\n    pageText: documentViewer.rawText,\n    doc: selectDoc(state),\n    panelIsOpen: !!uiState.panel,\n    targetDoc: !!documentViewer.targetDoc.get('_id'),\n    locale: state.locale,\n    /* TEST!!!!! */sidepanelTab: documentViewer.sidepanel.tab,\n    showConnections: documentViewer.sidepanel.tab === 'references',\n    showTextSelectMenu: Boolean(\n    !documentViewer.targetDoc.get('_id') && uiState.reference && uiState.reference.sourceRange),\n\n    user: state.user };\n\n};\nconst mapDispatchToProps = (dispatch) =>\nbindActionCreators(\n{\n  addReference: addReferenceAction,\n  loadTargetDocument: loadTargetDocumentAction,\n  showTab: (tab) => actions.set('viewer.sidepanel.tab', tab) },\n\ndispatch);\n\n\nconst ConnectedViewer = connect(mapStateToProps, mapDispatchToProps)(Viewer);\nexport { ConnectedViewer };","function ownKeys(object, enumerableOnly) {var keys = Object.keys(object);if (Object.getOwnPropertySymbols) {var symbols = Object.getOwnPropertySymbols(object);enumerableOnly && (symbols = symbols.filter(function (sym) {return Object.getOwnPropertyDescriptor(object, sym).enumerable;})), keys.push.apply(keys, symbols);}return keys;}function _objectSpread(target) {for (var i = 1; i < arguments.length; i++) {var source = null != arguments[i] ? arguments[i] : {};i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {_defineProperty(target, key, source[key]);}) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));});}return target;}function _defineProperty(obj, key, value) {if (key in obj) {Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });} else {obj[key] = value;}return obj;}import { actions } from \"../../BasicReducer\";\nimport { getDocument } from \"./documentActions\";\nimport referencesAPI from \"../referencesAPI\";\nimport relationTypesAPI from \"../../RelationTypes/RelationTypesAPI\";\nimport * as relationships from \"../../Relationships/utils/routeUtils\";\n\nimport { setReferences } from \"./referencesActions\";\nimport entitiesAPI from \"../../Entities/EntitiesAPI\";\n\nexport function setViewerState(state) {\n  return (dispatch) => {\n    const { documentViewer } = state;\n    dispatch(actions.set('relationTypes', state.relationTypes));\n    dispatch(actions.set('viewer/doc', documentViewer.doc));\n    dispatch(actions.set('viewer/relationTypes', documentViewer.relationTypes));\n    dispatch(actions.set('viewer/rawText', documentViewer.rawText));\n    dispatch(setReferences(documentViewer.references));\n    dispatch(relationships.setReduxState(state));\n  };\n}\n\nexport async function requestViewerState(requestParams, globalResources) {\n  const { sharedId, raw, page } = requestParams.data;\n  const defaultLanguage = globalResources.settings.collection.\n  get('languages').\n  find((l) => l.get('default'));\n\n  const [doc, relationTypes, [connectionsGroups, searchResults, sort]] = await Promise.all([\n  getDocument(\n  requestParams.set({ sharedId }),\n  defaultLanguage ? defaultLanguage.get('key') : 'en',\n  requestParams.data.file),\n\n  relationTypesAPI.get(requestParams.onlyHeaders()),\n  relationships.requestState(requestParams.set({ sharedId }), globalResources.templates)]);\n\n\n  const { defaultDoc } = doc;\n  const rawText = raw ?\n  await entitiesAPI.getRawPage(requestParams.set({ _id: defaultDoc._id, page })) :\n  '';\n\n  const references = await referencesAPI.get(\n  requestParams.set({ sharedId, file: doc.defaultDoc._id, onlyTextReferences: true }));\n\n\n  return [\n  setViewerState({\n    documentViewer: {\n      doc: _objectSpread(_objectSpread({},\n      doc), {}, {\n        relations: references }),\n\n      references,\n      relationTypes,\n      rawText },\n\n    relationships: {\n      list: {\n        sharedId: doc.sharedId,\n        entity: doc,\n        connectionsGroups,\n        searchResults,\n        sort,\n        filters: {},\n        view: 'graph' } },\n\n\n    relationTypes })];\n\n\n}","const _excluded = [\"page\"];var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}function ownKeys(object, enumerableOnly) {var keys = Object.keys(object);if (Object.getOwnPropertySymbols) {var symbols = Object.getOwnPropertySymbols(object);enumerableOnly && (symbols = symbols.filter(function (sym) {return Object.getOwnPropertyDescriptor(object, sym).enumerable;})), keys.push.apply(keys, symbols);}return keys;}function _objectSpread(target) {for (var i = 1; i < arguments.length; i++) {var source = null != arguments[i] ? arguments[i] : {};i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {_defineProperty(target, key, source[key]);}) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));});}return target;}function _defineProperty(obj, key, value) {if (key in obj) {Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });} else {obj[key] = value;}return obj;}function _objectWithoutProperties(source, excluded) {if (source == null) return {};var target = _objectWithoutPropertiesLoose(source, excluded);var key, i;if (Object.getOwnPropertySymbols) {var sourceSymbolKeys = Object.getOwnPropertySymbols(source);for (i = 0; i < sourceSymbolKeys.length; i++) {key = sourceSymbolKeys[i];if (excluded.indexOf(key) >= 0) continue;if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;target[key] = source[key];}}return target;}function _objectWithoutPropertiesLoose(source, excluded) {if (source == null) return {};var target = {};var sourceKeys = Object.keys(source);var key, i;for (i = 0; i < sourceKeys.length; i++) {key = sourceKeys[i];if (excluded.indexOf(key) >= 0) continue;target[key] = source[key];}return target;}import { Helmet } from 'react-helmet';\nimport { browserHistory } from 'react-router';\nimport { connect } from 'react-redux';\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\n\nimport { RequestParams } from \"../utils/RequestParams\";\nimport { actions } from \"../BasicReducer\";\nimport { isClient, events } from \"../utils\";\nimport { toUrlParams } from \"../../shared/JSONRequest\";\nimport { ConnectedViewer as Viewer } from \"./components/Viewer\";\nimport entitiesAPI from \"../Entities/EntitiesAPI\";\nimport { leaveEditMode } from \"./actions/documentActions\";\nimport { bindActionCreators } from 'redux';\nimport { scrollToPage, activateReference } from \"./actions/uiActions\";\nimport { requestViewerState } from \"./actions/routeActions\";\n\nconst defaultDoc = (entity) => entity.get('defaultDoc') ? entity.get('defaultDoc').toJS() : {};\n\nclass PDFView extends Component {\n  static async requestState(requestParams, globalResources) {\n    return requestViewerState(\n    requestParams.add({ raw: requestParams.data.raw === 'true' || !isClient }),\n    globalResources);\n\n  }\n\n  constructor(props, context) {\n    super(props, context);\n    this.changeBrowserHistoryPage = this.changeBrowserHistoryPage.bind(this);\n    this.changePage = this.changePage.bind(this);\n    this.onDocumentReady = this.onDocumentReady.bind(this);\n  }\n\n  componentDidMount() {\n    if (this.props.location.query.searchTerm) {\n      this.context.store.dispatch(actions.set('viewer.sidepanel.tab', 'text-search'));\n    }\n  }\n\n  componentWillReceiveProps(props) {\n    const { query = {} } = props.location;\n    if (query.page !== this.props.location.query.page && query.raw !== 'true') {\n      this.changePage(query.page);\n    }\n    if (\n    (query.page !== this.props.location.query.page ||\n    query.raw !== this.props.location.query.raw) &&\n    query.raw === 'true')\n    {\n      entitiesAPI.\n      getRawPage(new RequestParams({ _id: defaultDoc(props.entity)._id, page: query.page })).\n      then((pageText) => {\n        this.context.store.dispatch(actions.set('viewer/rawText', pageText));\n      });\n    }\n  }\n\n  componentWillUnmount() {\n    this.props.leaveEditMode();\n  }\n\n  onDocumentReady(doc) {\n    events.emit('documentLoaded');\n    if (this.props.location.query.raw === 'true') {\n      return;\n    }\n    if (this.props.location.query.page) {\n      scrollToPage(this.props.location.query.page, 0);\n    }\n    const { ref } = this.props.location.query;\n    if (ref) {\n      const reference = doc.get('relations').find((r) => r.get('_id') === ref);\n      this.context.store.dispatch(activateReference(reference.toJS()));\n    }\n  }\n\n  changePage(nextPage) {\n    if (!this.props.location.query.raw) {\n      return scrollToPage(nextPage);\n    }\n\n    return this.changeBrowserHistoryPage(nextPage);\n  }\n\n  changeBrowserHistoryPage(newPage) {\n    const _this$props$location =\n\n    this.props.location,{ query: { page } } = _this$props$location,queryWithoutPage = _objectWithoutProperties(_this$props$location.query, _excluded);\n    queryWithoutPage.raw = queryWithoutPage.raw || undefined;\n    browserHistory.push(\n    `${this.props.location.pathname}${toUrlParams(_objectSpread(_objectSpread({}, queryWithoutPage), {}, { page: newPage }))}`);\n\n  }\n\n  render() {\n    const { query = {}, pathname } = this.props.location;\n    const raw = query.raw === 'true' || !isClient;\n    const page = Number(query.page || 1);\n\n    return /*#__PURE__*/(\n      React.createElement(React.Fragment, null, /*#__PURE__*/\n      _jsx(Helmet, {}, void 0, raw && /*#__PURE__*/_jsx(\"link\", { rel: \"canonical\", href: `${pathname}?page=${page}` })), /*#__PURE__*/\n      _jsx(Viewer, {\n        raw: raw,\n        searchTerm: query.searchTerm,\n        onPageChange: this.changeBrowserHistoryPage,\n        onDocumentReady: this.onDocumentReady,\n        changePage: this.changePage,\n        page: page,\n        file: defaultDoc(this.props.entity) })));\n\n\n\n  }}\n\n\nPDFView.contextTypes = {\n  store: PropTypes.instanceOf(Object) };\n\n\n\n\n\n\n\n\nPDFView.defaultProps = {\n  leaveEditMode: () => {} };\n\n\nfunction mapDispatchToProps(dispatch) {\n  return bindActionCreators({ leaveEditMode }, dispatch);\n}\n\nexport default connect(null, mapDispatchToProps)(PDFView);","import { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\n\nimport { showFilters, hideFilters } from \"../actions/uiActions\";\nimport { SearchButton } from \"../../Library/components/SearchButton\";\n\nexport function mapStateToProps({ entityView }) {\n  return {\n    open: entityView.uiState.get('showFilters') };\n\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return bindActionCreators(\n  {\n    showFilters,\n    hideFilters,\n    unselectAllDocuments: () => {} },\n\n  dispatch);\n\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SearchButton);","import { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\n\nimport { saveEntity, resetForm } from \"../actions/actions\";\nimport { actions, MetadataForm } from \"../../Metadata\";\n\nfunction mapStateToProps(state) {\n  return {\n    model: 'entityView.entityForm',\n    templateId: state.entityView.entityForm.template,\n    templates: state.templates,\n    thesauris: state.thesauris };\n\n}\n\nexport function mapDispatchToProps(dispatch) {\n  return bindActionCreators(\n  {\n    changeTemplate: actions.changeTemplate,\n    onSubmit: saveEntity,\n    componentWillUnmount: resetForm },\n\n  dispatch);\n\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(MetadataForm);","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };} /* eslint-disable max-lines */\nimport Immutable from 'immutable';\nimport { Tabs, TabLink, TabContent } from 'react-tabs-redux';\nimport { bindActionCreators } from 'redux';\nimport { browserHistory } from 'react-router';\nimport { connect } from 'react-redux';\nimport { createSelector } from 'reselect';\nimport { Helmet } from 'react-helmet';\nimport PropTypes from 'prop-types';\nimport React, { Component } from 'react';\n\nimport { AttachmentsList } from \"../../Attachments\";\nimport { ConnectionsGroups, ConnectionsList, ResetSearch } from \"../../ConnectionsList\";\nimport { CreateConnectionPanel, actions as connectionsActions } from \"../../Connections\";\nimport { MetadataFormButtons, ShowMetadata } from \"../../Metadata\";\nimport { RelationshipsFormButtons } from \"../../Relationships\";\nimport { TemplateLabel, Icon as PropertyIcon } from \"../../Layout\";\nimport { connectionsChanged, deleteConnection } from \"../../ConnectionsList/actions/actions\";\nimport { t } from \"../../I18N\";\nimport AddEntitiesPanel from \"../../Relationships/components/AddEntities\";\nimport RelationshipMetadata from \"../../Relationships/components/RelationshipMetadata\";\nimport ShowIf from \"../../App/ShowIf\";\nimport SidePanel from \"../../Layout/SidePanel\";\nimport ContextMenu from \"../../ContextMenu\";\nimport { Icon } from \"../../UI\";\nimport { FileList } from \"../../Attachments/components/FileList\";\nimport { CopyFromEntity } from \"../../Metadata/components/CopyFromEntity\";\nimport { PageViewer } from \"../../Pages/components/PageViewer\";\n\nimport { ShowSidepanelMenu } from \"./ShowSidepanelMenu\";\nimport { deleteEntity } from \"../actions/actions\";\nimport { showTab } from \"../actions/uiActions\";\nimport EntityForm from \"../containers/EntityForm\";\n\nclass EntityViewer extends Component {\n  constructor(props, context) {\n    super(props, context);\n    this.state = {\n      panelOpen: !this.props.hasPageView,\n      copyFrom: false,\n      copyFromProps: [] };\n\n    this.deleteEntity = this.deleteEntity.bind(this);\n    this.closePanel = this.closePanel.bind(this);\n    this.openPanel = this.openPanel.bind(this);\n    this.toggleCopyFrom = this.toggleCopyFrom.bind(this);\n    this.onCopyFromSelect = this.onCopyFromSelect.bind(this);\n    this.deleteConnection = this.deleteConnection.bind(this);\n  }\n\n  onCopyFromSelect(copyFromProps) {\n    this.setState({ copyFromProps });\n  }\n\n  deleteEntity() {\n    this.context.confirm({\n      accept: () => {\n        this.props.deleteEntity(this.props.entity.toJS()).then(() => {\n          browserHistory.goBack();\n        });\n      },\n      title: 'Confirm delete',\n      message: 'Are you sure you want to delete this entity?' });\n\n  }\n\n  toggleCopyFrom() {\n    this.setState((currentState) => ({\n      copyFrom: !currentState.copyFrom }));\n\n  }\n\n  deleteConnection(reference) {\n    if (reference.sourceType !== 'metadata') {\n      this.context.confirm({\n        accept: () => {\n          this.props.deleteConnection(reference);\n        },\n        title: 'Confirm delete connection',\n        message: 'Are you sure you want to delete this connection?' });\n\n    }\n  }\n\n  closePanel() {\n    this.setState({ panelOpen: false });\n  }\n\n  openPanel() {\n    this.setState({ panelOpen: true });\n  }\n\n  render() {\n    const {\n      entity,\n      entityBeingEdited,\n      tab: selectedTab,\n      connectionsGroups,\n      relationships,\n      hasPageView,\n      user } =\n    this.props;\n\n    const { panelOpen, copyFrom, copyFromProps } = this.state;\n    const rawEntity = entity.toJS();\n    const summary = connectionsGroups.reduce(\n    (summaryData, g) => {\n      g.get('templates').forEach((template) => {\n        summaryData.totalConnections += template.get('count');\n      });\n      return summaryData;\n    },\n    { totalConnections: 0 });\n\n\n    const includeFooter = user.get('_id') && ['info', 'connections'].includes(selectedTab);\n    const hasHeader = ['info', 'connections'].includes(selectedTab);\n    const mainClass = `entity-viewer ${hasHeader ? 'with-header' : ''} ${\n    user.get('_id') && includeFooter ? 'with-footer' : ''\n    } ${panelOpen ? 'with-panel' : ''}`;\n\n    return /*#__PURE__*/(\n      _jsx(\"div\", { className: \"row\" }, void 0, /*#__PURE__*/\n      _jsx(Helmet, {}, void 0, /*#__PURE__*/\n      _jsx(\"title\", {}, void 0, entity.get('title') ? entity.get('title') : 'Entity')),\n\n\n      selectedTab !== 'page' && /*#__PURE__*/\n      _jsx(\"div\", { className: \"content-header content-header-entity\" }, void 0, /*#__PURE__*/\n      _jsx(\"div\", { className: \"content-header-title\" }, void 0, /*#__PURE__*/\n      _jsx(PropertyIcon, {\n        className: \"item-icon item-icon-center\",\n        data: entity.get('icon'),\n        size: \"sm\" }), /*#__PURE__*/\n\n      _jsx(\"h1\", { className: \"item-name\" }, void 0, entity.get('title')), /*#__PURE__*/\n      _jsx(TemplateLabel, { template: entity.get('template') }))), /*#__PURE__*/\n\n\n\n\n      _jsx(\"main\", { className: mainClass }, void 0, /*#__PURE__*/\n      _jsx(Tabs, { selectedTab: selectedTab }, void 0,\n      hasPageView && /*#__PURE__*/\n      _jsx(TabContent, { for: \"page\" }, void 0, /*#__PURE__*/\n      _jsx(PageViewer, { setBrowserTitle: false })), /*#__PURE__*/\n\n\n      _jsx(TabContent, {\n        for: selectedTab === 'info' || selectedTab === 'attachments' ? selectedTab : 'none' }, void 0, /*#__PURE__*/\n\n      _jsx(\"div\", { className: \"entity-metadata\" }, void 0,\n      (() => {\n        if (entityBeingEdited) {\n          return /*#__PURE__*/_jsx(EntityForm, { highlightedProps: copyFromProps });\n        }\n        return /*#__PURE__*/(\n          _jsx(\"div\", {}, void 0, /*#__PURE__*/\n          _jsx(ShowMetadata, {\n            relationships: relationships,\n            entity: rawEntity,\n            showTitle: false,\n            showType: false,\n            groupGeolocations: true }), /*#__PURE__*/\n\n          _jsx(FileList, { files: rawEntity.documents, entity: rawEntity }), /*#__PURE__*/\n          _jsx(AttachmentsList, {\n            attachments: rawEntity.attachments,\n            parentId: entity.get('_id'),\n            parentSharedId: entity.get('sharedId'),\n            entityView: true,\n            processed: entity.get('processed') })));\n\n\n\n      })())), /*#__PURE__*/\n\n\n      _jsx(TabContent, { for: \"connections\" }, void 0, /*#__PURE__*/\n      _jsx(ConnectionsList, { deleteConnection: this.deleteConnection, searchCentered: true })))),\n\n\n\n\n      user.get('_id') && /*#__PURE__*/\n      React.createElement(React.Fragment, null, /*#__PURE__*/\n      _jsx(ShowIf, { if: selectedTab === 'info' || selectedTab === 'attachments' }, void 0, /*#__PURE__*/\n      _jsx(\"div\", { className: `entity-footer ${panelOpen ? 'with-sidepanel' : ''}` }, void 0, /*#__PURE__*/\n      _jsx(MetadataFormButtons, {\n        includeViewButton: false,\n        delete: this.deleteEntity,\n        data: this.props.entity,\n        formStatePath: \"entityView.entityForm\",\n        entityBeingEdited: entityBeingEdited,\n        copyFrom: this.toggleCopyFrom }))), /*#__PURE__*/\n\n\n\n\n      _jsx(ShowIf, { if: selectedTab === 'connections' }, void 0, /*#__PURE__*/\n      _jsx(\"div\", { className: `entity-footer ${panelOpen ? 'with-sidepanel' : ''}` }, void 0, /*#__PURE__*/\n      _jsx(RelationshipsFormButtons, {})))), /*#__PURE__*/\n\n\n\n\n\n      _jsx(SidePanel, { className: `entity-connections entity-${selectedTab}`, open: panelOpen }, void 0, /*#__PURE__*/\n      _jsx(\"div\", { className: \"sidepanel-header\" }, void 0, /*#__PURE__*/\n      _jsx(\"button\", {\n        type: \"button\",\n        className: \"closeSidepanel close-modal\",\n        onClick: this.closePanel.bind(this),\n        \"aria-label\": \"Close side panel\" }, void 0, /*#__PURE__*/\n\n      _jsx(Icon, { icon: \"times\" })), /*#__PURE__*/\n\n      _jsx(Tabs, {\n        className: \"content-header-tabs\",\n        selectedTab: selectedTab,\n        handleSelect: (tabName) => {\n          this.props.showTab(tabName);\n        } }, void 0, /*#__PURE__*/\n\n      _jsx(\"ul\", { className: \"nav nav-tabs\" }, void 0,\n      hasPageView && /*#__PURE__*/\n      _jsx(\"li\", {}, void 0, /*#__PURE__*/\n      _jsx(TabLink, {\n        to: \"page\",\n        role: \"button\",\n        tabIndex: \"0\",\n        \"aria-label\": t('System', 'Page', null, false),\n        component: \"div\" }, void 0, /*#__PURE__*/\n\n      _jsx(Icon, { icon: \"file-image\" }), /*#__PURE__*/\n      _jsx(\"span\", { className: \"tab-link-tooltip\" }, void 0, t('System', 'Page')))), /*#__PURE__*/\n\n\n\n      _jsx(\"li\", {}, void 0, /*#__PURE__*/\n      _jsx(TabLink, {\n        to: \"info\",\n        role: \"button\",\n        tabIndex: \"0\",\n        \"aria-label\": t('System', 'Info', null, false),\n        component: \"div\" }, void 0, /*#__PURE__*/\n\n      _jsx(Icon, { icon: \"info-circle\" }), /*#__PURE__*/\n      _jsx(\"span\", { className: \"tab-link-tooltip\" }, void 0, t('System', 'Info')))), /*#__PURE__*/\n\n\n      _jsx(\"li\", {}, void 0, /*#__PURE__*/\n      _jsx(TabLink, {\n        to: \"connections\",\n        role: \"button\",\n        tabIndex: \"0\",\n        \"aria-label\": t('System', 'Connections', null, false),\n        component: \"div\" }, void 0, /*#__PURE__*/\n\n      _jsx(Icon, { icon: \"exchange-alt\" }), /*#__PURE__*/\n      _jsx(\"span\", { className: \"connectionsNumber\" }, void 0, summary.totalConnections), /*#__PURE__*/\n      _jsx(\"span\", { className: \"tab-link-tooltip\" }, void 0, t('System', 'Connections'))))))), /*#__PURE__*/\n\n\n\n\n\n      _jsx(ShowIf, { if: selectedTab === 'info' || selectedTab === 'connections' }, void 0, /*#__PURE__*/\n      _jsx(\"div\", { className: \"sidepanel-footer\" }, void 0, /*#__PURE__*/\n      _jsx(ResetSearch, {}))), /*#__PURE__*/\n\n\n\n      _jsx(\"div\", { className: \"sidepanel-body\" }, void 0, /*#__PURE__*/\n      _jsx(Tabs, { selectedTab: selectedTab }, void 0, /*#__PURE__*/\n      _jsx(TabContent, {\n        for: ['info', 'connections', 'page'].includes(selectedTab) ? selectedTab : 'none' }, void 0, /*#__PURE__*/\n\n      _jsx(ConnectionsGroups, {}))))), /*#__PURE__*/\n\n\n\n\n      _jsx(SidePanel, { className: \"copy-from-panel\", open: copyFrom }, void 0, /*#__PURE__*/\n      _jsx(\"div\", { className: \"sidepanel-body\" }, void 0, /*#__PURE__*/\n      _jsx(CopyFromEntity, {\n        originalEntity: this.props.entity.toJS(),\n        templates: this.props.templates,\n        onSelect: this.onCopyFromSelect,\n        formModel: \"entityView.entityForm\",\n        onCancel: this.toggleCopyFrom }))), /*#__PURE__*/\n\n\n\n\n      _jsx(ContextMenu, {\n        align: `bottom${includeFooter ? '-with-footer' : ''}`,\n        overrideShow: true,\n        show: !panelOpen,\n        className: \"show-info-sidepanel-context-menu\" }, void 0, /*#__PURE__*/\n\n      _jsx(ShowSidepanelMenu, {\n        className: \"show-info-sidepanel-menu\",\n        panelIsOpen: panelOpen,\n        openPanel: this.openPanel })), /*#__PURE__*/\n\n\n\n      _jsx(CreateConnectionPanel, {\n        className: \"entity-create-connection-panel\",\n        containerId: entity.sharedId,\n        onCreate: this.props.connectionsChanged }), /*#__PURE__*/\n\n      _jsx(AddEntitiesPanel, {}), /*#__PURE__*/\n      _jsx(RelationshipMetadata, {})));\n\n\n  }}\n\n\nEntityViewer.defaultProps = {\n  relationships: Immutable.fromJS([]),\n  entityBeingEdited: false,\n  tab: 'info',\n  hasPageView: false,\n  user: Immutable.fromJS({}) };\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nEntityViewer.contextTypes = {\n  confirm: PropTypes.func };\n\n\nconst selectRelationTypes = createSelector(\n(s) => s.relationTypes,\n(r) => r.toJS());\n\n\nconst mapStateToProps = (state) => {\n  const entityTemplateId = state.entityView.entity && state.entityView.entity.get('template');\n  const entityTemplate = state.templates.find((template) => template.get('_id') === entityTemplateId);\n  const templateWithPageView = entityTemplate.get('entityViewPage');\n  const defaultTab = templateWithPageView ? 'page' : 'info';\n  const { uiState } = state.entityView;\n  return {\n    entity: state.entityView.entity,\n    relationTypes: selectRelationTypes(state),\n    templates: state.templates,\n    relationships: state.entityView.entity.get('relations'),\n    connectionsGroups: state.relationships.list.connectionsGroups,\n    entityBeingEdited: !!state.entityView.entityForm._id,\n    tab: uiState.get('userSelectedTab') ? uiState.get('tab') : defaultTab,\n    hasPageView: Boolean(templateWithPageView),\n    user: state.user,\n    // Is this used at all?\n    library: state.library };\n\n};\n\nfunction mapDispatchToProps(dispatch) {\n  return bindActionCreators(\n  {\n    deleteEntity,\n    connectionsChanged,\n    deleteConnection,\n    showTab,\n    startNewConnection: connectionsActions.startNewConnection },\n\n  dispatch);\n\n}\n\nexport { EntityViewer, mapStateToProps };\nexport default connect(mapStateToProps, mapDispatchToProps)(EntityViewer);","function ownKeys(object, enumerableOnly) {var keys = Object.keys(object);if (Object.getOwnPropertySymbols) {var symbols = Object.getOwnPropertySymbols(object);enumerableOnly && (symbols = symbols.filter(function (sym) {return Object.getOwnPropertyDescriptor(object, sym).enumerable;})), keys.push.apply(keys, symbols);}return keys;}function _objectSpread(target) {for (var i = 1; i < arguments.length; i++) {var source = null != arguments[i] ? arguments[i] : {};i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {_defineProperty(target, key, source[key]);}) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));});}return target;}function _defineProperty(obj, key, value) {if (key in obj) {Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });} else {obj[key] = value;}return obj;}\nimport { formater as formatter } from \"../Metadata\";\nimport {\npick,\nisArray,\nisObject,\nisEmpty,\ntoPairs,\ntake,\nget,\ngroupBy,\nhas,\nflatMap } from\n'lodash';\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst pickEntityFields = (entity) =>\npick(entity, [\n'title',\n'sharedId',\n'creationDate',\n'editDate',\n'language',\n'template',\n'inheritedProperty']);\n\n\nconst metadataFields = (property) => {\n  switch (property.type) {\n    case 'geolocation':\n      return { displayValue: 'value[0]', value: 'value' };\n    default:\n      return { displayValue: 'value', value: ['timestamp', 'originalValue', 'value'] };}\n\n};\n\nconst propertyDisplayType = (property) => {\n  switch (property.type) {\n    case 'relationship':\n      return 'inherit';\n    default:\n      return property.type;}\n\n};\n\nconst formatPropertyValue = (\ntarget,\nmetadataField) =>\n{\n  const availableProperties = pick(target, metadataField.value);\n  const firstValue =\n  isObject(availableProperties) && !isEmpty(availableProperties) ?\n  take(toPairs(availableProperties), 1)[0][1] :\n  target;\n  return firstValue;\n};\n\nconst formatProperty = (item) => {\n  const values = !isArray(item.value) || !item.value.length ? [item] : item.value;\n  const formattedItem = values.map((target) => {\n    const relatedEntity = pickEntityFields(target.relatedEntity);\n    const metadataField = metadataFields(item);\n    const value = formatPropertyValue(target, metadataField);\n    return _objectSpread({\n      displayValue: get(target, metadataField.displayValue, value),\n      value,\n      name: item.name,\n      type: propertyDisplayType(item) },\n    !isEmpty(relatedEntity) ? { reference: relatedEntity } : {});\n\n  });\n  return formattedItem;\n};\n\nconst formatAggregationsMetadata = (metadata) =>\nObject.entries(metadata).reduce((memo, [propertyName, values]) => {\n  const formmatedValues = values.map((value) =>\n  value.label && value.label.length ? value.label : value.value);\n\n  const result = { [propertyName]: formmatedValues };\n  return _objectSpread(_objectSpread({}, memo), result);\n}, {});\n\nconst aggregateByTemplate = (\nrelations,\nrelationship,\ninheritingProperties) =>\n\nrelations.reduce((groupedRelations, relation) => {\n  const { template } = relation.entityData;\n  const groupName = `${relationship.name}-${template}`;\n  const relationMetadata = pick(\n  relation.entityData.metadata,\n  inheritingProperties[template]);\n\n  const metadata = formatAggregationsMetadata(relationMetadata || {});\n  const relatedEntity = {\n    title: relation.entityData.title,\n    sharedId: relation.entityData.sharedId,\n    metadata };\n\n  return !has(groupedRelations, groupName) ? _objectSpread(_objectSpread({},\n  groupedRelations), {}, { [groupName]: [relatedEntity] }) : _objectSpread(_objectSpread({},\n  groupedRelations), {}, { [groupName]: [...groupedRelations[groupName], relatedEntity] });\n}, {});\n\nconst getInheritingProperties = (templates, entityTemplate) =>\ntemplates.reduce((inheriting, template) => {var _entityTemplate$prope;\n  const inheritedProperties = (_entityTemplate$prope = entityTemplate.properties) === null || _entityTemplate$prope === void 0 ? void 0 : _entityTemplate$prope.\n  map((entityProperty) => {var _template$properties;\n    if (!(entityProperty !== null && entityProperty !== void 0 && entityProperty.inherit)) return undefined;\n    const inheritingPropertyName = (_template$properties = template.properties) === null || _template$properties === void 0 ? void 0 : _template$properties.find(\n    (property) => {var _entityProperty$inher;return (property === null || property === void 0 ? void 0 : property._id) === (entityProperty === null || entityProperty === void 0 ? void 0 : (_entityProperty$inher = entityProperty.inherit) === null || _entityProperty$inher === void 0 ? void 0 : _entityProperty$inher.property);});\n\n    return inheritingPropertyName === null || inheritingPropertyName === void 0 ? void 0 : inheritingPropertyName.name;\n  }).\n  filter((value) => !!value);\n  return inheritedProperties !== null && inheritedProperties !== void 0 && inheritedProperties.length ? _objectSpread(_objectSpread({},\n  inheriting), {}, { [template._id]: inheritedProperties }) :\n  inheriting;\n}, {});\n\nconst filterInheritedRelations = (\nentity,\ninheritingProperties) =>\n{\n  const targetEntities = flatMap(entity.metadata, (property) =>\n  property.value && property.value.length ?\n  flatMap(property.value, (value) => value.relatedEntity) :\n  []).\n\n  filter((v) => v).\n  map((relatedEntity) => relatedEntity.sharedId);\n  return entity.relations.filter(\n  (relation) =>\n  relation.entityData &&\n  has(inheritingProperties, relation.entityData.template) &&\n  targetEntities.includes(relation.entityData.sharedId));\n\n};\n\nconst aggregateRelationships = (\nentity,\nrelationTypes,\nentityTemplate,\n_templates) =>\n{\n  if (!entity.relations || !entity.relations.length || !entityTemplate) {\n    return {};\n  }\n  const templates = _templates.\n  filter((template) => (template === null || template === void 0 ? void 0 : template.get('_id')) !== entityTemplate.get('_id')).\n  toJS();\n\n  const inheritingProperties = getInheritingProperties(templates, entityTemplate.toJS());\n  const filteredRelations = filterInheritedRelations(entity, inheritingProperties);\n  const relationshipGroups = groupBy(filteredRelations, 'template');\n\n  const namedRelationshipGroups = Object.entries(relationshipGroups).reduce(\n  (aggregated, [relationshipId, relations]) => {\n    const relationship = relationTypes.find(({ _id }) => _id === relationshipId);\n    if (relationship) {\n      const aggregatedByTemplate = aggregateByTemplate(\n      relations,\n      relationship,\n      inheritingProperties);\n\n      return _objectSpread(_objectSpread({}, aggregated), aggregatedByTemplate);\n    }\n    return aggregated;\n  },\n  {});\n\n\n  return namedRelationshipGroups;\n};\n\nconst formatEntityData = (\nformattedEntity,\nrelationTypes,\nentityTemplate,\ntemplates) =>\n{\n  const entity = pickEntityFields(formattedEntity);\n\n  const formattedMetadata = formattedEntity.metadata.reduce((memo, property) => {\n    const formattedProperty = formatProperty(property);\n    return _objectSpread(_objectSpread({}, memo), {}, { [property.name]: formattedProperty });\n  }, {});\n\n  const relationshipAggregations = aggregateRelationships(\n  formattedEntity,\n  relationTypes,\n  entityTemplate,\n  templates);\n\n\n  return _objectSpread(_objectSpread({},\n  entity), {}, {\n    metadata: formattedMetadata,\n    inherited_relationships: relationshipAggregations });\n\n};\n\nconst formatEntity = (formattedEntity) => {\n  const originalMetadata = formattedEntity.metadata;\n  const metadata = originalMetadata.reduce(\n  (memo, property) => _objectSpread(_objectSpread({}, memo), {}, { [property.name]: property }),\n  {});\n\n  return _objectSpread(_objectSpread({}, formattedEntity), {}, { metadata });\n};\n\nconst prepareAssets = (\nentityRaw,\ntemplate,\nstate,\nrelationTypes) =>\n{\n  const formattedEntity = formatter.prepareMetadata(entityRaw, state.templates, state.thesauris);\n  const entity = formatEntity(formattedEntity);\n  const entityData = formatEntityData(formattedEntity, relationTypes, template, state.templates);\n  return { entity, entityRaw, entityData, template: template.toJS() };\n};\n\nexport { prepareAssets };","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}function ownKeys(object, enumerableOnly) {var keys = Object.keys(object);if (Object.getOwnPropertySymbols) {var symbols = Object.getOwnPropertySymbols(object);enumerableOnly && (symbols = symbols.filter(function (sym) {return Object.getOwnPropertyDescriptor(object, sym).enumerable;})), keys.push.apply(keys, symbols);}return keys;}function _objectSpread(target) {for (var i = 1; i < arguments.length; i++) {var source = null != arguments[i] ? arguments[i] : {};i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {_defineProperty(target, key, source[key]);}) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));});}return target;}function _defineProperty(obj, key, value) {if (key in obj) {Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });} else {obj[key] = value;}return obj;}import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\n\nimport { actions } from \"../BasicReducer\";\nimport SearchButton from \"../Entities/components/SearchButton\";\nimport relationTypesAPI from \"../RelationTypes/RelationTypesAPI\";\nimport * as relationships from \"../Relationships/utils/routeUtils\";\n\nimport { getPageAssets } from \"../Pages/utils/getPageAssets\";\n\nimport { notificationActions } from \"../Notifications\";\nimport EntityViewer from \"../Entities/components/EntityViewer\";\nimport entitiesAPI from \"../Entities/EntitiesAPI\";\nimport { prepareAssets } from \"./pageAssets\";\n\nimport * as uiActions from \"../Entities/actions/uiActions\";\n\nclass Entity extends Component {\n  static async requestState(requestParams, state) {\n    const [[entity], relationTypes, [connectionsGroups, searchResults, sort, filters]] =\n    await Promise.all([\n    entitiesAPI.get(requestParams.set({ sharedId: requestParams.data.sharedId })),\n    relationTypesAPI.get(requestParams.onlyHeaders()),\n    relationships.requestState(requestParams, state)]);\n\n\n    const entityTemplate = state.templates.find((t) => t.get('_id') === entity.template);\n\n    const pageActions = [];\n    if (entityTemplate.get('entityViewPage')) {\n      const assets = prepareAssets(entity, entityTemplate, state, relationTypes);\n      const { pageView, itemLists, datasets, errors } = await getPageAssets(\n      requestParams.set({ sharedId: entityTemplate.get('entityViewPage') }),\n      undefined, _objectSpread({},\n\n      assets));\n\n\n\n      pageActions.push(\n      actions.set('page/pageView', pageView),\n      actions.set('page/itemLists', itemLists),\n      actions.set('page/datasets', datasets));\n\n      if (errors && state.user.get('_id')) {\n        pageActions.push(notificationActions.notify(errors, 'warning'));\n      }\n    }\n\n    return [\n    actions.set('relationTypes', relationTypes),\n    actions.set('entityView/entity', entity),\n    relationships.setReduxState({\n      relationships: {\n        list: {\n          sharedId: entity.sharedId,\n          entity,\n          connectionsGroups,\n          searchResults,\n          sort,\n          filters,\n          view: 'graph' } } })].\n\n\n\n    concat(pageActions);\n  }\n\n  componentWillUnmount() {\n    this.context.store.dispatch(uiActions.resetUserSelectedTab());\n    this.context.store.dispatch(actions.unset('page/pageView'));\n    this.context.store.dispatch(actions.unset('page/itemLists'));\n    this.context.store.dispatch(actions.unset('page/datasets'));\n  }\n\n  static renderTools() {\n    return /*#__PURE__*/(\n      _jsx(\"div\", { className: \"searchBox\" }, void 0, /*#__PURE__*/\n      _jsx(SearchButton, { storeKey: \"library\" })));\n\n\n  }\n\n  render() {\n    return /*#__PURE__*/_jsx(EntityViewer, {});\n  }}\n\n\nEntity.contextTypes = {\n  store: PropTypes.object };\n\n\nexport default Entity;","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import { Map } from 'immutable';\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\n\nimport EntityView from \"../EntityView\";\nimport Loader from \"../../components/Elements/Loader\";\n\nimport PDFView from \"../PDFView\";\n\nexport class ViewerComponent extends Component {\n  render() {\n    const { entity } = this.props;\n\n    if (!entity.get('_id')) {\n      return /*#__PURE__*/_jsx(Loader, {});\n    }\n\n    return entity.get('defaultDoc') ? /*#__PURE__*/React.createElement(PDFView, this.props) : /*#__PURE__*/React.createElement(EntityView, this.props);\n  }}\n\n\n\n\n\n\nconst mapStateToProps = (state) => {\n  const entity = state.documentViewer.doc.get('_id') ?\n  state.documentViewer.doc :\n  state.entityView.entity;\n\n  return {\n    entity };\n\n};\n\nexport default connect(mapStateToProps)(ViewerComponent);","import RouteHandler from \"../App/RouteHandler\";\nimport EntitiesAPI from \"../Entities/EntitiesAPI\";\nimport React from 'react';\nimport { actions as formActions } from 'react-redux-form';\nimport { actions } from \"../BasicReducer\";\nimport * as relationships from \"../Relationships/utils/routeUtils\";\nimport PDFView from \"./PDFView\";\nimport EntityView from \"./EntityView\";\nimport ViewerComponent from \"./components/ViewerComponent\";\nimport { setReferences } from \"./actions/referencesActions\";\n\nclass ViewerRoute extends RouteHandler {\n  static async requestState(requestParams, globalResources) {\n    const { sharedId } = requestParams.data;\n    const [entity] = await EntitiesAPI.get(\n    requestParams.set({ sharedId, omitRelationships: true }));\n\n\n    return entity.documents.length ?\n    PDFView.requestState(requestParams, globalResources) :\n    EntityView.requestState(requestParams, globalResources);\n  }\n\n  componentWillUnmount() {\n    this.emptyState();\n  }\n\n  emptyState() {\n    this.context.store.dispatch(actions.unset('viewer/doc'));\n    this.context.store.dispatch(actions.unset('viewer/templates'));\n    this.context.store.dispatch(actions.unset('viewer/thesauris'));\n    this.context.store.dispatch(actions.unset('viewer/relationTypes'));\n    this.context.store.dispatch(actions.unset('viewer/rawText'));\n    this.context.store.dispatch(formActions.reset('documentViewer.tocForm'));\n    this.context.store.dispatch(actions.unset('viewer/targetDoc'));\n    this.context.store.dispatch(setReferences([]));\n    this.context.store.dispatch(actions.unset('entityView/entity'));\n    this.context.store.dispatch(relationships.emptyState());\n  }\n\n  urlHasChanged(nextProps) {\n    const { query } = this.props.location;\n    const { query: nextQuery } = nextProps.location;\n    const sameQueryFile = query.file === nextQuery.file;\n    return super.urlHasChanged(nextProps) || !sameQueryFile;\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(ViewerComponent, this.props);\n  }}\n\n\nViewerRoute.defaultProps = {\n  params: {} };\n\n\nexport default ViewerRoute;","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import RouteHandler from \"../App/RouteHandler\";\nimport React from 'react';\nimport { TableViewer } from \"../Layout/TableViewer\";\nimport Library from \"./Library\";\nimport { requestState } from \"./helpers/requestState\";\n\n/* TODO: This class is a temporal approach to be removed when we can\n   make Library and LibraryTable subclasses of the same base class. */\nclass LibraryOverrideRequestState extends Library {\n  static async requestState(requestParams, globalResources) {\n    return requestState(requestParams, globalResources, { calculateTableColumns: true });\n  }}\n\n\nexport class LibraryTable extends RouteHandler {\n  render() {\n    return /*#__PURE__*/(\n      _jsx(LibraryOverrideRequestState, {\n        viewer: TableViewer,\n        location: this.props.location,\n        sidePanelMode: \"unpinned-mode\",\n        noScrollable: true }));\n\n\n  }}","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}function _extends() {_extends = Object.assign ? Object.assign.bind() : function (target) {for (var i = 1; i < arguments.length; i++) {var source = arguments[i];for (var key in source) {if (Object.prototype.hasOwnProperty.call(source, key)) {target[key] = source[key];}}}return target;};return _extends.apply(this, arguments);}import React from 'react';\nimport { IndexRoute, Route } from 'react-router';\nimport App from \"./App/App\";\nimport Activitylog from \"./Activitylog/Activitylog\";\nimport { trackPage } from \"./App/GoogleAnalytics\";\nimport Configure2fa from \"./Auth2fa/Configure2fa\";\nimport EditTranslations from \"./I18N/EditTranslations\";\nimport blankState from \"./Library/helpers/blankState\";\nimport Library from \"./Library/Library\";\nimport LibraryMap from \"./Library/LibraryMap\";\nimport { MetadataExtractionDashboard } from \"./MetadataExtraction/MetadataExtractionDashboard\";\nimport { IXSuggestions } from \"./MetadataExtraction/SuggestionsContainer\";\nimport EditPage from \"./Pages/EditPage\";\nimport NewPage from \"./Pages/NewPage\";\nimport Pages from \"./Pages/Pages\";\nimport PageView from \"./Pages/PageView\";\nimport EditRelationType from \"./RelationTypes/EditRelationType\";\nimport NewRelationType from \"./RelationTypes/NewRelationType\";\nimport OneUpReview from \"./Review/OneUpReview\";\nimport SemanticSearchResultsView from \"./SemanticSearch/SemanticSearchResultsView\";\nimport {\nPreserveSettings,\nAccountSettings,\nCollectionSettings,\nCustomisation,\nCustomUploads,\nEntityTypesList,\nFiltersForm,\nLanguages,\nNavlinksSettings,\nRelationTypesList,\nSettings,\nThesauriList,\nTranslationsList } from \"./Settings\";\n\nimport EditTemplate from \"./Templates/EditTemplate\";\nimport NewTemplate from \"./Templates/NewTemplate\";\nimport EditThesauri from \"./Thesauri/EditThesauri\";\nimport NewThesauri from \"./Thesauri/NewThesauri\";\nimport ThesaurusCockpit from \"./Thesauri/ThesaurusCockpit\";\nimport Uploads from \"./Uploads/UploadsRoute\";\nimport Login from \"./Users/Login\";\nimport ResetPassword from \"./Users/ResetPassword\";\nimport UnlockAccount from \"./Users/UnlockAccount\";\nimport ViewerRoute from \"./Viewer/ViewerRoute\";\nimport GeneralError from \"./App/ErrorHandling/GeneralError\";\nimport { UserManagement } from \"./Users/UserManagement\";\nimport { store } from \"./store\";\nimport { LibraryTable } from \"./Library/LibraryTable\";\nimport { validateHomePageRoute } from \"./utils/routeHelpers\";\n\nconst onEnter = () => {\n  trackPage();\n};\n\nconst needsAuth = (_nxtState, replace) => {\n  if (!store.getState().user.get('_id')) {\n    replace('/login');\n  }\n};\n\nconst enterOnLibrary = (_nxtState, replace) => {\n  const state = store.getState();\n  if (blankState() && !state.user.get('_id')) {\n    return replace('/login');\n  }\n\n  trackPage();\n  return () => {};\n};\n\nconst getDefaultLibraryComponent = (defaultLibraryView) => {\n  switch (defaultLibraryView) {\n    case 'table':\n      return {\n        component: LibraryTable,\n        onEnter: enterOnLibrary };\n\n    case 'map':\n      return {\n        component: LibraryMap,\n        onEnter };\n\n    case 'cards':\n    default:\n      return {\n        component: Library,\n        onEnter: enterOnLibrary };}\n\n\n};\n\nconst getPageIndexRoute = (customHomePage) => {\n  onEnter();\n  const pageId = customHomePage[customHomePage.indexOf('page') + 1];\n  const component = (props) => /*#__PURE__*/React.createElement(PageView, _extends({}, props, { params: { sharedId: pageId } }));\n  component.requestState = (requestParams) =>\n  PageView.requestState(requestParams.set({ sharedId: pageId }));\n\n  return {\n    component,\n    customHomePageId: pageId };\n\n};\n\nconst libraryDefaults = (callBack, state, defaultView) => {\n  if (state.user.get('_id')) {\n    return callBack(null, {\n      onEnter: (_nextState, replace) => {\n        replace('/library/?q=(includeUnpublished:!t)');\n      } });\n\n  }\n\n  return callBack(null, getDefaultLibraryComponent(defaultView));\n};\nconst getIndexRoute = (_nextState, callBack) => {\n  const state = store.getState();\n  const homePageSetting = state.settings.collection.get('home_page') || '';\n  const customHomePage = homePageSetting ? homePageSetting.split('/').filter((v) => v) : [];\n  const defaultView = state.settings.collection.get('defaultLibraryView');\n\n  if (!validateHomePageRoute(homePageSetting) || customHomePage.length === 0) {\n    return libraryDefaults(callBack, state, defaultView);\n  }\n  return customHomePage.includes('page') ?\n  callBack(null, getPageIndexRoute(customHomePage)) :\n  callBack(null, {\n    onEnter: (_nxtState, replace) => {\n      replace(customHomePage.join('/'));\n    } });\n\n};\n\nconst routes = /*#__PURE__*/\n_jsx(Route, { getIndexRoute: getIndexRoute }, void 0, /*#__PURE__*/\n_jsx(Route, { path: \"settings\", component: Settings, onEnter: needsAuth }, void 0, /*#__PURE__*/\n_jsx(Route, { path: \"account\", component: AccountSettings }), /*#__PURE__*/\n_jsx(Route, { path: \"2fa\", component: Configure2fa }), /*#__PURE__*/\n_jsx(Route, { path: \"collection\", component: CollectionSettings }), /*#__PURE__*/\n_jsx(Route, { path: \"navlinks\", component: NavlinksSettings }), /*#__PURE__*/\n_jsx(Route, { path: \"users\", component: UserManagement }), /*#__PURE__*/\n_jsx(Route, { path: \"preserve\", component: PreserveSettings }), /*#__PURE__*/\n_jsx(Route, { path: \"pages\" }, void 0, /*#__PURE__*/\n_jsx(IndexRoute, { component: Pages }), /*#__PURE__*/\n_jsx(Route, { path: \"new\", component: NewPage }), /*#__PURE__*/\n_jsx(Route, { path: \"edit/:sharedId\", component: EditPage })), /*#__PURE__*/\n\n_jsx(Route, { path: \"templates\" }, void 0, /*#__PURE__*/\n_jsx(IndexRoute, { component: EntityTypesList }), /*#__PURE__*/\n_jsx(Route, { path: \"new\", component: NewTemplate }), /*#__PURE__*/\n_jsx(Route, { path: \"edit/:templateId\", component: EditTemplate })), /*#__PURE__*/\n\n_jsx(Route, { path: \"metadata_extraction\", component: MetadataExtractionDashboard }), /*#__PURE__*/\n_jsx(Route, { path: \"metadata_extraction/suggestions/:propertyName\", component: IXSuggestions }), /*#__PURE__*/\n_jsx(Route, { path: \"connections\" }, void 0, /*#__PURE__*/\n_jsx(IndexRoute, { component: RelationTypesList }), /*#__PURE__*/\n_jsx(Route, { path: \"new\", component: NewRelationType }), /*#__PURE__*/\n_jsx(Route, { path: \"edit/:_id\", component: EditRelationType })), /*#__PURE__*/\n\n_jsx(Route, { path: \"dictionaries\" }, void 0, /*#__PURE__*/\n_jsx(IndexRoute, { component: ThesauriList }), /*#__PURE__*/\n_jsx(Route, { path: \"new\", component: NewThesauri }), /*#__PURE__*/\n_jsx(Route, { path: \"edit/:_id\", component: EditThesauri }), /*#__PURE__*/\n_jsx(Route, { path: \"cockpit/:_id\", component: ThesaurusCockpit })), /*#__PURE__*/\n\n_jsx(Route, { path: \"languages\", component: Languages }), /*#__PURE__*/\n_jsx(Route, { path: \"translations\" }, void 0, /*#__PURE__*/\n_jsx(IndexRoute, { component: TranslationsList }), /*#__PURE__*/\n_jsx(Route, { path: \"edit/:context\", component: EditTranslations })), /*#__PURE__*/\n\n_jsx(Route, { path: \"filters\", component: FiltersForm }), /*#__PURE__*/\n_jsx(Route, { path: \"customisation\", component: Customisation }), /*#__PURE__*/\n_jsx(Route, { path: \"custom-uploads\", component: CustomUploads }), /*#__PURE__*/\n_jsx(Route, { path: \"activitylog\", component: Activitylog, onEnter: needsAuth })), /*#__PURE__*/\n\n_jsx(Route, { path: \"library\", component: Library, onEnter: enterOnLibrary }), /*#__PURE__*/\n_jsx(Route, { path: \"library/map\", component: LibraryMap, onEnter: onEnter }), /*#__PURE__*/\n_jsx(Route, { path: \"library/table\", component: LibraryTable, onEnter: enterOnLibrary }), /*#__PURE__*/\n_jsx(Route, { path: \"review\", component: OneUpReview, onEnter: needsAuth }), /*#__PURE__*/\n_jsx(Route, { path: \"uploads\", component: Uploads }), /*#__PURE__*/\n_jsx(Route, { path: \"login\", component: Login }), /*#__PURE__*/\n_jsx(Route, { path: \"setpassword/:key\", component: ResetPassword }), /*#__PURE__*/\n_jsx(Route, { path: \"unlockaccount/:username/:code\", component: UnlockAccount }), /*#__PURE__*/\n_jsx(Route, { path: \"document/:sharedId*\", component: ViewerRoute, onEnter: onEnter }), /*#__PURE__*/\n_jsx(Route, { path: \"entity/:sharedId\", component: ViewerRoute, onEnter: onEnter }), /*#__PURE__*/\n_jsx(Route, { path: \"page/:sharedId\", component: PageView, onEnter: onEnter }), /*#__PURE__*/\n_jsx(Route, { path: \"page/:sharedId/:slug\", component: PageView, onEnter: onEnter }), /*#__PURE__*/\n_jsx(Route, {\n  path: \"semanticsearch/:searchId\",\n  component: SemanticSearchResultsView,\n  onEnter: onEnter }), /*#__PURE__*/\n\n_jsx(Route, { path: \"error/:errorCode\", component: GeneralError }), /*#__PURE__*/\n_jsx(Route, { path: \"404\", component: GeneralError }));\n\n\n\nexport { getIndexRoute };\n\nexport default /*#__PURE__*/\n_jsx(Route, { path: \"/\", component: App }, void 0,\nroutes, /*#__PURE__*/\n_jsx(Route, { path: \":lang\" }, void 0,\nroutes, /*#__PURE__*/\n_jsx(Route, { path: \"*\", component: GeneralError })), /*#__PURE__*/\n\n_jsx(Route, { path: \"*\", component: GeneralError }));","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import { Provider } from 'react-redux';\nimport { Router, browserHistory } from 'react-router';\nimport React from 'react';\n\nimport CustomProvider from \"./App/Provider\";\nimport Routes from \"./Routes\";\nimport { store } from \"./store\";\n\nconst App = () => /*#__PURE__*/\n_jsx(Provider, { store: store }, void 0, /*#__PURE__*/\n_jsx(CustomProvider, {}, void 0, /*#__PURE__*/\n_jsx(Router, { history: browserHistory }, void 0, Routes)));\n\n\n\n\nexport default App;","import { actions } from \"../BasicReducer\";\nimport { t, Translate } from \"../I18N\";\nimport { notificationActions } from \"../Notifications\";\nimport { documentProcessed } from \"../Uploads/actions/uploadsActions\";\nimport { store } from \"../store\";\nimport { socket, reconnectSocket } from \"../socket\";\n\nlet disconnectNotifyId;\nlet disconnectTimeoutMessage;\nsocket.on('disconnect', (reason) => {\n  if (reason === 'transport close') {\n    if (disconnectNotifyId) {\n      store.dispatch(notificationActions.removeNotification(disconnectNotifyId));\n    }\n    disconnectTimeoutMessage = setTimeout(() => {\n      disconnectNotifyId = store.dispatch(\n      notificationActions.notify(\n      'Lost connection to the server, your changes may be lost',\n      'danger',\n      false));\n\n\n    }, 8000);\n  }\n});\n\nsocket.io.on('reconnect', () => {\n  clearTimeout(disconnectTimeoutMessage);\n  if (disconnectNotifyId) {\n    store.dispatch(notificationActions.removeNotification(disconnectNotifyId));\n    disconnectNotifyId = store.dispatch(\n    notificationActions.notify('Connected to server', 'success'));\n\n    disconnectNotifyId = null;\n  }\n});\n\nsocket.on('forceReconnect', () => {\n  reconnectSocket();\n});\n\nsocket.on('templateChange', (template) => {\n  store.dispatch(actions.update('templates', template));\n});\n\nsocket.on('templateDelete', (template) => {\n  store.dispatch(actions.remove('templates', { _id: template.id }));\n});\n\nsocket.on('updateSettings', (settings) => {\n  store.dispatch(actions.set('settings/collection', settings));\n});\n\nsocket.on('thesauriChange', (thesauri) => {\n  store.dispatch(actions.update('thesauris', thesauri));\n});\nsocket.on('thesauriDelete', (thesauri) => {\n  store.dispatch(actions.remove('thesauris', { _id: thesauri.id }));\n});\n\nsocket.on('translationsChange', (translations) => {\n  store.dispatch(actions.update('translations', translations));\n  t.resetCachedTranslation();\n  Translate.resetCachedTranslation();\n});\n\nsocket.on('documentProcessed', (sharedId) => {\n  store.dispatch(documentProcessed(sharedId));\n});\n\nsocket.on('IMPORT_CSV_START', () => store.dispatch(actions.set('importStart', true)));\nsocket.on('IMPORT_CSV_PROGRESS', (progress) =>\nstore.dispatch(actions.set('importProgress', progress)));\n\nsocket.on('IMPORT_CSV_ERROR', (error) => store.dispatch(actions.set('importError', error)));\nsocket.on('IMPORT_CSV_END', () => store.dispatch(actions.set('importEnd', true)));","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport * as Sentry from '@sentry/react';\n\nimport { BrowserTracing } from '@sentry/tracing';\n\nimport { AppContainer } from 'react-hot-loader';\n\nimport App from \"./App\";\n\nimport \"./App/sockets\";\n\nif (window.SENTRY_APP_DSN) {\n  Sentry.init({\n    release: window.UWAZI_VERSION,\n    environment: window.UWAZI_ENVIRONMENT,\n    dsn: window.SENTRY_APP_DSN,\n    integrations: [new BrowserTracing()],\n    tracesSampleRate: 0.1 });\n\n}\n\nconst render = (Component) => {\n  ReactDOM.hydrate( /*#__PURE__*/\n  _jsx(AppContainer, {}, void 0, /*#__PURE__*/\n  _jsx(Component, {})),\n\n  document.getElementById('root'));\n\n};\n\nrender(App);\n\nif (module.hot) {\n  module.hot.accept('./App', () => {\n    const nextApp = require(\"./App\");\n    render(nextApp);\n  });\n}","import io from 'socket.io-client';\nimport { isClient } from \"./utils\";\n\nlet _socket = { on: (_event, _listener) => {}, off: (_event, _listener) => {} };\n\nif (isClient) {\n  //only websockets used, this allows for non sticky sessions on load balancer\n  _socket = io({ transports: ['websocket'], upgrade: false });\n}\n\nconst reconnectSocket = () => {\n  _socket.disconnect();\n  _socket.connect();\n};\n\nexport const socket = _socket;\nexport { reconnectSocket };","import Immutable from 'immutable';\n\nimport * as actions from \"../actions/actionTypes\";\n\nconst initialState = { thesauris: [], templates: [], propertyBeingDeleted: null };\n\nexport default function templatesUI(state = initialState, action = {}) {\n  if (action.type === actions.EDIT_PROPERTY) {\n    return state.set('editingProperty', action.id);\n  }\n\n  if (action.type === actions.SET_THESAURIS) {\n    return state.set('thesauris', action.thesauris);\n  }\n\n  if (action.type === actions.SET_TEMPLATES) {\n    return state.set('templates', action.templates);\n  }\n\n  if (action.type === actions.SAVING_TEMPLATE) {\n    return state.set('savingTemplate', true);\n  }\n\n  if (action.type === actions.TEMPLATE_SAVED) {\n    return state.set('savingTemplate', false);\n  }\n\n  return Immutable.fromJS(state);\n}","import { combineReducers } from 'redux';\nimport { modelReducer, formReducer } from 'react-redux-form';\n\nimport ui from \"./uiReducer.js\";\nimport templateCommonProperties from \"../utils/templateCommonProperties\";\n\nexport default combineReducers({\n  data: modelReducer('template.data', {\n    name: '',\n    properties: [],\n    commonProperties: templateCommonProperties.get() }),\n\n  formState: formReducer('template.data'),\n  uiState: ui });","/** @format */\n\nimport { combineReducers } from 'redux';\nimport { modelReducer, formReducer } from 'react-redux-form';\nimport createReducer from \"../../BasicReducer\";\n\nimport ui from \"./uiReducer.js\";\n\nexport default combineReducers({\n  pageView: createReducer('page/pageView', {}),\n  datasets: createReducer('page/datasets', {}),\n  itemLists: createReducer('page/itemLists', []),\n  error: createReducer('page/error', {}),\n  data: modelReducer('page.data', { title: '', metadata: /*non-metadata-object*/{ content: '' } }),\n  formState: formReducer('page.data'),\n  uiState: ui });","import Immutable from 'immutable';\nimport * as actions from \"../actions/actionTypes\";\n\nexport default function pagesUI(state = {}, action = {}) {\n  if (action.type === actions.SAVING_PAGE) {\n    return state.set('savingPage', true);\n  }\n\n  if (action.type === actions.PAGE_SAVED) {\n    return state.set('savingPage', false);\n  }\n\n  return Immutable.fromJS(state);\n}","import Immutable from 'immutable';\n\nimport * as actions from \"../actions/actionTypes\";\n\nconst initialState = [];\n\nexport default function notificationsReducer(state = initialState, action = {}) {\n  if (action.type === actions.NOTIFY) {\n    return state.push(Immutable.fromJS(action.notification));\n  }\n\n  if (action.type === actions.REMOVE_NOTIFICATION) {\n    return state.filter((notification) => notification.get('id') !== action.id);\n  }\n\n  return Immutable.fromJS(state);\n}","import createReducer from \"../../BasicReducer\";\nimport { formReducer, modelReducer } from 'react-redux-form';\nimport { combineReducers } from 'redux';\nimport ID from \"../../../shared/uniqueID\";\n\nexport default combineReducers({\n  suggestInfo: createReducer('thesauri.suggestInfo', {}),\n  tasksState: createReducer('thesauri.tasksState', {}),\n  thesaurus: createReducer('thesauri.thesaurus', {}),\n  data: modelReducer('thesauri.data', { name: '', values: [{ label: '', id: ID() }] }),\n  formState: formReducer('thesauri.data', { name: '', values: [{ label: '', id: ID() }] }) });","import { combineReducers } from 'redux';\nimport createReducer from \"../BasicReducer\";\n\nexport default combineReducers({\n  search: createReducer('activitylog/search', {}),\n  list: createReducer('activitylog/list', []) });","import Immutable from 'immutable';\nimport * as types from \"../actions/actionTypes\";\n\nconst initialState = [];\n\nexport default function referencesReducer(state = initialState, action = {}) {\n  if (action.type === types.SET_REFERENCES) {\n    return Immutable.fromJS(action.references);\n  }\n\n  if (action.type === types.RESET_DOCUMENT_VIEWER) {\n    return Immutable.fromJS(initialState);\n  }\n\n  if (action.type === types.ADD_REFERENCE) {\n    return state.push(Immutable.fromJS(action.reference));\n  }\n\n  if (action.type === types.REMOVE_REFERENCE) {\n    const hubRelationships = state.filter((r) => r.get('hub') === action.reference.hub);\n    if (hubRelationships.size <= 2) {\n      return state.filter((r) => r.get('hub') !== action.reference.hub);\n    }\n\n    return state.filter((r) => r.get('_id') !== action.reference.associatedRelationship._id);\n  }\n\n  return Immutable.fromJS(state);\n}","import Immutable from 'immutable';\nimport * as types from \"../actions/actionTypes\";\n\nconst initialState = { reference: {}, snippet: {} };\n\nconst unsetPanelsWhenUnsetSelections = ['targetReferencePanel', 'referencePanel'];\n\nexport default function (state = initialState, action = {}) {\n  if (action.type === types.HIGHLIGHT_REFERENCE) {\n    return state.set('highlightedReference', action.reference);\n  }\n\n  if (action.type === types.SELECT_SNIPPET) {\n    return state.set('snippet', action.snippet);\n  }\n\n  if (action.type === types.GO_TO_ACTIVE) {\n    return state.set('goToActive', action.value);\n  }\n\n  if (action.type === types.DEACTIVATE_REFERENCE) {\n    return state.remove('activeReference');\n  }\n\n  if (action.type === types.ACTIVE_REFERENCE) {\n    return state.set('activeReference', action.reference);\n  }\n\n  if (action.type === types.OPEN_PANEL) {\n    return state.set('panel', action.panel);\n  }\n\n  if (action.type === types.RESET_REFERENCE_CREATION) {\n    return state.set('reference', Immutable.fromJS({}));\n  }\n\n  if (action.type === types.SET_SELECTION) {\n    return state.\n    setIn(['reference', 'sourceRange'], action.sourceRange).\n    setIn(['reference', 'sourceFile'], action.sourceFile);\n  }\n\n  if (action.type === types.SET_TARGET_SELECTION) {\n    return state.\n    setIn(['reference', 'targetRange'], action.targetRange).\n    setIn(['reference', 'targetFile'], action.targetFile);\n  }\n\n  if (action.type === types.UNSET_TARGET_SELECTION) {\n    return state.setIn(['reference', 'targetRange'], null).setIn(['reference', 'targetFile'], null);\n  }\n\n  if (action.type === types.UNSET_SELECTION) {\n    const newState = state.\n    setIn(['reference', 'sourceRange'], null).\n    setIn(['reference', 'sourceFile'], null);\n    if (unsetPanelsWhenUnsetSelections.indexOf(state.get('panel')) !== -1) {\n      return newState.set('panel', false);\n    }\n    return newState;\n  }\n\n  if (action.type === 'viewer/targetDocHTML/SET' || action.type === types.CLOSE_PANEL) {\n    return state.set('panel', false);\n  }\n\n  if (action.type === types.ADD_REFERENCE) {\n    return state.set('reference', Immutable.fromJS({})).set('panel', false);\n  }\n\n  if (action.type === 'viewer/documentResults/SET') {\n    let newState = state;\n    const selectedInResults = action.value.find(\n    (result) => result._id === state.getIn(['reference', 'targetDocument']));\n\n    if (!selectedInResults) {\n      newState = state.deleteIn(['reference', 'targetDocument']);\n    }\n    return newState.set('viewerSearching', false);\n  }\n\n  if (action.type === types.SELECT_TARGET_DOCUMENT) {\n    return state.setIn(['reference', 'targetDocument'], action.id);\n  }\n\n  if (action.type === types.RESET_DOCUMENT_VIEWER) {\n    return Immutable.fromJS(initialState);\n  }\n\n  return Immutable.fromJS(state);\n}","import { combineReducers } from 'redux';\n\nimport createReducer from \"../../BasicReducer\";\nimport { modelReducer, formReducer } from 'react-redux-form';\n\nimport { manageAttachmentsReducer } from \"../../Attachments\";\nimport references from \"./referencesReducer\";\nimport uiState from \"./uiReducer\";\n\nexport default combineReducers({\n  doc: manageAttachmentsReducer(createReducer('viewer/doc', {})),\n  targetDoc: createReducer('viewer/targetDoc', {}),\n  rawText: createReducer('viewer/rawText', ''),\n  targetDocReferences: createReducer('viewer/targetDocReferences', []),\n  references,\n  uiState,\n  relationTypes: createReducer('viewer/relationTypes', []),\n  tocForm: modelReducer('documentViewer.tocForm', []),\n  tocFormState: formReducer('documentViewer.tocForm'),\n  tocBeingEdited: createReducer('documentViewer/tocBeingEdited', false),\n  metadataExtraction: createReducer('documentViewer.metadataExtraction', {\n    selections: [] }),\n\n  sidepanel: combineReducers({\n    metadata: modelReducer('documentViewer.sidepanel.metadata'),\n    metadataForm: formReducer('documentViewer.sidepanel.metadata'),\n    snippets: createReducer('documentViewer.sidepanel.snippets', {\n      count: 0,\n      metadata: [],\n      fullText: [] }),\n\n    tab: createReducer('viewer.sidepanel.tab', '') }) });","import Immutable from 'immutable';\nimport * as types from \"../actions/actionTypes\";\n\nexport const initialState = { userSelectedTab: false };\n\nconst reducer = (state = initialState, action = {}) => {\n  if (action.type === types.SHOW_TAB) {\n    return state.set('tab', action.tab).set('userSelectedTab', true).set('showFilters', false);\n  }\n\n  if (action.type === types.RESET_USER_SELECTED_TAB) {\n    return state.set('userSelectedTab', false);\n  }\n\n  if (action.type === types.HIDE_FILTERS) {\n    return state.set('showFilters', false);\n  }\n\n  if (action.type === types.SHOW_FILTERS) {\n    return state.set('tab', 'connections').set('showFilters', true);\n  }\n\n  return Immutable.fromJS(state);\n};\n\nexport default reducer;","import { combineReducers } from 'redux';\nimport createReducer from \"../../BasicReducer\";\nimport { modelReducer, formReducer } from 'react-redux-form';\n\nimport { manageAttachmentsReducer } from \"../../Attachments\";\nimport uiState from \"./uiReducer\";\n\nexport default combineReducers({\n  entity: manageAttachmentsReducer(createReducer('entityView/entity', {})),\n  entityForm: modelReducer('entityView.entityForm'),\n  entityFormState: formReducer('entityView.entityForm'),\n  uiState });","import Immutable from 'immutable';\n\nimport * as actions from \"../actions/actionTypes\";\nimport * as ViewerActions from \"../../Viewer/actions/actionTypes\";\nimport * as UploadActions from \"../../Uploads/actions/actionTypes\";\nimport * as LibraryActions from \"../../Library/actions/actionTypes\";\n\nconst initialState = { open: false, menu: null };\n\nconst panels = {\n  referencePanel: 'ViewerSaveReferenceMenu',\n  targetReferencePanel: 'ViewerSaveTargetReferenceMenu',\n  viewMetadataPanel: 'MetadataPanelMenu' };\n\n\nexport default function contextMenuReducer(state = initialState, action = {}) {\n  if (action.type === actions.OPEN_MENU) {\n    return state.set('open', true);\n  }\n\n  if (action.type === actions.CLOSE_MENU) {\n    return state.set('open', false);\n  }\n\n  if (action.type === ViewerActions.SET_SELECTION) {\n    return state.set('type', 'ViewerTextSelectedMenu');\n  }\n\n  if (action.type === LibraryActions.ENTER_LIBRARY) {\n    return state.set('type', 'LibraryMenu');\n  }\n\n  if (action.type === UploadActions.ENTER_UPLOADS_SECTION) {\n    return state.set('type', 'UploadsMenu');\n  }\n\n  if (action.type === ViewerActions.OPEN_PANEL) {\n    return state.set('type', panels[action.panel]);\n  }\n\n  if (\n  action.type === ViewerActions.UNSET_SELECTION ||\n  action.type === ViewerActions.LOAD_DEFAULT_VIEWER_MENU ||\n  action.type === ViewerActions.ADD_REFERENCE ||\n  action.type === ViewerActions.CLOSE_PANEL ||\n  action.type === 'viewer/targetDoc/SET')\n  {\n    return state.set('type', 'ViewerDefaultMenu');\n  }\n\n  return Immutable.fromJS(state);\n}","import { fromJS } from 'immutable';\n\nimport * as viewerTypes from \"../../Viewer/actions/actionTypes\";\n\nimport * as types from \"../actions/actionTypes\";\n\nconst initialState = {\n  template: '',\n  targetDocument: '',\n  sourceDocument: '',\n  sourceFile: '',\n  targetFile: '' };\n\n\nconst resetState = (state) => {\n  const propertiesToReset = ['template', 'targetDocument', 'sourceDocument'];\n  const newState = state.toJS();\n  propertiesToReset.forEach((key) => {\n    newState[key] = '';\n  });\n  return fromJS(newState);\n};\n\nexport default function (state = initialState, action = {}) {\n  let newState;\n\n  switch (action.type) {\n    case types.OPEN_CONNECTION_PANEL:\n      newState = resetState(state.set('type', action.connectionType));\n\n      return newState.set('sourceDocument', action.sourceDocument);\n\n    case types.SET_RELATION_TYPE:\n      return state.set('template', action.template);\n\n    case types.SET_TARGET_DOCUMENT:\n      return state.set('targetDocument', action.id);\n\n    case 'connections/searchResults/SET':\n      if (!action.value.find((v) => v.sharedId === state.get('targetDocument'))) {\n        return state.delete('targetDocument');\n      }\n      return state;\n\n    case viewerTypes.SET_SELECTION:\n      return state.set('sourceRange', action.sourceRange).set('sourceFile', action.sourceFile);\n\n    case viewerTypes.UNSET_SELECTION:\n    case types.CONNECTION_CREATED:\n      return state.delete('sourceRange');\n\n    default:\n      return fromJS(state);}\n\n}","import { fromJS as Immutable } from 'immutable';\nimport * as types from \"../actions/actionTypes\";\n\nconst initialState = { open: false, connecting: false };\n\nexport default function (state = initialState, action = {}) {\n  switch (action.type) {\n    case types.OPEN_CONNECTION_PANEL:\n      return state.set('open', true);\n\n    case types.CLOSE_CONNECTION_PANEL:\n      return state.set('connecting', false).set('open', false);\n\n    case types.SEARCHING_CONNECTIONS:\n      return state.set('searching', true);\n\n    case 'connections/searchResults/SET':\n      return state.set('searching', false);\n\n    case types.CREATING_CONNECTION:\n      return state.set('creating', true);\n\n    case types.CREATING_RANGED_CONNECTION:\n      return state.set('connecting', true);\n\n    case types.CANCEL_RANGED_CONNECTION:\n      return state.set('connecting', false);\n\n    case types.CONNECTION_CREATED:\n      return state.set('creating', false).set('connecting', false).set('open', false);\n\n    default:\n      return Immutable(state);}\n\n}","import { combineReducers } from 'redux';\nimport createReducer from \"../../BasicReducer\";\n\nimport connection from \"./connectionReducer\";\nimport uiState from \"./uiReducer\";\n\nexport default combineReducers({\n  connection,\n  searchResults: createReducer('connections/searchResults', []),\n  searchTerm: createReducer('connections/searchTerm', ''),\n  uiState });","import { fromJS } from 'immutable';\nimport * as types from \"../actions/actionTypes\";\n\nconst initialState = [];\n\nconst emptyRigthRelationship = () => ({ relationships: [] });\n\nconst conformRelationships = (action) => {\n  let order = -1;\n  const hubsObject = (action.results.get('rows') || fromJS([])).reduce((hubs, row) => {\n    let hubsImmutable = hubs;\n    row.get('connections').forEach((connection) => {\n      const hubId = connection.get('hub').toString();\n      if (!hubsImmutable.has(hubId)) {\n        order += 1;\n        hubsImmutable = hubsImmutable.set(\n        hubId,\n        fromJS({ hub: hubId, order, leftRelationship: {}, rightRelationships: {} }));\n\n      }\n\n      if (row.get('sharedId') === action.parentEntity.get('sharedId')) {\n        hubsImmutable = hubsImmutable.setIn([hubId, 'leftRelationship'], connection);\n      } else {\n        const templateId = connection.get('template');\n        if (!hubsImmutable.getIn([hubId, 'rightRelationships']).has(templateId)) {\n          hubsImmutable = hubsImmutable.setIn(\n          [hubId, 'rightRelationships', templateId],\n          fromJS([]));\n\n        }\n        hubsImmutable = hubsImmutable.setIn(\n        [hubId, 'rightRelationships', templateId],\n        hubsImmutable.getIn([hubId, 'rightRelationships', templateId]).push(connection));\n\n      }\n    });\n\n    return hubsImmutable;\n  }, fromJS({}));\n\n  return hubsObject.reduce((hubs, hub) => {\n    let index = 0;\n    const rightRelationships = hub.\n    get('rightRelationships').\n    reduce((memo, relationshipsArray, template) => {\n      let newMemo = memo.push(\n      fromJS({}).set('template', template).set('relationships', relationshipsArray));\n\n      index += 1;\n      if (action.editing && index === hub.get('rightRelationships').size) {\n        newMemo = newMemo.push(fromJS(emptyRigthRelationship()));\n      }\n      return newMemo;\n    }, fromJS([]));\n    return hubs.set(hub.get('order'), hub.set('rightRelationships', rightRelationships));\n  }, fromJS([]));\n};\n\nexport default function (state = initialState, action = {}) {\n  let relationships;\n  let value;\n  let updatedHubs;\n  let relationship;\n  let target;\n  let relationshipsToMove;\n  let relationshipsMoved;\n  let _state;\n  let targetTemplate;\n  const toUpdate = [];\n\n  switch (action.type) {\n    case types.PARSE_RELATIONSHIPS_RESULTS:\n      return conformRelationships(action);\n\n    case types.EDIT_RELATIONSHIPS:\n      return conformRelationships(action);\n\n    case types.ADD_RELATIONSHIPS_HUB:\n      return state.push(\n      fromJS({\n        leftRelationship: { template: null },\n        rightRelationships: [emptyRigthRelationship()] }));\n\n\n\n    case types.UPDATE_RELATIONSHIPS_LEFT_TYPE:\n      return state.\n      setIn([action.index, 'leftRelationship', 'template'], action._id).\n      setIn([action.index, 'modified'], true);\n\n    case types.TOGGLE_REMOVE_RELATIONSHIPS_LEFT:\n      value = state.getIn([action.index, 'deleted']);\n      return state.setIn([action.index, 'deleted'], !value);\n\n    case types.UPDATE_RELATIONSHIPS_RIGHT_TYPE:\n      updatedHubs = state.\n      setIn([action.index, 'rightRelationships', action.rightIndex, 'template'], action._id).\n      setIn([action.index, 'rightRelationships', action.rightIndex, 'modified'], true);\n\n      relationships = state.\n      getIn([action.index, 'rightRelationships', action.rightIndex, 'relationships']).\n      map((relations) => relations.set('template', action._id));\n\n      updatedHubs = updatedHubs.setIn(\n      [action.index, 'rightRelationships', action.rightIndex, 'relationships'],\n      relationships);\n\n\n      if (action.newRightRelationshipType) {\n        const updatedRightRelationships = updatedHubs.\n        getIn([action.index, 'rightRelationships']).\n        push(fromJS(emptyRigthRelationship()));\n        updatedHubs = updatedHubs.setIn(\n        [action.index, 'rightRelationships'],\n        updatedRightRelationships);\n\n      }\n\n      return updatedHubs;\n\n    case types.TOGGLE_REMOVE_RELATIONSHIPS_RIGHT_GROUP:\n      value = state.getIn([action.index, 'rightRelationships', action.rightIndex, 'deleted']);\n      return state.setIn(\n      [action.index, 'rightRelationships', action.rightIndex, 'deleted'],\n      !value);\n\n\n    case types.ADD_RELATIONSHIPS_ENTITY:\n      relationship = state.getIn([action.index, 'rightRelationships', action.rightIndex]);\n      relationships = relationship.get('relationships').push(\n      fromJS({\n        template: relationship.get('template'),\n        entity: action.entity.sharedId,\n        entityData: action.entity }));\n\n\n\n      return state.setIn(\n      [action.index, 'rightRelationships', action.rightIndex, 'relationships'],\n      relationships);\n\n\n    case types.TOGGLE_REMOVE_RELATIONSHIPS_ENTITY:\n      value = state.getIn([\n      action.index,\n      'rightRelationships',\n      action.rightIndex,\n      'relationships',\n      action.relationshipIndex,\n      'deleted']);\n\n      return state.setIn(\n      [\n      action.index,\n      'rightRelationships',\n      action.rightIndex,\n      'relationships',\n      action.relationshipIndex,\n      'deleted'],\n\n      !value);\n\n\n    case types.TOGGLE_MOVE_RELATIONSHIPS_ENTITY:\n      value = state.getIn([\n      action.index,\n      'rightRelationships',\n      action.rightIndex,\n      'relationships',\n      action.relationshipIndex,\n      'move']);\n\n      return state.setIn(\n      [\n      action.index,\n      'rightRelationships',\n      action.rightIndex,\n      'relationships',\n      action.relationshipIndex,\n      'move'],\n\n      !value);\n\n\n    case types.MOVE_RELATIONSHIPS_ENTITY:\n      relationshipsToMove = [];\n      relationshipsMoved = [];\n      targetTemplate = state.getIn([\n      action.index,\n      'rightRelationships',\n      action.rightRelationshipIndex,\n      'template']);\n\n      state.forEach((hub, hubIndex) => {\n        hub.get('rightRelationships').forEach((rightRelationshipGroup, rightRelationshipsIndex) => {\n          rightRelationshipGroup.get('relationships').forEach((_relationship, index) => {\n            if (_relationship.get('move')) {\n              relationshipsToMove.push(\n              _relationship.\n              remove('move').\n              remove('_id').\n              remove('sharedId').\n              set('template', targetTemplate));\n\n              relationshipsMoved.push({ hubIndex, rightRelationshipsIndex, index });\n            }\n          });\n        });\n      });\n      _state = relationshipsMoved.\n      reverse().\n      reduce(\n      (result, relationShipMoved) =>\n      result.setIn(\n      [\n      relationShipMoved.hubIndex,\n      'rightRelationships',\n      relationShipMoved.rightRelationshipsIndex,\n      'relationships',\n      relationShipMoved.index,\n      'moved'],\n\n      true),\n\n      state);\n\n      target = _state.getIn([\n      action.index,\n      'rightRelationships',\n      action.rightRelationshipIndex,\n      'relationships']);\n\n      return _state.setIn(\n      [action.index, 'rightRelationships', action.rightRelationshipIndex, 'relationships'],\n      target.concat(relationshipsToMove));\n\n\n    case types.UPDATE_RELATIONSHIP_ENTITY_DATA:\n      state.forEach((_hub, hubIndex) => {\n        if (state.getIn([hubIndex, 'leftRelationship', 'entity']) === action.entity.sharedId) {\n          toUpdate.push([hubIndex, 'leftRelationship', 'entityData']);\n        }\n\n        state.getIn([hubIndex, 'rightRelationships']).forEach((group, groupIndex) => {\n          group.get('relationships').forEach((r, relationshipIndex) => {\n            if (r.get('entity') === action.entity.sharedId) {\n              toUpdate.push([\n              hubIndex,\n              'rightRelationships',\n              groupIndex,\n              'relationships',\n              relationshipIndex,\n              'entityData']);\n\n            }\n          });\n        });\n      });\n\n      return toUpdate.reduce(\n      (updatedState, path) => updatedState.setIn(path, fromJS(action.entity)),\n      state);\n\n\n    default:\n      return fromJS(state);}\n\n}","import { fromJS } from 'immutable';\nimport * as types from \"../actions/actionTypes\";\n\nconst initialState = {\n  editing: false,\n  saving: false,\n  addTo: { hubIndex: null, rightRelationshipIndex: null } };\n\n\nexport default function (state = initialState, action = {}) {\n  switch (action.type) {\n    case types.EDIT_RELATIONSHIPS:\n      return state.set('editing', action.value);\n\n    case types.SET_RELATIONSHIPS_ADD_TO_DATA:\n      return state.\n      setIn(['addTo', 'hubIndex'], action.index).\n      setIn(['addTo', 'rightRelationshipIndex'], action.rightIndex);\n\n    case types.SAVING_RELATIONSHIPS:\n      return state.set('saving', true);\n\n    case types.SAVED_RELATIONSHIPS:\n      return state.set('saving', false);\n\n    default:\n      return fromJS(state);}\n\n}","import { fromJS as Immutable } from 'immutable';\nimport * as types from \"../actions/actionTypes\";\n\nconst initialState = { open: false, connecting: false };\n\nexport default function (state = initialState, action = {}) {\n  switch (action.type) {\n    case types.OPEN_RELATIONSHIPS_PANEL:\n      return state.set('open', true);\n\n    case types.CLOSE_RELATIONSHIPS_PANEL:\n      return state.set('open', false);\n\n    case types.SEARCHING_RELATIONSHIPS:\n      return state.set('searching', true);\n\n    case 'relationships/searchResults/SET':\n      return state.set('searching', false);\n\n    default:\n      return Immutable(state);}\n\n}","import { combineReducers } from 'redux';\nimport { modelReducer, formReducer } from 'react-redux-form';\nimport createReducer from \"../../BasicReducer\";\nimport prioritySortingCriteria from \"../../utils/prioritySortingCriteria\";\nimport hubs from \"./hubsReducer\";\nimport hubActions from \"./hubActionsReducer\";\nimport uiState from \"./uiReducer\";\n\nexport default combineReducers({\n  hubs,\n  hubActions,\n  list: combineReducers({\n    sharedId: createReducer('relationships/list/sharedId', ''),\n    entity: createReducer('relationships/list/entity', {}),\n    connectionsGroups: createReducer('relationships/list/connectionsGroups', []),\n    searchResults: createReducer('relationships/list/searchResults', { totalRows: 0, rows: [] }),\n    sort: modelReducer('relationships/list.sort', prioritySortingCriteria.get()),\n    filters: createReducer('relationships/list/filters', {}),\n    search: formReducer('relationships/list/search'),\n    view: createReducer('relationships/list/view', 'graph') }),\n\n  searchResults: createReducer('relationships/searchResults', []),\n  searchTerm: createReducer('relationships/searchTerm', ''),\n  connection: createReducer('relationships/connection', {}),\n  uiState,\n  metadata: modelReducer('relationships.metadata', {}),\n  formState: formReducer('relationships.metadata') });","import { combineReducers } from 'redux';\nimport { modelReducer, formReducer } from 'react-redux-form';\nimport createReducer from \"../../BasicReducer\";\nimport Immutable from 'immutable';\n\nexport default combineReducers({\n  search: createReducer('semanticSearch/search', {}),\n  searches: createReducer('semanticSearch/searches', []),\n  resultsFiltersForm: formReducer('semanticSearch.resultsFilters'),\n  resultsFilters: modelReducer('semanticSearch.resultsFilters', {\n    threshold: 0.4,\n    minRelevantSentences: 5 }),\n\n  resultsThreshold: modelReducer('semanticSearch.resultsThreshold'),\n  minRelevantSentences: modelReducer('semanticSearch.minRelevantSentences'),\n  minRelevantScore: modelReducer('semanticSearch.minRelevantScore'),\n  selectedDocument: createReducer('semanticSearch/selectedDocument', Immutable.fromJS({})),\n  showSemanticSearchPanel: createReducer('semanticSearch/showSemanticSearchPanel', false),\n  multipleEdit: modelReducer('semanticSearch.multipleEdit', { metadata: {} }),\n  multipleEditForm: formReducer('semanticSearch.multipleEdit', { metadata: {} }),\n  multiedit: createReducer('semanticSearch/multiedit', []) });","function ownKeys(object, enumerableOnly) {var keys = Object.keys(object);if (Object.getOwnPropertySymbols) {var symbols = Object.getOwnPropertySymbols(object);enumerableOnly && (symbols = symbols.filter(function (sym) {return Object.getOwnPropertyDescriptor(object, sym).enumerable;})), keys.push.apply(keys, symbols);}return keys;}function _objectSpread(target) {for (var i = 1; i < arguments.length; i++) {var source = null != arguments[i] ? arguments[i] : {};i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {_defineProperty(target, key, source[key]);}) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));});}return target;}function _defineProperty(obj, key, value) {if (key in obj) {Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });} else {obj[key] = value;}return obj;}import Immutable from 'immutable';\n\nimport * as types from \"../actions/actionTypes\";\nimport * as uploadTypes from \"../../Uploads/actions/actionTypes\";\nimport * as attachmentTypes from \"../../Attachments/actions/actionTypes\";\n\nconst initialState = { rows: [], totalRows: 0 };\n\nconst getBySharedId = (state, action) => {\n  const docIndex = state.get('rows').findIndex((_doc) => _doc.get('sharedId') === action.entity);\n  const doc = state.get('rows').get(docIndex).toJS();\n  return { docIndex, doc };\n};\n\nconst getFilterByObjectWithId = (itemToSearch) => (candidateItem) =>\ncandidateItem.get('_id') === itemToSearch._id;\n\nconst getFilterBySharedId = (sharedIdToSearch) => (candidateItem) =>\ncandidateItem.get('sharedId') === sharedIdToSearch;\n\nconst removeDocuments = (items, currentState, getFilter, updateTotalRows = false) =>\nitems.reduce((_state, item) => {\n  const docIndex = _state.get('rows').findIndex(getFilter(item));\n\n  if (docIndex >= 0) {\n    const newState = _state.deleteIn(['rows', docIndex]);\n    if (!updateTotalRows) {\n      return newState;\n    }\n    return newState.set('totalRows', newState.get('totalRows') - 1);\n  }\n  return _state;\n}, currentState);\n\n// eslint-disable-next-line max-statements\nexport const documentsReducer = (state = initialState, action = {}) => {\n  let docIndex = 0;\n  let doc;\n  let file;\n\n  switch (action.type) {\n    case types.SET_DOCUMENTS:\n      return Immutable.fromJS(action.documents);\n\n    case types.UNSET_DOCUMENTS:\n      return Immutable.fromJS(initialState);\n\n    case types.ADD_DOCUMENTS:\n      return state.\n      setIn(['rows'], state.get('rows').concat(Immutable.fromJS(action.documents.rows))).\n      setIn(['totalRows'], action.documents.totalRows);\n\n    case types.UPDATE_DOCUMENT:\n      docIndex = state.get('rows').findIndex((_doc) => _doc.get('_id') === action.doc._id);\n      return state.setIn(['rows', docIndex], Immutable.fromJS(action.doc));\n\n    case types.UPDATE_DOCUMENTS:\n      return action.docs.reduce((_state, document) => {\n        const index = state.get('rows').findIndex((_doc) => _doc.get('_id') === document._id);\n        return _state.setIn(['rows', index], Immutable.fromJS(document));\n      }, state);\n\n    case types.UPDATE_DOCUMENTS_PUBLISHED:\n      return action.sharedIds.reduce((_state, sharedId) => {\n        const index = state.get('rows').findIndex((_doc) => _doc.get('sharedId') === sharedId);\n        return _state.setIn(['rows', index, 'published'], action.published);\n      }, state);\n\n    case types.ELEMENT_CREATED:\n      return state.update('rows', (rows) => rows.insert(0, Immutable.fromJS(action.doc)));\n\n    case types.REMOVE_DOCUMENT:\n      docIndex = state.get('rows').findIndex((_doc) => _doc.get('_id') === action.doc._id);\n      if (docIndex >= 0) {\n        return state.deleteIn(['rows', docIndex]);\n      }\n      return state;\n\n    case types.REMOVE_DOCUMENTS:\n      return removeDocuments(action.docs, state, getFilterByObjectWithId);\n\n    case types.REMOVE_DOCUMENTS_SHAREDIDS:\n      return removeDocuments(action.sharedIds, state, getFilterBySharedId, true);\n\n    case uploadTypes.UPLOAD_COMPLETE:\n      docIndex = state.get('rows').findIndex((_doc) => _doc.get('sharedId') === action.doc);\n      if (docIndex >= 0) {\n        doc = state.get('rows').get(docIndex).toJS();\n        doc.documents.push(action.file);\n        return state.setIn(['rows', docIndex], Immutable.fromJS(doc));\n      }\n      break;\n\n    case uploadTypes.UPLOADS_COMPLETE:\n      docIndex = state.get('rows').findIndex((_doc) => _doc.get('sharedId') === action.doc);\n      if (docIndex >= 0) {\n        doc = state.get('rows').get(docIndex).toJS();\n        return state.setIn(\n        ['rows', docIndex],\n        Immutable.fromJS(_objectSpread(_objectSpread({}, doc), {}, { documents: action.files })));\n\n      }\n      break;\n\n    case attachmentTypes.ATTACHMENT_COMPLETE:\n      ({ docIndex, doc } = getBySharedId(state, action));\n      doc.attachments.push(action.file);\n      return state.setIn(['rows', docIndex], Immutable.fromJS(doc));\n\n    case attachmentTypes.ATTACHMENT_DELETED:\n      ({ docIndex, doc } = getBySharedId(state, action));\n      doc.attachments = doc.attachments.filter((att) => att._id !== action.file._id);\n      return state.setIn(['rows', docIndex], Immutable.fromJS(doc));\n\n    case attachmentTypes.ATTACHMENT_RENAMED:\n      ({ docIndex, doc } = getBySharedId(state, action));\n      [file] = doc.attachments.filter((att) => att._id === action.file._id);\n      file.originalname = action.file.originalname;\n      return state.setIn(['rows', docIndex], Immutable.fromJS(doc));\n\n    default:\n      break;}\n\n\n  return Immutable.fromJS(state);\n};","function ownKeys(object, enumerableOnly) {var keys = Object.keys(object);if (Object.getOwnPropertySymbols) {var symbols = Object.getOwnPropertySymbols(object);enumerableOnly && (symbols = symbols.filter(function (sym) {return Object.getOwnPropertyDescriptor(object, sym).enumerable;})), keys.push.apply(keys, symbols);}return keys;}function _objectSpread(target) {for (var i = 1; i < arguments.length; i++) {var source = null != arguments[i] ? arguments[i] : {};i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {_defineProperty(target, key, source[key]);}) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));});}return target;}function _defineProperty(obj, key, value) {if (key in obj) {Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });} else {obj[key] = value;}return obj;}import Immutable from 'immutable';\n\nimport * as types from \"../actions/actionTypes\";\nimport * as uploadTypes from \"../../Uploads/actions/actionTypes\";\n\nconst initialState = Immutable.fromJS({\n  searchTerm: '',\n  previewDoc: '',\n  suggestions: [],\n  selectedDocuments: [],\n  filtersPanel: false,\n  zoomLevel: 0,\n  tableViewColumns: [] });\n\n\nexport default function ui(state = initialState, action = {}) {\n  if (action.type === types.SET_SEARCHTERM) {\n    let newState = state.set('searchTerm', action.searchTerm);\n    if (!action.searchTerm) {\n      newState = newState.set('suggestions', []);\n    }\n    return newState;\n  }\n\n  if (action.type === types.SELECT_DOCUMENT) {\n    const alreadySelected = state.\n    get('selectedDocuments').\n    filter((doc) => doc.get('_id') === action.doc._id).size;\n    if (!alreadySelected) {\n      return state.update('selectedDocuments', (selectedDocuments) =>\n      selectedDocuments.push(Immutable.fromJS(action.doc)));\n\n    }\n\n    return state;\n  }\n\n  if (action.type === types.SELECT_SINGLE_DOCUMENT) {\n    const doc = Immutable.fromJS(action.doc);\n    return state.update('selectedDocuments', () => Immutable.fromJS([doc]));\n  }\n\n  if (action.type === uploadTypes.UPLOAD_COMPLETE) {\n    const docIndex = state.\n    get('selectedDocuments').\n    findIndex((doc) => doc.get('sharedId') === action.doc);\n\n    if (docIndex >= 0) {\n      const doc = state.get('selectedDocuments').get(docIndex).toJS();\n      doc.documents.push(action.file);\n\n      return state.setIn(['selectedDocuments', docIndex], Immutable.fromJS(doc));\n    }\n  }\n\n  if (action.type === uploadTypes.UPLOADS_COMPLETE) {\n    const docIndex = state.\n    get('selectedDocuments').\n    findIndex((doc) => doc.get('sharedId') === action.doc);\n\n    if (docIndex >= 0) {\n      const doc = state.get('selectedDocuments').get(docIndex).toJS();\n      return state.setIn(\n      ['selectedDocuments', docIndex],\n      Immutable.fromJS(_objectSpread(_objectSpread({}, doc), {}, { documents: action.files })));\n\n    }\n  }\n\n  if (action.type === types.SELECT_DOCUMENTS) {\n    return action.docs.reduce((_state, doc) => {\n      const alreadySelected = _state.\n      get('selectedDocuments').\n      filter((_doc) => _doc.get('_id') === doc._id).size;\n      if (!alreadySelected) {\n        return _state.update('selectedDocuments', (selectedDocuments) =>\n        selectedDocuments.push(Immutable.fromJS(doc)));\n\n      }\n      return _state;\n    }, state);\n  }\n\n  if (action.type === types.UNSELECT_DOCUMENT) {\n    return state.update('selectedDocuments', (selectedDocuments) =>\n    selectedDocuments.filter((doc) => doc.get('_id') !== action.docId));\n\n  }\n\n  if (action.type === types.UNSELECT_ALL_DOCUMENTS) {\n    return state.set('selectedDocuments', Immutable.fromJS([]));\n  }\n\n  if (action.type === types.UPDATE_SELECTED_ENTITIES) {\n    return state.set('selectedDocuments', action.entities);\n  }\n\n  if (action.type === types.HIDE_FILTERS) {\n    return state.set('filtersPanel', false);\n  }\n\n  if (action.type === types.SHOW_FILTERS) {\n    return state.set('filtersPanel', true);\n  }\n\n  if (action.type === types.SET_PREVIEW_DOC) {\n    return state.set('previewDoc', action.docId);\n  }\n\n  if (action.type === types.SET_SUGGESTIONS) {\n    return state.set('suggestions', Immutable.fromJS(action.suggestions));\n  }\n\n  if (action.type === types.SHOW_SUGGESTIONS) {\n    return state.set('showSuggestions', true);\n  }\n\n  if (action.type === types.HIDE_SUGGESTIONS) {\n    return state.set('showSuggestions', false);\n  }\n\n  if (action.type === types.OVER_SUGGESTIONS) {\n    return state.set('overSuggestions', action.hover);\n  }\n\n  if (action.type === types.ZOOM_IN) {\n    const maxLevel = 3;\n    return state.set('zoomLevel', Math.min(state.get('zoomLevel') + 1, maxLevel));\n  }\n\n  if (action.type === types.ZOOM_OUT) {\n    const minLevel = -3;\n    return state.set('zoomLevel', Math.max(state.get('zoomLevel') - 1, minLevel));\n  }\n\n  if (action.type === types.SET_TABLE_VIEW_COLUMNS) {\n    if (action.columns.length === 0) {\n      return state;\n    }\n    const columnsWithSelection = action.columns.map((column) => {\n      const previousColumnState = state.\n      get('tableViewColumns').\n      find((c) => c.get('name') === column.name);\n\n      const previousHidden =\n      previousColumnState && previousColumnState.has('hidden') ?\n      previousColumnState.get('hidden') :\n      column.hidden;\n      const hidden = previousHidden !== undefined ? previousHidden : !column.showInCard;\n\n      return Object.assign(column, { hidden });\n    });\n\n    return state.set('tableViewColumns', Immutable.fromJS(columnsWithSelection));\n  }\n\n  if (action.type === types.SET_TABLE_VIEW_COLUMN_HIDDEN) {\n    const index = state.get('tableViewColumns').findIndex((c) => c.get('name') === action.name);\n    return state.setIn(['tableViewColumns', index, 'hidden'], action.hidden);\n  }\n\n  if (action.type === types.SET_TABLE_VIEW_ALL_COLUMNS_HIDDEN) {\n    return state.update('tableViewColumns', (columns) =>\n    columns.map((c, index) => index ? c.set('hidden', action.hidden) : c));\n\n  }\n\n  return Immutable.fromJS(state);\n}","import Immutable from 'immutable';\n\nimport * as types from \"../actions/actionTypes\";\n\nconst initialState = { properties: [], documentTypes: [] };\n\nexport default function filters(state = initialState, action = {}) {\n  if (action.type === types.SET_LIBRARY_FILTERS || action.type === types.INITIALIZE_FILTERS_FORM) {\n    return state.\n    set('documentTypes', Immutable.fromJS(action.documentTypes)).\n    set('properties', Immutable.fromJS(action.libraryFilters));\n  }\n\n  if (action.type === types.UPDATE_LIBRARY_FILTERS) {\n    return state.set('properties', Immutable.fromJS(action.libraryFilters));\n  }\n\n  return Immutable.fromJS(state);\n}","import createReducer, { actions } from \"../../BasicReducer\";\nimport * as types from \"../actions/actionTypes\";\n\nconst reducer = createReducer('aggregations', {});\n\nexport default function aggregations(state, _action = {}) {\n  let action = _action;\n  if (action.type === types.INITIALIZE_FILTERS_FORM) {\n    action = actions.set('aggregations', action.aggregations);\n  }\n\n  return reducer(state, action);\n}","import { combineReducers } from 'redux';\nimport Immutable from 'immutable';\nimport createReducer from \"../../BasicReducer\";\nimport { multireducer } from \"../../Multireducer\";\nimport { isClient } from \"../../utils\";\n\nimport { modelReducer, formReducer } from 'react-redux-form';\nimport { manageAttachmentsReducer } from \"../../Attachments\";\nimport prioritySortingCriteria from \"../../utils/prioritySortingCriteria\";\nimport { documentsReducer } from \"./documentsReducer\";\nimport libraryUI from \"./uiReducer\";\nimport libraryFilters from \"./filtersReducer\";\nimport aggregationsReducer from \"./aggregationsReducer\";\n\nlet templates = null;\nif (isClient) {\n  templates =\n  window.__reduxData__ && window.__reduxData__.templates ?\n  Immutable.fromJS(window.__reduxData__.templates) :\n  null;\n}\n\nconst defaultSearch = prioritySortingCriteria.get({ templates });\ndefaultSearch.searchTerm = '';\ndefaultSearch.filters = {};\ndefaultSearch.publishedStatus = { values: ['published', 'restricted'] };\n\nexport default ((storeKey) =>\ncombineReducers({\n  aggregations: multireducer(aggregationsReducer, storeKey),\n  documents: multireducer(documentsReducer, storeKey),\n  ui: multireducer(\n  manageAttachmentsReducer(libraryUI, {\n    useDefaults: false,\n    setInArray: ['selectedDocuments', 0] }),\n\n  storeKey),\n\n  filters: multireducer(libraryFilters, storeKey),\n  search: modelReducer(`${storeKey}.search`, defaultSearch),\n  searchForm: formReducer(`${storeKey}.search`, defaultSearch),\n  selectedSorting: createReducer(`${storeKey}.selectedSorting`, {}),\n  markers: createReducer(`${storeKey}.markers`, { rows: [] }),\n  //\n  sidepanel: combineReducers({\n    metadata: modelReducer(`${storeKey}.sidepanel.metadata`, {}),\n    metadataForm: formReducer(`${storeKey}.sidepanel.metadata`, {}),\n    multipleEdit: modelReducer(`${storeKey}.sidepanel.multipleEdit`, {}),\n    multipleEditForm: formReducer(`${storeKey}.sidepanel.multipleEdit`, {}),\n    quickLabelState: createReducer(`${storeKey}.sidepanel.quickLabelState`, {}),\n    quickLabelMetadata: modelReducer(`${storeKey}.sidepanel.quickLabelMetadata`, {}),\n    quickLabelMetadataForm: formReducer(`${storeKey}.sidepanel.quickLabelMetadata`, {}),\n    references: createReducer(`${storeKey}.sidepanel.references`, []),\n    snippets: createReducer(`${storeKey}.sidepanel.snippets`, {\n      count: 0,\n      metadata: [],\n      fullText: [] }),\n\n    tab: createReducer(`${storeKey}.sidepanel.tab`, '') }) }));","import Immutable from 'immutable';\n\nimport * as types from \"../actions/actionTypes\";\n\nconst initialState = {};\n\nexport default function modals(state = initialState, action = {}) {\n  if (action.type === types.SHOW_MODAL) {\n    return state.set(action.modal, action.data);\n  }\n\n  if (action.type === types.HIDE_MODAL) {\n    return state.delete(action.modal);\n  }\n\n  return Immutable.fromJS(state);\n}","import Immutable from 'immutable';\n\nimport * as types from \"../actions/actionTypes\";\n\nconst initialState = {};\n\nconst documents = (state = initialState, action = {}) => {\n  if (action.type === types.NEW_UPLOAD_DOCUMENT) {\n    return state.set(action.doc, 0);\n  }\n\n  if (action.type === types.UPLOAD_PROGRESS) {\n    const progress = action.progress === 100 ? 0 : action.progress;\n    return state.set(action.doc, progress);\n  }\n\n  if ([types.UPLOAD_COMPLETE, types.BATCH_UPLOAD_COMPLETE].includes(action.type)) {\n    return state.delete(action.doc);\n  }\n\n  return Immutable.fromJS(state);\n};\n\nexport default documents;","import { combineReducers } from 'redux';\nimport createReducer from \"../../BasicReducer\";\n\nexport default combineReducers({\n  showImportPanel: createReducer('showImportPanel', false),\n  importUploadProgress: createReducer('importUploadProgress', 0),\n  importProgress: createReducer('importProgress', 0),\n  importStart: createReducer('importStart', false),\n  importEnd: createReducer('importEnd', false),\n  importError: createReducer('importError', {}) });","import createReducer from \"../BasicReducer\";\n\nexport default createReducer('auth/user', {});","import { combineReducers } from 'redux';\nimport createReducer from \"../../BasicReducer\";\nimport { modelReducer, formReducer } from 'react-redux-form';\n\nimport ui from \"./uiReducer.js\";\n\nexport default combineReducers({\n  collection: createReducer('settings/collection', {}),\n  navlinksData: modelReducer('settings.navlinksData', { links: [] }),\n  navlinksFormState: formReducer('settings.navlinksData'),\n  form: modelReducer('account.form', { username: '', password: '' }),\n  formState: formReducer('account.form'),\n  settingForm: formReducer('settings.settings'),\n  settings: modelReducer('settings.settings', {}),\n  uiState: ui });","import Immutable from 'immutable';\nimport * as actions from \"../actions/actionTypes\";\n\nexport default function settingsUI(state = {}, action = {}) {\n  if (action.type === actions.EDIT_LINK) {\n    return state.set('editingLink', action.id);\n  }\n\n  if (action.type === actions.SAVING_NAVLINKS) {\n    return state.set('savingNavlinks', true);\n  }\n\n  if (action.type === actions.NAVLINKS_SAVED) {\n    return state.set('savingNavlinks', false);\n  }\n\n  return Immutable.fromJS(state);\n}","import Immutable from 'immutable';\n\nimport * as types from \"../actions/actionTypes\";\n\nconst initialState = {};\n\nexport default function documents(state = initialState, action = {}) {\n  if (action.type === types.START_REUPLOAD_DOCUMENT) {\n    return state.set(action.doc, 0);\n  }\n\n  if (action.type === types.REUPLOAD_PROGRESS) {\n    return state.set(action.doc, action.progress);\n  }\n\n  if (action.type === types.REUPLOAD_COMPLETE) {\n    return state.delete(action.doc);\n  }\n\n  return Immutable.fromJS(state);\n}","import { combineReducers } from 'redux';\nimport progress from \"./reducers/progressReducer\";\n\nexport default combineReducers({\n  progress });","export const START_REUPLOAD_DOCUMENT = 'START_REUPLOAD_DOCUMENT';\nexport const REUPLOAD_PROGRESS = 'REUPLOAD_PROGRESS';\nexport const REUPLOAD_COMPLETE = 'REUPLOAD_COMPLETE';","import createReducer from \"../BasicReducer\";\n\nexport default createReducer('locale', '');","import Immutable from 'immutable';\n\nconst initialState = { inlineEdit: false, context: '', key: '', showInlineEditForm: false };\n\nexport default function inlineEditReducer(state = initialState, action = {}) {\n  if (action.type === 'TOGGLE_INLINE_EDIT') {\n    return state.set('inlineEdit', !state.get('inlineEdit'));\n  }\n\n  if (action.type === 'OPEN_INLINE_EDIT_FORM') {\n    return state.\n    set('showInlineEditForm', true).\n    set('context', action.context).\n    set('key', action.key);\n  }\n\n  if (action.type === 'CLOSE_INLINE_EDIT_FORM') {\n    return state.set('showInlineEditForm', false);\n  }\n\n  return Immutable.fromJS(state);\n}","/** @format */\n\nimport { combineReducers } from 'redux';\nimport createReducer from \"../../BasicReducer\";\n\nexport default combineReducers({\n  state: createReducer('oneUpReview.state', {}) });","import { combineReducers } from 'redux';\nimport createReducer from \"../../BasicReducer\";\n\nexport default combineReducers({\n  exportSearchResultsProcessing: createReducer('exportSearchResultsProcessing', false),\n  exportSearchResultsContent: createReducer('exportSearchResultsContent', ''),\n  exportSearchResultsFileName: createReducer('exportSearchResultsFileName', '') });","/** @format */\n\nimport { combineReducers } from 'redux';\nimport createReducer from \"./BasicReducer\";\n\nimport template from \"./Templates/reducers/reducer\";\nimport page from \"./Pages/reducers/reducer\";\nimport notifications from \"./Notifications/reducers/notificationsReducer\";\n\nimport thesauri from \"./Thesauri/reducers/reducer\";\nimport activitylog from \"./Activitylog/reducer\";\nimport documentViewer from \"./Viewer/reducers/reducer\";\nimport entityView from \"./Entities/reducers/reducer\";\nimport contextMenu from \"./ContextMenu/reducers/contextMenuReducer\";\nimport connections from \"./Connections/reducers/reducer\";\nimport relationships from \"./Relationships/reducers/reducer\";\nimport ConnectionsList from \"./ConnectionsList/reducers/reducer\";\nimport { reducer as attachments } from \"./Attachments\";\nimport semanticSearch from \"./SemanticSearch/reducers/reducer\";\n\nimport library from \"./Library/reducers/reducer\";\nimport modals from \"./Modals/reducers/modalsReducer\";\nimport progress from \"./Uploads/reducers/progressReducer\";\nimport importEntities from \"./Uploads/reducers/importReducer\";\nimport user from \"./Auth/reducer\";\nimport settings from \"./Settings/reducers/reducer\";\nimport metadata from \"./Metadata/reducer\";\nimport locale from \"./I18N/reducer\";\nimport inlineEdit from \"./I18N/inlineEditReducer\";\nimport oneUpReview from \"./Review/reducers/reducer\";\nimport exportSearchResults from \"./Library/reducers/exportReducer\";\n\nimport { modelReducer, formReducer } from 'react-redux-form';\n\nexport default combineReducers({\n  notifications,\n  library: library('library'),\n  uploads: library('uploads'),\n  progress,\n  importEntities,\n  locale,\n  inlineEdit,\n  semanticSearch,\n  activitylog,\n  inlineEditForm: formReducer('inlineEditModel', {}),\n  inlineEditModel: modelReducer('inlineEditModel', {}),\n  template,\n  page,\n  thesauri,\n  entityView,\n  thesauris: createReducer('thesauris', []),\n  entityThesauris: createReducer('entityThesauris', {}),\n  customUploads: createReducer('customUploads', []),\n  dictionaries: createReducer('dictionaries', []),\n  relationTypes: createReducer('relationTypes', []),\n  relationType: modelReducer('relationType', { name: '' }),\n  relationTypeForm: formReducer('relationType', { name: '' }),\n  templates: createReducer('templates', []),\n  translations: createReducer('translations', []),\n  translationsForm: modelReducer('translationsForm', []),\n  translationsFormState: formReducer('translationsForm'),\n  pages: createReducer('pages', []),\n  users: createReducer('users', []),\n  documentViewer,\n  contextMenu,\n  connections,\n  connectionsList: ConnectionsList,\n  relationships,\n  attachments,\n  modals,\n  user,\n  settings,\n  metadata,\n  oneUpReview,\n  exportSearchResults,\n  userGroups: createReducer('userGroups', []) });","/* eslint-disable import/no-mutable-exports,prefer-destructuring,global-require */\n\nimport { isClient } from \"./utils\";\nimport thunk from 'redux-thunk';\nimport { composeWithDevTools } from 'redux-devtools-extension';\n\nimport { applyMiddleware, createStore } from 'redux';\nimport reducer from \"./reducer\";\n\n\n\n\n\n\n\n\n\n\nconst data = isClient && window.__reduxData__ ? window.__reduxData__ : {};\nlet store;\n\nexport default function create(initialData = data) {\n  store = createStore(reducer, initialData, composeWithDevTools(applyMiddleware(thunk)));\n\n  return store;\n}\n\nif (module.hot) {\n  if (!window.store) {\n    window.store = create();\n  }\n  store = window.store;\n  module.hot.accept('./reducer', () => {\n    const rootReducer = require(\"./reducer\");\n    store.replaceReducer(rootReducer);\n  });\n}\n\nif (!store) {\n  store = create();\n}\n\nif (typeof window !== 'undefined' && !module.hot) {\n  window.store = store;\n}\n\nexport { store };","function ownKeys(object, enumerableOnly) {var keys = Object.keys(object);if (Object.getOwnPropertySymbols) {var symbols = Object.getOwnPropertySymbols(object);enumerableOnly && (symbols = symbols.filter(function (sym) {return Object.getOwnPropertyDescriptor(object, sym).enumerable;})), keys.push.apply(keys, symbols);}return keys;}function _objectSpread(target) {for (var i = 1; i < arguments.length; i++) {var source = null != arguments[i] ? arguments[i] : {};i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {_defineProperty(target, key, source[key]);}) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));});}return target;}function _defineProperty(obj, key, value) {if (key in obj) {Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });} else {obj[key] = value;}return obj;}export class RequestParams {\n\n\n\n\n  constructor(data = undefined, headers = {}) {_defineProperty(this, \"data\", undefined);_defineProperty(this, \"headers\", {});\n    this.data = data;\n    this.headers = headers;\n  }\n\n  add(data) {\n    return new RequestParams(_objectSpread(_objectSpread({}, this.data), data), this.headers);\n  }\n\n  set(data) {\n    return new RequestParams(data, this.headers);\n  }\n\n  onlyHeaders() {\n    return new RequestParams(undefined, this.headers);\n  }}","import { Parser } from 'html-to-react';\nimport PropTypes from 'prop-types';\nimport React from 'react';\n\nconst myParser = new Parser();\nconst stringToReact = (string) => myParser.parse(string);\n\nconst SafeHTML = ({ children }) => /*#__PURE__*/React.createElement(React.Fragment, null, stringToReact(children));\n\nSafeHTML.propTypes = {\n  children: PropTypes.string.isRequired };\n\n\nexport default SafeHTML;","const copyArray = (array) => array.concat();\n\nconst localCompare = (a, b) => a.toLowerCase().localeCompare(b.toLowerCase());\n\nconst compareDottedList = (a, b, options) => {\n  const aParts = a.split('.');\n  const bParts = b.split('.');\n\n  const compareArray = options.listTypes.reduce((memo, type, index) => {\n    if (aParts.length > index && bParts.length <= index) {\n      memo.push(1);\n      return memo;\n    }\n\n    if (aParts.length <= index && bParts.length > index) {\n      memo.push(-1);\n      return memo;\n    }\n\n    if (aParts.length > index && bParts.length > index) {\n      const x = type(aParts[index]);\n      const y = type(bParts[index]);\n      if (x !== y) {\n        memo.push(x < y ? -1 : 1);\n        return memo;\n      }\n    }\n\n    memo.push(0);\n    return memo;\n  }, []);\n\n  return compareArray.reduce(\n  (memo, indexCompare) => !memo && indexCompare ? indexCompare : memo,\n  0);\n\n};\n\nconst compare = (baseA, baseB, options) => {\n  const a = options.order === 'desc' ? baseB : baseA;\n  const b = options.order === 'desc' ? baseA : baseB;\n\n  if (options.treatAs === 'number') {\n    return Number(a) - Number(b);\n  }\n\n  if (options.treatAs === 'dottedList') {\n    return compareDottedList(a, b, options);\n  }\n\n  return localCompare(a, b);\n};\n\nconst evalIfHasProperty = (data, property) =>\ntypeof data === 'object' && data !== null && Object.keys(data).indexOf(property) !== -1;\n\nconst advancedSort = (array, options = {}) => {\n  options.order = options.order || 'asc';\n  const sortedArray = copyArray(array);\n\n  if (options.property) {\n    sortedArray.sort((baseA, baseB) => {\n      let a;\n      let b;\n\n      if (!Array.isArray(options.property)) {\n        a = baseA[options.property];\n        b = baseB[options.property];\n      }\n\n      if (Array.isArray(options.property)) {\n        a = options.property.reduce(\n        (memo, property) => evalIfHasProperty(memo, property) ? memo[property] : null,\n        baseA);\n\n        b = options.property.reduce(\n        (memo, property) => evalIfHasProperty(memo, property) ? memo[property] : null,\n        baseB);\n\n      }\n\n      if (!a) {\n        return 1;\n      }\n      if (!b) {\n        return -1;\n      }\n      return compare(a, b, options);\n    });\n  }\n\n  if (!options.property) {\n    sortedArray.sort((a, b) => compare(a, b, options));\n  }\n\n  return sortedArray;\n};\n\nexport { advancedSort };","import { isClient } from \"../utils\";\nimport NProgress from 'nprogress';\n\nconst loadingProgressBar = {\n  requests: 0,\n\n  start: () => {\n    if (isClient) {\n      NProgress.configure({ showSpinner: false, easing: 'ease', speed: 800, minimum: 0.2 });\n      NProgress.start();\n      loadingProgressBar.requests += 1;\n    }\n  },\n\n  done: () => {\n    if (isClient && NProgress) {\n      loadingProgressBar.requests -= 1;\n      if (loadingProgressBar.requests <= 0) {\n        NProgress.done();\n        return;\n      }\n\n      NProgress.inc(0.1);\n    }\n  } };\n\n\nexport default loadingProgressBar;","function ownKeys(object, enumerableOnly) {var keys = Object.keys(object);if (Object.getOwnPropertySymbols) {var symbols = Object.getOwnPropertySymbols(object);enumerableOnly && (symbols = symbols.filter(function (sym) {return Object.getOwnPropertyDescriptor(object, sym).enumerable;})), keys.push.apply(keys, symbols);}return keys;}function _objectSpread(target) {for (var i = 1; i < arguments.length; i++) {var source = null != arguments[i] ? arguments[i] : {};i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {_defineProperty(target, key, source[key]);}) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));});}return target;}function _defineProperty(obj, key, value) {if (key in obj) {Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });} else {obj[key] = value;}return obj;}import { browserHistory } from 'react-router';\n\nimport { isClient } from \"./\";\nimport { notify } from \"../Notifications/actions/notificationsActions\";\nimport { store } from \"../store\";\nimport loadingBar from \"../App/LoadingProgressBar\";\n\nimport { APIURL } from \"../config.js\";\nimport request from \"../../shared/JSONRequest\";\n\nlet API_URL = APIURL;\nlet language;\n\nconst doneLoading = (data) => {\n  loadingBar.done();\n  return data;\n};\n\nconst isNonUsualApiError = (error) => error.status && ![401, 404, 409, 500].includes(error.status);\n\nconst errorMessages = [\n{\n  key: /PayloadTooLargeError: request entity too large/g,\n  message: 'Request data too large. Please review text length in property values' },\n\n{\n  key: /ERROR Failed to index documents: (.+)/g,\n  message: 'Failed to index documents: {0} ' }];\n\n\n\nfunction extractMessageFromError(error) {\n  let finalMessage = `An error has occurred, it has been logged with request id #${error.json.requestId}.`;\n  if (!error.json.error) return finalMessage;\n\n  const errorMessage = errorMessages.find((errorExpression) =>\n  error.json.error.match(errorExpression.key));\n\n  if (errorMessage) {\n    const matches = errorMessage.key.exec(error.json.error);\n    finalMessage = errorMessage.message;\n    for (let i = 0; i < matches.length - 1; i += 1) {\n      finalMessage = finalMessage.replace(`{${i}}`, matches[1]);\n    }\n  }\n  return finalMessage;\n}\n\nfunction extractMessageFromValidation(error) {\n  if (!error.json.validations) return error.json.error;\n  return error.json.validations.reduce(\n  (message, validationError) =>\n  `${message} ${validationError.instancePath} ${validationError.message},`,\n  `${error.json.error}: `);\n\n}\n\nconst handleErrorStatus = (error) => {\n  switch (error.status || true) {\n    case 400:\n    case 422:\n      store.dispatch(notify(extractMessageFromValidation(error), 'danger'));\n      break;\n\n    case 401:\n      browserHistory.replace('/login');\n      break;\n\n    case 404:\n      browserHistory.replace('/404');\n      break;\n\n    case 409:\n      store.dispatch(notify(error.json.error, 'warning'));\n      break;\n\n    case 500:\n      store.dispatch(notify(extractMessageFromError(error), 'danger'));\n      break;\n\n    case isNonUsualApiError(error):\n      store.dispatch(notify(error.json.prettyMessage || error.json.error, 'danger'));\n      break;\n\n    case error instanceof TypeError:\n      store.dispatch(notify('Could not reach server. Please try again later.', 'danger'));\n      break;\n\n    default:\n      store.dispatch(notify('An error has occurred', 'danger'));}\n\n};\n\nconst handleError = (e, endpoint) => {\n  const error = e;\n  error.endpoint = endpoint;\n\n  if (!isClient) {\n    return Promise.reject(error);\n  }\n\n  doneLoading();\n\n  handleErrorStatus(error);\n  return Promise.reject(error);\n};\n\nconst _request = (url, req, method) => {\n  loadingBar.start();\n  return request[method](API_URL + url, req.data, _objectSpread(_objectSpread({\n    'Content-Language': language },\n  req.headers), {}, {\n    'X-Requested-With': 'XMLHttpRequest' })).\n\n  then(doneLoading).\n  catch((e) => handleError(e, { url, method }));\n};\n\nexport default {\n  get: (url, req = {}) => _request(url, req, 'get'),\n\n  post: (url, req = {}) => _request(url, req, 'post'),\n\n  put: (url, req = {}) => _request(url, req, 'put'),\n\n  delete: (url, req = {}) => _request(url, req, 'delete'),\n\n  cookie(c) {\n    request.cookie(c);\n  },\n\n  locale(locale) {\n    language = locale;\n  },\n\n  APIURL(url) {\n    API_URL = url;\n  } };","export const COLORS = [\n'#C03B22',\n'#D9534F',\n'#E91E63',\n'#A03AB1',\n'#6F46B8',\n'#3F51B5',\n'#2196F3',\n'#37BDCf',\n'#359990',\n'#5CB85C',\n'#8BC34A',\n'#CDDC39',\n'#CCBC2F',\n'#F0AD4E',\n'#EC9920',\n'#E46841',\n'#795548',\n'#9E9E9E',\n'#607D8B'];\n\n\nexport default COLORS;","export default function debounce(func, wait, immediate) {\n  let timeout;\n\n  return function () {\n    const args = arguments;\n    const later = () => {\n      timeout = null;\n      if (!immediate) {\n        return func.apply(this, args);\n      }\n    };\n    const callNow = immediate && !timeout;\n    clearTimeout(timeout);\n    timeout = setTimeout(later, wait);\n    if (callNow) {\n      return func.apply(this, args);\n    }\n  };\n}","export const getFileExtension = (filename) =>\nfilename ? filename.substr(filename.lastIndexOf('.') + 1) : '';","import Jvent from 'jvent';\n\nexport function getPropsFromRoute({ routes }, componentProps) {\n  const props = {};\n  const lastRoute = routes[routes.length - 1];\n\n  routes.reduceRight((_prevRoute, currRoute) => {\n    componentProps.forEach((componentProp) => {\n      if (!props[componentProp] && currRoute.component && currRoute.component[componentProp]) {\n        props[componentProp] = currRoute.component[componentProp];\n      }\n    });\n  }, lastRoute);\n\n  return props;\n}\n\nexport const isClient = typeof document !== 'undefined';\nexport const events = new Jvent();","function appendNewOcurrency(sortableOcurrences, property, appendMetadata = true) {\n  const propertyName = appendMetadata ? `metadata.${property.get('name')}` : property.get('name');\n\n  if (!Object.keys(sortableOcurrences).includes(propertyName)) {\n    sortableOcurrences[propertyName] = { type: property.get('type'), ocurrs: 0 };\n  }\n  sortableOcurrences[propertyName].ocurrs += 1;\n}\n\nfunction getSortableOcurrences(validTemplates, sortableOcurrences) {\n  validTemplates.forEach((template) => {\n    template.get('commonProperties').forEach((property) => {\n      if (property.get('prioritySorting')) {\n        appendNewOcurrency(sortableOcurrences, property, false);\n      }\n    });\n\n    template.get('properties').forEach((property) => {\n      const sortable =\n      property.get('filter') && (\n      property.get('type') === 'text' ||\n      property.get('type') === 'date' ||\n      property.get('type') === 'numeric' ||\n      property.get('type') === 'select');\n      if (sortable && property.get('prioritySorting')) {\n        appendNewOcurrency(sortableOcurrences, property);\n      }\n    });\n  });\n\n  return sortableOcurrences;\n}\n\nfunction asessCriteriaValid(validTemplates, options) {\n  return validTemplates.reduce((isValid, template) => {\n    let currentIsValid = isValid;\n\n    template.get('properties').forEach((property) => {\n      const sortable =\n      property.get('filter') && (\n      property.get('type') === 'text' || property.get('type') === 'date');\n      currentIsValid = Boolean(\n      currentIsValid ||\n      sortable && `metadata.${property.get('name')}` === options.currentCriteria.sort);\n\n    });\n\n    return currentIsValid;\n  }, false);\n}\n\nexport default {\n  get: (options = {}) => {\n    if (options.override) {\n      return options.override;\n    }\n\n    let sortingDefault = { sort: 'creationDate', order: 'desc', treatAs: 'number' };\n    let validTemplates = [];\n    let sortableOcurrences = {};\n\n    if (options.templates) {\n      validTemplates = options.templates.map((t) => {\n        if (!t.get('commonProperties')) {\n          return t.set('commonProperties', []);\n        }\n        return t;\n      });\n\n      if (options.filteredTemplates && options.filteredTemplates.length) {\n        validTemplates = validTemplates.filter((t) =>\n        options.filteredTemplates.includes(t.get('_id')));\n\n      }\n\n      sortableOcurrences = getSortableOcurrences(validTemplates, sortableOcurrences);\n\n      if (Object.keys(sortableOcurrences).length) {\n        const ocurrences = Object.keys(sortableOcurrences).map((property) => {\n          const { type, ocurrs } = sortableOcurrences[property];\n          return { name: property, type, ocurrs };\n        });\n\n        const priority = ocurrences.reduce((prev, current) =>\n        prev.ocurrs >= current.ocurrs ? prev : current);\n\n\n        sortingDefault = {\n          sort: priority.name,\n          order: priority.type !== 'date' ? 'asc' : 'desc',\n          treatAs: priority.type !== 'date' ? 'string' : 'number' };\n\n      }\n\n      if (options.currentCriteria) {\n        if (options.selectedSorting && options.selectedSorting.size) {\n          options.currentCriteria = options.selectedSorting.toJS();\n        } else {\n          options.currentCriteria = sortingDefault;\n        }\n\n        let criteriaValid =\n        options.currentCriteria.sort === 'title' ||\n        options.currentCriteria.sort === 'creationDate';\n\n        if (!criteriaValid) {\n          criteriaValid = asessCriteriaValid(validTemplates, options);\n        }\n\n        if (criteriaValid) {\n          return options.currentCriteria;\n        }\n      }\n    }\n\n    return sortingDefault;\n  } };","const limitedLength = (length) => Math.max(0, Math.min(13, length));\nconst generateID = (characterLength, numericLength, extraLength = 0) => {\n  const characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';\n  const numbers = '0123456789';\n  const randomString = (options, outputLength) =>\n  [...Array(outputLength)].\n  map((_v, _i) => options.charAt(Math.floor(Math.random() * options.length))).\n  join('');\n  const characterPart = randomString(characters, limitedLength(characterLength));\n  const numericPart = randomString(numbers, limitedLength(numericLength));\n  const timestamp = Date.now().toString();\n  const extraPart =\n  extraLength > 0 ?\n  `-${timestamp.substr(timestamp.length - limitedLength(extraLength), timestamp.length)}` :\n  '';\n  return characterPart + numericPart + extraPart;\n};\n\nexport { generateID };","function ownKeys(object, enumerableOnly) {var keys = Object.keys(object);if (Object.getOwnPropertySymbols) {var symbols = Object.getOwnPropertySymbols(object);enumerableOnly && (symbols = symbols.filter(function (sym) {return Object.getOwnPropertyDescriptor(object, sym).enumerable;})), keys.push.apply(keys, symbols);}return keys;}function _objectSpread(target) {for (var i = 1; i < arguments.length; i++) {var source = null != arguments[i] ? arguments[i] : {};i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {_defineProperty(target, key, source[key]);}) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));});}return target;}function _defineProperty(obj, key, value) {if (key in obj) {Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });} else {obj[key] = value;}return obj;}import 'isomorphic-fetch';\nimport superagent from 'superagent';\nimport { URLSearchParams } from 'url';\n\nimport rison from 'rison-node';\n\nlet cookie;\n\nclass FetchResponseError extends Error {\n  // eslint-disable-next-line no-shadow\n  constructor(message, { json, status, cookie, headers } = {}) {\n    super(message);\n    this.name = 'FetchResponseError';\n    this.json = json;\n    this.status = status;\n    this.cookie = cookie;\n    this.headers = headers;\n  }}\n\n\nconst attemptRisonDecode = (string) => {\n  const errcb = (e) => {\n    throw Error(`rison decoder error: ${e}`);\n  };\n\n  const risonParser = new rison.parser(errcb); // eslint-disable-line new-cap\n  risonParser.error = (message) => {\n    this.message = message;\n  };\n\n  risonParser.parse(string);\n};\n\nexport function toUrlParams(_data) {\n  if (typeof _data === 'string') {\n    return `?${_data}`;\n  }\n\n  const data = _objectSpread({}, _data);\n  if (!data || Object.keys(data).length === 0) {\n    return '';\n  }\n\n  return `?${Object.keys(data).\n  map((key) => {\n    if (typeof data[key] === 'undefined' || data[key] === null) {\n      return;\n    }\n\n    if (typeof data[key] === 'object') {\n      data[key] = JSON.stringify(data[key]);\n    }\n\n    let encodedValue = encodeURIComponent(data[key]);\n\n    if (encodeURIComponent(key) === 'q') {\n      try {\n        attemptRisonDecode(data[key]);\n        encodedValue = data[key];\n      } catch (err) {\n        encodedValue = encodeURIComponent(data[key]);\n      }\n    }\n    return `${encodeURIComponent(key)}=${encodedValue}`;\n  }).\n  filter((param) => param).\n  join('&')}`;\n}\n\nconst removeUndefinedKeys = (obj) => {\n  //eslint-disable-next-line no-param-reassign\n  Object.keys(obj).forEach((key) => obj[key] === undefined ? delete obj[key] : {});\n};\n\nconst _fetch = (url, data, method, _headers) => {\n  let response;\n  let params = '';\n  let body;\n\n  const headers = _objectSpread({\n    Accept: 'application/json',\n    'Content-Type': 'application/json',\n    'X-Requested-With': 'XMLHttpRequest',\n    Cookie: cookie },\n  _headers);\n\n\n  if (method === 'GET' || method === 'DELETE') {\n    params = toUrlParams(data);\n  }\n\n  if (method === 'POST' || method === 'PUT') {\n    body = JSON.stringify(data);\n  }\n\n  if (URLSearchParams && data instanceof URLSearchParams) {\n    body = data;\n  }\n\n  removeUndefinedKeys(headers);\n\n  return fetch(url + params, {\n    method,\n    headers,\n    credentials: 'same-origin',\n    body }).\n\n  then((res) => {\n    let setCookie;\n    if (res.headers.get('set-cookie')) {\n      setCookie = res.headers.get('set-cookie');\n    }\n    response = res;\n    // Failed .json() parsing usually indicates a non-success http status,\n    // so we rather return that failure status than throw our own parsin\n    // error.\n    return Promise.all([res.json().catch(() => ({})), setCookie, res.headers]);\n  }).\n  then(([json, setCookie, responseHeaders]) => {\n    const processedResponse = {\n      json,\n      status: response.status,\n      cookie: setCookie,\n      headers: responseHeaders };\n\n\n    if (response.status > 399) {\n      throw new FetchResponseError(\n      `Fetch returned a response with status ${response.status}.`,\n      processedResponse);\n\n    }\n\n    return processedResponse;\n  });\n};\n\nexport default {\n  post: (url, data, headers) => _fetch(url, data, 'POST', headers),\n\n  put: (url, data, headers) => _fetch(url, data, 'PUT', headers),\n\n  get: (url, data, headers) => _fetch(url, data, 'GET', headers),\n\n  delete: (url, data, headers) => _fetch(url, data, 'DELETE', headers),\n\n  head: (url, data, headers) => _fetch(url, data, 'HEAD', headers),\n\n  // TEST!!!!! Fully untested function\n  uploadFile: (url, filename, file, _cookie) =>\n  new Promise((resolve, reject) => {\n    superagent.\n    post(url).\n    set('Accept', 'application/json').\n    set('X-Requested-With', 'XMLHttpRequest').\n    set('Cookie', _cookie || cookie || '').\n    attach('file', file, filename).\n    then((response) => {\n      resolve(response);\n    }).\n    catch((err) => {\n      reject(err);\n    });\n  }),\n\n  cookie: (c) => {\n    cookie = c;\n  } };\n\n\nexport { FetchResponseError };","import { propertyTypes } from \"./propertyTypes\";\n\n\nexport function convertThesaurusName(thesaurusName) {\n  return `${thesaurusName.toLowerCase().replace(/[^0-9a-z]/g, '')}`;\n}\n\n/* Convert Uwazi concepts into their Topic Classification model equivalent. */\nexport function buildFullModelName(thesaurusName) {\n  return `${process.env.DATABASE_NAME}-${convertThesaurusName(thesaurusName)}`;\n}\n\n/* Find all property names using this thesaurus */\nexport function getThesaurusPropertyNames(\nthesaurusId,\ntemplates)\n{\n  const propNames = {};\n  templates.forEach((t) => {var _t$properties;return (_t$properties =\n    t.properties) === null || _t$properties === void 0 ? void 0 : _t$properties.forEach((p) => {var _p$content;\n      if (\n      p.name && (\n      p.type === propertyTypes.select || p.type === propertyTypes.multiselect) &&\n      ((_p$content = p.content) === null || _p$content === void 0 ? void 0 : _p$content.toString()) === thesaurusId.toString())\n      {\n        propNames[p.name] = true;\n      }\n    });});\n\n  return Object.keys(propNames);\n}","function ownKeys(object, enumerableOnly) {var keys = Object.keys(object);if (Object.getOwnPropertySymbols) {var symbols = Object.getOwnPropertySymbols(object);enumerableOnly && (symbols = symbols.filter(function (sym) {return Object.getOwnPropertyDescriptor(object, sym).enumerable;})), keys.push.apply(keys, symbols);}return keys;}function _objectSpread(target) {for (var i = 1; i < arguments.length; i++) {var source = null != arguments[i] ? arguments[i] : {};i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {_defineProperty(target, key, source[key]);}) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));});}return target;}function _defineProperty(obj, key, value) {if (key in obj) {Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });} else {obj[key] = value;}return obj;}function sameProperty(prop1, prop2) {var _prop1$inherit, _prop2$inherit;\n  return (\n    prop1.name === prop2.name &&\n    prop1.type === prop2.type &&\n    prop1.content === prop2.content &&\n    ((_prop1$inherit = prop1.inherit) === null || _prop1$inherit === void 0 ? void 0 : _prop1$inherit.property) === ((_prop2$inherit = prop2.inherit) === null || _prop2$inherit === void 0 ? void 0 : _prop2$inherit.property));\n\n}\n\nfunction templateHasProperty(template, property) {\n  return template.properties.filter((prop) => sameProperty(prop, property)).length;\n}\n\nfunction allTemplatesHaveIt(templates, property) {\n  return templates.reduce(\n  (allHaveIt, template) => allHaveIt && templateHasProperty(template, property),\n  true);\n\n}\n\nconst comonProperties = (templates, documentTypes = [], excludedTypes = []) => {\n  const properties = [];\n  const selectedTemplates = templates.filter((template) =>\n  documentTypes.includes(template._id.toString()));\n\n\n  if (selectedTemplates.length) {\n    const propertiesToCompare = selectedTemplates[0].properties.filter(\n    (property) => !excludedTypes.includes(property.type));\n\n    propertiesToCompare.forEach((_property) => {\n      if (allTemplatesHaveIt(selectedTemplates, _property)) {\n        const property = selectedTemplates.reduce((result, tmpl) => {\n          const prop = tmpl.properties.find((_prop) => sameProperty(_prop, _property), {});\n          return prop.required ? prop : result;\n        }, _property);\n        properties.push(_objectSpread({}, property));\n      }\n    });\n  }\n\n  return properties;\n};\n\nfunction comonFilters(templates, documentTypes = [], forcedProps = []) {\n  return comonProperties(templates, documentTypes).filter(\n  (prop) => prop.filter || forcedProps.includes(prop.name));\n\n}\n\nfunction defaultFilters(templates, forcedProps = []) {\n  return templates.reduce((filters, template) => {\n    template.properties.forEach((prop) => {\n      if (\n      (forcedProps.includes(prop.name) || prop.filter && prop.defaultfilter) &&\n      !filters.find((_prop) => sameProperty(prop, _prop)))\n      {\n        filters.push(prop);\n      }\n    });\n    return filters;\n  }, []);\n}\n\nconst allUniqueProperties = (templates) =>\ntemplates.reduce((filters, template) => {\n  template.properties.forEach((prop) => {\n    if (!filters.find((_prop) => sameProperty(prop, _prop))) {\n      filters.push(prop);\n    }\n  });\n  return filters;\n}, []);\n\nconst allProperties = (templates) =>\ntemplates.reduce((properties, template) => properties.concat(template.properties), []);\n\nconst getInheritedProperty = (property, properties) =>\nproperties.find((p) => property.inherit.property.toString() === p._id.toString());\n\nconst textFields = (templates) =>\nallUniqueProperties(templates).filter(\n(property) => property.type === 'text' || property.type === 'markdown');\n\n\nexport default {\n  allProperties,\n  getInheritedProperty,\n  comonProperties,\n  comonFilters,\n  defaultFilters,\n  allUniqueProperties,\n  textFields };","\nimport { language } from \"./languagesList\";\n\nexport const entityDefaultDocument = (\nentityDocuments,\nentityLanguage,\ndefaultLanguage) =>\n{\n  const documents = entityDocuments || [];\n  const documentMatchingEntity = documents.find(\n  (document) =>\n  document.language && language(document.language, 'ISO639_1') === entityLanguage);\n\n\n  const documentMatchingDefault = documents.find(\n  (document) =>\n  document.language && language(document.language, 'ISO639_1') === defaultLanguage);\n\n\n  return documentMatchingEntity || documentMatchingDefault || documents[0];\n};","\n\n\nexport const isSerializedFile = (file) =>\nfile.serializedFile !== undefined;\n\nexport const constructFile = ({ serializedFile: base64, originalname }) => {\n  const fileParts = base64.split(',');\n  const fileFormat = fileParts[0].split(';')[0].split(':')[1];\n  const fileContent = fileParts[1];\n  const buff = Buffer.from(fileContent, 'base64');\n\n  return new File([buff], originalname || '', { type: fileFormat });\n};\n\nexport const prepareHTMLMediaView = (supportingFile) => {\n  const file = constructFile(supportingFile);\n  return URL.createObjectURL(file);\n};","/* eslint-disable max-lines */\n\n\nconst elasticLanguages =\n\n{\n  arb: { franc: 'arb', elastic: 'arabic', ISO639_1: 'ar' },\n  bul: { franc: 'bul', elastic: 'bulgarian', ISO639_1: 'bg' },\n  cat: { franc: 'cat', elastic: 'catalan', ISO639_1: 'ca' },\n  cjk: { franc: 'cjk', elastic: 'cjk', ISO639_1: null },\n  ckb: { franc: 'ckb', elastic: 'sorani', ISO639_1: null },\n  ces: { franc: 'ces', elastic: 'czech', ISO639_1: 'cs' },\n  dan: { franc: 'dan', elastic: 'danish', ISO639_1: 'da' },\n  deu: { franc: 'deu', elastic: 'german', ISO639_1: 'de' },\n  ell: { franc: 'ell', elastic: 'greek', ISO639_1: 'el' },\n  eng: { franc: 'eng', elastic: 'english', ISO639_1: 'en' },\n  eus: { franc: 'eus', elastic: 'basque', ISO639_1: 'eu' },\n  fas: { franc: 'fas', elastic: 'persian', ISO639_1: 'fa' },\n  fin: { franc: 'fin', elastic: 'finnish', ISO639_1: 'fi' },\n  fra: { franc: 'fra', elastic: 'french', ISO639_1: 'fr' },\n  gle: { franc: 'gle', elastic: 'irish', ISO639_1: 'ga' },\n  glg: { franc: 'glg', elastic: 'galician', ISO639_1: 'gl' },\n  hin: { franc: 'hin', elastic: 'hindi', ISO639_1: 'hi' },\n  hun: { franc: 'hun', elastic: 'hungarian', ISO639_1: 'hu' },\n  hye: { franc: 'hye', elastic: 'armenian', ISO639_1: 'hy' },\n  ind: { franc: 'ind', elastic: 'indonesian', ISO639_1: 'id' },\n  ita: { franc: 'ita', elastic: 'italian', ISO639_1: 'it' },\n  lav: { franc: 'lav', elastic: 'latvian', ISO639_1: 'lv' },\n  lit: { franc: 'lit', elastic: 'lithuanian', ISO639_1: 'lt' },\n  nld: { franc: 'nld', elastic: 'dutch', ISO639_1: 'nl' },\n  nno: { franc: 'nno', elastic: 'norwegian', ISO639_1: 'nn' },\n  nob: { franc: 'nob', elastic: 'norwegian', ISO639_1: 'nb' },\n  por: { franc: 'por', elastic: 'portuguese', ISO639_1: 'pt' },\n  ron: { franc: 'ron', elastic: 'romanian', ISO639_1: 'ro' },\n  rus: { franc: 'rus', elastic: 'russian', ISO639_1: 'ru' },\n  spa: { franc: 'spa', elastic: 'spanish', ISO639_1: 'es' },\n  swe: { franc: 'swe', elastic: 'swedish', ISO639_1: 'sv' },\n  tha: { franc: 'tha', elastic: 'thai', ISO639_1: 'th' },\n  tur: { franc: 'tur', elastic: 'turkish', ISO639_1: 'tr' } };\n\n\nconst availableLanguages = [\n{\n  label: 'Abkhazian',\n  key: 'ab',\n  ISO639_3: 'abk',\n  localized_label: 'Abkhazian',\n  translationAvailable: false },\n\n{\n  label: 'Afar',\n  key: 'aa',\n  ISO639_3: 'aar',\n  localized_label: 'Afar',\n  translationAvailable: false },\n\n{\n  label: 'Afrikaans',\n  key: 'af',\n  ISO639_3: 'afr',\n  localized_label: 'Afrikaans',\n  translationAvailable: false },\n\n{\n  label: 'Akan',\n  key: 'ak',\n  ISO639_3: 'aka',\n  localized_label: 'Akan',\n  translationAvailable: false },\n\n{\n  label: 'Albanian',\n  key: 'sq',\n  ISO639_3: 'sqi',\n  localized_label: 'Shqip',\n  translationAvailable: false },\n\n{\n  label: 'Amharic',\n  key: 'am',\n  ISO639_3: 'amh',\n  localized_label: '',\n  translationAvailable: false },\n\n{\n  label: 'Arabic',\n  key: 'ar',\n  rtl: true,\n  ISO639_3: 'ara',\n  localized_label: '',\n  translationAvailable: true },\n\n{\n  label: 'Aragonese',\n  key: 'an',\n  ISO639_3: 'arg',\n  localized_label: 'Aragonese',\n  translationAvailable: false },\n\n{\n  label: 'Armenian',\n  key: 'hy',\n  ISO639_3: 'hye',\n  localized_label: '',\n  translationAvailable: false },\n\n{\n  label: 'Assamese',\n  key: 'as',\n  ISO639_3: 'asm',\n  localized_label: '',\n  translationAvailable: false },\n\n{\n  label: 'Avaric',\n  key: 'av',\n  ISO639_3: 'ava',\n  localized_label: 'Avaric',\n  translationAvailable: false },\n\n{\n  label: 'Avestan',\n  key: 'ae',\n  ISO639_3: 'ave',\n  localized_label: 'Avestan',\n  translationAvailable: false },\n\n{\n  label: 'Aymara',\n  key: 'ay',\n  ISO639_3: 'aym',\n  localized_label: 'Aymara',\n  translationAvailable: false },\n\n{\n  label: 'Azerbaijani',\n  key: 'az',\n  ISO639_3: 'aze',\n  localized_label: 'Azrbaycan',\n  translationAvailable: false },\n\n{\n  label: 'Bambara',\n  key: 'bm',\n  ISO639_3: 'bam',\n  localized_label: 'Bamanakan',\n  translationAvailable: false },\n\n{\n  label: 'Bashkir',\n  key: 'ba',\n  ISO639_3: 'bak',\n  localized_label: 'Bashkir',\n  translationAvailable: false },\n\n{\n  label: 'Basque',\n  key: 'eu',\n  ISO639_3: 'eus',\n  localized_label: 'Euskara',\n  translationAvailable: false },\n\n{\n  label: 'Belarusian',\n  key: 'be',\n  ISO639_3: 'bel',\n  localized_label: '',\n  translationAvailable: false },\n\n{\n  label: 'Bengali (Bangla)',\n  key: 'bn',\n  ISO639_3: 'ben',\n  localized_label: '',\n  translationAvailable: false },\n\n{\n  label: 'Bihari',\n  key: 'bh',\n  ISO639_3: 'bih',\n  localized_label: 'Bhojpuri',\n  translationAvailable: false },\n\n{\n  label: 'Bislama',\n  key: 'bi',\n  ISO639_3: 'bis',\n  localized_label: 'Bislama',\n  translationAvailable: false },\n\n{\n  label: 'Bosnian',\n  key: 'bs',\n  ISO639_3: 'bos',\n  localized_label: 'Bosanski',\n  translationAvailable: false },\n\n{\n  label: 'Breton',\n  key: 'br',\n  ISO639_3: 'bre',\n  localized_label: 'Brezhoneg',\n  translationAvailable: false },\n\n{\n  label: 'Bulgarian',\n  key: 'bg',\n  ISO639_3: 'bul',\n  localized_label: '',\n  translationAvailable: false },\n\n{\n  label: 'Burmese',\n  key: 'my',\n  ISO639_3: 'mya',\n  localized_label: '',\n  translationAvailable: true },\n\n{\n  label: 'Catalan',\n  key: 'ca',\n  ISO639_3: 'cat',\n  localized_label: 'Catal',\n  translationAvailable: false },\n\n{\n  label: 'Chamorro',\n  key: 'ch',\n  ISO639_3: 'cha',\n  localized_label: 'Chamorro',\n  translationAvailable: false },\n\n{\n  label: 'Chechen',\n  key: 'ce',\n  ISO639_3: 'che',\n  localized_label: '',\n  translationAvailable: false },\n\n{\n  label: 'Chichewa, Chewa, Nyanja',\n  key: 'ny',\n  ISO639_3: 'nya',\n  localized_label: 'Nyanja',\n  translationAvailable: false },\n\n{\n  label: 'Chinese',\n  key: 'zh',\n  ISO639_3: 'zho',\n  localized_label: '',\n  translationAvailable: false },\n\n{\n  label: 'Chinese (Simplified)',\n  key: 'zh-Hans',\n  ISO639_3: 'zho-Hans',\n  localized_label: '',\n  translationAvailable: false },\n\n{\n  label: 'Chinese (Traditional)',\n  key: 'zh-Hant',\n  ISO639_3: 'zho-Hant',\n  localized_label: '',\n  translationAvailable: false },\n\n{\n  label: 'Chuvash',\n  key: 'cv',\n  ISO639_3: 'chv',\n  localized_label: 'Chuvash',\n  translationAvailable: false },\n\n{\n  label: 'Cornish',\n  key: 'kw',\n  ISO639_3: 'cor',\n  localized_label: 'Kernewek',\n  translationAvailable: false },\n\n{\n  label: 'Corsican',\n  key: 'co',\n  ISO639_3: 'cos',\n  localized_label: 'Corsican',\n  translationAvailable: false },\n\n{\n  label: 'Cree',\n  key: 'cr',\n  ISO639_3: 'cre',\n  localized_label: 'Cree',\n  translationAvailable: false },\n\n{\n  label: 'Croatian',\n  key: 'hr',\n  ISO639_3: 'hrv',\n  localized_label: 'Hrvatski',\n  translationAvailable: false },\n\n{\n  label: 'Czech',\n  key: 'cs',\n  ISO639_3: 'ces',\n  localized_label: 'etina',\n  translationAvailable: false },\n\n{\n  label: 'Danish',\n  key: 'da',\n  ISO639_3: 'dan',\n  localized_label: 'Dansk',\n  translationAvailable: false },\n\n{\n  label: 'Divehi, Dhivehi, Maldivian',\n  key: 'dv',\n  rtl: true,\n  ISO639_3: 'div',\n  localized_label: 'Divehi',\n  translationAvailable: false },\n\n{\n  label: 'Dutch',\n  key: 'nl',\n  ISO639_3: 'nld',\n  localized_label: 'Nederlands',\n  translationAvailable: false },\n\n{\n  label: 'Dzongkha',\n  key: 'dz',\n  ISO639_3: 'dzo',\n  localized_label: '',\n  translationAvailable: false },\n\n{\n  label: 'English',\n  key: 'en',\n  ISO639_3: 'eng',\n  localized_label: 'English',\n  translationAvailable: false },\n\n{\n  label: 'Esperanto',\n  key: 'eo',\n  ISO639_3: 'epo',\n  localized_label: 'Esperanto',\n  translationAvailable: false },\n\n{\n  label: 'Estonian',\n  key: 'et',\n  ISO639_3: 'est',\n  localized_label: 'Eesti',\n  translationAvailable: false },\n\n{\n  label: 'Ewe',\n  key: 'ee',\n  ISO639_3: 'ewe',\n  localized_label: 'Eegbe',\n  translationAvailable: false },\n\n{\n  label: 'Faroese',\n  key: 'fo',\n  ISO639_3: 'fao',\n  localized_label: 'Froyskt',\n  translationAvailable: false },\n\n{\n  label: 'Fijian',\n  key: 'fj',\n  ISO639_3: 'fij',\n  localized_label: 'Fijian',\n  translationAvailable: false },\n\n{\n  label: 'Finnish',\n  key: 'fi',\n  ISO639_3: 'fin',\n  localized_label: 'Suomi',\n  translationAvailable: false },\n\n{\n  label: 'French',\n  key: 'fr',\n  ISO639_3: 'fra',\n  localized_label: 'Franais',\n  translationAvailable: true },\n\n{\n  label: 'Fula, Fulah, Pulaar, Pular',\n  key: 'ff',\n  ISO639_3: 'ful',\n  localized_label: 'Pulaar',\n  translationAvailable: false },\n\n{\n  label: 'Galician',\n  key: 'gl',\n  ISO639_3: 'glg',\n  localized_label: 'Galego',\n  translationAvailable: false },\n\n{\n  label: 'Gaelic Scottish',\n  key: 'gd',\n  ISO639_3: 'gla',\n  localized_label: 'Gidhlig',\n  translationAvailable: false },\n\n{\n  label: 'Gaelic (Manx)',\n  key: 'gv',\n  ISO639_3: 'glv',\n  localized_label: 'Gaelg',\n  translationAvailable: false },\n\n{\n  label: 'Georgian',\n  key: 'ka',\n  ISO639_3: 'kat',\n  localized_label: '',\n  translationAvailable: false },\n\n{\n  label: 'German',\n  key: 'de',\n  ISO639_3: 'deu',\n  localized_label: 'Deutsch',\n  translationAvailable: false },\n\n{\n  label: 'Greek',\n  key: 'el',\n  ISO639_3: 'ell',\n  localized_label: '',\n  translationAvailable: false },\n\n{\n  label: 'Guarani',\n  key: 'gn',\n  ISO639_3: 'grn',\n  localized_label: 'Guarani',\n  translationAvailable: false },\n\n{\n  label: 'Gujarati',\n  key: 'gu',\n  ISO639_3: 'guj',\n  localized_label: '',\n  translationAvailable: false },\n\n{\n  label: 'Haitian Creole',\n  key: 'ht',\n  ISO639_3: 'hat',\n  localized_label: 'Haitian Creole',\n  translationAvailable: false },\n\n{\n  label: 'Hausa',\n  key: 'ha',\n  rtl: true,\n  ISO639_3: 'hau',\n  localized_label: 'Hausa',\n  translationAvailable: false },\n\n{\n  label: 'Hebrew',\n  key: 'he',\n  rtl: true,\n  ISO639_3: 'heb',\n  localized_label: '',\n  translationAvailable: false },\n\n{\n  label: 'Herero',\n  key: 'hz',\n  ISO639_3: 'her',\n  localized_label: 'Herero',\n  translationAvailable: false },\n\n{\n  label: 'Hindi',\n  key: 'hi',\n  ISO639_3: 'hin',\n  localized_label: '',\n  translationAvailable: false },\n\n{\n  label: 'Hiri Motu',\n  key: 'ho',\n  ISO639_3: 'hmo',\n  localized_label: 'Hiri Motu',\n  translationAvailable: false },\n\n{\n  label: 'Hungarian',\n  key: 'hu',\n  ISO639_3: 'hun',\n  localized_label: 'Magyar',\n  translationAvailable: false },\n\n{\n  label: 'Icelandic',\n  key: 'is',\n  ISO639_3: 'isl',\n  localized_label: 'slenska',\n  translationAvailable: false },\n\n{\n  label: 'Ido',\n  key: 'io',\n  ISO639_3: 'ido',\n  localized_label: 'Ido',\n  translationAvailable: false },\n\n{\n  label: 'Igbo',\n  key: 'ig',\n  ISO639_3: 'ibo',\n  localized_label: 'Igbo',\n  translationAvailable: false },\n\n{\n  label: 'Indonesian',\n  key: 'in',\n  ISO639_3: 'ind',\n  localized_label: 'Indonesia',\n  translationAvailable: false },\n\n{\n  label: 'Interlingua',\n  key: 'ia',\n  ISO639_3: 'ina',\n  localized_label: 'Interlingua',\n  translationAvailable: false },\n\n{\n  label: 'Interlingue',\n  key: 'ie',\n  ISO639_3: 'ile',\n  localized_label: 'Interlingue',\n  translationAvailable: false },\n\n{\n  label: 'Inuktitut',\n  key: 'iu',\n  ISO639_3: 'iku',\n  localized_label: 'Inuktitut',\n  translationAvailable: false },\n\n{\n  label: 'Inupiak',\n  key: 'ik',\n  ISO639_3: 'ipk',\n  localized_label: 'Inupiaq',\n  translationAvailable: false },\n\n{\n  label: 'Irish',\n  key: 'ga',\n  ISO639_3: 'gle',\n  localized_label: 'Gaeilge',\n  translationAvailable: false },\n\n{\n  label: 'Italian',\n  key: 'it',\n  ISO639_3: 'ita',\n  localized_label: 'Italiano',\n  translationAvailable: false },\n\n{\n  label: 'Japanese',\n  key: 'ja',\n  ISO639_3: 'jpn',\n  localized_label: '',\n  translationAvailable: false },\n\n{\n  label: 'Javanese',\n  key: 'jv',\n  ISO639_3: 'jav',\n  localized_label: 'Jawa',\n  translationAvailable: false },\n\n{\n  label: 'Kalaallisut, Greenlandic',\n  key: 'kl',\n  ISO639_3: 'kal',\n  localized_label: 'Kalaallisut',\n  translationAvailable: false },\n\n{\n  label: 'Kannada',\n  key: 'kn',\n  ISO639_3: 'kan',\n  localized_label: '',\n  translationAvailable: false },\n\n{\n  label: 'Kanuri',\n  key: 'kr',\n  ISO639_3: 'kau',\n  localized_label: 'Kanuri',\n  translationAvailable: false },\n\n{\n  label: 'Kashmiri',\n  key: 'ks',\n  rtl: true,\n  ISO639_3: 'kas',\n  localized_label: '',\n  translationAvailable: false },\n\n{\n  label: 'Kazakh',\n  key: 'kk',\n  ISO639_3: 'kaz',\n  localized_label: ' ',\n  translationAvailable: false },\n\n{\n  label: 'Khmer',\n  key: 'km',\n  ISO639_3: 'khm',\n  localized_label: '',\n  translationAvailable: false },\n\n{\n  label: 'Kikuyu',\n  key: 'ki',\n  ISO639_3: 'kik',\n  localized_label: 'Gikuyu',\n  translationAvailable: false },\n\n{\n  label: 'Kinyarwanda (Rwanda)',\n  key: 'rw',\n  ISO639_3: 'kin',\n  localized_label: 'Kinyarwanda',\n  translationAvailable: false },\n\n{\n  label: 'Kirundi',\n  key: 'rn',\n  ISO639_3: 'run',\n  localized_label: 'Ikirundi',\n  translationAvailable: false },\n\n{\n  label: 'Kyrgyz',\n  key: 'ky',\n  ISO639_3: 'kir',\n  localized_label: '',\n  translationAvailable: false },\n\n{\n  label: 'Komi',\n  key: 'kv',\n  ISO639_3: 'kom',\n  localized_label: 'Komi',\n  translationAvailable: false },\n\n{\n  label: 'Kongo',\n  key: 'kg',\n  ISO639_3: 'kon',\n  localized_label: 'Kongo',\n  translationAvailable: false },\n\n{\n  label: 'Korean',\n  key: 'ko',\n  ISO639_3: 'kor',\n  localized_label: '',\n  translationAvailable: false },\n\n{\n  label: 'Kurdish',\n  key: 'ku',\n  rtl: true,\n  ISO639_3: 'kur',\n  localized_label: 'Kurd',\n  translationAvailable: false },\n\n{\n  label: 'Kwanyama',\n  key: 'kj',\n  ISO639_3: 'kua',\n  localized_label: 'Kuanyama',\n  translationAvailable: false },\n\n{\n  label: 'Lao',\n  key: 'lo',\n  ISO639_3: 'lao',\n  localized_label: '',\n  translationAvailable: false },\n\n{\n  label: 'Latin',\n  key: 'la',\n  ISO639_3: 'lat',\n  localized_label: 'Latin',\n  translationAvailable: false },\n\n{\n  label: 'Latvian (Lettish)',\n  key: 'lv',\n  ISO639_3: 'lav',\n  localized_label: 'Latvieu',\n  translationAvailable: false },\n\n{\n  label: 'Limburgish (Limburger)',\n  key: 'li',\n  ISO639_3: 'lim',\n  localized_label: 'Limburgish',\n  translationAvailable: false },\n\n{\n  label: 'Lingala',\n  key: 'ln',\n  ISO639_3: 'lin',\n  localized_label: 'Lingla',\n  translationAvailable: false },\n\n{\n  label: 'Lithuanian',\n  key: 'lt',\n  ISO639_3: 'lit',\n  localized_label: 'Lietuvi',\n  translationAvailable: false },\n\n{\n  label: 'Luga-Katanga',\n  key: 'lu',\n  ISO639_3: 'lub',\n  localized_label: 'Tshiluba',\n  translationAvailable: false },\n\n{\n  label: 'Luganda, Ganda',\n  key: 'lg',\n  ISO639_3: 'lug',\n  localized_label: 'Luganda',\n  translationAvailable: false },\n\n{\n  label: 'Luxembourgish',\n  key: 'lb',\n  ISO639_3: 'ltz',\n  localized_label: 'Ltzebuergesch',\n  translationAvailable: false },\n\n{\n  label: 'Macedonian',\n  key: 'mk',\n  ISO639_3: 'mkd',\n  localized_label: '',\n  translationAvailable: false },\n\n{\n  label: 'Malagasy',\n  key: 'mg',\n  ISO639_3: 'mlg',\n  localized_label: 'Malagasy',\n  translationAvailable: false },\n\n{\n  label: 'Malay',\n  key: 'ms',\n  ISO639_3: 'msa',\n  localized_label: 'Melayu',\n  translationAvailable: false },\n\n{\n  label: 'Malayalam',\n  key: 'ml',\n  ISO639_3: 'mal',\n  localized_label: '',\n  translationAvailable: false },\n\n{\n  label: 'Maltese',\n  key: 'mt',\n  ISO639_3: 'mlt',\n  localized_label: 'Malti',\n  translationAvailable: false },\n\n{\n  label: 'Maori',\n  key: 'mi',\n  ISO639_3: 'mri',\n  localized_label: 'Te reo Mori',\n  translationAvailable: false },\n\n{\n  label: 'Marathi',\n  key: 'mr',\n  ISO639_3: 'mar',\n  localized_label: '',\n  translationAvailable: false },\n\n{\n  label: 'Marshallese',\n  key: 'mh',\n  ISO639_3: 'mah',\n  localized_label: 'Marshallese',\n  translationAvailable: false },\n\n{\n  label: 'Mongolian',\n  key: 'mn',\n  ISO639_3: 'mon',\n  localized_label: '',\n  translationAvailable: false },\n\n{\n  label: 'Nauru',\n  key: 'na',\n  ISO639_3: 'nau',\n  localized_label: 'Nauru',\n  translationAvailable: false },\n\n{\n  label: 'Navajo',\n  key: 'nv',\n  ISO639_3: 'nav',\n  localized_label: 'Navajo',\n  translationAvailable: false },\n\n{\n  label: 'Ndonga',\n  key: 'ng',\n  ISO639_3: 'ndo',\n  localized_label: 'Ndonga',\n  translationAvailable: false },\n\n{\n  label: 'Northern Ndebele',\n  key: 'nd',\n  ISO639_3: 'nde',\n  localized_label: 'IsiNdebele',\n  translationAvailable: false },\n\n{\n  label: 'Nepali',\n  key: 'ne',\n  ISO639_3: 'nep',\n  localized_label: '',\n  translationAvailable: false },\n\n{\n  label: 'Norwegian',\n  key: 'no',\n  ISO639_3: 'nor',\n  localized_label: 'Norsk',\n  translationAvailable: false },\n\n{\n  label: 'Norwegian bokml',\n  key: 'nb',\n  ISO639_3: 'nob',\n  localized_label: 'Norsk bokml',\n  translationAvailable: false },\n\n{\n  label: 'Norwegian nynorsk',\n  key: 'nn',\n  ISO639_3: 'nno',\n  localized_label: 'Norsk nynorsk',\n  translationAvailable: false },\n\n{\n  label: 'Occitan',\n  key: 'oc',\n  ISO639_3: 'oci',\n  localized_label: 'Occitan',\n  translationAvailable: false },\n\n{\n  label: 'Ojibwe',\n  key: 'oj',\n  ISO639_3: 'oji',\n  localized_label: 'Ojibwa',\n  translationAvailable: false },\n\n{\n  label: 'Old Church Slavonic, Old Bulgarian',\n  key: 'cu',\n  ISO639_3: 'chu',\n  localized_label: 'Church Slavic',\n  translationAvailable: false },\n\n{\n  label: 'Oriya',\n  key: 'or',\n  ISO639_3: 'ori',\n  localized_label: '',\n  translationAvailable: false },\n\n{\n  label: 'Oromo (Afaan Oromo)',\n  key: 'om',\n  ISO639_3: 'orm',\n  localized_label: 'Oromoo',\n  translationAvailable: false },\n\n{\n  label: 'Ossetian',\n  key: 'os',\n  ISO639_3: 'oss',\n  localized_label: '',\n  translationAvailable: false },\n\n{\n  label: 'Pli',\n  key: 'pi',\n  ISO639_3: 'pli',\n  localized_label: 'Pali',\n  translationAvailable: false },\n\n{\n  label: 'Pashto, Pushto',\n  key: 'ps',\n  rtl: true,\n  ISO639_3: 'pus',\n  localized_label: '',\n  translationAvailable: false },\n\n{\n  label: 'Persian (Farsi)',\n  key: 'fa',\n  rtl: true,\n  ISO639_3: 'fas',\n  localized_label: '',\n  translationAvailable: false },\n\n{\n  label: 'Polish',\n  key: 'pl',\n  ISO639_3: 'pol',\n  localized_label: 'Polski',\n  translationAvailable: false },\n\n{\n  label: 'Portuguese',\n  key: 'pt',\n  ISO639_3: 'por',\n  localized_label: 'Portugus',\n  translationAvailable: false },\n\n{\n  label: 'Punjabi (Eastern)',\n  key: 'pa',\n  ISO639_3: 'pan',\n  localized_label: '',\n  translationAvailable: false },\n\n{\n  label: 'Quechua',\n  key: 'qu',\n  ISO639_3: 'que',\n  localized_label: 'Runasimi',\n  translationAvailable: false },\n\n{\n  label: 'Romansh',\n  key: 'rm',\n  ISO639_3: 'roh',\n  localized_label: 'Rumantsch',\n  translationAvailable: false },\n\n{\n  label: 'Romanian/Moldavian',\n  key: 'ro',\n  ISO639_3: 'ron',\n  localized_label: 'Romn',\n  translationAvailable: false },\n\n{\n  label: 'Russian',\n  key: 'ru',\n  ISO639_3: 'rus',\n  localized_label: '',\n  translationAvailable: true },\n\n{\n  label: 'Sami',\n  key: 'se',\n  ISO639_3: 'sme',\n  localized_label: 'Davvismegiella',\n  translationAvailable: false },\n\n{\n  label: 'Samoan',\n  key: 'sm',\n  ISO639_3: 'smo',\n  localized_label: 'Samoan',\n  translationAvailable: false },\n\n{\n  label: 'Sango',\n  key: 'sg',\n  ISO639_3: 'sag',\n  localized_label: 'Sng',\n  translationAvailable: false },\n\n{\n  label: 'Sanskrit',\n  key: 'sa',\n  ISO639_3: 'san',\n  localized_label: ' ',\n  translationAvailable: false },\n\n{\n  label: 'Serbian',\n  key: 'sr',\n  ISO639_3: 'srp',\n  localized_label: '',\n  translationAvailable: false },\n\n{\n  label: 'Serbo-Croatian',\n  key: 'sh',\n  ISO639_3: 'hbs',\n  localized_label: 'Srpski (latinica)',\n  translationAvailable: false },\n\n{\n  label: 'Sesotho',\n  key: 'st',\n  ISO639_3: 'sot',\n  localized_label: 'Southern Sotho',\n  translationAvailable: false },\n\n{\n  label: 'Setswana',\n  key: 'tn',\n  ISO639_3: 'tsn',\n  localized_label: 'Tswana',\n  translationAvailable: false },\n\n{\n  label: 'Shona',\n  key: 'sn',\n  ISO639_3: 'sna',\n  localized_label: 'ChiShona',\n  translationAvailable: false },\n\n{\n  label: 'Sichuan Yi, Nuosu',\n  key: 'ii',\n  ISO639_3: 'iii',\n  localized_label: '',\n  translationAvailable: false },\n\n{\n  label: 'Sindhi',\n  key: 'sd',\n  ISO639_3: 'snd',\n  localized_label: '',\n  translationAvailable: false },\n\n{\n  label: 'Sinhalese',\n  key: 'si',\n  ISO639_3: 'sin',\n  localized_label: '',\n  translationAvailable: false },\n\n{\n  label: 'Siswati, Swati',\n  key: 'ss',\n  ISO639_3: 'ssw',\n  localized_label: 'Swati',\n  translationAvailable: false },\n\n{\n  label: 'Slovak',\n  key: 'sk',\n  ISO639_3: 'slk',\n  localized_label: 'Slovenina',\n  translationAvailable: false },\n\n{\n  label: 'Slovenian',\n  key: 'sl',\n  ISO639_3: 'slv',\n  localized_label: 'Slovenina',\n  translationAvailable: false },\n\n{\n  label: 'Somali',\n  key: 'so',\n  ISO639_3: 'som',\n  localized_label: 'Soomaali',\n  translationAvailable: false },\n\n{\n  label: 'Southern Ndebele',\n  key: 'nr',\n  ISO639_3: 'nbl',\n  localized_label: 'South Ndebele',\n  translationAvailable: false },\n\n{\n  label: 'Spanish',\n  key: 'es',\n  ISO639_3: 'spa',\n  localized_label: 'Espaol',\n  translationAvailable: true },\n\n{\n  label: 'Sundanese',\n  key: 'su',\n  ISO639_3: 'sun',\n  localized_label: 'Basa Sunda',\n  translationAvailable: false },\n\n{\n  label: 'Swahili (Kiswahili)',\n  key: 'sw',\n  ISO639_3: 'swa',\n  localized_label: 'Kiswahili',\n  translationAvailable: false },\n\n{\n  label: 'Swedish',\n  key: 'sv',\n  ISO639_3: 'swe',\n  localized_label: 'Svenska',\n  translationAvailable: false },\n\n{\n  label: 'Tagalog',\n  key: 'tl',\n  ISO639_3: 'tgl',\n  localized_label: 'Filipino',\n  translationAvailable: false },\n\n{\n  label: 'Tahitian',\n  key: 'ty',\n  ISO639_3: 'tah',\n  localized_label: 'Tahitian',\n  translationAvailable: false },\n\n{\n  label: 'Tajik',\n  key: 'tg',\n  ISO639_3: 'tgk',\n  localized_label: '',\n  translationAvailable: false },\n\n{\n  label: 'Tamil',\n  key: 'ta',\n  ISO639_3: 'tam',\n  localized_label: '',\n  translationAvailable: false },\n\n{\n  label: 'Tatar',\n  key: 'tt',\n  ISO639_3: 'tat',\n  localized_label: '',\n  translationAvailable: false },\n\n{\n  label: 'Telugu',\n  key: 'te',\n  ISO639_3: 'tel',\n  localized_label: '',\n  translationAvailable: false },\n\n{\n  label: 'Thai',\n  key: 'th',\n  ISO639_3: 'tha',\n  localized_label: '',\n  translationAvailable: true },\n\n{\n  label: 'Tibetan',\n  key: 'bo',\n  ISO639_3: 'bod',\n  localized_label: '',\n  translationAvailable: false },\n\n{\n  label: 'Tigrinya',\n  key: 'ti',\n  ISO639_3: 'tir',\n  localized_label: '',\n  translationAvailable: false },\n\n{\n  label: 'Tonga',\n  key: 'to',\n  ISO639_3: 'ton',\n  localized_label: 'Lea fakatonga',\n  translationAvailable: false },\n\n{\n  label: 'Tsonga',\n  key: 'ts',\n  ISO639_3: 'tso',\n  localized_label: 'Tsonga',\n  translationAvailable: false },\n\n{\n  label: 'Turkish',\n  key: 'tr',\n  ISO639_3: 'tur',\n  localized_label: 'Trke',\n  translationAvailable: false },\n\n{\n  label: 'Turkmen',\n  key: 'tk',\n  ISO639_3: 'tuk',\n  localized_label: 'Trkmen dili',\n  translationAvailable: false },\n\n{\n  label: 'Twi',\n  key: 'tw',\n  ISO639_3: 'twi',\n  localized_label: 'Akan',\n  translationAvailable: false },\n\n{\n  label: 'Uyghur',\n  key: 'ug',\n  ISO639_3: 'uig',\n  localized_label: '',\n  translationAvailable: false },\n\n{\n  label: 'Ukrainian',\n  key: 'uk',\n  ISO639_3: 'ukr',\n  localized_label: '',\n  translationAvailable: false },\n\n{\n  label: 'Urdu',\n  key: 'ur',\n  rtl: true,\n  ISO639_3: 'urd',\n  localized_label: '',\n  translationAvailable: false },\n\n{\n  label: 'Uzbek',\n  key: 'uz',\n  ISO639_3: 'uzb',\n  localized_label: 'Ozbek',\n  translationAvailable: false },\n\n{\n  label: 'Venda',\n  key: 've',\n  ISO639_3: 'ven',\n  localized_label: 'Venda',\n  translationAvailable: false },\n\n{\n  label: 'Vietnamese',\n  key: 'vi',\n  ISO639_3: 'vie',\n  localized_label: 'Ting Vit',\n  translationAvailable: false },\n\n{\n  label: 'Volapk',\n  key: 'vo',\n  ISO639_3: 'vol',\n  localized_label: 'Volapk',\n  translationAvailable: false },\n\n{\n  label: 'Wallon',\n  key: 'wa',\n  ISO639_3: 'wln',\n  localized_label: 'Walloon',\n  translationAvailable: false },\n\n{\n  label: 'Welsh',\n  key: 'cy',\n  ISO639_3: 'cym',\n  localized_label: 'Cymraeg',\n  translationAvailable: false },\n\n{\n  label: 'Wolof',\n  key: 'wo',\n  ISO639_3: 'wol',\n  localized_label: 'Wolof',\n  translationAvailable: false },\n\n{\n  label: 'Western Frisian',\n  key: 'fy',\n  ISO639_3: 'fry',\n  localized_label: 'Frysk',\n  translationAvailable: false },\n\n{\n  label: 'Xhosa',\n  key: 'xh',\n  ISO639_3: 'xho',\n  localized_label: 'IsiXhosa',\n  translationAvailable: false },\n\n{\n  label: 'Yiddish',\n  key: 'yi',\n  rtl: true,\n  ISO639_3: 'yid',\n  localized_label: '',\n  translationAvailable: false },\n\n{\n  label: 'Yoruba',\n  key: 'yo',\n  ISO639_3: 'yor',\n  localized_label: 'd Yorb',\n  translationAvailable: false },\n\n{\n  label: 'Zhuang, Chuang',\n  key: 'za',\n  ISO639_3: 'zha',\n  localized_label: 'Zhuang',\n  translationAvailable: false },\n\n{\n  label: 'Zulu',\n  key: 'zu',\n  ISO639_3: 'zul',\n  localized_label: 'IsiZulu',\n  translationAvailable: false }];\n\n\n\nconst language = (key, purpose = 'elastic') => {\n  const defaultValue = purpose !== 'ISO639_1' ? 'other' : null;\n  return elasticLanguages[key] ? elasticLanguages[key][purpose] : defaultValue;\n};\n\nexport { elasticLanguages, availableLanguages, language };","const propertyTypes = {\n  date: 'date',\n  daterange: 'daterange',\n  geolocation: 'geolocation',\n  image: 'image',\n  link: 'link',\n  markdown: 'markdown',\n  media: 'media',\n  multidate: 'multidate',\n  multidaterange: 'multidaterange',\n  multiselect: 'multiselect',\n  nested: 'nested',\n  numeric: 'numeric',\n  preview: 'preview',\n  relationship: 'relationship',\n  select: 'select',\n  text: 'text',\n  generatedid: 'generatedid' };\n\n\nfunction getCompatibleTypes(type) {\n  switch (type) {\n    case propertyTypes.date:\n    case propertyTypes.multidate:\n      return [propertyTypes.date, propertyTypes.multidate];\n    case propertyTypes.daterange:\n    case propertyTypes.multidaterange:\n      return [propertyTypes.daterange, propertyTypes.multidaterange];\n    case propertyTypes.select:\n    case propertyTypes.multiselect:\n      return [propertyTypes.select, propertyTypes.multiselect];\n    case propertyTypes.text:\n    case propertyTypes.markdown:\n      return [propertyTypes.text, propertyTypes.markdown];\n\n    default:\n      return [type];}\n\n}\n\nexport { propertyTypes, getCompatibleTypes };","/* eslint-disable @typescript-eslint/no-floating-promises */\nimport { APIURL } from \"../react/config\";\nimport superagent from 'superagent';\n\n\n\n\n\nexport async function httpRequest(\nendpoint,\nfields,\nheaders,\nfile)\n{\n  return new Promise((resolve, reject) => {\n    const req = superagent.post(`${APIURL}${endpoint}`);\n\n    Object.keys(headers).forEach((headerKey) => {\n      req.set(headerKey, headers[headerKey]);\n    });\n\n    Object.keys(fields).forEach((fieldKey) => {\n      req.field(fieldKey, fields[fieldKey]);\n    });\n\n    if (file) {\n      req.attach('file', file, file.name);\n    }\n\n    req.\n    on('response', (response) => {\n      const data = JSON.parse(response.text);\n      if (response.status === 200) {\n        resolve(data);\n      } else {\n        reject(data);\n      }\n    }).\n    end();\n  });\n}","import util from 'util';\nimport { isObject, isString } from 'lodash';\nimport ValidationError from 'ajv/dist/runtime/validation_error';\n\n\nexport const isBlobFile = (file) =>\nisObject(file) && isString(file.data);\n\n// Thanks to https://stackoverflow.com/questions/54738221/typescript-array-find-possibly-undefind\nexport function ensure(argument, message) {\n  if (argument === undefined || argument === null || !argument) {\n    throw new TypeError(message || 'Promised type was not provided!');\n  }\n\n  return argument;\n}\n\nexport function wrapValidator(validator) {\n  return async (value) => {\n    try {\n      return validator(value);\n    } catch (error) {\n      if (error) {\n        const e = new ValidationError(error.errors);\n        e.message = util.inspect(error, false, null);\n        e.stack = error.stack;\n        throw e;\n      }\n      throw error;\n    }\n  };\n}\n\nexport async function sleep(ms) {\n  return new Promise((resolve) => {\n    setTimeout(resolve, ms);\n  });\n}","const provenanceTypes = {\n  empty: '',\n  bulk: 'BULK_ACCEPT' };\n\n\nexport { provenanceTypes };","import { propertyTypes } from \"../propertyTypes\";\nimport { provenanceTypes } from \"../provenanceTypes\";\n\nexport const emitSchemaTypes = true;\n\nexport const objectIdSchema = {\n  oneOf: [\n  { type: 'string' },\n  {\n    type: 'object',\n    tsType: 'ObjectId' }] };\n\n\n\n\nexport const attachmentSchema = {\n  type: 'object',\n  properties: {\n    _id: objectIdSchema,\n    originalname: { type: 'string' },\n    filename: { type: 'string' },\n    mimetype: { type: 'string' },\n    url: { type: 'string' },\n    timestamp: { type: 'number' },\n    size: { type: 'number' } } };\n\n\n\nexport const linkSchema = {\n  type: 'object',\n  additionalProperties: false,\n  properties: {\n    label: { oneOf: [{ type: 'string' }, { type: 'null' }] },\n    url: { oneOf: [{ type: 'string' }, { type: 'null' }] } } };\n\n\n\nexport const dateRangeSchema = {\n  type: 'object',\n  additionalProperties: false,\n  properties: {\n    from: { oneOf: [{ type: 'number' }, { type: 'null' }] },\n    to: { oneOf: [{ type: 'number' }, { type: 'null' }] } } };\n\n\n\nexport const languageSchema = {\n  type: 'object',\n  required: ['key', 'label'],\n  additionalProperties: false,\n  properties: {\n    _id: objectIdSchema,\n    label: { type: 'string' },\n    key: { type: 'string' },\n    rtl: { type: 'boolean' },\n    default: { type: 'boolean' },\n    ISO639_3: { type: 'string' },\n    localized_label: { type: 'string' },\n    translationAvailable: { type: 'boolean' } } };\n\n\n\nexport const languagesListSchema = {\n  type: 'array',\n  items: languageSchema };\n\n\nexport const latLonSchema = {\n  type: 'object',\n  required: ['lon', 'lat'],\n  additionalProperties: false,\n  properties: {\n    label: { type: 'string' },\n    lat: { type: 'number', minimum: -90, maximum: 90 },\n    lon: { type: 'number', minimum: -180, maximum: 180 } } };\n\n\n\nexport const geolocationSchema = {\n  type: 'array',\n  items: latLonSchema };\n\n\nexport const propertyValueSchema = {\n  definitions: { linkSchema, dateRangeSchema, latLonSchema },\n  oneOf: [\n  { type: 'null' },\n  { type: 'string' },\n  { type: 'number' },\n  { type: 'boolean' },\n  linkSchema,\n  dateRangeSchema,\n  latLonSchema,\n  geolocationSchema] };\n\n\n\nexport const inheritedValueSchema = {\n  type: 'object',\n  required: ['value'],\n  properties: {\n    value: propertyValueSchema,\n    label: { type: 'string' } } };\n\n\n\nexport const metadataObjectSchema = {\n  type: 'object',\n  definitions: { propertyValueSchema },\n  required: ['value'],\n  properties: {\n    value: propertyValueSchema,\n    attachment: { type: 'number' },\n    label: { type: 'string' },\n    suggestion_confidence: { type: 'number' },\n    suggestion_model: { type: 'string' },\n    provenance: { type: 'string', enum: Object.values(provenanceTypes) },\n    inheritedValue: { type: 'array', items: inheritedValueSchema },\n    inheritedType: { type: 'string' } } };\n\n\n\nexport const metadataSchema = {\n  type: 'object',\n  definitions: { metadataObjectSchema },\n  additionalProperties: {\n    anyOf: [{ type: 'array', items: metadataObjectSchema }] },\n\n  patternProperties: {\n    '^.*_nested$': { type: 'array', items: { type: 'object' } } } };\n\n\n\nexport const selectionRectangleSchema = {\n  type: 'object',\n  additionalProperties: false,\n  properties: {\n    top: { type: 'number' },\n    left: { type: 'number' },\n    width: { type: 'number' },\n    height: { type: 'number' },\n    page: { type: 'string' } } };\n\n\n\nexport const selectionRectanglesSchema = {\n  type: 'array',\n  items: selectionRectangleSchema };\n\n\nexport const tocSchema = {\n  type: 'object',\n  additionalProperties: false,\n  properties: {\n    selectionRectangles: selectionRectanglesSchema,\n    label: { type: 'string' },\n    indentation: { type: 'number' } } };\n\n\n\nexport const extractedMetadataSchema = {\n  type: 'object',\n  additionalProperties: false,\n  properties: {\n    propertyID: { type: 'string' },\n    name: { type: 'string' },\n    timestamp: { type: 'string' },\n    deleteSelection: { type: 'boolean' },\n    selection: {\n      type: 'object',\n      additionalProperties: false,\n      properties: {\n        text: { type: 'string' },\n        selectionRectangles: selectionRectanglesSchema } } } };\n\n\n\n\n\nexport const propertySchema = {\n  type: 'object',\n  required: ['label', 'type', 'name'],\n  additionalProperties: false,\n  requireOrInvalidContentForSelectFields: true,\n  requireRelationTypeForRelationship: true,\n  definitions: { objectIdSchema },\n  properties: {\n    _id: objectIdSchema,\n    label: { type: 'string', minLength: 1 },\n    name: { type: 'string', minLength: 1 },\n    isCommonProperty: { type: 'boolean' },\n    type: { type: 'string', enum: Object.values(propertyTypes) },\n    prioritySorting: { type: 'boolean' },\n    generatedId: { type: 'boolean' },\n    content: { type: 'string' },\n    relationType: { type: 'string' },\n    inherit: {\n      type: 'object',\n      additionalProperties: false,\n      properties: {\n        property: { type: 'string' },\n        type: { type: 'string', enum: Object.values(propertyTypes) } } },\n\n\n    filter: { type: 'boolean' },\n    noLabel: { type: 'boolean' },\n    fullWidth: { type: 'boolean' },\n    defaultfilter: { type: 'boolean' },\n    required: { type: 'boolean' },\n    sortable: { type: 'boolean' },\n    showInCard: { type: 'boolean' },\n    style: { type: 'string' },\n    nestedProperties: {\n      type: 'array',\n      items: {\n        type: 'string' } } } };","Math.uniqueID = () => Math.random().toString(36).substr(2);\n\nexport default function () {\n  return Math.uniqueID();\n}\n\nexport function mockID(uniqueID = 'unique_id') {\n  spyOn(Math, 'uniqueID').and.returnValue(uniqueID);\n}","var map = {\n\t\"./af\": 42786,\n\t\"./af.js\": 42786,\n\t\"./ar\": 30867,\n\t\"./ar-dz\": 14130,\n\t\"./ar-dz.js\": 14130,\n\t\"./ar-kw\": 96135,\n\t\"./ar-kw.js\": 96135,\n\t\"./ar-ly\": 56440,\n\t\"./ar-ly.js\": 56440,\n\t\"./ar-ma\": 47702,\n\t\"./ar-ma.js\": 47702,\n\t\"./ar-sa\": 16040,\n\t\"./ar-sa.js\": 16040,\n\t\"./ar-tn\": 37100,\n\t\"./ar-tn.js\": 37100,\n\t\"./ar.js\": 30867,\n\t\"./az\": 31083,\n\t\"./az.js\": 31083,\n\t\"./be\": 9808,\n\t\"./be.js\": 9808,\n\t\"./bg\": 68338,\n\t\"./bg.js\": 68338,\n\t\"./bm\": 67438,\n\t\"./bm.js\": 67438,\n\t\"./bn\": 8905,\n\t\"./bn-bd\": 76225,\n\t\"./bn-bd.js\": 76225,\n\t\"./bn.js\": 8905,\n\t\"./bo\": 11560,\n\t\"./bo.js\": 11560,\n\t\"./br\": 1278,\n\t\"./br.js\": 1278,\n\t\"./bs\": 80622,\n\t\"./bs.js\": 80622,\n\t\"./ca\": 2468,\n\t\"./ca.js\": 2468,\n\t\"./cs\": 5822,\n\t\"./cs.js\": 5822,\n\t\"./cv\": 50877,\n\t\"./cv.js\": 50877,\n\t\"./cy\": 47373,\n\t\"./cy.js\": 47373,\n\t\"./da\": 24780,\n\t\"./da.js\": 24780,\n\t\"./de\": 59740,\n\t\"./de-at\": 60217,\n\t\"./de-at.js\": 60217,\n\t\"./de-ch\": 60894,\n\t\"./de-ch.js\": 60894,\n\t\"./de.js\": 59740,\n\t\"./dv\": 5300,\n\t\"./dv.js\": 5300,\n\t\"./el\": 50837,\n\t\"./el.js\": 50837,\n\t\"./en-au\": 78348,\n\t\"./en-au.js\": 78348,\n\t\"./en-ca\": 77925,\n\t\"./en-ca.js\": 77925,\n\t\"./en-gb\": 22243,\n\t\"./en-gb.js\": 22243,\n\t\"./en-ie\": 46436,\n\t\"./en-ie.js\": 46436,\n\t\"./en-il\": 47207,\n\t\"./en-il.js\": 47207,\n\t\"./en-in\": 44175,\n\t\"./en-in.js\": 44175,\n\t\"./en-nz\": 76319,\n\t\"./en-nz.js\": 76319,\n\t\"./en-sg\": 31662,\n\t\"./en-sg.js\": 31662,\n\t\"./eo\": 92915,\n\t\"./eo.js\": 92915,\n\t\"./es\": 55655,\n\t\"./es-do\": 55251,\n\t\"./es-do.js\": 55251,\n\t\"./es-mx\": 96112,\n\t\"./es-mx.js\": 96112,\n\t\"./es-us\": 71146,\n\t\"./es-us.js\": 71146,\n\t\"./es.js\": 55655,\n\t\"./et\": 5603,\n\t\"./et.js\": 5603,\n\t\"./eu\": 77763,\n\t\"./eu.js\": 77763,\n\t\"./fa\": 76959,\n\t\"./fa.js\": 76959,\n\t\"./fi\": 11897,\n\t\"./fi.js\": 11897,\n\t\"./fil\": 42549,\n\t\"./fil.js\": 42549,\n\t\"./fo\": 94694,\n\t\"./fo.js\": 94694,\n\t\"./fr\": 94470,\n\t\"./fr-ca\": 63049,\n\t\"./fr-ca.js\": 63049,\n\t\"./fr-ch\": 52330,\n\t\"./fr-ch.js\": 52330,\n\t\"./fr.js\": 94470,\n\t\"./fy\": 5044,\n\t\"./fy.js\": 5044,\n\t\"./ga\": 29295,\n\t\"./ga.js\": 29295,\n\t\"./gd\": 2101,\n\t\"./gd.js\": 2101,\n\t\"./gl\": 38794,\n\t\"./gl.js\": 38794,\n\t\"./gom-deva\": 27884,\n\t\"./gom-deva.js\": 27884,\n\t\"./gom-latn\": 23168,\n\t\"./gom-latn.js\": 23168,\n\t\"./gu\": 95349,\n\t\"./gu.js\": 95349,\n\t\"./he\": 24206,\n\t\"./he.js\": 24206,\n\t\"./hi\": 30094,\n\t\"./hi.js\": 30094,\n\t\"./hr\": 30316,\n\t\"./hr.js\": 30316,\n\t\"./hu\": 22138,\n\t\"./hu.js\": 22138,\n\t\"./hy-am\": 11423,\n\t\"./hy-am.js\": 11423,\n\t\"./id\": 29218,\n\t\"./id.js\": 29218,\n\t\"./is\": 90135,\n\t\"./is.js\": 90135,\n\t\"./it\": 90626,\n\t\"./it-ch\": 10150,\n\t\"./it-ch.js\": 10150,\n\t\"./it.js\": 90626,\n\t\"./ja\": 39183,\n\t\"./ja.js\": 39183,\n\t\"./jv\": 24286,\n\t\"./jv.js\": 24286,\n\t\"./ka\": 12105,\n\t\"./ka.js\": 12105,\n\t\"./kk\": 47772,\n\t\"./kk.js\": 47772,\n\t\"./km\": 18758,\n\t\"./km.js\": 18758,\n\t\"./kn\": 79282,\n\t\"./kn.js\": 79282,\n\t\"./ko\": 33730,\n\t\"./ko.js\": 33730,\n\t\"./ku\": 1408,\n\t\"./ku.js\": 1408,\n\t\"./ky\": 33291,\n\t\"./ky.js\": 33291,\n\t\"./lb\": 36841,\n\t\"./lb.js\": 36841,\n\t\"./lo\": 55466,\n\t\"./lo.js\": 55466,\n\t\"./lt\": 57010,\n\t\"./lt.js\": 57010,\n\t\"./lv\": 37595,\n\t\"./lv.js\": 37595,\n\t\"./me\": 39861,\n\t\"./me.js\": 39861,\n\t\"./mi\": 35493,\n\t\"./mi.js\": 35493,\n\t\"./mk\": 95966,\n\t\"./mk.js\": 95966,\n\t\"./ml\": 87341,\n\t\"./ml.js\": 87341,\n\t\"./mn\": 5115,\n\t\"./mn.js\": 5115,\n\t\"./mr\": 10370,\n\t\"./mr.js\": 10370,\n\t\"./ms\": 9847,\n\t\"./ms-my\": 41237,\n\t\"./ms-my.js\": 41237,\n\t\"./ms.js\": 9847,\n\t\"./mt\": 72126,\n\t\"./mt.js\": 72126,\n\t\"./my\": 56165,\n\t\"./my.js\": 56165,\n\t\"./nb\": 64924,\n\t\"./nb.js\": 64924,\n\t\"./ne\": 16744,\n\t\"./ne.js\": 16744,\n\t\"./nl\": 93901,\n\t\"./nl-be\": 59814,\n\t\"./nl-be.js\": 59814,\n\t\"./nl.js\": 93901,\n\t\"./nn\": 83877,\n\t\"./nn.js\": 83877,\n\t\"./oc-lnc\": 92135,\n\t\"./oc-lnc.js\": 92135,\n\t\"./pa-in\": 15858,\n\t\"./pa-in.js\": 15858,\n\t\"./pl\": 64495,\n\t\"./pl.js\": 64495,\n\t\"./pt\": 89520,\n\t\"./pt-br\": 57971,\n\t\"./pt-br.js\": 57971,\n\t\"./pt.js\": 89520,\n\t\"./ro\": 96459,\n\t\"./ro.js\": 96459,\n\t\"./ru\": 21793,\n\t\"./ru.js\": 21793,\n\t\"./sd\": 40950,\n\t\"./sd.js\": 40950,\n\t\"./se\": 10490,\n\t\"./se.js\": 10490,\n\t\"./si\": 90124,\n\t\"./si.js\": 90124,\n\t\"./sk\": 64249,\n\t\"./sk.js\": 64249,\n\t\"./sl\": 14985,\n\t\"./sl.js\": 14985,\n\t\"./sq\": 51104,\n\t\"./sq.js\": 51104,\n\t\"./sr\": 49131,\n\t\"./sr-cyrl\": 79915,\n\t\"./sr-cyrl.js\": 79915,\n\t\"./sr.js\": 49131,\n\t\"./ss\": 85893,\n\t\"./ss.js\": 85893,\n\t\"./sv\": 98760,\n\t\"./sv.js\": 98760,\n\t\"./sw\": 91172,\n\t\"./sw.js\": 91172,\n\t\"./ta\": 27333,\n\t\"./ta.js\": 27333,\n\t\"./te\": 23110,\n\t\"./te.js\": 23110,\n\t\"./tet\": 52095,\n\t\"./tet.js\": 52095,\n\t\"./tg\": 27321,\n\t\"./tg.js\": 27321,\n\t\"./th\": 9041,\n\t\"./th.js\": 9041,\n\t\"./tk\": 19005,\n\t\"./tk.js\": 19005,\n\t\"./tl-ph\": 75768,\n\t\"./tl-ph.js\": 75768,\n\t\"./tlh\": 89444,\n\t\"./tlh.js\": 89444,\n\t\"./tr\": 72397,\n\t\"./tr.js\": 72397,\n\t\"./tzl\": 28254,\n\t\"./tzl.js\": 28254,\n\t\"./tzm\": 51106,\n\t\"./tzm-latn\": 30699,\n\t\"./tzm-latn.js\": 30699,\n\t\"./tzm.js\": 51106,\n\t\"./ug-cn\": 9288,\n\t\"./ug-cn.js\": 9288,\n\t\"./uk\": 67691,\n\t\"./uk.js\": 67691,\n\t\"./ur\": 13795,\n\t\"./ur.js\": 13795,\n\t\"./uz\": 6791,\n\t\"./uz-latn\": 60588,\n\t\"./uz-latn.js\": 60588,\n\t\"./uz.js\": 6791,\n\t\"./vi\": 65666,\n\t\"./vi.js\": 65666,\n\t\"./x-pseudo\": 14378,\n\t\"./x-pseudo.js\": 14378,\n\t\"./yo\": 75805,\n\t\"./yo.js\": 75805,\n\t\"./zh-cn\": 83839,\n\t\"./zh-cn.js\": 83839,\n\t\"./zh-hk\": 55726,\n\t\"./zh-hk.js\": 55726,\n\t\"./zh-mo\": 99807,\n\t\"./zh-mo.js\": 99807,\n\t\"./zh-tw\": 74152,\n\t\"./zh-tw.js\": 74152\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 46700;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","__webpack_require__.amdO = {};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.f = {};\n// This file contains only the entry chunk.\n// The chunk loading function for additional chunks\n__webpack_require__.e = (chunkId) => {\n\treturn Promise.all(Object.keys(__webpack_require__.f).reduce((promises, key) => {\n\t\t__webpack_require__.f[key](chunkId, promises);\n\t\treturn promises;\n\t}, []));\n};","// This function allow to reference async chunks\n__webpack_require__.u = (chunkId) => {\n\t// return url for filenames based on template\n\treturn \"\" + ({\"155\":\"LazyLoadListChart\",\"181\":\"LazyLoadFreeBarChart\",\"192\":\"LazyLoadPieChart\",\"221\":\"LazyLoadStackedDualBarChart\",\"317\":\"LazyLoadColoredBar\",\"418\":\"LazyLoadGaugeChart\",\"555\":\"LazyLoadPie\",\"593\":\"LazyLoadMap\",\"644\":\"LazyLoadBar\",\"736\":\"LazyLoadBarChart\",\"741\":\"LazyLoadPDFPage\",\"809\":\"LazyLoadSlideshow\",\"852\":\"LazyLoadPDF\"}[chunkId] || chunkId) + \".\" + {\"29\":\"b3ba36ac985533c11418\",\"155\":\"5991cc72d2123cfd8bf2\",\"157\":\"6491004f353a17e9b28a\",\"181\":\"8c3a42598da2eba839de\",\"192\":\"0942015731ed36545016\",\"221\":\"ca9680708052d6d8018e\",\"317\":\"60c982be4c02536cbdac\",\"352\":\"98e29d3906e43ec3db83\",\"418\":\"09bb063c5d372d9f7325\",\"481\":\"36e2e4774eca141e07af\",\"555\":\"5c5587b1141e62d1bd0c\",\"593\":\"f45df41f8b430344c094\",\"644\":\"9e57012606bff27b7d31\",\"736\":\"d2a45b677bd3b2f65601\",\"741\":\"c32af4ccf4909bc19c60\",\"809\":\"a267839b5c984239093d\",\"843\":\"a2f7c76a766febf33d59\",\"852\":\"8f8bcbea39be3aa6ba49\",\"931\":\"6f020484f555a6fae296\"}[chunkId] + \".bundle.js\";\n};","// This function allow to reference async chunks\n__webpack_require__.miniCssF = (chunkId) => {\n\t// return url for filenames based on template\n\treturn \"\" + {\"593\":\"LazyLoadMap\",\"741\":\"LazyLoadPDFPage\",\"809\":\"LazyLoadSlideshow\",\"852\":\"LazyLoadPDF\"}[chunkId] + \".\" + {\"593\":\"f45df41f8b430344c094\",\"741\":\"c32af4ccf4909bc19c60\",\"809\":\"a267839b5c984239093d\",\"852\":\"8f8bcbea39be3aa6ba49\"}[chunkId] + \".css\";\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.hmd = (module) => {\n\tmodule = Object.create(module);\n\tif (!module.children) module.children = [];\n\tObject.defineProperty(module, 'exports', {\n\t\tenumerable: true,\n\t\tset: () => {\n\t\t\tthrow new Error('ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: ' + module.id);\n\t\t}\n\t});\n\treturn module;\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.nmd = (module) => {\n\tmodule.paths = [];\n\tif (!module.children) module.children = [];\n\treturn module;\n};","__webpack_require__.j = 179;","__webpack_require__.p = \"/\";","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t179: 0\n};\n\n__webpack_require__.f.j = (chunkId, promises) => {\n\t\t// JSONP chunk loading for javascript\n\t\tvar installedChunkData = __webpack_require__.o(installedChunks, chunkId) ? installedChunks[chunkId] : undefined;\n\t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n\t\t\t// a Promise means \"currently loading\".\n\t\t\tif(installedChunkData) {\n\t\t\t\tpromises.push(installedChunkData[2]);\n\t\t\t} else {\n\t\t\t\tif(true) { // all chunks have JS\n\t\t\t\t\t// setup Promise in chunk cache\n\t\t\t\t\tvar promise = new Promise((resolve, reject) => (installedChunkData = installedChunks[chunkId] = [resolve, reject]));\n\t\t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n\t\t\t\t\t// start chunk loading\n\t\t\t\t\tvar url = __webpack_require__.p + __webpack_require__.u(chunkId);\n\t\t\t\t\t// create error before stack unwound to get useful stacktrace later\n\t\t\t\t\tvar error = new Error();\n\t\t\t\t\tvar loadingEnded = (event) => {\n\t\t\t\t\t\tif(__webpack_require__.o(installedChunks, chunkId)) {\n\t\t\t\t\t\t\tinstalledChunkData = installedChunks[chunkId];\n\t\t\t\t\t\t\tif(installedChunkData !== 0) installedChunks[chunkId] = undefined;\n\t\t\t\t\t\t\tif(installedChunkData) {\n\t\t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n\t\t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n\t\t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n\t\t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n\t\t\t\t\t\t\t\terror.type = errorType;\n\t\t\t\t\t\t\t\terror.request = realSrc;\n\t\t\t\t\t\t\t\tinstalledChunkData[1](error);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\t__webpack_require__.l(url, loadingEnded, \"chunk-\" + chunkId, chunkId);\n\t\t\t\t} else installedChunks[chunkId] = 0;\n\t\t\t}\n\t\t}\n};\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = (chunkId) => (installedChunks[chunkId] === 0);\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some((id) => (installedChunks[id] !== 0))) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkuwazi\"] = self[\"webpackChunkuwazi\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [545], () => (__webpack_require__(78579)))\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["deferred","inProgress","dataWebpackPrefix","loadStylesheet","installedCssChunks","REACT_ELEMENT_TYPE","_jsx","type","props","key","children","Symbol","for","defaultProps","childrenLength","arguments","length","childArray","Array","i","propName","$$typeof","ref","_owner","ErrorBoundary","constructor","super","this","state","error","errorInfo","componentDidCatch","setState","render","_this$state$error","message","obj","value","Object","defineProperty","enumerable","configurable","writable","ErrorFallback","_props$error$code","_props$errorInfo","showRequestId","code","toString","requestId","errorDetails","componentStack","className","summary","name","Footer","Component","href","target","src","title","alt","siteName","to","libraryView","defaultLibraryView","url","user","_id","selectUser","s","u","toJS","connect","settings","collection","get","ModalTips","isOpen","onClick","label","t","SearchTipsContent","ShowIf","if","libraryViewInfo","cards","icon","table","map","START_UPLOAD_ATTACHMENT","ATTACHMENT_PROGRESS","ATTACHMENT_COMPLETE","ATTACHMENT_LOCAL_COMPLETE","ATTACHMENT_DELETED","ATTACHMENT_RENAMED","updateFile","file","entity","async","dispatch","documents","f","updatedEntity","assign","deleteFile","filter","uploadAttachment","storeKeys","set","field","attach","on","data","progress","Math","floor","percent","result","JSON","parse","text","__reducerKey","end","uploadAttachmentFromUrl","formData","originalname","then","newFile","json","renameAttachment","entityId","form","renamedFile","deleteAttachment","entitySharedId","attachment","loadForm","submitForm","resetForm","AttachmentsModal","ownProps","bindActionCreators","storeKey","model","onClose","uploadAttachmentProp","uploadAttachmentFromUrlProp","getPercentage","inputFileRef","useRef","formDispatch","overlayClassName","ariaHideApp","disabled","undefined","renderActiveTabContentOnly","component","disableClick","onDrop","accepted","Promise","all","multiple","current","click","onChange","event","files","style","display","role","width","handleSubmit","formModelData","hasName","UploadButton","context","processing","failed","completed","conversionStart","bind","conversionFailed","documentProcessed","socket","componentWillUnmount","clearTimeout","timeout","e","uploadDocument","docId","setTimeout","renderButton","status","htmlFor","accept","id","spin","renderProgress","contextTypes","confirm","metadata","isEmpty","keys","k","getAll","purpose","v","a","indexOf","Boolean","ViewDocumentLinkBase","filename","location","pathname","match","queryParams","page","sharedId","ViewDocumentLink","_defineProperty","File","editing","edit","cancel","delete","renderDeleteButton","renderFailed","roles","orWriteAccessTo","renderReady","language","rel","renderView","originalFile","renderEditing","onSubmit","initialState","validators","required","val","mapProps","fieldValue","submitFailed","valid","ISO639_3","localized_label","ConnectedFile","FileList","static","advancedSort","property","renderFile","index","orderFilesByLanguage","systemLanguage","orderedFiles","fileIndex","findIndex","temp","attachments","attachmentCompleted","modalOpen","setModalOpen","useState","closeModal","useEffect","ownKeys","object","enumerableOnly","getOwnPropertySymbols","symbols","sym","getOwnPropertyDescriptor","push","apply","_objectSpread","source","forEach","getOwnPropertyDescriptors","defineProperties","WebMediaResourceForm","trim","getDispatch","placeholder","UploadAttachment","onChangeSingle","onChangeAll","allLanguages","renderUploadButton","uploadToAll","languages","size","getSharedId","setInArray","getIn","concat","getAttachments","manageAttachmentsReducer","originalReducer","useDefaults","orignialState","originalAction","action","doc","getDocuments","setIn","filterNot","getId","combineReducers","RenderAttachment","mimetype","fileURL","includes","isVideoAudio","isFromSupportedSite","MarkdownMedia","config","AttachmentForm","languageOptions","franc","elastic","isSourceDocument","options","Attachment","item","thumbnail","getFileExtension","toLowerCase","downloadHref","dropdownMenuOpen","toggleDropdown","handleClickOutside","copyToClipboard","attachmentActionsRef","onRenameSubmit","toggleRename","componentDidMount","document","addEventListener","removeEventListener","parentSharedId","prevState","deleteMessage","dummy","createElement","body","appendChild","window","origin","select","execCommand","removeChild","store","contains","sizeString","getItemOptions","conformThumbnail","buttons","beingEdited","readOnly","AttachmentsList","parentId","forcedReadOnly","isTargetDoc","uploadAttachmentButton","UploadSupportingFile","arrangeFiles","login","credentials","request","recoverPassword","email","altMessage","resetPassword","password","unlockAccount","authorized","useMemo","checkRole","entities","granted","has","permissions","p","level","refId","find","_user$get","g","checkWritePermissions","actions","createReducer","namespace","defaultValue","currentState","updateIn","merge","o","customIndex","update","unset","concatIn","remove","ExtendedTooltip","active","dataSetA","payload","dataSetB","backgroundColor","border","borderBottom","padding","color","setALabel","setBLabel","translateOptions","_property","_option","option","content","sortFields","_field","LibraryCharts","itemResults","aggregations","found","types","buckets","agg","filtered","doc_count","items","reduce","_item","conformDocumentTypesToFields","filters","templates","tpl","unshift","results","fields","translationContext","documentTypesExist","LibraryChartComponent","maxPieItems","assignType","typeButton","clusterResults","_clusteredResults","optionIndex","clusteredResults","chart","Pie","Bar","chartLabel","StackedDualBarChart","compareStrings","b","localeCompare","compareDocCount","sortAndOrder","method","order","reverseCondition","sort","reverse","sortValues","values","others","formatPayload","formatter","formatDataForChart","formatOptions","maxCategories","aggregateOthers","labelsMap","relevantCategories","excludeZero","pluckCategories","category","matchingCategory","c","determineRelevantCategories","sortedCategories","by","sortData","categories","Number","slice","memo","limitMaxCategories","scatter","flatValues","parent","formatForNestedValues","light","SET_RELATION_TYPE","SET_TARGET_DOCUMENT","CONNECTION_CREATED","OPEN_CONNECTION_PANEL","CLOSE_CONNECTION_PANEL","SEARCHING_CONNECTIONS","CREATING_CONNECTION","CREATING_RANGED_CONNECTION","CANCEL_RANGED_CONNECTION","SearchResults","loading","selected","template","searching","openPanel","connectionType","sourceDocument","closePanel","immediateSearch","searchString","requestParams","RequestParams","api","r","debouncedSearch","debounce","search","searchTerm","startNewConnection","setRelationType","setTargetDocument","saveConnection","connection","callback","getState","locale","sourceRelationship","reference","sourceRange","sourceFile","targetRelationship","targetDocument","targetRange","targetFile","apiCall","save","response","selectRangedTarget","onRangedConnect","ActionButton","enabled","onCreate","renderContent","buttonIcon","busy","connectionValid","connections","uiState","SearchForm","SearchInput","CreateConnectionPanel","renderCheckType","searchResults","typeLabel","open","containerId","SidePanel","relationTypes","onlyHeaders","add","searchReferences","relationshipsList","relationships","list","connectionsChanged","connectionsGroups","filteredTemplates","templateIds","group","sortOptions","currentCriteria","deleteConnection","loadAllReferences","loadMoreReferences","limit","setFilter","groupFilterValues","newFilter","resetSearch","switchView","ResetSearch","SearchBar","changeSearchTerm","componentDidUpdate","prevProps","resetSearchTerm","change","autoComplete","conformQuote","conformDl","isArray","join","HubRelationshipMetadata","relationship","thesauris","formater","extendedMetadata","justText","Map","LeftRelationship","toggelRemoveLeftRelationship","_e","selectConnection","renderTrashButton","hub","renderRelationship","parentEntity","targetReference","DropdownList","valueField","textField","updateLeftRelationshipType","Doc","searchParams","renderFigure","hubActions","RightRelationship","updateRightRelationshipType","toggleRemoveRightRelationshipGroup","toggleRemoveEntity","setAddToData","hubIndex","rightRelationshipIndex","openAddEntitiesPanel","relationshipIndex","rightRelationshipGroup","rightRelationshipDeleted","deleted","move","toggleMoveEntity","moveEntities","hubs","uiActions","RelationshipsGraphEdit","parseResults","addHub","totalHubs","requestedHubs","loadMoreAmmount","actionFunction","totalRows","total","documentTypes","sortButtonsStateProperty","GraphView","view","LoadMoreButton","searchDocuments","DocumentsList","ConnectionsGroup","groupTemplates","expanded","selectedItems","shouldComponentUpdate","nextProps","nextState","is","setGroupFilter","toggleSelectItem","groupSelected","splice","toggleSelectGroup","toggleExpandGroup","connectionLabel","checked","count","ConnectionsGroupsComponent","Results","ConnectionsGroups","rows","OPEN_MENU","CLOSE_MENU","FormGroup","pristine","countByTemplate","uploads","performantDocToJSWithoutRelations","prepareMetadata","documentType","properties","thesauri","format","TocForm","submit","indentButton","direction","tocElement","indent","indentation","directionAware","toc","removeEntry","ShowToc","scrollTo","preventDefault","scrollToToc","selectDoc","documentViewer","targetDoc","helpers","Connection","clickReference","activateReference","referencesSection","selectReference","deleteReference","relationType","relation","itemClass","highlighted","associatedRelationship","entityData","onMouseEnter","highlightReference","onMouseLeave","noMetadata","additionalText","additionalMetadata","evalPublished","I18N","stopPropagation","ConnectionsList","close","deactivateReference","references","sortTextSelections","inline","translationKey","blankStateMessage","MetadataFieldSnippets","fieldSnippets","documentViewUrl","getFieldLabel","snippet","SafeHTML","DocumentContentSnippets","selectSnippet","documentSnippets","selectedSnippet","SnippetList","snippets","tmpl","DocumentResults","renderSnippetsList","args","renderFilter","threshold","toFixed","min","max","step","delay","minLabel","maxLabel","semanticSearch","filteredResults","boundingIndex","score","findResultsAboveThreshold","_memo","isNaN","fullText","texts","getSnippetsFromResults","Icon","totalResults","resultsFilters","selectedDocument","SearchText","searchSnippets","attachDispatch","path","query","sidepanel","DocumentSidePanel","selectTab","copyFrom","copyFromProps","toggleCopyFrom","onCopyFromSelect","deleteDocument","toggleSharing","getDocumentReferences","getDefaultDocumentToC","isEntity","defaultLanguage","defaultDocumentToC","defaultDocument","entityDefaultDocument","tabSelected","showTab","_close","formPath","formDirty","sharing","renderHeader","tab","excludeConnectionsTab","summaryData","totalConnections","selectedTab","handleSelect","raw","tabIndex","default","docBeingEdited","EntityForm","tocFormComponent","jsDoc","defaultDoc","initialTemplateId","Metadata","formStatePath","entityBeingEdited","includeViewButton","tocBeingEdited","leaveEditMode","editToc","removeFromToc","indentTocElement","saveToc","tocFormState","tocForm","highlightedProps","CopyFromEntity","originalEntity","onSelect","formModel","onCancel","showTitle","showType","groupGeolocations","Attachments","isDocumentAttachments","relevantReferences","l","coerceValue","params","include","denormalize","multipleUpdate","deleteMultiple","SHOW_TAB","RESET_USER_SELECTED_TAB","SHOW_FILTERS","HIDE_FILTERS","saveEntity","updatedDoc","errors","stringify","deleteEntity","deleteEntities","sharedIds","resetUserSelectedTab","hideFilters","showFilters","filterBaseProperties","matchesFilter","subject","filterOptions","optionsLabel","opt","some","childOpt","SelectStates","optionsValue","prefix","optionsToShow","showAll","hideSearch","showSearch","sortbyLabel","forceHoist","_v","onFilter","_searchTerm","totalPossibleOptions","allowSelectGroup","MultiSelectBase","ui","resetFilter","focusSearch","searchInputRef","createRef","getPartialList","getPinnedList","getStateValue","markGroup","conditionValue","markOptions","newValue","getGroupStateValue","markChecked","OFF","markUnchecked","getOnStateValue","ON","getOffStateValue","changeGroup","previousState","parseInt","dataset","transitionCallbacks","GROUP","PARTIAL","call","checkedList","getCheckedList","partialList","numChecked","nc","numPartial","np","isSubGroup","pinnedList","sortedOptions","aPinned","bPinned","sorting","showingAll","moveNoValueOptionToBottom","sortOnlyAggregates","_options","bottomId","bottomOption","hoistCheckedOptions","checkedOptions","otherOptions","partitionedOptions","moreLessLabel","totalOptions","amount","toggleOptions","groupKey","showSubOptions","focus","renderGroup","renderOption","groupIndex","renderSearch","renderOptionsCount","renderedOptions","isNotAnEmptyGroup","notDefined","_opt","tooManyOptions","renderingOptions","numberOfActiveOptions","MultiSelect","MultiSelectTristate","added","removed","originalFull","originalPartial","Select","groupOptions","indx","ky","DatePicker","handleChange","registerLocale","datePickerValue","endOfDay","useTimezone","utcOffset","local","utc","endOf","addOffset","defaultFormat","miliseconds","subtract","removeOffset","dateFormat","placeholderText","isClearable","fixedHeight","showYearDropdown","Captcha","refresh","svg","remote","dangerouslySetInnerHTML","__html","DateRange","prop","propValue","from","stateFrom","stateTo","_fieldValue","$form","controlComponent","hasError","_excluded","_extends","prototype","hasOwnProperty","_objectWithoutProperties","excluded","sourceKeys","_objectWithoutPropertiesLoose","sourceSymbolKeys","propertyIsEnumerable","notEmpty","LookupMultiSelect","lookupOptions","selectedOptions","combineOptions","lookup","arr","_this$props","rest","filteredTotalPossibleOptions","MarkDown","showPreview","Markdown","html","htmlOnViewer","markdown","Nested","parseValue","row","formatedValues","split","NestedMultiselect","nestedProperties","optionsSelected","getOptions","treatAs","listTypes","String","selectAnyChange","MultiDate","MultiDateRange","fromChange","toChange","IconSelectorItem","cca2","IconSelector","listOptions","country","cca3","valueComponent","itemComponent","groupBy","Numeric","parseFloat","sanitizeValue","NumericRange","newState","NumericRangeSlide","timeOut","renderTickMarksDatalist","RadioButtons","renderLabel","Switcher","leftLabel","rightLabel","lat","lon","isCoordinateValid","coord","Geolocation","latChange","lonChange","mapClick","clearCoordinates","emptyValue","getInputValues","currentLatitude","currentLongitude","valueToSend","latitude","longitude","lngLat","markers","height","autoCenter","mapStyleSwitcher","showControls","LinkField","urlChange","labelChange","diffValue","prepareValue","localAttachments","valueString","isObject","getValue","originalValue","test","supportingFile","fileLocalID","formField","multipleEdition","openModal","setOpenModal","handleImageRemove","_file$supportingFile","serializedFile","URL","revokeObjectURL","MediaModal","selectedUrl","MultiSuggestBase","suggestionConfidence","acceptSuggestion","propertyType","selectModel","selectValue","rejectSuggestion","suggestedValues","notify","proposedValues","filteredValues","confidenceBlob","suggestion_confidence","MultiSuggest","rawValue","suggestion","propertyTypes","I18NLink","confirmTitle","confirmMessage","navigate","objectWithoutKeys","replace","listItem","i18nmode","I18NMenu","languageMap","toggleInlineEdit","selectedLanguage","loggedUser","lang","prepareDropdownValues","cleanSearch","regexp","RegExp","reload","inlineEdit","dictionary","dictionaries","d","Translate","translation","translations","contexts","_ctx","ctx","canEditThisValue","TranslateForm","saveTranslations","Modal","languageInLanguages","getLocale","urlLanguage","cookie","getURLLocale","getCookieLocale","getDefaultLocale","saveLocale","expires","addEntry","addLanguage","deleteLanguage","setDefaultLanguage","inlineEditTranslation","contextId","_t","closeInlineEditTranslation","I18NApi","importTranslations","headers","Accept","editTranslations","_text","returnComponent","console","warn","getLocaleTranslation","getContext","translate","resetCachedTranslation","isSortableType","SortButtons","changeOrder","defaultTreatAs","selectedSort","stateProperty","userSelectedSorting","sortCallback","validateSearch","_search","metadataSorts","sorts","inherit","sortString","getMetadataSorts","commonSorts","selectedTemplates","DocumentCounter","totalConnectionsCount","selectedEntitiesCount","entityListCount","entityTotal","hitsTotalRelation","totalEntitiesValue","entityCounter","connectionsCounter","Welcome","TilesViewerComponent","zoomLevel","rowListZoomLevel","clickOnDocument","onSnippetClick","TilesViewer","selectAllDocuments","loadNextGroupOfEntities","componentWillReceiveProps","loadMoreDocuments","loadMoreButton","q","searchCentered","hideFooter","CollectionViewer","counter","selectedDocuments","Search","ActionButtons","FooterComponent","blankState","Loader","getFaSize","getJSData","_data","getIcon","ItemFooter","Label","ProgressBar","RowList","Item","activeClass","overlay","zIndex","contentLabel","Body","Header","Title","Close","mode","getTemplateInfo","_s","currentTemplate","styleProps","TemplateLabel","Tip","position","Warning","getUwaziFavorites","localStorage","getItem","FavoriteBanner","toggleClick","shouldBeSelected","uwaziFavorites","itemIndex","setItem","suppressHydrationWarning","DocumentLanguage","fileLanguage","ItemSnippet","snippetElement","getSearchSnipett","additionalIcon","Snippet","itemProps","itemHeader","titleProperty","sortedProperty","noLabel","published","labels","FeatureToggle","feature","prioritySortingCriteria","acceptedThumbnailExtensions","Thumbnail","extension","substr","lastIndexOf","ConfirmModal","onAccept","ConfirmButton","showModal","_excluded2","newParams","oldQuery","newQuery","CurrentLocationLink","_ref","otherProps","validProps","BackButton","SET_DOCUMENTS","ADD_DOCUMENTS","UNSET_DOCUMENTS","UPDATE_DOCUMENT","UPDATE_DOCUMENTS","UPDATE_DOCUMENTS_PUBLISHED","ELEMENT_CREATED","REMOVE_DOCUMENT","REMOVE_DOCUMENTS","REMOVE_DOCUMENTS_SHAREDIDS","UPDATE_SELECTED_ENTITIES","SET_SEARCHTERM","SET_PREVIEW_DOC","SET_SUGGESTIONS","SHOW_SUGGESTIONS","HIDE_SUGGESTIONS","OVER_SUGGESTIONS","SET_LIBRARY_FILTERS","UPDATE_LIBRARY_FILTERS","INITIALIZE_FILTERS_FORM","SELECT_DOCUMENT","SELECT_SINGLE_DOCUMENT","SELECT_DOCUMENTS","UNSELECT_DOCUMENT","UNSELECT_ALL_DOCUMENTS","ENTER_LIBRARY","ZOOM_IN","ZOOM_OUT","SET_TABLE_VIEW_COLUMNS","SET_TABLE_VIEW_COLUMN_HIDDEN","SET_TABLE_VIEW_ALL_COLUMNS_HIDDEN","enterLibrary","initializeFiltersForm","selectDocument","_doc","library","getAndSelectDocument","selectDocuments","docs","unselectDocument","selectSingleDocument","unselectAllDocuments","updateSelectedEntities","setDocuments","addDocuments","unsetDocuments","zoomIn","zoomOut","filterIsEmpty","processFilters","readOnlySearch","publishedStatus","searchFilter","encodeSearch","appendQ","encodeURIComponent","encodedSearch","currentSearch","currentFilters","currentSearchParams","decodeURIComponent","customFilters","setSearchInUrl","updateEntity","updateEntities","updatedDocs","saveDocument","formKey","removeDocument","removeDocuments","fileId","onlyTextReferences","getAggregationSuggestions","unpublished","setTableViewColumns","columns","setTableViewColumnHidden","hidden","setTableViewAllColumnsHidden","toggleQuickLabelAutoSave","opts","quickLabelState","autoSave","selectedDocumentsChanged","_state$library","_state$library$sidepa","_state$library$sidepa2","propNames","counts","res","mo","buildQuickLabelMetadata","maybeSaveQuickLabels","force","_state$library2","_state$library2$sidep","_state$library2$sidep2","quickLabelMetadata","diffs","ids","diffMetadata","readFileAsBase64","cb","resolve","reader","FileReader","onload","base64","info","readAsDataURL","saveEntityWithFiles","supportingFiles","accumulator","attachmentInfo","oldDocuments","newDocuments","entityToSave","addedDocuments","blob","fetch","newDocument","reject","err","_state","_processed","docsStatus","UploadEntityStatus","renderProgressBar","ViewDocButton","openReferencesTab","processed","getDocumentUrlQuery","_dispatch","getConnections","sourceType","itemConnections","submitSearch","submitSemanticSearch","submitNewSearch","SelectFilter","showBoolSwitch","matchingTHesauri","normalizeBucket","bucket","normalizedBucket","noValueKey","parseWithAggregations","showNoValue","propertyAggregations","URLQueryToState","_thesauris","_relationTypes","forcedProps","includeUnpublished","allAggregations","populateOptions","filterToQuery","filteredQuery","restricted","queryToFilter","container","collectionSettings","connector","_collectionSettings$g","startingPoint","tilesProvider","mapApiKey","apiKey","retries","load","catch","templatesInfo","LMap","_mergeArrays","first","second","bigArray","smallArray","extractMarkers","geolocationProps","geolocationPropNames","geolocationProp","propertyMetadata","point","extractPropertyBasedMarkers","relatedProperty","inherited","extractInheritedMarkers","getEntityMarkers","propertyBasedMarkers","templateProperties","getPropertyBasedMarkers","inheritedMarkers","getInheritedMarkers","selectMarkers","entityMarkers","getMarkers","MarkersComponent","propTypes","isRequired","LMapComponent","MarkdownLink","classname","timeLinks","_timelinks","timelinks","timeKey","seconds","_seconds","n","_index","seekTo","player","parsedProps","shift","propsToConfig","compact","dimensions","controls","CounterComponent","markdownDatasets","ContactForm","changedData","safeName","newNameGeneration","generateNewSafeName","objectPath","logError","propValueOf","propLabelOf","entityView","rootProperties","extractRootProperty","formattedEntity","propertyName","extractMetadataProperty","propertyData","extractRootLabel","_template","_template$get","term","extractMetadataLabel","getPropertyData","translateContext","output","Error","getProperty","renderMethod","isRootProperty","getMethod","Section","showIf","condition","getPropertyValue","metadataProperty","inheritedType","inheritedValue","Set","jsEntity","unwrappedMetadata","MetadataObject","Template","UnwrapedMO","propertyValue","EntityLink","normalizeIndex","getVisibleItems","currentIndex","visibleCount","visibleIndices","centerIndex","totalLength","minIndex","rawIndices","getVisibleIndices","VictimSlider","initialIndex","slide","dir","ItemList","link","substring","ignoreQueryPrefix","mapDispatchToProps","toRenderItems","slider","Repeat","Connect","child","renderChildren","mappedProps","connectAdvanced","renderInfo","marker","MapComponent","scrollZoom","clickOnMarker","clickOnCluster","cluster","m","zoom","renderPopupInfo","PayPalDonateLink","paypalid","currency","PublicForm","useGeneratedId","input","removeAttachment","fileDropped","captcha","generatedIdTitle","submiting","uploadedFiles","removedFile","querySelector","_values","submitResult","promise","refreshCaptcha","renderFileField","defaults","preview","renderCaptcha","renderSubmitState","renderTitle","boundChange","ValueComponent","_value","SearchBox","EntityInfo","getAndSelect","tag","BarChart","FreeBarChart","Slideshow","PieChart","ListChart","GaugeChart","CejilChart","getData","groupedResults","setA","setB","countriesData","thesaury","_country","foundCountry","prepareData","paddingTop","paddingRight","findBucketsByCountry","countryKey","casesTemplate","provisionalMeasuresTemplate","conformSearchQuery","countries","caseTemptale","caseLabel","provisionalMeasureTemplate","provisionalMeasureLabel","caseResults","parsingUtils","provisionalMeasureResults","setAValue","setBValue","sexTranslationsContext","assignFilter","sex","sexo","filterProperty","maleFilters","femaleFilters","maleResults","femaleResults","processesIds","provisionalMeasuresIds","documentsIds","conformLibraryLink","escapedValues","getCount","links","pulse","fixedWidth","processesCount","provisionalMeasuresCount","documentsCount","cejilChart001","CejilChart002","cejilHero","availableComponents","myParser","Parser","xmlMode","processNodeDefinitions","customComponentMatcher","dynamicCustomContainersConfig","validate","tokens","idx","token","markdownIt","xhtmlOut","use","markdownItWithHtml","customComponentTypeMatcher","getConfig","string","configMatch","exec","_markdown","withHtml","renderer","removeWhitespacesInsideTableTags","processingInstructions","shouldProcessNode","processNode","node","isCustomComponentPlaceholder","isCustomComponent","_config","getNodeTypeAndConfig","attribs","processDefaultNode","parseWithInstructions","MarkdownViewer","Element","inlineComponent","customHook","customComponent","errorHtml","listData","lists","renderedLists","ReactFromMarkdown","markdownToReact","conformValues","geolocation","conformUrl","conformDatasets","sets","extractFirstRow","getAggregations","datasets","additionalDatasets","onopentag","decodeEntities","parseComplete","parseDatasets","apiAction","postAction","requestDatasets","getRows","getAggregation","uniqueValues","filteredValue","plus","addValues","getMetadataValue","mos","hasIn","resetReduxForm","resetMetadata","previousTemplate","resetedMetadata","resetValue","resetExisting","propertyExists","defaultValueByType","UnwrapMetadataObject","checkGeneratedTitle","commonProperties","generatedId","loadFetchedInReduxForm","sortedTemplates","defaultTemplate","templateId","entitySelectedOptions","loadInReduxForm","_entity","sortedAttachments","changeTemplate","templateJS","loadTemplate","removeIcon","updatedEntities","getSuggestions","clearMetadataSelections","updateSelection","selection","fieldName","fieldId","propertyID","timestamp","Date","deleteSelection","entityDocument","_document$extractedMe","updatedSelections","extractedMetadata","selectionRectangles","updateFormField","fieldType","coercedValue","success","uploadLocalAttachment","uploadLocalAttachmentFromUrl","newUrl","SearchEntities","touched","initialSearchTerm","_sharedId","onFinishSearch","propsToCopy","selectedEntity","lastSearch","copy","backToSearch","onFinishedSearch","copyFromTemplateId","originalTemplate","comonProperties","renderPanel","highlight","excludePreview","transform","newSelections","metadataExtraction","deleteSelectionAction","stateProps","dispatchProps","onClickFunction","_stateProps$newSelect","_stateProps$entityDoc","_stateProps$entityDoc2","selections","uniqBy","hasSelections","checkPropertySelections","MediaModalFileList","filteredAttachments","handleAttachmentClick","attachmentUrl","fileSize","sizeLabel","MediaModalUploadFileButton","acceptedFileTypes","handleFileInPublicForm","handleUploadButtonClicked","handleInputFileChange","inputComponent","fileFieldAction","MediaModalType","getAcceptedFileTypes","Image","filterAttachments","_url$split$0$split$po","acceptedMimeTypes","pop","mimeTypeFromUrl","Media","localAttachmentAction","rrfChange","_inputFileRef$current","createObjectURL","uniqueID","GeolocationViewer","points","onlyForCards","coords","latLonSeparator","decimalPlaces","componentProps","templatesMap","notLabeledOrMultiple","member","pillColor","_templatesInfo$member","getFirstGroupInfo","members","Pill","computeRenderMemberGroups","firstGroup","restOfGroups","_templatesInfo$member2","relatedEntity","cursor","getMultiMemberInfo","GroupedGeolocationViewer","flat","propVal","composeIcon","renderItemValue","valueCount","composeCount","groupRepeatedValues","previousValue","propertyWithGroupedValues","renderList","showByType","linksProp","hydratedValues","linkValue","hydratedProp","renderRelationshipLinks","flattenDeep","computeGroup","startIndex","lastIndexInTemplate","indexInTemplate","getNewGroupedGeolocationField","showSubset","filteredMetadata","filterProps","flattenedMetadata","flattenedValues","flattenInherittedRelationships","groupedMetadata","groupAdjacentGeolocations","highlightClass","fullWidthClass","fullWidth","sortedBy","_prop","updateField","dis","setSelection","_selection$selectionR","ToggleDisplay","show","hide","onHide","showLabel","hideLabel","IconField","fieldModel","removeFile","getFileIcon","updateOn","SupportingFiles","entitySharedID","handlePDFUpload","handlePDFUploadAction","immutableDefaultTemplate","selectTemplateOptions","MetadataForm","onSubmitFailed","renderTemplateSelect","templateOptions","version","titleLabel","validator","MetadataExtractor","DeleteSelectionButton","MetadataFormFields","entityModel","MultipleEditionFieldWarningBase","fieldState","optionIm","getField","_model","entityThesauris","plainAttachments","plainLocalAttachments","filterThesauri","relationshipChange","_prop$multiEditingRel","multiEditingRelationshipFields","templateID","MultipleEditionFieldWarning","mlThesauri","thes","groupSameRelationshipFields","showIXButtons","entityForm","_types","isComonProperty","conformSortedProperty","sortedProperties","matchProp","addSortedProperties","newProp","formatMetadataSortedProperties","creationDate","addCreationDate","editDate","addModificationDate","propertyValueFormatter","date","formatDateRange","daterange","getSelectOptions","thesaurus","_option$parent","relations","inheritedProperty","multimedia","multidate","timestamps","multidaterange","dateranges","range","image","_thesauri","media","metadataValue","multiselect","thesauriValues","sortedValues","getThesauriValues","groupsOptions","groupedOptions","alreadyDefinedOption","parentOption","propertyInfo","methodType","every","iv","prepareRelatedEntity","propType","flattenInheritedMultiValue","relationshipValues","thesaurusValues","templateThesaurus","relationshipValue","entityLabel","nested","thesaurusValue","prepareMetadataForCard","filterProperties","applyTransformation","showInCard","labelAndUrl","latAndLon","generate","noTitle","validationObject","linkValidation","geolocationValidation","indexValues","indexed","indexedThesaurus","metadataSelectors","formatMetadata","sortProperty","BaseFormatMetadata","_ref2","removeUneededProps","FormatMetadata","caseTemplate","matterTemplate","renderableTemplates","judgement","admissibilityReport","orderOfThePresident","orderOfTheCourt","letterOfSubmission","meritsReport","fondo","hearing","datePropertyOverrides","desiredTemplates","dateProperties","fetchReferences","fetchReferenceData","fetchPromises","DocumentsAPI","EntitiesAPI","assignDataToYear","years","year","TimelineViewer","getTemplateType","itemTemplate","plainTemplates","getDates","caseDatesNames","names","dates","assignActiveYears","tracks","track","start","sortEvents","firstMilestone","arrangeTracks","hasRelatedReferences","isDesiredTemplate","hasDate","assignAdditionalData","trackName","main","related","splitByOrigin","currentYear","minYear","maxYear","normalizeYears","assignTrackLabels","isMainMatter","mainTrackTemplate","relatedTrackTemplate","getRelatedEntity","isCase","fetchRelatedEntity","getTimelineInfo","usefulReferences","relatedReferences","getRelatedReferences","filterUsefulReferences","referencesData","conformedReferences","parentTemplate","entityDatesTrack","entityDates","relatedDates","templateName","additionalData","referenceLabel","referenceClassName","relatedReferenceLabel","relatedReferenceClassName","axis","nth5","activeClassName","linkType","ShowMetadata","header","unique","allErrors","addVocabulary","AccessLevels","MixedAccess","PermissionType","permissionType","enum","permissionLevel","permissionSchema","additionalProperties","definitions","objectIdSchema","addKeyword","keyword","allowedIds","uniqueIds","schemaPath","instancePath","compile","iconsMap","USER","PUBLIC","MemberListItemInfo","UserGroupsLookupField","setSelected","setShow","setSearchTerm","debouncedOnChange","useCallback","optionsListRef","onKeyDown","onBlur","relatedTarget","onFocus","rotate","MemberListItemPermission","onDelete","stillIncludeMixed","MIXED","READ","WRITE","MembersList","onChangeHandler","newMembers","onDeleteHandler","notShowPublicToCollab","pseudoMembers","findPublicPermission","saveEntitiesPermissions","permissionsData","savePermissions","publicPermission","publicIsMixed","showingUnpublished","notShowingPublicAndPrivate","toMoveFromCollection","wrappedDispatch","ShareEntityModal","_findPublicPermission","setResults","assignments","setAssignments","dirty","setDirty","originalPublicLevel","setOriginalPublicLevel","searchAndLoadCollabs","currentAssignments","collaborators","filterTerm","searchCollaborators","loadGrantedPermissions","loadedAssignments","currentPublicLevel","ShareButton","setSharing","MetadataFormButtons","exclusivelyViewButton","formName","hideDelete","uploadFileprogress","ViewButton","_templates","commonTemplate","entitiesSelected","comonTemplate","SelectMultiplePanel","metadataFieldModified","formState","formValues","modifiedValues","_formModel","renderEditingForm","renderEditingButtons","renderListButtons","wrapEntityMetadata","newFileMetadataValues","wrappedMo","newFileMetadataValue","prepareMetadataAndFiles","attachedFiles","mediaProperties","metadataFiles","entityAttachments","fileID","prepareFiles","wrappedEntity","SHOW_MODAL","HIDE_MODAL","reducer","reducerKey","wrapDispatch","wrappedAction","wrapAction","_globalDispatch","multireducer","NOTIFY","REMOVE_NOTIFICATION","removeNotification","notification","Notification","cssClass","FormattedMessage","Notifications","notifications","notificationActions","PDF","PDFPage","PAGE_SAVED","SAVING_PAGE","MediaField","PARSE_RELATIONSHIPS_RESULTS","ADD_RELATIONSHIPS_HUB","UPDATE_RELATIONSHIPS_LEFT_TYPE","UPDATE_RELATIONSHIPS_RIGHT_TYPE","TOGGLE_REMOVE_RELATIONSHIPS_LEFT","TOGGLE_REMOVE_RELATIONSHIPS_RIGHT_GROUP","SET_RELATIONSHIPS_ADD_TO_DATA","ADD_RELATIONSHIPS_ENTITY","TOGGLE_REMOVE_RELATIONSHIPS_ENTITY","TOGGLE_MOVE_RELATIONSHIPS_ENTITY","MOVE_RELATIONSHIPS_ENTITY","UPDATE_RELATIONSHIP_ENTITY_DATA","EDIT_RELATIONSHIPS","SAVING_RELATIONSHIPS","SAVED_RELATIONSHIPS","OPEN_RELATIONSHIPS_PANEL","CLOSE_RELATIONSHIPS_PANEL","SEARCHING_RELATIONSHIPS","rightIndex","updateRelationshipEntityData","newRightRelationshipType","addEntity","reloadRelationships","saveRelationships","parentEntityId","apiActions","hubData","leftRelationship","rightRelationships","rightGroup","newRelationships","fullHubData","modified","moved","immidiateSearch","selectRelationTypes","translationContexts","unselectConnection","RelationshipsFormButtons","saving","requestState","fromJS","emptyState","setReduxState","getAllSearches","getEntitiesMatchingFilters","getSearch","deleteSearch","stopSearch","resumeSearch","registerForUpdates","fetchSearches","setEditSearchEntities","editSearchEntities","searchId","selectSemanticSearchDocument","unselectSemanticSearchDocument","partial","showSemanticSearch","hideSemanticSearch","updateSearch","updatedSearch","addSearchResults","newDocs","newResults","existingDocs","newDoc","selectedDoc","getMoreSearchResults","FeatureToggleSemanticSearch","semanticSearchActivated","features","NAVLINKS_SAVED","EDIT_LINK","SAVING_NAVLINKS","SET_TEMPLATES","TEMPLATE_SAVED","EDIT_PROPERTY","SET_THESAURIS","SAVING_TEMPLATE","daddh","key_es","key_en","key_pt","label_es","label_en","label_pt","dple","pbpppl","cadh","cipst","cidfp","ciedpd","cbdopara","cicc","cdi","cicdi","cirdri","rcfal","rcofalv","titleField","getTitleLabel","startsWith","getMetadataFieldLabel","localID","isCommonProperty","prioritySorting","TocGeneratedLabel","generatedToc","tocGenerationActions","reviewToc","currentDoc","updatedFile","filteredAggregation","_aggregations$all","_aggregations$all$gen","FilterTocGeneration","tocGenerationUtils","_settings$features","tocGeneration","aggregateGeneratedToc","twoFactorAuth","iconName","fillRule","infoCircleHollow","saveAndNext","exportCsv","importCsv","funnelFilter","icons","faAlignJustify","faAngleDoubleLeft","faAngleDoubleRight","faAngleLeft","faAngleRight","faArrowLeft","faArrowsAlt","faArrowUp","faArrowDown","faArrowRight","faBars","faBook","faBullhorn","faCalculator","faCalendar","faCaretDown","faCaretSquareDown","faCaretUp","faChartBar","faCheck","faCheckCircle","faChevronLeft","faChevronRight","faCircle","faClock","faClone","faCloudUploadAlt","faCloudDownloadAlt","faCode","faCoffee","faCog","faComment","faCubes","faEmptyCircle","faEnvelope","faExchangeAlt","faExclamationTriangle","faFlask","faFile","faFilter","faFilePdf","faFileImage","faFingerprint","faFont","faGavel","faGlobeAfrica","faHome","faImage","faInfoCircle","faKey","faLanguage","faLevelDownAlt","faLightbulb","faLink","faUnlink","faList","faLock","faMapMarker","faMinus","faPaperPlane","faPaperclip","faParagraph","faPassport","faPencilAlt","faPlay","faPlus","faPowerOff","faQuestionCircle","faQuoteLeft","faQuoteRight","faSave","faSearch","faServer","faSearchMinus","faSearchPlus","faSitemap","faSort","faSortAlphaDown","faSpinner","faSquare","faSolidSquare","faStar","faStop","faSync","faTag","faTerminal","faTh","faTimes","faTimesCircle","faToggleOff","faToggleOn","faTrashAlt","faUndo","faUpload","faVideo","faEye","faEyeSlash","faUser","faUsers","faUserTimes","faUserPlus","faUserCheck","faHandPaper","faExternalLinkAlt","faMap","faMapMarkerAlt","faTasks","faBullseye","faColumns","loadIcons","iconNames","languageData","languagesList","flip","rtl","common","ToggleButton","NEW_UPLOAD_DOCUMENT","UPLOAD_PROGRESS","UPLOAD_COMPLETE","UPLOADS_COMPLETE","BATCH_UPLOAD_COMPLETE","ENTER_UPLOADS_SECTION","showImportPanel","closeImportPanel","closeImportProgress","newEntity","newEntityMetadata","createDocument","importData","upload","endpoint","publicSubmit","completionResolve","completionReject","uploadCompletePromise","_resolve","_reject","uploadCustom","deleteCustomUpload","SET_REFERENCES","RESET_DOCUMENT_VIEWER","SET_SELECTION","UNSET_SELECTION","SET_TARGET_SELECTION","UNSET_TARGET_SELECTION","VIEWER_UPDATE_DOCUMENT","ADD_REFERENCE","REMOVE_REFERENCE","LOAD_DEFAULT_VIEWER_MENU","GO_TO_ACTIVE","OPEN_PANEL","CLOSE_PANEL","SELECT_TARGET_DOCUMENT","RESET_REFERENCE_CREATION","HIGHLIGHT_REFERENCE","ACTIVE_REFERENCE","DEACTIVATE_REFERENCE","SELECT_SNIPPET","setReferences","loadReferences","addReference","delayActivation","saves","saveTargetRangedReference","setTargetSelection","unsetSelection","unsetTargetSelection","panel","resetReferenceCreation","goToActive","highlightSnippet","textToMatcherRegExp","rawMatches","matches","markSearchTerm","diacritics","acrossElements","separateWordSearch","accuracy","tryFuzziMark","chunkLenght","startOfText","endOfText","done","noMatch","scrollToPage","duration","dividerOffset","offset","top","tabName","scrollToActive","doScroll","getGroupedByConnection","getInbound","countByRelationType","parseReferences","refs","textReferences","isRelationshipAReference","hubIdToBaseReference","tr","hubId","hubIdToRelationships","baseRef","flatMap","selectRefs","selectReferences","selectTargetDoc","selectTargetRefs","targetDocReferences","selectTargetReferences","Mark","Marker","init","selector","markRegExp","mark","unmark","getElement","isVisible","parentSelector","element","elementBounds","getBoundingClientRect","parentBounds","bottom","scrollTop","getTargetScrollTop","animateScroll","elementOffsetToParent","scrollHeight","offsetHeight","_parent","now","setInterval","multiplier","animation","clearInterval","easeIn","easeOut","featureActivated","APIURL","API_URL","CustomProvider","__reduxData__","initialData","renderedFromServer","__user__","getChildContext","getInitialData","isRenderedFromServer","getUser","Children","childContextTypes","Cookiepopup","cookieExists","cookiepolicy","useOnClickOutsideElement","onClickHandler","DropdownMenu","showing","setShowing","dropdownRef","onClickOutside","toggleShowing","sublink","Menu","libraryUrl","librarySearch","libraryFilters","navLinks","uploadsSearch","uploadsFilters","uploadsSelectedSorting","selectedSorting","SiteName","Helmet","titleTemplate","meta","Confirm","newProps","isLoading","confirmInputValue","handleInput","actionResponse","renderExtraConfirm","extraConfirmWord","acceptLabel","messageKey","extraConfirm","noCancel","trackPage","gtag","_paq","GoogleAnalytics","analyticsTrackingId","dataLayer","Matomo","App","showmenu","confirmOptions","toggleMenu","renderTools","routes","MenuButtonIcon","navClass","customHomePageId","route","pageId","router","parseNested","RouteHandler","_requestParams","getClientState","urlHasChanged","JSONUtils","_props$params","nextParams","nextRoutes","sameParams","sameAmountOfparams","currentPath","newPath","activitylogSearchBase","append","activitylogSearch","activitylogSearchMore","ActivitylogForm","loadMore","_query","searchMore","lastResultTime","before","activitylog","DescriptionWrapper","entry","toggleExpand","ActivitylogRow","time","semanticData","description","extra","ActivityLogList","logs","ActivitylogList","enable2fa","QRCodeSVG","resolveComponent","components","goToAccount","Configure2fa","conflict","otpauth","secret","setSecret","userUsing2fa","Auth2faAPI","enable","includeMargin","bgColor","fgColor","using2fa","SelectFileButton","onFileImported","fileInputRef","_fileInputRef$current","EditTranslationForm","defaultLocale","importTranslationsFile","translationsForm","prepareTranslations","translationExists","defaultTranslation","getDefaultTranslation","_translations","translationLanguage","defaultTranslationContext","importButton","contextKeys","contextName","translationsFormState","specialkeyPressed","metaKey","ctrlKey","shiftKey","lastSelectedDocument","last","endIndex","docsToSelect","filtersPanel","multipleSelected","updateIndeterminate","elem","selectAll","indeterminate","ColumnItem","ValueItem","hiddenColumns","closeFunction","rotation","HiddenColumnsDropdown","setAllColumnsHidden","setColumnHidden","columnsMap","setOpen","clickedOutside","setClickedOutside","sortedColumns","shownColumns","processColumns","dropdownContainerRef","_dropdownRef$current","parentElement","onToggle","_dropdownRef$current2","forceUpdate","LibraryModeToggleButtons","showGeolocation","searchUrl","tableViewMode","mapViewMode","UserRole","getTableColumns","useTemplates","templatesToProcess","queriedTemplates","getTemplatesToProcess","propsToAdd","columnProperty","columnsFromTemplates","addinsteadOfSet","processQuery","globalResources","defaultSearch","decodeQuery","sanitizedQuery","loggedIn","isAdmin","ADMIN","aggregatePublishingStatus","aggregatePermissionsByLevel","aggregatePermissionsByUsers","calculateTableColumns","docsQuery","documentsRequest","markersRequest","filterState","quickLabelThesaurus","dispatchedActions","tableViewColumns","filterDocumentTypes","usefulTemplates","libraryActions","resetFilters","DocumentTypesList","stateChanged","changeAll","itm","aggs","renderSingleType","renderGroupType","fromFilters","_items","getItemsToShow","_ownProps","filterValidSelectedTemplates","configuredFilters","TemplatesFilterComponent","flattenConfiguredFilters","currentSelection","newSelection","documentTypeFromFilters","toggleTemplateFilter","newSelectedItems","TemplatesFilter","generateOptions","_aggregations$all2","aggregation","AssigneeFilterSelectUncontrolled","readOptions","writeOptions","getChangeHandler","newSelected","onReadChangeHandler","onWriteChangeHandler","readValues","writeValues","AssigneeFilterSelect","AssigneeFilter","filtrableLevels","_aggregations$all$_pe","PermissionsFilterUncontrolled","refIds","_user$toJS$groups","groups","mappedValue","newValues","PermissionsFilterMultiselect","PermissionsFilter","_aggregations$all$_pu","_published","PublishedFilters","selectTemplates","DateFilter","NestedFilter","NumberRangeFilter","TextFilter","FiltersFromProperties","modelPrefix","_property$inherit","commonProps","propertyOptions","filteredProperty","finalTranslatedOption","translatedSubOptions","subOption","prepareOptions","FiltersForm","activateAutoSearch","autoSearch","allFields","showNoValueOnFilters","LibraryFilters","reset","sidePanelMode","noDocumentSelected","isFilterShown","Notice","viewBox","fill","xmlns","cx","cy","isHidden","allowClose","learnIconSvg","StateSelectorBase","StateSelector","_force","_o","_diff","selectIsPristine","quickLabelMetadataForm","QuickLabelPanelBase","publish","renderAutoSaveToggle","renderButtons","canBePublished","isPristine","btnClass","renderProp","_prop$get","_tmpl$get","renderSidePanelBody","renderNotice","previousCan","selectquickLabelThesaurus","QuickLabelPanel","tmpls","modal","hideModal","getTemplates","metadataForm","multipleEdit","multipleEditForm","SearchDescription","descriptions","propText","getPropertyText","getPropertiesTexts","SearchItem","handleResumeClicked","handleStopClicked","onDeleteClicked","onStopClicked","onResumeClicked","SearchList","searches","SemanticSearchSidePanel","registeredForUpdates","onSearchUpdated","showSemanticSearchPanel","StackTrace","expand","toggle","validations","formatedMessage","conformValidations","ImportProgress","importState","importStart","importProgress","importError","importEnd","importEntities","ImportPanel","renderForm","templ","renderUploadProgress","uploadProgress","renderContents","importUploadProgress","QuickLabelHeaderBase","thesaurusName","QuickLabelHeader","clearState","exportEnd","exportSearchResultsContent","exportSearchResultsFileName","exportSearchResults","fileName","Blob","download","triggerLocalDownload","exportDocuments","exportFilters","finalSearchParams","contentDisposition","extractFileName","requestHandler","ExportButton","export","exportWithCaptcha","btnClassName","exportSearchResultsProcessing","extractTitle","charAt","toUpperCase","PDFUploadButton","onChangePDFs","LibraryFooter","LibraryLayoutBase","noScrollable","contentDivClass","ViewMetadataPanel","SelectMultiplePanelContainer","SemanticSearchPanel","TableCellComponent","cellValue","inheritedMedia","typeMedia","formatProperty","TableCell","TableRowComponent","columnValue","onRowClick","columnValues","column","columnName","commonPropValue","getColumnValue","renderCell","TableRow","TableRowsComponent","TableRows","TableViewerComponent","clientHeight","onScroll","handleScroll","selectTableViewColumns","TableViewer","Library","superComponentWillReceiveProps","viewer","LibraryLayout","MapViewComponent","processedMarkers","MapView","withRef","LibraryMap","mapView","checkbox","numeric","relationshipfilter","generatedid","newSettingsConfigs","SUPPORTED_PROPERTIES","PropertyConfigurationModal","currentProperties","currentValues","setValues","_template$properties","_template$_id2","_template$_id","Icons","submitedValues","processedValues","templateConfig","MetadataExtractionComponent","saveConfigs","configurationModalIsOpen","arrangeTemplatesAndProperties","_this$props$settings$","_this$props$settings$2","formatted","setting","rawProperties","_template$get2","saveConfigurations","formattedData","extractionSettings","entries","propIndex","MetadataExtractionDashboard","computeVisiblePages","activePage","totalPages","Pagination","resetActivePage","onPageChange","onPageSizeChange","setActivePage","visiblePages","setVisiblePages","pageSize","setPageSize","changePage","pageNumber","array","pageLabel","newSize","SuggestionAcceptanceModal","setAllLanguages","SuggestionState","equalsForType","isSame","isSameDate","getSuggestionState","modelCreationDate","obsolete","matchState","suggestedValue","currentValue","equals","getMatchingState","labelState","labeledValue","getLabelingState","Empty","empty","labelEmpty","Value","valueEmpty","Match","labelMatch","valueMatch","Mismatch","emptyMismatch","labelMismatch","valueMismatch","languageKey","Document","pages","previousMostVisible","pdfLoaded","onDocumentReady","onTextDeselection","onTextSelected","handleClick","textSelection","disableTextSelection","regionId","executeOnClickHandler","doScrollToActive","activeReference","onPDFLoaded","handleOver","renderPDF","onPDFReady","onPageLoaded","onLoad","onTextSelection","determineDirection","pagesContainer","onMouseOver","selectSourceRange","selectActiveRef","panelIsOpen","forceSimulateSelection","updateDoc","omit","extractredMetadata","entityFileId","__extractedMetadata","dispatchUpdatedDocument","getDocument","omitRelationships","docByFilename","getEntityDoc","loadTargetDocument","referencesAPI","reloadDocument","cancelTargetDocument","selectionActions","addToToc","textSelectedObject","currentToc","connected","onEntitySave","disp","PDFSidePanel","entitySuggestion","closeSidePanel","handleSave","setEntity","setFile","entityRequest","fetchEntity","fileRequest","fetchFile","SourceDocument","addPaddings","chartData","slots","buildChartData","overlaying","overlayingIndex","extractOverlying","totalValue","subtotal","getTotalValue","ratio","mainChart","slotsForColor","round","buildMainBar","paddedMain","overChart","overlapedData","buildOverlayingBar","GridChart","squareSide","spaceBetweenSquares","side","space","getColumnsQuantity","containerRef","containerWidth","setWidth","useLayoutEffect","readWidth","_containerRef$current","offsetWidth","useContainerWidth","columnKeys","rowKeys","col","TrainingHealthLegend","td","toPercentage","TrainingHealthDashboard","stats","labeled","nonLabeledMatching","nonLabeledNotMatching","emptyOrObsolete","mapStats","CancelFindingSuggestionModal","EntitySuggestions","reviewedProperty","acceptIXSuggestion","isMounted","suggestions","setSuggestions","setTotalPages","setResetActivePage","setStatus","acceptingSuggestion","setAcceptingSuggestion","openCancelFindingSuggestions","setOpenCancelFindingSuggestions","sidePanelOpened","setSidePanelOpened","setStats","actionsCellButtonClassNames","isRequiredFieldWithoutSuggestion","getTableProps","getTableBodyProps","headerGroups","prepareRow","gotoPage","selectedFlatRows","toggleAllRowsSelected","pageIndex","actionsCell","segmentCell","stateFilter","filterValue","formatValue","currentValueCell","original","suggestionCell","accessor","Cell","Filter","useTable","manualPagination","manualFilters","pageCount","autoResetPage","autoResetFilters","useFilters","usePagination","useRowSelect","useRowState","useSticky","suggestionsTable","toggleRowSelected","showConfirmationModal","showPDF","segment","retrieveSuggestions","queryFilter","number","retriveStats","getStats","getWrappedSuggestionState","acceptedSuggestion","newCurrentValue","_trainModel","trainModel","_cancelFindingSuggestions","cancelFindingSuggestions","ixStatus","modelStatus","_","ready","sending_labeled_data","processing_model","processing_suggestions","headerGroup","getHeaderGroupProps","getHeaderProps","canFilter","getRowProps","cells","cell","getCellProps","_acceptedSuggestion$s","_entity$metadata","changedPropertyValue","handledErrors","_handledErrors$this$p","errorCode","safeRequestId","acceptEntitySuggestion","IXSuggestions","routeParams","propertiesKey","_ensure$get","getById","loadPages","resetPage","updateValue","savePage","_rev","deletePage","savingPage","PageCreator","backUrl","pageUrl","nameGroupClass","PagesList","PagesAPI","Script","scriptElement","appendScript","onError","removeScript","scriptRendered","PageViewer","warningPageError","removeCustomPageError","customPageError","renderErrorWarning","itemLists","setBrowserTitle","originalText","scriptCode","parsedPageError","SSRError","apiResponse","prettyMessage","parseSSRError","Context","pageView","formatParts","metaChar","escape","str","escapeCode","opener","closer","iterator","openTokens","matchStartIndex","lastIndex","listEscape","markdownEscapedValues","additionalOptions","optionsMatch","matchString","extractAdditionalOptions","urlParams","prepareLists","listsData","pageItemLists","searchs","sanitizedParams","queryDefault","buildQuery","decodeURI","getPageAssets","localDatasets","_page$metadata","pageContent","parsableDatasets","pathEnd","replaceDynamicProperties","dataSets","searchOptions","listSearchs","failedExpressions","uniq","editRelationType","deleteRelationType","checkRelationTypeCanBeDeleted","relationtypeId","setAsDefault","countByThesauri","prepareTemplate","templateCommonProperties","resetTemplate","addProperty","propertyWithDefaults","setPropertyDefaults","setNestedProperties","propertyIndex","inserted","removeProperty","reorderProperty","originIndex","targetIndex","saveTemplate","inserting","sanitizedProp","sanitize","saveRelationType","ColorPicker","onButtonClick","onColorChange","hex","oldState","colors","onChangeComplete","editProperty","checkErrorsOnLabel","duplicated","titles","inheritTypeToShow","inheritType","invalidType","typeConflict","relationConflict","inheritConflict","contentTitle","contentConflict","SimilarProperty","templateProperty","typeIcon","invalidThesauri","typeToShow","relationTypeName","SharedProperties","getRelationTypeName","relationTypeId","getThesauriName","thesauriId","findSameLabelProperties","findProperty","similarProperties","propertyMatch","otherInheritedProperty","templatesWithSameLabelProperties","hasContent","FilterSuggestions","propertySchemaElement","PropertyConfigOption","PropertyConfigOptions","canBeFilter","FormConfigInput","labelHasError","FormConfigSelect","warning","initialContent","contentRequiredError","orderBy","FormConfigRelationship","showInheritSelect","onInheritChange","onInheritTypeChange","resetFormValue","labelError","relationTypeError","showInheritOption","inheritSelectPropertyType","labelClass","contentValidation","getTemplateProperties","targetTemplate","getInheritSelectPropertyType","_state$template$data$","inheritedPropertyId","_template$formState$p","_template$formState$p2","FormConfigNested","ViolatedArticlesNestedProperties","PrioritySortingLabel","FormConfigCommon","getZeroIndex","renderTitleField","labelKey","requiredLabel","duplicatedLabel","FormConfigMultimedia","canShowInCard","helpText","canSetStyle","canBeRequired","isLabelDuplicated","commonPropIndex","MetadataProperty","defaultInput","connectDragSource","isDragging","connectDropTarget","hasErrors","editingProperty","propertyClass","iconClass","propertyLabel","isRelationDuplicated","syncedTemplate","hover","monitor","dragIndex","hoverIndex","alreadyReordered","dropTarget","beginDrag","endDrag","dragSource","errorRoot","errorIndex","isErrorOnThisField","RemovePropertyConfirm","propertyBeingDeleted","modals","RemovePropertyModal","THESAURI_SAVED","getThesauri","getModelStatus","getModelTrainStatus","saveThesaurus","importThesaurus","updateValues","updatedValues","_updatedValues","emptyIdx","moveEmptyItemToBottom","listContainsGroups","oldItem","addValue","addGroup","newGroup","removeValue","thesaurusSave","_errors$thesaurus","_errors$thesaurus2","register","isNotDuplicated","relationshipTypes","relationshipTypeSave","_errors$relationshipT","_errors$relationshipT2","relationshipType","ToggleChildren","toggled","onToggleOff","onToggleOn","isToggled","setToggled","selectedPage","validateName","getLabelRequiredValidator","propertiesArrayKey","getLabelDuplicatedValidator","validity","sameProperty","differentLabel","validateDuplicatedLabel","titleIndex","differentRelationtype","sameContent","isNotAnyTemplate","validateDuplicatedRelationship","getTemplateDefaultColor","allTemplates","MetadataTemplate","templateConflict","largeNumberOfEntities","environment","entitiesCountOfTemplate","confirmAndSaveTemplate","confirmationKey","reindex","confirmation","defaultColor","entityViewPage","savingTemplate","canDrop","drop","synced","PropertyOption","addPropertyAction","optionSource","canDrag","getDropResult","TemplateCreator","noDictionaries","noRelationtypes","project","getAndLoadEntity","loadConnections","toggleOneUpFullEdit","_state$oneUpReview$st","oneUpState","oneUpReview","fullEdit","entityFormState","switchOneUpEntity","delta","_state$oneUpReview$st2","requestHeaders","totalDocs","indexInDocs","switchToEntity","toggleOneUpLoadConnections","_state$oneUpReview$st3","openMenu","closeMenu","ContextMenu","SubMenu","forceShow","overrideShow","matchesType","matchesWrap","WrappedComponent","align","contextMenu","ShowSidepanelMenu","SearchEntitiesForm","AddEntities","RelationshipMetadata","savedEntity","isInteger","renderBody","twoColumns","selectedConnection","hubsBeingEdited","connectionSelector","selectEntity","selectOneUpState","selectMlThesauri","_get$toString","_get","OneUpEntityButtonsBase","renderNextButton","isLast","_delta","_save","OneUpEntityButtons","panelOpen","_tab","_reference","OneUpSidePanelBase","mlProps","_templates$find","_entity$template$toSt","_entity$template","OneUpSidePanel","_selectOneUpState","OneUpTitleBarBase","backToThesaurus","reviewThesaurusName","reviewThesaurusId","navButtons","prevClass","nextClass","navAction","reviewThesaurusValues","maxTotalDocs","OneUpTitleBar","OneUpEntityViewerBase","nonMlProps","renderFullEditToggle","_entity$template$toSt2","_entity$template2","Relationships","OneUpEntityViewer","buildInitialOneUpState","numDocuments","_documentsRequest$dat","_documentsRequest$dat2","thesauriKeys","res2","tv","loaded","includeReviewAggregations","TemplatesAPI","ThesauriAPI","firstSharedId","SearchButton","metadataPanelIsOpen","filtersValues","DocumentResultsPanel","commonTemplateSelector","multiedit","SemanticSearchMultieditPanel","setEntities","renderAditionalText","resultsSize","aboveThreshold","percentage","SemanticSearchResults","onLoadMoreClick","multiEdit","minRelevantSentences","skip","totalCount","new","currentUser","UserGroupList","userGroups","handleAddGroup","selectedId","setSelectedId","userGroup","_userGroup$_id","selectRow","loadUserGroups","getGroups","loadUsers","users","UsersAPI","UserGroupSidePanel","opened","onSave","selectedUsers","setSelectedUsers","defaultValues","availableUsers","m1","m2","username","sortByName","groupToSave","updatedMembers","nameVal","existingGroup","maxLength","minLength","usersIds","saveUserGroup","userGroupToDispatch","saveGroup","deleteUserGroup","deleteGroup","UserGroups","loadGroups","loadAllUsers","selectedGroup","setSelectedGroup","groupList","userList","handlers","handleDelete","UserList","handleAddUser","sortedUsers","_user$_id2","_user$groups","_user$_id","roleTranslationKey","_group$_id","permissionsByRole","admin","editor","collaborator","permissionIcons","full","none","PermissionsList","rolePermissions","permission","roleIcon","UserSidePanel","onReset2fa","onResetPassword","permissionsModalOpened","setPermissionsModalOpened","selectedGroups","setSelectedGroups","availableGroups","userRoles","isUnique","existingUser","_existingUser$usernam","_existingUser$email","togglePermissionList","userToSave","updatedGroups","groupIds","newUser","createdUser","userToNotify","saveUser","deleteUser","reset2fa","Users","loadAllGroups","createUser","saveUserData","deleteUserData","resetTwoFactorAuth","resetUserPassword","_selectedUser$_id","userGroupList","selectedUser","setSelectedUser","COLLABORATOR","handleResetPassword","AccountSettings","repeatPassword","passwordChange","repeatPasswordChange","updatePassword","updateEmail","emailChange","passwordError","setUser","userData","rev","passwordsDontMatch","renderPasswordField","_settings$data","_settings$data$links","processedSettings","validateHomePageRoute","matcher","landingPageTip","customFavIcon","publicSharing","cookiePolicy","emails","characterSupport","analytics","mapAxis","publicForm","openPublicForm","ocrTrigger","SettingsLabel","SettingsFormElement","tip","labelClassName","inputsClassName","setSettings","collectionSettingsObject","templatesObject","watch","setValue","getValues","pattern","month","day","newCollectionSettings","_newCollectionSetting","saveParameters","SettingsAPI","home_page","newSettings","Customisation","customCSS","saveSettings","deleteTemplate","checkTemplateCanBeDeleted","usedForDocuments","EntityTypesList","setAsDefaultButton","defaultTemplateMessage","syncedTemplateMessage","deleteTemplateButton","sortTemplates","itemSource","originalItem","removeItem","itemTarget","hoverBoundingRect","findDOMNode","hoverMiddleY","hoverClientY","getClientOffset","y","moveItem","DragAndDropItem","iconHandle","connectDragPreview","dragAndDropItem","dragPreview","DragAndDropContainer","renderItem","_dragIndex","containerTarget","dragAndDropContainer","activeFilters","inactiveFilters","filt","matchId","insideGroup","_filt","activesChange","unactivesChange","renderActiveItems","renderInactiveItems","subitem","sanitizeFilterForSave","_filter","propSettings","removeGroup","activeFiltersState","itemId","removeItemIterator","Languages","languageToDelete","languageToAdd","setAsDeafultButton","setDefault","deleteButton","localizedLabel","currentLanguages","currentLanguagesIsos","elasticSupportedIsos","ISO639_1","filteredLanguagesList","notSupported","notSupportedLanguage","editLink","loadLinks","addLink","sublinks","addGroupLink","sortLink","removeLink","removeGroupLink","groupLinkIndex","sublinkIndex","saveLinks","_link","groupStyles","linkStyles","LinkSource","LinkTarget","NavlinkForm","firstLoad","focusableInput","blockReferences","previousProps","focusOnNewElement","previousLinks","_links$index$sublinks","titleClass","marginLeft","paddingLeft","paddingBottom","connectDND","navlinksData","navlinksFormState","NavlinksSettings","hostname","savingNavlinks","RelationTypesList","deleteThesaurus","checkThesaurusCanBeDeleted","reloadThesauri","ThesauriList","getThesaurusSuggestionActions","topicClassificationEnabled","enable_classification","toLocaleString","getThesaurusModifyActions","thesaurusNode","scope","topicClassification","TranslationsList","resolveTemplateProp","matchingProp","baseQuery","unpublishedOnly","getReadyToReviewSuggestionsQuery","getReadyToPublishSuggestionsQuery","getLabelsQuery","SettingsNavigation","allDocsWithSuggestions","reqParams","tup","perm","uniqueDocs","th","setToken","_settings$get","_preserve$get","preserve","userConfigs","conf","_conf$get","savedToken","navigator","clipboard","writeText","CustomUploads","customUploads","OnTemplateLoaded","templateLoaded","ThesauriFormField","groupInput","renderValue","ThesauriFormGroup","onGroupChanged","ThesauriFormItem","groupItem","sanitizeThesauri","sanitizedThesauri","ThesauriForm","importThesaurusFile","addEmptyValueAtTheEnd","focusIfWasGroup","setInitial","previousValues","addedValue","lastValueIsGroup","previousLastValueWasGroup","isNew","validation","getAndPopulateLabelCounts","queryBuilderFunc","assocProp","countSuggestions","_assocProp$name2","totalLabels","totalValues","sanitizedSuggestionsTBPublished","SearchAPI","_assocProp$name","thesaurusPropertyName","suggestionFieldName","rawValues","rawResult","perTemplate","templateResult","flattenLabelCounts","updateCockpitData","_serverRequestParams","_state$thesauri$sugge","suggestInfo","syncState","trainState","docsWithSuggestionsForPublish","docsWithSuggestionsForReview","docsWithLabels","SyncState","TrainState","getValuesSortedByName","selectSuggestInfo","selectThesaurus","selectTasksState","tasksState","startTraining","thesaurusId","toggleEnableClassification","_updatedThesaurus","topicNode","topic","_suggestInfo$docsWith","_suggestInfo$docsWith2","_suggestInfo$docsWith3","_suggestInfo$docsWith4","_suggestInfo$docsWith5","_suggestInfo$docsWith6","_label","_suggestInfo$model$to","_suggestInfo$model","_suggestInfo$model$to2","_suggestInfo$model2","_suggestInfo$property","_suggestInfo$property2","_suggestInfo$property3","suggestionCount","labelCount","topicQuality","topics","quality","learningNotice","_suggestInfo$model$co","_suggestInfo$model3","_suggestInfo$model3$c","_suggestInfo$model$co2","_suggestInfo$model4","_suggestInfo$model4$c","_suggestInfo$docsWith7","_suggestInfo$model5","_tasksState$TrainStat","_tasksState$TrainStat2","numTopics","numTrained","num_test","num_train","numLabeled","modelTime","preferred","isLearning","modelDate","learning","topicNodes","interval","renderEnableSuggestionsToggle","publishButton","_suggestInfo$docsWith8","thesaurusPropertyRefName","_tasksState$SyncState","UploadBox","UploadsHeader","Login","error2fa","tokenRequired","setLogin","setRecoverPassword","resolveSuccessfulLogin","private","reloadThesauris","submitLabel","ResetPassword","createAccount","UnlockAccount","disableButton","pageToDisable","Paginator","prevPage","nextPage","PaginatorWithPage","restProps","ConfirmCloseForm","semanticDoc","rawDoc","tocFormLength","closeConnectionsPanel","ViewerDefaultMenu","ViewerTextSelectedMenu","showPanel","hasRelationTypes","TargetDocumentHeader","docHTML","targetDocHTML","ocrStatusTips","ocrIsToggled","loadDocument","ocrStatus","setOcrStatus","lastUpdated","listenOnSuccess","listenOnError","getOcrStatus","postToOcr","formatDate","statusDisplay","Viewer","firstRender","handlePlainTextClick","sidepanelTab","prepareClassName","includeFooter","showConnections","renderNoDoc","showTextSelectMenu","pageText","documentTitle","TargetDocument","ConnectedViewer","rawText","PDFView","requestViewerState","changeBrowserHistoryPage","newPage","_this$props$location","queryWithoutPage","EntityViewer","hasPageView","rawEntity","mainClass","entityTemplateId","templateWithPageView","defaultTab","pickEntityFields","pick","propertyDisplayType","formattedItem","metadataField","displayValue","availableProperties","take","toPairs","formatPropertyValue","aggregateByTemplate","inheritingProperties","groupedRelations","groupName","formmatedValues","formatAggregationsMetadata","aggregateRelationships","entityTemplate","inheriting","_entityTemplate$prope","inheritedProperties","entityProperty","inheritingPropertyName","_entityProperty$inher","getInheritingProperties","filteredRelations","targetEntities","filterInheritedRelations","relationshipGroups","aggregated","relationshipId","aggregatedByTemplate","prepareAssets","entityRaw","formatEntity","formattedMetadata","formattedProperty","relationshipAggregations","inherited_relationships","formatEntityData","Entity","pageActions","assets","ViewerComponent","EntityView","ViewerRoute","nextQuery","sameQueryFile","LibraryOverrideRequestState","LibraryTable","onEnter","needsAuth","_nxtState","enterOnLibrary","libraryDefaults","callBack","defaultView","_nextState","getDefaultLibraryComponent","getIndexRoute","homePageSetting","customHomePage","getPageIndexRoute","setSelectedTab","ThesaurusCockpit","Activitylog","OneUpReview","refreshSearch","mainView","uploadsSection","Provider","history","Routes","disconnectNotifyId","disconnectTimeoutMessage","reason","SENTRY_APP_DSN","S","release","UWAZI_VERSION","UWAZI_ENVIRONMENT","dsn","integrations","tracesSampleRate","getElementById","_socket","_event","_listener","off","transports","upgrade","reconnectSocket","disconnect","unsetPanelsWhenUnsetSelections","deleteIn","userSelectedTab","menu","panels","referencePanel","targetReferencePanel","viewMetadataPanel","connecting","resetState","conformRelationships","hubsImmutable","relationshipsArray","newMemo","addTo","updatedHubs","relationshipsToMove","relationshipsMoved","toUpdate","updatedRightRelationships","rightRelationshipsIndex","_relationship","relationShipMoved","_hub","updatedState","resultsFiltersForm","resultsThreshold","minRelevantScore","getBySharedId","docIndex","getFilterByObjectWithId","itemToSearch","candidateItem","getFilterBySharedId","sharedIdToSearch","getFilter","updateTotalRows","documentsReducer","insert","att","previewDoc","maxLevel","minLevel","columnsWithSelection","previousColumnState","previousHidden","_action","searchForm","settingForm","showInlineEditForm","inlineEditForm","inlineEditModel","relationTypeForm","connectionsList","createStore","applyMiddleware","create","module","hot","compare","baseA","baseB","aParts","bParts","x","indexCompare","compareDottedList","localCompare","evalIfHasProperty","sortedArray","copyArray","loadingProgressBar","requests","showSpinner","easing","speed","minimum","doneLoading","errorMessages","handleErrorStatus","validationError","extractMessageFromValidation","finalMessage","errorMessage","errorExpression","extractMessageFromError","isNonUsualApiError","TypeError","_request","req","handleError","post","put","COLORS","func","wait","immediate","later","callNow","isClient","events","appendNewOcurrency","sortableOcurrences","appendMetadata","ocurrs","override","sortingDefault","validTemplates","getSortableOcurrences","priority","prev","criteriaValid","isValid","currentIsValid","sortable","asessCriteriaValid","limitedLength","generateID","characterLength","numericLength","extraLength","randomString","outputLength","_i","random","characterPart","numericPart","FetchResponseError","toUrlParams","encodedValue","risonParser","attemptRisonDecode","param","_fetch","_headers","Cookie","URLSearchParams","setCookie","responseHeaders","processedResponse","head","uploadFile","_cookie","getThesaurusPropertyNames","_t$properties","_p$content","prop1","prop2","_prop1$inherit","_prop2$inherit","allTemplatesHaveIt","allHaveIt","templateHasProperty","excludedTypes","allUniqueProperties","allProperties","getInheritedProperty","comonFilters","defaultFilters","defaultfilter","textFields","entityDocuments","entityLanguage","documentMatchingEntity","documentMatchingDefault","isSerializedFile","constructFile","fileParts","fileFormat","fileContent","buff","Buffer","prepareHTMLMediaView","elasticLanguages","arb","bul","cat","cjk","ckb","ces","dan","deu","ell","eng","eus","fas","fin","fra","gle","glg","hin","hun","hye","ind","ita","lav","lit","nld","nno","nob","por","ron","rus","spa","swe","tha","tur","availableLanguages","translationAvailable","getCompatibleTypes","httpRequest","headerKey","fieldKey","isBlobFile","isString","ensure","argument","wrapValidator","stack","oneOf","tsType","linkSchema","dateRangeSchema","latLonSchema","maximum","propertyValueSchema","inheritedValueSchema","selectionRectanglesSchema","bulk","left","webpackContext","webpackContextResolve","__webpack_require__","exports","__webpack_module_cache__","moduleId","cachedModule","__webpack_modules__","amdO","O","chunkIds","fn","notFulfilled","Infinity","fulfilled","j","getter","__esModule","definition","chunkId","promises","miniCssF","globalThis","Function","hmd","script","needAttach","scripts","getElementsByTagName","getAttribute","charset","setAttribute","onScriptComplete","onerror","doneFns","parentNode","toStringTag","nmd","paths","fullhref","existingLinkTags","dataHref","existingStyleTags","findStylesheet","linkTag","errorType","realHref","createStylesheet","miniCss","installedChunks","installedChunkData","realSrc","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","chunkLoadingGlobal","self","__webpack_exports__"],"sourceRoot":""}