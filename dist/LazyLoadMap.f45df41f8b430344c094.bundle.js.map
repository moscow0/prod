{"version":3,"file":"LazyLoadMap.f45df41f8b430344c094.bundle.js","mappings":"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","sources":["webpack://uwazi/./app/react/Map/MapHelper.tsx","webpack://uwazi/./app/react/Map/TilesProviderFactory.ts","webpack://uwazi/./app/react/Map/GoogleMapLayer.ts","webpack://uwazi/./app/react/Map/LMap.tsx"],"sourcesContent":["function ownKeys(object, enumerableOnly) {var keys = Object.keys(object);if (Object.getOwnPropertySymbols) {var symbols = Object.getOwnPropertySymbols(object);enumerableOnly && (symbols = symbols.filter(function (sym) {return Object.getOwnPropertyDescriptor(object, sym).enumerable;})), keys.push.apply(keys, symbols);}return keys;}function _objectSpread(target) {for (var i = 1; i < arguments.length; i++) {var source = null != arguments[i] ? arguments[i] : {};i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {_defineProperty(target, key, source[key]);}) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));});}return target;}function _defineProperty(obj, key, value) {if (key in obj) {Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });} else {obj[key] = value;}return obj;}import L, { latLng } from 'leaflet';\nimport { svgPathData as faMapMarkerPath } from '@fortawesome/free-solid-svg-icons/faMapMarker';\nimport { t } from \"../I18N\";\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst DEFAULT_COLOR = '#d9534e';\n\nclass DataMarker extends L.Marker {\n\n\n  constructor(\n  latLngExpression,\n  properties,\n  options)\n  {\n    super(latLngExpression, options);_defineProperty(this, \"properties\", void 0);\n    this.properties = properties;\n  }}\n\n\nconst pointMarkerIcon = (color) =>\nL.divIcon({\n  html: `\n<svg viewBox=\"0 0 384 512\" fill=\"${color || DEFAULT_COLOR}\"><path d=\"${faMapMarkerPath}\"/></svg>`,\n  className: '',\n  iconSize: [24, 40],\n  iconAnchor: [12, 40] });\n\n\nconst circleIcon = (color) =>\nL.divIcon({\n  html: `\n<svg height=\"100\" width=\"100\">\n  <circle cx=\"10\" cy=\"10\" r=\"10\" stroke=\"white\" stroke-width=\"1\" fill=\"${color || DEFAULT_COLOR}\"/>\n</svg>`,\n  className: '',\n  iconSize: [20, 36],\n  iconAnchor: [12, 12] });\n\n\nconst getMarkerIcon = ({ properties }) => {var _properties$templateI;\n  const libraryMarker = properties.libraryMap || false;\n  const color = properties.color || ((_properties$templateI = properties.templateInfo) === null || _properties$templateI === void 0 ? void 0 : _properties$templateI.color) || DEFAULT_COLOR;\n  return !libraryMarker ? pointMarkerIcon(color) : circleIcon(color);\n};\n\nconst getMarkerTooltip = (marker) => {var _marker$properties$te, _marker$properties$en, _marker$properties$en2, _marker$properties$en3, _marker$properties$en4, _marker$properties$te2;\n  const templateColor = ((_marker$properties$te = marker.properties.templateInfo) === null || _marker$properties$te === void 0 ? void 0 : _marker$properties$te.color) || DEFAULT_COLOR;\n  const label = t((_marker$properties$en = marker.properties.entity) === null || _marker$properties$en === void 0 ? void 0 : _marker$properties$en.template, marker.properties.label, null, false);\n  const title = t((_marker$properties$en2 = marker.properties.entity) === null || _marker$properties$en2 === void 0 ? void 0 : _marker$properties$en2.sharedId, (_marker$properties$en3 = marker.properties.entity) === null || _marker$properties$en3 === void 0 ? void 0 : _marker$properties$en3.title, null, false);\n  const templateName = t((_marker$properties$en4 =\n  marker.properties.entity) === null || _marker$properties$en4 === void 0 ? void 0 : _marker$properties$en4.template, (_marker$properties$te2 =\n  marker.properties.templateInfo) === null || _marker$properties$te2 === void 0 ? void 0 : _marker$properties$te2.name,\n  null,\n  false);\n\n\n  const markerLabel = marker.properties.inherited ? label : marker.properties.info;\n\n  return `<div class=\"popup-container\">\n            <span class=\"btn-color\" style=\"background-color: ${templateColor}\">\n              <span class=\"translation\">${templateName}</span>\n            </span>&nbsp;\n            <span class=\"popup-name\">${title}</span>\n            &nbsp;(<span class=\"popup-metadata-property\">${label}</span>)\n            <div class=\"marker-info\">\n                <Icon className=\"tag-icon\" icon=\"tag\" />\n                ${markerLabel}\n            </div>\n          </div>\n        </div>\n      `;\n};\n\nconst getClusterMarker = (markerPoint) => {var _marker$properties;\n  const icon = getMarkerIcon(markerPoint);\n  const marker = new DataMarker(\n  [markerPoint.latlng.lat, markerPoint.latlng.lng],\n  markerPoint.properties,\n  { icon });\n\n  if (markerPoint.properties.libraryMap && markerPoint.properties.templateInfo) {\n    marker.bindTooltip(getMarkerTooltip(markerPoint));\n  } else if ((_marker$properties = marker.properties) !== null && _marker$properties !== void 0 && _marker$properties.info) {var _marker$properties$en5, _marker$properties2;\n    const tooltip = t((_marker$properties$en5 = marker.properties.entity) === null || _marker$properties$en5 === void 0 ? void 0 : _marker$properties$en5.template, (_marker$properties2 = marker.properties) === null || _marker$properties2 === void 0 ? void 0 : _marker$properties2.info, null, false);\n    marker.bindTooltip(tooltip);\n  }\n  return marker;\n};\n\nconst parseMarkerPoint = (\npointMarker,\ntemplates,\nlibraryMap = false) =>\n{var _pointMarker$properti, _pointMarker$properti2, _pointMarker$properti3;\n  const templateInfo = (_pointMarker$properti = pointMarker.properties) !== null && _pointMarker$properti !== void 0 && _pointMarker$properti.entity ?\n  templates[pointMarker.properties.entity.template] :\n  undefined;\n\n  return {\n    latlng: latLng(pointMarker.latitude, pointMarker.longitude),\n    properties: _objectSpread(_objectSpread({},\n    pointMarker.properties), {}, {\n      label: pointMarker.label || ((_pointMarker$properti2 = pointMarker.properties) === null || _pointMarker$properti2 === void 0 ? void 0 : _pointMarker$properti2.info),\n      entity: (_pointMarker$properti3 = pointMarker.properties) === null || _pointMarker$properti3 === void 0 ? void 0 : _pointMarker$properti3.entity,\n      templateInfo,\n      libraryMap }) };\n\n\n};\n\nconst checkMapInitialization = (map, containerId) => {\n  if (!map) {\n    const container = L.DomUtil.get(containerId);\n    if (container != null) {\n      // @ts-ignore\n      container._leaflet_id = null;\n    }\n  }\n};\n\nconst preventDefaultEvent = (event) => {\n  // @ts-ignore\n  event.preventDefault();\n};\n\nexport {\nDataMarker,\ngetClusterMarker,\nparseMarkerPoint,\ncheckMapInitialization,\npreventDefaultEvent };","function ownKeys(object, enumerableOnly) {var keys = Object.keys(object);if (Object.getOwnPropertySymbols) {var symbols = Object.getOwnPropertySymbols(object);enumerableOnly && (symbols = symbols.filter(function (sym) {return Object.getOwnPropertyDescriptor(object, sym).enumerable;})), keys.push.apply(keys, symbols);}return keys;}function _objectSpread(target) {for (var i = 1; i < arguments.length; i++) {var source = null != arguments[i] ? arguments[i] : {};i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {_defineProperty(target, key, source[key]);}) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));});}return target;}function _defineProperty(obj, key, value) {if (key in obj) {Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });} else {obj[key] = value;}return obj;}import L from 'leaflet';\nimport { t } from \"../I18N\";\nimport { getGoogleLayer } from \"./GoogleMapLayer\";\n\nconst DEFAULT_MAPBOX_TOKEN =\n'pk.eyJ1Ijoibnd5dSIsImEiOiJjazlta3liaWowMHBkM2pwaHFiaG0wcDBqIn0.47wbPKb2A4u3iCt34qrSRw';\n\nconst mapBoxStyles = {\n  Streets: 'mapbox/streets-v11',\n  Satellite: 'mapbox/satellite-v9',\n  Hybrid: 'mapbox/satellite-streets-v11' };\n\n\nconst GoogleMapStyles = {\n  Streets: 'roadmap',\n  Satellite: 'satellite',\n  Hybrid: 'hybrid' };\n\n\nconst getGoogleLayers = () =>\nObject.keys(GoogleMapStyles).reduce(\n(layers, styleId) => _objectSpread(_objectSpread({},\nlayers), {}, {\n  [styleId]: getGoogleLayer(GoogleMapStyles[styleId]) }),\n\n{});\n\n\nconst getMapboxLayers = (accessToken) => {\n  const mapboxUrl =\n  'https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token={accessToken}';\n\n  return Object.keys(mapBoxStyles).reduce((layers, styleId) => {\n    const styleLabel = t('System', styleId, null, false);\n    return _objectSpread(_objectSpread({},\n    layers), {}, {\n      [styleLabel]: L.tileLayer(mapboxUrl, {\n        id: mapBoxStyles[styleId],\n        tileSize: 512,\n        zoomOffset: -1,\n        accessToken: accessToken || DEFAULT_MAPBOX_TOKEN,\n        zIndex: 0 }) });\n\n\n  }, {});\n};\n\nconst mapFunction = {\n  google: getGoogleLayers,\n  mapbox: getMapboxLayers };\n\nconst getMapProvider = (provider, mapApiKey) => {\n  const mapLayers = mapFunction[provider](mapApiKey);\n  return { layers: Object.values(mapLayers), baseMaps: mapLayers };\n};\n\nexport { getMapProvider };","import L from 'leaflet';\nimport 'leaflet.gridlayer.googlemutant';\n\nconst getGoogleLayer = (type) =>\nL.gridLayer.googleMutant({\n  type,\n  minZoom: 1,\n  maxZoom: 20,\n  zIndex: 0 });\n\n\nexport { getGoogleLayer };","const _excluded = [\"markers\", \"showControls\"];var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}function ownKeys(object, enumerableOnly) {var keys = Object.keys(object);if (Object.getOwnPropertySymbols) {var symbols = Object.getOwnPropertySymbols(object);enumerableOnly && (symbols = symbols.filter(function (sym) {return Object.getOwnPropertyDescriptor(object, sym).enumerable;})), keys.push.apply(keys, symbols);}return keys;}function _objectSpread(target) {for (var i = 1; i < arguments.length; i++) {var source = null != arguments[i] ? arguments[i] : {};i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {_defineProperty(target, key, source[key]);}) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));});}return target;}function _defineProperty(obj, key, value) {if (key in obj) {Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });} else {obj[key] = value;}return obj;}function _objectWithoutProperties(source, excluded) {if (source == null) return {};var target = _objectWithoutPropertiesLoose(source, excluded);var key, i;if (Object.getOwnPropertySymbols) {var sourceSymbolKeys = Object.getOwnPropertySymbols(source);for (i = 0; i < sourceSymbolKeys.length; i++) {key = sourceSymbolKeys[i];if (excluded.indexOf(key) >= 0) continue;if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;target[key] = source[key];}}return target;}function _objectWithoutPropertiesLoose(source, excluded) {if (source == null) return {};var target = {};var sourceKeys = Object.keys(source);var key, i;for (i = 0; i < sourceKeys.length; i++) {key = sourceKeys[i];if (excluded.indexOf(key) >= 0) continue;target[key] = source[key];}return target;}import React, { useEffect, useState } from 'react';\nimport L from 'leaflet';\nimport 'leaflet.markercluster';\n\nimport uniqueID from \"../../shared/uniqueID\";\nimport 'leaflet/dist/leaflet.css';\nimport 'leaflet.markercluster/dist/MarkerCluster.Default.css';\nimport {\n\ngetClusterMarker,\n\nparseMarkerPoint,\n\ncheckMapInitialization,\npreventDefaultEvent } from \"./MapHelper\";\n\nimport { getMapProvider } from \"./TilesProviderFactory\";\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst LMap = (_ref) => {let { markers: pointMarkers = [], showControls = true } = _ref,props = _objectWithoutProperties(_ref, _excluded);\n  let map;\n  let markerGroup;\n  const [currentMarkers, setCurrentMarkers] = useState();\n  const [currentTilesProvider, setCurrentTilesProvider] = useState(props.tilesProvider);\n  const containerId = uniqueID();\n\n  const clickHandler = (markerPoint) => {\n    if (!props.onClick) return;\n    markerGroup.clearLayers();\n    getClusterMarker(_objectSpread(_objectSpread({}, markerPoint), {}, { properties: {} })).addTo(markerGroup);\n    const event = { lngLat: [markerPoint.latlng.lng, markerPoint.latlng.lat] };\n    props.onClick(event);\n  };\n\n  const initMarkers = () => {\n    const markers = pointMarkers.map((pointMarker) =>\n    parseMarkerPoint(pointMarker, props.templatesInfo, props.renderPopupInfo));\n\n\n    markers.forEach((m) => getClusterMarker(m).addTo(markerGroup));\n    markerGroup.on('clusterclick', (cluster) => {var _props$clickOnCluster;\n      (_props$clickOnCluster = props.clickOnCluster) === null || _props$clickOnCluster === void 0 ? void 0 : _props$clickOnCluster.call(props, cluster.layer.getAllChildMarkers());\n      preventDefaultEvent(cluster);\n    });\n    markerGroup.on('click', (marker) => {var _props$clickOnMarker;\n      (_props$clickOnMarker = props.clickOnMarker) === null || _props$clickOnMarker === void 0 ? void 0 : _props$clickOnMarker.call(props, marker.layer);\n    });\n    if (pointMarkers.length) {\n      map.fitBounds(markerGroup.getBounds(), { maxZoom: 6 });\n    }\n    markerGroup.addTo(map);\n  };\n\n  const initMap = () => {\n    const { layers, baseMaps } = getMapProvider(props.tilesProvider, props.mapApiKey);\n    const shouldScroll = props.renderPopupInfo || props.onClick !== undefined;\n    map = L.map(containerId, {\n      center: [props.startingPoint[0].lat, props.startingPoint[0].lon],\n      zoom: 6,\n      maxZoom: 20,\n      minZoom: 2,\n      zoomControl: false,\n      preferCanvas: true,\n      scrollWheelZoom: shouldScroll });\n\n\n    map.getPanes().mapPane.style.zIndex = '0';\n    markerGroup = L.markerClusterGroup();\n\n    if (showControls) {\n      L.control.zoom({ position: 'bottomright' }).addTo(map);\n      L.control.layers(baseMaps, {}, { position: 'bottomright', autoZIndex: false }).addTo(map);\n    }\n    layers[0].options.zIndex = 0;\n    layers[0].addTo(map);\n    initMarkers();\n    map.on('click', clickHandler);\n  };\n\n  useEffect(() => {\n    const reRender = currentTilesProvider !== props.tilesProvider || !props.onClick;\n\n    if (reRender || currentMarkers === undefined) {\n      setCurrentMarkers(pointMarkers);\n      setCurrentTilesProvider(props.tilesProvider);\n      checkMapInitialization(map, containerId);\n      initMap();\n    }\n    return () => {\n      if (map && reRender) {\n        map.remove();\n      }\n    };\n  }, [pointMarkers, props.tilesProvider, props.mapApiKey]);\n\n  return /*#__PURE__*/(\n    _jsx(\"div\", { className: \"map-container\", \"data-testid\": \"map-container\" }, void 0, /*#__PURE__*/\n    _jsx(\"div\", {\n      id: containerId,\n      className: \"leafletmap\",\n      style: { width: '100%', height: props.height } })));\n\n\n\n};\n\nexport { LMap };"],"names":["ownKeys","object","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","key","_defineProperty","getOwnPropertyDescriptors","defineProperties","defineProperty","obj","value","configurable","writable","DEFAULT_COLOR","DataMarker","constructor","latLngExpression","properties","options","super","this","getMarkerIcon","_properties$templateI","libraryMarker","libraryMap","color","templateInfo","html","className","iconSize","iconAnchor","circleIcon","faMapMarker","pointMarkerIcon","getClusterMarker","markerPoint","_marker$properties","icon","marker","latlng","lat","lng","bindTooltip","_marker$properties$te","_marker$properties$en","_marker$properties$en2","_marker$properties$en3","_marker$properties$en4","_marker$properties$te2","templateColor","label","t","entity","template","title","sharedId","name","inherited","info","getMarkerTooltip","_marker$properties$en5","_marker$properties2","tooltip","mapBoxStyles","Streets","Satellite","Hybrid","GoogleMapStyles","mapFunction","google","reduce","layers","styleId","type","minZoom","maxZoom","zIndex","mapbox","accessToken","styleLabel","id","tileSize","zoomOffset","_excluded","REACT_ELEMENT_TYPE","_jsx","props","children","Symbol","for","defaultProps","childrenLength","childArray","Array","propName","$$typeof","ref","_owner","_objectWithoutProperties","excluded","sourceKeys","indexOf","_objectWithoutPropertiesLoose","sourceSymbolKeys","prototype","propertyIsEnumerable","call","LMap","_ref","map","markerGroup","markers","pointMarkers","showControls","currentMarkers","setCurrentMarkers","useState","currentTilesProvider","setCurrentTilesProvider","tilesProvider","containerId","uniqueID","clickHandler","onClick","clearLayers","addTo","event","lngLat","initMarkers","pointMarker","templates","_pointMarker$properti","_pointMarker$properti2","_pointMarker$properti3","undefined","latLng","latitude","longitude","parseMarkerPoint","templatesInfo","renderPopupInfo","m","on","cluster","_props$clickOnCluster","clickOnCluster","layer","getAllChildMarkers","preventDefault","_props$clickOnMarker","clickOnMarker","fitBounds","getBounds","initMap","baseMaps","provider","mapApiKey","mapLayers","values","getMapProvider","shouldScroll","center","startingPoint","lon","zoom","zoomControl","preferCanvas","scrollWheelZoom","getPanes","mapPane","style","position","autoZIndex","useEffect","reRender","container","_leaflet_id","checkMapInitialization","remove","width","height"],"sourceRoot":""}