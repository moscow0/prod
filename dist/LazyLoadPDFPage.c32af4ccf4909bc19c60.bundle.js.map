{"version":3,"file":"LazyLoadPDFPage.c32af4ccf4909bc19c60.bundle.js","mappings":"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","sources":["webpack://uwazi/./app/react/PDF/PDFJS.js","webpack://uwazi/./app/shared/filterUnique.ts","webpack://uwazi/./app/react/Viewer/components/PageReferences.tsx","webpack://uwazi/./app/react/Viewer/components/PageSelections.tsx","webpack://uwazi/./app/react/PDF/components/PDFPage.js"],"sourcesContent":["function ownKeys(object, enumerableOnly) {var keys = Object.keys(object);if (Object.getOwnPropertySymbols) {var symbols = Object.getOwnPropertySymbols(object);enumerableOnly && (symbols = symbols.filter(function (sym) {return Object.getOwnPropertyDescriptor(object, sym).enumerable;})), keys.push.apply(keys, symbols);}return keys;}function _objectSpread(target) {for (var i = 1; i < arguments.length; i++) {var source = null != arguments[i] ? arguments[i] : {};i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {_defineProperty(target, key, source[key]);}) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));});}return target;}function _defineProperty(obj, key, value) {if (key in obj) {Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });} else {obj[key] = value;}return obj;} /* eslint-disable import/no-mutable-exports, global-require, prefer-destructuring */\nimport { isClient } from \"../utils\";\nimport { EventBus } from 'pdfjs-dist/web/pdf_viewer';\n\nlet PDFJS = {};\nlet pdfjsLib = {};\nlet textLayerFactory = {};\nif (isClient) {\n  require(\"../../../node_modules/pdfjs-dist/web/pdf_viewer.css\");\n\n  PDFJS = require(\"../../../node_modules/pdfjs-dist/web/pdf_viewer.js\");\n  if (process.env.HOT || process.env.NODE_ENV === 'test') {\n    pdfjsLib = require('pdfjs-dist');\n  } else {\n    pdfjsLib = require('pdfjs-dist/webpack');\n  }\n  pdfjsLib.GlobalWorkerOptions.workerSrc = require('pdfjs-dist/build/pdf.worker.entry');\n  textLayerFactory = new PDFJS.DefaultTextLayerFactory();\n}\n\nexport default _objectSpread(_objectSpread({}, PDFJS), pdfjsLib);\n\nexport { textLayerFactory, EventBus };","export const unique = (v, i, a) => a.indexOf(v) === i;","const _excluded = [\"page\"];var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}function ownKeys(object, enumerableOnly) {var keys = Object.keys(object);if (Object.getOwnPropertySymbols) {var symbols = Object.getOwnPropertySymbols(object);enumerableOnly && (symbols = symbols.filter(function (sym) {return Object.getOwnPropertyDescriptor(object, sym).enumerable;})), keys.push.apply(keys, symbols);}return keys;}function _objectSpread(target) {for (var i = 1; i < arguments.length; i++) {var source = null != arguments[i] ? arguments[i] : {};i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {_defineProperty(target, key, source[key]);}) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));});}return target;}function _defineProperty(obj, key, value) {if (key in obj) {Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });} else {obj[key] = value;}return obj;}function _objectWithoutProperties(source, excluded) {if (source == null) return {};var target = _objectWithoutPropertiesLoose(source, excluded);var key, i;if (Object.getOwnPropertySymbols) {var sourceSymbolKeys = Object.getOwnPropertySymbols(source);for (i = 0; i < sourceSymbolKeys.length; i++) {key = sourceSymbolKeys[i];if (excluded.indexOf(key) >= 0) continue;if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;target[key] = source[key];}}return target;}function _objectWithoutPropertiesLoose(source, excluded) {if (source == null) return {};var target = {};var sourceKeys = Object.keys(source);var key, i;for (i = 0; i < sourceKeys.length; i++) {key = sourceKeys[i];if (excluded.indexOf(key) >= 0) continue;target[key] = source[key];}return target;}import React from 'react';\nimport { connect } from 'react-redux';\n\n\nimport { createSelector } from 'reselect';\nimport { Highlight } from 'react-text-selection-handler';\nimport { unique } from \"../../../shared/filterUnique\";\n\n\n\n\n\n\n\n\nexport const PageReferencesComponent = (\nprops) => /*#__PURE__*/\n\nReact.createElement(React.Fragment, null,\n(props.references[props.page] || []).map((r) => {var _r$_id;\n  const color = r._id === props.activeReference ? '#ffd84b' : '#feeeb4';\n\n  if (!r.reference) {\n    return false;\n  }\n  const selectionRectangles = r.reference.selectionRectangles.map(\n  (_ref) => {let { page } = _ref,otherProps = _objectWithoutProperties(_ref, _excluded);return _objectSpread({ regionId: page }, otherProps);});\n\n  const highlight = _objectSpread(_objectSpread({}, r.reference), {}, { selectionRectangles });\n\n  return /*#__PURE__*/(\n    _jsx(\"div\", {\n      \"data-id\": r._id,\n\n      className: \"reference\",\n      onClick: props.onClick.bind(null, r) }, (_r$_id = r._id) === null || _r$_id === void 0 ? void 0 : _r$_id.toString(), /*#__PURE__*/\n\n    _jsx(Highlight, { textSelection: highlight, color: color })));\n\n\n}));\n\n\n\nconst indexdReferencesByPage = createSelector(\n(state) =>\nstate.documentViewer.targetDocReferences.size ?\nstate.documentViewer.targetDocReferences :\nstate.documentViewer.references,\n(state) =>\nstate.documentViewer.targetDoc.get('_id') ?\nstate.documentViewer.targetDoc :\nstate.documentViewer.doc,\n(references, doc) =>\nreferences.\ntoJS().\nreduce(\n(mappedReferences, connection) => {\n  if (doc.get('sharedId') !== connection.entity) {\n    return mappedReferences;\n  }\n\n  if (connection.reference) {\n    const pages = connection.reference.selectionRectangles.\n    map((selection) => selection.page).\n    filter(unique);\n\n    pages.forEach((page) => {\n      if (!page) {\n        return;\n      }\n\n      if (!mappedReferences[page]) {\n        // eslint-disable-next-line no-param-reassign\n        mappedReferences[page] = [];\n      }\n\n      mappedReferences[page].push(connection);\n    });\n  }\n  return mappedReferences;\n},\n{}));\n\n\n\nconst mapStateToProps = (state) => ({\n  references: indexdReferencesByPage(state),\n  activeReference: state.documentViewer.uiState.get('activeReference') });\n\n\nexport const PageReferences = connect(mapStateToProps)(PageReferencesComponent);","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}function ownKeys(object, enumerableOnly) {var keys = Object.keys(object);if (Object.getOwnPropertySymbols) {var symbols = Object.getOwnPropertySymbols(object);enumerableOnly && (symbols = symbols.filter(function (sym) {return Object.getOwnPropertyDescriptor(object, sym).enumerable;})), keys.push.apply(keys, symbols);}return keys;}function _objectSpread(target) {for (var i = 1; i < arguments.length; i++) {var source = null != arguments[i] ? arguments[i] : {};i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {_defineProperty(target, key, source[key]);}) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));});}return target;}function _defineProperty(obj, key, value) {if (key in obj) {Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });} else {obj[key] = value;}return obj;}import React from 'react';\nimport { connect } from 'react-redux';\nimport { uniqBy } from 'lodash';\nimport { Highlight } from 'react-text-selection-handler';\n\n\n\n\n\n\n\nconst uniqueSelections = (selections, newSelections) => {\n  const result = uniqBy([...newSelections, ...selections], 'propertyID');\n  return result;\n};\n\nconst mapStateToProps = (state) => ({\n  userSelections: state.documentViewer.metadataExtraction.get('selections'),\n  entityDocument: state.documentViewer.doc.get('defaultDoc'),\n  isEditing: Boolean(state.documentViewer.sidepanel.metadata._id) });\n\n\nconst connector = connect(mapStateToProps);\n\n\n\nconst PageSelectionsComponent = ({ userSelections, entityDocument, isEditing }) => {var _entityDocument$get;\n  if (!isEditing || !(entityDocument !== null && entityDocument !== void 0 && entityDocument.get('_id'))) {\n    return null;\n  }\n\n  const newSelections = userSelections.toJS();\n\n  const currentSelections = (_entityDocument$get = entityDocument.get('extractedMetadata')) !== null && _entityDocument$get !== void 0 && _entityDocument$get.size ?\n  entityDocument.toJS().extractedMetadata.map((currentSelection) => _objectSpread(_objectSpread({},\n  currentSelection), {}, {\n    isCurrent: true })) :\n\n  [];\n\n  const selections = uniqueSelections(currentSelections, newSelections);\n\n  if (selections.length) {\n    return /*#__PURE__*/(\n      React.createElement(React.Fragment, null,\n      selections.map((selection) => {\n        const selected = selection.selection;\n        const rectangles = ((selected === null || selected === void 0 ? void 0 : selected.selectionRectangles) || []).map((rectangle) => _objectSpread({\n          regionId: rectangle.page },\n        rectangle));\n\n        const highlight = {\n          text: selected === null || selected === void 0 ? void 0 : selected.text,\n          selectionRectangles: rectangles };\n\n\n        return /*#__PURE__*/(\n          _jsx(\"div\", {\n\n            \"data-testid\": selection.timestamp,\n            className: \"selection\" }, selection.propertyID || selection.name, /*#__PURE__*/\n\n          _jsx(Highlight, {\n            textSelection: highlight,\n            color: selection.isCurrent ? '#B1F7A3' : '#F27DA5' })));\n\n\n\n      })));\n\n\n  }\n\n  return null;\n};\n\nconst container = connector(PageSelectionsComponent);\n\nexport { container as PageSelections };","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport { isClient } from \"../../utils\";\nimport { PageReferences } from \"../../Viewer/components/PageReferences\";\nimport { PageSelections } from \"../../Viewer/components/PageSelections\";\nimport PDFJS, { textLayerFactory, EventBus } from \"../PDFJS\";\n\nclass PDFPage extends Component {\n  constructor(props) {\n    super(props);\n    this.state = { rendered: false };\n  }\n\n  componentDidMount() {\n    this.scrollCallback = this.scroll.bind(this);\n\n    if (this.pageContainer && this.pageShouldRender()) {\n      this.renderPage();\n    }\n\n    this.props.getViewportContainer().addEventListener('scroll', this.scrollCallback);\n    this._mounted = true;\n  }\n\n  componentWillUnmount() {\n    if (this.pdfPageView) {\n      this.pdfPageView.destroy();\n    }\n    this.props.getViewportContainer().removeEventListener('scroll', this.scrollCallback);\n    this._mounted = false;\n  }\n\n  scroll() {\n    if (this.pageShouldRender() && !this.state.rendered) {\n      this.renderPage();\n    }\n\n    if (!this.pageShouldRender() && this.pdfPageView) {\n      this.pdfPageView.cancelRendering();\n      this.pdfPageView.destroy();\n      if (this.state.rendered) {\n        this.props.onUnload(this.props.page);\n      }\n      this.setState({ rendered: false });\n    }\n  }\n\n  pageShouldRender() {\n    const pageRectangle = this.pageContainer.getBoundingClientRect();\n    const vWidth = window.innerWidth || document.documentElement.clientWidth;\n    const vHeight = window.innerHeight || document.documentElement.clientHeight;\n\n    if (\n    pageRectangle.right < 0 ||\n    pageRectangle.bottom < -500 ||\n    pageRectangle.left > vWidth ||\n    pageRectangle.top > vHeight + 500)\n    {\n      this.props.onHidden(this.props.page);\n      return false;\n    }\n    this.checkVisibility(pageRectangle);\n    return true;\n  }\n\n  checkVisibility(pageRectangle) {\n    const viewportRect = this.props.getViewportContainer().getBoundingClientRect();\n\n    const relativeElementRect = {\n      top: pageRectangle.top - viewportRect.top,\n      bottom: pageRectangle.bottom };\n\n\n    const offsetTop = relativeElementRect.top < 0 ? -relativeElementRect.top : 0;\n    const offsetBottom =\n    pageRectangle.bottom - viewportRect.bottom > 0 ?\n    pageRectangle.bottom - viewportRect.bottom :\n    0;\n    const visibility = pageRectangle.height - offsetTop - offsetBottom;\n\n    if (visibility > 0) {\n      this.props.onVisible(this.props.page, visibility);\n    }\n\n    if (visibility < 0) {\n      this.props.onHidden(this.props.page);\n    }\n  }\n\n  renderReferences() {\n    if (this.state.rendered) {\n      return /*#__PURE__*/(\n        React.createElement(React.Fragment, null, /*#__PURE__*/\n        _jsx(PageSelections, {}), /*#__PURE__*/\n        _jsx(PageReferences, { page: this.props.page, onClick: this.props.highlightReference })));\n\n\n    }\n\n    return false;\n  }\n\n  renderPage() {\n    if (!this.state.rendered && this.pdfPageView) {\n      this.props.onLoading(this.props.page);\n      this.pdfPageView.draw().catch((e) => e);\n      this.setState({ rendered: true });\n\n      return;\n    }\n    if (!this.state.rendered) {\n      this.props.onLoading(this.props.page);\n      this.setState({ rendered: true });\n      this.props.pdf.getPage(this.props.page).then((page) => {\n        const scale = 1;\n\n        this.pdfPageView = new PDFJS.PDFPageView({\n          container: this.pageContainer,\n          id: this.props.page,\n          scale,\n          defaultViewport: page.getViewport({ scale }),\n          textLayerMode: 2,\n          textLayerFactory,\n          eventBus: new EventBus() });\n\n\n        this.pdfPageView.setPdfPage(page);\n        this.pdfPageView.\n        draw().\n        then(() => {\n          if (this._mounted) {\n            this.setState({ height: this.pdfPageView.viewport.height });\n          }\n        }).\n        catch((e) => e);\n      });\n    }\n  }\n\n  render() {\n    const style = { height: 1100 };\n    if (this.state && this.state.height) {\n      style.height = this.state.height + 20;\n    }\n    return /*#__PURE__*/(\n      React.createElement(\"div\", {\n        id: `page-${this.props.page}`,\n        className: \"doc-page\",\n        ref: (ref) => {\n          this.pageContainer = ref;\n        },\n        style: style },\n\n      this.renderReferences()));\n\n\n  }}\n\n\nPDFPage.defaultProps = {\n  getViewportContainer: () => isClient ? document.querySelector('.document-viewer') : null,\n  onVisible: () => {},\n  onHidden: () => {},\n  highlightReference: () => {} };\n\n\n\n\n\n\n\n\n\n\n\n\n\nexport default PDFPage;"],"names":["ownKeys","object","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","key","_defineProperty","getOwnPropertyDescriptors","defineProperties","defineProperty","obj","value","configurable","writable","PDFJS","pdfjsLib","textLayerFactory","HOT","GlobalWorkerOptions","workerSrc","DefaultTextLayerFactory","unique","v","a","indexOf","_excluded","REACT_ELEMENT_TYPE","_jsx","type","props","children","Symbol","for","defaultProps","childrenLength","childArray","Array","propName","$$typeof","ref","_owner","_objectWithoutProperties","excluded","sourceKeys","_objectWithoutPropertiesLoose","sourceSymbolKeys","prototype","propertyIsEnumerable","call","indexdReferencesByPage","state","documentViewer","targetDocReferences","size","references","targetDoc","get","doc","toJS","reduce","mappedReferences","connection","entity","reference","selectionRectangles","map","selection","page","PageReferences","connect","activeReference","uiState","r","_r$_id","color","_id","_ref","regionId","highlight","className","onClick","bind","toString","textSelection","container","userSelections","metadataExtraction","entityDocument","isEditing","Boolean","sidepanel","metadata","connector","_entityDocument$get","newSelections","selections","uniqBy","uniqueSelections","extractedMetadata","currentSelection","isCurrent","selected","rectangles","rectangle","text","timestamp","propertyID","name","PDFPage","Component","constructor","super","this","rendered","componentDidMount","scrollCallback","scroll","pageContainer","pageShouldRender","renderPage","getViewportContainer","addEventListener","_mounted","componentWillUnmount","pdfPageView","destroy","removeEventListener","cancelRendering","onUnload","setState","pageRectangle","getBoundingClientRect","vWidth","window","innerWidth","document","documentElement","clientWidth","vHeight","innerHeight","clientHeight","right","bottom","left","top","onHidden","checkVisibility","viewportRect","relativeElementRect","offsetTop","offsetBottom","visibility","height","onVisible","renderReferences","highlightReference","onLoading","draw","catch","e","pdf","getPage","then","id","scale","defaultViewport","getViewport","textLayerMode","eventBus","setPdfPage","viewport","render","style","querySelector"],"sourceRoot":""}