{"version":3,"file":"LazyLoadPieChart.0942015731ed36545016.bundle.js","mappings":"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","sources":["webpack://uwazi/./app/react/Markdown/components/PieChartLabel.js","webpack://uwazi/./app/react/Markdown/components/PieChart.js"],"sourcesContent":["var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import React from 'react';\nimport PropTypes from 'prop-types';\n\nconst PieChartLabel = (props) => {\n  const { data, cx, cy, midAngle, innerRadius, outerRadius, value, index } = props;\n\n  const RADIAN = Math.PI / 180;\n  const radius = 25 + innerRadius + (outerRadius - innerRadius);\n  const x = cx + radius * Math.cos(-midAngle * RADIAN);\n  const y = cy + radius * Math.sin(-midAngle * RADIAN);\n\n  return /*#__PURE__*/(\n    _jsx(\"text\", {\n      x: x,\n      y: y,\n      fill: \"#8884d8\",\n      textAnchor: x > cx ? 'start' : 'end',\n      dominantBaseline: \"central\" }, void 0,\n\n    data[index].label, \" (\", value, \")\"));\n\n\n};\n\nPieChartLabel.defaultProps = {\n  cx: 0,\n  cy: 0,\n  value: 0,\n  innerRadius: 0,\n  outerRadius: 0,\n  midAngle: 0,\n  index: 0 };\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nexport default PieChartLabel;","var REACT_ELEMENT_TYPE;function _jsx(type, props, key, children) {REACT_ELEMENT_TYPE || (REACT_ELEMENT_TYPE = \"function\" == typeof Symbol && Symbol.for && Symbol.for(\"react.element\") || 60103);var defaultProps = type && type.defaultProps,childrenLength = arguments.length - 3;if (props || 0 === childrenLength || (props = { children: void 0 }), 1 === childrenLength) props.children = children;else if (childrenLength > 1) {for (var childArray = new Array(childrenLength), i = 0; i < childrenLength; i++) childArray[i] = arguments[i + 3];props.children = childArray;}if (props && defaultProps) for (var propName in defaultProps) void 0 === props[propName] && (props[propName] = defaultProps[propName]);else props || (props = defaultProps || {});return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: void 0 === key ? null : \"\" + key, ref: null, props: props, _owner: null };}import React from 'react';\nimport { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport Immutable from 'immutable';\n\nimport { ResponsiveContainer, PieChart, Pie, Cell, Tooltip } from 'recharts';\n\nimport Loader from \"../../components/Elements/Loader\";\nimport { arrayUtils } from \"../../Charts\";\nimport PieChartLabel from \"./PieChartLabel\";\nimport markdownDatasets from \"../markdownDatasets\";\n\nconst formatData = (data, property, options) => {\n  let formattedData = arrayUtils.sortValues(arrayUtils.formatDataForChart(data, property, options));\n\n  if (options.scatter) {\n    formattedData = formattedData.map((value) => ({\n      id: value.id,\n      label: `${value.parent} - ${value.label}`,\n      results: value.results }));\n\n  }\n\n  return formattedData;\n};\n\nexport const PieChartComponent = (props) => {\n  const {\n    showLabel,\n    outerRadius,\n    innerRadius,\n    property,\n    data,\n    classname,\n    context,\n    scatter,\n    colors,\n    maxCategories,\n    pluckCategories } =\n  props;\n\n  let output = /*#__PURE__*/_jsx(Loader, {});\n\n  if (data) {\n    const aggregateOthers = props.aggregateOthers === 'true';\n\n    const formattedData = formatData(data, property, {\n      context,\n      scatter,\n      excludeZero: true,\n      maxCategories,\n      aggregateOthers,\n      pluckCategories: JSON.parse(pluckCategories) });\n\n\n    const sliceColors = colors.split(',');\n    const shouldShowLabel = showLabel === 'true';\n    output = /*#__PURE__*/\n    _jsx(ResponsiveContainer, { width: \"100%\", height: 222 }, void 0, /*#__PURE__*/\n    _jsx(PieChart, { width: 222, height: 222 }, void 0, /*#__PURE__*/\n    _jsx(Pie, {\n      data: formattedData,\n      dataKey: \"results\",\n      nameKey: \"label\",\n      innerRadius: innerRadius,\n      outerRadius: outerRadius,\n      fill: \"#8884d8\",\n      labelLine: shouldShowLabel,\n      label: shouldShowLabel ? /*#__PURE__*/_jsx(PieChartLabel, { data: formattedData }) : undefined }, void 0,\n\n    formattedData.map((_entry, index) => /*#__PURE__*/\n    _jsx(Cell, { fill: sliceColors[index % sliceColors.length] }, index))),\n\n\n    !shouldShowLabel && /*#__PURE__*/_jsx(Tooltip, {})));\n\n\n\n  }\n\n  return /*#__PURE__*/_jsx(\"div\", { className: `PieChart ${classname}` }, void 0, output);\n};\n\nPieChartComponent.defaultProps = {\n  context: 'System',\n  scatter: false,\n  innerRadius: '0',\n  outerRadius: '105',\n  classname: '',\n  colors: '#ffcc00,#ffd633,#ffe066,#ffeb99,#fff5cc',\n  data: null,\n  showLabel: 'false',\n  aggregateOthers: 'false',\n  maxCategories: '0',\n  pluckCategories: '[]' };\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nexport const mapStateToProps = (state, props) => ({\n  data: markdownDatasets.getAggregations(state, props),\n  thesauris: state.thesauris });\n\n\nexport default connect(mapStateToProps)(PieChartComponent);"],"names":["REACT_ELEMENT_TYPE","_jsx","type","props","key","children","Symbol","for","defaultProps","childrenLength","arguments","length","childArray","Array","i","propName","$$typeof","ref","_owner","PieChartLabel","data","cx","cy","midAngle","innerRadius","outerRadius","value","index","RADIAN","Math","PI","radius","x","cos","y","sin","fill","textAnchor","dominantBaseline","label","PieChartComponent","showLabel","property","classname","context","scatter","colors","maxCategories","pluckCategories","output","Loader","formattedData","options","map","id","parent","results","formatData","excludeZero","aggregateOthers","JSON","parse","sliceColors","split","shouldShowLabel","ResponsiveContainer","width","height","PieChart","Pie","dataKey","nameKey","labelLine","undefined","_entry","Cell","Tooltip","className","mapStateToProps","state","markdownDatasets","thesauris","connect"],"sourceRoot":""}